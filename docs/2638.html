<html>
<head>
<title>A Complete and Working Blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个完整的和工作的区块链</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/blockchain-example-c2f97b811d17?source=collection_archive---------2-----------------------#2020-01-07">https://medium.com/coinmonks/blockchain-example-c2f97b811d17?source=collection_archive---------2-----------------------#2020-01-07</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/d3d1b5f3075831d456090b0457aaaf17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SSlGbmE6JVl2qKckwnA7Q.jpeg"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek"><a class="ae ig" href="https://pixabay.com/it/users/xresch-7410129/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3750157" rel="noopener ugc nofollow" target="_blank">xresch</a> photos from <a class="ae ig" href="https://pixabay.com/it/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3750157" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><div class=""/><blockquote class="jg jh ji"><p id="1367" class="jj jk jl jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">区块链:每个人都在谈论它，只有少数人知道它是如何工作的</p></blockquote><p id="fcd7" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">本文将深入探讨区块链的技术细节，并提供一个简单但有效的Node.js示例。</p><h1 id="9eb2" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">区块链简史</h1><p id="8d1c" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">区块链在2008年末随着中本聪的论文而出现。中本聪是匿名作者选择的笔名。关于中本聪的真实身份，多年来流传着不同的说法。其中一种理论认为中本聪是一群人。</p><p id="cc5d" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik">区块链发明多年来主要用于加密货币</strong>。但是它的使用可以扩展到每一种需要“证明”的情况。<strong class="jm ik">当一个语句被插入到区块链中时，没有人能够不花大力气就改变它的内容</strong>。</p><blockquote class="lo"><p id="03c3" class="lp lq ij bd lr ls lt lu lv lw lx kh ek translated"><a class="ae ig" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><h1 id="8bce" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw ly ky kz la lz lc ld le ma lg lh li dt translated">它是如何工作的</h1><p id="ab86" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">区块链的细节可以用一个“简单”的图表来解释。</p><figure class="mc md me mf fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff mb"><img src="../Images/e7d6c52fd2f60521b81b706db29e40ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4u7VLA0D2Yp10SU-Vhk-g.png"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek">This is a Blockchain “A picture is worth 1000 words” (cit.)</figcaption></figure><p id="3d90" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">就是这样！我可以在这里结束我的文章，让您来实现它。请随意沿着这条路走下去。</p><p id="d978" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">无论如何，对于那些想要一个工作实现的解释的人，我将在我的文章中更进一步。</p></div><div class="ab cl mg mh hb mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hm hn ho hp hq"><p id="ebd9" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik">区块链核心细节是前一页哈希和页哈希区块</strong>之间的虚线箭头。这一行构建了链，使攻击者无法篡改链。对于旧页面，篡改更难。这是因为如果攻击者将其事务添加到第一页，它必须通过重做数学运算来重建后续页，以便为每个后续页找到<strong class="jm ik">合适的页散列。当页面散列改变时，它也将改变下一个页面散列，因为散列算法参数是不同的。</strong></p><p id="2782" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">合适的页面散列意味着计算出的散列满足一个<strong class="jm ik">工作证明</strong> (POW)。POW是一个使哈希与区块链页面相关联的问题。在上面的例子中，功率由以下问题表示:</p><blockquote class="jg jh ji"><p id="51bd" class="jj jk jl jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">找到生成以“42”开头的散列的填充(随机字符串)</p></blockquote><p id="aa58" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">每个区块链都定义了它能力。例如，比特币力量是:</p><blockquote class="jg jh ji"><p id="4b5c" class="jj jk jl jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">哈希必须以n个零开始</p></blockquote><h1 id="e72e" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">处理</h1><p id="1533" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">交易可以是货币交易，就像区块链的加密货币一样，也可以是用户想要添加的任何内容:购买合同、当日报价。</p><p id="5b42" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">区块链拥有一个打开的页面，用于放置新的交易。在这里给出的例子中，功率竞争是由单个节点在打开的页面上完成的。<strong class="jm ik">在生产就绪网络中，多个节点加入POW竞赛，第一个发现POW的节点“关闭”页面并获得奖励</strong>。</p><figure class="mc md me mf fq hv fe ff paragraph-image"><div class="fe ff mn"><img src="../Images/76c4d7411006dbc2a6b327641a1c0423.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*uI8DZv1WCamHVqU4TGF5vg.png"/></div><figcaption class="ic id fg fe ff ie if bd b be z ek">The Miner adds it transaction</figcaption></figure><p id="302d" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">上图解释了挖掘过程是如何进行的。一名矿工打开当前页面(第n页),在他的钱包中添加了一笔10€的新的特殊交易，没有发送者。然后生成一些填充，直到获得以“42”开始的页面哈希。10€奖励是由区块链规则定义的。<strong class="jm ik">没有发送者的交易就像矿工刚刚通过分辨能力发现的金块</strong>。</p><h1 id="996f" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">区块链验证</h1><p id="6d2c" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">节点如何满足它们的相互信任？</p><p id="9b57" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik">区块链账本是公开的</strong>，每个节点都可以:</p><ol class=""><li id="4e5f" class="mo mp ij jm b jn jo jr js ki mq kj mr kk ms kh mt mu mv mw dt translated">获取公共分类账</li><li id="9ac1" class="mo mp ij jm b jn mx jr my ki mz kj na kk nb kh mt mu mv mw dt translated">验证每个页面的哈希是否正确</li><li id="c5f2" class="mo mp ij jm b jn mx jr my ki mz kj na kk nb kh mt mu mv mw dt translated">验证页面是否正确链接</li><li id="b287" class="mo mp ij jm b jn mx jr my ki mz kj na kk nb kh mt mu mv mw dt translated">核实每笔“金块”交易的金额是否正确</li></ol></div><div class="ab cl mg mh hb mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hm hn ho hp hq"><h1 id="5000" class="kl km ij bd kn ko nc kq kr ks nd ku kv kw ne ky kz la nf lc ld le ng lg lh li dt translated">与现实的差距</h1><p id="5fe6" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">由于其复杂性，这里不解释具有多个节点的区块链网络如何工作的细节。<strong class="jm ik">分布式区块链面临的问题主要和分布式计算一样</strong>:</p><p id="bb14" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">1.信息(分类帐)传播</p><p id="8639" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">2.网络拓扑知识传播</p><p id="7870" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">3.并发和冲突解决</p><p id="6e00" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">这些问题在文献中有很多解决方案。为每个现有区块链选择的解决方案定义了协议的核心部分。这些方面决定了给定区块链的主要漏洞和成败。</p><h1 id="188d" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">工作中的Github项目</h1><p id="c671" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">你可以在Github库中找到所有的示例源代码。</p><p id="ba9b" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">存储库由不同的文件夹组成。</p><p id="3feb" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik">/deploy</strong>docker-compose . yml所在的位置运行整个项目。</p><p id="afbd" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik"> /generator </strong>是一个简单的Node.js流生成器，它获取Reddit帖子，并将其作为事务发送到区块链。</p><p id="2af1" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik">/检查员</strong>是区块链的外部检查员。在区块链网络中，每个人都应该可以自由验证链(账本)是否可信</p><p id="055e" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jm ik">/账本</strong>是区块链账本管理器，这个项目的核心组件</p><p id="0328" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">在下文中，我们将集中讨论后一个组件。</p><h1 id="ba83" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">运行代码</h1><p id="1d95" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">如<a class="ae ig" href="https://github.com/ccarcaci/poc-blockchain" rel="noopener ugc nofollow" target="_blank"> Github项目主页所报道的</a>先决条件是:</p><ul class=""><li id="f7d6" class="mo mp ij jm b jn jo jr js ki mq kj mr kk ms kh nh mu mv mw dt translated">码头工人</li><li id="2916" class="mo mp ij jm b jn mx jr my ki mz kj na kk nb kh nh mu mv mw dt translated">npm</li><li id="c95f" class="mo mp ij jm b jn mx jr my ki mz kj na kk nb kh nh mu mv mw dt translated">wget</li></ul><p id="e1bc" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">要运行和停止代码，只需启动脚本:</p><pre class="mc md me mf fq ni nj nk nl aw nm dt"><span id="b7c2" class="nn km ij nj b fv no np l nq nr">$ ./run.sh<br/>$ ./stop.sh</span></pre><p id="754a" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">从/POC-区块链主文件夹。</p><h1 id="aa5c" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">分类帐</h1><p id="0a77" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">分类帐管理器是Node.js Http服务器，可以接收新的交易，显示当前链，并在请求时验证区块链有效性。除此之外，<strong class="jm ik">分类帐管理器在后台运行挖掘过程:</strong></p><figure class="mc md me mf fq hv"><div class="bz el l di"><div class="ns nt l"/></div></figure><p id="c650" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">代码没有实现多节点区块链网络:相关问题的解决将核心区块链代码置于后台。</p><p id="db5f" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">莱杰是一个(几乎)六边形的然而又是<a class="ae ig" href="https://dzone.com/articles/get-started-with-test-driven-development-a-beginne" rel="noopener ugc nofollow" target="_blank">添加的</a>应用程序。</p><figure class="mc md me mf fq hv fe ff paragraph-image"><div class="fe ff nu"><img src="../Images/8f312eaf39e780b49868099895bd9838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*BGz3gwkrmFnk8cpcuXiC1g.png"/></div><figcaption class="ic id fg fe ff ie if bd b be z ek">Ledger is Hexagonal</figcaption></figure><p id="6cf0" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">上面的图片展示了我为保持<strong class="jm ik">在链和密码管理功能</strong>上的纯洁性所做的努力(我希望这些努力足够了)。在纯度界限之外，一些模块与外部世界相互作用。与六边形结构的完整配件的一个区别是缺少适配器。别指望能找到他们。</p><p id="a512" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">pure部分和Store组件是使用TDD开发的。您可以在/test文件夹中找到这些测试。</p><p id="af59" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">不管怎样，<strong class="jm ik">我会帮你节省时间找到代码的核心部分</strong>，在这里:</p><figure class="mc md me mf fq hv"><div class="bz el l di"><div class="ns nt l"/></div></figure><p id="e0d4" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">该函数首先获取链的当前页面(最后一页)，然后验证是否有新的事务。然后<strong class="jm ik">使用UUID函数生成新的随机填充，并尝试使用SHA-3函数</strong>计算散列。</p><p id="ba89" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">如果散列满足POW，则新的页面被添加到链中，并且链被返回。</p><figure class="mc md me mf fq hv fe ff paragraph-image"><div class="fe ff nv"><img src="../Images/596edded70f38a499950127b043718db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*a7LJf5jGUvp-L9LC4_m5zw.gif"/></div><figcaption class="ic id fg fe ff ie if bd b be z ek">Blockchain is running</figcaption></figure><p id="1106" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">动画gif展示了分类帐、生成器和检查员应用程序的协同工作。Ledger正在挖掘新页面，Generator正在发送Reddit帖子，Inspector正在验证区块链是否有效。</p><p id="e638" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">您可以使用curl命令，使用分类帐应用程序的get请求/chain路径来获取整个区块链。应用程序的端口从docker-compose定义中公开。</p><h1 id="5d2c" class="kl km ij bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">最后的话</h1><p id="a323" class="pw-post-body-paragraph jj jk ij jm b jn lj jp jq jr lk jt ju ki ll jx jy kj lm kb kc kk ln kf kg kh hm dt translated">我希望你喜欢这篇文章，并且<strong class="jm ik">现在当人们谈论区块链的时候，你已经意识到在舞台后面发生了什么。</strong></p><p id="2fc3" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我认为，我们经常听到有人谈论被视为巫术的技术。在我看来，一个好的技术人员应该能够将不一致的聊天和技术细节区分开来。这篇文章旨在得到这一点。</p><p id="3ad5" class="pw-post-body-paragraph jj jk ij jm b jn jo jp jq jr js jt ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">请留下评论，不好的也可以，非常感谢。</p><blockquote class="lo"><p id="5f29" class="lp lq ij bd lr ls lt lu lv lw lx kh ek translated"><a class="ae ig" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nx ny nz oa ob hv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nw"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="mc md me mf fq hv fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff oc"><img src="../Images/a06b758bdcc47dca7c2504f298674d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_s6JsD3P0hVj32E7t9EtGg.jpeg"/></div></a></figure></div></div>    
</body>
</html>