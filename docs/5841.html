<html>
<head>
<title>P2P Bitcoin-Settled Derivatives: Forward Contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">P2P比特币结算衍生品:远期合约</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/p2p-bitcoin-settled-derivatives-forward-contracts-94d48b909b94?source=collection_archive---------5-----------------------#2021-10-24">https://medium.com/coinmonks/p2p-bitcoin-settled-derivatives-forward-contracts-94d48b909b94?source=collection_archive---------5-----------------------#2021-10-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="00b9" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">远期合同介绍</h1><p id="d878" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><a class="ae km" href="https://en.wikipedia.org/wiki/Forward_contract" rel="noopener ugc nofollow" target="_blank">远期合同</a>是双方在未来特定时间以预定价格购买或出售资产的<a class="ae km" href="https://en.wikipedia.org/wiki/Derivative_(finance)" rel="noopener ugc nofollow" target="_blank">衍生产品</a>。远期是对冲波动性的一种非常常见的工具。因此，使用美元远期合约的人可以对冲美元对比特币汇率的波动。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff kn"><img src="../Images/e35f6179022f1e6fdcb6c30d5bac7994.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*T_skjnHmH2v_kEvx.jpg"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek"><a class="ae km" href="https://corporatefinanceinstitute.com/resources/knowledge/finance/forward-contract/" rel="noopener ugc nofollow" target="_blank">The payoff diagram of a forward contract</a></figcaption></figure><p id="4746" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">例如，Alice与Bob签订了一份美元远期合约。Alice同意从现在起一个月后从Bob处购买5000美元，每比特币100美元(即每美元100，000 satoshi (=0.01比特币))。</p><p id="4d29" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">Alice是一名矿工，必须每月支付电费，她希望降低波动风险。这份合同到期时，她将有权获得5000美元，不管当时的比特币汇率如何。Bob是一名交易员，从事这一合约是作为一种投机手段，期望比特币价格上涨并扭亏为盈。</p><p id="9cc7" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">他们同意用比特币结算合同。双方将以比特币的形式向对方支付约定价格和市场价格之间的差额。因此，如果比特币的美元价值贬值(即比特币价格下跌)，鲍勃将向爱丽丝支付差额。同样的，如果比特币升值，爱丽丝也要付给鲍勃。</p><h1 id="ad43" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">比特币的美元远期合约</h1><p id="7b57" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">有了这种远期合约，价格波动风险得到了缓解，但它引入了交易对手风险。Alice或Bob可能在合同到期时不履行合同并拒绝付款。</p><p id="62df" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">我们使用比特币智能合约分两步实施合约:</p><ol class=""><li id="f0f4" class="le lf ht jq b jr kz jv la jz lg kd lh kh li kl lj lk ll lm dt translated">爱丽丝和鲍勃各锁定50个比特币(5000 * 0.01比特币/美元)进入以下合约。抵押品不需要第三方托管人。</li><li id="46c5" class="le lf ht jq b jr ln jv lo jz lp kd lq kh lr kl lj lk ll lm dt translated">当合约到期时，甲骨文公布现货价格，抵押品可以使用公布的价格分割。因为任何一方都不能欺骗，所以交易对手的风险降低了。</li></ol><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="ls lt l"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek"><a class="ae km" href="https://github.com/sCrypt-Inc/boilerplate/tree/master/contracts/forward.scrypt" rel="noopener ugc nofollow" target="_blank">Forward Contract</a></figcaption></figure><p id="0845" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">智能合约中的甲骨文使用<a class="ae km" href="https://xiaohuiliu.medium.com/access-external-data-from-bitcoin-smart-contracts-2ecdc7448c43" rel="noopener">拉宾签名</a>来签署价格馈送(第29行)和<a class="ae km" href="https://xiaohuiliu.medium.com/op-push-tx-3d3d279174c1" rel="noopener"> OP_PUSH_TX </a>来分割抵押品100个比特币。</p><p id="ecbb" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">合同到期时有三种可能:</p><ol class=""><li id="635f" class="le lf ht jq b jr kz jv la jz lg kd lh kh li kl lj lk ll lm dt translated">价格等于100K sats美元(即每比特币100美元)。第38行的收益是0。爱丽丝和鲍勃各拿回50个比特币。</li><li id="f932" class="le lf ht jq b jr ln jv lo jz lp kd lq kh lr kl lj lk ll lm dt translated">价格高于100K sats美元。比如200k sats/美元(即比特币价格降至50美元)。Bob要付给Alice <em class="lu"> 5000 * (200K -100K) = 5亿sats = 5比特币</em>。爱丽丝得到55个比特币，鲍勃得到45个。</li><li id="1e03" class="le lf ht jq b jr ln jv lo jz lp kd lq kh lr kl lj lk ll lm dt translated">价格低于100K sats/美元。比如是50K sats/美元(即比特币价格涨到200美元)。爱丽丝要付给鲍勃<em class="lu">5000 *(100K-50K)= 2.5亿sats = 2.5比特币</em>。爱丽丝得到47.5个比特币，鲍勃得到52.5个。</li></ol><h2 id="75a2" class="lv ir ht bd is lw lx ly iw lz ma mb ja jz mc md je kd me mf ji kh mg mh jm mi dt translated">讨论</h2><p id="e51d" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">我们只实施了基本的智能合约作为概念验证。有许多方法可以使它更实用，我们列举了其中的一些。</p><ul class=""><li id="744f" class="le lf ht jq b jr kz jv la jz lg kd lh kh li kl mj lk ll lm dt translated">最大敞口:当价格升至110万沙特/美元时(比特币价格降至90.9美元)。鲍勃应该付给爱丽丝<em class="lu"> 5000 * (1100K -100K) = 5000万萨特= 50个比特币。</em>如果价格进一步上涨，鲍勃无法用50个比特币<em class="lu"> </em>作为抵押品支付全额。需要更多的抵押品来抵御更大的波动风险。</li><li id="5e15" class="le lf ht jq b jr ln jv lo jz lp kd lq kh lr kl mj lk ll lm dt translated">用美元结算:当比特币上有美元代币时，合同可以用美元结算，而不是比特币。也可以使用美元作为抵押品。</li><li id="8ccc" class="le lf ht jq b jr ln jv lo jz lp kd lq kh lr kl mj lk ll lm dt translated">万无一失:如果oracle没有发布所需的价格数据，我们可以在智能合约中添加一个公共函数，让Alice和Bob都签名以取回他们的抵押品。</li><li id="fb30" class="le lf ht jq b jr ln jv lo jz lp kd lq kh lr kl mj lk ll lm dt translated">多个oracle:为了降低恶意Oracle的风险，可以使用多个Oracle。</li></ul><h1 id="f7bd" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">摘要</h1><p id="ad80" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">我们展示了一份比特币结算的美元远期合约。它可以很容易地扩展到任何需要根据外部未来价值分割比特币计价资金的金融工具。</p><p id="6ffe" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">基础资产可以是任何东西，比如黄金、小麦或石油。只要有一个oracle发布价格，就可以使用上面的智能合约建立远期合约。</p></div><div class="ab cl mk ml hb mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hm hn ho hp hq"><p id="9281" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">[1]这种类型的远期被称为<a class="ae km" href="https://www.dripcapital.com/en-us/resources/blog/what-is-a-forward-contract#10" rel="noopener ugc nofollow" target="_blank">无本金交割远期</a>。</p></div></div>    
</body>
</html>