<html>
<head>
<title>Building an ERC721 non-fungible token smart contract and using metamask to interact with it via a web interface. (PART I)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个ERC721不可替换令牌智能合约，并使用元掩码通过web接口与其进行交互。(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/building-an-erc721-non-fungible-token-smart-contract-and-using-metamask-to-interact-with-it-via-a-59583f0dd6c1?source=collection_archive---------1-----------------------#2018-07-27">https://medium.com/coinmonks/building-an-erc721-non-fungible-token-smart-contract-and-using-metamask-to-interact-with-it-via-a-59583f0dd6c1?source=collection_archive---------1-----------------------#2018-07-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/267af447a5da507c41e01b58977d5819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihVz6jlMNCG58F9ACSx--w.png"/></div></div></figure></div><div class="ab cl jb jc hb jd" role="separator"><span class="je bw bk jf jg jh"/><span class="je bw bk jf jg jh"/><span class="je bw bk jf jg"/></div><div class="hm hn ho hp hq"><h1 id="c76c" class="ji jj ht bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dt translated">介绍</h1><p id="55fd" class="pw-post-body-paragraph kg kh ht ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld hm dt translated">今天，我将通过解释如何创建一个erc721不可替换令牌(nft)智能合约，让您的生活稍微轻松一点。我们将使用我在我的<a class="ae le" href="https://www.qwoyn.io/document" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上构建的例子。文档(DQMT) 是一种任何人都可以创建想法、物品/归属、诗歌和任何你内心渴望的东西的不变记录的方式。我们通过要求用户提供三条信息来实现这一点。1)类型，2)标题和3)描述。</p><p id="9059" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated"><strong class="ki hu"> Type </strong> -当我们创建文档的概念时，我们希望确保我们有办法跟踪令牌的类型。在我们的例子中，我们选择了类型1和2。类型1是思想和想法，类型2是物品/财产，但理论上你可以用任何数字来识别类型。</p><p id="a373" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated"><strong class="ki hu">标题</strong>——这应该是不言自明的。给你的令牌一个标题。随便你怎么命名！</p><p id="7734" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated"><strong class="ki hu">描述</strong>——这是你大放异彩的地方。在这一部分描述你的想法或项目。</p><blockquote class="lk"><p id="d0e7" class="ll lm ht bd ln lo lp lq lr ls lt ld ek translated"><a class="ae le" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><h1 id="ef4e" class="ji jj ht bd jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb ly kd ke kf dt translated">写合同</h1><p id="c7bd" class="pw-post-body-paragraph kg kh ht ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld hm dt translated">让我们开始吧，创建合同。我有意省略了我在完整的solidity合同中实现的一些安全功能。如果你想看完整的合同，请参见<a class="ae le" href="https://github.com/Qwoyn/Document/blob/master/contracts/document.sol" rel="noopener ugc nofollow" target="_blank"> Qwoyn Github </a>。我们将使用<a class="ae le" href="https://remix.ethereum.org" rel="noopener ugc nofollow" target="_blank"> Remix </a>作为我们的IDE。</p><figure class="ma mb mc md fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lz"><img src="../Images/d89e978aa02bf969c1ffa71f215c4f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1NLNlgF9lMonpFXdlwsF9g.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Remix Solidity IDE</figcaption></figure><p id="168e" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">打开remix后，请清除样本投票合同并输入:</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="ca13" class="mn jj ht mj b fv mo mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> SafeMath<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Math operations with safety checks that throw on error<br/> */<br/>library SafeMath {</span><span id="331e" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>  * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Multiplies two numbers, throws on overflow.<br/>  */<br/>  function mul(uint256 a, uint256 b) internal pure returns (uint256 c) {<br/>    // Gas optimization: this is cheaper than asserting 'a' not being zero, but the<br/>    // benefit is lost if 'b' is also tested.<br/>    // See: <a class="ae le" href="https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522" rel="noopener ugc nofollow" target="_blank">https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522</a><br/>    if (a == 0) {<br/>      return 0;<br/>    }</span><span id="e0a9" class="mn jj ht mj b fv ms mp l mq mr">c = a * b;<br/>    assert(c / a == b);<br/>    return c;<br/>  }</span><span id="5170" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>  * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Integer division of two numbers, truncating the quotient.<br/>  */<br/>  function div(uint256 a, uint256 b) internal pure returns (uint256) {<br/>    // assert(b &gt; 0); // Solidity automatically throws when dividing by 0<br/>    // uint256 c = a / b;<br/>    // assert(a == b * c + a % b); // There is no case in which this doesn't hold<br/>    return a / b;<br/>  }</span><span id="6d0f" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>  * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Subtracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).<br/>  */<br/>  function sub(uint256 a, uint256 b) internal pure returns (uint256) {<br/>    assert(b &lt;= a);<br/>    return a - b;<br/>  }</span><span id="e6f6" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>  * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Adds two numbers, throws on overflow.<br/>  */<br/>  function add(uint256 a, uint256 b) internal pure returns (uint256 c) {<br/>    c = a + b;<br/>    assert(c &gt;= a);<br/>    return c;<br/>  }<br/>}</span></pre><p id="fa82" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">添加ERC165接口:</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="0116" class="mn jj ht mj b fv mo mp l mq mr">pragma solidity ^0.4.24;</span><span id="669c" class="mn jj ht mj b fv ms mp l mq mr">/** * @title ERC165 * @dev https://github.com/ethereum/EIPs/blob/master/EIPS/eip-165.md */interface ERC165 {   /**   * @notice Query if a contract implements an interface   * @param _interfaceId The interface identifier, as specified in ERC-165   * @dev Interface identification is specified in ERC-165. This function   * uses less than 30,000 gas.   */  </span><span id="21b8" class="mn jj ht mj b fv ms mp l mq mr">function supportsInterface(bytes4 _interfaceId)    <br/>external    <br/>view    <br/>returns (bool);}</span></pre><p id="29d2" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">这里我们已经定义了我们的编译器版本<code class="eh mt mu mv mj b">`pragma solidity ^0.4.24;`</code>和ERC165接口。</p><p id="bf67" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">下一个添加:</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="db68" class="mn jj ht mj b fv mo mp l mq mr">/** * @title ERC721 token receiver interface * @dev Interface for any contract that wants to support safeTransfers * from ERC721 asset contracts. */contract ERC721Receiver {  /**   * @dev Magic value to be returned upon successful reception of an NFT   *  Equals to `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`,   *  which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`   */  bytes4 internal constant ERC721_RECEIVED = 0x150b7a02;   /**   * @notice Handle the receipt of an NFT   * @dev The ERC721 smart contract calls this function on the recipient   * after a `safetransfer`. This function MAY throw to revert and reject the   * transfer. Return of other than the magic value MUST result in the    * transaction being reverted.   * Note: the contract address is always the message sender.   * @param _operator The address which called `safeTransferFrom` function   * @param _from The address which previously owned the token   * @param _tokenId The NFT identifier which is being transfered   * @param _data Additional data with no specified format   * @return `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`   */  </span><span id="7516" class="mn jj ht mj b fv ms mp l mq mr">function onERC721Received(    <br/>address _operator,    <br/>address _from,    <br/>uint256 _tokenId,    <br/>bytes _data  )    <br/>public    returns(bytes4);}</span></pre><p id="dc5a" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">这是支持安全传输的ERC721令牌接口。此时，您的代码应该像这样:</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="1754" class="mn jj ht mj b fv mo mp l mq mr">pragma solidity ^0.4.24;</span><span id="1e2b" class="mn jj ht mj b fv ms mp l mq mr">/** * @title ERC165 * @dev https://github.com/ethereum/EIPs/blob/master/EIPS/eip-165.md */interface ERC165 {   /**   * @notice Query if a contract implements an interface   * @param _interfaceId The interface identifier, as specified in ERC-165   * @dev Interface identification is specified in ERC-165. This function   * uses less than 30,000 gas.   */  </span><span id="166c" class="mn jj ht mj b fv ms mp l mq mr">function supportsInterface(bytes4 _interfaceId)    external    view    returns (bool);}</span><span id="157d" class="mn jj ht mj b fv ms mp l mq mr">/** * @title ERC721 token receiver interface * @dev Interface for any contract that wants to support safeTransfers * from ERC721 asset contracts. */contract ERC721Receiver {  /**   * @dev Magic value to be returned upon successful reception of an NFT   *  Equals to `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`,   *  which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`   */  bytes4 internal constant ERC721_RECEIVED = 0x150b7a02;   /**   * @notice Handle the receipt of an NFT   * @dev The ERC721 smart contract calls this function on the recipient   * after a `safetransfer`. This function MAY throw to revert and reject the   * transfer. Return of other than the magic value MUST result in the    * transaction being reverted.   * Note: the contract address is always the message sender.   * @param _operator The address which called `safeTransferFrom` function   * @param _from The address which previously owned the token   * @param _tokenId The NFT identifier which is being transfered   * @param _data Additional data with no specified format   * @return `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`   */<br/>  <br/>function onERC721Received(    address _operator,    <br/>address _from,    <br/>uint256 _tokenId,    <br/>bytes _data  <br/>)    </span><span id="311b" class="mn jj ht mj b fv ms mp l mq mr">public    returns(bytes4);}</span></pre><p id="b027" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">我们已经初始化了接口，现在让我们添加地址工具</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="f71c" class="mn jj ht mj b fv mo mp l mq mr">/**<br/> * Utility library of inline functions on addresses<br/> */<br/>library AddressUtils {</span><span id="50f5" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * Returns whether the target address is a contract<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> This function will return false if invoked during the constructor of a contract,<br/>   * as the code is not actually created until after the constructor finishes.<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> addr address to check<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> whether the target address is a contract<br/>   */</span><span id="3b8f" class="mn jj ht mj b fv ms mp l mq mr">function isContract(address addr) internal view returns (bool) {<br/>    uint256 size;<br/>    // XXX Currently there is no better way to check if there is a       <br/>    // contract in an address<br/>    // than to check the size of the code at that address.<br/>    // See <a class="ae le" href="https://ethereum.stackexchange.com/a/14016/36603" rel="noopener ugc nofollow" target="_blank">https://ethereum.stackexchange.com/a/14016/36603</a><br/>    // for more details about how this works.<br/>    // TODO Check this again before the Serenity release, because<br/>    // all addresses will be<br/>    // contracts then.<br/>    // solium-disable-next-line security/no-inline-assembly<br/>    <br/>    assembly { size := extcodesize(addr) }<br/>    return size &gt; 0;<br/>  }</span></pre><p id="af75" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">在这里，我们将添加可拥有的合同，以便我们能够转移合同的所有权。</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="16f5" class="mn jj ht mj b fv mo mp l mq mr">contract Ownable {<br/>  address public owner;</span><span id="d7b8" class="mn jj ht mj b fv ms mp l mq mr">event OwnershipRenounced(address indexed previousOwner);<br/>  event OwnershipTransferred(<br/>    address indexed previousOwner,<br/>    address indexed newOwner<br/>  );</span><span id="ea06" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> The Ownable constructor sets the original `owner` of the contract to the sender<br/>   * account.<br/>   */<br/>  constructor() public {<br/>    owner = msg.sender;<br/>  }</span><span id="d465" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Throws if called by any account other than the owner.<br/>   */<br/>  modifier onlyOwner() {<br/>    require(msg.sender == owner);<br/>    _;<br/>  }</span><span id="75a0" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Allows the current owner to relinquish control of the contract.<br/>   * <a class="ae le" href="http://twitter.com/notice" rel="noopener ugc nofollow" target="_blank">@notice</a> Renouncing to ownership will leave the contract without an owner.<br/>   * It will not be possible to call the functions with the `onlyOwner`<br/>   * modifier anymore.<br/>   */<br/>  <br/>function renounceOwnership() public onlyOwner {<br/>    emit OwnershipRenounced(owner);<br/>    owner = address(0);<br/>  }</span><span id="4481" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Allows the current owner to transfer control of the contract to a newOwner.<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _newOwner The address to transfer ownership to.<br/>   */<br/>  function transferOwnership(address _newOwner) public onlyOwner {<br/>    _transferOwnership(_newOwner);<br/>  }</span><span id="1210" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Transfers control of the contract to a newOwner.<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _newOwner The address to transfer ownership to.<br/>   */<br/>  <br/>function _transferOwnership(address _newOwner) internal {<br/>    require(_newOwner != address(0));<br/>    emit OwnershipTransferred(owner, _newOwner);<br/>    owner = _newOwner;<br/>  }<br/>}</span></pre><p id="9543" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">接下来，我们将添加带有lookup的接口，以使用查找表实现erc165。</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="8aff" class="mn jj ht mj b fv mo mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> SupportsInterfaceWithLookup<br/> * <a class="ae le" href="http://twitter.com/author" rel="noopener ugc nofollow" target="_blank">@author</a> Matt Condon (<a class="ae le" href="http://twitter.com/shrugs" rel="noopener ugc nofollow" target="_blank">@shrugs</a>)<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Implements ERC165 using a lookup table.<br/> */<br/>contract SupportsInterfaceWithLookup is ERC165 {<br/>  bytes4 public constant InterfaceId_ERC165 = 0x01ffc9a7;<br/>  /**<br/>   * 0x01ffc9a7 ===<br/>   *   bytes4(keccak256('supportsInterface(bytes4)'))<br/>   */</span><span id="0ca1" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> a mapping of interface id to whether or not it's supported<br/>   */<br/>  mapping(bytes4 =&gt; bool) internal supportedInterfaces;</span><span id="123f" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> A contract implementing SupportsInterfaceWithLookup<br/>   * implement ERC165 itself<br/>   */<br/>  constructor()<br/>    public<br/>  {<br/>    _registerInterface(InterfaceId_ERC165);<br/>  }</span><span id="4b2c" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> implement supportsInterface(bytes4) using a lookup table<br/>   */<br/>  function supportsInterface(bytes4 _interfaceId)<br/>    external<br/>    view<br/>    returns (bool)<br/>  {<br/>    return supportedInterfaces[_interfaceId];<br/>  }</span><span id="f865" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> private method for registering an interface<br/>   */<br/>  function _registerInterface(bytes4 _interfaceId)<br/>    internal<br/>  {<br/>    require(_interfaceId != 0xffffffff);<br/>    supportedInterfaces[_interfaceId] = true;<br/>  }<br/>}</span></pre><p id="2564" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">上述合同不是必需的，但有助于我们实现我们正在寻找的功能。我们要添加的下一部分是ERC721标准，该接口是标准的一部分。这是它的样子，请将它添加到您的合同中。我们稍微修改了一下，但你应该能明白。欲了解更多关于该标准的信息，请访问ERC721.ORG。</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="0fe5" class="mn jj ht mj b fv mo mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> ERC721 Non-Fungible Token Standard basic interface<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> see <a class="ae le" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md</a><br/> */<br/>contract ERC721Basic is ERC165 {<br/>  event Transfer(<br/>    address indexed _from,<br/>    address indexed _to,<br/>    uint256 indexed _tokenId<br/>  );<br/>  event Approval(<br/>    address indexed _owner,<br/>    address indexed _approved,<br/>    uint256 indexed _tokenId<br/>  );<br/>  event ApprovalForAll(<br/>    address indexed _owner,<br/>    address indexed _operator,<br/>    bool _approved<br/>  );</span><span id="5654" class="mn jj ht mj b fv ms mp l mq mr">function balanceOf(address _owner) public view returns (uint256 _balance);<br/>  function ownerOf(uint256 _tokenId) public view returns (address _owner);<br/>  function exists(uint256 _tokenId) public view returns (bool _exists);</span><span id="8e01" class="mn jj ht mj b fv ms mp l mq mr">function approve(address _to, uint256 _tokenId) public;<br/>  function getApproved(uint256 _tokenId)<br/>    public view returns (address _operator);</span><span id="4eaf" class="mn jj ht mj b fv ms mp l mq mr">function setApprovalForAll(address _operator, bool _approved) public;<br/>  function isApprovedForAll(address _owner, address _operator)<br/>    public view returns (bool);</span><span id="ca04" class="mn jj ht mj b fv ms mp l mq mr">function transferFrom(address _from, address _to, uint256 _tokenId) public;<br/>  function safeTransferFrom(address _from, address _to, uint256 _tokenId)<br/>    public;</span><span id="5bf6" class="mn jj ht mj b fv ms mp l mq mr">function safeTransferFrom(<br/>    address _from,<br/>    address _to,<br/>    uint256 _tokenId,<br/>    bytes _data<br/>  )<br/>    public;<br/>}</span><span id="734f" class="mn jj ht mj b fv ms mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> ERC-721 Non-Fungible Token Standard, optional enumeration extension<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> See <a class="ae le" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md</a><br/> */<br/>contract ERC721Enumerable is ERC721Basic {<br/>  function totalSupply() public view returns (uint256);<br/>  function tokenOfOwnerByIndex(<br/>    address _owner,<br/>    uint256 _index<br/>  )<br/>    public<br/>    view<br/>    returns (uint256 _tokenId);</span><span id="6bd3" class="mn jj ht mj b fv ms mp l mq mr">function tokenByIndex(uint256 _index) public view returns (uint256);<br/>}</span><span id="e517" class="mn jj ht mj b fv ms mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> ERC-721 Non-Fungible Token Standard, optional metadata extension<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> See <a class="ae le" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md</a><br/> */<br/>contract ERC721Metadata is ERC721Basic {<br/>  function name() external view returns (string _name);<br/>  function symbol() external view returns (string _symbol);<br/>  function tokenURI(uint256 _tokenId) public view returns (string);<br/>}</span><span id="fe64" class="mn jj ht mj b fv ms mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> ERC-721 Non-Fungible Token Standard, full implementation interface<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> See <a class="ae le" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md</a><br/> */<br/>contract ERC721 is ERC721Basic, ERC721Enumerable, ERC721Metadata {<br/>}</span><span id="eb95" class="mn jj ht mj b fv ms mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> ERC721 Non-Fungible Token Standard basic implementation<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> see <a class="ae le" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md</a><br/> */<br/>contract ERC721BasicToken is SupportsInterfaceWithLookup, ERC721Basic {</span><span id="6c06" class="mn jj ht mj b fv ms mp l mq mr">bytes4 private constant InterfaceId_ERC721 = 0x80ac58cd;<br/>  /*<br/>   * 0x80ac58cd ===<br/>   *   bytes4(keccak256('balanceOf(address)')) ^<br/>   *   bytes4(keccak256('ownerOf(uint256)')) ^<br/>   *   bytes4(keccak256('approve(address,uint256)')) ^<br/>   *   bytes4(keccak256('getApproved(uint256)')) ^<br/>   *   bytes4(keccak256('setApprovalForAll(address,bool)')) ^<br/>   *   bytes4(keccak256('isApprovedForAll(address,address)')) ^<br/>   *   bytes4(keccak256('transferFrom(address,address,uint256)')) ^<br/>   *   bytes4(keccak256('safeTransferFrom(address,address,uint256)')) ^<br/>   *   bytes4(keccak256('safeTransferFrom(address,address,uint256,bytes)'))<br/>   */</span><span id="1dc2" class="mn jj ht mj b fv ms mp l mq mr">bytes4 private constant InterfaceId_ERC721Exists = 0x4f558e79;<br/>  /*<br/>   * 0x4f558e79 ===<br/>   *   bytes4(keccak256('exists(uint256)'))<br/>   */</span><span id="2ff2" class="mn jj ht mj b fv ms mp l mq mr">using SafeMath for uint256;<br/>  using AddressUtils for address;</span><span id="6298" class="mn jj ht mj b fv ms mp l mq mr">// Equals to `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`<br/>  // which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`<br/>  bytes4 private constant ERC721_RECEIVED = 0x150b7a02;</span><span id="7d38" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from token ID to owner<br/>  mapping (uint256 =&gt; address) internal tokenOwner;</span><span id="e406" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from token ID to approved address<br/>  mapping (uint256 =&gt; address) internal tokenApprovals;</span><span id="c765" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from owner to number of owned token<br/>  mapping (address =&gt; uint256) internal ownedTokensCount;</span><span id="f3b0" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from owner to operator approvals<br/>  mapping (address =&gt; mapping (address =&gt; bool)) internal operatorApprovals;</span><span id="115f" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Guarantees msg.sender is owner of the given token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to validate its ownership belongs to msg.sender<br/>   */<br/>  modifier onlyOwnerOf(uint256 _tokenId) {<br/>    require(ownerOf(_tokenId) == msg.sender);<br/>    _;<br/>  }</span><span id="046c" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Checks msg.sender can transfer a token, by being owner, approved, or operator<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to validate<br/>   */<br/>  modifier canTransfer(uint256 _tokenId) {<br/>    require(isApprovedOrOwner(msg.sender, _tokenId));<br/>    _;<br/>  }</span><span id="34d1" class="mn jj ht mj b fv ms mp l mq mr">constructor()<br/>    public<br/>  {<br/>    // register the supported interfaces to conform to ERC721 via ERC165<br/>    _registerInterface(InterfaceId_ERC721);<br/>    _registerInterface(InterfaceId_ERC721Exists);<br/>  }</span><span id="12fb" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the balance of the specified address<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _owner address to query the balance of<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> uint256 representing the amount owned by the passed address<br/>   */<br/>  function balanceOf(address _owner) public view returns (uint256) {<br/>    require(_owner != address(0));<br/>    return ownedTokensCount[_owner];<br/>  }</span><span id="c006" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the owner of the specified token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to query the owner of<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> owner address currently marked as the owner of the given token ID<br/>   */<br/>  function ownerOf(uint256 _tokenId) public view returns (address) {<br/>    address owner = tokenOwner[_tokenId];<br/>    require(owner != address(0));<br/>    return owner;<br/>  }</span><span id="34ff" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Returns whether the specified token exists<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to query the existence of<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> whether the token exists<br/>   */<br/>  function exists(uint256 _tokenId) public view returns (bool) {<br/>    address owner = tokenOwner[_tokenId];<br/>    return owner != address(0);<br/>  }</span><span id="dc28" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Approves another address to transfer the given token ID<br/>   * The zero address indicates there is no approved address.<br/>   * There can only be one approved address per token at a given time.<br/>   * Can only be called by the token owner or an approved operator.<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address to be approved for the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be approved<br/>   */<br/>  function approve(address _to, uint256 _tokenId) public {<br/>    address owner = ownerOf(_tokenId);<br/>    require(_to != owner);<br/>    require(msg.sender == owner || isApprovedForAll(owner, msg.sender));</span><span id="43e4" class="mn jj ht mj b fv ms mp l mq mr">tokenApprovals[_tokenId] = _to;<br/>    emit Approval(owner, _to, _tokenId);<br/>  }</span><span id="247f" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the approved address for a token ID, or zero if no address set<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to query the approval of<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> address currently approved for the given token ID<br/>   */<br/>  function getApproved(uint256 _tokenId) public view returns (address) {<br/>    return tokenApprovals[_tokenId];<br/>  }</span><span id="8e2b" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Sets or unsets the approval of a given operator<br/>   * An operator is allowed to transfer all tokens of the sender on their behalf<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to operator address to set the approval<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _approved representing the status of the approval to be set<br/>   */<br/>  function setApprovalForAll(address _to, bool _approved) public {<br/>    require(_to != msg.sender);<br/>    operatorApprovals[msg.sender][_to] = _approved;<br/>    emit ApprovalForAll(msg.sender, _to, _approved);<br/>  }</span><span id="778b" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Tells whether an operator is approved by a given owner<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _owner owner address which you want to query the approval of<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _operator operator address which you want to query the approval of<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> bool whether the given operator is approved by the given owner<br/>   */<br/>  function isApprovedForAll(<br/>    address _owner,<br/>    address _operator<br/>  )<br/>    public<br/>    view<br/>    returns (bool)<br/>  {<br/>    return operatorApprovals[_owner][_operator];<br/>  }</span><span id="e0c4" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Transfers the ownership of a given token ID to another address<br/>   * Usage of this method is discouraged, use `safeTransferFrom` whenever possible<br/>   * Requires the msg sender to be the owner, approved, or operator<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _from current owner of the token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address to receive the ownership of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be transferred<br/>  */<br/>  function transferFrom(<br/>    address _from,<br/>    address _to,<br/>    uint256 _tokenId<br/>  )<br/>    public<br/>    canTransfer(_tokenId)<br/>  {<br/>    require(_from != address(0));<br/>    require(_to != address(0));</span><span id="a693" class="mn jj ht mj b fv ms mp l mq mr">clearApproval(_from, _tokenId);<br/>    removeTokenFrom(_from, _tokenId);<br/>    addTokenTo(_to, _tokenId);</span><span id="cedf" class="mn jj ht mj b fv ms mp l mq mr">emit Transfer(_from, _to, _tokenId);<br/>  }</span><span id="af88" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Safely transfers the ownership of a given token ID to another address<br/>   * If the target address is a contract, it must implement `onERC721Received`,<br/>   * which is called upon a safe transfer, and return the magic value<br/>   * `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`; otherwise,<br/>   * the transfer is reverted.<br/>   *<br/>   * Requires the msg sender to be the owner, approved, or operator<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _from current owner of the token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address to receive the ownership of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be transferred<br/>  */<br/>  function safeTransferFrom(<br/>    address _from,<br/>    address _to,<br/>    uint256 _tokenId<br/>  )<br/>    public<br/>    canTransfer(_tokenId)<br/>  {<br/>    // solium-disable-next-line arg-overflow<br/>    safeTransferFrom(_from, _to, _tokenId, "");<br/>  }</span><span id="be40" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Safely transfers the ownership of a given token ID to another address<br/>   * If the target address is a contract, it must implement `onERC721Received`,<br/>   * which is called upon a safe transfer, and return the magic value<br/>   * `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`; otherwise,<br/>   * the transfer is reverted.<br/>   * Requires the msg sender to be the owner, approved, or operator<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _from current owner of the token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address to receive the ownership of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be transferred<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _data bytes data to send along with a safe transfer check<br/>   */<br/>  function safeTransferFrom(<br/>    address _from,<br/>    address _to,<br/>    uint256 _tokenId,<br/>    bytes _data<br/>  )<br/>    public<br/>    canTransfer(_tokenId)<br/>  {<br/>    transferFrom(_from, _to, _tokenId);<br/>    // solium-disable-next-line arg-overflow<br/>    require(checkAndCallSafeTransfer(_from, _to, _tokenId, _data));<br/>  }</span><span id="360e" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Returns whether the given spender can transfer a given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _spender address of the spender to query<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be transferred<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> bool whether the msg.sender is approved for the given token ID,<br/>   *  is an operator of the owner, or is the owner of the token<br/>   */<br/>  function isApprovedOrOwner(<br/>    address _spender,<br/>    uint256 _tokenId<br/>  )<br/>    internal<br/>    view<br/>    returns (bool)<br/>  {<br/>    address owner = ownerOf(_tokenId);<br/>    // Disable solium check because of<br/>    // <a class="ae le" href="https://github.com/duaraghav8/Solium/issues/175" rel="noopener ugc nofollow" target="_blank">https://github.com/duaraghav8/Solium/issues/175</a><br/>    // solium-disable-next-line operator-whitespace<br/>    return (<br/>      _spender == owner ||<br/>      getApproved(_tokenId) == _spender ||<br/>      isApprovedForAll(owner, _spender)<br/>    );<br/>  }</span><span id="73d0" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to mint a new token<br/>   * Reverts if the given token ID already exists<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to The address that will own the minted token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be minted by the msg.sender<br/>   */<br/>  function _mint(address _to, uint256 _tokenId) internal {<br/>    require(_to != address(0));<br/>    addTokenTo(_to, _tokenId);<br/>    emit Transfer(address(0), _to, _tokenId);<br/>  }</span><span id="fec1" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to burn a specific token<br/>   * Reverts if the token does not exist<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token being burned by the msg.sender<br/>   */<br/>  function _burn(address _owner, uint256 _tokenId) internal {<br/>    clearApproval(_owner, _tokenId);<br/>    removeTokenFrom(_owner, _tokenId);<br/>    emit Transfer(_owner, address(0), _tokenId);<br/>  }</span><span id="eb1b" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to clear current approval of a given token ID<br/>   * Reverts if the given address is not indeed the owner of the token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _owner owner of the token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be transferred<br/>   */<br/>  function clearApproval(address _owner, uint256 _tokenId) internal {<br/>    require(ownerOf(_tokenId) == _owner);<br/>    if (tokenApprovals[_tokenId] != address(0)) {<br/>      tokenApprovals[_tokenId] = address(0);<br/>    }<br/>  }</span><span id="ba4a" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to add a token ID to the list of a given address<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address representing the new owner of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be added to the tokens list of the given address<br/>   */<br/>  function addTokenTo(address _to, uint256 _tokenId) internal {<br/>    require(tokenOwner[_tokenId] == address(0));<br/>    tokenOwner[_tokenId] = _to;<br/>    ownedTokensCount[_to] = ownedTokensCount[_to].add(1);<br/>  }</span><span id="ae16" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to remove a token ID from the list of a given address<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _from address representing the previous owner of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be removed from the tokens list of the given address<br/>   */<br/>  function removeTokenFrom(address _from, uint256 _tokenId) internal {<br/>    require(ownerOf(_tokenId) == _from);<br/>    ownedTokensCount[_from] = ownedTokensCount[_from].sub(1);<br/>    tokenOwner[_tokenId] = address(0);<br/>  }</span><span id="bd81" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to invoke `onERC721Received` on a target address<br/>   * The call is not executed if the target address is not a contract<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _from address representing the previous owner of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to target address that will receive the tokens<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be transferred<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _data bytes optional data to send along with the call<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> whether the call correctly returned the expected magic value<br/>   */<br/>  function checkAndCallSafeTransfer(<br/>    address _from,<br/>    address _to,<br/>    uint256 _tokenId,<br/>    bytes _data<br/>  )<br/>    internal<br/>    returns (bool)<br/>  {<br/>    if (!_to.isContract()) {<br/>      return true;<br/>    }<br/>    bytes4 retval = ERC721Receiver(_to).onERC721Received(<br/>      msg.sender, _from, _tokenId, _data);<br/>    return (retval == ERC721_RECEIVED);<br/>  }<br/>}</span><span id="7af6" class="mn jj ht mj b fv ms mp l mq mr">/**<br/> * <a class="ae le" href="http://twitter.com/title" rel="noopener ugc nofollow" target="_blank">@title</a> Full ERC721 Token<br/> * This implementation includes all the required and some optional functionality of the ERC721 standard<br/> * Moreover, it includes approve all functionality using operator terminology<br/> * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> see <a class="ae le" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md</a><br/> */<br/>contract ERC721Token is SupportsInterfaceWithLookup, ERC721BasicToken, ERC721 {</span><span id="1b95" class="mn jj ht mj b fv ms mp l mq mr">bytes4 private constant InterfaceId_ERC721Enumerable = 0x780e9d63;<br/>  /**<br/>   * 0x780e9d63 ===<br/>   *   bytes4(keccak256('totalSupply()')) ^<br/>   *   bytes4(keccak256('tokenOfOwnerByIndex(address,uint256)')) ^<br/>   *   bytes4(keccak256('tokenByIndex(uint256)'))<br/>   */</span><span id="2590" class="mn jj ht mj b fv ms mp l mq mr">bytes4 private constant InterfaceId_ERC721Metadata = 0x5b5e139f;<br/>  /**<br/>   * 0x5b5e139f ===<br/>   *   bytes4(keccak256('name()')) ^<br/>   *   bytes4(keccak256('symbol()')) ^<br/>   *   bytes4(keccak256('tokenURI(uint256)'))<br/>   */</span><span id="32e2" class="mn jj ht mj b fv ms mp l mq mr">// Token name<br/>  string internal name_;</span><span id="778c" class="mn jj ht mj b fv ms mp l mq mr">// Token symbol<br/>  string internal symbol_;</span><span id="35a8" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from owner to list of owned token IDs<br/>  mapping(address =&gt; uint256[]) internal ownedTokens;</span><span id="1807" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from token ID to index of the owner tokens list<br/>  mapping(uint256 =&gt; uint256) internal ownedTokensIndex;</span><span id="9ee2" class="mn jj ht mj b fv ms mp l mq mr">// Array with all token ids, used for enumeration<br/>  uint256[] internal allTokens;</span><span id="72b9" class="mn jj ht mj b fv ms mp l mq mr">// Mapping from token id to position in the allTokens array<br/>  mapping(uint256 =&gt; uint256) internal allTokensIndex;</span><span id="dce7" class="mn jj ht mj b fv ms mp l mq mr">// Optional mapping for token URIs<br/>  mapping(uint256 =&gt; string) internal tokenURIs;</span><span id="2b9b" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Constructor function<br/>   */<br/>  constructor(string _name, string _symbol) public {<br/>    name_ = _name;<br/>    symbol_ = _symbol;</span><span id="b163" class="mn jj ht mj b fv ms mp l mq mr">// register the supported interfaces to conform to ERC721 via ERC165<br/>    _registerInterface(InterfaceId_ERC721Enumerable);<br/>    _registerInterface(InterfaceId_ERC721Metadata);<br/>  }</span><span id="e682" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the token name<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> string representing the token name<br/>   */<br/>  function name() external view returns (string) {<br/>    return name_;<br/>  }</span><span id="d8c7" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the token symbol<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> string representing the token symbol<br/>   */<br/>  function symbol() external view returns (string) {<br/>    return symbol_;<br/>  }</span><span id="88b3" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Returns an URI for a given token ID<br/>   * Throws if the token ID does not exist. May return an empty string.<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to query<br/>   */<br/>  function tokenURI(uint256 _tokenId) public view returns (string) {<br/>    require(exists(_tokenId));<br/>    return tokenURIs[_tokenId];<br/>  }</span><span id="435e" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the token ID at a given index of the tokens list of the requested owner<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _owner address owning the tokens list to be accessed<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _index uint256 representing the index to be accessed of the requested tokens list<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> uint256 token ID at the given index of the tokens list owned by the requested address<br/>   */<br/>  function tokenOfOwnerByIndex(<br/>    address _owner,<br/>    uint256 _index<br/>  )<br/>    public<br/>    view<br/>    returns (uint256)<br/>  {<br/>    require(_index &lt; balanceOf(_owner));<br/>    return ownedTokens[_owner][_index];<br/>  }</span><span id="e7f3" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the total amount of tokens stored by the contract<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> uint256 representing the total amount of tokens<br/>   */<br/>  function totalSupply() public view returns (uint256) {<br/>    return allTokens.length;<br/>  }</span><span id="bdb5" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Gets the token ID at a given index of all the tokens in this contract<br/>   * Reverts if the index is greater or equal to the total number of tokens<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _index uint256 representing the index to be accessed of the tokens list<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> uint256 token ID at the given index of the tokens list<br/>   */<br/>  function tokenByIndex(uint256 _index) public view returns (uint256) {<br/>    require(_index &lt; totalSupply());<br/>    return allTokens[_index];<br/>  }</span><span id="0324" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to set the token URI for a given token<br/>   * Reverts if the token ID does not exist<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to set its URI<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _uri string URI to assign<br/>   */<br/>  function _setTokenURI(uint256 _tokenId, string _uri) internal {<br/>    require(exists(_tokenId));<br/>    tokenURIs[_tokenId] = _uri;<br/>  }</span><span id="1c83" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to add a token ID to the list of a given address<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address representing the new owner of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be added to the tokens list of the given address<br/>   */<br/>  function addTokenTo(address _to, uint256 _tokenId) internal {<br/>    super.addTokenTo(_to, _tokenId);<br/>    uint256 length = ownedTokens[_to].length;<br/>    ownedTokens[_to].push(_tokenId);<br/>    ownedTokensIndex[_tokenId] = length;<br/>  }</span><span id="5a9b" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to remove a token ID from the list of a given address<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _from address representing the previous owner of the given token ID<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be removed from the tokens list of the given address<br/>   */<br/>  function removeTokenFrom(address _from, uint256 _tokenId) internal {<br/>    super.removeTokenFrom(_from, _tokenId);</span><span id="6448" class="mn jj ht mj b fv ms mp l mq mr">uint256 tokenIndex = ownedTokensIndex[_tokenId];<br/>    uint256 lastTokenIndex = ownedTokens[_from].length.sub(1);<br/>    uint256 lastToken = ownedTokens[_from][lastTokenIndex];</span><span id="7049" class="mn jj ht mj b fv ms mp l mq mr">ownedTokens[_from][tokenIndex] = lastToken;<br/>    ownedTokens[_from][lastTokenIndex] = 0;<br/>    // Note that this will handle single-element arrays. In that case, both tokenIndex and lastTokenIndex are going to<br/>    // be zero. Then we can make sure that we will remove _tokenId from the ownedTokens list since we are first swapping<br/>    // the lastToken to the first position, and then dropping the element placed in the last position of the list</span><span id="e087" class="mn jj ht mj b fv ms mp l mq mr">ownedTokens[_from].length--;<br/>    ownedTokensIndex[_tokenId] = 0;<br/>    ownedTokensIndex[lastToken] = tokenIndex;<br/>  }</span><span id="9564" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to mint a new token<br/>   * Reverts if the given token ID already exists<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _to address the beneficiary that will own the minted token<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token to be minted by the msg.sender<br/>   */<br/>  function _mint(address _to, uint256 _tokenId) internal {<br/>    super._mint(_to, _tokenId);</span><span id="451b" class="mn jj ht mj b fv ms mp l mq mr">allTokensIndex[_tokenId] = allTokens.length;<br/>    allTokens.push(_tokenId);<br/>  }</span><span id="bc29" class="mn jj ht mj b fv ms mp l mq mr">/**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Internal function to burn a specific token<br/>   * Reverts if the token does not exist<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _owner owner of the token to burn<br/>   * <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId uint256 ID of the token being burned by the msg.sender<br/>   */<br/>  function _burn(address _owner, uint256 _tokenId) internal {<br/>    super._burn(_owner, _tokenId);</span><span id="6943" class="mn jj ht mj b fv ms mp l mq mr">// Clear metadata (if any)<br/>    if (bytes(tokenURIs[_tokenId]).length != 0) {<br/>      delete tokenURIs[_tokenId];<br/>    }</span><span id="aaaf" class="mn jj ht mj b fv ms mp l mq mr">// Reorg all tokens array<br/>    uint256 tokenIndex = allTokensIndex[_tokenId];<br/>    uint256 lastTokenIndex = allTokens.length.sub(1);<br/>    uint256 lastToken = allTokens[lastTokenIndex];</span><span id="9411" class="mn jj ht mj b fv ms mp l mq mr">allTokens[tokenIndex] = lastToken;<br/>    allTokens[lastTokenIndex] = 0;</span><span id="b2c2" class="mn jj ht mj b fv ms mp l mq mr">allTokens.length--;<br/>    allTokensIndex[_tokenId] = 0;<br/>    allTokensIndex[lastToken] = tokenIndex;<br/>  }</span><span id="4151" class="mn jj ht mj b fv ms mp l mq mr">}</span></pre><p id="5318" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">在这一点上，我们有一个主要工作的智能契约，但我们想创建一个令牌，所以让我们添加令牌标准并定义一些变量。这是合同中你修改最多的部分。上述合同是标准的，但在涉及到安全性时，您可能需要考虑其中的一对。查看<a class="ae le" href="https://github.com/OpenZeppelin/openzeppelin-solidity/tree/master/contracts" rel="noopener ugc nofollow" target="_blank"> Open-Zeppelin GitHub </a>获取更多合同示例。</p><p id="2c2f" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">现在将令牌契约添加到您的代码中，我们就完成了！</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="8e92" class="mn jj ht mj b fv mo mp l mq mr">contract Document is ERC721Token, Ownable {</span><span id="f5db" class="mn jj ht mj b fv ms mp l mq mr">/*** EVENTS ***/<br/>  /// The event emitted (useable by web3) when a token is purchased<br/>  event BoughtToken(address indexed buyer, uint256 tokenId);</span><span id="8dcc" class="mn jj ht mj b fv ms mp l mq mr">/*** CONSTANTS ***/<br/>  uint8 constant TITLE_MIN_LENGTH = 1;<br/>  uint8 constant TITLE_MAX_LENGTH = 64;<br/>  uint256 constant DESCRIPTION_MIN_LENGTH = 1;<br/>  uint256 constant DESCRIPTION_MAX_LENGTH = 10000;</span><span id="183c" class="mn jj ht mj b fv ms mp l mq mr">/*** DATA TYPES ***/</span><span id="cbec" class="mn jj ht mj b fv ms mp l mq mr">/// Price set by contract owner for each token in Wei.<br/>/// <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> If you'd like a different price for each token type, you<br/>/// will need to use a mapping like: `mapping(uint256 =&gt; uint256)<br/>/// tokenTypePrices;`</span><span id="992c" class="mn jj ht mj b fv ms mp l mq mr">  uint256 currentPrice = 3000000000000000;</span><span id="a9d3" class="mn jj ht mj b fv ms mp l mq mr">/// The token type (1 for idea, 2 for belonging, etc)<br/>  mapping(uint256 =&gt; uint256) tokenTypes;</span><span id="1fc5" class="mn jj ht mj b fv ms mp l mq mr">/// The title of the token<br/>  mapping(uint256 =&gt; string) tokenTitles;<br/>  <br/>/// The description of the token<br/>  mapping(uint256 =&gt; string) tokenDescription;</span><span id="6f53" class="mn jj ht mj b fv ms mp l mq mr">constructor() ERC721Token("Document", "DQMT") public {<br/>    // any init code when you deploy the contract would run here<br/>  }</span><span id="4b54" class="mn jj ht mj b fv ms mp l mq mr">/// Requires the amount of Ether be at least or more of the<br/>/// currentPrice<br/>/// <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Creates an instance of an token and mints it to the<br/>/// purchaser<br/>/// <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _type The token type as an integer<br/>/// <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _title The short title of the token<br/>/// <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _description Description of the token</span><span id="899b" class="mn jj ht mj b fv ms mp l mq mr">function buyToken (<br/>    uint256 _type,<br/>    string _title,<br/> string _description<br/>  ) external payable {<br/>    bytes memory _titleBytes = bytes(_title);<br/>    require(_titleBytes.length &gt;= TITLE_MIN_LENGTH, "Title is too short");<br/>    require(_titleBytes.length &lt;= TITLE_MAX_LENGTH, "Title is too long");<br/> <br/> bytes memory _descriptionBytes = bytes(_description);<br/>    require(_descriptionBytes.length &gt;= DESCRIPTION_MIN_LENGTH, "Description is too short");<br/>    require(_descriptionBytes.length &lt;= DESCRIPTION_MAX_LENGTH, "Description is too long");<br/>    require(msg.value &gt;= currentPrice, "Amount of Ether sent too small");</span><span id="a8a4" class="mn jj ht mj b fv ms mp l mq mr">uint256 index = allTokens.length + 1;</span><span id="44ed" class="mn jj ht mj b fv ms mp l mq mr">_mint(msg.sender, index);</span><span id="1d1f" class="mn jj ht mj b fv ms mp l mq mr">tokenTypes[index] = _type;<br/>    tokenTitles[index] = _title;<br/> tokenDescription[index] = _description;</span><span id="c636" class="mn jj ht mj b fv ms mp l mq mr">emit BoughtToken(msg.sender, index);<br/>  }</span><span id="8104" class="mn jj ht mj b fv ms mp l mq mr">  /**<br/>   * <a class="ae le" href="http://twitter.com/dev" rel="noopener ugc nofollow" target="_blank">@dev</a> Returns all of the tokens that the user owns<br/>   * <a class="ae le" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> An array of token indices<br/>   */<br/>  <br/>function myTokens()<br/>    external<br/>    view<br/>    returns (<br/>      uint256[]<br/>    )<br/>  {<br/>    return ownedTokens[msg.sender];<br/>  }</span><span id="620d" class="mn jj ht mj b fv ms mp l mq mr">/// <a class="ae le" href="http://twitter.com/notice" rel="noopener ugc nofollow" target="_blank">@notice</a> Returns all the relevant information about a specific /// token<br/>/// <a class="ae le" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> _tokenId The ID of the token of interest</span><span id="dc82" class="mn jj ht mj b fv ms mp l mq mr">  function viewToken(uint256 _tokenId)<br/>    external<br/>    view<br/>    returns (<br/>      uint256 tokenType_,<br/>      string tokenTitle_,<br/>   string tokenDescription_<br/>  ) {<br/>      tokenType_ = tokenTypes[_tokenId];<br/>      tokenTitle_ = tokenTitles[_tokenId];<br/>   tokenDescription_ = tokenDescription[_tokenId];<br/>  }</span><span id="3c8a" class="mn jj ht mj b fv ms mp l mq mr">/// <a class="ae le" href="http://twitter.com/notice" rel="noopener ugc nofollow" target="_blank">@notice</a> Allows the owner of this contract to set the<br/>/// currentPrice for each token<br/>  function setCurrentPrice(uint256 newPrice)<br/>    public<br/>    onlyOwner<br/>  {<br/>      currentPrice = newPrice;<br/>  }</span><span id="c61c" class="mn jj ht mj b fv ms mp l mq mr">/// <a class="ae le" href="http://twitter.com/notice" rel="noopener ugc nofollow" target="_blank">@notice</a> Returns the currentPrice for each token<br/>  function getCurrentPrice()<br/>    external<br/>    view<br/>    returns (<br/>    uint256 price<br/>  ) {<br/>      price = currentPrice;<br/>  }<br/>/// <a class="ae le" href="http://twitter.com/notice" rel="noopener ugc nofollow" target="_blank">@notice</a> allows the owner of this contract to destroy the ///contract<br/>   function kill() public {<br/>   if(msg.sender == owner) selfdestruct(owner);<br/>   }</span><span id="1e85" class="mn jj ht mj b fv ms mp l mq mr">}</span></pre><p id="9855" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">让我们更深入地了解一下代币合同。在这一部分</p><pre class="ma mb mc md fq mi mj mk ml aw mm dt"><span id="5912" class="mn jj ht mj b fv mo mp l mq mr">/*** CONSTANTS ***/<br/>  uint8 constant TITLE_MIN_LENGTH = 1;<br/>  uint8 constant TITLE_MAX_LENGTH = 64;<br/>  uint256 constant DESCRIPTION_MIN_LENGTH = 1;<br/>  uint256 constant DESCRIPTION_MAX_LENGTH = 10000;</span></pre><p id="0938" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">为了防止溢出，我们决定将标题和描述长度的最大值和最小值硬编码为常量。我感觉这是一个非常重要的功能，强烈推荐。</p><h1 id="029a" class="ji jj ht bd jk jl lu jn jo jp lv jr js jt mw jv jw jx mx jz ka kb my kd ke kf dt translated">编译智能合同</h1><p id="66fb" class="pw-post-body-paragraph kg kh ht ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld hm dt translated">在这一点上，你可以继续下去，并在remix编译合同。</p><figure class="ma mb mc md fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mz"><img src="../Images/9e987fa689029696b4bb00225277a273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiUlqROJNfRVpcatOL8S4Q.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Compile your contract</figcaption></figure><p id="000f" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">如果一切顺利，所有的合同都将获得批准。此时，单击“run ”,让我们部署我们的智能合同！</p><p id="d9e0" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">在下拉菜单中选择合同命名文档，然后单击部署。</p><figure class="ma mb mc md fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff na"><img src="../Images/01934554ef37e71864972301cb51d43f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7nt9jBY_Feo1NS0QEXr9xw.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Deploy your contract</figcaption></figure><p id="21b0" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">等待确认，如果成功，您将在控制台中收到一条成功消息。您的合同现已部署！请注意，我们已经部署到Ropsten testnet，还没有执行任何测试。</p><p id="5b4e" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">如果你能走到这一步，恭喜你！你现在是一个重要的少数民族的一部分。在第二部分中，我们将开发一个简单的前端，通过web界面与我们的合同进行交互。</p><p id="d598" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">——丹尼尔·皮特曼，首席执行官<a class="ae le" href="http://www.qwoyn.io" rel="noopener ugc nofollow" target="_blank"/></p><p id="38b6" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">我们的开发人员自愿贡献他们的时间，但也乐于接受捐赠:</p><p id="1c96" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">ETC:0x 007 e 60 c 669 cf 96 DC 32655 D1 EB 1c 1 ebcf 96459975</p><p id="5c42" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">BTC:15 x8 rjv 7 eatts C6 bhrffuqh 28 lzpqz 9 TDI</p><p id="5507" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">密件抄送:1 krwr 96 hbcrlavaawkxz 2 oy 2f 51 ryohme 1</p><p id="f7ba" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">ETH:0x 00c 24 b 3346 AFC 5c 3710 AFB 27 c 86431 ebb 5 ce 8163</p><p id="dd33" class="pw-post-body-paragraph kg kh ht ki b kj lf kl km kn lg kp kq kr lh kt ku kv li kx ky kz lj lb lc ld hm dt translated">查看第二部分 …</p></div></div>    
</body>
</html>