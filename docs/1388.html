<html>
<head>
<title>First impressions at creating Stellar Smart Contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一流智能合同的第一印象</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/first-impressions-at-creating-stellar-smart-contracts-d51f18552bbc?source=collection_archive---------3-----------------------#2018-08-24">https://medium.com/coinmonks/first-impressions-at-creating-stellar-smart-contracts-d51f18552bbc?source=collection_archive---------3-----------------------#2018-08-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="031e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">像许多人一样，我一直很关注加密市场的牛市及其在过去8个月中的缓慢下跌。然而，我仍然对此类系统的潜在能力非常感兴趣和着迷。</p><p id="4880" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以当我在寻找智能契约技能，复习以太坊和稳固性的时候，我偶然发现了恒星智能契约(SCC)。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/9f30f73e120dcbf89387ea4072ff5b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*N2e57172iGd_DBAPWDMADg.jpeg"/></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Henri de Montaut [Public domain], via Wikimedia Commons</figcaption></figure><p id="35be" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以下是我发现的以太坊的一些优点，前提是我要玩的项目是一个简单的项目。</p><p id="17b2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="ka">免责声明:我必须说，这里的重点绝对不是要证明以太坊本身有什么问题，尤其是这些平台的几个方面是设计无法相比的。</em></p><p id="317c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，有限的SCC能力使得用例更容易理解。简而言之，首先想到的是无边界多货币交易和托管。</p><p id="ddb7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">考虑到以太坊智能合约被黑客攻击的频率，以及在编写Solidity代码，甚至是在已部署的合约上修复代码时，犯错误是多么容易，我发现使用Stellar的攻击表面和错误后果更加有限，特别是当价值转移几乎总是涉及到的时候，这是你最不想搞砸的事情。</p><p id="ca10" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从用户角度来看，共识的时间效率使其成为许多场景的直接选择。据报道，交易验证大约需要5s。更好的是，固定和便宜的费用，使事情更简单，更广泛的采用。</p><p id="6b90" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">另一个因素是PoW不与恒星共识协议一起使用，避免了为了信任而燃烧星球资源的耻辱。</p></div><div class="ab cl kb kc hb kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hm hn ho hp hq"><h1 id="701f" class="ki kj ht bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">现在让我们深入一点代码</h1><p id="a826" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hm dt translated">但是首先(！)，但是有一些先决条件:在您深入研究SCC之前，您应该对非对称加密非常熟悉，因为它是理解密钥对用法以及如何处理交易签名的基础。</p><p id="5afd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="ka">免责声明:我很高兴以下(或以上)的内容被证明是错误的，如果需要，请随意评论。</em></p><p id="3e0c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">作为一个新手，我仍然有一些发现和“发现”时刻可以交流，其中之一是关于多重签名(multisig)的情况:当你设置multisig时，你在给定的<em class="ka">账户</em>上设置它，这样任何涉及这个<em class="ka">账户</em>的交易都需要几个签名人。我必须说，最初，我认为这是一个可以为给定事务定义的属性。我们以后会看到的。</p><p id="6911" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了方便起见，我们将使用nodeJS和Stellar Javascript SDK，并使用stellar testnet。</p><h1 id="b197" class="ki kj ht bd kk kl ll kn ko kp lm kr ks kt ln kv kw kx lo kz la lb lp ld le lf dt translated">简单交易</h1><p id="c13c" class="pw-post-body-paragraph iq ir ht is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hm dt translated">这个应该很简单，我们接下来要做的是:</p><ul class=""><li id="bfdc" class="lq lr ht is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly dt translated">为A(lice)和B(ob)创建种子/公钥对</li><li id="b343" class="lq lr ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">创建并资助具有一流流明的账户</li><li id="0b98" class="lq lr ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">创建并提交一个交易，Alice通过该交易向Bob发送20 XLM</li></ul><p id="4f74" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> 1。创建密钥对</strong></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="d2d9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以Stellar SDK自带随机密钥生成方式:<code class="eh mg mh mi mj b">Stellar.Keypair.random()</code>。</p><p id="9d41" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这个代码片段中，创建了2对脚本并本地保存在一个文件中，这样我们就可以一个接一个地运行脚本。</p><p id="94e3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> 2。向账户添加资金</strong></p><p id="abdc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一个明星账户必须有一个最低流明数(XLM)才能被平台验证。幸运的是，testnet有一个<em class="ka"> friendbot </em>免费给你10000 XLM。</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="0dbe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以这个脚本会礼貌地请求friendbot通过http请求向你的A(lice)和B(ob)的XLMs帐户提供资金。在现实世界的使用案例中，你必须通过一个锚点来交换你的fiats或一个交换平台来添加流明到一个帐户。</p><p id="9047" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">脚本执行后，您验证Alice和Bob的帐户是否有10K流明:</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="c59c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意balances是一个数组，因为一个帐户可以有不同的资产(令牌)余额。在我们的简单例子中，我们将使用本地资产XLM。</p><p id="942a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> 3。创建、签署并提交交易</strong></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="c666" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以下是关键点:</p><ul class=""><li id="edd5" class="lq lr ht is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly dt translated">第13行，由于平台使用的底层数据类型，XLM的数量被定义为一个字符串</li><li id="5f2f" class="lq lr ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">第23行，创建该事务是为了将20 XLM从爱丽丝发送给鲍勃。设置这个只需要Alice和Bob的公钥</li><li id="b3c2" class="lq lr ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">第31行，Alice签署交易(这里需要Alice的私钥)。</li><li id="8d38" class="lq lr ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">第33行，交易被提交给网络。</li></ul><p id="e694" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，您可以使用之前的<code class="eh mg mh mi mj b">checkAccounts.js </code>脚本来验证修改后的余额。</p></div><div class="ab cl kb kc hb kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hm hn ho hp hq"><p id="954f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是一个非常基本的用例，在下一篇文章中，我们将创建一个托管合同，Alice和Bob都必须签字才能释放资金。</p></div><div class="ab cl kb kc hb kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hm hn ho hp hq"><p id="1dc6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你还会发现我在这个频道发布的几个视频:<a class="ae mk" href="https://www.youtube.com/channel/UCAKSRclAwfHyN6dWibj4iVw" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/channel/UCAKSRclAwfHyN6dWibj4iVw</a></p></div><div class="ab cl kb kc hb kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hm hn ho hp hq"><p id="3075" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="ka">更新(27/08/2018):下一篇，</em> <a class="ae mk" rel="noopener" href="/@slyg/simple-escrow-contract-using-stellar-67aa799f7db"> <em class="ka">简单代管合同使用恒星</em> </a> <em class="ka">。<br/>更新(26/06/2019):在sdk更新后更新代码示例。<br/>更新(20/08/2019):更新sdk更新后的代码示例，添加视频链接</em></p><blockquote class="ml"><p id="8644" class="mm mn ht bd mo mp mq mr ms mt mu jn ek translated"><a class="ae mk" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mw mx my mz na jt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mv"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>