<html>
<head>
<title>Verify Your Smart Contract Using Gist</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Gist验证您的智能合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/verify-your-smart-contract-using-gist-a3152537a7a7?source=collection_archive---------5-----------------------#2018-05-20">https://medium.com/coinmonks/verify-your-smart-contract-using-gist-a3152537a7a7?source=collection_archive---------5-----------------------#2018-05-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="4610" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们看看如何使用项目要点来验证智能合同。这个过程非常简单，但是你需要一些东西:</p><ul class=""><li id="e687" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">有效的智能合同。用你自己的或者克隆这个<a class="ae jx" href="https://github.com/NFhbar/verify-contract-example" rel="noopener ugc nofollow" target="_blank">回购</a>。</li><li id="f2cf" class="jo jp ht is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw dt translated">某<a class="ae jx" href="https://faucet.rinkeby.io/" rel="noopener ugc nofollow" target="_blank">林克比ETH </a>。</li><li id="9e21" class="jo jp ht is b it jy ix jz jb ka jf kb jj kc jn jt ju jv jw dt translated">一个<a class="ae jx" href="https://gist.github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>账户。</li></ul><p id="407f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于这个例子，我部署了一个简单的智能投票合同；你可以对你的任何项目使用这种方法，因为重要的部分实际上是在合同部署之后，然而，如果你更愿意跟随，你可以克隆这个<a class="ae jx" href="https://github.com/NFhbar/verify-contract-example" rel="noopener ugc nofollow" target="_blank">回购</a>。</p><h1 id="8be9" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">设置</h1><p id="ab93" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">我使用Truffle来编写、测试和部署我的合同，所以请确保您在全球范围内安装了<a class="ae jx" href="http://truffleframework.com/" rel="noopener ugc nofollow" target="_blank"> Truffle </a>。酷，我们正在部署的合同是一个简单的投票合同<a class="ae jx" href="https://github.com/NFhbar/verify-contract-example/blob/master/contracts/Ballot.sol" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><p id="a3b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您遵循示例回购，只需运行:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="c60e" class="lp ke ht ll b fv lq lr l ls lt">$ npm install</span></pre><p id="c94e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">否则，让我们准备好部署truffle，我们将需要以下软件包:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="5305" class="lp ke ht ll b fv lq lr l ls lt">$ npm install --save-dev dotenv<br/>$ npm install --save-dev ethereumjs-wallet<br/>$ npm install --save-dev truffle-wallet-provider</span></pre><p id="f488" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">很好，让我们准备好truffle.js文件以部署到Rinkeby:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="d61f" class="lp ke ht ll b fv lq lr l ls lt">require('dotenv').config()<br/>const Web3 = require(‘web3’)<br/>const web3 = new Web3()<br/>const WalletProvider = require(‘truffle-wallet-provider’)<br/>const Wallet = require(‘ethereumjs-wallet’)</span><span id="4301" class="lp ke ht ll b fv lu lr l ls lt">const rinkebyPrivateKey = new Buffer(process.env[‘RINKEBY_PRIVATE_KEY’], ‘hex’)<br/>const rinkebyWallet = Wallet.fromPrivateKey(rinkebyPrivateKey)<br/>const rinkebyProvider = new WalletProvider(rinkebyWallet, ‘<a class="ae jx" href="https://rinkeby.infura.io/'" rel="noopener ugc nofollow" target="_blank">https://rinkeby.infura.io/'</a>)</span><span id="f6fa" class="lp ke ht ll b fv lu lr l ls lt">module.exports = {<br/> migrations_directory: ‘./migrations’,<br/> networks: {<br/>   development: {<br/>   host: ‘localhost’,<br/>   port: 9545,<br/>   network_id: ‘*’ // Match any network id<br/> },<br/> rinkeby: {<br/>   provider: rinkebyProvider,<br/>   // You can get the current gasLimit by running<br/>   // truffle deploy — network rinkeby<br/>   // truffle(rinkeby)&gt; web3.eth.getBlock(“pending”, (error, result)    <br/>   // console.log(result.gasLimit))<br/>   gas: 6721975,<br/>   gasPrice: web3.toWei(‘50’, ‘gwei’),<br/>   network_id: ‘4’,<br/>   }<br/>  }<br/>}</span></pre><p id="10da" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们正在通过Infura使用truffle wallet provider和ethereumjs wallet进行部署。现在，让我们在根目录中创建一个. env文件，使用您的私钥进行部署，将您的私钥放在该文件中:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="f38f" class="lp ke ht ll b fv lq lr l ls lt">RINKEBY_PRIVATE_KEY=”MY_PRIVATE_KEY_GOES_HERE..."</span></pre><p id="56ac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请确保将此文件添加到您的。gitignore文件以确保您不会意外地发布您的私钥。</p><h1 id="bb6c" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">将合同部署到Rinkeby</h1><p id="80eb" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">该去林克比了。首先让我们从水龙头<a class="ae jx" href="https://faucet.rinkeby.io/" rel="noopener ugc nofollow" target="_blank">里拿一些测试液。现在，让我们进入块菌培养环境:</a></p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="4cb8" class="lp ke ht ll b fv lq lr l ls lt">$ truffle develop</span></pre><p id="ec91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">编译、迁移和本地测试的时间为了确保一切就绪，请运行以下命令:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="d5b9" class="lp ke ht ll b fv lq lr l ls lt">truffle(develop)&gt; compile<br/>...<br/>..<br/>.</span><span id="9221" class="lp ke ht ll b fv lu lr l ls lt">truffle(develop)&gt; migrate<br/>...<br/>..<br/>.</span><span id="77fa" class="lp ke ht ll b fv lu lr l ls lt">truffle(develop)&gt; test<br/>...<br/>..<br/>.</span></pre><p id="4fc0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果他们都成功了，没有错误，我们准备部署。退出truffle开发环境，并在终端中运行以下命令:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="cc08" class="lp ke ht ll b fv lq lr l ls lt">$ truffle deploy --network rinkeby</span></pre><p id="db6d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您应该得到如下所示的输出:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div class="fe ff lv"><img src="../Images/bcdb4df132b9bc289350e4ea8bcd5038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*du3VkNDpmceHC4XlrYFZtQ.png"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Contract deployed to Rinkeby.</figcaption></figure><h1 id="982a" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">验证我们的合同</h1><p id="e2cc" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">前往<a class="ae jx" href="https://rinkeby.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> Rinkeby Etherscan </a>并从您的控制台使用合同地址搜索您新部署的合同。您应该在网络上看到您的合同:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff md"><img src="../Images/a118c41bd1f035903bc28cfb9bf2c360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UW-8AWXbYefvL4QQ-iIuvQ.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Rinkeby deployed contract.</figcaption></figure><p id="3d82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">酷毙了。现在单击代码选项卡，然后单击验证和发布:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mi"><img src="../Images/4f656b7b10f67056389c76f0734b428c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mcqpQzBSmuFKedND3h4X6w.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Verify Contract.</figcaption></figure><p id="73b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将使用从Gist中提取选项。首先，我们需要创建一个新的要点。在您的GitHub帐户中，点击您的个人资料并选择您的gists。你应该看到你的要点简介:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mj"><img src="../Images/0c57e9da9511a99164361c0d06eb1e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnSRQl8DWeBqI1xRHuF9lg.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Gists.</figcaption></figure><p id="6d4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在文件名文本框中输入合同名称，包括扩展名，并在要点框中从项目中复制/粘贴合同代码。确保合同与您的合同文件完全相同。如果你把任何文件导入到你的源代码中，直接把代码放在你的要点中。我的看起来像这样:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mk"><img src="../Images/8c88bbae99287d81f96d184e3b591f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Sg8aoRP6NwHd4g0XnKV-w.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Gist Contract.</figcaption></figure><p id="6df1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在单击创建公共要点。太棒了。是时候验证了。返回以太网扫描单击从gist获取按钮，复制/粘贴您的Gist id:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff ml"><img src="../Images/73c8c4ecffc5fc0bcbe7fe5b3d18437f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vA31aXeoZ7j8kZ5K9hJPvA.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Fetch from gist.</figcaption></figure><p id="1efb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击继续，Etherscan将加载您的代码:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mm"><img src="../Images/c45ad90a3e02f9f92bde0ee32ea12da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfzlt0B2Ee15aYcoln2PTA.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Etherscan code.</figcaption></figure><p id="67a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">很好，现在在合同名称框中输入您的合同名称，选择您的编译器版本，如果您使用了优化，请选择它。如果您的构造函数是使用参数部署的，那么Etherscan应该会自动获取编码的参数。是时候验证了！</p><p id="8cd8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">单击“验证并发布”,给它一点时间:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mn"><img src="../Images/85834871c31677934753e6a1ad050995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yebaVnSLribMbIHsXqsLew.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Etherscan verifying.</figcaption></figure><p id="1c34" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">几秒钟后，您的合同将得到验证:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mi"><img src="../Images/a131c3708622ac4f41df210b88b92685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P93brT_ath_Mp2EdHiNwsw.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Etherscan verified.</figcaption></figure><p id="af17" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">搞定了。现在，您的合同已经过正式验证，任何人都可以通过合同地址访问您的合同:</p><figure class="lg lh li lj fq lw fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff mi"><img src="../Images/14a576db580e2584d614fc977cae8de7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YwdC0lJO3CwmJSTH7fTl7A.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Verified contract code.</figcaption></figure></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><p id="d74e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就是这样！这里是这个例子的<a class="ae jx" href="https://github.com/NFhbar/verify-contract-example" rel="noopener ugc nofollow" target="_blank">回购</a>和<a class="ae jx" href="https://gist.github.com/NFhbar/fdd49001bf873fd3db3ed4429821f56b" rel="noopener ugc nofollow" target="_blank">要点</a>以防你想试一试！</p><p id="6a51" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">非常感谢你阅读这篇文章！如果你觉得这篇文章很有用<strong class="is hu">，请点击这篇文章，并确保关注我的更多常规内容</strong>，也请查看我的<a class="ae jx" href="https://github.com/NFhbar" rel="noopener ugc nofollow" target="_blank"> Github </a>，因为我定期发布示例代码和项目。如果你有任何问题，欢迎在下面回复或者给我发邮件。</p><p id="4dc8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">编码快乐！</p></div></div>    
</body>
</html>