<html>
<head>
<title>Layer 1 Tokens on Bitcoin SV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币服务上的第1层代币</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/layer-1-tokens-on-bitcoin-sv-e78c8abf270d?source=collection_archive---------0-----------------------#2020-03-24">https://medium.com/coinmonks/layer-1-tokens-on-bitcoin-sv-e78c8abf270d?source=collection_archive---------0-----------------------#2020-03-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="a909" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从早期的开始，比特币就已经被用来对外部资产进行令牌化。有许多令牌化协议。一般来说，他们会在比特币上附加额外的协议元数据来代表这些资产，例如在<em class="jp"> OP_RETURN </em>中。令牌规则在第2层进行验证，这意味着脱离链而不是由矿工进行验证。</p><p id="ae5b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与所有以前的工作不同，我们展示了一种在比特币中实现<strong class="is hu"> <em class="jp">第1层</em> </strong>(又名共识层、矿工可执行性、“无信任”、“无许可”)令牌的机制。对于第1层令牌，验证由挖掘者完成。我们在编译成本地脚本的高级语言<a class="ae jo" href="http://scryptdoc.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> sCrypt </a>中实现了一个两个所有者的示例令牌。</p><h1 id="4378" class="jq jr ht bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">令牌智能合约</h1><h2 id="9266" class="ko jr ht bd js kp kq kr jw ks kt ku ka jb kv kw ke jf kx ky ki jj kz la km lb dt translated">令牌表作为状态</h2><p id="b1b1" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">使用<a class="ae jo" rel="noopener" href="/@xiaohuiliu/stateful-smart-contracts-on-bitcoin-sv-c24f83a0f783">上一篇文章</a>中的技术，我们将整个令牌表作为状态存储在数据部分。该表是从每个令牌所有者(由他的公钥表示)到他的余额的映射。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lh"><img src="../Images/9a87f54cfa62921ccc3c60937f762d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XLFU_ff9uHE2kvxNsX24oQ.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Token table</figcaption></figure><p id="53d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">令牌合同<a class="ae jo" href="https://github.com/scrypt-sv/boilerplate/blob/master/contracts/token.scrypt" rel="noopener ugc nofollow" target="_blank">代码</a>如下所示，带有内联注释。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lx"><img src="../Images/1090d7d158546899300fc5cfca174f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IB_qeX_2FK11SjyJKpT3fw.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Token contract</figcaption></figure><p id="7fb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">和上一篇文章一样，第7 &amp; 9行确保原像来自当前事务。第12行确保只有所有者被授权转移令牌。其余部分遵循前一篇文章中解释的状态转换范式。</p><h2 id="a313" class="ko jr ht bd js kp kq kr jw ks kt ku ka jb kv kw ke jf kx ky ki jj kz la km lb dt translated">代币发行</h2><p id="307b" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/scrypt-sv/boilerplate/blob/master/tests/testnet/token.js" rel="noopener ugc nofollow" target="_blank">这里的</a>是部署契约和来回传输令牌的代码。合同部署到<a class="ae jo" href="https://test.whatsonchain.com/tx/39b94e5f44f2c3d20db99f103fe2b4821ec373b25e3bdbb38e94577d4d2ed770" rel="noopener ugc nofollow" target="_blank">交易1 </a>后，我们可以看到<strong class="is hu"> <em class="jp"> pk0 </em> </strong>为<em class="jp">024 c 79d 694 ef 7 DFD 53217 de 55 f 7 fbf 63d 2381 b 18 e 31 AFC 408 b 226 BC 88 a 6 a 3 CB 4 f 0</em>和<strong class="is hu"><em class="jp">pk1</em></strong><em class="jp">038 ad6e 71978 a 3 bcc 297<strong class="is hu"> <em class="jp"> pk0 </em> </strong>的初始余额为100 ( <em class="jp"> 0x64 </em>十六进制)，<strong class="is hu"> <em class="jp"> pk1 </em> </strong> <em class="jp">的</em>为0。</em></p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff ly"><img src="../Images/edf64c64ca617ce5193f3270d87a0633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G5C3JnRmtsBqE1vtOcynvg.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Token distribution after deployment</figcaption></figure><h2 id="ddfa" class="ko jr ht bd js kp kq kr jw ks kt ku ka jb kv kw ke jf kx ky ki jj kz la km lb dt translated">令牌传输</h2><p id="2172" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated"><strong class="is hu"> <em class="jp"> pk0 </em> </strong>在<a class="ae jo" href="https://test.whatsonchain.com/tx/2afb7a1aa90582d9f506f7e380b37f0f2bafd41e918cbc2cf2e5acd2afde81af" rel="noopener ugc nofollow" target="_blank">交易2 </a>中向<strong class="is hu"> <em class="jp"> pk1 </em> </strong>转移40个代币。不出所料，<strong class="is hu"> <em class="jp"> pk0 </em> </strong>的余额变成了60 ( <em class="jp"> 0x3c </em>十六进制)，<strong class="is hu">T17】pk1</strong>40(<em class="jp">0x 28</em>)。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lz"><img src="../Images/930b9b73a3cd5abb440b57894b376e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4-VLOXsYSe91O8TEg22aQ.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Token distribution after first transfer</figcaption></figure><p id="d02b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> <em class="jp"> pk1 </em> </strong>在<a class="ae jo" href="https://test.whatsonchain.com/tx/1127de06614c9ec8de1104562f6a2c62524ea25a7eea148607aa931ac826c6e8" rel="noopener ugc nofollow" target="_blank">交易3 </a>中将10个代币转回<strong class="is hu"> <em class="jp"> pk0 </em> </strong>。不出所料，<strong class="is hu"> <em class="jp"> pk0 </em> </strong>的余额变成了70 ( <em class="jp"> 0x46 </em>)，<strong class="is hu">T39】pk1</strong>30(<em class="jp">0x1e</em>)。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff ma"><img src="../Images/41d003f2dc950237cb9800234db09f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5YD9jMLmtAYXro59kFs0hQ.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Token distribution after second transfer</figcaption></figure><h1 id="59fc" class="jq jr ht bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">结论</h1><p id="9bc3" class="pw-post-body-paragraph iq ir ht is b it lc iv iw ix ld iz ja jb le jd je jf lf jh ji jj lg jl jm jn hm dt translated">我们只演示了如何发行和转让两个用户的玩具令牌。通过读取和解析区块链上的令牌表，可以轻松实现其他功能，如余额查找。不难以多种方式对其进行扩展，以支持例如多用户令牌、不可替换令牌、发行者许可令牌、合法合规令牌和SPV兼容令牌。</p><p id="6486" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于比特币的无限可扩展性，这种可扩展的令牌化协议允许其他区块链中的任何第1层令牌在比特币上运行，成本显著降低。通过补充比特币上现有的第二层令牌化协议，它还可以实现比特币与其他令牌化资产的原子交换，这开辟了一个具有无数可能性的新领域。</p><blockquote class="mb"><p id="989d" class="mc md ht bd me mf mg mh mi mj mk jn ek translated"><a class="ae jo" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mm mn mo mp mq lm fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ml"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div><div class="ab cl mr ms hb mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hm hn ho hp hq"><p id="4e78" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">[1]我们使用小写<em class="jp">比特币</em>来表示加密货币，大写<em class="jp">比特币</em>，网络和协议。</p><figure class="li lj lk ll fq lm fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff my"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></a></figure></div></div>    
</body>
</html>