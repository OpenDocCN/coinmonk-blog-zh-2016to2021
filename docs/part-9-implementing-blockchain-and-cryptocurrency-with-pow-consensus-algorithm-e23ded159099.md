# ç¬¬ 9 éƒ¨åˆ†:ç”¨ PoW å…±è¯†ç®—æ³•å®žçŽ°åŒºå—é“¾å’ŒåŠ å¯†è´§å¸

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/part-9-implementing-blockchain-and-cryptocurrency-with-pow-consensus-algorithm-e23ded159099?source=collection_archive---------3----------------------->

åœ¨ node.js ä¸­ä½¿ç”¨å·¥ä½œå…±è¯†ç®—æ³•è¯æ˜Žï¼Œå°è§„æ¨¡ã€æ˜“äºŽç†è§£ã€å…¨é¢ã€é€æ­¥å®žæ–½åŒºå—é“¾å’ŒåŠ å¯†è´§å¸

![](img/ca1a2e2c4224dbbeb2b00eaca6e45a01.png)

Source: [Bitcoin Wiki](https://en.bitcoinwiki.org/wiki/Proof-of-work)

è¿™å°†æ˜¯è¿™ä¸ªç³»åˆ—çš„æœ€åŽä¸€éƒ¨åˆ†ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†æˆ‘ä»¬çš„åŒºå—é“¾å’ŒåŠ å¯†è´§å¸ã€‚å‰©ä¸‹çš„å°±æ˜¯ç®—ä½™é¢äº†ã€‚

åŸºäºŽåŒºå—é“¾ä¸­çš„äº¤æ˜“ï¼Œç”¨æˆ·å¯ä»¥è®¡ç®—ä½™é¢ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å‘é€ç»™ç”¨æˆ·çš„äº‹åŠ¡ä¸­çš„æ‰€æœ‰è¾“å‡ºç›¸åŠ æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æžœæˆ‘ä»¬æŠŠä»Žä¸€å¼€å§‹å°±åˆ›å»ºçš„æ‰€æœ‰è¾“å‡ºåŠ èµ·æ¥ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡å¤è®¡ç®—è¾“å‡ºã€‚

å› æ­¤ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†åªæ·»åŠ è‡ªæœ€è¿‘äº¤æ˜“ä»¥æ¥çš„è¾“å‡ºï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½ä»¥å‰å·²ç»ä½¿ç”¨è¿‡è¿™äº›è¾“å‡ºã€‚

è®©æˆ‘ä»¬ç¼–å†™ä»£ç æ¥è®¡ç®— wallet ç±»ä¸­çš„ä½™é¢ã€‚

æ¯å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“æ—¶ï¼Œæˆ‘ä»¬éƒ½è¦æ›´æ–°ä½™é¢ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°`createTransaction` å‡½æ•°ä¸­ã€‚ä¸ºäº†è®¿é—®äº‹åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŒºå—é“¾å®žä¾‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®ƒä½œä¸ºå‚æ•°ä¼ é€’ã€‚

```
createTransaction(recipient, amount,blockchain, transactionPool){ this.balance = this.calculateBalance(blockchain); if(amount > this.balance){
             console.log(`Amount: ${amount} exceeds the current
             balance: ${this.balance}`); return; } .
  .
  .}
```

æˆ‘ä»¬è¿˜å¿…é¡»åœ¨ä½¿ç”¨`createTransaction` æ—¶æ›´æ–°å®ƒã€‚åœ¨ VS ä»£ç ä¸­æœç´¢`createTransaction`å¹¶æ›´æ–°åŠŸèƒ½ã€‚

æˆ‘ä»¬å°†åœ¨ app/index.js æ–‡ä»¶ä¸­ä¼ é€’åŒºå—é“¾å®žä¾‹ã€‚

åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰åŒºå—é“¾å®žä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªï¼Œç„¶åŽåœ¨éœ€è¦çš„åœ°æ–¹ä¼ é€’å®ƒã€‚æˆ‘ä»¬åœ¨ wallet/index.test.js å’Œ transaction-pool.test.js ä¸­è¿™æ ·åš

æ‚¨å¯ä»¥é‡æ–°è¿è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬å°†åƒä»¥å‰ä¸€æ ·é€šè¿‡æ‰€æœ‰æµ‹è¯•ã€‚

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æµ‹è¯•`calculateBalance`å‡½æ•°ã€‚

å°†ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹æ·»åŠ åˆ° wallet/index.test.js æ–‡ä»¶ä¸­ã€‚

è¿è¡Œæµ‹è¯•ï¼Œæ‚¨å°†æœ‰ 31 ä¸ªæµ‹è¯•é€šè¿‡ã€‚

æˆ‘ä»¬çš„åŠ å¯†è´§å¸ç»ˆäºŽå‡†å¤‡å¥½äº†ã€‚

ç»§ç»­é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œä»Žå¤´å¼€å§‹æŽ¢ç´¢å®ƒçš„æ‰€æœ‰åŠŸèƒ½ã€‚åœ¨ä¸åŒçš„ç«¯å£ä¸Šè¿è¡Œå‡ ä¸ªå®žä¾‹ï¼Œäº’ç›¸å‘é€åŠ å¯†è´§å¸ã€‚

è¿™å°±å®Œæˆäº†é¡¹ç›®ã€‚ï¼ï¼

Source: [giphy](https://media.giphy.com/media/5GoVLqeAOo6PK/giphy.gif)

# å»¶é•¿

å¦‚æžœæˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªæ›´å¥å£®çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•:

1.  åˆ›å»ºä½™é¢èŽ·å–è¯·æ±‚
2.  å¹¿æ’­å—è€Œä¸æ˜¯é“¾
3.  æ·»åŠ äº‹åŠ¡æ± é˜ˆå€¼
4.  æœ‰é€‰æ‹©åœ°ä»Žæ± ä¸­åˆ é™¤äº‹åŠ¡
5.  åˆ›å»ºä¸€ä¸ªä¸éœ€è¦è¢«è°ƒç”¨çš„è‡ªæ²»çŸ¿å·¥
6.  æ·»åŠ äº¤æ˜“è´¹ï¼Œæœ€å¿«çš„çŸ¿å·¥å°†èŽ·å¾—äº¤æ˜“è´¹

å¦‚æžœä½ æ„¿æ„ï¼Œé‚£ä¹ˆï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»ä¸­æœ¬èªå‘è¡¨çš„åŽŸåˆ›è®ºæ–‡:[åŽŸåˆ›æ¯”ç‰¹å¸ç ”ç©¶è®ºæ–‡](https://bitcoin.org/bitcoin.pdf)

*ä½ å¯ä»¥åœ¨è¿™é‡Œ* *æ‰¾åˆ°è¿™ä¸ªé¡¹ç›®* [*çš„å…¨éƒ¨å·¥ä½œä»£ç ã€‚*](https://github.com/kashishkhullar/blockchain-nodejs)

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚è¯·éšæ„æå‡ºä¸Žæœ¬æ–‡ã€åŒºå—é“¾æˆ–æ•´ä¸ªä¸–ç•Œç›¸å…³çš„ä»»ä½•é—®é¢˜ã€‚

å¦‚æžœä½ å–œæ¬¢æˆ–å‘çŽ°è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œè¯·é¼“æŽŒã€‚ ***ðŸ‘***

å¿«ä¹ç¼–ç :)

> [ç›´æŽ¥åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)