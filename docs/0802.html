<html>
<head>
<title>Building a blockchain application using Hyperledger Fabric with Angular Frontend: Part-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用具有角度前端的Hyperledger Fabric构建区块链应用程序:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/building-a-blockchain-application-using-hyperledger-fabric-with-angular-frontend-part-1-f070bf169231?source=collection_archive---------4-----------------------#2018-06-20">https://medium.com/coinmonks/building-a-blockchain-application-using-hyperledger-fabric-with-angular-frontend-part-1-f070bf169231?source=collection_archive---------4-----------------------#2018-06-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="badf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这一系列教程中，我们将使用Hyperledger Composer构建一个简单的供应链管理系统，将其部署在我们的计算机上，并构建一个angularfront-end与之交互。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/c47e32e6f2330f50ae63afffcbe54315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EDL2ZhensBDx085tCQnClQ.jpeg"/></div></div></figure><p id="40f8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第1部分主要关注在在线composer平台上编码、部署和测试我们的应用程序。如果您想了解如何在本地部署它并构建前端，请跳到<a class="ae ka" rel="noopener" href="/@yashwanthmadaka/building-a-blockchain-application-using-hyperledger-fabric-with-angular-frontend-part-2-22ef7c77f53">第2部分</a>。</p><blockquote class="kb"><p id="c81d" class="kc kd ht bd ke kf kg kh ki kj kk jn ek translated"><a class="ae ka" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><p id="1720" class="pw-post-body-paragraph iq ir ht is b it kl iv iw ix km iz ja jb kn jd je jf ko jh ji jj kp jl jm jn hm dt translated">首先，我们将访问<a class="ae ka" href="http://composer-playground.mybluemix.net/login" rel="noopener ugc nofollow" target="_blank"> hyperledger composer在线游乐场</a>。当我们访问网站时，我们可以看到下面的屏幕。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/728178e8e8c4a21fac3edf73522a5437.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5PKsttZMTmnUjXSiB9UcPg.png"/></div></figure><p id="e185" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们单击部署新的业务网络。我们将把我们的项目命名为Block-Track。因此，将<strong class="is hu">业务网络名称</strong>命名为block-track，并描述您的选择。将<strong class="is hu">网络管理卡的名称</strong>命名为admin@block-track</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/28b72d8958f637b93b974155e8d5c428.png" data-original-src="https://miro.medium.com/v2/format:webp/1*JDO2xY3JF9i5CUvcSFigrw.png"/></div></figure><p id="8c01" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在点击右侧的<strong class="is hu">部署</strong>按钮，出现以下页面。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/561754a5f1384331873f79e48d84e3fc.png" data-original-src="https://miro.medium.com/v2/format:webp/1*mq7qDR87-tSOEDe0vU4tSQ.png"/></div></figure><p id="0494" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，点击<strong class="is hu">立即连接。</strong></p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/913b174a0c4a9c8c1b8e96ab4194bcf1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*n378a2G6clhEPvY7vpi-2g.png"/></div></figure><p id="184d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，这是我们定义模型的主页。“定义”选项卡用于创建、编辑和升级您的业务网络。在<strong class="is hu">定义</strong>选项卡的左侧，您可以看到您当前业务网络定义中所有文件的列表。使用<strong class="is hu">添加文件</strong>按钮可以将新文件添加到您的企业网络中。可以将模型文件、脚本文件、访问控制文件和查询文件添加到您的业务网络中。</p><p id="4f3c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦您添加并修改了业务网络定义的文件，您就可以使用<strong class="is hu">部署更改</strong>按钮将更改部署到您的网络中。点击<strong class="is hu">部署变更</strong>后，您可以在<strong class="is hu">测试</strong>选项卡中试验您的变更。<strong class="is hu">导出</strong>按钮允许您下载当前的业务网络作为<strong class="is hu">。bna </strong>文件。</p><p id="2356" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先是</p><p id="f1d8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">模型文件:开发人员与业务分析师一起定义我们业务网络的模型。这是用Composer建模语言写的。现在用下面的代码替换模型文件中的代码</p><pre class="jp jq jr js fq kr ks kt ku aw kv dt"><span id="3c39" class="kw kx ht ks b fv ky kz l la lb">namespace org.hyperledger_composer.scms</span><span id="4d38" class="kw kx ht ks b fv lc kz l la lb">enum ProductDesc {<br/> o Shoes<br/> o Socks<br/> o Belts<br/> o SportsShoes<br/> o Flipflops<br/>}</span><span id="c305" class="kw kx ht ks b fv lc kz l la lb">enum ProductSize {<br/> o SMALL<br/> o MEDIUM<br/> o LARGE<br/>}</span><span id="9f39" class="kw kx ht ks b fv lc kz l la lb">asset Product identified by productId {<br/> o String productId<br/> o String producttype<br/> o ProductSize size<br/> o ProductDesc description<br/> --&gt; Participant owner<br/> --&gt; Participant issuer<br/>}</span><span id="86f2" class="kw kx ht ks b fv lc kz l la lb">participant Customer identified by email {<br/> o String email<br/> o String firstName<br/> o String lastName<br/> o String type<br/>}</span><span id="5038" class="kw kx ht ks b fv lc kz l la lb">participant Manufacturer identified by email {<br/> o String email<br/> o String firstName<br/> o String lastName<br/> o String type<br/>}</span><span id="fc95" class="kw kx ht ks b fv lc kz l la lb">participant Distributor identified by email {<br/> o String email<br/> o String firstName<br/> o String lastName<br/> o String type<br/>}</span><span id="b8f7" class="kw kx ht ks b fv lc kz l la lb">participant Retailer identified by email {<br/> o String email<br/> o String firstName<br/> o String lastName<br/> o String type<br/>}</span><span id="45bf" class="kw kx ht ks b fv lc kz l la lb">transaction MoveProduct {<br/> --&gt; Product product<br/> --&gt; Participant issuer<br/> --&gt; Participant newOwner<br/>}</span></pre><p id="21d6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们创建了4个参与者。制造商、分销商、零售商和客户，并通过他们的电子邮件进行识别。我们创建一个名为Product的资产，由productId标识。我们通过指定枚举为产品创建额外的描述。我们创建了一个名为MoveProduct的事务。</p><p id="0598" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">用以下代码替换<strong class="is hu">脚本文件</strong>。这是我们模型的主要逻辑。</p><pre class="jp jq jr js fq kr ks kt ku aw kv dt"><span id="0a7f" class="kw kx ht ks b fv ky kz l la lb">/**<br/> * Trade a product to a new player<br/> * <a class="ae ka" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> {org.hyperledger_composer.scms.MoveProduct} moveProduct - the trade product transaction<br/> * <a class="ae ka" href="http://twitter.com/transaction" rel="noopener ugc nofollow" target="_blank">@transaction</a><br/> */<br/>async function moveProduct(moveProduct) { // eslint-disable-line no-unused-vars<br/> moveProduct.product.issuer = moveProduct.product.owner;<br/> moveProduct.product.owner = moveProduct.newOwner;<br/> const assetRegistry = await getAssetRegistry('org.hyperledger_composer.scms.Product');<br/> await assetRegistry.update(moveProduct.product);<br/>}</span></pre><p id="dc16" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在用下面的代码替换<strong class="is hu">访问控制文件</strong>。这个文件列出了每个人拥有的所有访问控制。</p><pre class="jp jq jr js fq kr ks kt ku aw kv dt"><span id="9c31" class="kw kx ht ks b fv ky kz l la lb">rule Default {<br/> description: "Allow all participants access to all resources"<br/> participant: "ANY"<br/> operation: ALL<br/> resource: "org.hyperledger_composer.scms.*"<br/> action: ALLOW<br/>}</span><span id="a92f" class="kw kx ht ks b fv lc kz l la lb">rule SystemACL {<br/> description: "System ACL to permit all access"<br/> participant: "org.hyperledger.composer.system.Participant"<br/> operation: ALL<br/> resource: "org.hyperledger.composer.system.**"<br/> action: ALLOW<br/>}</span><span id="dfd4" class="kw kx ht ks b fv lc kz l la lb">rule NetworkAdminUser {<br/> description: "Grant business network administrators full access to user resources"<br/> participant: "org.hyperledger.composer.system.NetworkAdmin"<br/> operation: ALL<br/> resource: "**"<br/> action: ALLOW<br/>}</span><span id="a068" class="kw kx ht ks b fv lc kz l la lb">rule NetworkAdminSystem {<br/> description: "Grant business network administrators full access to system resources"<br/> participant: "org.hyperledger.composer.system.NetworkAdmin"<br/> operation: ALL<br/> resource: "org.hyperledger.composer.system.**"<br/> action: ALLOW<br/>}</span></pre><p id="bbe9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在替换了所有的文件后，现在点击deploy，应该会出现一条消息说<strong class="is hu"> <em class="ld">变更已部署。</em> </strong></p><p id="9218" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们可以通过点击test选项卡来测试我们的模型。出现以下页面。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/9615076af772824c7f85795c6a3aa5c8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*U0nCHHRdkUFS-HRWvuuYSA.png"/></div></figure><p id="87d4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">忽略“参与者和资产”选项卡中的SampleParticipant和SampleAsset。这些出现是因为我们一开始在一个<strong class="is hu">基本样本网络</strong>中创建了一切。选择<strong class="is hu">空业务网</strong>避开这些多余的参与者。</p><p id="1d87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，单击客户选项卡，然后单击<strong class="is hu">+创建新参与者</strong>按钮。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/9602ebf82816369246f0e64a0b7c85a3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*l_qwzVLv66xv6moPeQI_Uw.png"/></div></figure><p id="9ed9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">输入您选择的详细信息，然后单击“新建”按钮。同样，为分销商、制造商和零售商创建其他参与者。</p><div class="jp jq jr js fq ab cb"><figure class="le jt paragraph-image"><div class="ab fr cl kq"><img src="../Images/93978308bbb68a41d6e977f4f23ee596.png" data-original-src="https://miro.medium.com/v2/format:webp/1*rdvdejzWJtXyT9HNXB29aA.png"/></div></figure><figure class="le jt paragraph-image"><div class="ab fr cl kq"><img src="../Images/fc5c524a0ca7c8a171ad13433a33abd0.png" data-original-src="https://miro.medium.com/v2/format:webp/1*yudbhm-Pixqfz_QWGA9rbw.png"/></div></figure></div><p id="a33a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们通过单击“资产”选项卡中的“产品”选项卡来创建新产品。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/db23a8f56fb5439622e63ac7d0ab7d90.png" data-original-src="https://miro.medium.com/v2/format:webp/1*bLbgjb0An9-noCXFtSZB9w.png"/></div></figure><p id="f14b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请输入您选择的详细信息。我们在“发行者”列中给出制造商的电子邮件，在“所有者”列中给出经销商的电子邮件，然后单击“新建”。创建了一个新产品，其详细信息已从制造商转移到分销商。<br/>现在我们对产品进行交易。单击提交事务，并从事务类型中选择MoveProduct。我们想把这个产品从经销商那里发给客户。所以键入如下。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/269ee6345e3a63d7eccf0e5eafc0bd0b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5UbrrqIXLd8AnIaXqJWV7w.png"/></div></figure><p id="234c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击提交，交易成功消息出现。我们可以看到产品的所有者和发行者已经发生了变化。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/b62e7b3bdd2c9b41da5227fd02488cc6.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2OhfNheNRS2lCOy6L4Tb9A.png"/></div></figure><p id="79b1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">单击所有事务选项卡，查看到目前为止发生的所有操作。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/290ed77fbff3ca4e93922fdf836a3bb8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*expYr6XfQBoNewBEinNmAA.png"/></div></figure><p id="e427" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是主要部分(即区块链部分)。所有不同的条目类型都被记录下来，并按照时间戳的顺序链接起来。单击viewrecord查看该特定块的内容。我们可以看到特定条目类型的transactionId和时间戳。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="ab fr cl kq"><img src="../Images/ae7807843c796f2651bf0b67d313002c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Gl_yeAvGSelCTXtDRwoyPQ.png"/></div></figure><p id="dca6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">祝贺你..！！</strong></p><p id="6473" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您已经在在线hyperledger composer playground中成功完成了<strong class="is hu">构建、部署和测试</strong>您的第一个区块链应用程序。在下一个教程中，我们将在本地部署它，并构建一个有角度的前端与之交互。现在转到<a class="ae ka" rel="noopener" href="/@yashwanthmadaka/building-a-blockchain-application-using-hyperledger-fabric-with-angular-frontend-part-2-22ef7c77f53"> part-2 </a>继续封锁。</p><p id="3f51" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意:</strong>以上代码只是供应链管理系统的一个简单版本，仅用于演示目的。那段代码有很多漏洞，需要改进。</p></div><div class="ab cl lf lg hb lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="hm hn ho hp hq"><p id="a992" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="ld">原载于2018年6月20日</em><a class="ae ka" rel="noopener" href="/coinmonks/building-a-blockchain-application-using-hyperledger-fabric-with-angular-frontend-part-1-c7d1cbb70007"><em class="ld">【medium.com】</em></a><em class="ld">。</em></p></div></div>    
</body>
</html>