<html>
<head>
<title>Blockchain Development Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">区块链开发环境</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/blockchain-development-environment-775176fd88f3?source=collection_archive---------0-----------------------#2018-02-19">https://medium.com/coinmonks/blockchain-development-environment-775176fd88f3?source=collection_archive---------0-----------------------#2018-02-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/c4e3fa5436812eb800b2a3c9de508765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myY345H2376N21kQ8oeyNw.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><a class="ae jf" href="http://chimoosoft.com/local-development-environment/" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><p id="c34f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="ke">以下说明假设Ubuntu 16.04 linux，但对于其他版本的linux(和MacOS)也类似。通过初始化一个</em> <a class="ae jf" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank"> <em class="ke"> AWS EC2实例</em> </a> <em class="ke">，可以从头开始创建一个Ubuntu服务器。请注意，免费的t2.micro没有足够的资源来运行区块链。相反，至少创建一个附加了16GiB卷的t2.medium实例。参见</em> <a class="ae jf" rel="noopener" href="/@PrateeshNanada/steps-to-install-testrpc-in-windows-10-96989a6cd594"> <em class="ke">此处</em> </a> <em class="ke">了解Windows 10安装的基本说明。</em></p><h1 id="60a4" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">软件包安装</h1><p id="0988" class="pw-post-body-paragraph jg jh ht ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hm dt translated">确保包管理器引用了以太坊库，并且在基本以太坊开发包中是最新的</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="aa85" class="lr kg ht ln b fv ls lt l lu lv">sudo add-apt-repository -y ppa:ethereum/ethereum<br/>sudo apt-get update<br/>sudo apt-get -y upgrade</span><span id="86af" class="lr kg ht ln b fv lw lt l lu lv">sudo apt-get -y install curl git vim build-essential libssl-dev<br/>sudo apt-get install software-properties-common</span></pre><p id="9fa2" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然后为Javascript运行时环境安装Node.js(最好使用NVM):</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="37a0" class="lr kg ht ln b fv ls lt l lu lv">curl -o- <a class="ae jf" href="https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh</a> | bash</span><span id="5bf5" class="lr kg ht ln b fv lw lt l lu lv">source ~/.profile<br/>nvm install node</span></pre><p id="09e8" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用Node.js包管理器安装Truffle(以太坊开发框架)和Solidity(智能合约的高级语言)</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="64f0" class="lr kg ht ln b fv ls lt l lu lv">npm install -g truffle<br/>npm install -g solc</span></pre><p id="bae5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">安装用于测试和开发的个人区块链RPC客户端(以前被称为testrpc，但已被重命名为Ganache)</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="d3a0" class="lr kg ht ln b fv ls lt l lu lv">npm install -g ganache-cli</span></pre><p id="4eb7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这些<strong class="ji hu">可选的</strong>安装将来可能对其他开发工具有用，但是可以以后安装。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="debf" class="lr kg ht ln b fv ls lt l lu lv">sudo apt-get install ethereum ##<em class="ke">optional, installs geth<br/></em>sudo apt-get install solc <em class="ke">##optional, installs C-version of solidity<br/></em>npm install web3 ethereumjs-util ethereumjs-tx <em class="ke">###optional</em><br/>sudo npm install -g express <em class="ke">###optional<br/></em>sudo npm install web3-utils ###optional utilities<em class="ke"> </em></span></pre><h1 id="4bc0" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">测试安装</h1><p id="7264" class="pw-post-body-paragraph jg jh ht ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hm dt translated">用一个示例Truffle项目测试安装，比如Truffle发行版附带的MetaCoin</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="79b8" class="lr kg ht ln b fv ls lt l lu lv">mkdir MetaCoin<br/>cd MetaCoin<br/>truffle unbox metacoin<br/>truffle compile<br/>truffle develop</span></pre><p id="09ca" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这将启动一个简单的测试网络和命令行界面。它还创建了10个虚拟用户帐户，每个帐户有100个虚拟以太网。例如，在Truffle命令行界面中键入这个命令会显示第一个帐户的初始余额。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="4794" class="lr kg ht ln b fv ls lt l lu lv">truffle(development)&gt; web3.eth.getAccounts().then(function(accounts) {return web3.eth.getBalance(accounts[0]);}).then(function(balance) {return web3.utils.fromWei(balance,'ether');}).then(function(ether) {return parseFloat(ether);})<br/><strong class="ln hu">100</strong></span></pre><p id="c440" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">可以使用migrate命令将合同部署到(虚拟)区块链中。注意这使用了Ether，这可以通过在运行migrate后检查默认帐户上的余额来确认。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="8d90" class="lr kg ht ln b fv ls lt l lu lv">truffle(development)&gt; migrate --reset<br/>truffle(development)&gt; web3.eth.getAccounts().then(function(accounts) {return web3.eth.getBalance(accounts[0]);}).then(function(balance) {return web3.utils.fromWei(balance,'ether');}).then(function(ether) {return parseFloat(ether);})<br/><strong class="ln hu">99.9229097</strong></span></pre><p id="9bc9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用Ctrl-D退出块菌。</p><h1 id="c6da" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">迁移到独立网络</h1><p id="d1b7" class="pw-post-body-paragraph jg jh ht ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hm dt translated">Truffle <code class="eh lx ly lz ln b">develop</code>选项提供了一种快速调试合同的方法，但是它只包含在开发计算机上。任何网络测试和计算节点之间的测试都需要实际的网络。</p><p id="2563" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一个好的第一步是在开发计算机上测试网络。在另一个终端中启动测试网络(ganache-cli )(首选，因为各种日志将会回显到屏幕上),或者在后台用&amp;符号运行</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="02f8" class="lr kg ht ln b fv ls lt l lu lv">ganache-cli&amp;</span></pre><p id="3f89" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">需要对Truffle进行配置才能实现这一点，编辑元币目录中的truffle.js，如下所示:</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="5b3b" class="lr kg ht ln b fv ls lt l lu lv">module.exports = {<br/>  networks: {<br/>    development: {<br/>      host: "127.0.0.1",<br/>      port: 8545,<br/>      network_id: "*" // Match any network id<br/>    }<br/>  }<br/>};</span></pre><p id="2330" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然后运行松露，迁移合同。这将产生与使用<code class="eh lx ly lz ln b">truffle develop</code>相同的结果</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="5353" class="lr kg ht ln b fv ls lt l lu lv">truffle console<br/>truffle(development)&gt; migrate --reset</span></pre><blockquote class="ma"><p id="7196" class="mb mc ht bd md me mf mg mh mi mj kd ek translated"><a class="ae jf" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ml mm mn mo mp iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mk"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>