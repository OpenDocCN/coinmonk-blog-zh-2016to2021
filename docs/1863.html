<html>
<head>
<title>A Java developer’s first impressions from Corda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个Java开发人员对Corda的第一印象</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-java-developers-first-impressions-from-corda-a5e3d6ce6e44?source=collection_archive---------3-----------------------#2018-12-07">https://medium.com/coinmonks/a-java-developers-first-impressions-from-corda-a5e3d6ce6e44?source=collection_archive---------3-----------------------#2018-12-07</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="a6fc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最近，我有机会玩了一会儿基于JVM的开源区块链平台<a class="ae jo" href="https://www.corda.net/" rel="noopener ugc nofollow" target="_blank"> Corda </a>。我惊讶地发现它是如何将区块链思想与商用中间件技术融合在一起，并创建了一个新的分散式企业集成概要。下面是我对它的第一印象，以及一个<a class="ae jo" href="http://camel.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Camel </a>连接器的贡献。</p><h1 id="8d91" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">什么是Corda？</h1><p id="e213" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">Corda是一个分散的数据库和业务流程平台，其设计和构建完全是为了在可识别的各方之间实施法律协议。这是一个DLT实现，受比特币的<a class="ae jo" href="https://bitcoin.org/en/glossary/unspent-transaction-output" rel="noopener ugc nofollow" target="_blank"> UTXO </a>模型的影响很大，并受到金融行业“企业化”要求的推动。Corda是用Kotlin编写的，运行在JVM上，使用了许多成熟的中间件技术。因此，与其他区块链平台相比，Corda为具有集成、消息传递和业务流程管理经验的Java开发人员提供了一个低门槛。</p><h1 id="3d03" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">设计原则</h1><ul class=""><li id="585d" class="ks kt ht is b it kn ix ko jb ku jf kv jj kw jn kx ky kz la dt translated">有权限的(而不是无权限的网络，如比特币、以太坊等)——这并不奇怪，因为企业区块链用例主要关注可识别方之间的业务集成挑战的自动化。</li><li id="e049" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">点对点(而不是像比特币等那样的全球交易广播)——这使得数据只能在需要知道它的节点之间共享，这也提高了隐私性和可扩展性。</li><li id="b440" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">类似于比特币的UTXO模型(而不是以太坊的账户模型)——这是使Corda成为DLT/区块链而不是分布式业务流程管理平台的部分。</li><li id="a897" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">重用(而不是从头开始构建一切)——这是我最喜欢的Corda部分。Java生态系统的重用、关系数据库的重用、消息传递系统的重用等等。</li></ul><p id="b913" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些设计原则的结合使Corda成为竞争对手中非常独特的DLT平台。它具有比特币UTXO模型、以太坊智能合约功能、结构私有通道的元素，最重要的是，它尽可能重用和构建在现有的经过战斗考验的中间件技术之上。</p><h1 id="f516" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">主要概念</h1><ul class=""><li id="7b71" class="ks kt ht is b it kn ix ko jb ku jf kv jj kw jn kx ky kz la dt translated">由点对点通信节点组成的许可网络。</li><li id="2c30" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">一种分类帐，其中每个节点维护其唯一的数据库，而不是单个存储。</li><li id="c7cb" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">防止双重花费和验证交易的公证节点。</li><li id="d8c2" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">仅在包含的事实为真时才签署事务的Oracle服务(与典型的Oracle略有不同)。</li><li id="b328" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">状态对象是不可变的，代表分类帐上的事实。状态通过事务修改，并且只存储在拥有节点上。</li><li id="badd" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">契约是基于JVM的确定性函数，用于验证事务。</li><li id="e78c" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">交易是对分类账的候选更新，必须在合同上有效并签字确认。</li><li id="f487" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">流封装了业务流程，并抽象了所有的网络、I/O、存储和并发性。所有智能合约活动都发生在可以通过RPC调用或其他流调用启动的流范围内。流不像契约那样在沙盒中运行，而是作为常规的Java代码执行。</li></ul><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lg"><img src="../Images/f5f056c4847acc93ae34042441dd02cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7tIQp2JVOF8fJiQ5ZVeX4A.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><em class="lw">A Corda Flow that interacts with Node A, Node B, and the Notary Pool</em></figcaption></figure><p id="2759" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在以太坊中，智能契约的概念将业务逻辑和状态封装为一体。在Corda中，状态和契约对象是不同的概念:状态是持久的，而契约是确定性函数(意味着所有事务验证都是由契约在不同节点上执行的，并且应该产生相同的结果)。</p><p id="0e18" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此外，Corda引入了流的概念(一种分布式编排引擎)，这在以太坊世界中类似于相互调用的契约(一种编排)。但是Corda流并没有部署到所有节点中，它们不是共享状态的一部分，而是代表特定于单个节点的标准JVM代码。</p><h1 id="2cfb" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">技术栈</h1><p id="d8ec" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">在“重用”原则的驱动下，Corda正在重用现有的存储、消息和Java解决方案。而<a class="ae jo" href="https://www.jpmorgan.com/global/Quorum" rel="noopener ugc nofollow" target="_blank"> Quorum </a>等区块链平台则采取以太坊等无许可PoW框架，通过取代共识机制、取消燃气费、引入私下交易等方式使其“企业化”。，Corda采取了相反的方法。Corda采用现有的中间件技术，并应用UTXO的比特币概念，创建了一类新的软件，可以将其描述为“分布式业务流程和状态管理系统”。Corda通过使用商用技术来实现这一点，例如用于存储的关系数据库，以及用于状态复制和分布式业务流程协调的消息传递。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lx"><img src="../Images/9802273fb0ee4310b1fb35b92707a955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IcaUkHhTrPjQD5lMhGVC8g.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><em class="lw">Main components of Corda</em></figcaption></figure><p id="e53a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">高级技术堆栈:</p><ul class=""><li id="959c" class="ks kt ht is b it iu ix iy jb ly jf lz jj ma jn kx ky kz la dt translated">它使用Gradle构建，需要Oracle JDK 8，在T2 Docker T3上运行(Linux用于生产)。</li><li id="dcc0" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">Corda节点是一个平面类路径JVM应用程序(不需要Spring Boot、应用服务器或OSGI容器)。</li><li id="1891" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">存储:关系数据库— H2、PostgreSQL、SQL Server、OracleDB。</li><li id="167a" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">对象关系映射:JPA — <a class="ae jo" href="http://hibernate.org/" rel="noopener ugc nofollow" target="_blank"> JBoss Hibernate </a>。</li><li id="64f5" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">消息传递:基于AMQP的<a class="ae jo" href="https://activemq.apache.org/artemis/" rel="noopener ugc nofollow" target="_blank"> — Apache ActiveMQ /Artemis </a>。</li><li id="d83e" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">度量:Jolokia</li><li id="ed6f" class="ks kt ht is b it lb ix lc jb ld jf le jj lf jn kx ky kz la dt translated">其他:Quasar，Kryo，Shiro，Jackson等，</li></ul><h1 id="6320" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">Apache Camel与Corda的集成</h1><p id="455d" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">由于我在企业集成方面的背景和对区块链的兴趣，最近我为以太坊和Quorum创建并撰写了关于<a class="ae jo" rel="noopener" href="/@bibryam/enterprise-integration-for-ethereum-fa67a1577d43"> Apache Camel connector的文章。</a>本着探索区块链企业的精神，我为Corda 创建了一个Apache Camel连接器<a class="ae jo" href="https://github.com/apache/camel/blob/master/components/camel-corda/src/main/docs/corda-component.adoc" rel="noopener ugc nofollow" target="_blank">。连接器使用Corda-RPC库，并提供Camel生产者/消费者端点来与Corda节点交互。该组件提供了用于注册和接收来自Corda节点的事件的消费者，以及用于向节点发送命令的生产者。以下是支持的全套操作:</a></p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff mb"><img src="../Images/f2c5bdaddb2064f7eede82b580a74e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6zpcF515EDvnln6_2p0i-w.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek">Apache Camel connector for Corda</figcaption></figure><p id="4827" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">消费者</strong> : vaultTrack，vaultTrackBy，vaultTrackByCriteria，vaultTrackByWithPagingSpec，vaultTrackByWithSorting，stateMachinesFeed，networkMapFeed，statemachinedtransactionmappingfeed，startTrackedFlowDynamic。</p><p id="deed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Producer </strong>:当前节点时间、获取协议版本、网络地图快照、状态机器快照、状态机器记录的TransactionMappingSnapshot、注册流、清除网络地图缓存、isFlowsDrainingModeEnabled、setFlowsDrainingModeEnabled、notaryIdentities、节点信息、addVaultTransactionNote、获取VaultTransactionNotes、上传附件、attachmentExists、openAttachment、queryAttachments、节点信息FromParty、notaryPartyFromX500Name、partiesFromName</p><p id="b069" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要了解关于Camel的更多信息，以及它如何补充Corda解决方案，请阅读上面链接的Camel Ethereum连接器文章。</p><h1 id="8318" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">结论</h1><p id="ea08" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">无公共许可的区块链正面临严峻的技术挑战，包括规模、治理、能源浪费，以及投机、监管、一般用途和适用性方面的非技术挑战。他们有分散一切的崇高想法，但尚未证明技术和经济模式有能力实现这一愿景。</p><p id="5299" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">另一方面，私人许可的区块链，如Corda、Fabric、Quorum不受这些技术挑战的影响，因为它们的目标使用案例是受监管市场中数量较少的可识别方。他们的目标是改进和自动化企业现有的商业模式，而不是发现全新的经济模式。在某种意义上，许可的区块链代表了下一代跨组织的业务流程和数据集成系统。这些系统是否符合“blockcian”的标准，或者是否将这个术语用作营销术语，都无关紧要。在私人和许可的世界里，去中心化是理想的属性，而区块链是一个实施细节。</p><p id="210a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这个领域，Corda不是革命性的，而是一个建立在成熟的存储和中间件技术生态系统之上的进化平台。区块链技术仍然需要证明自己，而建立在成熟技术之上是第一步。</p><p id="6920" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我探索区块链企业的下一站将是<a class="ae jo" href="https://www.hyperledger.org/projects/fabric" rel="noopener ugc nofollow" target="_blank"> Hyperledger Fabric </a>。保重。</p><blockquote class="mc"><p id="d358" class="md me ht bd mf mg mh mi mj mk ml jn ek translated"><a class="ae jo" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mn mo mp mq mr ll fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mm"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="lh li lj lk fq ll fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff ms"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="http://bit.ly/2G71Sp7" rel="noopener ugc nofollow" target="_blank"><strong class="bd mt">Click to read today’s top story</strong></a></figcaption></figure></div></div>    
</body>
</html>