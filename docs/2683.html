<html>
<head>
<title>Attribute-Based Access Control (ABAC) in Hyperledger fabric</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hyperledger结构中基于属性的访问控制(ABAC)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/attribute-based-access-control-abac-in-hyperledger-fabric-1eb81330f67a?source=collection_archive---------0-----------------------#2020-01-26">https://medium.com/coinmonks/attribute-based-access-control-abac-in-hyperledger-fabric-1eb81330f67a?source=collection_archive---------0-----------------------#2020-01-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/674929a34496ad06d5b33fce597f8f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4DykSiBqVjfHuiHJWycig.png"/></div></div></figure><div class=""/><p id="7bfe" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在Hyperledger Fabric中，ABAC用于将访问权限限制在证书中具有必要属性的特定用户。</p><ol class=""><li id="c4f0" class="jz ka ie jd b je jf ji jj jm kb jq kc ju kd jy ke kf kg kh dt translated">先说带属性的认证创建。</li></ol><p id="88c1" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">通常，创建证书的过程是<br/> 1)注册<br/> 2)注册</p><p id="42c0" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">注册是用户从给定的CA请求并获得数字证书的过程。注册通常由注册员完成，告诉CA发行数字证书。</p><ul class=""><li id="6fcb" class="jz ka ie jd b je jf ji jj jm kb jq kc ju kd jy ki kf kg kh dt translated">一名<strong class="jd if">管理员</strong>(注册员)在CA中注册。然后<strong class="jd if">管理员</strong>接收这个<strong class="jd if">管理员</strong>的签名密钥和证书。</li><li id="17cd" class="jz ka ie jd b je kj ji kk jm kl jq km ju kn jy ki kf kg kh dt translated">管理员然后用正确的信息将<strong class="jd if">用户1 </strong>注册到CA中。CA返回一个<strong class="jd if">秘密</strong>。</li><li id="51e8" class="jz ka ie jd b je kj ji kk jm kl jq km ju kn jy ki kf kg kh dt translated">然后，该密码用于将用户1注册到CA。结果是<strong class="jd if">用户1 </strong>的签名密钥和证书。</li></ul><p id="d920" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我已经在youtube上传了一个详细的视频来实现基于属性的访问控制。</p><figure class="ko kp kq kr fq hv"><div class="bz el l di"><div class="ks kt l"/></div></figure><blockquote class="ku"><p id="af71" class="kv kw ie bd kx ky kz la lb lc ld jy ek translated"><a class="ae le" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><p id="47a9" class="pw-post-body-paragraph jb jc ie jd b je lf jg jh ji lg jk jl jm lh jo jp jq li js jt ju lj jw jx jy hm dt translated">在我们的例子中，我假设admin已经注册，我们将使用属性注册USER1。</p><pre class="ko kp kq kr fq lk ll lm ln aw lo dt"><span id="0b7c" class="lp lq ie ll b fv lr ls l lt lu">fabric_ca_client.register({ enrollmentID: username, affiliation: ‘org1.department1’, role: ‘client’, attrs: [<strong class="ll if">{ name: ‘role’, value: ‘approver’, ecert: true }</strong>] }, admin_user);</span></pre><p id="b1fc" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在使用fabric-ca-client注册用户时，我们需要提供属性，即键-值对对象的数组。在上面的代码片段中，我们提供了属性<strong class="jd if"> { name: 'role '，value: 'approver '，ecert: true }。</strong>对于用户1，我们将添加角色作为审批者。一旦用户注册成功，我们也需要注册。</p><pre class="ko kp kq kr fq lk ll lm ln aw lo dt"><span id="1367" class="lp lq ie ll b fv lr ls l lt lu"><em class="lv">fabric_ca_client.enroll({ enrollmentID: username, enrollmentSecret: secret, </em><strong class="ll if"><em class="lv">attr_reqs: [{ name: “role”, optional: false }]</em></strong><em class="lv">});</em></span></pre><p id="a83e" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">注册时，请确保<strong class="jd if">选项</strong>应为<strong class="jd if">假。</strong>生成证书后，我们可以在证书中看到如下属性。</p><figure class="ko kp kq kr fq hv"><div class="bz el l di"><div class="lw kt l"/></div></figure><p id="8956" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在证书的底部，我们可以看到在注册<br/>“<strong class="jd if">角色”:“审批者”时给出的属性。</strong></p><figure class="ko kp kq kr fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff lx"><img src="../Images/47d55c65ba171d41efb3a5761a2eee51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GUMxuelp44IiCyhAmX-YRg.png"/></div></div></figure><p id="0498" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd if"> 2。现在让我们先进入go中的链代码，然后再进入节点。</strong></p><ol class=""><li id="42df" class="jz ka ie jd b je jf ji jj jm kb jq kc ju kd jy ke kf kg kh dt translated"><strong class="jd if"> Go智能合约</strong></li></ol><p id="a9ab" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">以下所有代码示例都假设了两个条件:</p><ul class=""><li id="5663" class="jz ka ie jd b je jf ji jj jm kb jq kc ju kd jy ki kf kg kh dt translated"><code class="eh ly lz ma ll b">stub</code>变量的类型是传递给链码的<code class="eh ly lz ma ll b">ChaincodeStubInterface</code>。</li><li id="a28b" class="jz ka ie jd b je kj ji kk jm kl jq km ju kn jy ki kf kg kh dt translated">您已经将以下import语句添加到您的chaincode中。</li></ul><p id="5dcf" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><code class="eh ly lz ma ll b">import "github.com/hyperledger/fabric/core/chaincode/lib/cid"</code></p><p id="cbec" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">客户端身份(cid)包中有多种功能可用</p><figure class="ko kp kq kr fq hv"><div class="bz el l di"><div class="lw kt l"/></div></figure><p id="6423" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在本文中，我们将讨论如何获取属性。</p><figure class="ko kp kq kr fq hv"><div class="bz el l di"><div class="lw kt l"/></div></figure><p id="b5a7" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在上面的代码片段中，一旦我们获得了值，就在受限智能契约函数中实现您的业务逻辑。</p><p id="ce8c" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">2.<strong class="jd if">节点智能合约</strong></p><p id="0d5c" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">首先在函数顶部导入fabric-shim包。</p><figure class="ko kp kq kr fq hv"><div class="bz el l di"><div class="lw kt l"/></div></figure><p id="c36e" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">就像go smart contract中提到的一样，根据您在smart contract中的业务逻辑实现添加以下代码片段。</p><figure class="ko kp kq kr fq hv"><div class="bz el l di"><div class="lw kt l"/></div></figure><p id="835c" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">就是这样，你在Hyperledegr Fabric中成功实现了基于属性的访问控制。您可以选择任何语言来编写智能合同，我在go和node语言中已经介绍过了，它对所有语言都是一样的。</p><p id="5e02" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">希望这篇文章对你有帮助。如果你遇到任何问题，请告诉我，我很乐意帮助你。你可以通过linked in或Instagram与我联系。<br/><a class="ae le" href="https://www.instagram.com/pavanadhavofficial/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/pavanadhavofficial/</a><br/><a class="ae le" href="https://www.linkedin.com/in/pavan-adhav/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/pavan-adhav/</a></p><p id="f24a" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">谢谢你。</p><h1 id="2a55" class="mb lq ie bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx dt translated">参考</h1><ul class=""><li id="be35" class="jz ka ie jd b je my ji mz jm na jq nb ju nc jy ki kf kg kh dt translated"><a class="ae le" href="https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#attribute-based-access-control" rel="noopener ugc nofollow" target="_blank">https://github.com/hyperledger/blockchain-explorer</a></li><li id="dcad" class="jz ka ie jd b je kj ji kk jm kl jq km ju kn jy ki kf kg kh dt translated"><a class="ae le" href="https://hyperledger-fabric.readthedocs.io/en/release-1.3/prereqs.html" rel="noopener ugc nofollow" target="_blank">https://hyperledger-fabric . readthedocs . io</a></li><li id="50c3" class="jz ka ie jd b je kj ji kk jm kl jq km ju kn jy ki kf kg kh dt translated"><a class="ae le" href="https://github.com/hyperledger/fabric-samples" rel="noopener ugc nofollow" target="_blank">https://github.com/hyperledger/fabric-samples</a></li></ul><blockquote class="ku"><p id="9db5" class="kv kw ie bd kx ky kz la lb lc ld jy ek translated"><a class="ae le" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ne nf ng nh ni hv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nd"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>