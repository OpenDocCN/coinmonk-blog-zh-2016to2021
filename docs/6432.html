<html>
<head>
<title>Atomic Swaps : What are they? and how do they work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">原子交换:它们是什么？它们是如何工作的？</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/atomic-swaps-what-are-they-and-how-do-they-work-bc7f84e4b7f3?source=collection_archive---------6-----------------------#2021-12-11">https://medium.com/coinmonks/atomic-swaps-what-are-they-and-how-do-they-work-bc7f84e4b7f3?source=collection_archive---------6-----------------------#2021-12-11</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="8a2d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">近年来，我们已经看到了许多分布式分类帐技术的出现，每种分类帐都有自己的优势，并且可能比其他分类帐更适合某些用例，因为需要能够在不同的分类帐之间进行交易。</p><p id="5151" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们来看一个例子，Alice是她想要出售的汽车的所有者，Bob是想要购买所述汽车的潜在买家。但有一个问题，维护车辆所有权记录的当地政府只在分类账A上这样做(用你最喜欢的DLT替换A，这有助于用例)，鲍勃想用运行在分类账B上的CBDC(央行数字货币)支付公寓费用(用你最喜欢的DLT替换B，用于管理CBDCs)。鲍勃和爱丽丝如何着手做这笔交易？</p><p id="2b90" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一种方法是利用双方都信任的并且是两个网络的一部分的中介(让我们称她为Carrie ), Bob和Alice在彼此的网络上创建帐户。Bob然后将金额转到Carrie的账户(或地址)。在Alice从Carrie处得到确认，资金已被转移到她的帐户后，Alice可以继续将汽车的所有权转移给Bob。然后，Carrie会将资金从她的帐户转移到Alice。</p><p id="579d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在上面的例子中，Alice和Bob都信任Carrie，因此Bob知道如果Alice没有将资产转移给他，那么Carrie会将资金转移回Bob的帐户。同样，Alice知道，由于资金已经转移到了Carrie的帐户，一旦她转移了汽车的所有权，她就可以得到付款。虽然这是一个好的方法，但是有一些问题。</p><p id="a313" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">1.爱丽丝和鲍勃都需要找到他们信任的一方。</p><p id="b380" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2.他们信任的一方需要成为双方网络的一部分。</p><p id="7475" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">上述问题往往会减缓资产转移的进程。有没有一种方法可以让我们在不需要可信第三方的情况下完成上述交易？</p><h2 id="e0be" class="jo jp ht bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki dt translated">原子互换</h2><p id="7119" class="pw-post-body-paragraph iq ir ht is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hm dt translated">原子互换中的“原子”一词意味着交易要么完全成功，要么完全失败，这意味着在原子互换完成后，Alice和Bob都进行了成功的交易，要么对双方都进行了失败的交易，不存在一方可以获得另一方的资产的部分交易。</p><h2 id="c467" class="jo jp ht bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki dt translated">它是如何工作的？</h2><p id="a020" class="pw-post-body-paragraph iq ir ht is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hm dt translated">实现原子交换的方法之一是使用HTLC(散列时间锁契约)。双方在各自的网络上部署HTLC。HTLC实质上起着中介的作用。HTLC执行以下操作:</p><ol class=""><li id="ba41" class="ko kp ht is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw dt translated">向事务添加时间锁，以便事务必须在指定的时间内完成。</li><li id="79dd" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">它锁定了双方的资产(是交易的一部分),因此在交易完成或时间用完之前，他们不能花这笔钱。</li><li id="e607" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">它验证执行原子交换所需的秘密(稍后会有更多相关内容)。</li></ol><p id="3912" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们来看看Alice和Bob进行交易需要执行的所有步骤。</p><ol class=""><li id="a5ef" class="ko kp ht is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw dt translated">Alice在Bob的分类账上创建了一个账户。</li><li id="3294" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">Bob在Alice的分类账上创建了一个账户。</li><li id="5d22" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">Alice生成一个秘密，然后生成该秘密的散列。</li><li id="166e" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">Alice部署了一个智能合同，该智能合同将她的资产(汽车)以及机密的散列值锁定，只有Bob能够提供用于生成散列值的机密，智能合同才会将资产转移到Bob的帐户。如果Bob无法在指定时间内完成，则资产将被转移回Alice。</li><li id="e006" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">爱丽丝把秘密的散列发送给鲍勃。</li><li id="0abc" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">Bob部署了一个智能合同，该合同使用时间锁(少于Alice合同中使用的时间)锁定他的资产(CBDC令牌),条件是如果Alice在指定的时间段内提供了生成散列的秘密，则该资产将被转移给Alice，否则令牌将被转移回Bob。</li><li id="9045" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">因为Alice和Bob都在对方的网络中有帐户(地址)，所以他们也是这些网络的参与者，可以看到交易。</li><li id="bedb" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">Alice将秘密透露给Bob的智能合同，然后智能合同将令牌转移到Alice在Bob网络上的帐户。鲍勃现在能够看到这个秘密了。</li><li id="0be4" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated">Bob将此秘密发送到Alice的智能合约，智能合约将资产(汽车)转移到Bob在Alice网络上的账户。</li></ol><p id="22aa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，Alice和Bob都执行了原子交换。</p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/58cfeb0c2aa7dc356db61239968c51e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*jypeoPnwFUwup-oTEvV3Tw.png"/></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek"><strong class="bd lo">Sequence diagram</strong></figcaption></figure><h2 id="0470" class="jo jp ht bd jq jr js jt ju jv jw jx jy jb jz ka kb jf kc kd ke jj kf kg kh ki dt translated">一些需要考虑的事情</h2><p id="44fd" class="pw-post-body-paragraph iq ir ht is b it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj kn jl jm jn hm dt translated">虽然上述方法有助于我们在分类账之间转移资产，但它确实存在一些问题。</p><ol class=""><li id="9ac3" class="ko kp ht is b it iu ix iy jb kq jf kr jj ks jn kt ku kv kw dt translated"><strong class="is hu">未完全自动化:</strong>您可能已经注意到，在Alice透露秘密并获得令牌后，由Bob发起将汽车转移给自己，这意味着Bob需要有一个系统来监听令牌转移给Alice的通知，并使用新透露的秘密触发Alice网络上的智能合同。这一部分必须在应用层或链外实现，并且必须监听来自一个分类帐的通知并触发另一个分类帐的契约。Bob有责任建立这个系统，并确保它完全正常运行。</li><li id="afb6" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated"><strong class="is hu">错误编码的时间锁:</strong>你可能已经注意到的另一个问题是，如果爱丽丝和鲍勃必须在相同的时间限制内进行交易，那么爱丽丝可能是恶意的，在时间限制即将结束时进行交易并接收她的代币，同时拒绝鲍勃的汽车。为了避免这种情况，Bob将他的代币转让给Alice的智能合同的时限应该比Alice的合同的时限短，以便他仍然有时间触发Alice的智能合同并将资产转让给他。</li><li id="9aeb" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated"><strong class="is hu">可能不适用于一些私有的、许可的网络/DLT:</strong>仍然可能发生的一个问题是，在一方获得资产之后，他们简单地从他们的网络中删除另一方的帐户，这对于具有可以创建帐户的节点的DLT尤其如此，该节点也管理这些帐户的密钥。因此，在上面的例子中，如果Bob依靠Alice(她在具有上述规范的DLT网络上)使用她的节点在分类帐上为他创建一个帐户，她仍然可以访问控制该帐户的密钥。对此的一个解决方案可能是让双方运行属于另一方网络的节点。但是这将意味着，对于运行私有网络的任何一方来说，要与同样使用私有网络的另一方进行交易，他们将需要在彼此的网络中有一个节点(这将影响到不同资产的可扩展性)或者有一个可信的第三方(这违背了原子交换的目的)来管理账户。像以太坊或比特币这样的公共和未经许可的区块链不会有这个问题，因为他们的账户是由最终用户控制的。</li><li id="a3cd" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn kt ku kv kw dt translated"><strong class="is hu">技术知识:</strong> Bob或Alice仍然可以通过简单地使用不正确的智能合同被诱骗将他们的资产转移给另一方。因此，Bob和Alice需要了解另一方的DLT，并且能够阅读和验证他们的智能合同。</li></ol><blockquote class="lp"><p id="a651" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated">加入Coinmonks <a class="ae lz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lz" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h1 id="13a8" class="ma jp ht bd jq mb mc md ju me mf mg jy mh mi mj kb mk ml mm ke mn mo mp kh mq dt translated">另外，阅读</h1><ul class=""><li id="4a1b" class="ko kp ht is b it kj ix kk jb mr jf ms jj mt jn mu ku kv kw dt translated"><a class="ae lz" href="https://coincodecap.com/best-crypto-swap-platforms" rel="noopener ugc nofollow" target="_blank">最佳加密交换平台</a> | <a class="ae lz" href="https://coincodecap.com/crypto-exchange" rel="noopener ugc nofollow" target="_blank">最佳加密交易所</a></li><li id="dc1a" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn mu ku kv kw dt translated"><a class="ae lz" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">购买比特币印度</a> | <a class="ae lz" rel="noopener" href="/coinmonks/pionex-review-exchange-with-crypto-trading-bot-1e459d0191ea"> Pionex评论</a> | <a class="ae lz" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="8ad0" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn mu ku kv kw dt translated"><a class="ae lz" rel="noopener" href="/coinmonks/ngrave-zero-review-c465cf8307fc">n ave零点回顾</a> | <a class="ae lz" rel="noopener" href="/coinmonks/phemex-review-4cfba0b49e28"> Phemex回顾</a> | <a class="ae lz" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT回顾</a></li><li id="97f2" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn mu ku kv kw dt translated">最佳<a class="ae lz" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">区块链分析</a>工具| <a class="ae lz" rel="noopener" href="/coinmonks/earn-bitcoin-6e8bd3c592d9">赚比特币</a></li><li id="72d5" class="ko kp ht is b it kx ix ky jb kz jf la jj lb jn mu ku kv kw dt translated"><a class="ae lz" href="https://coincodecap.com/cloudbet-casino-review" rel="noopener ugc nofollow" target="_blank"> Cloudbet赌场评论</a> | <a class="ae lz" href="https://coincodecap.com/ignition-casino-review" rel="noopener ugc nofollow" target="_blank">点火赌场评论</a></li></ul></div></div>    
</body>
</html>