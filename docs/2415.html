<html>
<head>
<title>Atomex: cross-chain atomic swaps on practice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Atomex:实践中的跨链原子互换</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/atomex-cross-chain-atomic-swaps-on-practice-8139571f0ee5?source=collection_archive---------0-----------------------#2019-09-25">https://medium.com/coinmonks/atomex-cross-chain-atomic-swaps-on-practice-8139571f0ee5?source=collection_archive---------0-----------------------#2019-09-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="de7c" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">推出内置混合交换的多重加密桌面钱包</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/4b3ca737ea4f9efaced64a69459f09bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3By4Eu3jenKHbnWE-IcKBg.png"/></div></div></figure><p id="2841" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">一个棘手的开发过程开始结出第一个果实:<a class="ae kq" href="https://atomex.me/" rel="noopener ugc nofollow" target="_blank"> Atomex </a>终于在mainnet中发布了。我们的团队已经完成了从纯原子交换协议到完全成熟的应用程序的激动人心的旅程，现在我们可以说“是的，它工作了！”。<br/>我们要感谢所有早期测试者的反馈，这对我们非常重要！</p><h1 id="dd0f" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">背后的想法</h1><blockquote class="lj lk ll"><p id="75dd" class="ju jv lm jw b jx jy iu jz ka kb ix kc ln ke kf kg lo ki kj kk lp km kn ko kp hm dt translated">我们的目标是为密码爱好者，为那些相信区块链技术背后的想法和偏执的人创造一个产品。</p></blockquote><p id="2aae" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">如果TCP/IP是一种用于在互联网上传输信息的协议，那么区块链对于电子货币和其他类别的资产也是一样的。然而，仍然存在链间间隙，这导致不方便的值分离。<br/>我们将进一步研究的原子交换协议依靠一个本质上简单的想法，以一种不可信的方式有效地填补了这一空白。银行或另一个受信任的第三方正在被智能合约取代，这是仅有的几个仅使用链上可用数据(没有oracles或其他链外数据提供者)就能做到的案例之一。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/0bc9c12d73a9f7ebdd81d67cb6b2cc3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*RjfYP9iZGn0HU3N2.jpg"/></div></figure><h1 id="41fe" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">原子交换基础</h1><p id="b654" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">在我们进入实际部分之前，让我们深入了解一下协议细节。假设爱丽丝想为XTZ买一些ETH，鲍勃同意达成交易。有两种可能的结果，要么交易发生，要么取消。</p><h2 id="d4e1" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">初始阶段</h2><ol class=""><li id="4800" class="mk ml ht jw b jx lr ka ls kd mm kh mn kl mo kp mp mq mr ms dt translated"><strong class="jw hu">爱丽丝锁XTZ <br/> </strong>爱丽丝生成一个随机字节序列——<code class="eh mt mu mv mw b">secret</code>，计算它的<code class="eh mt mu mv mw b">hash</code>并将她的XTZ连同<code class="eh mt mu mv mw b">hash</code>、<code class="eh mt mu mv mw b">lock_time_a</code>值、鲍勃的XTZ <code class="eh mt mu mv mw b">address_b</code> <br/> <em class="lm">这些XTZ只有</em> <code class="eh mt mu mv mw b"><em class="lm">address_b</em></code> <em class="lm">的主人知道</em> <code class="eh mt mu mv mw b"><em class="lm">secret</em></code> <em class="lm">才能赎回，而且必须在</em> <code class="eh mt mu mv mw b"><em class="lm">lock_time_a</em></code> <em class="lm">之前完成，之后爱丽丝才能拿回这些资金</em></li><li id="3dcd" class="mk ml ht jw b jx mx ka my kd mz kh na kl nb kp mp mq mr ms dt translated"><strong class="jw hu"> Bob锁定ETH </strong> <br/>当Alice的交易被确认后，Bob将他的ETH连同同样的<code class="eh mt mu mv mw b">hash</code>、<code class="eh mt mu mv mw b">lock_time_b</code>和Alice的ETH <code class="eh mt mu mv mw b">addreess_a<br/></code>、<em class="lm">一起发送到一个特殊的智能合约中，这些ETH只有</em> <code class="eh mt mu mv mw b"><em class="lm">address_a</em></code>、<em class="lm">的主人知道<em class="lm">才能赎回，而且必须在</em>、<code class="eh mt mu mv mw b"><em class="lm">lock_time_b</em></code>、<em class="lm">之前完成，事后Bob可以取回这些资金。</em></em></li></ol><blockquote class="lj lk ll"><p id="501e" class="ju jv lm jw b jx jy iu jz ka kb ix kc ln ke kf kg lo ki kj kk lp km kn ko kp hm dt translated">要求:<code class="eh mt mu mv mw b">lock_time_b &lt; lock_time_a</code> <br/>防止出现爱丽丝先退款再赎回鲍勃资金的情况。</p></blockquote><h2 id="060a" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">成功赎回</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nc"><img src="../Images/3c9796af80f3ea8b994b33f156c4adff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XfXAKK5iWRk8cjfl"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Simplified scheme of an XTZ/ETH swap (success case)</figcaption></figure><ol class=""><li id="efd3" class="mk ml ht jw b jx jy ka kb kd nh kh ni kl nj kp mp mq mr ms dt translated">爱丽丝赎回ETH  <br/>爱丽丝将<code class="eh mt mu mv mw b">secret</code>发送到区块链以太坊的契约，并收到鲍勃的ETH作为回报。<br/><em class="lm"/><code class="eh mt mu mv mw b"><em class="lm">secret</em></code><em class="lm">现已揭晓，鲍勃·XTZ可以花了。</em></li><li id="02b3" class="mk ml ht jw b jx mx ka my kd mz kh na kl nb kp mp mq mr ms dt translated">鲍勃赎回了XTZ，鲍勃在区块链的泰佐斯寄出了合同，并收到了爱丽丝的XTZ。</li></ol><h2 id="1307" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">退款案例</h2><p id="464d" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">我们将不考虑在初始化阶段出错的情况(它们相当琐碎),但是将检查Alice由于某种原因没有赎回Bob的ETH的情况，即<code class="eh mt mu mv mw b">secret</code>没有显示并且<code class="eh mt mu mv mw b">lock_time_b</code>已经过去。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nk"><img src="../Images/c1c326426efaa219213f3d690526d402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E3h_ZJqbw-6AKxHT"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Simplified scheme of an XTZ/ETH swap (refund case)</figcaption></figure><ol class=""><li id="d893" class="mk ml ht jw b jx jy ka kb kd nh kh ni kl nj kp mp mq mr ms dt translated">鲍勃退还ETH  <br/>鲍勃将<code class="eh mt mu mv mw b">hash</code>送到区块链以太坊的智能合约处，取回他的ETH。<br/> <em class="lm">他不能把爱丽丝的XTZ从</em> <code class="eh mt mu mv mw b"><em class="lm">secret</em></code> <em class="lm">中揭示出来。</em></li><li id="9162" class="mk ml ht jw b jx mx ka my kd mz kh na kl nb kp mp mq mr ms dt translated"><strong class="jw hu">爱丽丝退款给XTZ </strong> <br/>爱丽丝一直等到<code class="eh mt mu mv mw b">lock_time_a</code>，然后把<code class="eh mt mu mv mw b">hash</code>发送给泰佐斯区块链的合同，拿回她的XTZ。<br/> <em class="lm">她不能花鲍勃的ETH，因为</em> <code class="eh mt mu mv mw b"><em class="lm">lock_time_b</em></code> <em class="lm">已经过去了。</em></li></ol><h1 id="d132" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">理论到此为止</h1><p id="adcc" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">是时候看看Atomex的表现了！我们将从一个多密码设置开始，平衡一些XTZ和ETH。关于上面的方案<strong class="jw hu">我们是鲍勃</strong>，我们的交易对手是爱丽丝。</p><h2 id="84ad" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">创建新转换</h2><p id="f89a" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">选择“转换”选项卡，并设置我们要兑换XTZ的ETH金额。检查交易条款，然后按“转换”。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nl"><img src="../Images/47711863deaf31658e67c40c62224ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qHL-RBfdKopwUdMS"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Step 0. The user creates a new conversion</figcaption></figure><p id="ba30" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">新的с转换出现在状态为“进行中”的表格中。<br/>实际上，<strong class="jw hu">就这些了</strong>我们需要通过Atomex wallet进行原子交换。但是让我们跟随由我们的行为产生的内部过程。</p><h2 id="83e9" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">引擎盖下:爱丽丝锁XTZ</h2><p id="f485" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">首先，查看一下区块链泰佐斯地区Atomex智能合同的近期运作情况:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nm"><img src="../Images/ccbb45644c05eda7ab69335e0b2b8f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h97ZUAVEn_5JXUS8"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Step 1. Alice locks XTZ</figcaption></figure><p id="dabc" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这是Alice发送的交易，这些锁定的资金最终将是我们的。注意通过参数传递的<code class="eh mt mu mv mw b">hash</code>字段。</p><h2 id="7004" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">引擎盖下:鲍勃(美国)锁ETH</h2><p id="4e4e" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">一旦XTZ交易被确认，Bob发送一个ETH交易。我们可以看到它包含了相同的<code class="eh mt mu mv mw b">hash</code>:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nl"><img src="../Images/64b9f48fbeae8e28793c5c7c05aad794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PcVUAXy1TymLbrij"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Step 2. Bob locks ETH</figcaption></figure><h2 id="c084" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">引擎盖下:爱丽丝救赎</h2><p id="5e36" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">爱丽丝那边的另一个契约调用。她收到我们的ETH作为交换<code class="eh mt mu mv mw b">secret</code>，鲍勃捡起来:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nn"><img src="../Images/1bc246984549501b5c2ff3a3e83ea8a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2EuspeKDFu9FQeVh"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Step 3. Alice redeems ETH</figcaption></figure><h2 id="d525" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">引擎盖下:鲍勃(美国)赎回XTZ</h2><p id="9cc2" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">最后，鲍勃使用收集到的<code class="eh mt mu mv mw b">secret</code>解锁XTZ:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff no"><img src="../Images/a47027fdb87cde1116f4008674ac52ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rS-e0Q6VxcO4xU3-"/></div></div><figcaption class="nd ne fg fe ff nf ng bd b be z ek">Step 4. Bob redeems XTZ</figcaption></figure><p id="cfe7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们的转换状态变为“已完成”，一切正常。</p><h1 id="900f" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">旁注</h1><p id="bdb2" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">您看到的所有内部操作都是由Atomex wallet在后台进程中执行的，因此在交换完成之前，有必要让它保持在线。在我们的XTZ/ETH转换的例子中，整个过程只需要8分钟，但是，这取决于特定的区块链确认时间。</p><p id="355a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们目前正致力于提供不同的订单类型。一旦Atomex掉期市场足够稳定，就可以通过Atomex应用下达限价订单。</p><h2 id="e5b4" class="lw ks ht bd kt lx ly lz kx ma mb mc lb kd md me ld kh mf mg lf kl mh mi lh mj dt translated">如何设置Atomex钱包</h2><p id="8750" class="pw-post-body-paragraph ju jv ht jw b jx lr iu jz ka ls ix kc kd lt kf kg kh lu kj kk kl lv kn ko kp hm dt translated">查看我们的<a class="ae kq" href="https://github.com/atomex-me/atomex.client.wpf/wiki/Atomex-wallet-tutorial" rel="noopener ugc nofollow" target="_blank">教程</a>。</p><p id="700f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">非常感谢您的任何反馈，如果您有功能需求或错误报告，欢迎加入我们的<a class="ae kq" href="https://t.me/atomex_official" rel="noopener ugc nofollow" target="_blank">电报</a>聊天。别忘了在推特上关注我们！</p><p id="0f0b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">干杯！</p><p id="1534" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="lm">最初发表于2019年9月25日</em><a class="ae kq" href="https://baking-bad.org/blog/2019/09/25/atomex-decentralized-exchange-cross-chain-atomic-swaps-on-practice/" rel="noopener ugc nofollow" target="_blank"><em class="lm">https://baking-bad.org</em></a><em class="lm">，在那里你可以找到文章的完整版本。</em></p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff np"><img src="../Images/673b3528e0b341cca62769c9baa632cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bcTJUjFtXf1QtlWzlS04XQ.jpeg"/></div></a></figure><blockquote class="nq"><p id="48a9" class="nr ns ht bd nt nu nv nw nx ny nz kp ek translated"><a class="ae kq" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ob oc od oe of jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff oa"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>