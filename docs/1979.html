<html>
<head>
<title>IOTA MAM Ultra Lite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IOTA MAM Ultra Lite</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/iota-mam-ultra-lite-493d8d1fb71a?source=collection_archive---------1-----------------------#2019-01-16">https://medium.com/coinmonks/iota-mam-ultra-lite-493d8d1fb71a?source=collection_archive---------1-----------------------#2019-01-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="1924" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">面向IOTA的最轻掩码认证消息协议</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/496acc0a54c596abe7afafbe44b69013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Culhtv4yKN0mLgymF9QSrg.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Created with <a class="ae jy" href="http://weavesilk.com/" rel="noopener ugc nofollow" target="_blank">Silk — Interactive Generative Art</a></figcaption></figure><p id="07a4" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">受<a class="ae jy" rel="noopener" href="/@samuel.rufinatscha/mam-lite-a-more-flexible-messaging-protocol-for-iota-562fdd318e1d"> MAM Lite </a>协议的启发，由<a class="kv kw gr" href="https://medium.com/u/589112703eef?source=post_page-----493d8d1fb71a--------------------------------" rel="noopener" target="_blank">Samuel rupinatscha</a>编写的IOTA中MAM流的轻量级替代方案，我决定用Python重新实现它。这样做的时候，我无意中遇到了一些限制，这些限制源于MAML使用的RSA签名方案，因此我选择切换到另一个签名方案，<a class="ae jy" href="https://github.com/warner/python-ed25519" rel="noopener ugc nofollow" target="_blank">ed 25519</a>(NANO使用的那个)。它具有短得多的公钥和签名，因此提供了几个优点，这将在后面讨论。努力的结果是有了MAML_Ed25519协议库(不，不是MAMUL😃)，你可以在这里查看代码和例子<a class="ae jy" href="https://github.com/stkubr/MAML" rel="noopener ugc nofollow" target="_blank">。<br/>除了使用不同的签名方案之外，它具有相似的特征:</a></p><ul class=""><li id="3eef" class="kx ky ht kb b kc kd kf kg ki kz km la kq lb ku lc ld le lf dt translated">证明</li><li id="2bab" class="kx ky ht kb b kc lg kf lh ki li km lj kq lk ku lc ld le lf dt translated">前向保密</li><li id="b01c" class="kx ky ht kb b kc lg kf lh ki li km lj kq lk ku lc ld le lf dt translated">从每个地址进行流访问</li><li id="e8c6" class="kx ky ht kb b kc lg kf lh ki li km lj kq lk ku lc ld le lf dt translated">频道分裂</li><li id="ae3a" class="kx ky ht kb b kc lg kf lh ki li km lj kq lk ku lc ld le lf dt translated">AES加密</li></ul><p id="17a4" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">现在我们来讨论一下区别。</p><h2 id="2f44" class="ll lm ht bd ln lo lp lq lr ls lt lu lv ki lw lx ly km lz ma mb kq mc md me mf dt translated">首先，考虑RSA签名方案:</h2><p id="4192" class="pw-post-body-paragraph jz ka ht kb b kc mg iu ke kf mh ix kh ki mi kk kl km mj ko kp kq mk ks kt ku hm dt translated">RSA密钥可用于加密和签名，但它们相当长，例如，trytes中的RSA-3072 pubkey和signature是:</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="ml mm l"/></div></figure><p id="72d3" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">因此，将RSA公钥与数据一起发送大约需要1000 trytes，这只是目前的公钥，签名也需要大约1024 trytes。请记住，Tangle上的一个事务的长度为2187 trytes，很难在一个事务中放入任何其他有意义的内容。处理这种情况方法是只保留pubkey的散列，并将JSON数据分割成块，放在一个包中的几个纠结的事务上，就像MAML所做的那样。</p><p id="cefd" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">还有另一个缺点——仅提供公钥的散列需要预先知道相应的公钥<strong class="kb hu">并存储它</strong>,以便能够在MAML验证签名。否则，如果你中途加入一个公共流，你将无法验证和识别消息。潜在地，这可以通过下面的技巧来解决:</p><p id="1b06" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">h(pubkey)→try tes[0:81]→Address→send _ tx _ to(Address)with _ data({ ' pubkey ':pubkey })</p><p id="3bc6" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">因此，任何知道pubkey散列的人都会知道在哪里搜索或<em class="mn">监听</em>相应的pubkey，与散列进行比较并存储它。但是与传统的区块链不同，Tangle经常自我修剪(现在更加频繁了)，所以有必要定期重播你的pubkey。</p><p id="54af" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">最后，使用相同的RSA密钥同时对受限访问消息进行签名和加密可能会有问题，因为签名和加密密钥应该具有不同的生命周期。</p><h2 id="b7df" class="ll lm ht bd ln lo lp lq lr ls lt lu lv ki lw lx ly km lz ma mb kq mc md me mf dt translated">Ed25519 signature的核心是短键和速度:</h2><p id="6a8c" class="pw-post-body-paragraph jz ka ht kb b kc mg iu ke kf mh ix kh ki mi kk kl km mj ko kp kq mk ks kt ku hm dt translated">一分钟有多短？让我们来看看:</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="ml mm l"/></div></figure><p id="4471" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这是一个巨大的差异！现在，您可以为您的JSON提供pubkey，而不仅仅是一个hash，它具有与上面的RSA-3072大致相似的安全级别。</p><p id="95cc" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">由于Ed25519不能用于加密，因此对于流内的细粒度访问消息传递，通信实体仍需要交换它们的RSA公钥，从而确保签名密钥和非对称加密密钥的不同生命周期。</p></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><p id="671f" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">作为结论，我想指出，这不是MAML协议“哪个更好”的争论，而是对统一MAML流的建议，这可以通过向JSON添加一个额外的字段来轻松完成:</p><pre class="jj jk jl jm fq mv mw mx my aw mz dt"><span id="fa98" class="ll lm ht mw b fv na nb l nc nd">{</span><span id="eafc" class="ll lm ht mw b fv ne nb l nc nd"><strong class="mw hu">'MAML_protocol': MAML_Ed25519 (or MAML_RSA)</strong><br/>'data_payload': Some data here ....<br/>'pubkey/hash': fgdwer8s7d6gdfg6d6fg8.....<br/>'signature': fd7g9s8df7g98df7g...</span><span id="2187" class="ll lm ht mw b fv ne nb l nc nd">}</span></pre><p id="1f0b" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">以便代码可以切换，并且与MAML协议的类型无关。</p><p id="87ae" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">基于这个建议，我计划扩展代码，以便能够动态处理Ed25519和RSA流。代码库可以在这里找到<a class="ae jy" href="https://github.com/stkubr/MAML" rel="noopener ugc nofollow" target="_blank"/>。你可以通过<strong class="kb hu"> stkubr#1936 </strong>或Twitter <a class="ae jy" href="https://twitter.com/KubrakStan" rel="noopener ugc nofollow" target="_blank"> @KubrakStan </a>联系我。如果你喜欢我的工作，想让我继续下去，请随时给我买瓶啤酒，地址是:</p><p id="d6a3" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">ehnqjbgfaiutjkpmsucsdmih 9 xthanmjbvezlfyuruxjuartgkg 9 kdbhtczhdkzzogt 9 engemhposlhpwxaelupsdx</p><p id="5942" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">感谢您的关注:)</p><p id="adff" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu"> UPD </strong>:是的，设计方案被破坏了——请看<a class="ae jy" href="https://www.di.ens.fr/~pnguyen/pub_DuNg12a.htm" rel="noopener ugc nofollow" target="_blank">这里</a></p><blockquote class="nf"><p id="312a" class="ng nh ht bd ni nj nk nl nm nn no ku ek translated"><a class="ae jy" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nq nr ns nt nu jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff np"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>