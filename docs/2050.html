<html>
<head>
<title>Learn how to code elliptic curve cryptography</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何编写椭圆曲线密码</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/learn-how-to-code-elliptic-curve-cryptography-a952dfdc20ab?source=collection_archive---------0-----------------------#2019-02-08">https://medium.com/coinmonks/learn-how-to-code-elliptic-curve-cryptography-a952dfdc20ab?source=collection_archive---------0-----------------------#2019-02-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="c566" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">本文介绍了对椭圆曲线密码的理解和编码。</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/0ad658b4d672d8732427e3bceb7f7d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GO-QwCbmDpg_0kAPUFKtKQ.jpeg"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek"><a class="ae jy" href="https://amyxinternetofthings.com/2017/09/14/quantum-computing-series-cryptography/" rel="noopener ugc nofollow" target="_blank">https://amyxinternetofthings.com/2017/09/14/quantum-computing-series-cryptography/</a></figcaption></figure><p id="ec2c" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在我上一篇关于如何<a class="ae jy" rel="noopener" href="/coinmonks/build-a-simple-blockchain-fe7ee48090d9">构建一个简单的区块链</a>的文章中，我写了区块链技术的终极基础，并给了你一个如何在你的平台上构建一个简单区块链的逐步指南。现在我想向大家展示加密货币和区块链的密码学部分。因为你可能从上次就开始使用，我们从一点点理论开始，然后直接进入编程。我们走吧！</p></div><div class="ab cl kv kw hb kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hm hn ho hp hq"><h2 id="d628" class="lc ld ht bd le lf lg lh li lj lk ll lm ki ln lo lp km lq lr ls kq lt lu lv lw dt translated">介绍</h2><p id="6cd4" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">因为你们中的大多数人可能都有自己的加密资产，所以你们可能听说过“公钥”和“私钥”这两个词。在区块链网络中，公钥相当于你的地址。如果网络中的其他任何人想要向您发送一些资金，他或她会将资金发送到您的公钥。你的私钥可以被视为你的签名——每当你想进行资金交易时，你就证明你是拥有属于你的公钥的私钥的人，而无需向网络中的任何人展示。检查你的交易的网络参与者可以用你的公钥证明你是私钥的所有者，甚至不知道它是什么。相当酷！但是这在更基本的层面上是如何工作的呢？让我们稍微研究一下这个理论。</p><h2 id="b99d" class="lc ld ht bd le lf lg lh li lj lk ll lm ki ln lo lp km lq lr ls kq lt lu lv lw dt translated">椭圆曲线加密</h2><p id="b8d1" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">在这一部分，我将给你一个非常简短的介绍，关于所使用的加密系统背后的魔力。因为它背后的数学非常复杂，没有必要理解它的每一个方面。主要在区块链网络中使用的加密系统是基于椭圆曲线的数学。但是这样的椭圆曲线实际上是什么呢？用数学术语来写，它是满足方程的所有点(x，y)的集合</p><blockquote class="mc md me"><p id="6fc8" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt translated">y = x +ax + b</p></blockquote><p id="b580" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这样的曲线可能看起来像这样，例如:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/4ee4b3a8a4c8238fa0fa01ab1abd446b.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*KKdvscN4y-NcGZ8Nnx1ZYQ.png"/></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">How an elliptic curve might look like. Source: <a class="ae jy" href="https://www.google.de/search?q=elliptic+curve&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwjwzrey_NDdAhXJIsAKHRR6CiEQ_AUICigB&amp;biw=1363&amp;bih=601#imgrc=jFTvyQoRaPIAfM" rel="noopener ugc nofollow" target="_blank">https://www.google.de/search?q=elliptic+curve&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwjwzrey_NDdAhXJIsAKHRR6CiEQ_AUICigB&amp;biw=1363&amp;bih=601#imgrc=jFTvyQoRaPIAfM</a>:</figcaption></figure><p id="1653" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如果你在这条曲线上取一个任意点P = (x，y)并把它加到曲线上的另一个点Q上，你将再次得到位于这条椭圆曲线上的一个点。下图显示了这一点的添加。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/2a78f2099268bb6e9fe6b3610af54ac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*O6Hxnd6uwz6FY-AZm0ZExg.jpeg"/></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Visualization of points on an elliptic curve. Source: <a class="ae jy" href="https://www.google.de/search?q=elliptic+curve+cryptography&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwi2lbW9iNHdAhUM2BoKHX3bAngQ_AUICigB&amp;biw=1363&amp;bih=239#imgrc=NSETzS5aoM6peM" rel="noopener ugc nofollow" target="_blank">https://www.google.de/search?q=elliptic+curve+cryptography&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwi2lbW9iNHdAhUM2BoKHX3bAngQ_AUICigB&amp;biw=1363&amp;bih=239#imgrc=NSETzS5aoM6peM</a>:</figcaption></figure><p id="d855" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">您也可以选择曲线上的某个点P，并将其自身增加x倍——您仍然会得到位于椭圆曲线上的一个点。</p><blockquote class="mc md me"><p id="19ed" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt translated">P+P+…+P = xP = R</p></blockquote><p id="9991" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在这种情况下，x只是一个任意的自然数。在椭圆曲线加密中，人们利用这样一个事实，即仅通过已知点P和r来计算数x在计算上是不可行的。这通常被描述为求解离散对数的问题。对于密码学，在椭圆曲线上选择一个适当的点P产生一个足够大的随机自然数x，这个数称为私钥。利用选定的点P和私钥，计算曲线上的点R，然后将其定义为公钥。所以公钥和私钥是紧密相连的！没有私钥，公钥是不存在的，只有知道公钥，由于离散对数问题，几乎不可能确定私钥。</p><p id="509d" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">使用这种方法，可以“签名”任何想要的消息。设<em class="mf"> M </em>为任意消息，<em class="mf"> pub </em>为公钥，<em class="mf"> priv </em>为发送方的私钥。然后根据两个参数<em class="mf"> M </em>和<em class="mf"> priv </em>计算签名:</p><blockquote class="mc md me"><p id="204e" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt translated">签名=符号(M，priv)</p></blockquote><p id="dc1f" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在上式中，函数<em class="mf"> Sign() </em>生成签名。任何收到消息<em class="mf"> M </em>的人都可以验证签名——证明发送者的公钥确实也持有私钥:</p><blockquote class="mc md me"><p id="8b92" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt translated">Verify = Ver(签名，M，发布)</p></blockquote><p id="4f45" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">为了验证，接收方只需要签名本身、消息和发送方的公钥。这就是椭圆曲线加密的基本工作原理，无需深入理论。现在让我们做一些编码！</p><h2 id="9d79" class="lc ld ht bd le lf lg lh li lj lk ll lm ki ln lo lp km lq lr ls kq lt lu lv lw dt translated">编码密码术</h2><p id="3aa2" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">在python中，上述方法可以使用库<em class="mf"> fastecdsa来实现。</em>然而，还有更多用于椭圆曲线加密的库。首先，您需要在您的终端中使用<br/> ' <em class="mf"> pip install' </em>命令将它安装到您的计算机上。</p><pre class="jj jk jl jm fq ml mm mn mo aw mp dt"><span id="ef8d" class="lc ld ht mm b fv mq mr l ms mt">pip install fastecdsa</span></pre><p id="660f" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">安装后，我们可以打开我们的python IDE并开始编码。</p><pre class="jj jk jl jm fq ml mm mn mo aw mp dt"><span id="9957" class="lc ld ht mm b fv mq mr l ms mt">from fastecdsa import keys, curve,ecdsa<br/>priv_key, pub_key = keys.gen_keypair(curve.P256) <br/>print(priv_key)<br/>print(pub_key)</span></pre><p id="d248" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">首先我们从<em class="mf"> fastecdsa </em>库中导入一些类。类<em class="mf"> keys </em>包含一个使用椭圆曲线数学生成密钥对的函数。类别<em class="mf">曲线</em>包含许多不同的椭圆曲线，您可以从中选择一条来生成您的密钥。类<em class="mf"> ecdsa </em>稍后用于生成和验证签名。在第二行中，使用曲线P256生成一对公钥和私钥。之后，我们打印私钥和公钥。私钥的结果应该如下所示:</p><blockquote class="mc md me"><p id="6ef8" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt">20053020608649230331723442089943129241597707800309205888496491961204729412316</p></blockquote><p id="0310" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">你看，私钥是一个非常大的数字，有很多位数！让我们来看看公钥是什么样子的:</p><blockquote class="mc md me"><p id="0d53" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt translated">x:0 xf 8781 fc 1967637 b 0 Fe 3 e 43 CBD 750051672 fad 09d 0 FD 8 f 18d 49 ed 1 f 84 ebb 5c 9<br/>Y:0 x26 a 617 F3 fc 7 B1 c 34 BF 00 b 21445201299 f 9730 BC 7838994751 EAD 5 ddff 511 c 622<br/>(在曲线上&lt; P256 【T30</p></blockquote><p id="6db0" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如您所见，公钥是曲线P256上的点的x坐标和y坐标的组合。完美！让我们继续为一些消息生成和验证签名。只需将下面几行代码添加到上面的代码中:</p><pre class="jj jk jl jm fq ml mm mn mo aw mp dt"><span id="43e5" class="lc ld ht mm b fv mq mr l ms mt">message = ‘I am a message’<br/>(r,s) = ecdsa.sign(message,priv_key)<br/>print((r,s))</span></pre><p id="82c0" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">我们将一些字符串定义为消息，然后使用导入的类<em class="mf"> ecdsa </em>生成签名<em class="mf"> (r，s) </em>。之后，我们打印它，应该会得到类似下面的内容:</p><blockquote class="mc md me"><p id="2838" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt">(50517963046740693636358980032162772006533914957769092229968951281723335924730, 24429916358942402334243425477548564776488638570074379964228780478761347218109)</p></blockquote><p id="e527" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">现在我们可以继续验证这个签名。同样，只需添加以下代码行:</p><pre class="jj jk jl jm fq ml mm mn mo aw mp dt"><span id="ff5a" class="lc ld ht mm b fv mq mr l ms mt">valid = ecdsa.verify((r,s),message,pub_key)<br/>print(valid)</span></pre><p id="b884" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">我们再次使用<em class="mf"> ecdsa </em>类，并从中调用函数<em class="mf"> verify() </em>，这依赖于三个参数签名、消息和生成消息的公钥。之后，我们打印变量<em class="mf"> valid </em>，如果一切顺利的话，它会给出如下输出:</p><blockquote class="mc md me"><p id="b75c" class="jz ka mf kb b kc kd iu ke kf kg ix kh mg kj kk kl mh kn ko kp mi kr ks kt ku hm dt translated">真实的</p></blockquote><p id="6a0d" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">恭喜你！您刚刚了解了区块链网络中使用的公钥加密的基础知识。离创建自己的加密货币又近了一步。</p><p id="f421" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在这一点上，我想感谢你的阅读。如果你喜欢这篇文章，请留下一些掌声。如果你想更深入地挖掘区块链兔子洞，请随意看看加密货币实际上是如何工作的。</p><blockquote class="mu"><p id="5c81" class="mv mw ht bd mx my mz na nb nc nd ku ek translated"><a class="ae jy" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nf ng nh ni nj jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ne"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>