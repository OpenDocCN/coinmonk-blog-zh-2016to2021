<html>
<head>
<title>React Service Worker + Web3 + Android = (╯°□°)╯︵ ┻━┻</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React服务人员+ Web3 + Android = (╯ □ )╯︵ ┻━┻</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/react-service-worker-web3-android-98970a6691ad?source=collection_archive---------0-----------------------#2018-04-19">https://medium.com/coinmonks/react-service-worker-web3-android-98970a6691ad?source=collection_archive---------0-----------------------#2018-04-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="dda5" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">开发者请注意:如果你正在使用Create React App构建你的DApp，请注意React服务人员！</h2></div><p id="64b4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在#ETHDenver之后的两个月，<a class="ae ke" href="https://cryptogs.io" rel="noopener ugc nofollow" target="_blank"> Cryptogs </a>已经准备好全面投产。我在我能找到的每一台设备上都测试了它，效果非常好。Metamask、Cipher、Toshi和Trust看起来都不错……是时候伸出手来上市了。</p></div><div class="ab cl kf kg hb kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hm hn ho hp hq"><p id="d244" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我从<a class="km kn gr" href="https://medium.com/u/32a7eeb3e4cf?source=post_page-----98970a6691ad--------------------------------" rel="noopener" target="_blank"> Toshi </a>的<a class="ae ke" href="https://twitter.com/Sid_Coelho" rel="noopener ugc nofollow" target="_blank"> Sid </a>那里得到了快速的反馈:我的应用程序没有接收到他手机上注入的web3。:(</p><p id="b909" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我很快检查了我所有平台上的所有设备，看起来很棒。然后，我从朋友那里掏出一个旧的安卓手机，果然。没有网络3。WTF！</p><p id="70fe" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">让我更困惑的是，游戏在舞台上运行得很好。一开始我以为是CloudFront，SSL，Web3，Android的问题。但在确保我的舞台环境后，它仍然有效。我不得不深入挖掘…</p></div><div class="ab cl kf kg hb kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hm hn ho hp hq"><p id="bec7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我想把问题简化到最基本的部分。从生产环境开始:Cloudfront，SSL，webserver，捆绑的js等…</p><p id="9ef0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我决定创建一个小的开源repo，并将其托管在:<a class="ae ke" href="https://web3.wtf" rel="noopener ugc nofollow" target="_blank"> https://web3.wtf </a></p><p id="6cbe" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">果然，这个网站会重现问题；用iphone或从桌面访问它，你会看到web3连接。如果你从一个旧的android手机上点击它，它可能会在第一次加载时工作，但在一两次重新加载后，噗。</p></div><div class="ab cl kf kg hb kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hm hn ho hp hq"><p id="a2ab" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">经过大量的故障排除，我发现我的后端从来没有收到任何来自旧Android手机前端的请求。某些东西导致它在“离线”模式下运行，并且没有检测到注入的web3。事实上，我可以<strong class="jk hu">关闭托管我的前端</strong>的机器，游戏仍然会出现在<a class="km kn gr" href="https://medium.com/u/32a7eeb3e4cf?source=post_page-----98970a6691ad--------------------------------" rel="noopener" target="_blank"> Toshi </a>、<a class="ae ke" href="https://www.cipherbrowser.com/" rel="noopener ugc nofollow" target="_blank"> Cipher </a>或<a class="ae ke" href="https://trustwalletapp.com/" rel="noopener ugc nofollow" target="_blank"> Trust Wallet </a> …但没有web3。</p><p id="5fd7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我爱CRA，但React的服务人员对DApps来说是个十足的Jabronie！</p><p id="32e1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果您正在使用Create React App，并且在检测注入的web3时遇到问题，请尝试注释掉index.js中的ServiceWorker内容:</p><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="kt ku l"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">Notice on line 7 and 8 I even go so far as to “unregister()” to make sure to kill the beast.</figcaption></figure><p id="0123" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在我将上面的代码部署到产品中之后，一切都很顺利，现在来自世界各地的人们正在<a class="ae ke" href="https://cryptogs.io" rel="noopener ugc nofollow" target="_blank">扔大锤和收集分散的pog</a>！</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff kz"><img src="../Images/cf29634ad71da5b1d1df28a441b5b722.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/1*4yohyG34GnRquWQFJO6mkQ.gif"/></div></figure></div></div>    
</body>
</html>