<html>
<head>
<title>Check what you are voting for with PyTezos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用PyTezos看看你投的是什么</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/check-what-you-are-voting-for-with-pytezos-6259ccd8869e?source=collection_archive---------2-----------------------#2019-03-12">https://medium.com/coinmonks/check-what-you-are-voting-for-with-pytezos-6259ccd8869e?source=collection_archive---------2-----------------------#2019-03-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="cae3" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">DYOR系列被烤坏了</h2></div><p id="7a25" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这里介绍的教程是游牧实验室在他们的帖子中展示的内容的扩展版本。主要的区别是，我尽可能地保持去中心化，只使用公共节点API和<a class="ae ke" href="https://github.com/baking-bad/pytezos" rel="noopener ugc nofollow" target="_blank"> PyTezos </a>。</p><h1 id="b099" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">介绍</h1><p id="e38e" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">这几天对Tezos来说是一个火热的时刻，协议的第一次更新正在紧锣密鼓地进行，投票机制正在调试。我们目前正处于第一阶段，协议变更提案可以在网上提交，面包师可以投票赞成。推荐阅读<a class="ae ke" rel="noopener" href="/tezos/amending-tezos-b77949d97e1e">《修正Tezos》</a>详细了解其工作原理。</p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/8395189e4bb1a1691a8129df07f9cfe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*A_R_ZzHDNiYTc4vN"/></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek">“Athens A” and “Athens B”</figcaption></figure><p id="feda" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">协议更新对开发者和面包师来说都是一个严峻的挑战，尤其是考虑到Tezos技术栈。前者应该尽可能清楚地解释提议的变化，后者应该进行自己的研究并做出明智的决定。</p><p id="a29d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">谈到目前的提案，游牧实验室做了非常艰苦的工作<a class="ae ke" href="https://blog.nomadic-labs.com/athens-our-proposals-for-the-first-voted-amendment.html" rel="noopener ugc nofollow" target="_blank">评论他们做出的每一项承诺</a>，这无疑值得尊重。我也和几个面包师谈过，我很高兴地了解到他们非常认真地对待投票，做所有的检查并审查所有的代码更改。</p><p id="4427" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">本指南的目的是深入研究修正机制的技术实现，并展示如何在研究中使用<a class="ae ke" href="https://github.com/baking-bad/pytezos" rel="noopener ugc nofollow" target="_blank"> PyTezos库</a>。我们会尽量偏执，避免使用第三方信息源和工具。</p><p id="5752" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们开始吧！</p><h1 id="5e95" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">笔记本</h1><h2 id="9de8" class="lo kg ht bd kh lp lq lr kl ls lt lu kp jr lv lw kr jv lx ly kt jz lz ma kv mb dt translated">本地运行</h2><p id="ae2b" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">你需要python 3.6+和Jupyter包才能继续。</p><pre class="ld le lf lg fq mc md me mf aw mg dt"><span id="93fd" class="lo kg ht md b fv mh mi l mj mk">$ git clone <a class="ae ke" href="https://github.com/baking-bad/pytezos.git" rel="noopener ugc nofollow" target="_blank">https://github.com/baking-bad/pytezos.git</a><br/>$ cd pytezos<br/>$ jupyter notebook</span></pre><p id="105c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">导航到“examples”文件夹并运行<code class="eh ml mm mn md b">dyor_voting.ipynb</code>。</p><h2 id="3606" class="lo kg ht bd kh lp lq lr kl ls lt lu kp jr lv lw kr jv lx ly kt jz lz ma kv mb dt translated">在Google Colab上玩</h2><p id="dc46" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">也可以在线摆弄代码:<a class="ae ke" href="https://colab.research.google.com/drive/1pnAf8xnU9GTSUGRPVy2V9ABRAtZitkpt" rel="noopener ugc nofollow" target="_blank">https://colab . research . Google . com/drive/1 pnaf 8 xnu 9 gtsugrpvy 2v 9 abratzitkpt</a></p><p id="cc85" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">或者查看嵌入式版本:</p><figure class="ld le lf lg fq lh"><div class="bz el l di"><div class="mo mp l"/></div></figure><h1 id="3fe4" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">摘要</h1><p id="d2bf" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">几乎只使用公共Tezos节点和PyTezos，我们就能做以下事情:</p><ul class=""><li id="f5de" class="mq mr ht jk b jl jm jo jp jr ms jv mt jz mu kd mv mw mx my dt translated">获取当前投票周期的基本信息；</li><li id="7042" class="mq mr ht jk b jl mz jo na jr nb jv nc jz nd kd mv mw mx my dt translated">找到求婚注射的瞬间；</li><li id="a7ef" class="mq mr ht jk b jl mz jo na jr nb jv nc jz nd kd mv mw mx my dt translated">加载提案源，用json和二进制格式编码；</li><li id="9aae" class="mq mr ht jk b jl mz jo na jr nb jv nc jz nd kd mv mw mx my dt translated">计算建议id(哈希)；</li><li id="df26" class="mq mr ht jk b jl mz jo na jr nb jv nc jz nd kd mv mw mx my dt translated">加载当前协议源，使用github类标记使代码不同并可视化；</li><li id="0a75" class="mq mr ht jk b jl mz jo na jr nb jv nc jz nd kd mv mw mx my dt translated">查找给定提案的所有投票操作。</li></ul><p id="bea2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由此产生的不同观点:<a class="ae ke" href="https://baking-bad.github.io/tezos-dyor/athens_a_vs_003_PsddFKi3.html" rel="noopener ugc nofollow" target="_blank">“雅典A”vs“003 _ psddfki 3</a>”、<a class="ae ke" href="https://baking-bad.github.io/tezos-dyor/athens_a_vs_athens_b.html" rel="noopener ugc nofollow" target="_blank">“雅典A”vs“雅典B”</a></p><h1 id="6717" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">进一步的工作</h1><h2 id="547b" class="lo kg ht bd kh lp lq lr kl ls lt lu kp jr lv lw kr jv lx ly kt jz lz ma kv mb dt translated">在链上存储建议来源</h2><p id="8a9d" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">如上所述，在投票期间，没有直接的方法从区块链获得礼宾来源。作为一种改进和概念验证，我将尝试在PyTezos中结合使用智能契约和修改后的big_map_get函数来实现这个特性。</p><h2 id="d869" class="lo kg ht bd kh lp lq lr kl ls lt lu kp jr lv lw kr jv lx ly kt jz lz ma kv mb dt translated">操作搜索</h2><p id="20db" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">展示了如何使用改进的二分搜索法算法搜索所有投票操作。在接下来的系列文章中，我将展示如何使用并行化来加速搜索，以及如何将该算法扩展到更一般的情况。</p><p id="4c47" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="ne">最初发表于2019年3月12日https://baking-bad.org</em><em class="ne">的</em> <a class="ae ke" href="https://baking-bad.org/blog/2019/03/12/tezos-governance-check-what-you-are-voting-for-with-pytezos-library/" rel="noopener ugc nofollow" target="_blank"> <em class="ne">，在那里你可以找到文章的完整版本。</em></a></p><blockquote class="nf"><p id="fd29" class="ng nh ht bd ni nj nk nl nm nn no kd ek translated"><a class="ae ke" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nq nr ns nt nu lh fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff np"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>