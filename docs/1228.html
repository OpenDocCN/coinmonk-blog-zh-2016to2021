<html>
<head>
<title>How to Make a Survey with an EOS Smart Contract (2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨EOSæ™ºèƒ½åˆåŒè¿›è¡Œè°ƒæŸ¥(2)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/coinmonks/how-to-make-a-survey-with-a-smart-contract-2-b1fe0d83a358?source=collection_archive---------8-----------------------#2018-08-03">https://medium.com/coinmonks/how-to-make-a-survey-with-a-smart-contract-2-b1fe0d83a358?source=collection_archive---------8-----------------------#2018-08-03</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="dd07" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">ä½¿ç”¨æ™ºèƒ½åˆåŒè¿›è¡ŒæŠ½æ ·è°ƒæŸ¥ã€‚</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/21c938a108d372867e1b53fd52fd7537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNa-6I77jfVpIIVkUrXibA.png"/></div></div></figure><p id="fd08" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç»§ç»­å¦‚ä½•åšè°ƒæŸ¥(1)ï¼Œæˆ‘å°†ä»è§£é‡Šç¬¬ä¸‰éƒ¨åˆ†å¼€å§‹ã€‚</p><p id="f511" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">é…ç½®å­˜å‚¨ç¬¬ä¸‰ä¸ªç»“æœçš„è¡¨ã€‚</p><pre class="jj jk jl jm fq kq kr ks kt aw ku dt"><span id="f59b" class="kv kw ht kr b fv kx ky l kz la">/// <a class="ae lb" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> table surveyresult i64<br/>    struct surveyresult<br/>    {<br/>      account_name owner;<br/>      uint64_t no1count;<br/>      uint64_t no2count;<br/>      uint64_t no3count;<br/>      uint64_t no4count;</span><span id="e9de" class="kv kw ht kr b fv lc ky l kz la">uint64_t primary_key() const {return owner;}</span><span id="498a" class="kv kw ht kr b fv lc ky l kz la">EOSLIB_SERIALIZE(surveycon,(owner)(no1count)(no2count)(no3count)(no4count))<br/>    };<br/>    typedef multi_index&lt;N(surveyresult),surveyresult&gt; _result;</span></pre><p id="09e4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">æ ¹æ®è®¾ç½®ä¸ºä¸»é”®çš„æ‰€æœ‰è€…ï¼Œå£°æ˜ä¸€ä¸ªè¡¨ï¼Œå…¶ä¸­è°ƒæŸ¥çš„ç¬¬1ä¸ªç´¯ç§¯å“åº”æ•°ä¸ºç¬¬1ä¸ªè®¡æ•°ï¼Œå…¶ä½™æŒ‰ç¬¬2ä¸ªè®¡æ•°ã€ç¬¬3ä¸ªè®¡æ•°ã€ç¬¬4ä¸ªè®¡æ•°çš„é¡ºåºæ’åˆ—ã€‚</p><p id="bd48" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç°åœ¨ï¼Œæ·»åŠ ç°æœ‰çš„æ·»åŠ æ“ä½œåŠŸèƒ½ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·è°ƒç”¨æ·»åŠ æ“ä½œæ—¶ä¿®æ”¹ç»“æœè¡¨ã€‚</p><pre class="jj jk jl jm fq kq kr ks kt aw ku dt"><span id="8bda" class="kv kw ht kr b fv kx ky l kz la">auto iter=result.find(_self);<br/>      if(iter!=result.end())<br/>      {<br/>        result.modify(iter,_self,[&amp;](auto&amp; surveyresult)<br/>        {<br/>          surveyresult.no1count = (selnum==1)?iter-&gt;no1count+1:iter-&gt;no1count;<br/>          surveyresult.no2count = (selnum==2)?iter-&gt;no2count+1:iter-&gt;no2count;<br/>          surveyresult.no3count = (selnum==3)?iter-&gt;no3count+1:iter-&gt;no3count;<br/>          surveyresult.no4count = (selnum==4)?iter-&gt;no4count+1:iter-&gt;no4count;<br/>        });<br/>      }<br/>      else<br/>      {<br/>        result.emplace(_self,[&amp;](auto&amp; surveyresult)<br/>        {<br/>          surveyresult.owner = _self;<br/>          surveyresult.no1count = (selnum==1)?1:0;<br/>          surveyresult.no2count = (selnum==2)?1:0;<br/>          surveyresult.no3count = (selnum==3)?1:0;<br/>          surveyresult.no4count = (selnum==4)?1:0;<br/>        });<br/>      }</span></pre><p id="cc5d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">åœ¨ç°æœ‰add actionå‡½æ•°çš„è¿”å›ä¹‹ä¸Šç¼–å†™æºä»£ç çš„æ·»åŠ ï¼›ã€‚æºä»£ç å¯èƒ½çœ‹èµ·æ¥å¾ˆå¤šï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ç»“æœè¡¨ï¼Œé‚£ä¹ˆå°±æ”¾ç½®ã€‚å¦‚æœæœ‰ç»“æœè¡¨ï¼Œé‚£ä¹ˆä¿®æ”¹ã€‚åœ¨æ”¾ç½®çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®selnumå°†åˆå§‹å€¼åˆå§‹åŒ–ä¸º1æˆ–0ï¼Œsel numæ˜¯é€‰å®šçš„å“åº”æ–¹ã€‚åœ¨ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®selnumåŠ 1ä¿®æ”¹ç°æœ‰å€¼ï¼Œsel numæ˜¯é€‰æ‹©çš„responderã€‚</p><p id="8f5b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">æœ€åï¼ŒæŸ¥çœ‹ç»“æœçš„æ“ä½œã€‚è¿™ä¸ªåŠ¨ä½œå¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºåœ¨çœŸå®æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»eos.jsæˆ–rpcé€šä¿¡ä¸­æŸ¥çœ‹ç»“æœè¡¨ã€‚</p><pre class="jj jk jl jm fq kq kr ks kt aw ku dt"><span id="b887" class="kv kw ht kr b fv kx ky l kz la">void result()<br/>    {<br/>      _result result(_self,_self);<br/>      uint64_t no1;<br/>      uint64_t no2;<br/>      uint64_t no3;<br/>      uint64_t no4;</span><span id="c5c4" class="kv kw ht kr b fv lc ky l kz la">auto iter=result.find(_self);<br/>      if(iter!=result.end())<br/>      {<br/>        no1=iter-&gt;no1count;<br/>        no2=iter-&gt;no2count;<br/>        no3=iter-&gt;no3count;<br/>        no4=iter-&gt;no4count;<br/>      }<br/>      print("no1 : ",no1," no2 : ",no2," no3 : ",no3," no4 : ",no4);</span><span id="ec4e" class="kv kw ht kr b fv lc ky l kz la">return;<br/>    }</span></pre><p id="a35c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è°ƒç”¨ç»“æœè¡¨çš„æ•°æ®å¹¶æ‰“å°ã€‚è¿™ä¸ªåŠ¨ä½œæ²¡æœ‰ä»»ä½•å¼‚å¸¸ã€‚</p><p id="2807" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç°åœ¨ç¼–è¯‘å¹¶éƒ¨ç½²æºä»£ç è¿›è¡Œæµ‹è¯•ã€‚æ–‡ç« æœ«å°¾é™„æœ‰å®Œæ•´çš„æºä»£ç ã€‚å› ä¸ºè¿™ç¯‡æ–‡ç« çš„æºä»£ç ä¸æ£€æŸ¥è¡¨çš„é‡å¤æ•°æ®ï¼Œæ‰€ä»¥å»ºè®®æŒ‰é¡ºåºè¿›è¡Œã€‚ä¸ºäº†è§£å†³æµ‹è¯•æœŸé—´çš„æ•°æ®é—®é¢˜ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªdelallæ“ä½œæ¥åˆ é™¤æ‰€æœ‰è¡¨çš„ä¿¡æ¯ï¼Œä½ å¯ä»¥åœ¨å¸–å­åº•éƒ¨çš„æ•´ä¸ªæºä»£ç ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚</p><p id="3207" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">é¦–å…ˆï¼Œå†™è°ƒæŸ¥æŠ¥å‘Šã€‚</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ld"><img src="../Images/e439561c211437fa7e08c3b7e9eb3728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vlba2Qthiz5RA2OYukiybQ.png"/></div></div></figure><p id="5d8d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è¯¥è°ƒæŸ¥å·²æ³¨å†Œã€‚æˆ‘å·²ç»æ£€æŸ¥äº†surveyconè¡¨ä»¥ç¡®è®¤æ•°æ®ã€‚</p><p id="89d5" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">åœ¨ç”¨æˆ·1çš„è®¸å¯ä¸‹ï¼Œé€‰æ‹©æ•°å­—4ã€‚</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ld"><img src="../Images/da95377fc188cb9ac941aa1ceba02c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIqYUag6xv-o6Xoyutp-sQ.png"/></div></div></figure><p id="177f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">å¦‚æœæ‚¨é€‰æ‹©äº†é‡å¤çš„å¸æˆ·ï¼Œæˆ–è€…å¸æˆ·ä¸æ˜¯æŒ‡å®šç»™æ“ä½œçš„å¸æˆ·ï¼Œå°†ä¼šå‡ºç°é”™è¯¯ã€‚</p><p id="ba10" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">åœ¨ç”¨æˆ·2çš„è®¸å¯ä¸‹ï¼Œé€‰æ‹©æ•°å­—4ã€‚</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ld"><img src="../Images/d9cc0a4ecc75f1ea4efb1417959dd29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSOPr4tGnTmBIRb5LWjhmw.png"/></div></div></figure><p id="5573" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">é€‰æ‹©ä¹‹åï¼Œæˆ‘æ£€æŸ¥äº†surveydetailè¡¨ï¼Œä»¥æ£€æŸ¥ä¸ºæ¯ä¸ªå®¢æˆ·é€‰æ‹©äº†ä»€ä¹ˆã€‚</p><p id="4f89" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">æœ€åæ‰“å°ç»“æœã€‚</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff le"><img src="../Images/8cc58e12d0a836cdca0140120fc6ba20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pog0fTTRsnNCCHS7_NP0Qw.png"/></div></div></figure><p id="d68a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">æˆ‘å·²ç»æœç´¢äº†surveyresultè¡¨æ¥æ£€æŸ¥æ‰“å°ç»“æœã€‚</p><p id="fb1a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ä¸‹é¢æ˜¯å¸¦æœ‰delallæ“ä½œçš„å®Œæ•´æºä»£ç ï¼Œå®ƒä»è¡¨ä¸­åˆ é™¤ä¿¡æ¯ä»¥ä½¿æµ‹è¯•æ›´å®¹æ˜“ã€‚</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="a8d3" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è¿™ç¯‡æ–‡ç« çš„æºä»£ç ä¸åº”è¯¥ç”¨äºå®é™…ç”¨é€”ï¼Œå› ä¸ºå®ƒæ˜¯ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œå› æ­¤ä¸ºäº†ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œè®¸å¤šä»£ç è¢«çœç•¥å’Œç®€åŒ–äº†ã€‚å®é™…çš„ä»£ç åº”è¯¥åœ¨å®‰å…¨æ€§ã€æˆæœ¬å’Œé€Ÿåº¦æ–¹é¢è¿›è¡Œé€‚å½“çš„è®¾è®¡å’Œå®ç°ã€‚æ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚</p></div><div class="ab cl lh li hb lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hm hn ho hp hq"><h2 id="8925" class="kv kw ht bd lo lp lq lr ls lt lu lv lw kd lx ly lz kh ma mb mc kl md me mf mg dt translated">ITAMæ¸¸æˆæ˜¯ä¸€ä¸ªé€æ˜çš„æ¸¸æˆç”Ÿæ€ç³»ç»Ÿçš„åŒºå—é“¾å¹³å°</h2><p id="5d69" class="pw-post-body-paragraph ju jv ht jw b jx mh iu jz ka mi ix kc kd mj kf kg kh mk kj kk kl ml kn ko kp hm dt translated">è®¢é˜…ITAMæ¸¸æˆå¹¶æ¥æ”¶æœ€æ–°ä¿¡æ¯ã€‚</p><p id="4717" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è®¿é—®ITAMæ¸¸æˆç”µè®¯ï¼Œå°±ITAMæ¸¸æˆå’ŒåŒºå—é“¾è¿›è¡Œäº¤æµã€‚ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥åŠ å…¥ï¼ğŸ‘«</p><p id="9423" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç½‘å€:<strong class="jw hu"/><a class="ae lb" href="https://itam.games" rel="noopener ugc nofollow" target="_blank">https://itam . games</a><strong class="jw hu"><br/></strong>ç”µæŠ¥:<a class="ae lb" href="https://t.me/itamgames" rel="noopener ugc nofollow" target="_blank">https://t.me/itamgames</a></p></div></div>    
</body>
</html>