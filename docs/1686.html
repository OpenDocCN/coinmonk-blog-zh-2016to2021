<html>
<head>
<title>Building a Blockchain using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript构建区块链</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/building-a-blockchain-using-javascript-ac75d1b2af23?source=collection_archive---------2-----------------------#2018-10-22">https://medium.com/coinmonks/building-a-blockchain-using-javascript-ac75d1b2af23?source=collection_archive---------2-----------------------#2018-10-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="3cdf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">区块链的基本概念是指一个分布式数据库，它维护着一个不断增长的有序记录列表，任何人都可以读取这些记录，但这些记录是不可变的。</p><p id="1b7d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦一个块被添加到链中，在不使链的其余部分无效的情况下，就不能再改变它。</p><h1 id="0d39" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">搭积木</h1><p id="99a7" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">必须定义块的结构，下面的图像显示了结构应该是什么样子的例子。确保每个数据块的数据完整性非常重要，这就是为什么每个数据块都包含基于其内容计算的哈希。它还包含前一个块的哈希。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/dcde2d81a32162a01302a1d17eb69706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pExvwjlo0q42zs3p9TwA-Q.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">A blockchain data structure</figcaption></figure><p id="4bf0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在JavaScript中，我们的block类看起来是这样的:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lh"><img src="../Images/dc786e314f84458314abc959a714f13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D1jjurpjNaDD6yiQGJGaTQ.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">JS class Block</figcaption></figure><h2 id="cf0d" class="li jp ht bd jq lj lk ll ju lm ln lo jy jb lp lq kc jf lr ls kg jj lt lu kk lv dt translated">块散列</h2><p id="d90f" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">请记住，为了保持数据的完整性，需要对数据块进行哈希处理，并将其包含在数据块的特定字段中。我们使用crypto-js库，这是“calculateHash”函数:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lw"><img src="../Images/44a8b41830786431a48de5a1abc76b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oj9nIwt8IccMjDvVWNGmgg.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">calculateHash Function</figcaption></figure><h2 id="ba92" class="li jp ht bd jq lj lk ll ju lm ln lo jy jb lp lq kc jf lr ls kg jj lt lu kk lv dt translated">生成块</h2><p id="c96c" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">为了生成一个块，必须知道前一个块的散列，并且应该提供数据。addBlock()负责向我们的链中添加一个新的块。为此，我们将前一个块的哈希添加到新块中。这样我们就能保持链条的完整性。因为我们改变了新块的内容，所以需要重新计算它的散列。完成后，我将块推到链(数组)上。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lh"><img src="../Images/cf9447300faf9fd252d52990dbdbc734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01RPESvzxMM814xQi9dpqQ.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">Generate a new Block</figcaption></figure><h2 id="8aa3" class="li jp ht bd jq lj lk ll ju lm ln lo jy jb lp lq kc jf lr ls kg jj lt lu kk lv dt translated">getLatestBlock()方法</h2><p id="f07c" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">这是返回我们区块链的最新区块</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lh"><img src="../Images/f5681f37e71de82048011d28686fb36c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JtB64JNgnYYt0UX-ugFPsw.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">getLatestBlock Function</figcaption></figure><h2 id="df4a" class="li jp ht bd jq lj lk ll ju lm ln lo jy jb lp lq kc jf lr ls kg jj lt lu kk lv dt translated">创世街区</h2><p id="a860" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">用genesis块的值初始化我们的链数组:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lh"><img src="../Images/d3ec20f1ea65884d4fd532c6935e0e2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMI6wkCqHvVraWilhCKzTA.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">Genesis Block Function</figcaption></figure><h2 id="d180" class="li jp ht bd jq lj lk ll ju lm ln lo jy jb lp lq kc jf lr ls kg jj lt lu kk lv dt translated">验证链</h2><p id="b3ba" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">以确保没有人改变区块链。它遍历所有块，检查每个块的哈希是否正确。它还通过比较previousHash值来检查每个块是否指向正确的前一个块。如果一切正常，它将返回true，如果有问题，它将返回false。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lx"><img src="../Images/c1fae31a155017122b0163f420ad24d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nRf0b6go4XHADMd0it7v3g.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">Validate the chain</figcaption></figure><h2 id="28c9" class="li jp ht bd jq lj lk ll ju lm ln lo jy jb lp lq kc jf lr ls kg jj lt lu kk lv dt translated">构建链条</h2><p id="2b2c" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">现在我们可以开始在区块链类中将区块链接在一起了！这个类将包括前面提到的函数和构造函数。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff ly"><img src="../Images/156e0634e6ca172d6f5fc77e15d3294d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*nm6VpRDBvsxiw8wc8hm2Bg.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">Blockchain class</figcaption></figure><p id="36ec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在构造函数中，我们通过创建一个包含genesis块的数组来初始化这个链。第一个块很特殊，因为它不能指向前一个块。</p><h1 id="2342" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">运行应用程序</h1><p id="dcca" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">首先，在初始化应用程序后，您可以使用以下代码向链中添加一些块:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff lz"><img src="../Images/0d1e4fc001ff45f3650b0a1193bd0d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZwTOJfvGA40j3neeXDBaw.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">adding some blocks to the chain</figcaption></figure><p id="c3b7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要查看区块链数据，您可以执行以下操作:</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff ma"><img src="../Images/5a2dc510c63ebd727f8d791490ed62d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a6sYia7DtyBHbJk-wbONxw.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">command to show the blockchain</figcaption></figure><blockquote class="mb mc md"><p id="22a4" class="iq ir me is b it iu iv iw ix iy iz ja mf jc jd je mg jg jh ji mh jk jl jm jn hm dt translated">*注意，为了便于阅读，采用了JSON样式:</p></blockquote><p id="3b1f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">从终端运行:<br/>节点&lt; javascript_file.js &gt; </strong></p><p id="8034" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以通过调用is valid()函数来检查该链是否有效。此外，您可以更改数据，如接下来的2行代码所示，我们将更改块数据值，甚至重新计算区块链。<strong class="is hu"> <em class="me">再次运行app时检查结果</em> </strong></p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff mi"><img src="../Images/e1c1ffdd0ffc432af631c0e9e205cc24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SmUV5wZwiauRyjpBhbkIjA.png"/></div></div><figcaption class="ld le fg fe ff lf lg bd b be z ek">How to validate the chain</figcaption></figure><h1 id="7775" class="jo jp ht bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">结论</h1><p id="73fb" class="pw-post-body-paragraph iq ir ht is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hm dt translated">尽管这一实现还远未完成。它演示了区块链的工作方式，清楚地解释了区块链的基本概念，以及这些概念是如何易于理解和实施的。</p><p id="fab5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">完整的项目代码可以在以下Git存储库中找到:</p><p id="1911" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae mj" href="https://github.com/juliomacr/blockchain-demo" rel="noopener ugc nofollow" target="_blank">https://github.com/juliomacr/blockchain-demo</a></p><p id="07b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您想了解更多关于Blockchain开发的信息，对Blockchain相关技术进行<a class="ae mj" href="https://www.salsamobi.com/" rel="noopener ugc nofollow" target="_blank"> SalsaMobi </a>教育可能是一个很好的起点，您也可以<a class="ae mj" href="https://salsamobi.us19.list-manage.com/subscribe?u=f699b5966f72d084516ecc1fc&amp;id=3846bc403e" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">在这里</strong> </a> <strong class="is hu"> </strong>订阅，我们会在创建更多的文章或教程时通知您。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/6ac399430aa571599e6137bdbade1f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*ZyCjKWZWaVoB-_G2pMPi_A.png"/></div><figcaption class="ld le fg fe ff lf lg bd b be z ek"><a class="ae mj" href="https://salsamobi.com/" rel="noopener ugc nofollow" target="_blank">SalsaMobi</a> Logo</figcaption></figure><p id="f948" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae mj" href="https://www.linkedin.com/in/juliomacr/" rel="noopener ugc nofollow" target="_blank"> <em class="me">胡利奥·马林</em> </a> <em class="me">倡导研究和实施新技术，并将其应用于日常生活中。研究领域包括多媒体开发和交付、密码货币、移动开发和营销自动化。目前在SalsaMobi担任高级课程开发人员和区块链开发团队负责人。</em></p><blockquote class="ml"><p id="1896" class="mm mn ht bd mo mp mq mr ms mt mu jn ek translated"><a class="ae mj" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获取最佳软件交易</a></p></blockquote><figure class="mw mx my mz na kw fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mv"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>