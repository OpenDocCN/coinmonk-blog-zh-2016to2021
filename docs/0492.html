<html>
<head>
<title>Bitcoin white paper explained (PART 3/3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币白皮书解读(第3/3部分)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/bitcoin-white-paper-explained-part-3-3-c06c1791a31b?source=collection_archive---------1-----------------------#2018-05-12">https://medium.com/coinmonks/bitcoin-white-paper-explained-part-3-3-c06c1791a31b?source=collection_archive---------1-----------------------#2018-05-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="51c7" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">优化和结论</h2></div><p id="1f96" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是第二部分的延续，我们在第二部分<a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-white-paper-explained-part-2-4-d79fbc5e2adf">分析了</a><a class="ae ke" href="https://bitcoin.org/bitcoin.pdf" rel="noopener ugc nofollow" target="_blank">最初的比特币论文</a>直到<em class="kf"> 7。回收磁盘空间</em>。让我们从那里开始。</p></div><div class="ab cl kg kh hb ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hm hn ho hp hq"><h1 id="56cd" class="kn ko ht bd kp kq kr ks kt ku kv kw kx iz ky ja kz jc la jd lb jf lc jg ld le dt translated">7.回收磁盘空间</h1><p id="8e2c" class="pw-post-body-paragraph ji jj ht jk b jl lf iu jn jo lg ix jq jr lh jt ju jv li jx jy jz lj kb kc kd hm dt translated">每个<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/master/src/primitives/transaction.h#L264" rel="noopener ugc nofollow" target="_blank">交易规模</a>根据输入/输出的数量而变化。计算交易规模的一个好的经验法则是:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="66a2" class="lt ko ht lp b fv lu lv l lw lx">n_inputs*180B + n_outputs*34B + 10B + (+-n_inputs)</span></pre><p id="6188" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">根据tradeblock.com的数据，自2014年以来，平均交易量约为520字节。那段时间大约有2.77亿笔交易。排除块的大小，这意味着存储所有这些事务将占用大约144 GB。实际上，它们占用大约150GB。如果你想在你的智能手机里互动，那就需要很多！</p><p id="2548" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">没有事务的块头占用大约80字节。同一时期的块数约为240，000，总共占用19MB。这样的规模听起来更有竞争力。</p><blockquote class="ly"><p id="31f9" class="lz ma ht bd mb mc md me mf mg mh kd ek translated">我们如何在保持正确性的同时摆脱事务呢？</p></blockquote><figure class="mj mk ml mm mn mo fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/817d2ce355370f102ff93794c3e043a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*Vkqb67E_FcBEE-UfLUCF1w.png"/></div></figure><p id="b16d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果我们能够将所有事务(<em class="kf"> Tx0 </em>到<em class="kf"> Tx3 </em>)减少到单个散列(<em class="kf">根散列</em>)，我们将节省上述磁盘空间，而不会破坏块散列。</p><p id="e9dc" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为此，我们必须能够将所有事务相互关联起来，这可以通过Merkle树有效地实现。</p><h2 id="5526" class="lt ko ht bd kp mr ms mt kt mu mv mw kx jr mx my kz jv mz na lb jz nb nc ld nd dt translated">Merkle树</h2><p id="337e" class="pw-post-body-paragraph ji jj ht jk b jl lf iu jn jo lg ix jq jr lh jt ju jv li jx jy jz lj kb kc kd hm dt translated">如果你熟悉二叉树，这个概念是微不足道的。叶节点(Hash0、Hash1、…)是应用于某些数据(在本例中为Tx0、Tx1等)的散列函数。上层节点(Hash01，Hash23)只是一个哈希函数，应用于它们各自的子哈希的串联。<em class="kf">根哈希</em>是最上层的哈希，包含在块头中，确保存在哪些事务。为什么我们不把所有的散列一个接一个地连接起来，从那个字符串中产生根散列呢？好吧，如果我们想验证一个事务是否是有许多事务的块的一部分，与获取所有散列相比，Merkle树将允许我们以对数成本来做这件事。</p><p id="b296" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们能在没有交易副本的情况下核实/付款吗？</p><h1 id="24c3" class="kn ko ht bd kp kq ne ks kt ku nf kw kx iz ng ja kz jc nh jd lb jf ni jg ld le dt translated">8.简化支付验证</h1><p id="4567" class="pw-post-body-paragraph ji jj ht jk b jl lf iu jn jo lg ix jq jr lh jt ju jv li jx jy jz lj kb kc kd hm dt translated">假设我们有一个瘦客户机，它不能访问事务，只能访问块头，我们必须找到一种方法来验证特定的事务是有效的。</p><figure class="lk ll lm ln fq mo fe ff paragraph-image"><div class="fe ff nj"><img src="../Images/d8f6a08d00b0495fc1ebef72fba103af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*Iqq6mIujzYYCzg9RlaNRHA.png"/></div></figure><p id="ebc5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这样的节点可以获得当前最长的工作证明链(从几个粗节点)并请求事务应该在的Merkle树分支。</p><p id="0c12" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一旦节点知道该事务是链的一部分并且在它之后有块，他就可以断定它是有效的事务，因为它被其他厚节点接受。</p><p id="67ab" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">只要我们询问诚实的节点，这个方案就能工作。如果不是这样，Satoshi提出了一个警报系统，只要某个节点检测到无效块。</p><blockquote class="ly"><p id="c91a" class="lz ma ht bd mb mc md me mf mg mh kd ek translated">查看瘦客户端(bitcoinj)安全模型<a class="ae ke" href="https://bitcoinj.github.io/security-model" rel="noopener ugc nofollow" target="_blank">此处</a></p></blockquote><h1 id="a01b" class="kn ko ht bd kp kq ne ks kt ku nf kw kx iz nk ja kz jc nl jd lb jf nm jg ld le dt translated">9.组合和分割值</h1><p id="801c" class="pw-post-body-paragraph ji jj ht jk b jl lf iu jn jo lg ix jq jr lh jt ju jv li jx jy jz lj kb kc kd hm dt translated">正如第1部分中的<a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-white-paper-explained-part-1-4-16cba783146a">所述，一个事务不仅仅指1个输入— 1个输出，还可能有更多。一个简单的例子是，鲍勃有1个比特币，给爱丽丝发了0.5。该交易有一个1比特币的输入和两个各0.5比特币的输出(一个给Alice，另一个给Bob，否则他会把它作为交易费丢掉)。当一个事务依赖于许多事务并且这些事务依赖于其他事务时，我们不必担心遍历洞树，因为最新的事务输出是剩余硬币数量的集合。</a></p><h1 id="b1ab" class="kn ko ht bd kp kq ne ks kt ku nf kw kx iz ng ja kz jc nh jd lb jf ni jg ld le dt translated">10.隐私</h1><figure class="lk ll lm ln fq mo fe ff paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="fe ff nn"><img src="../Images/741dcade1eecca625a607241e2f0535c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WXFXjp717X6pU9EV-8gb2g.png"/></div></div><figcaption class="ns nt fg fe ff nu nv bd b be z ek">Privacy model in Bitcoin</figcaption></figure><p id="33c4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">传统银行通过限制对正在进行的交易和参与方的访问来实现隐私。正如我们提到的，比特币必须公开宣布每一笔交易，所以这种方案已经不可能了。</p><p id="b3b5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">隐私可以通过保持公钥匿名和/或使用地址来实现。一个好的做法是为每笔交易使用一个新的密钥对/地址，这样就很难将硬币的移动与一个共同的所有者联系起来。然而，多重输入交易仍存在风险，因为你可能会认为硬币来自同一个来源，当透露一个地址时，你可能会推断出其他地址的所有者。</p><h1 id="b96c" class="kn ko ht bd kp kq ne ks kt ku nf kw kx iz ng ja kz jc nh jd lb jf ni jg ld le dt translated">11.计算</h1><p id="8050" class="pw-post-body-paragraph ji jj ht jk b jl lf iu jn jo lg ix jq jr lh jt ju jv li jx jy jz lj kb kc kd hm dt translated">如果我们假设攻击者可以获得比诚实节点更多的能量，他可以改变链。他不能以任何他想要的方式改变它，因为诚实的节点不会接受无效的事务/块(比如给他人汇钱或者凭空创造钱)。</p><p id="87e0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">唯一的选择是改变他最近交易的输出或者恢复它们(交易后的链越大，就需要越多的工作证明来生成<a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-white-paper-explained-part-2-4-d79fbc5e2adf">最长有效链</a>)。</p><p id="510c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">数字是多少？<a class="ae ke" href="https://math.stackexchange.com/questions/2356763/the-probability-behind-bitcoin" rel="noopener ugc nofollow" target="_blank">结果背后的数学运算</a>显示，确认的区块越多，攻击者追上的概率呈指数下降:</p><figure class="lk ll lm ln fq mo fe ff paragraph-image"><div class="fe ff nw"><img src="../Images/73d4b107e030e2bb342f8b7a21b3fb00.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/1*YrgXAYIL2mk9T43C8M_uBA.png"/></div></figure><p id="3041" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">P =攻击者赶上的概率(0.1%)</p><p id="ac38" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">q =攻击者找到下一个块的概率(10%，15%，…)</p><p id="dd18" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">z =块确认的数量</p><p id="9222" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这些数字告诉我们，攻击者拥有的CPU能力越多(q)，我们需要等待的确认就越多(5，8，…)才能知道攻击者赶上链的概率将是&lt; 0.1%.</p><p id="6bd2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">This sounds like the chance for an attack is pretty low given the constantly growing size of nodes within the network but remains a risk for newly created PoW based chains.</p><p id="da27" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Check <a class="ae ke" href="https://en.bitcoin.it/wiki/Weaknesses" rel="noopener ugc nofollow" target="_blank">比特币弱点</a>如果你想对可能出现的问题有一个更全面的了解。</p><h1 id="94e8" class="kn ko ht bd kp kq ne ks kt ku nf kw kx iz ng ja kz jc nh jd lb jf ni jg ld le dt translated">12.结论</h1><p id="b9de" class="pw-post-body-paragraph ji jj ht jk b jl lf iu jn jo lg ix jq jr lh jt ju jv li jx jy jz lj kb kc kd hm dt translated">该论文提出了一种依赖于不信任的电子交易系统。所有权通过数字签名来证明，同时通过基于PoW的P2P网络来减少重复花费。</p><p id="0256" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">所有规则和激励措施都在网络共识内实施。坏演员受到惩罚，而诚实的演员受到奖励。</p></div><div class="ab cl kg kh hb ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hm hn ho hp hq"><p id="be4e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">比特币基于不信任，尽管大多数用户仍然依赖第三方服务，如T2比特币基地T3。这是一个基于低效率的分布式网络，它限制了每秒可以通过的事务。<a class="ae ke" href="https://bitinfocharts.com/comparison/bitcoin-transactionfees.html" rel="noopener ugc nofollow" target="_blank">高昂的交易费用</a>减缓采用。BTC面临许多限制。</p><p id="d1e3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">尽管如此，它已经产生了100多个新的链，一整套新的用例、软件范例和挑战。当TCP/IP还在发展的时候，没有人会想到我们会有4G以上的视频会议。</p><p id="11ca" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果这有帮助，请鼓掌，并在<a class="ae ke" href="https://twitter.com/sgerov" rel="noopener ugc nofollow" target="_blank"> Twitte </a> r @sgerov上关注我！</p></div></div>    
</body>
</html>