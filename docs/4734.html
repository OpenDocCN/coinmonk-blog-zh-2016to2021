<html>
<head>
<title>Minimize Gas in Your Smart Contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尽量减少智能合同中的汽油用量</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/minimize-gas-in-your-smart-contracts-bb9a89db1052?source=collection_archive---------5-----------------------#2021-06-09">https://medium.com/coinmonks/minimize-gas-in-your-smart-contracts-bb9a89db1052?source=collection_archive---------5-----------------------#2021-06-09</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="58f7" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">简单的技巧可以减少你为智能合同支付的油费</h2></div><p id="3244" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">在参加了一个关于可靠性发展的课程后，我从支付过多的汽油费用变成了支付合理的费用。</strong></p><figure class="kf kg kh ki fq kj fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff ke"><img src="../Images/a767e470b4137a8a874fdd9c59c09d80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TyrlIzN3ITJJUE3j"/></div></div><figcaption class="kq kr fg fe ff ks kt bd b be z ek">Photo by <a class="ae ku" href="https://unsplash.com/@jessbaileydesigns?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jess Bailey</a> on <a class="ae ku" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ee92" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我会在这里告诉你主要的诀窍，这样你就不会浪费时间去完成整个<a class="ae ku" href="https://cryptozombies.io/" rel="noopener ugc nofollow" target="_blank">课程</a>。</p><h1 id="4ea9" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">1.较小的单位</h1><p id="d275" class="pw-post-body-paragraph ji jj ht jk b jl ln iu jn jo lo ix jq jr lp jt ju jv lq jx jy jz lr kb kc kd hm dt translated">如果在一个结构中有多个uint，那么使用一个小的uint。这允许Solidity使用更少的存储空间。</p><p id="4784" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">转换这个:</p><pre class="kf kg kh ki fq ls lt lu lv aw lw dt"><span id="d1e4" class="lx kw ht lt b fv ly lz l ma mb"><br/>struct NormalStruct {<br/> uint a;<br/> uint b;<br/> uint c;<br/>}</span></pre><p id="4d84" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">对此:</p><pre class="kf kg kh ki fq ls lt lu lv aw lw dt"><span id="8f64" class="lx kw ht lt b fv ly lz l ma mb">struct MiniMe {<br/> uint32 a;<br/> uint32 b;<br/> uint c;<br/>}</span></pre><p id="dd1a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由于结构包装，比“正常结构”消耗更少的气体</p><h1 id="a07c" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">2.查看功能不会让您付出任何代价</h1><p id="2417" class="pw-post-body-paragraph ji jj ht jk b jl ln iu jn jo lo ix jq jr lp jt ju jv lq jx jy jz lr kb kc kd hm dt translated">当用户从外部调用视图函数时，它们不会消耗任何资源。</p><p id="4d8a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是因为视图函数实际上不会改变区块链上的任何内容，它们只是读取数据。</p><p id="50d5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">尽可能使用视图功能。这里有一个例子:</p><pre class="kf kg kh ki fq ls lt lu lv aw lw dt"><span id="b093" class="lx kw ht lt b fv ly lz l ma mb"># <a class="ae ku" href="https://github.com/spiyer99/CryptoZombies/blob/master/contracts/zombie_helper.sol#L36" rel="noopener ugc nofollow" target="_blank">https://github.com/spiyer99/CryptoZombies/blob/master/contracts/zombie_helper.sol#L36</a></span><span id="1e8b" class="lx kw ht lt b fv mf lz l ma mb">function getZombiesByOwner(address _owner) external view returns(uint[] memory) {<br/>  uint[] memory result = new uint[](ownerZombieCount[_owner]);<br/>  uint counter = 0;<br/>  for (uint i = 0; i &lt; zombies.length; i++) {<br/>    if (zombieToOwner[i] == _owner) {<br/>      result[counter] = i;<br/>      counter++;<br/>    }<br/>  }<br/>  return result;<br/>}</span></pre><p id="e5ed" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这个功能可以让我们找到某人拥有的所有僵尸。</p><p id="4a44" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们通过遍历每个僵尸来做到这一点。</p><p id="5a0a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">是的，这太天真了。我们可以简单地创建一个散列图。这将把查找减少到O(1)。</p><p id="cd50" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">但是它也比散列图便宜。所以更好。结束了。</p><h1 id="5987" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">结论</h1><p id="c172" class="pw-post-body-paragraph ji jj ht jk b jl ln iu jn jo lo ix jq jr lp jt ju jv lq jx jy jz lr kb kc kd hm dt translated">就是这样！这两件事为我节省了相当多的汽油。希望他们也能帮到你。</p></div></div>    
</body>
</html>