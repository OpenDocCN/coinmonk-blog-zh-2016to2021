<html>
<head>
<title>Ethereum NFT token-to-asset mappings are off-chain and nobody cares</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊NFT令牌到资产的映射是离线的，没人关心</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereum-nft-token-to-asset-mappings-are-off-chain-and-nobody-cares-4aff301382b0?source=collection_archive---------0-----------------------#2021-02-21">https://medium.com/coinmonks/ethereum-nft-token-to-asset-mappings-are-off-chain-and-nobody-cares-4aff301382b0?source=collection_archive---------0-----------------------#2021-02-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="e445" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">NFT艺术的完整性正被项目设计者击败，他们留下了关键的符号→资产映射链外</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/1d8f4850d5dc09dbd47b37e38bb32676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yANJXNmJUnyG315ExkYq4A.jpeg"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Example of a <a class="ae jy" href="https://opensea.io/assets/0xc2c747e0f7004f9e8817db2ca4997657a7746928/13378" rel="noopener ugc nofollow" target="_blank">NFT</a> from a popular collection called <a class="ae jy" href="http://thehashmasks.com" rel="noopener ugc nofollow" target="_blank">Hashmasks</a></figcaption></figure><p id="a1c0" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt kv translated">继大规模分散金融(DeFi)浪潮之后，区块链以太坊上的不可替代代币(NFT)正在引领下一波创新浪潮。NFTs的典型用例是将数字资产的所有权映射到链上唯一令牌的持有。以NFT为代表的资产不一定需要数字化，尽管这比以实物资产为代表更合适。在区块链上表示数字资产是很自然的，因为组成数字文件的位可以被散列为文件的更短表示，这在链上存储更便宜。</p><p id="32ee" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">以太坊上第一个NFT类型的项目是<a class="ae jy" href="https://www.larvalabs.com/cryptopunks" rel="noopener ugc nofollow" target="_blank"><em class="le"/></a>。其背后的机制相当简单——一个100x100网格的独特的密码朋克图像被缝合在一起，形成一个更大的图像，然后被散列并存储在区块链上。密码朋克项目发行了10，000个代表每个密码朋克的独特代币。这些代币最初是免费赠送的，但现在被用来交换以太；有些价值超过100万美元。</p><p id="4f93" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">快进3.5年后，Hashmasks出现了，这是一个颠覆了Cryptopunks的高度创新的项目。在Hashmasks项目中，艺术作品的生成更加注重细节，超过70名艺术家参与了高度迭代的过程，生成了16，384件独特的数字艺术作品。每个Hashmask都有一组独特的明确特征，有些比其他的更罕见。除了显性的，隐性的特质让一些面具更加稀有。散列表由NFT表示，遵循ERC-721标准。此外，Hashmasks项目引入了名称更改令牌(NCTs)，它可以累积久而久之，并赋予艺术品所有者更改作品名称的权利，从而允许他们添加点睛之笔。</p><p id="8fdb" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">发行工作于今年1月28日启动，并立即获得成功，随之产生了一批忠实的追随者。在令牌分发期间，NFT的购买者知道每个NFT最终都会映射到IPFS上托管的Hashmask图像，但当时他们不知道是哪一个。一旦所有的NFT被分发，NFT →图像映射就显现出来了。广泛的媒体报道随之而来，使区块链收藏品重新成为人们关注的焦点。接下来是Twitter趋势、Discord服务器、图像分析、数十个网站、隐藏特征搜索、新兴模式、价格发现，以及围绕该项目发展的一种文化。</p><h1 id="8a07" class="lf lg ht bd lh li lj lk ll lm ln lo lp iz lq ja lr jc ls jd lt jf lu jg lv lw dt translated">【Hashmasks所有权和token →图像映射是如何工作的？</h1><p id="73cd" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">Hashmasks团队生成了16，384张图片中每一张的哈希，并为每张图片分配了一个从0到16，383的索引。接下来，图像哈希按照它们的索引顺序连接在一起，并全部哈希在一起，以生成一个<em class="le">出处记录</em>，正如该团队在这里解释的<a class="ae jy" href="https://www.thehashmasks.com/provenance.html" rel="noopener ugc nofollow" target="_blank"/>。出处记录不变地存储在Hashmasks以太坊契约中。在令牌分发阶段，令牌仍未映射到这些映像。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mc"><img src="../Images/0cd489e719d4c9d196cd55244121853b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26pqvCxR9lz7L-9hQ3Z6rg.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Provenance record definition as seen <a class="ae jy" href="https://www.thehashmasks.com/provenance.html" rel="noopener ugc nofollow" target="_blank">here</a></figcaption></figure><h2 id="30a1" class="md lg ht bd lh me mf mg ll mh mi mj lp ki mk ml lr km mm mn lt kq mo mp lv mq dt translated"><strong class="ak">记号是如何映射到图像上的？</strong></h2><p id="6e0b" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">在令牌分发结束后，在契约内随机生成所谓的<em class="le"> startingIndex </em>。<em class="le"> startingIndex </em>的目的是确定原始序列中index = <em class="le"> startingIndex </em>的图像将对应于<em class="le"> tokenId </em> = 0的令牌。然后，0之后的每个后续tokenId映射到原始序列中的下一个图像(<em class="le"> mod </em> 16，384，以便循环回到“起始图像”之前排序的图像)。</p><h1 id="ae44" class="lf lg ht bd lh li lj lk ll lm ln lo lp iz lq ja lr jc ls jd lt jf lu jg lv lw dt translated"><strong class="ak">那么，这个提法有什么问题呢？</strong></h1><p id="bb4d" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">乍一看，这个定义似乎是合理的，安全的，不可改变的，它显然为观众和市场提供了足够的信心，正如目前正在交易的一些稀有作品的广泛采用和数十万美元的价格标签所证明的那样。</p><h2 id="465e" class="md lg ht bd lh me mf mg ll mh mi mj lp ki mk ml lr km mm mn lt kq mo mp lv mq dt translated"><strong class="ak">那么，问题出在哪里？</strong></h2><p id="adbd" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">我认为这个定义是不完整的，因为它依赖于外链信息，导致非功能性交易与它们想要代表所有权的艺术品分离。这违背了分散数字艺术所有权的本质。</p><h2 id="e373" class="md lg ht bd lh me mf mg ll mh mi mj lp ki mk ml lr km mm mn lt kq mo mp lv mq dt translated">怎么会这样？</h2><p id="fce8" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">好了，我们先来看看能证明什么<em class="le">，揭示了什么不能。可以证明，只有原始顺序的图像序列才能生成出处记录散列。对单个图像中的顺序或单个位的任何修改都会将出处记录更改为完全不同的内容。我们还能证明什么？我们还知道<em class="le"> startingIndex </em>是由智能合约随机生成的。我们只知道这些。换句话说，不可否认的是，没有足够的链上、不可变的信息将特定的令牌映射到特定的图像。此外，在Hashmasks网站上，实现预期映射的指令是离线的。这意味着，从理论上讲，如果Hashmasks网站上的映射定义发生变化，那么token → image映射也可能发生变化，Hashmask所有者将不再拥有他们认为拥有的Hashmask。</em></p><h2 id="4edc" class="md lg ht bd lh me mf mg ll mh mi mj lp ki mk ml lr km mm mn lt kq mo mp lv mq dt translated">定义的这种改变会改变所有权的例子有哪些？</h2><ol class=""><li id="7938" class="mr ms ht kb b kc lx kf ly ki mt km mu kq mv ku mw mx my mz dt translated">Hashmasks网站定义可以完全忽略<em class="le"> startingIndex </em>，并且简单地定义每个NFT映射到索引等于其原始序列(即由出处记录表示的序列)中的<em class="le"> tokenId </em>的图像。这种情况相当于让NFT发行版对所购买的艺术品不视而不见。</li><li id="e3ad" class="mr ms ht kb b kc na kf nb ki nc km nd kq ne ku mw mx my mz dt translated">Hashmasks网站定义可以将<em class="le"> startingIndex </em>在链外映射公式中的使用方式改为:<strong class="kb hu">(starting index-token id)% 16384</strong>。这就像在原始序列<em class="le">中索引等于<em class="le"> startingIndex </em>的图像周围翻转所有权。</em></li></ol><h2 id="274e" class="md lg ht bd lh me mf mg ll mh mi mj lp ki mk ml lr km mm mn lt kq mo mp lv mq dt translated">Hashmasks团队做了哪些不同的事情？</h2><p id="0384" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">我想到了两个简单的解决方案，仍然可以让代币发行无视艺术品所有权，这显然是该项目的目标之一。</p><ol class=""><li id="9ae6" class="mr ms ht kb b kc kd kf kg ki nf km ng kq nh ku mw mx my mz dt translated">一旦令牌分发结束并且随机选择了<em class="le"> startingIndex </em>，就可以根据预期的映射公式对图像散列重新排序:<strong class="kb hu">(token id+starting index)% 16384</strong>。则合同出处记录将被设置为该最终顺序中的图像散列的散列。在这个定义下，艺术品所有权将被清楚地定义，因为每个<em class="le"> tokenId </em>将对应于出处记录中索引等于<em class="le"> tokenId </em>的图像。</li><li id="8c2f" class="mr ms ht kb b kc na kf nb ki nc km nd kq ne ku mw mx my mz dt translated">一个更直接、更优雅的解决方案是按照最初的意图随机生成<em class="le"> startingIndex </em>，但也提供一个契约方法，该方法将<em class="le"> tokenId </em>作为输入，并输出对应于该令牌的作品图像哈希，从而将令牌完美地耦合到链上的图像。</li></ol><p id="30ac" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这两种解决方案都增加了项目的费用，因为第一种解决方案需要在合同中计算16，384个散列，或者在合同存储中存储16，384个先前计算的散列；第二种解决方案也需要在合同存储中存储16，384个映像哈希。我认为这些开销与Hashmasks团队决定将映射定义脱离链的原因有关。这一决定令人惊讶，因为对于一个在代币分发过程中产生超过1400万美元收入的项目来说，这笔费用本来是微不足道的。团队可能不想在项目失败的情况下投入这么大的前期成本。</p><p id="24b2" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">另一个值得尝试的更便宜的想法是在契约中存储出处记录，就像Hashmasks团队所做的那样，但是一旦令牌分发完成，就随机分配tokenId。</p><h1 id="7a4c" class="lf lg ht bd lh li lj lk ll lm ln lo lp iz lq ja lr jc ls jd lt jf lu jg lv lw dt translated">结论</h1><p id="ba8b" class="pw-post-body-paragraph jz ka ht kb b kc lx iu ke kf ly ix kh ki lz kk kl km ma ko kp kq mb ks kt ku hm dt translated">Hashmasks团队做了一项伟大、漂亮和细致的工作，设计了一个有足够创新成分的项目，让NFT艺术重新成为人们关注的焦点，希望能留下来。整个收藏目前的估价(仅仅考虑到<a class="ae jy" href="https://www.coingecko.com/en/coins/nftx-hashmasks-index" rel="noopener ugc nofollow" target="_blank">地板面具的价值</a>)超过5000万美元。尽管有上述缺点，我实际上还是拥有一些散列表。</p><p id="4c8a" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">然而，我认为社区必须达成共识，即当前的艺术品所有权模式存在关键的逻辑差距，行业应该从中吸取教训，以免重复错误，从而保持分散艺术的完整性。</p><p id="7f74" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">我不相信Hashmasks团队会改变他们网站的所有权定义，但这不是重点——他们甚至不应该改变。建立在以太坊上的所有基础设施的目标是避免需要信任，即使信任是可以的。</p></div></div>    
</body>
</html>