<html>
<head>
<title>C++ Guide for EOS Development — Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EOS开发C++指南—基础</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/c-guide-for-eos-development-basics-37d2596a9688?source=collection_archive---------2-----------------------#2018-08-25">https://medium.com/coinmonks/c-guide-for-eos-development-basics-37d2596a9688?source=collection_archive---------2-----------------------#2018-08-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/5c1a88e50c715aed0ecb4f122df1e623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3sGH-1lloHbChgMT.png"/></div></div></figure><div class=""/><blockquote class="jb jc jd"><p id="963e" class="je jf jg jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">这篇文章是我的<a class="ae kd" href="https://cmichel.io/categories/learneos" rel="noopener ugc nofollow" target="_blank">EOS开发者C++指南</a>的一部分</p></blockquote><ol class=""><li id="a5f8" class="ke kf ie jh b ji jj jm jn kg kh ki kj kk kl kc km kn ko kp dt translated"><a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-basics/" rel="noopener ugc nofollow" target="_blank">基础知识</a></li><li id="485e" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated"><a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-call-by-value-reference/" rel="noopener ugc nofollow" target="_blank">通过值/引用调用&amp;指针</a></li><li id="79be" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">类和结构</li><li id="30b7" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">模板</li><li id="757b" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">迭代器</li><li id="acc5" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">λ表达式</li><li id="c48b" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">多指数</li><li id="8b89" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">头文件</li></ol><h2 id="f69c" class="kv kw ie bd kx ky kz la lb lc ld le lf kg lg lh li ki lj lk ll kk lm ln lo lp dt translated">为什么是C++？</h2><p id="756b" class="pw-post-body-paragraph je jf ie jh b ji lq jk jl jm lr jo jp kg ls js jt ki lt jw jx kk lu ka kb kc hm dt translated">整个EOS区块链基础设施都是用C++写的。C++是一种低级语言，它让程序员可以很好地控制如何做事和管理资源。其结果是一种非常强大和高性能的语言，在游戏、计算机图形等性能关键的应用程序中，或者在大多数嵌入式系统等资源较少的硬件上被大量使用。然而，将如此多的控制权转移给开发人员也使得它成为最难学习的语言之一。</p><p id="3da9" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">我们需要学习C++，因为你的EOS智能合约，你的分散式应用程序中位于区块链的部分，也必须用C++编写。C++代码然后被编译成WebAssembly。虽然理论上，其他“更容易”的语言可以编译成WebAssembly(最著名的是RUST、Python、Solidity)，但C++是Block One唯一官方支持的语言。</p><blockquote class="jb jc jd"><p id="a052" class="je jf jg jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">虽然这些其他语言可能看起来更简单，但它们的性能可能会影响您可以构建的应用程序的规模。我们预计C++将是开发高性能和安全智能合约的最佳语言，并计划在可预见的未来使用C++。<a class="ae kd" href="https://developers.eos.io/eosio-cpp/docs/required-knowledge" rel="noopener ugc nofollow" target="_blank"> EOS开发者门户</a></p></blockquote><p id="4ab0" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">是的，C++很可怕，当你的编程体验主要是通过JavaScript这样的高级解释语言时，一开始可能会令人望而生畏——但这里有一个好消息:编写智能合同实际上不需要C++的大多数功能。这些教程的目的是教你C++基础知识和高级C++特性，这些是你在智能契约编程中真正需要的。</p><p id="1e85" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">让我们花点时间来认识和了解一些有用的<a class="ae kd" href="https://github.com/AnthonyCalandra/modern-cpp-features" rel="noopener ugc nofollow" target="_blank">现代C++特性</a>，这些特性是JavaScript等高级语言所不具备的。最值得注意的是:</p><ul class=""><li id="234d" class="ke kf ie jh b ji jj jm jn kg kh ki kj kk kl kc lv kn ko kp dt translated">静态类型(但是带有自动类型推断)</li><li id="9a50" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc lv kn ko kp dt translated">预处理宏</li><li id="77f9" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc lv kn ko kp dt translated">显式引用调用、值调用</li><li id="bfeb" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc lv kn ko kp dt translated">内存指针</li><li id="ce19" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc lv kn ko kp dt translated">运算符重载</li><li id="ae06" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc lv kn ko kp dt translated">通过模板进行泛型编程</li><li id="578e" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc lv kn ko kp dt translated"><code class="eh lw lx ly lz b">typedef</code>年代</li></ul><p id="2625" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">如果您还不理解这些，请不要担心，我们将从基础开始。</p><figure class="ma mb mc md fq hv"><div class="bz el l di"><div class="me mf l"/></div></figure><h2 id="58ea" class="kv kw ie bd kx ky kz la lb lc ld le lf kg lg lh li ki lj lk ll kk lm ln lo lp dt translated">基础</h2><p id="287e" class="pw-post-body-paragraph je jf ie jh b ji lq jk jl jm lr jo jp kg ls js jt ki lt jw jx kk lu ka kb kc hm dt translated">我假设您已经熟悉至少一种编程语言，如JavaScript或Python。然后理解像定义变量、<code class="eh lw lx ly lz b">for</code>循环、<code class="eh lw lx ly lz b">if</code>条件或调用C++中的函数这样的基础知识对你来说也不会感到惊讶。让我们来看看语法:</p><pre class="ma mb mc md fq mg lz mh mi aw mj dt"><span id="547f" class="kv kw ie lz b fv mk ml l mm mn">// @url: https://repl.it/@MrToph/CPPBasics-1<br/>// In c++ libraries are imported through the #include macro<br/>// iostream comes with functions handling input and output to the console<br/>#include &lt;iostream&gt;<br/>// includes rand function<br/>#include &lt;cstdlib&gt;<br/>// includes time function<br/>#include &lt;ctime&gt;<br/><br/>// this is how to define functions: &lt;return type&gt; &lt;name&gt;(&lt;arguments&gt;)<br/>int compute(int x)<br/>{<br/>    // unsigned means no negative values which increases the range of numbers the variable can hold<br/>    const unsigned int FIVE = 5;<br/>    // FIVE = 3; // would throw an error as FIVE is declared constant<br/>    return x * x + FIVE;<br/>}<br/><br/>// the return type for no return value is called 'void'<br/>void playGuessingGame()<br/>{<br/>    // initialize random number seed with time in seconds since the epoch<br/>    srand(time(0));<br/>    // get a random integer between 0 and 9 by doing modulus 10<br/>    int random = std::rand() % 10;<br/>    // need to initialize guess, uninitialized variables are indeterminate<br/>    // meaning it could have any value, even the same as our random one!<br/>    int guess = -1;<br/>    std::cout &lt;&lt; "Guess my number between 0 and 9";<br/>    while (guess != random)<br/>    {<br/>        std::cin &gt;&gt; guess;<br/>        if (guess &gt; random)<br/>            std::cout &lt;&lt; "Lower";<br/>        else if (guess &lt; random)<br/>            std::cout &lt;&lt; "Higher";<br/>        else<br/>            std::cout &lt;&lt; "Correct";<br/>    }<br/>}<br/><br/>// the entry point of your program is a function called main which returns an integer<br/>int main()<br/>{<br/>    std::cout &lt;&lt; "Hello! Type in a number\n";<br/><br/>    int number;<br/>    std::cin &gt;&gt; number;<br/><br/>    int computed = compute(number);<br/>    std::cout &lt;&lt; "I computed x^2+5 as " &lt;&lt; computed &lt;&lt; "!\n";<br/><br/>    playGuessingGame();<br/><br/>    return 0;<br/>}</span></pre><p id="1e6f" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">整数<code class="eh lw lx ly lz b">short, int, long, long long</code>有许多基本类型(每种类型都有一个<code class="eh lw lx ly lz b">unsigned</code>选项来表示非负整数)。它们的区别在于字节数，以及它们所包含的整数范围。这里提到的这些类型<strong class="jh if">没有指定的大小</strong>，它们的大小<strong class="jh if">取决于实现</strong>。如果你在一台机器上编译你的程序，一个<code class="eh lw lx ly lz b">int</code>有16位(<code class="eh lw lx ly lz b">sizeof(int) == 2)</code>，当在另一台机器上编译时，它将有32位。这些类型给你的唯一保证是最小字节数。例如，<code class="eh lw lx ly lz b">int</code>必须至少有16位，<code class="eh lw lx ly lz b">long</code>必须至少有32位。</p><p id="f37c" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">在处理数字时，了解各个类型的确切范围是很有帮助的，尤其是在安全敏感的应用中，如区块链开发，其中上溢/下溢非常重要。为了解决这个问题，C99增加了新的类型，你可以明确地要求一个特定大小的整数，例如<code class="eh lw lx ly lz b">int16_t</code>、<code class="eh lw lx ly lz b">int32_t</code>或无符号的<code class="eh lw lx ly lz b">uint64_t</code>变量。当编写智能契约时，我们将只使用这些显式的固定大小类型。</p><p id="5892" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">注意，类似的固定大小类型对于浮点数来说是不存在的，因为位数并不能告诉你它的精度和范围。在这些情况下，您需要使用<code class="eh lw lx ly lz b">float, double, long double</code>(前者通常是<code class="eh lw lx ly lz b">32</code>和<code class="eh lw lx ly lz b">64</code>位IEEE-754浮点类型)。</p><h2 id="1c03" class="kv kw ie bd kx ky kz la lb lc ld le lf kg lg lh li ki lj lk ll kk lm ln lo lp dt translated">用线串</h2><p id="d20b" class="pw-post-body-paragraph je jf ie jh b ji lq jk jl jm lr jo jp kg ls js jt ki lt jw jx kk lu ka kb kc hm dt translated">除了数字类型和布尔<code class="eh lw lx ly lz b">bool</code>类型，<code class="eh lw lx ly lz b">string</code>是最常用的数据类型之一。它们通过<code class="eh lw lx ly lz b">&lt;string&gt;</code>包含在名称空间<code class="eh lw lx ly lz b">std</code>中。(名称空间是限定变量范围的区域，是解决大型项目中名称冲突的一种方式。)</p><pre class="ma mb mc md fq mg lz mh mi aw mj dt"><span id="2ed5" class="kv kw ie lz b fv mk ml l mm mn">// @url: https://repl.it/@MrToph/CPPBasics-Strings<br/>#include &lt;iostream&gt;<br/>// need to import &lt;string&gt; for strings<br/>#include &lt;string&gt;<br/><br/>int main()<br/>{<br/>  // strings are part of the std namespace<br/>  std::string text = "Hello";<br/>  // + is used for concatenation<br/>  text += " World";<br/>  std::cout &lt;&lt; text &lt;&lt; "\n";<br/>  // length and size are synonyms<br/>  std::cout &lt;&lt; text.length() &lt;&lt; " " &lt;&lt; text.size() &lt;&lt; "\n";<br/><br/>  text = text.substr(0, 5);<br/>  for (int i = 0; i &lt; text.length(); i++)<br/>  {<br/>    std::cout &lt;&lt; i &lt;&lt; ": " &lt;&lt; text[i] &lt;&lt; "\n";<br/>  }<br/><br/>  // different way to loop over characters<br/>  for (char c : text)<br/>  {<br/>    std::cout &lt;&lt; c &lt;&lt; "\n";<br/>  }<br/>  return 0;<br/>}</span></pre><h2 id="6cf5" class="kv kw ie bd kx ky kz la lb lc ld le lf kg lg lh li ki lj lk ll kk lm ln lo lp dt translated">数组/向量</h2><p id="2d31" class="pw-post-body-paragraph je jf ie jh b ji lq jk jl jm lr jo jp kg ls js jt ki lt jw jx kk lu ka kb kc hm dt translated">C++区分静态和动态数组。<em class="jg">静态数组</em>是具有<strong class="jh if">固定大小</strong>的数组，在编译时已知为<em class="jg">。如果您的数组需要能够增长或者大小只有在运行时才知道，那么您需要使用<code class="eh lw lx ly lz b">vector</code> s。</em></p><pre class="ma mb mc md fq mg lz mh mi aw mj dt"><span id="1c44" class="kv kw ie lz b fv mk ml l mm mn">// @url: https://repl.it/@MrToph/CPPBasics-Vectors<br/>#include &lt;iostream&gt;<br/>#include &lt;vector&gt;<br/><br/>int main()<br/>{<br/>    // arrays are defined with [] after the variable name<br/>    // and can be immediately initialized providing values in { ... }<br/>    int arr[] = {1, 2, 3};<br/>    // can specify size in brackets<br/>    // initializes elements in the list, rest to 0<br/>    int brr[3] = {1, 3};<br/>    for (int x : brr)<br/>    {<br/>        // outputs 1, 3, 0<br/>        std::cout &lt;&lt; x &lt;&lt; "\n";<br/>    }<br/><br/>    std::vector&lt;int&gt; numbers;<br/>    for (int i = 0; i &lt; 3; i++)<br/>    {<br/>        // add a number to the back<br/>        numbers.emplace_back(i);<br/>    }<br/>    // size and accessing vectors is the same as with arrays<br/>    std::cout &lt;&lt; "numbers: " &lt;&lt; numbers[0] &lt;&lt; numbers.size() &lt;&lt; "\n";<br/><br/>    // this inserts a number at the second (index 1) place<br/>    numbers.emplace(numbers.begin() + 1, 9);<br/>    // numbers.begin returns an iterator. More on these later<br/>    for (std::vector&lt;int&gt;::iterator it = numbers.begin(); it != numbers.end(); it++)<br/>    {<br/>        // outputs 1, 3, 0<br/>        std::cout &lt;&lt; *it &lt;&lt; "\n";<br/>    }<br/>}</span></pre><p id="1fbc" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">让我们暂时就此打住。在下一篇教程中，我们将讨论向函数传递参数的不同类型。</p><figure class="ma mb mc md fq hv fe ff paragraph-image"><a href="https://learneos.one#modal"><div class="fe ff mo"><img src="../Images/1d4f63d17760f04b617fff0dbbceff50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*305UMzhE41Dmot20.png"/></div></a><figcaption class="mp mq fg fe ff mr ms bd b be z ek">LearnEOS</figcaption></figure></div><div class="ab cl mt mu hb mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="hm hn ho hp hq"><p id="0df7" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">最初发布于<a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-basics/" rel="noopener ugc nofollow" target="_blank"> cmichel.io </a></p><figure class="ma mb mc md fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff na"><img src="../Images/2927593cda98ef7ceb1680420b7b4a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vn5SeMzRCvMvWrmB.gif"/></div></div></figure><blockquote class="nb"><p id="b127" class="nc nd ie bd ne nf ng nh ni nj nk kc ek translated"><a class="ae kd" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nm nn no np nq hv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nl"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>