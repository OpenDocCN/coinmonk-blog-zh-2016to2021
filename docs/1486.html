<html>
<head>
<title>Blockchain NodeJS Server Monitoring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">区块链节点服务器监控</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/blockchain-nodejs-server-monitoring-69f0dd2772ab?source=collection_archive---------5-----------------------#2018-09-10">https://medium.com/coinmonks/blockchain-nodejs-server-monitoring-69f0dd2772ab?source=collection_archive---------5-----------------------#2018-09-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="af5f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我想介绍一下如何用区块链构建一个简单的服务器监控。我们将编写一个NodeJS客户端应用程序，该应用程序将使用服务器参数(如活动内存数量、硬件型号、安装的CPU和RAM数量、服务器型号和数据中心ID)将事务提交到结构。</p><p id="9252" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们需要两台运行Ubuntu的机器。我们将在每台机器上安装NodeJS客户端和Hyperledger Fabric组件。</p><p id="9132" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">高层架构应该是这样的:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/acebfcede5635519079f455e7f31493b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y5WLnFkZ7m0-YKxn_yWAqQ.png"/></div></div></figure></div><div class="ab cl ka kb hb kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hm hn ho hp hq"><h1 id="f86b" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated"><strong class="ak"> Hyperledger结构服务器</strong></h1><p id="8979" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">按照我下面的帖子来设置服务器。在第一台机器上安装和配置Hyperledger Fabric。</p><div class="lk ll fm fo lm ln"><a rel="noopener follow" target="_blank" href="/coinmonks/getting-started-with-hyperledger-composer-34cb7228d44c"><div class="lo ab ej"><div class="lp ab lq cl cj lr"><h2 class="bd hu fv z el ls eo ep lt er et hs dt translated">Hyperledger Composer入门</h2><div class="lu l"><h3 class="bd b fv z el ls eo ep lt er et ek translated">在第一篇文章中，我想介绍一下Hyperledger Composer在Ubuntu 16.0.4 LTS版上的安装过程…</h3></div><div class="lv l"><p class="bd b gc z el ls eo ep lt er et ek translated">medium.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb jy ln"/></div></div></a></div><p id="e380" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您不需要安装和配置REST服务器。记下这台机器的IP地址。</p></div><div class="ab cl ka kb hb kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hm hn ho hp hq"><h1 id="ee5f" class="kh ki ht bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated"><strong class="ak"> NodeJS客户端App </strong></h1><p id="583f" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">在第二台机器上，安装<code class="eh mc md me mf b">composer-client</code>和<code class="eh mc md me mf b">composer-cli</code>:</p><pre class="jp jq jr js fq mg mf mh mi aw mj dt"><span id="ba93" class="mk ki ht mf b fv ml mm l mn mo">npm install --save composer-client@0.20</span><span id="e5ce" class="mk ki ht mf b fv mp mm l mn mo">npm install --save composer-admin@0.20</span></pre><p id="fd3a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们需要将我们在结构端创建的<code class="eh mc md me mf b">admin@tutorial-network </code>复制到客户端。登录第一台机器，复制位于<strong class="is hu"> $HOME/的<code class="eh mc md me mf b">admin@tutorial-network </code>文件夹。作曲/卡</strong>和<strong class="is hu"> $HOME/。作曲者/客户-数据。</strong></p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff mq"><img src="../Images/1c29db1c8012af83469a228e7699d628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blRr_HJBu1CItrX6-N4prQ.png"/></div></div></figure><p id="124f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">登录到客户机，并将这些文件粘贴到客户机上。</p><p id="fd41" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从<strong class="is hu"> $HOME\中打开<strong class="is hu"> connection.json </strong>。composer \ cards \ admin @ tutorial-network</strong>并更新从localhost到服务器IP地址的连接字符串(在我的例子中是192.168.0.109):</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="mr ms l"/></div></figure><h2 id="a946" class="mk ki ht bd kj mt mu mv kn mw mx my kr jb mz na kv jf nb nc kz jj nd ne ld nf dt translated">执行脚本</h2><p id="bb64" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">我们将在客户端执行NodeJS应用程序:</p><ul class=""><li id="a94d" class="ng nh ht is b it iu ix iy jb ni jf nj jj nk jn nl nm nn no dt translated">要创建参与者和资产，请执行:</li></ul><pre class="jp jq jr js fq mg mf mh mi aw mj dt"><span id="fa5a" class="mk ki ht mf b fv ml mm l mn mo">node cli serverregistry bootstrap</span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff np"><img src="../Images/44f05cb3002f866adb6aacb922573c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nyEN07XBE_Wa7c2aCzfYVQ.png"/></div></div></figure><p id="4c3f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该脚本将用预定义的值填充参与者和资产:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff nq"><img src="../Images/05373b1dbdda78438867b6bcfa6d1a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IN8bDWsJ_XYruveSCM369g.png"/></div></div><figcaption class="nr ns fg fe ff nt nu bd b be z ek">Participant Registry</figcaption></figure><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff nv"><img src="../Images/a1d0a6bc1e025377654d0e80bdf64d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wZLjONdeYqNyf6LeNLI2g.png"/></div></div><figcaption class="nr ns fg fe ff nt nu bd b be z ek">Asset Registry</figcaption></figure><ul class=""><li id="fec9" class="ng nh ht is b it iu ix iy jb ni jf nj jj nk jn nl nm nn no dt translated">要获取资产列表，请执行:</li></ul><pre class="jp jq jr js fq mg mf mh mi aw mj dt"><span id="da2b" class="mk ki ht mf b fv ml mm l mn mo">node cli serverregistry list</span></pre><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff nw"><img src="../Images/80b764dc6c2f85e8752a9bf06449650c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QtWiywmXbYCfH3Yvg1V6hw.png"/></div></div></figure><p id="7b4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从上面的截图可以看出，Active_Memory、HW_Model等的值仍然为空，因为我们还没有提交事务。</p><ul class=""><li id="61c5" class="ng nh ht is b it iu ix iy jb ni jf nj jj nk jn nl nm nn no dt translated">要提交事务，请执行:</li></ul><pre class="jp jq jr js fq mg mf mh mi aw mj dt"><span id="0ee3" class="mk ki ht mf b fv ml mm l mn mo">node cli serverregistry submit 64 "Model A" 8 4 "Server A" ADM</span></pre><p id="e950" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">带参数:</p><p id="8b28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">活动内存</strong> : 64</p><p id="3042" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">HW _型号</strong>:型号A</p><p id="9b00" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">已安装_ CPU</strong>:8</p><p id="7cdc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">已安装_RAM </strong> : 4</p><p id="a45c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">服务器型号</strong>:服务器A</p><p id="1a45" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">数据中心id:ADM</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff nx"><img src="../Images/e9e66aec17f8eaaa8443df3d7b87d9d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxl3YPuov3pfqbBWLI5s5A.png"/></div></div></figure><p id="eb9e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">尝试执行前面的命令:<code class="eh mc md me mf b">node cli serverregistry list</code>，您将看到事务已经被填充:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff ny"><img src="../Images/2fd7edf57a910a8b453480cae262cb1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edC-0ZrkZH9JeiIwB7ZZmA.png"/></div></div></figure><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff nz"><img src="../Images/286ae306af9803b1d44fd5ba0bb040e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TtJR70WcbSo3qXc1tQz9yA.png"/></div></div></figure><ul class=""><li id="c08e" class="ng nh ht is b it iu ix iy jb ni jf nj jj nk jn nl nm nn no dt translated">要监听事件，请执行:</li></ul><pre class="jp jq jr js fq mg mf mh mi aw mj dt"><span id="f602" class="mk ki ht mf b fv ml mm l mn mo">node cli serverregistry listen</span></pre><p id="89c4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">事件将在您提交事务后发出。您将看到控制台日志被打印出来。</p><p id="dd0d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所有代码都可以在我的Git回购上找到:<a class="ae oa" href="https://github.com/ferrygun/NodeJS-Blockchain" rel="noopener ugc nofollow" target="_blank">https://github.com/ferrygun/NodeJS-Blockchain</a></p><blockquote class="ob"><p id="2825" class="oc od ht bd oe of og oh oi oj ok jn ek translated"><a class="ae oa" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="om on oo op oq jt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ol"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>