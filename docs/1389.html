<html>
<head>
<title>DApp development on EOS Blockchain using eosjs and scatter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用eosjs和scatter在EOS区块链上进行DApp开发</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/dapp-development-on-eos-blockchain-using-eosjs-and-scatter-557f1b5b65d0?source=collection_archive---------4-----------------------#2018-08-24">https://medium.com/coinmonks/dapp-development-on-eos-blockchain-using-eosjs-and-scatter-557f1b5b65d0?source=collection_archive---------4-----------------------#2018-08-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/b958baeda9f33fed14fc0fbb98e3b801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZNGgHai8726Smi6UTBK2A.jpeg"/></div></div></figure><p id="e2ce" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">由于我一直在深入研究eos DApp的开发，所以我看到了很多好文章。在这里，我汇总了我做了所有研究后得到的所有知识。在这篇文章中，我将解释如何一起使用eosjs和scatter。我假设您对智能合同以及如何在EOS区块链上部署智能合同有基本的了解，因为在本文中我将跳过这一部分。</p><h2 id="8521" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">我们在建造什么？</h2><p id="2614" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">我们正在构建一个简单的DApp。我们将为CRUD操作编写一个智能合同，并将使用<strong class="jd hu"> eosjs </strong>和<strong class="jd hu"> scatter </strong>与部署的合同进行交互。CRUD操作包括创建、完成、删除和获取todos。我们将使用“丛林测试网”来部署我们的智能合同。</p><h2 id="9d2f" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">必备知识</h2><ol class=""><li id="eb25" class="la lb ht jd b je ku ji kv jm lc jq ld ju le jy lf lg lh li dt translated"><a class="ae kz" href="https://github.com/EOS/eos" rel="noopener ugc nofollow" target="_blank"> EOS </a></li><li id="7f50" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://github.com/EOSIO/eosjs" rel="noopener ugc nofollow" target="_blank"> Eosjs </a></li><li id="cb4e" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://github.com/GetScatter/ScatterWebExtension" rel="noopener ugc nofollow" target="_blank">散布</a></li></ol><h2 id="f939" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">散布设置</h2><p id="3e78" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated"><a class="ae kz" href="https://github.com/GetScatter/ScatterWebExtension" rel="noopener ugc nofollow" target="_blank"> Scatter </a>用于为区块链签署交易，并向应用程序提供个人信息，而不会暴露您的密钥。要设置您的分散钱包，请观看此<a class="ae kz" href="https://www.youtube.com/watch?v=QcbCf5mm_Ek" rel="noopener ugc nofollow" target="_blank">视频</a>。在散布设置中，您必须将<a class="ae kz" href="http://jungle.cryptolions.io/#home" rel="noopener ugc nofollow" target="_blank">丛林测试网</a>添加到网络中，详情如下:</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="a414" class="jz ka ht lt b fv lx ly l lz ma">Name: Jungle Testnet<br/>Domain or IP: <a class="ae kz" href="http://dev.cryptolions.io:38888" rel="noopener ugc nofollow" target="_blank">dev.cryptolions.io</a> // It might be changed, so check for the latest one<br/>Port: 38888<br/>chainId:038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca</span></pre><p id="6f91" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">添加网络配置后，现在通过进入密钥对部分将您的私钥导入到钱包中，然后单击新建。根据如下所示的表格填写信息。</p><figure class="lo lp lq lr fq iu fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/32cba3cff33f669626cf54ba4efd4311.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*AXspgJ7SOf4u7UKiijYtEQ.png"/></div></figure><p id="a44b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，您应该使用您的密钥对添加一个身份。身份保存您的帐户详细信息。转到“身份”部分并添加一个新身份，或者编辑现有身份(如果没有用)。在“身份”部分，选择网络，然后选择密钥对，它会要求您在链网上添加与该密钥相关联的帐户。您应该添加具有<strong class="jd hu">活动权限的账户。</strong></p><p id="d00c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">您的分散已全部设置好，并准备在我们的DApp中使用。</p><figure class="lo lp lq lr fq iu fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/29d9a687711d4b6ed17043eb1f37742c.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*0HW2_TAvPJMrAXCajBoFlw.png"/></div></figure><h2 id="0a7b" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">智能合同</h2><p id="7472" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">要部署todo智能合约，请遵循本文的<a class="ae kz" href="https://steemit.com/eos/@eos-asia/part-2-building-a-to-do-list-with-eos-or-working-with-persistent-data-in-eos" rel="noopener ugc nofollow" target="_blank">并将其部署在jungle testnet上。确保您能够像文章中提到的那样从命令行与testnet交互。</a></p><h2 id="d38f" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">与测试网互动</h2><p id="f5fd" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">我在前端部分使用Reactjs。完整的逻辑和流程在一个名为<em class="md"> index.jsx </em>的文件中，该文件位于<em class="md"> src </em>文件夹中。以下是配置对象:</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="f84b" class="jz ka ht lt b fv lx ly l lz ma">// Config for scatter and eosjs<br/>const EOS_CONFIG = {<br/>  contractName: "xyz", <em class="md">// Contract name<br/>  </em>contractSender: "xyz", <em class="md">// User executing the contract (should be paired with private key)<br/>  </em>network: {<br/>    protocol: "http",<br/>    blockchain: "eos",<br/>    host: "dev.cryptolions.io",<br/>    port: 38888,<br/>    chainId: "038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca"  // get this using <a class="ae kz" href="http://dev.cryptolions.io:38888/v1/chain/get_info" rel="noopener ugc nofollow" target="_blank">http://dev.cryptolions.io:38888/v1/chain/get_info</a><br/>  },<br/>  eosOptions: {}<br/>};</span></pre><p id="1992" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">与散点互动:</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="2f0f" class="jz ka ht lt b fv lx ly l lz ma">import EOS from 'eosjs';</span><span id="8e60" class="jz ka ht lt b fv me ly l lz ma">document.addEventListener(`scatterLoaded`, <em class="md">this</em>.onScatterLoad);</span><span id="6e6e" class="jz ka ht lt b fv me ly l lz ma">onScatterLoad = () =&gt; {<br/>  const scatter = window.scatter;<br/>  window.scatter = null;</span><span id="0f28" class="jz ka ht lt b fv me ly l lz ma">// Here, we are connecting scatter with eosjs so that the transactions can be signed using keys present in scatter<br/>  <em class="md">this</em>.eosClient = scatter.eos(<br/>    EOS_CONFIG.network,<br/>    EOS,<br/>    EOS_CONFIG.eosOptions,<br/>    EOS_CONFIG.network.protocol<br/>  );</span><span id="bd26" class="jz ka ht lt b fv me ly l lz ma">// scatter object to collect the information present in wallet like accounts or public key  <br/>  <em class="md">this</em>.scatter = scatter;</span><span id="7609" class="jz ka ht lt b fv me ly l lz ma">// to load the data present in our table<em class="md"><br/>  this</em>.loadTodos();<br/>};</span></pre><p id="3508" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，在<em class="md">这个</em>对象中，我们有两个引用<em class="md"> eosClient </em>和<em class="md"> scatter </em>，我们将用它们分别与EOS区块链和wallet交互。</p><p id="13cd" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">下面是使用<em class="md"> eosClient获取存储数据(所有待办事项)的代码，</em>其余功能可以在src/ <em class="md"> index.jsx </em>中查看</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="460a" class="jz ka ht lt b fv lx ly l lz ma">loadTodos() {<br/>  <em class="md">this</em>.eosClient.getTableRows({<br/>    code: EOS_CONFIG.contractName,<br/>    scope: EOS_CONFIG.contractName,<br/>    table: "todos",<br/>    json: true<br/>  }).then(data =&gt; {<br/>    <em class="md">this</em>.setState({ todos: data.rows });<br/>  }).catch(e =&gt; {<br/>    console.error(e);<br/>  });<br/>}</span></pre><p id="81a6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要获得帐户，请使用散点对象的<em class="md"> getIdentity() </em>:</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="b4b0" class="jz ka ht lt b fv lx ly l lz ma">const { accounts } = await scatter.getIdentity({<br/>     accounts: [config.EOS_CONFIG.network]<br/>});</span></pre><p id="7bcc" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">就是这样。</p><h2 id="58a3" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">结论</h2><p id="4c69" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">这样做的最大好处之一是你不必在你的机器上维护一个钱包，scatter为你管理一切。也有其他方法来托管钱包，但是scatter将责任交给了最终用户，开发者不需要处理任何私有内容。</p><h2 id="ee66" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">资源和参考资料</h2><ol class=""><li id="ac9b" class="la lb ht jd b je ku ji kv jm lc jq ld ju le jy lf lg lh li dt translated">做合同部署</li><li id="714e" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://www.youtube.com/watch?v=QcbCf5mm_Ek" rel="noopener ugc nofollow" target="_blank">散点设置</a></li><li id="7320" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://github.com/eosasia/eos-todo" rel="noopener ugc nofollow" target="_blank">没有分散集成的待办事项合同</a></li><li id="4725" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://eosio.stackexchange.com/" rel="noopener ugc nofollow" target="_blank"> EOS堆栈交换</a></li><li id="7fc5" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://developers.eos.io/" rel="noopener ugc nofollow" target="_blank"> EOS开发者</a></li></ol><p id="fb5e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">原文发表</strong> <a class="ae kz" href="https://www.innoplexus.com/blog/dapp-development-on-eos-blockchain-using-eosjs-and-scatter/" rel="noopener ugc nofollow" target="_blank"> <strong class="jd hu">此处</strong> </a> <strong class="jd hu">。Innoplexus AG保留所有权利。</strong></p><blockquote class="mf"><p id="153a" class="mg mh ht bd mi mj mk ml mm mn mo jy ek translated"><a class="ae kz" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mq mr ms mt mu iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mp"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>