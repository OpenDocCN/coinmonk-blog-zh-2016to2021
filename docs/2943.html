<html>
<head>
<title>A Bitmex Python Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Bitmex Python教程</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-bitmex-python-tutorial-5f3cdf2491a7?source=collection_archive---------0-----------------------#2020-04-22">https://medium.com/coinmonks/a-bitmex-python-tutorial-5f3cdf2491a7?source=collection_archive---------0-----------------------#2020-04-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="90a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://blog.coincodecap.com/go/bitmex" rel="noopener ugc nofollow" target="_blank"> BitMEX </a>是一个<a class="ae jo" href="https://blog.coincodecap.com/tag/crypto-trading/" rel="noopener ugc nofollow" target="_blank">加密货币交易</a>平台，除了杠杆交易之外，它还提供全面的API和支持工具，根据产品的不同杠杆大小也有所不同。Bitmex还提供了一个平台，可以在进行任何真正的投资之前，在没有资金风险的情况下模拟交易。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/a6aa554e81281943fe23b1be4fa12a05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8BL0BdUbd4eGWGlBeZAqQ.png"/></div></div></figure><p id="b5f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我们将学习如何利用Bitmex的公共API来获取市场数据，获取头寸数据，设置卖出/买入订单，并最终更新杠杆。</p><p id="3cb0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先确保你已经登录了<a class="ae jo" href="https://www.bitmex.com/register/kOHufx" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Bitmex </strong> </a>和<a class="ae jo" href="https://testnet.bitmex.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Bitmex Testnet </strong> </a>。然后你可以为Bitmex生成你的<a class="ae jo" href="https://www.bitmex.com/app/apiKeys" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> API </strong> </a>和<a class="ae jo" href="https://testnet.bitmex.com/app/apiKeys" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">测试API </strong> </a> key。</p><h2 id="1a0c" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">装置</h2><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="d47b" class="kb kc ht kx b fv lb lc l ld le">$ pip install bitmex</span></pre><h2 id="0b61" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">导入库并获取客户端实例</h2><p id="5b7b" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">在本教程中，我们将继续使用Bitmex Testnet的API来获取客户端实例。</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="4c60" class="kb kc ht kx b fv lb lc l ld le">import bitmex<br/>import time, requests, json</span><span id="379e" class="kb kc ht kx b fv lk lc l ld le">bitmex_api_key = &lt;API_KEY&gt;  # Enter your own API-key here<br/>bitmex_api_secret = &lt;API_SECRET&gt;  # Enter your own API-secret here</span><span id="ad93" class="kb kc ht kx b fv lk lc l ld le">client = bitmex.bitmex(<!-- -->test = True, api_key=bitmex_api_key_test, api_secret=bitmex_api_secret_test<!-- -->) </span></pre><h2 id="445d" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">执行市价单</h2><p id="5df4" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">要执行订单，我们首先必须填写一些参数。第一笔订单将按当前市价做多10份XBTUSD合约，第二笔订单将按当前市价做空10份XBTUSD合约。</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="fc3f" class="kb kc ht kx b fv lb lc l ld le">symbol = 'XBTUSD'<br/>ordType = 'Market'<br/>orderQty_Buy = 10 # Positive value to long<br/>orderQty_Sell = -10 # Negative value to short</span><span id="b4c9" class="kb kc ht kx b fv lk lc l ld le">client.Order.Order_new(symbol=symbol, ordType=ordType, orderQty=orderQty_Buy).result() # Long</span><span id="ed5d" class="kb kc ht kx b fv lk lc l ld le">client.Order.Order_new(symbol=symbol, ordType=ordType, orderQty=orderQty_Sell).result() # Short</span></pre><h2 id="90fd" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">更新杠杆</h2><p id="2409" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">由于Bitmex提供杠杆交易，我们将能够使用以下工具更新我们的头寸杠杆:</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="73e0" class="kb kc ht kx b fv lb lc l ld le">leverage = 5</span><span id="702c" class="kb kc ht kx b fv lk lc l ld le">client.Position.Position_updateLeverage(symbol=symbol, leverage=leverage).result()</span></pre><h2 id="773d" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">平仓</h2><p id="e804" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">某个符号的所有未平仓头寸可以通过以下方式平仓:</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="0076" class="kb kc ht kx b fv lb lc l ld le">client.Order.Order_closePosition(symbol=symbol).result()</span></pre><h2 id="9c51" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">检查订单历史</h2><p id="80fb" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">为了获取最新的订单历史，我们首先设置<code class="eh ll lm ln kx b">reverse=true</code>来获取最新的订单。</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="139c" class="kb kc ht kx b fv lb lc l ld le">orders = client.Order.Order_getOrders(symbol=symbol, reverse=True).result()</span></pre><p id="ee64" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要从订单中获取特定数据，我们可以使用以下方法清理订单:</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="b349" class="kb kc ht kx b fv lb lc l ld le">new_order = orders[0][0] # Get the last order<br/>processed_order = {}<br/>timestamp_minute = str(new_order["timestamp"]).split(':')[0] + ":" + <br/>                   str(new_order["timestamp"]).split(':')[1] + ":00"<br/><br/>processed_order["symbol"] = new_order["symbol"]<br/>processed_order["timestamp"] = timestamp_minute<br/>processed_order["amount"] = str(new_order["orderQty"]).split("L")[0]<br/>processed_order["price"] = new_order["price"]<br/>processed_order["side"] = new_order["side"]</span></pre><h2 id="f31b" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">检查未结头寸</h2><p id="79ba" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">检查某个符号的未平仓位置，然后使用以下选项选择特定数据:</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="e767" class="kb kc ht kx b fv lb lc l ld le">positions = client.Position.Position_get(filter=json.dumps({"symbol": symbol})).result()[0][0]</span><span id="edbb" class="kb kc ht kx b fv lk lc l ld le">processed_position = {}<br/>timestamp_minute = str(positions["timestamp"]).split(':')[0] + ":" + \<br/>                   str(positions["timestamp"]).split(':')[1] + ":00"<br/><br/>processed_position["symbol"] = positions["symbol"]<br/>processed_position["timestamp"] = timestamp_minute<br/>processed_position["isOpen"] = positions["isOpen"]<br/>processed_position["currentQty"] = positions["currentQty"]<br/>processed_position["leverage"] = positions["leverage"]<br/>processed_position["liquidationPrice"] = positions["liquidationPrice"]</span></pre><h2 id="35e3" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">获取过去一分钟的数据</h2><p id="a2e0" class="pw-post-body-paragraph iq ir ht is b it lf iv iw ix lg iz ja jb lh jd je jf li jh ji jj lj jl jm jn hm dt translated">获取某个符号过去一分钟的数据，并使用以下选项选择特定数据:</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="a657" class="kb kc ht kx b fv lb lc l ld le">binSize='1m' # You can change the bin size as needed</span><span id="1eca" class="kb kc ht kx b fv lk lc l ld le">past_minute_data = \<br/>    client.Trade.Trade_getBucketed(binSize=binSize, count=1, symbol=symbol, reverse=True).result()[0][0]<br/><br/>processed_min_data = {}<br/>timestamp_minute = str(past_minute_data["timestamp"]).split(':')[0] + ":" + \<br/>                   str(past_minute_data["timestamp"]).split(':')[1] + ":00"<br/><br/>processed_min_data["symbol"] = past_minute_data["symbol"]<br/>processed_min_data["Date"] = timestamp_minute<br/>processed_min_data["Open"] = past_minute_data["open"]<br/>processed_min_data["Close"] = past_minute_data["close"]<br/>processed_min_data["Volume"] = past_minute_data["volume"]<br/>processed_min_data["High"] = past_minute_data["high"]<br/>processed_min_data["Low"] = past_minute_data["low"]</span></pre><p id="391a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果需要，您也可以使用以下方式获得最后几分钟:</p><pre class="jq jr js jt fq kw kx ky kz aw la dt"><span id="83e2" class="kb kc ht kx b fv lb lc l ld le">number_of_minutes_needed = 20<br/>past_minutes_data_list = []</span><span id="5eef" class="kb kc ht kx b fv lk lc l ld le">past_minutes_data = client.Trade.Trade_getBucketed(binSize='1m', count=number_of_minutes_needed, symbol=symbol, reverse=True).result()[0]</span><span id="0e7a" class="kb kc ht kx b fv lk lc l ld le">past_minutes_data = reversed(past_minutes_data)<br/>for past_minute_data in past_minutes_data:<br/>    processed_min_data = {}<br/>    timestamp_minute = str(past_minute_data["timestamp"]).split(':')[0] + ":" + str(past_minute_data["timestamp"]).split(':')[1] + ":00"<br/><br/>    processed_min_data["symbol"] = past_minute_data["symbol"]<br/>    processed_min_data["Date"] = timestamp_minute<br/>    processed_min_data["Open"] = past_minute_data["open"]<br/>    processed_min_data["Close"] = past_minute_data["close"]<br/>    processed_min_data["Volume"] = past_minute_data["volume"]<br/>    processed_min_data["High"] = past_minute_data["high"]<br/>    processed_min_data["Low"] = past_minute_data["low"]<br/>    past_minutes_data_list.append(processed_min_data)</span></pre><h2 id="1c41" class="kb kc ht bd kd ke kf kg kh ki kj kk kl jb km kn ko jf kp kq kr jj ks kt ku kv dt translated">另外，阅读</h2><ul class=""><li id="0bc7" class="lo lp ht is b it lf ix lg jb lq jf lr jj ls jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/whats-the-best-crypto-trading-bot-in-2020-top-8-bitcoin-trading-bot-c16adeb13317">最佳加密交易机器人</a></li><li id="ab2a" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2"> Deribit审查</a> |选项、费用、API和Testnet</li><li id="6778" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX密码交易所评论</a></li><li id="51e2" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">最好的比特币<a class="ae jo" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></li><li id="4268" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a></li><li id="69bb" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">最好的<a class="ae jo" rel="noopener" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b">加密税务软件</a></li><li id="7c4f" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/the-best-crypto-trading-platforms-in-2020-the-definitive-guide-updated-c72f8b874555">最佳加密交易平台</a></li><li id="97a4" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">最佳<a class="ae jo" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密贷款平台</a></li><li id="ab33" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/ledger-vs-trezor-best-hardware-wallet-to-secure-cryptocurrency-22c7a3fd391e">莱杰vs特雷佐</a></li><li id="1dc3" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/bitsgap-review-a-crypto-trading-bot-that-makes-easy-money-a5d88a336df2">bits gap review</a>——一个轻松赚钱的加密交易机器人</li><li id="2401" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">为专业人士设计的加密交易机器人</li><li id="2791" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT审查</a> |杠杆交易、费用和交易</li><li id="4fc4" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">HaasOnline评论享受九折优惠</li><li id="eb27" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">Bitmex 保证金交易的白痴指南</li><li id="5279" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/etoro-review-78807ddeb33c"> eToro评论</a> |交易股票、密码、交易所交易基金、差价合约和商品</li><li id="aaab" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/bitmex-advanced-margin-trading-guide-2270c195ce25?source=friends_link&amp;sk=1d986cca731f5084b9a2db4a4bc4a7ad"> Bitmex高级保证金交易指南</a></li><li id="6e2e" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">开发人员的最佳加密API</li><li id="b037" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南:新手如何赚钱</li><li id="b46f" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">顶级<a class="ae jo" href="https://blog.coincodecap.com/bitcoin-node-solutions" rel="noopener ugc nofollow" target="_blank">比特币节点</a>提供商</li><li id="0966" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">最佳<a class="ae jo" rel="noopener" href="/coinmonks/what-are-the-best-charting-platforms-for-cryptocurrency-trading-85aade584d80">加密制图工具</a></li><li id="ef45" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">了解比特币最好的<a class="ae jo" rel="noopener" href="/coinmonks/what-are-the-best-books-to-learn-bitcoin-409aeb9aff4b">书籍有哪些？</a></li></ul><blockquote class="mc"><p id="b751" class="md me ht bd mf mg mh mi mj mk ml jn ek translated"><a class="ae jo" href="https://coincodecap.com?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mn mo mp mq mr ju fe ff paragraph-image"><a href="https://coincodecap.com?utm_source=coinmonks"><div class="fe ff mm"><img src="../Images/160ce73bd06d46c2250251e7d5969f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*BoDnKUyK8p4hitHAJZ5Pdw.png"/></div></a></figure></div></div>    
</body>
</html>