<html>
<head>
<title>Concurrency and Parallelism in Smart Contracts, Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">智能契约中的并发性和并行性，第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/concurrency-and-parallelism-in-smart-contracts-part-1-10e8f6ecfa12?source=collection_archive---------1-----------------------#2021-09-29">https://medium.com/coinmonks/concurrency-and-parallelism-in-smart-contracts-part-1-10e8f6ecfa12?source=collection_archive---------1-----------------------#2021-09-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="e303" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">为什么以太坊的吞吐量如此之低</h2></div><p id="37b5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以太坊很慢——慢得令人难以忍受。我最近做了一个简单的USDC批准交易，大约花了3个小时来验证。这里有一个更有启发性的统计:以太坊平均每10~20秒发布一个区块。每个块包含不到350个事务。所有这些大致相当于每秒30次交易 (tps)。批评以太坊慢的时候，经常提起Visa的2,000 tps。也许这是一个不公平的比较，因为以太坊仍然处于发展阶段。然而，以太坊似乎不太可能很快主宰数字金融。</p><p id="bd3e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以太坊的低吞吐量是一个根本性的问题。以太坊是一个<strong class="jk hu">基于账户的区块链</strong>:账本状态被定义为从账户地址到一段数据的键值映射。简单的ETH交易(<strong class="jk hu">价值转移</strong>)增加和减少账户对的ETH余额数据。类似地，一个更复杂的交易(<strong class="jk hu">契约调用</strong>)会使指定账户的数据发生变异。在这种情况下，以太坊交易是全球分类账状态的过渡功能。这是什么使得<strong class="jk hu">以太坊虚拟机</strong> (EVM)图灵完整，并允许智能合约成为可能；以太坊智能合约本质上是一个可交互的账户数据。</p><p id="2d6e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在让我们看看EVM是如何处理或验证这些事务的。请注意，并行处理所有事务是不合理的。按照设计，所有事务都试图改变整个全局状态。如果事务并行运行，EVM将偏向于<strong class="jk hu">竞争条件</strong>:两个程序(在本例中是事务)试图并行递增一个<code class="eh ke kf kg kh b">uint</code>变量。因为两个程序同时访问变量，所以变量只增加一次，而不是两次。为了解决这种并发错误，以太坊选择逐个处理事务。换句话说，EVM是一个单线程的状态机。结果以太坊实现了<strong class="jk hu">并发</strong>，却没有实现<strong class="jk hu">并行</strong>。</p><p id="6603" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以太坊类似于只有一个处理时间不一致的出纳员的票队列。排队的人是等待验证的交易，孤独的出纳员是虚拟机。当我们把汽油费计算在内时，事情就变得更复杂了。现在，任何人都可以额外付费插队。异常长的队伍意味着那些在排队中买不起更好位置的人将不得不等待过长的时间来处理他们的票。</p><p id="b985" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以太坊的低吞吐量是有问题的，尤其是从web3.0的角度来看。比方说以太坊确实成为了所有网络应用的媒介。如果其目前的吞吐量持续下去，像投票赞成Reddit帖子这样的琐碎任务可能需要两个多小时才能处理完；这不是区块链对未来最现实的展望，但它证明了我的观点。我们生活在一个速度决定一切的时代，以太坊太慢了。</p><p id="331b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">你可能会问，为什么不选择性地应用并发性呢？详细地说，为什么不将并发性应用于冲突的事务—例如，将值转移到同一个帐户—并并行处理其余的事务。不幸的是，Saraph和Herlihy (2019，p2)向我们展示了所实现的速度提升充其量是适度的。</p><p id="2c31" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">许多加速以太坊和提高其可扩展性的解决方案已经被提出。最近的EIP-1559——伦敦硬分叉——不会直接影响以太坊的交易速度，但理论上应该会通过减少普通用户在交易处理前必须等待的潜在块数，来稳定其在大规模交易高峰时的波动性。然后是<strong class="jk hu">第二层的累积</strong>，这应该会直接影响以太坊的吞吐量，而不会危及太多区块链宝贵的不信任。</p><p id="efa2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">与此同时，其他模拟区块链的通用虚拟机也在积极开发中。有些已经成功实现了并行，承诺吞吐量远高于以太坊的30 tps。我想特别关注阿尔格兰德、索拉纳和卡尔达诺，以及他们在智能合约中实现并行的独特方法。</p></div><div class="ab cl kj kk hb kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hm hn ho hp hq"><p id="e6a1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">参考</p><ul class=""><li id="6b81" class="kq kr ht jk b jl jm jo jp jr ks jv kt jz ku kd kv kw kx ky dt translated"><a class="ae kz" href="https://drops.dagstuhl.de/opus/volltexte/2020/11968/pdf/OASIcs-Tokenomics-2019-4.pdf" rel="noopener ugc nofollow" target="_blank"> Saraph，V &amp; Herlihy，M，2019，“以太坊智能合约中投机并发性的实证研究”</a></li><li id="cd17" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://notes.ethereum.org/@vbuterin/eip-1559-faq#How-would-a-spike-of-high-usage-look-like-under-EIP-1559-compared-to-the-status-quo" rel="noopener ugc nofollow" target="_blank">布特林，V，“EIP 1559常见问题解答”</a></li></ul><blockquote class="lf"><p id="6394" class="lg lh ht bd li lj lk ll lm ln lo kd ek translated">加入Coinmonks <a class="ae kz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kz" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="3e0c" class="lp lq ht bd lr ls lt lu lv lw lx ly lz jr ma mb mc jv md me mf jz mg mh mi mj dt translated">另外，阅读</h2><ul class=""><li id="6c6b" class="kq kr ht jk b jl mk jo ml jr mm jv mn jz mo kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易机器人</a> | <a class="ae kz" rel="noopener" href="/coinmonks/cryptohopper-review-a388ff5bae88"> Cryptohopper审查</a> | <a class="ae kz" href="https://blog.coincodecap.com/bexplus-review" rel="noopener ugc nofollow" target="_blank"> Bexplus审查</a></li><li id="c51d" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/zero-fee-crypto-exchanges" rel="noopener ugc nofollow" target="_blank"> 7个最佳零费用加密交换平台</a></li><li id="98d6" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/what-are-decentralized-exchanges" rel="noopener ugc nofollow" target="_blank">去中心化交易所</a> | <a class="ae kz" href="https://blog.coincodecap.com/bitbns-fip" rel="noopener ugc nofollow" target="_blank">比特恩斯FIP </a> | <a class="ae kz" href="https://blog.coincodecap.com/pionex-review-exchange-with-crypto-trading-bot" rel="noopener ugc nofollow" target="_blank"> Pionex审核</a></li><li id="a0ae" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/buy-crypto-with-credit-card" rel="noopener ugc nofollow" target="_blank">用信用卡购买密码的10个最佳地点</a></li><li id="ca05" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/3commas-vs-pionex-vs-cryptohopper" rel="noopener ugc nofollow" target="_blank">3 commas vs . Pionex vs . crypto hopper</a></li><li id="06fb" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">加密复制交易平台</a> | <a class="ae kz" rel="noopener" href="/coinmonks/buy-bitcoin-on-wazirx-2d12b7989af1">如何在WazirX上购买比特币</a></li><li id="8769" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/coinloan-review" rel="noopener ugc nofollow" target="_blank"> CoinLoan点评</a>|<a class="ae kz" rel="noopener" href="/coinmonks/crypto-com-review-f143dca1f74c">Crypto.com点评</a> | <a class="ae kz" rel="noopener" href="/coinmonks/huobi-margin-trading-b3b06cdc1519">火币保证金交易</a></li><li id="dda2" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae kz" href="https://blog.coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="8a42" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated">最佳加密<a class="ae kz" rel="noopener" href="/coinmonks/hardware-wallets-dfa1211730c6">硬件钱包</a> | <a class="ae kz" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns评论</a></li><li id="a8e2" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">新加坡十大最佳加密交易所</a> | <a class="ae kz" href="https://blog.coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank">购买AXS </a></li><li id="188b" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳加密软件</a> | <a class="ae kz" href="https://blog.coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank"> WazirX P2P </a></li><li id="00d7" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/5-best-crypto-trading-bots-in-canada" rel="noopener ugc nofollow" target="_blank">加拿大最佳加密交易机器人</a> | <a class="ae kz" href="https://blog.coincodecap.com/kucoin-review" rel="noopener ugc nofollow" target="_blank">库币评论</a></li><li id="cc61" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/huobi-crypto-trading-signals" rel="noopener ugc nofollow" target="_blank">火币的加密交易信号</a> | <a class="ae kz" rel="noopener" href="/coinmonks/hitbtc-review-c5143c5d53c2"> HitBTC审核</a></li><li id="d3b4" class="kq kr ht jk b jl la jo lb jr lc jv ld jz le kd kv kw kx ky dt translated"><a class="ae kz" href="https://blog.coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae kz" href="https://blog.coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li></ul></div></div>    
</body>
</html>