# 将物理设备与 IOTA(跟踪和追踪应用程序)集成。

> 原文：<https://medium.com/coinmonks/integrating-physical-devices-with-iota-the-track-trace-app-351226b86c8b?source=collection_archive---------1----------------------->

## 关于将物理设备与 IOTA 协议集成的初学者教程系列的第 16 部分。

![](img/acfbd549c1bbe83be7e371d0a61d007d.png)

# 介绍

这是初学者教程系列的第 16 部分，我们将探索如何将物理设备与 IOTA 协议集成在一起。在本教程中，我们将使用条形码扫描仪和我们自己的 web 应用程序。以模拟使用 IOTA tangle 在具有多个参与者的典型供应链中创建事件的防篡改审计跟踪。

*注意！
如果您还没有条形码扫描仪，您还可以选择手动输入条形码 ID。*

在我个人看来，供应链管理可能是我们将看到 DLT 技术在行业中得到真正应用的第一个领域。主要原因是，这项技术有可能解决这个行业目前面临的许多问题，如缺乏透明度、易处理性和信任。我甚至认为 DLT 技术将成为未来所有供应链互动的核心。

# 使用案例

最近，我们信任的酒店老板注意到了一个问题，他从他的朋友渔民鲍勃那里得到的海鲜产品质量下降，他的朋友位于北部的一个小渔村。他怀疑这个问题与 Bob 或产品本身无关，而是从产品被运送到他的酒店的供应链中的延迟。由于货运涉及多个行为者，不清楚谁应对延误负责，谁应该为有缺陷的产品向他退款。当他试图解决供应链中各种参与者的问题时，他们基本上互相指责，没有人承担责任。他甚至怀疑他们中的一些人篡改了货物的文件以逃避责任。

我们的酒店老板认为，缺乏问责制的根本问题实际上与缺乏透明度有关。如果有一个公共可用的防篡改系统，每个参与者都必须记录他们与产品的交互，然后他可以审计他的供应链中的交互轨迹，并确定谁是罪魁祸首。

但是他在哪里能找到这样的系统呢？，他再次转向丝毫纠结。

在我们开始研究功能性解决方案之前，我们首先需要后退一步，看看系统的一些基本要求:

1.  该系统必须对所有演员都是全球可用的，除了网络浏览器之外，不必在客户端计算机上安装任何软件。
2.  与特定货物相关的所有记录必须向所有行为者公开，以防止任何争议。
3.  该系统必须包括某种类型的私钥加密，以证明适当的参与者在系统中记录了适当的记录。
4.  当一个参与者收到货物(入站)以及货物被交付给供应链中的下一个参与者(出站)时，应该在系统中创建一个记录
5.  记录必须包括一些基本的元数据，用于识别记录进入系统的日期/时间、参与者的姓名和交易类型(入境或出境)
6.  该系统应该有一个易于使用的界面和条形码支持，以简化输入和检索系统的数据。

*注意！
Track&Trace App 的任何生产就绪版本。可能包括某种类型的参与者登录，其中诸如参与者名称和私有密钥之类的元数据将存储在一个集中的数据库中，而不是必须在每个事务的 UI 中提供。然而，为了防止额外的复杂性和提高应用程序的可用性。，我决定不在我的应用程序版本中包含任何登录机制。*

# 关于跟踪和追溯概念

在我们讨论技术之前。，让我们快速看一下基本概念。

假设 IOTA 酒店的购买者想要向 Bob 下一个新的订单，购买 10kg 的新鲜鲑鱼。

与购买订单一起，购买者生成一个随机的 13 位数字，并将其提供给 Bob，用作该特定订单的唯一跟踪 ID。

你为什么要问 13 这个数字..世界上最常用的条形码系统之一是 EAN-13 条形码。这意味着它可以被大多数标准条形码扫描仪开箱即可读取。

接下来，鲍勃把这个 13 位数的数字输入到一个[在线条形码生成器中，就像 TECH-IT](https://barcode.tec-it.com/en) 主持的这个。

![](img/fffa500fd9f0f45a221b59ed0ae213c0.png)

然后鲍勃把条形码打印出来，贴在新鲜鲑鱼的包装上。

最后，当 Bob 将包裹交给“Trucks R Us”的提货人时，他拿出条形码扫描仪，在 Track&Trace 应用程序中注册了一个“Outbond”交易。

与此同时，当“Trucks R Us”的收件人收到包裹时，他会带上条形码扫描仪，在 Track&Trace 应用程序中注册一个“入境”交易。

当“Trucks R Us”的提货人将包裹交给供应链中的下一个参与者(SeaTrans Inc .)时，他在 Track&Trace 应用程序中注册了一个“出站”交易。

供应链中的每个参与者都是如此，直到包裹最终到达酒店 IOTA 仓库。

因此，我们现在有效地创建了一个闭环的、防篡改的每次装运交互的审计跟踪，可以由酒店所有者、购买者或任何其他 3 方进行检查和验证。任何时候的派对演员。

![](img/e1c2384a4b1dcdb32a2e361ab329f270.png)

那么，在向系统输入记录时，我们如何防止一个演员冒充另一个演员呢？在我的项目版本中，每个参与者都被提供了一个只有他们自己知道的私有密钥。私钥与唯一的条形码 ID 一起用于生成唯一的散列，该散列将被存储在每个 IOTA 事务的消息片段内。现在可以使用散列来验证正确的参与者创建了适当的记录。

*注意！
玩赛道的时候& Trace App。您不必从头开始生成和打印条形码。EAN-13 编码用于你从当地商店购买的许多日常用品。看看你的冰箱就知道了。*

# 条形码与 IOTA 地址

追踪应用程序。在 IOTA Tangle 中存储记录时使用 IOTA 事务和地址。每个跟踪和追踪记录被存储为 IOTA 缠结中的唯一交易对象，并且与一个特定条形码相关的所有交易被“链接”到相应的 IOTA 地址。那么当用户没有提供 IOTA 地址时，系统如何知道使用哪个 IOTA 地址呢？嗯，我们在 PyOTA Kerl 包中使用了一个巧妙的函数，它接受一个随机字符串并将其转换成 IOTA 地址。在我们的例子中，我们将 13 位条形码发送给函数，并得到一个有效的 IOTA 地址作为回报。该函数是确定性的，因此我们总是从相同的 13 位条形码获得相同的 IOTA 地址。

# 关于条形码扫描仪

如前所述，你不需要一个条形码扫描仪来玩跟踪和追踪应用程序。然而，由于本教程毕竟是“将物理设备与 IOTA 集成”系列的一部分，我想我们至少应该在本教程中介绍一个新的“物理设备”。

条形码扫描仪实际上是非常简单的设备，只要把它插入你电脑上的 USB 接口就可以开始扫描了。我相信大多数条形码扫描仪的功能是作为一个键盘模拟器，所以不需要任何驱动程序或软件库来运行这个东西。因此，通过本教程，您应该能够使用任何条形码扫描仪。

我花了大约 12 美元在易趣上买了这个特殊的条形码扫描仪。

![](img/a240696e64bc135c3f2ce6e514f5e92a.png)

# 关于跟踪与追溯系统基础设施

让我们从一个潜在的系统基础设施开始，它可能支持我们在上一节中讨论的需求。

首先，IOTA Tangle 应该是存储我们的记录的理想主干，因为它提供了免费的、全局的、防篡改的数据存储，对供应链中的所有参与者公开可用。

接下来，我们需要一个网络服务器，在那里我们可以为我们的供应链参与者设计和托管一个简单易用的 UI。让我们的代码运行在一个集中的网络服务器上也避免了我们必须处理客户端软件。与 IOTA Tangle 的任何交互也将由服务器处理，以减轻客户端在创建和检索去往和来自 Tangle 的事务方面的负担。

我们的基础设施的简单草图现在应该是这样的。

![](img/47c609ec10cae9f87ae558855ed9c28c.png)

*注意！
当我尝试在我的原生 Windows 操作系统上托管 web 服务器时，我最终在服务网页并同时与 IOTA Tangle 交互时遇到了一些线程问题，因此我强烈建议您在 Linux 系统上运行 web 服务器。如果你没有 Linux 系统，我建议你去看看*[*Linux 的 Windows 子系统(WSL)*](https://docs.microsoft.com/en-us/windows/wsl/install-win10) *。它对我来说非常有效。*

# 关于跟踪与追溯软件基础设施

接下来，让我们看看系统中使用的主要软件组件。

可能有数百种不同的 web 服务器和编码语言可以用于我们的项目，但我认为我们应该保持本系列前面教程的真实性，并再次使用 Python 构建我们的解决方案。毕竟，如果您已经学习了本系列前面的教程，您应该已经熟悉了 PyOTA Python 库，我们将使用它与 IOTA Tangle 进行交互。当选择使用 Python 构建简单 web 应用程序的框架时，首先想到的是 [Flask](https://flask.palletsprojects.com/en/1.1.x/) 。如果你还不熟悉 Flask，我建议你去看看 Miguel 的这个[优秀教程](https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world)。

# 关于跟踪和追踪用户界面

追踪应用程序。用户界面基本上由两个输入页面(表单)和一个搜索结果页面组成。

“注册交易”页面用于在系统中创建新记录(交易)

![](img/ee6f68360546f29bad2765023db48c7c.png)

“显示交易历史”页面用于从系统中检索现有记录(交易)

![](img/82ad32a4e4736daaf1a3052eec635a13.png)

最后，“显示交易历史结果”页面简单地显示了现有跟踪和追踪记录(交易)的列表，包括特定条形码 ID (IOTA 地址)的元数据

![](img/61fa7ae5cabd67743020ea4cb849332d.png)

*注意！
如果使用条形码扫描仪和 Track & Trace App。，只需将光标放在“条形码”字段，扫描代码，13 位条形码 ID 就会出现在字段中。*

# 代码

这是我通常包含本教程代码的地方。然而，正如大多数 Flask 应用程序一样。(这包括)由多个文件(Python，Html 等)组成。)我觉得那没多大意义。相反，你最好直接在 [Track & Trace Github](https://github.com/huggre/trackntrace) 页面上查看代码。

# 贡献

如果你想对本教程有所贡献，你可以在这里找到一个 Github 库

# 捐款

如果你喜欢这个教程，并希望我继续让其他人感到自由，使一个小的捐赠给下面的 IOTA 地址。

![](img/3bed7d1c4e8df050c2854a8c06f78a54.png)

nyzbhovsmdwabxsacajttwjoqrvvawlbsfqvsjswwbjjlsqknzfc 9 xcrpqsvfqzpbjcjrannpvmmezqjrqsvvgz

> [在您的收件箱中直接获得最佳软件交易](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)