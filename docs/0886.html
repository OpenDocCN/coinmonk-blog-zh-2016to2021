<html>
<head>
<title>IPFS Tutorial: Sending and Getting Files via NodeJS Backend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IPFS教程:通过NodeJS后端发送和获取文件</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ipfs-tutorial-sending-and-getting-files-via-nodejs-backend-85c85ae7f6f6?source=collection_archive---------0-----------------------#2018-06-28">https://medium.com/coinmonks/ipfs-tutorial-sending-and-getting-files-via-nodejs-backend-85c85ae7f6f6?source=collection_archive---------0-----------------------#2018-06-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="565d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">大家好，我将告诉如何上传一个文件到ipfs网络，并通过后端从ipfs网络获取文件。我创建了一个路由器，用于以基本的方式获取和发送文件。为了完成本教程，我们需要ipfs和ipfs-api模块的infura网关。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/7f15b91046ce0819daa99b3fce22370c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*qG4CYz8ipt8WeAGiTJWIjA.png"/></div></figure><p id="f499" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">开始</strong></p><p id="b1df" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，您需要为这个项目创建一个空文件夹，以便于访问它。创建文件夹后，您需要在该文件夹中打开一个命令shell。我假设您的计算机上安装了npm。npm是由nodejs发布的，所以如果你安装了nodejs，你就会得到npm。如果你没有从<a class="ae jw" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">这个站点</a>的npm下载节点。安装npm后，您需要调用。</p><pre class="jp jq jr js fq jx jy jz ka aw kb dt"><span id="e2ff" class="kc kd ht jy b fv ke kf l kg kh">npm init</span></pre><p id="f200" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果要保留默认设置，包括默认名称(即文件夹名称)，可以通过单击enter跳过所有行。在这个过程的最后，您将得到一个package.json文件。</p><p id="5c25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">启动项目后，在文件夹中你需要创建一个js文件，它的名字是你想要的，这将是我们的后端</p><p id="8c19" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">获取模块</strong></p><p id="f19a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我的代码中，你可以看到有模块需求，我们只是通过npm下载将它们包含到项目中。他们的国家预防机制呼吁是:</p><pre class="jp jq jr js fq jx jy jz ka aw kb dt"><span id="44ba" class="kc kd ht jy b fv ke kf l kg kh">npm install ipfs-api --save</span><span id="26dc" class="kc kd ht jy b fv ki kf l kg kh">npm install express --save</span><span id="ae18" class="kc kd ht jy b fv ki kf l kg kh">npm install fs --save</span></pre><p id="3f0e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您需要从命令行单独调用这几行来将它们安装到项目中。当您完成安装过程时，您可以看到有一个名为node modules的文件夹，这是您的模块下载的文件夹。</p><p id="2b84" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">代码</strong></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="kj kk l"/></div></figure><p id="d979" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">准备</strong></p><p id="bb47" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在前5行我们定义了我们的模块。然后在第8行，我们在infura的帮助下定义了我们的infura网关。如果你想知道更多关于infura的信息，你可以看看他们的网站。他们做得很好，使以太坊和ipfs网络更容易连接。</p><p id="6dff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了测试的目的，我在我的后端目录中创建了一个文件来上传到ipfs网络。在上传文件到ipfs之前，由于ipfs的要求，我将文件更改到缓冲区。我也分享<a class="ae jw" href="https://github.com/ipfs/awesome-ipfs" rel="noopener ugc nofollow" target="_blank">这个链接</a>给你。您可以通过该链接了解有关ipfs的更多信息。他们创建了一个关于IPF的非常好的库。</p><p id="ae40" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当我们完成了关于ipfs的先决条件，剩下的代码就更容易了。我为本教程创建了添加文件和获取文件路由器，这些路由器的名称是不言自明的。</p><p id="d46b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">添加文件</strong></p><p id="95d3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在添加文件路由器中，我们使用ipfs-api的add函数和回调函数。这个函数将我们的文件添加到网络中，并返回这个文件的散列值。如果你去gateway.ipfs.io/ipfs/RETURNED_HASH，你可以在这里看到你的文件上传。</p><p id="fa97" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">获取文件</strong></p><p id="6fc2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因为这个路由器的目的是学习，这个路由器不是自动的。为了获取文件，我们需要从添加文件路由器获得的散列。当我们用我们的散列值修改第30行时，这个路由器把你的文件记录到控制台。</p><p id="d239" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">感谢您阅读本教程，如果您有任何问题或建议，可以通过<a class="ae jw" href="https://twitter.com/AhmetSayarli" rel="noopener ugc nofollow" target="_blank"> twitter </a>联系我</p><blockquote class="kl"><p id="e004" class="km kn ht bd ko kp kq kr ks kt ku jn ek translated">加入Coinmonks <a class="ae jw" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jw" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae jw" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="kc kd ht bd kv kw kx ky kz la lb lc ld jb le lf lg jf lh li lj jj lk ll lm ln dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="lo lp ht is b it lq ix lr jb ls jf lt jj lu jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae jw" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae jw" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/top-3-telegram-channels-for-crypto-traders-in-2021-8385f4411ff4">密码电报信号</a> | <a class="ae jw" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="af11" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">购买比特币印度</a> | <a class="ae jw" rel="noopener" href="/coinmonks/pionex-review-exchange-with-crypto-trading-bot-1e459d0191ea"> Pionex评论</a> | <a class="ae jw" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="957b" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度的加密交易所</a> | <a class="ae jw" rel="noopener" href="/coinmonks/bitcoin-savings-account-e65b13f92451">比特币储蓄账户</a></li><li id="fce2" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" href="https://coincodecap.com/cloudbet-casino-review" rel="noopener ugc nofollow" target="_blank"> Cloudbet赌场评论</a> | <a class="ae jw" href="https://coincodecap.com/ignition-casino-review" rel="noopener ugc nofollow" target="_blank">点火赌场评论</a></li><li id="a2b9" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/binance-fees-8588ec17965">币安收费</a> | <a class="ae jw" rel="noopener" href="/coinmonks/botcrypto-review-2021-build-your-own-trading-bot-coincodecap-6b8332d736c7">僵尸加密审查</a> | <a class="ae jw" rel="noopener" href="/coinmonks/hotbit-review-cd5bec41dafb">热点审查</a></li><li id="0df7" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" href="https://coincodecap.com/myconstant-review" rel="noopener ugc nofollow" target="_blank"> MyConstant Review </a> | <a class="ae jw" href="https://coincodecap.com/best-swing-trading-bots" rel="noopener ugc nofollow" target="_blank"> 8款最佳摇摆交易机器人</a></li><li id="f33b" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae jw" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated"><a class="ae jw" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="b359" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">最佳<a class="ae jw" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="lo lp ht is b it lz ix ma jb mb jf mc jj md jn lv lw lx ly dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>