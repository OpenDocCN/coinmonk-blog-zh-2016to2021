<html>
<head>
<title>Cardano install Mallet to deploy and interact with smart contract on IELE testnet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cardano安装Mallet以在IELE测试网上部署智能合约并与之交互</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/cardano-install-mallet-to-deploy-and-interact-with-smart-contract-on-iele-testnet-fe7972e1caf8?source=collection_archive---------3-----------------------#2018-09-28">https://medium.com/coinmonks/cardano-install-mallet-to-deploy-and-interact-with-smart-contract-on-iele-testnet-fe7972e1caf8?source=collection_archive---------3-----------------------#2018-09-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/1f62eccb5efe53b9b578622117632392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1SjEeOU3by4cTspMIJ1TA.png"/></div></div></figure><h1 id="b83b" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">木槌</h1><p id="1f6a" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">最小钱包Mallet是一个命令行实用程序，用于部署智能合约并与IOHK开发的<strong class="kb hu">卡尔达诺IELE </strong>和KEVM测试网(<a class="ae kx" href="https://testnet.iohkdev.io/" rel="noopener ugc nofollow" target="_blank">https://testnet.iohkdev.io/</a>)进行交互。Mallet是用Javascript编写的，基于Node.js REPL，所以它提供了一些方便的函数和库，如Web3。Mallet也可以作为一个库包含在您自己的JavaScript程序中。</p><h1 id="07fa" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">安装</h1><p id="8d2f" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">Mallet需要Node.js版本10.4.0或更高版本。在两个地方有更详细的安装Node.js和Mallet的说明。</p><p id="a50c" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">首先打开一个文件夹，使用git clone下载工具包</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="3563" class="lm jc ht li b fv ln lo l lp lq">$ mkdir mallet &amp;&amp; cd mallet<br/>$ git clone <a class="ae kx" href="https://github.com/input-output-hk/mallet.git" rel="noopener ugc nofollow" target="_blank">https://github.com/input-output-hk/mallet.git</a></span></pre><p id="e35d" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">第二，使用npm安装mallat cli</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="df92" class="lm jc ht li b fv ln lo l lp lq">$ npm install</span></pre><h1 id="783b" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">运行命令行界面</h1><p id="fe84" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">键入以下内容以查看Mallet的帮助文件:</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="82fe" class="lm jc ht li b fv ln lo l lp lq">$ ./mallet — help</span></pre><p id="e73f" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">mallet会显示我们需要的所有信息</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="c1be" class="lm jc ht li b fv ln lo l lp lq">mallet 2.0.0 — command line utility for KEVM/IELE testnets<br/> <br/> USAGE<br/> <br/> mallet &lt;testnet&gt;<br/> <br/> ARGUMENTS &lt;testnet&gt; JSON RPC endpoint to connect. Possible values are: ‘kevm’, ‘iele’, or a custom HTTP(S) URL required<br/> <br/> OPTIONS<br/> <br/> -d, — datadir Specify data directory optional default: “/Users/johnnyhsieh/.mallet2”<br/> <br/> GLOBAL OPTIONS<br/> <br/> -h, — help Display help<br/> -V, — version Display version<br/> — no-color Disable colors<br/> — quiet Quiet mode — only displays warn and error messages<br/> -v, — verbose Verbose mode — will also output debug messages</span></pre><p id="f9ad" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">在我们开始与卡尔达诺互动之前</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="c2e9" class="lm jc ht li b fv ln lo l lp lq">$ ./mallet iele</span></pre><p id="7457" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">让我们检查一下木槌的所有命令</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="0ede" class="lm jc ht li b fv ln lo l lp lq">mallet&gt; listCommands()<br/> [ ‘currentAccount’,<br/> ‘getBalance’,<br/> ‘getNonce’,<br/> ‘getReceipt’,<br/> ‘help’,<br/> ‘iele.contractCall’,<br/> ‘iele.createContract, iele.compile’,<br/> ‘iele.simpleTransfer’,<br/> ‘importPrivateKey’,<br/> ‘lastTransaction’,<br/> ‘listAccounts’,<br/> ‘listCommands’,<br/> ‘newAccount’,<br/> ‘requestFunds’,<br/> ‘rlp’,<br/> ‘selectAccount’,<br/> ‘sendTransaction’,<br/> ‘web3’ ]</span></pre><h1 id="6cf8" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">账户管理</h1><p id="0a7f" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">现在，我们准备创建一个帐户，并采取一些测试令牌</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="0957" class="lm jc ht li b fv ln lo l lp lq"><br/>mallet&gt; myAccount = newAccount(‘johnnyhsieh’)<br/> ‘0x13be17a380a63755d4f9c57fe848accc07760723’</span><span id="f5ed" class="lm jc ht li b fv lr lo l lp lq">mallet&gt; listAccounts()<br/> [ ‘0x13be17a380a63755d4f9c57fe848accc07760723’ ]</span><span id="bae6" class="lm jc ht li b fv lr lo l lp lq">mallet&gt; selectAccount(myAccount)<br/> ‘0x13be17a380a63755d4f9c57fe848accc07760723’<br/> <br/>mallet&gt; getBalance()<br/> ‘0’</span><span id="45b2" class="lm jc ht li b fv lr lo l lp lq">mallet&gt; requestFunds()<br/> ‘0x27e2e4d47d5474f599fa9a676d819e39e36a5684c550ddce28606ef6035ef01c’</span><span id="3645" class="lm jc ht li b fv lr lo l lp lq">mallet&gt; getBalance()<br/> ‘30000000000000000’<br/></span></pre><p id="d871" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">您也可以使用`getReceipt `检查交易收据</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="fbb5" class="lm jc ht li b fv ln lo l lp lq">mallet&gt; getReceipt(‘0xe45a5ec488933b01f615af5771eabec642c95024b16aafdeda8256393857b231’)<br/> { transactionHash:<br/> ‘0xe45a5ec488933b01f615af5771eabec642c95024b16aafdeda8256393857b231’,<br/> transactionIndex: 0,<br/> blockNumber: 336842,<br/> blockHash:<br/> ‘0x4fc2575c0b5b44778b42be907355b2e1129183acdce9b2ddab44b4606d78501e’,<br/> cumulativeGasUsed: 21680,<br/> gasUsed: 21680,<br/> contractAddress: null,<br/> logs: [],<br/> statusCode: ‘0x00’,<br/> status: 1,<br/> returnData: ‘0xc0’ }<br/></span></pre><h1 id="80f5" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">部署合同</h1><p id="a677" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">在卡达诺有两种不同的合同</p><h2 id="2919" class="lm jc ht bd jd ls lt lu jh lv lw lx jl kk ly lz jp ko ma mb jt ks mc md jx me dt translated">IELE</h2><p id="5688" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">IELE可以直接部署，但是可靠性需要被转换成字节码然后部署。</p><p id="328e" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">使用iele.compile('/path ')</p><h2 id="9269" class="lm jc ht bd jd ls lt lu jh lv lw lx jl kk ly lz jp ko ma mb jt ks mc md jx me dt translated">固态</h2><p id="9e84" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">Mallet也支持部署solidity契约，但是它需要编译成字节码才能部署你的契约。</p><p id="daee" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">你好世界</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="e4a6" class="lm jc ht li b fv ln lo l lp lq"> mallet&gt; iele.compile(‘test/contracts/helloworld.sol’)</span><span id="e902" class="lm jc ht li b fv lr lo l lp lq">{ source: rt.storage.copy.to.memory(%from, %to, %size) {\ncopy.loop:\n %done = iszero %size\n br %done, exit\n %data //not showing the full source here’,<br/> bytecode:<br/> ‘00000352630469000F6128616464726573732C75696E742969000C68656C6C6F776F726C64282969001568656C6C6F776F726C6428292E696E7465726E616C69001669656C6572742E6D656D6F72792E616C6C6F6361746569001269656C6572742E6D656D6F72792E66696C6C69001369656C6572742E73746F726167652E66696C6C69001C69656C6572742E6D656D6F72792E636F70792E746F2E6D656D6F727969001D69656C6572742E6D656D6F72792E636F70792E746F2E73746F7261676569001D69656C6572742E73746F726167652E636F70792E746F2E6D656D6F727969001E69656C6572742E73746F726167652E636F70792E746F2E73746F726167656900076465706F7369746700000000660000660001F600006800010002660000340265000402618003100304650004046194FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF03110304650004046180031003156500040565000101618208FC06640002660001618006660002F2000B000000001067157830096114030C093A31AB60BC640003660003F600010C660004620103F7036800020000660000340065000100F80003000000010161010251236101020102346101025324610102010244618005511661080752754601075561010201021851890D096A52654A010655514BF600010B660001620102F7026700030000660000610200F8000400010001016012610200F800040001000103610B005330610100010034618B646C726F57206F6C6C65480053406032640001660001F6000102670004000166000061010151126102010101230100226101015312F600010367000500036600001513650001035302610104010400610104030411640000660001F6000067000600036600001513650001035502610104010400610104030411640000660001F60000670007000366000015236500010351045314610105010500610105010511610105030522640000660001F60000670008000366000015236500010351045514610105010500610105010511610105030522640000660001F60000670009000366000015236500010354045314610105010500610105010511610105030522640000660001F6000067000A000366000015236500010354045514610105010500610105010511610105030522640000660001F60000’ }<br/> </span></pre><p id="6f0b" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">它将返回我们需要的字节码,`$ iele.createContract '并将字节码放在代码:</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="8149" class="lm jc ht li b fv ln lo l lp lq"> mallet&gt; iele.createContract({gas:1000000,value:0,code: ‘00000352630469000F6128616464726573732C75696E742969000C68656C6C6F776F726C64282969001568656C6C6F776F726C6428292E696E7465726E616C69001669656C6572742E6D656D6F72792E616C6C6F6361746569001269656C6572742E6D656D6F72792E66696C6C69001369656C6572742E73746F726167652E66696C6C69001C69656C6572742E6D656D6F72792E636F70792E746F2E6D656D6F727969001D69656C6572742E6D656D6F72792E636F70792E746F2E73746F7261676569001D69656C6572742E73746F726167652E636F70792E746F2E6D656D6F727969001E69656C6572742E73746F726167652E636F70792E746F2E73746F726167656900076465706F7369746700000000660000660001F600006800010002660000340265000402618003100304650004046194FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF03110304650004046180031003156500040565000101618208FC06640002660001618006660002F2000B000000001067157830096114030C093A31AB60BC640003660003F600010C660004620103F7036800020000660000340065000100F80003000000010161010251236101020102346101025324610102010244618005511661080752754601075561010201021851890D096A52654A010655514BF600010B660001620102F7026700030000660000610200F8000400010001016012610200F800040001000103610B005330610100010034618B646C726F57206F6C6C65480053406032640001660001F6000102670004000166000061010151126102010101230100226101015312F600010367000500036600001513650001035302610104010400610104030411640000660001F6000067000600036600001513650001035502610104010400610104030411640000660001F60000670007000366000015236500010351045314610105010500610105010511610105030522640000660001F60000670008000366000015236500010351045514610105010500610105010511610105030522640000660001F60000670009000366000015236500010354045314610105010500610105010511610105030522640000660001F6000067000A000366000015236500010354045514610105010500610105010511610105030522640000660001F60000’,arg:[]})<br/> Enter password:<br/> ‘0x71223273c1d6ed354980f3b009c463df4522fb2ccb7e4da86e9b1bdb0c8b8be1’<br/> mallet&gt; getReceipt(‘0x71223273c1d6ed354980f3b009c463df4522fb2ccb7e4da86e9b1bdb0c8b8be1’)<br/> { transactionHash: ‘0x71223273c1d6ed354980f3b009c463df4522fb2ccb7e4da86e9b1bdb0c8b8be1’, transactionIndex: 1, blockNumber: 337179, blockHash: ‘0x63d54af4025838a11439f4b9f9f28b4b5fd00c548519cbd23c41f04846cb6c0a’, cumulativeGasUsed: 294492, gasUsed: 272812, contractAddress: ‘0x3509b432d0011bde48eaebe1ab07c88183da3dcd’, logs: [], statusCode: ‘0x00’,<br/> status: 1,<br/> returnData: ‘0xd5943509b432d0011bde48eaebe1ab07c88183da3dcd’ }<br/></span></pre><h1 id="a05e" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">与合同互动</h1><p id="8ec9" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">我们使用“$ iele contractCall”来调用函数“' helloworld()'”</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="21d9" class="lm jc ht li b fv ln lo l lp lq"><br/> mallet&gt; iele.contractCall({to: ‘0x3509b432d0011bde48eaebe1ab07c88183da3dcd’, gas: 1000000, func: ‘helloworld()’, args: []})Enter password:’0x0908f144a705790b03e5500c46685cadfdf84f822133b38bd3358721139bc4cc’mallet&gt; getReceipt(‘0x0908f144a705790b03e5500c46685cadfdf84f822133b38bd3358721139bc4cc’){ transactionHash: ‘0x0908f144a705790b03e5500c46685cadfdf84f822133b38bd3358721139bc4cc’, transactionIndex: 0, blockNumber: 337190, blockHash: ‘0x0ce4faeb09e909168934ddcf6b72198c5459c06462c13ea5dc744a02a47866a2’, cumulativeGasUsed: 22338, gasUsed: 22338, contractAddress: null, logs: [], statusCode: ‘0x00’,<br/> status: 1,<br/> returnData: ‘0xd49348656c6c6f20576f726c64000000000000000b’ }<br/></span></pre><p id="44dc" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">并且约定返回“0xd 49348656 c6c6f 20576 f 726 c 640000000000000 b”，让翻译成字符串</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mf"><img src="../Images/03c797107cc3dad522dd6e39f0d6fc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFj7CB1Z3NFjRuoZ-w3e9g.png"/></div></div></figure><p id="083b" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">现在我们已经在cardano上部署了契约并与之交互。</p></div></div>    
</body>
</html>