<html>
<head>
<title>Fixing Transaction issue in Angular for Hyperledger fabric blockchain application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Hyperledger结构区块链应用程序修复Angular中的事务处理问题</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/fixing-transaction-issue-in-angular-for-hyperledger-fabric-blockchain-application-fe7e28a7bb6e?source=collection_archive---------4-----------------------#2018-06-21">https://medium.com/coinmonks/fixing-transaction-issue-in-angular-for-hyperledger-fabric-blockchain-application-fe7e28a7bb6e?source=collection_archive---------4-----------------------#2018-06-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="3338" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这篇文章指导你如何在angular前端修复<strong class="is hu"> Invoke Transaction </strong>按钮。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/a0a54cff5d65768a21d2f8acad893d94.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/1*G6_z_TR8ZEd1M3snw3_9aw.png"/></div></figure><p id="dbfa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">运行<strong class="is hu"> Yeoman后，</strong>为我们的业务网络生成angular app，我们可以看到我们可以创建、编辑和删除资产和参与者，但是<strong class="is hu">调用事务</strong>按钮不起作用。</p><p id="d052" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是因为invoke按钮没有正确映射到addTransactionModal。</p><p id="6ef9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">按照以下步骤解决问题。</p><h1 id="a0b2" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated"><strong class="ak">第一步:修复调用按钮</strong></h1><p id="6556" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">转到代码的最后一行。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff kz"><img src="../Images/19c3dd96cec920269bb671fb7eb2dce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOutBDvKHwjKd6A28d-KZw.png"/></div></div></figure><p id="fea7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以看到调用按钮不起作用，因为<strong class="is hu"> <em class="le">点击</em> </strong> <em class="le"> </em>功能没有描述，并且<strong class="is hu"> <em class="le">数据目标</em> </strong>缺失。所以用下面一行代替那一行。</p><pre class="jp jq jr js fq lf lg lh li aw lj dt"><span id="5904" class="lk jx ht lg b fv ll lm l ln lo">&lt;button (click)="resetForm();" type="button" class="btn btn-primary" data-toggle="modal" data-target="#addTransactionModal"&gt;</span><span id="40ec" class="lk jx ht lg b fv lp lm l ln lo">Invoke&lt;/button&gt;</span></pre><p id="7936" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当点击Invoke按钮时，它调用<strong class="is hu">addtransactionmode</strong>，该模式在<strong class="is hu">transaction.component.html文件的开头定义。</strong></p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lq"><img src="../Images/ac067e5baa81e20a82a306b219daf087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qT7QdDEM4IoaDvMN8CctKQ.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">addTransactionModal</figcaption></figure><p id="0c2d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它还调用resetForm()，这在<strong class="is hu">transaction . component . ts .</strong>中有描述。每当我们单击<strong class="is hu"> Invoke </strong>按钮时，它就会清空输入表单。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff lv"><img src="../Images/6bd3e3eee31560c321ad06158ad9c243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*CRQSqgNihfbtTRSR3q_W8Q.png"/></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">resetForm code</figcaption></figure><h1 id="60cc" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated"><strong class="ak">步骤2:固定额外输入</strong></h1><p id="7e06" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">保存代码文件后，当您运行它时，它就工作了。但是时间戳和transactionId也显示在表单中。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/0a581c9e76d6e3f5d2be30adf1b3710a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*OLesVIZmSTXZclumoU3Fcg.png"/></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Create Transaction</figcaption></figure><p id="5852" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要解决这个问题，我们应该在<strong class="is hu">transaction.component.html文件中找到这个表单代码。</strong></p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff lx"><img src="../Images/f0a7dad8807e9240bacec57fd04cb2a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jhZfpMA7KT2DwG3BZs5WA.png"/></div></div></figure><p id="4d5d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以看到，还为这个transactionId和时间戳定义了输入框。这些应由hyperledger结构生成，用户不应输入这些内容。因此，通过注释掉上面的行来解决这个问题。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="fe ff ly"><img src="../Images/75451e09267857a0cbf65aa0fc194777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lyJmfVomk_TLyGSigdQGpQ.png"/></div></div></figure><p id="9cea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我使用visual studio作为我的主要代码编辑器。选择所有的行，点击<strong class="is hu"> Ctrl+/ </strong>可以一次注释所有选中的行。保存文件并运行应用程序。</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="lz ma l"/></div></figure><p id="ce07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">瞧吧！！！</p><p id="04d1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">调用事务按钮现在工作正常。这花了我几乎几天的时间来找出为什么点击时按钮不工作。</p><p id="d514" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在你已经有了一个功能齐全的angular应用程序，适用于你的hyperledger模型。</p></div></div>    
</body>
</html>