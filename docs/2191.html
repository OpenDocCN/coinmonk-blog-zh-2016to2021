<html>
<head>
<title>Payman — A Tezos Batch Payment Tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">payman——Tezos批量支付工具</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/payman-a-tezos-batch-payment-tool-5d1276c045c4?source=collection_archive---------1-----------------------#2019-05-02">https://medium.com/coinmonks/payman-a-tezos-batch-payment-tool-5d1276c045c4?source=collection_archive---------1-----------------------#2019-05-02</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="fe ff iq"><img src="../Images/9fe889e28345f3e36f70f0c6c17cbade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ZfjnrMHTzIDwsRhdlnTZ4A.png"/></div></figure><h1 id="9020" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">摘要</h1><p id="5b80" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">如果你是目前或即将加入Tezos的面包师，本教程可能会有所帮助。本教程将重点介绍如何使用Payman向您的代表团支付批量付款。Tezos生态系统中已经有一些工具在做同样的事情，但是我相信Payman更容易使用，也更容易配置。</p><blockquote class="kt ku kv"><p id="7760" class="jv jw kw jx b jy kx ka kb kc ky ke kf kz la ki kj lb lc km kn ld le kq kr ks hm dt translated">Payman是麻省理工学院许可下的开源免费工具。</p></blockquote><h1 id="3e1d" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">动机</h1><p id="de7b" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">我制作Payman的主要动机是展示<a class="ae lf" href="https://github.com/DefinitelyNotAGoat/go-tezos" rel="noopener ugc nofollow" target="_blank"> go-tezos </a>的神秘能力。Payman underneath the hood使用的是我个人和许多贡献者一起开发的Golang Tezos库。作为一个额外的奖励，Payman本身使用GoLang并发模型比竞争对手更快地进行支付。</p><h1 id="df59" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">装置</h1><h2 id="e0fd" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">发布安装</h2><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="08c5" class="lg iy ht lz b fv md me l mf mg">wget <a class="ae lf" href="https://github.com/DefinitelyNotAGoat/payman/releases/download/v1.0.0/payman_linux_amd64" rel="noopener ugc nofollow" target="_blank">https://github.com/DefinitelyNotAGoat/payman/releases/download/v1.0.0/payman_linux_amd64</a><br/>sudo mv <a class="ae lf" href="https://github.com/DefinitelyNotAGoat/payman/releases/download/v1.0.0/payman_linux_amd64" rel="noopener ugc nofollow" target="_blank">payman_linux_amd64</a> /usr/local/bin/payman<br/>sudo chmod a+x /usr/local/bin/payman</span></pre><h2 id="6119" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">源安装</h2><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="52d3" class="lg iy ht lz b fv md me l mf mg"><a class="ae lf" href="https://github.com/DefinitelyNotAGoat/payman" rel="noopener ugc nofollow" target="_blank">git clone https://github.com/DefinitelyNotAGoat/payman</a><br/>cd payman<br/>git checkout tags/v1.0.0<br/>go build<br/>sudo mv /usr/local/bin/payman</span></pre><h1 id="ce83" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">使用</h1><h2 id="032f" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">先决条件</h2><p id="e47c" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">在我们深入研究Payman的不同功能之前，了解如何使用tezos-client CLI来获取您的钱包信息非常重要。Payman依赖于你支付的钱包的加密密钥和密码。Payman不会在任何地方保存这些信息，也不会恶意使用这些信息。你可以通过阅读代码来验证。</p><p id="b79b" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">当你使用Payman支付你的钱包凭证时，你一定要小心。就像任何支付工具，甚至是tezos-client本身一样，当您向工具提供凭证时，您的钱包将在工具运行时存在于内存中。在这一点上，请确保运行Payman时，你是从一个安全的计算机这样做。</p><p id="d1d8" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">获取您钱包的秘密密钥:</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="c63f" class="lg iy ht lz b fv md me l mf mg">./tezos-client show address &lt;alias&gt; -S</span></pre><p id="3c66" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">使用别名为<code class="eh mh mi mj lz b">payman1</code>的钱包使用alphanet执行此操作的示例:</p><figure class="lu lv lw lx fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="fe ff mk"><img src="../Images/093ae556cd946dc796783e36c990c20e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJsRmckciwDFgENNrDzd9Q.png"/></div></div></figure><h2 id="094c" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">生成报告</h2><p id="ec90" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">我想演示的第一件事是如何使用Payman生成一个支出报告，而不是实际支付。</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="4adc" class="lg iy ht lz b fv md me l mf mg">./payman \<br/>   report \<br/>   --delegate=&lt;delegate_public_key&gt; \<br/>   --cycle=&lt;cycle_number&gt; \<br/>   --node=&lt;address&gt; \<br/>   --port=&lt;port_number&gt; \<br/>   --fee=&lt;fee_as_float&gt;</span></pre><p id="98cb" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">上面的命令将调用<code class="eh mh mi mj lz b">payman report</code>,它使用传递的信息计算支出，然后通过打印一个表并在当前工作目录中生成一个包含当前数据和时间的csv文件来报告支出。</p><p id="5e9a" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">Alphanet的例子:</p><figure class="lu lv lw lx fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="fe ff mp"><img src="../Images/fa68544653eff0b5710f15bff53746e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bVqsu_U42_DvPzh1QC7hFA.png"/></div></div></figure><h2 id="a427" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">周期支出</h2><p id="eb5d" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">接下来我要演示的是支付特定周期的费用。</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="75e8" class="lg iy ht lz b fv md me l mf mg">./payman \<br/>   payout \<br/>   --delegate=&lt;delegate_public_key&gt; \    <br/>   --secret=&lt;encrypted_secret_to_wallet&gt; \<br/>   --password=&lt;password_to_encrypted_wallet&gt; \<br/>   --cycle=&lt;cycle_num&gt; \<br/>   --node=&lt;address&gt; \<br/>   --port=&lt;port_number&gt; \<br/>   --fee=&lt;fee_as_float&gt;</span></pre><p id="18a2" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">Alphanet的例子:</p><figure class="lu lv lw lx fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="fe ff mq"><img src="../Images/612dff6b997f9c6c1d6b1488636a2b14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Li4i_Fk155sNwdjyZVmg5w.png"/></div></div></figure><p id="586e" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">正如你从上面看到的，当你使用支付命令时，你将得到与使用报告命令相同的表，但是在此之前，你也将得到你成功支付的操作散列。</p><h2 id="1568" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">使用Reddit机器人</h2><p id="366a" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">要使用reddit机器人，您需要获得访问reddit的API。这超出了本教程的范围，但是通过一个简单的谷歌搜索，你就可以搞定了。要添加您的reddit访问权限以使用<code class="eh mh mi mj lz b">payman payout</code>创建机器人，您需要传递以下标志:</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="8b1c" class="lg iy ht lz b fv md me l mf mg">--reddit=&lt;reddit_agent_file&gt; \<br/>--reddit-title=&lt;pretitle_to_reddit_post&gt;</span></pre><p id="def6" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">代理文件包含您的reddit凭据，格式如下:</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="cdb4" class="lg iy ht lz b fv md me l mf mg">user_agent: "DNG_DELEGATION:BAKINGBOT:0.0.1 (by /u/magicaglet)"<br/>client_id: &lt;from_api_access&gt;<br/>client_secret: &lt;from_api_access&gt;<br/>username: "MagicAglet"<br/>password: &lt;password&gt;</span></pre><p id="a703" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">首先你会看到<code class="eh mh mi mj lz b">user_agent</code>，这是你分配给你的机器人的唯一id。然后从您的reddit帐户传递client_id和secret。用您的用户名替换MagicAglet，并添加您的密码。</p><p id="2b92" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">举个例子，我的reddit机器人使用了<code class="eh mh mi mj lz b">DefinitelyNotABot (Beep Bop Boop):</code>作为<code class="eh mh mi mj lz b">--reddit-title</code>，它发布了:</p><figure class="lu lv lw lx fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="fe ff mr"><img src="../Images/357f68004237ce020cc4893eeacefdb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wmCgC89FO66f83oe7_6UlQ.png"/></div></div></figure><h2 id="f6a8" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">使用推特机器人</h2><p id="ea90" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">twitter机器人将会很像reddit机器人。</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="9a57" class="lg iy ht lz b fv md me l mf mg">--twitter <br/>--twitter-title=&lt;pretitle_to_reddit_post&gt;</span></pre><p id="b9f1" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">上述标志将打开twitter bot，并在当前目录中查找包含api密钥的<code class="eh mh mi mj lz b">twitter.yml</code>配置文件。如果您希望<code class="eh mh mi mj lz b">twitter.yml</code>文件不在当前目录下，您可以通过<code class="eh mh mi mj lz b">--twitter-path=/path/to/file/</code>添加路径。</p><p id="7368" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">您的<code class="eh mh mi mj lz b">twitter.yml</code>文件必须如下所示:</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="4428" class="lg iy ht lz b fv md me l mf mg">consumerKey: ""<br/>consumerKeySecret: ""<br/>accessToken: ""<br/>accessTokenSecret: ""</span></pre><p id="8bbc" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">一旦你获得twitter开发者账户<a class="ae lf" href="https://developer.twitter.com/" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com/</a>的批准，你就可以很容易地找到上面的价值观。</p><p id="edfb" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">举个例子，我的twitter机器人，使用<code class="eh mh mi mj lz b">DefinitelyNotABot (Beep Bop Boop):</code>作为<code class="eh mh mi mj lz b">--twitter-title</code>，发布了:</p><figure class="lu lv lw lx fq iu fe ff paragraph-image"><div class="fe ff ms"><img src="../Images/2358b2b38ee434f1b257a6c21ce1f3a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*IljhUDn-MBnl9OtJIUrbEA.png"/></div></figure><h2 id="6514" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">支付服务器</h2><p id="f47b" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">最后，Payman功能的最后一部分是支付服务器。支付服务器将在以后的每个周期支付。你必须确保你的钱包为每一次支付提供资金，这是对所有支付服务器脚本的警告。</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="c329" class="lg iy ht lz b fv md me l mf mg">./payman \<br/>   payout \<br/>   --delegate=&lt;delegate_public_key&gt; \    <br/>   --secret=&lt;encrypted_secret_to_wallet&gt; \<br/>   --password=&lt;password_to_encrypted_wallet&gt; \<br/>   --cycle=&lt;cycle_num&gt; \<br/>   --node=&lt;address&gt; \<br/>   --port=&lt;port_number&gt; \<br/>   --fee=&lt;fee_as_float&gt; \<br/>   --serve</span></pre><p id="1110" class="pw-post-body-paragraph jv jw ht jx b jy kx ka kb kc ky ke kf kg la ki kj kk lc km kn ko le kq kr ks hm dt translated">注意<code class="eh mh mi mj lz b">--serve</code>命令。您仍将从正常支付中获得所有正常输出，包括csv日志。</p><h1 id="b9b1" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">结论</h1><p id="c6cd" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">如果你是一个面包师，你需要一个支付脚本，这可能是你正在寻找的。它易于使用，开发者友好，高度可配置。</p><h2 id="1831" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">路标</h2><ul class=""><li id="ea77" class="mt mu ht jx b jy jz kc kd kg mv kk mw ko mx ks my mz na nb dt translated">黑名单</li><li id="1334" class="mt mu ht jx b jy nc kc nd kg ne kk nf ko ng ks my mz na nb dt translated">纳税申报</li></ul><h2 id="2596" class="lg iy ht bd iz lh li lj jd lk ll lm jh kg ln lo jl kk lp lq jp ko lr ls jt lt dt translated">源代码</h2><ul class=""><li id="9895" class="mt mu ht jx b jy jz kc kd kg mv kk mw ko mx ks my mz na nb dt translated"><a class="ae lf" href="https://github.com/DefinitelyNotAGoat/payman" rel="noopener ugc nofollow" target="_blank">https://github.com/DefinitelyNotAGoat/payman</a></li></ul><blockquote class="nh"><p id="ad0d" class="ni nj ht bd nk nl nm nn no np nq ks ek translated"><a class="ae lf" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ns nt nu nv nw iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nr"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>