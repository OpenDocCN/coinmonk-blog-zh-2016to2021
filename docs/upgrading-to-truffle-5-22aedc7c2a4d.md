# å‡çº§åˆ° Truffle 5ðŸ¨

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/upgrading-to-truffle-5-22aedc7c2a4d?source=collection_archive---------5----------------------->

## æˆ‘ä»¬â¤ï¸çš„æ¯”ç‰¹å’Œæˆ‘ä»¬ðŸ˜ â€”æ€»ä½“è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªå…·æœ‰å¼ºå¤§åŠŸèƒ½çš„å¯é ç‰ˆæœ¬ã€‚

![](img/26328fb0a2f7ed9e1fce177a6ed99e5d.png)

[æ¾éœ² 5](https://github.com/trufflesuite/truffle/releases/tag/v5.0.0#user-content-what-s-new-in-truffle-v5-interacting-with-your-contracts-websockets) æ˜¯æ¾éœ²æ¡†æž¶çš„ä¸€æ¬¡å¤§ä¿®å’Œè¿”å·¥ã€‚ç›®å‰ä»¥å¤ªåŠé¢†åŸŸæœ‰å‡ ä¸ªç›¸äº’ç«žäº‰çš„æ¡†æž¶ï¼Œä½† Truffle æ˜¯å¸‚åœºé¢†å¯¼è€…ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ï¼Œæ‰€ä»¥ç»å¯¹å€¼å¾—ä¿ç•™ðŸ‘€åœ¨[æ¾éœ²æ€»éƒ¨](https://github.com/trufflesuite/truffle)å‘ç”Ÿçš„äº‹æƒ…ã€‚

æˆ‘ä»¬å·²ç»å¹¿æ³›ä½¿ç”¨ Truffle è¶…è¿‡ 18 ä¸ªæœˆäº†ï¼Œä»ŽåŽŸå§‹çš„ Web3JS åº“åˆ‡æ¢åˆ°å®Œæ•´çš„æž„å»ºç®¡é“ï¼Œæ”¯æŒæµ‹è¯•å¥—ä»¶é›†æˆã€CLI å·¥å…·ã€å¤šç½‘ç»œæ”¯æŒå’Œéƒ¨ç½²å·¥å…·ç­‰åŠŸèƒ½ã€‚

æˆ‘ä»¬å¯¹æ¾éœ² 4 æœ‰ä¸€äº›å°å°çš„ä¸æ»¡ï¼Œä½†å®ƒåœ¨åŽ»å¹´ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¥½çš„æœåŠ¡ï¼Œä½†éšç€æœ€è¿‘æ¾éœ² 5 çš„å‘å¸ƒï¼Œå‡çº§çš„æ¸´æœ›æ­£åœ¨æŽ¥è¿‘æˆ‘ä»¬ã€‚æˆ‘ä»¬åŽ»æ‰¾å®ƒï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬åœ¨é€šå¾€æ¾éœ² 5 å·çš„è·¯ä¸Šå‘çŽ°çš„ä¸€äº›æœ€å¥½å’Œæœ€å·®çš„éƒ¨åˆ†ã€‚

**Web3JS 1.0** âœ…

Truffle çŽ°åœ¨ä¸Žæœ€æ–°çš„ [Web3JS](https://web3js.readthedocs.io/en/1.0/index.html) æ†ç»‘åœ¨ä¸€èµ·ï¼Œè¿™æœ‰è®¸å¤šæ–°çš„è¡¥å……ï¼Œä½†æˆ‘ä»¬æœ€å–œæ¬¢çš„æ˜¯æˆ‘ä»¬åœ¨å¤„ç†äº‹åŠ¡æ—¶ä½¿ç”¨ [*PromiEvent*](https://web3js.readthedocs.io/en/1.0/callbacks-promises-events.html#promievent) æž„é€ çš„èƒ½åŠ›ï¼Œä¾‹å¦‚:

è¿™æ˜¯å¤„ç†å‘ç½‘ç»œæäº¤äº¤æ˜“çš„æ›´æµç•…çš„æ–¹å¼ã€‚ä»¥å‰æˆ‘ä»¬æ‰€æ‹¥æœ‰çš„åªæ˜¯ä¸€ä¸ªç®€å•çš„[æ‰¿è¯º](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise),ä¸å¹¸çš„æ˜¯ï¼Œå½“ä¸€ä¸ªäº¤æ˜“å¯èƒ½ä¼šæœ‰å‡ ç§çŠ¶æ€æ—¶ï¼Œè¿™ä¸ªæ‰¿è¯ºå¹¶ä¸æ€»æ˜¯åˆé€‚çš„ã€‚ä»¥å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ç±»ä¼¼ç›‘å¬äº‹ä»¶å’Œæ¯ X ç§’æ£€æŸ¥ä¸€æ¬¡è®¡æ—¶å™¨çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€è¿‘çš„å˜åŒ–ä½¿å®ƒæ„Ÿè§‰*æ­£ç¡®*ã€‚

**å¼‚æ­¥/ç­‰å¾…** âœ…

æ‰€æœ‰çš„ Web3 è°ƒç”¨éƒ½æ˜¯ async/awaitâ€”â€”æ— è®ºæ˜¯åœ¨æµ‹è¯•ã€è¿ç§»è¿˜æ˜¯ webapp ä¸­ä½¿ç”¨å®ƒä»¬â€”â€”è¿™ä½¿å¾—å¤§å¤šæ•°æƒ…å†µä¸‹çš„ç”Ÿæ´»å˜å¾—æ›´åŠ ç®€å•ã€‚

**é™„åŠ ç½‘ç»œé…ç½®** âœ…

é¢å¤–çš„é…ç½®é€‰é¡¹å¯¹æˆ‘ä»¬å¾ˆæœ‰ç”¨ï¼Œæˆ‘ä»¬é€šå¸¸å°†äº¤æ˜“å®šä»·åœ¨ä½Žç«¯ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸æ€»æ˜¯éœ€è¦å®ƒä»¬ç«‹å³é€šè¿‡ï¼Œä½¿ç”¨æ–°çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å¢žåŠ è¶…æ—¶å’Œé˜»æ­¢ç¡®è®¤ï¼Œä¾‹å¦‚:

è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ›´æœ‰ä¿¡å¿ƒè¿è¡Œè¿ç§»ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ—¶é—´ï¼Œè¿™åœ¨ Truffle 4 è¿ç§»ä¸­ç¡®å®žå‘ç”Ÿäº†ã€‚

**å›žå¤åŽŸå› å­—ç¬¦ä¸²** âœ…

ä¸€ä¸ªæœŸå¾…å·²ä¹…çš„æ–°åŠŸèƒ½â€”â€”ç»™ Solidity å’Œ Web3 å¸¦æ¥äº†æœ€æ–°çš„å˜åŒ–ã€‚æµ‹è¯•çŽ°åœ¨å¯ä»¥éªŒè¯å¤±è´¥åŽŸå› ï¼Œå¦‚æžœéœ€è¦ï¼Œå‰ç«¯é€»è¾‘å¯ä»¥æ˜¾ç¤ºè¿™ä¸ªåŽŸå› ã€‚

è¿™ä½¿æˆ‘ä»¬èƒ½å¤ŸåŠ å¼ºæµ‹è¯•ï¼Œå¹¶åœ¨ä¸€ä¸ªåœºåˆå‘çŽ°å‡é˜³æ€§ã€‚æ­¤å¤–ï¼Œåœ¨éœ€è¦æ—¶å°†è¿™äº›åŽŸå› å‘ˆçŽ°ç»™å‰ç«¯æ˜¯è¯Šæ–­æ½œåœ¨é—®é¢˜çš„ä¸€å¤§ä¼˜åŠ¿ã€‚

**bignome . js åˆ° BN.js** ðŸ˜ 

ä»Ž[bignome . js åˆ‡æ¢åˆ° BN.js](https://github.com/trufflesuite/truffle/releases/tag/v5.0.0#user-content-breaking-changes) çš„å˜åŒ–è®©æˆ‘ä»¬å¤§åƒä¸€æƒŠã€‚æˆ‘ä»¬å‡çº§æ‰€èŠ±çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨è¿›è¡Œæ•°åƒæ¬¡æµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•åˆ©ç”¨ BigNumber å¹¶å°†å®ƒä»¬è½¬æ¢ä¸º bn . jsâ€”â€”æˆ‘çŸ¥é“ web3 1.0 çš„å¼•å…¥è¿«ä½¿æˆ‘ä»¬è¿›è¡Œäº†è¿™ä¸€è¿ç§»ï¼Œæˆ‘åªæ˜¯å¸Œæœ›æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ¥å®Œæˆå®ƒã€‚æˆ‘è¿˜å‘çŽ°äº†å°† BN.js ä¸Ž ***bn-chai*** å’Œ **should.js** ä¸€èµ·ä½¿ç”¨çš„é—®é¢˜ï¼Œè¯¦è§[æ­¤å¤„](https://github.com/EthWorks/bn-chai/issues/2)ã€‚

**ä»Ž ASCII åˆ° HEX çš„æ˜¾å¼è½¬æ¢**ðŸ˜ 

è¿™ä¼¼ä¹Žæ˜¯ä¸€ä¸ªä¸å¿…è¦çš„æ”¹å˜ï¼Œå¤§æ¦‚ Truffle åœ¨è°ƒç”¨æ—¶çŸ¥é“æ–¹æ³•å‚æ•°å’Œç­¾åï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºæ˜¾å¼è½¬æ¢ä¸ºåå…­è¿›åˆ¶çš„æ–°è¦æ±‚ä¼¼ä¹Žæ˜¯ä¸€ä¸ªä¸å¿…è¦çš„æ”¹å˜ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒä¼šä»¥æŸç§æ–¹å¼ä¸ºæˆ‘è¿›è¡Œç±»åž‹è½¬æ¢ã€‚

> ç±»åž‹ä¸º`*bytes*`çš„å‡½æ•°å‚æ•°çŽ°åœ¨å¿…é¡»ä½¿ç”¨`[*web3.utils.asciiToHex()*](https://web3js.readthedocs.io/en/1.0/web3-utils.html#asciitohex)`è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—èŠ‚å­—ç¬¦ä¸²ã€‚

## ç»“è®º

æ€»ç»“æ¥è¯´ï¼Œæœ€æ–°çš„ Truffle 5 ç‰ˆæœ¬æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ”¹è¿›ï¼Œåº”è¯¥è¢«æ‰€æœ‰è¿è¡Œç”Ÿäº§å°±ç»ªçš„ Truffle éƒ¨ç½²çš„äººè€ƒè™‘ã€‚æ‰€æœ‰å‚ä¸Žçš„äººéƒ½åº”è¯¥ä¸ºè¿™ä¸ªç‰ˆæœ¬æŠ•å…¥çš„æˆåƒä¸Šä¸‡ä¸ªå°æ—¶å’Œæ‰¿è¯ºæ„Ÿåˆ°éª„å‚²ã€‚ä»¥ä¸Šåªæ˜¯ä¸€äº›æˆ‘ä»¬å–œæ¬¢çš„æ–°åŠŸèƒ½ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨æœªæ¥æŽ¢ç´¢å’Œåˆ©ç”¨æ›´å¤šçš„æ–°åŠŸèƒ½ã€‚

æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨å’Œæ”¯æŒæ¾éœ²ï¼Œå¹¶çœ‹åˆ°å®ƒéžå¸¸ç§¯æžçš„æœªæ¥ã€‚å®Œæ•´çš„å‘è¡Œè¯´æ˜Žå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°[https://github . com/truffle suite/truffle/releases/tag/v 5 . 0 . 0 # user-content-what-s-new-in-truffle-V5-interactive-with-your-contracts-web sockets](https://github.com/trufflesuite/truffle/releases/tag/v5.0.0#user-content-what-s-new-in-truffle-v5-interacting-with-your-contracts-websockets)

ç¥å¹³å®‰å’Œæ–°å¹´å¿«ä¹ï¼ [blockrocket.tech](http://blockrocket.tech)

åœ¨ twitter ä¸Šå…³æ³¨æˆ‘ä»¬â€” [@blockrockettech](https://twitter.com/blockrockettech)

æŠ¥åå‚åŠ æˆ‘ä»¬çš„ç¤¾åŒºèšä¼šâ€” [åŒºå—é“¾æ›¼å½»æ–¯ç‰¹](https://meetup.com/BlockchainManchesterMeetup)

> [åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­ç›´æŽ¥èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)[![](img/449450761cd76f44f9ae574333f9e9af.png)](http://bit.ly/2G71Sp7)

**Read todayâ€™s Top Story**