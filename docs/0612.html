<html>
<head>
<title>Splitting Transactions on the Tangle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Tangle上拆分交易</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/splitting-transactions-on-the-tangle-ed02676ccd74?source=collection_archive---------6-----------------------#2018-05-24">https://medium.com/coinmonks/splitting-transactions-on-the-tangle-ed02676ccd74?source=collection_archive---------6-----------------------#2018-05-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="4db2" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">不，我们不会吹毛求疵…</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/a4908ce39be4e26fa7e70c2015de8411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hReF0k4OTFW1xG8q.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Splitting the IOTA! Not as difficult as splitting the atom.</figcaption></figure><p id="d4fd" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">我最近加入了Tangle fy(T2)团队，帮助在Tangle上构建电子商务的未来。</p><p id="83f9" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">我们需要预先解决的一个关键挑战是实现一种在tangle上分割事务的方法。在Tanglefy的案例中，这是因为平台可以收取少量费用来维持运营，但人们可以想象出于其他原因需要分割交易。例如，您可以使用这种方法在产品售出时自动向供应商付款，或者两方或多方可以一起销售产品，每一方获得预定的收入份额。</p><p id="b298" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">现在我要注意的是，这是一种分割交易的<strong class="ka hu">集中式</strong>方法，到目前为止，还没有办法像其他分布式分类帐技术那样在IOTA上以不可信的方式做到这一点。Tanglefy上的卖家需要相信我们，我们不会拿超过预定的提成——这在目前并不是一个真正的问题，因为买家和卖家都需要相信我们，因为还有很多其他原因。我们确实希望，随着神秘项目q的出现，我们将能够扩展这个想法。</p><p id="03a5" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">在这篇文章中，我将概述我们计划如何在Tangle上实现这种事务拆分的基本架构。</p><p id="8424" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这种方式会完美吗？号码</p><p id="fd30" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这种方法会有一些安全缺陷吗？可能吧。</p><p id="5532" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这对我们俩来说都是一个学习的机会吗？是的。</p><p id="78ca" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">让我们开始吃吧。</p><h1 id="46fa" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">大致轮廓:</h1><p id="60ee" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">为了将tangle上的单个事务变成2个或更多，我们需要执行以下步骤。实际上，在此之前，让我们先记下一些名字:</p><ul class=""><li id="a86b" class="ls lt ht ka b kb kc ke kf kh lu kl lv kp lw kt lx ly lz ma dt translated">让我们将拆分交易的服务称为<strong class="ka hu">拆分网关</strong></li><li id="b726" class="ls lt ht ka b kb mb ke mc kh md kl me kp mf kt lx ly lz ma dt translated">我们将从<strong class="ka hu">买方</strong>到分割网关的第一笔交易称为<strong class="ka hu">输入交易</strong></li><li id="11a1" class="ls lt ht ka b kb mb ke mc kh md kl me kp mf kt lx ly lz ma dt translated">从分割网关到<strong class="ka hu">卖方</strong>的交易被称为<strong class="ka hu">输出交易</strong></li></ul><ol class=""><li id="beb8" class="ls lt ht ka b kb kc ke kf kh lu kl lv kp lw kt mg ly lz ma dt translated">买家查询<strong class="ka hu">分割网关</strong> API并获得他们应该支付的地址(<em class="mh">注意:这是一次性地址)！</em>。分割网关创建一个状态为<code class="eh mi mj mk ml b">pending</code>的新交易记录。</li><li id="6aea" class="ls lt ht ka b kb mb ke mc kh md kl me kp mf kt mg ly lz ma dt translated">买家通过tangle付款，然后通知<strong class="ka hu">分割网关</strong>付款已经完成，并附带一些识别元数据，如交易和捆绑包id</li><li id="ab4b" class="ls lt ht ka b kb mb ke mc kh md kl me kp mf kt mg ly lz ma dt translated">分割网关等待，直到交易在tangle上被确认，然后它根据定义的规则分割输入交易的价值(例如50-50，或70-30分割的更多)。然后，<strong class="ka hu">分离网关</strong>获取<strong class="ka hu">输出交易</strong>(例如Tanglefy和卖方)的每个地址，并将这些交易提交给tangle。</li><li id="2a1b" class="ls lt ht ka b kb mb ke mc kh md kl me kp mf kt mg ly lz ma dt translated">一旦所有的<strong class="ka hu">输出事务</strong>被批准，分离网关将事务状态更新为<code class="eh mi mj mk ml b">processed</code>。然后，它通知卖家发货，并通知买家交易已成功完成。</li></ol><p id="580a" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">有道理吗？我仍然需要一些帮助，所以我画了一张小图:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mm"><img src="../Images/7a63d9508c442fa53e27406861e0fe63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Mza0eomAgTFYOwqY.png"/></div></div></figure><h1 id="815f" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">可能的缺点:</h1><p id="c0a6" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">使用上述方法，我需要解决几个问题:</p><h2 id="e234" class="mn kw ht bd kx mo mp mq lb mr ms mt lf kh mu mv lh kl mw mx lj kp my mz ll na dt translated"><strong class="ak">如何处理故障？如果任何输出事务失败了怎么办？</strong></h2><p id="72bd" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">IOTA的好处是我们不会把钱浪费在费用上，但是我们仍然需要一种方法来容忍失败，并且可能回滚。也许在步骤1中，用户可以发送一个退款地址，如果任何下游支付失败，拆分网关可以支付到该地址。这种方法的一个问题是，拆分网关可能会超出预算，因为下游支付需要被撤销。</p><h2 id="eebb" class="mn kw ht bd kx mo mp mq lb mr ms mt lf kh mu mv lh kl mw mx lj kp my mz ll na dt translated"><strong class="ak">该方法依赖于第三方状态。</strong></h2><p id="9f76" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">是的，我知道。理想情况下，我们可以管理缠结本身的状态。我目前正在开发的原型使用MongoDB来跟踪输入和输出事务的状态。也许我们可以想出一个聪明的方法来维护Tangle上的状态，但是我们仍然需要一个数据库来管理用户登录、api密钥等等。</p><h2 id="6fce" class="mn kw ht bd kx mo mp mq lb mr ms mt lf kh mu mv lh kl mw mx lj kp my mz ll na dt translated"><strong class="ak"> DDOS </strong></h2><p id="3c46" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">我们不必对此过于担心，因为如果输入事务的值为0，我们可以简单地确保不启动下游事务。也许唯一需要担心的是大量的小额交易，但话说回来，这也是IOTA的一个要点。</p><h2 id="4121" class="mn kw ht bd kx mo mp mq lb mr ms mt lf kh mu mv lh kl mw mx lj kp my mz ll na dt translated"><strong class="ak">获取下游付款的地址</strong></h2><p id="bbaa" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">这是我有点担心的一个问题。因为地址重用预防措施<em class="mh">(注意我没有说问题</em>😉<em class="mh"> ) </em>，最好每次都能获得一个新的下游付款地址，以防卖家已经使用了那个地址。对于输入支付，这不是问题，因为我们可以用分割网关存储种子，但是如果输出交易的收款人之一从该地址消费，我们就有麻烦了。</p><p id="324f" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">一种选择是为每个收款人创建一个<strong class="ka hu">持有账户</strong>。然后收款人可以手动清空这个账户，每次给我们提供一个唯一的地址。另一种选择是，每个收款人运行一个小型服务器，该服务器可以根据他们的种子生成一次性地址。分割网关可以向服务器认证，并在每次需要支付时获得一次性地址。</p><p id="b475" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">我需要考虑一段时间。</p><h1 id="96dc" class="kv kw ht bd kx ky kz la lb lc ld le lf iz lg ja lh jc li jd lj jf lk jg ll lm dt translated">后续步骤:</h1><p id="573b" class="pw-post-body-paragraph jy jz ht ka b kb ln iu kd ke lo ix kg kh lp kj kk kl lq kn ko kp lr kr ks kt hm dt translated">如果我们能做到这一点，这种方法将是提高支付效率的一个很好的方法。虽然有些人可能会对这种想法感到不满，认为这是在本无感觉的DLT上增加费用，但它使新的应用程序和服务能够在微支付上存在。总得想办法让灯亮着，对吧？</p><p id="20a9" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">我甚至可以想象这些<em class="mh">分离网关</em>在某个阶段支付给其他<em class="mh">分离网关</em>——让复杂的资金路由变得超级简单，这一切都要感谢tangle。</p><p id="9d3c" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">正如我上面所说的，我已经在构建一个概念验证，来看看这种方法的可行性。我相信我会继续学习的。如果你有兴趣跟随，查看我们的回购<a class="ae ku" href="https://github.com/tanglefy" rel="noopener ugc nofollow" target="_blank">这里</a>。事实上，如果你想有所贡献，请随时联系我们！我们目前正在寻找各种各样的开发人员。</p><p id="f58c" class="pw-post-body-paragraph jy jz ht ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">我肯定我会修改这个设计很多次，我很喜欢你的建议和投入！欢迎在下面发表评论，或者向我提出一丁点的异议。</p><blockquote class="nb nc nd"><p id="eea2" class="jy jz mh ka b kb kc iu kd ke kf ix kg ne ki kj kk nf km kn ko ng kq kr ks kt hm dt translated">如果你喜欢这篇文章，给它一个❤️或👏或者随便你们这些疯猫现在怎么称呼它。</p><p id="47e3" class="jy jz mh ka b kb kc iu kd ke kf ix kg ne ki kj kk nf km kn ko ng kq kr ks kt hm dt translated">永远欢迎捐款！ <code class="eh mi mj mk ml b"><em class="ht">BJSLSJNPWSM9QLO9JYJAG9A9LLAUKZAQJGYZLNN9YMBNPCUUS9E9EYE9PIKIKNYHXAPNFAMDGXVIPVKIWGDUVDALPD</em></code></p></blockquote></div></div>    
</body>
</html>