<html>
<head>
<title>Solidity Code Compilation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可靠性代码编译</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/solidity-code-compilation-334dc3b3784e?source=collection_archive---------4-----------------------#2018-05-20">https://medium.com/coinmonks/solidity-code-compilation-334dc3b3784e?source=collection_archive---------4-----------------------#2018-05-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="4e50" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">Web3。JS web3.eth.compile.solidity替代品</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/89804f2f7412eb0bb4e164a019b15ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-NEfPFvS3AUtvm6M.png"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek"><a class="ae ju" href="https://lightrains.com/blogs/compile-deploy-solidity-contract-ethereum-console-geth-part-1" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><p id="9989" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在部署智能合约之前，我们需要为EVM(以太坊虚拟机)将可靠性代码编译成字节码。编译solidity代码后你得到了两个东西:</p><ul class=""><li id="38d8" class="kr ks ht jx b jy jz kb kc ke kt ki ku km kv kq kw kx ky kz dt translated">字节码/EVM码</li><li id="6ddc" class="kr ks ht jx b jy la kb lb ke lc ki ld km le kq kw kx ky kz dt translated">ABI(应用二进制接口)</li></ul><p id="45cc" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">字节码是EVM在区块链网络中执行代码。ABI定义了您与智能合约交互的操作。ABI的行动体现了智能合同的功能。</p><h2 id="4a3d" class="lf lg ht bd lh li lj lk ll lm ln lo lp ke lq lr ls ki lt lu lv km lw lx ly lz dt translated">坏消息</h2><p id="2f57" class="pw-post-body-paragraph jv jw ht jx b jy ma iu ka kb mb ix kd ke mc kg kh ki md kk kl km me ko kp kq hm dt translated">从1.5.9以上版本开始，Geth不支持编译可靠性代码特性(web3.eth.compile.solidity())，如果在Geth 1.5.9以上版本中使用web3.eth.compile.solidity()，将会得到错误异常。Metamask和TestRPC也不支持编译可靠性代码。</p><h2 id="f668" class="lf lg ht bd lh li lj lk ll lm ln lo lp ke lq lr ls ki lt lu lv km lw lx ly lz dt translated">可供选择的事物</h2><p id="ab2f" class="pw-post-body-paragraph jv jw ht jx b jy ma iu ka kb mb ix kd ke mc kg kh ki md kk kl km me ko kp kq hm dt translated">这里有两种方法可以解决这个问题。第一个使用Solc(solidity compiler)在本地直接编译Solidity代码。在localhost中安装Solc很容易。如果你的系统是ubuntu，可以用<strong class="jx hu"> apt-get </strong>安装Solc。如果你的是其他系统，你可以在这里引用<a class="ae ju" href="https://solidity.readthedocs.io/en/latest/installing-solidity.html" rel="noopener ugc nofollow" target="_blank"/>。</p><pre class="jj jk jl jm fq mf mg mh mi aw mj dt"><span id="664f" class="lf lg ht mg b fv mk ml l mm mn">sudo add-apt-repository ppa:ethereum/ethereum<br/>sudo apt-get update<br/>sudo apt-get install solc</span></pre><p id="fa95" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">安装Solc后可以编译solidity代码。</p><pre class="jj jk jl jm fq mf mg mh mi aw mj dt"><span id="3672" class="lf lg ht mg b fv mk ml l mm mn">solc [options] [input file …]<br/>solc — bin sample.sol &gt; sample.bin<br/>solc — abi sample.sol &gt; sample.abi<br/>solc — combined-json abi,bin sample.sol &gt; sample.json</span></pre><h2 id="79e9" class="lf lg ht bd lh li lj lk ll lm ln lo lp ke lq lr ls ki lt lu lv km lw lx ly lz dt translated">浏览器Solc</h2><p id="560d" class="pw-post-body-paragraph jv jw ht jx b jy ma iu ka kb mb ix kd ke mc kg kh ki md kk kl km me ko kp kq hm dt translated">第二种方式是browser-solc。你可以使用<a class="ae ju" href="https://github.com/ericxtang/browser-solc" rel="noopener ugc nofollow" target="_blank">浏览器-solc </a>在线编译solidity代码。浏览器-solc就像在线solc。我用浏览器写了一个简单的在线Solc网站。如果你感兴趣，你可以看看它是如何工作的。你可以把你的solidity代码放到左栏，然后选择你想编译的solc版本。输入编译代码按钮后可以看到字节码和ABI。源代码这里是<a class="ae ju" href="https://github.com/ksin751119/OnlineSolCompiler" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="ab fr cl mo"><img src="../Images/c021c1df80f351e58aedfcdf6e35726e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pwZ51Yph-NmNn1cb6LxlHg.png"/></div></figure></div><div class="ab cl mp mq hb mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hm hn ho hp hq"><p id="1ae2" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">参考:<br/>【1】<a class="ae ju" href="https://www.udemy.com/ethereum-dapp/" rel="noopener ugc nofollow" target="_blank">https://www.udemy.com/ethereum-dapp/</a><br/>【2】<a class="ae ju" href="https://github.com/ericxtang/browser-solc" rel="noopener ugc nofollow" target="_blank">https://github.com/ericxtang/browser-solc</a><br/>【3】<a class="ae ju" href="https://github.com/ksin751119/OnlineSolCompiler.git" rel="noopener ugc nofollow" target="_blank">https://github.com/ksin751119/OnlineSolCompiler.git</a><br/>【4】<a class="ae ju" href="https://solidity.readthedocs.io/en/latest/installing-solidity.html" rel="noopener ugc nofollow" target="_blank">https://solidity . readthedocs . io/en/latest/installing-solidity . html</a></p></div></div>    
</body>
</html>