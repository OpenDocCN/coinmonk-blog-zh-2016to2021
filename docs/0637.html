<html>
<head>
<title>Simple webpack 3 tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单webpack 3教程</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/simple-webpack-3-tutorial-3e8c5936681a?source=collection_archive---------1-----------------------#2018-05-29">https://medium.com/coinmonks/simple-webpack-3-tutorial-3e8c5936681a?source=collection_archive---------1-----------------------#2018-05-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="57ab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">几个月前，我开始使用webpack，我还记得让它运行起来所经历的痛苦。我从网上不同的教程中收集的信息非常混乱；其中一些已经过时，并给出了奇怪的npm错误，其他的正在进入webpack的高级功能。正是因为这个原因，我决定为和我有类似问题的人写一个非常简短的webpack 3教程来使用webpack。</p></div><div class="ab cl jo jp hb jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hm hn ho hp hq"><p id="3c4c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Webpack </strong>是一个模块捆绑器，它允许你用JS、HTML &amp; CSS编写的多个模块创建一个web应用程序。webpack的美妙之处在于它能够将整个应用程序及其依赖项捆绑在少数静态资产(即HTML/CSS/JS)中。</p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff jv"><img src="../Images/195c2e31092ae97bf81019c7eaef39d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94ZhvvcXzyzCwuUVjxljhA.png"/></div></div></figure><p id="3045" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以让我们开始吧！我们将从设置项目、配置webpack和构建一个简单的webpack 3应用程序开始。</p><h2 id="0103" class="kh ki ht bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb dt translated">项目设置</h2><ul class=""><li id="6350" class="lc ld ht is b it le ix lf jb lg jf lh jj li jn lj lk ll lm dt translated">创建一个空文件夹并初始化:<br/> <code class="eh ln lo lp lq b">&gt; mkdir simple-webpack &amp;&amp; cd simple-webpack &amp;&amp; npm init</code></li></ul><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff lr"><img src="../Images/f36dcb330a3a5de700b7c1315a765396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y4eR-UNRXa8cf5Su9DHp8w.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek">Hit ENTER multiple times to accept the default options.</figcaption></figure><ul class=""><li id="393f" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated">创建<code class="eh ln lo lp lq b">src</code>和<code class="eh ln lo lp lq b">dist</code>文件夹:<br/>和<code class="eh ln lo lp lq b">&gt; mkdir src dist src/css</code></li><li id="6158" class="lc ld ht is b it lz ix ma jb mb jf mc jj md jn lj lk ll lm dt translated">创建包含webpack所有配置的<code class="eh ln lo lp lq b">webpack.config.js</code>。<br/>T5】</li><li id="2680" class="lc ld ht is b it lz ix ma jb mb jf mc jj md jn lj lk ll lm dt translated">安装<code class="eh ln lo lp lq b">webpack</code>和<code class="eh ln lo lp lq b">webpack-dev-server</code> : <br/> <code class="eh ln lo lp lq b">&gt; npm install -D webpack@3 webpack-dev-server@2</code></li><li id="eeea" class="lc ld ht is b it lz ix ma jb mb jf mc jj md jn lj lk ll lm dt translated">让我们编辑<code class="eh ln lo lp lq b">package.json</code>文件来添加webpack和webpack-dev-server命令:</li></ul><figure class="jw jx jy jz fq ka"><div class="bz el l di"><div class="me mf l"/></div></figure><h2 id="48bc" class="kh ki ht bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb dt translated">配置webpack</h2><p id="a0e1" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb mg jd je jf mh jh ji jj mi jl jm jn hm dt translated">Webpack附带一个配置文件<code class="eh ln lo lp lq b">webpack.config.js</code>，其结构如下:</p><pre class="jw jx jy jz fq mj lq mk ml aw mm dt"><span id="e9cf" class="kh ki ht lq b fv mn mo l mp mq">var config = {<br/>    <strong class="lq hu">entry</strong>: { ... },<br/>    <strong class="lq hu">output</strong>: { ... },<br/>    module: {<br/>        <strong class="lq hu">rules</strong>: [ ...<br/>        ]<br/>    }<br/>}</span></pre><p id="b2bd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">配置文件主要有三个部分:<br/> - <strong class="is hu"> </strong> <code class="eh ln lo lp lq b">entry</code>:定义你的源文件在哪里。<br/>-<strong class="is hu">-</strong>-<code class="eh ln lo lp lq b">output</code>:是webpack创建捆绑资产的文件夹<br/> - <code class="eh ln lo lp lq b">rules</code>:包含适用于每种文件类型(即. js、.css，。scss等)</p><ul class=""><li id="41bd" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated">配置条目和输出非常简单，我们只需要指向我们之前创建的源文件夹和输出文件夹。</li></ul><pre class="jw jx jy jz fq mj lq mk ml aw mm dt"><span id="560c" class="kh ki ht lq b fv mn mo l mp mq">context: __dirname + '<strong class="lq hu">/src</strong>', // base folder for our source files<br/><strong class="lq hu">entry</strong>: {<br/>  app: './main.js',<br/>},<br/><strong class="lq hu">output</strong>: {<br/>  path: __dirname + '<strong class="lq hu">/dist</strong>',<br/>  filename: 'bundle.js',<br/>},</span></pre><p id="232a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于我们的教程，我们需要添加一些基本的装载器。加载器是一种工具，它负责预处理特定类型的文件(JS、CSS、…)并将其转换成javascript包。<br/>在我们的示例中，我们将使用3种基本装载机:</p><ul class=""><li id="552a" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated"><code class="eh ln lo lp lq b">babel-loader</code>对于JS文件:<br/> <code class="eh ln lo lp lq b">&gt; npm install -D babel-loader babel-core</code> <br/>让我们通过在<code class="eh ln lo lp lq b">webpack.config.js</code>的<code class="eh ln lo lp lq b">module/rules</code>部分添加一个规则来配置这个加载器</li></ul><pre class="jw jx jy jz fq mj lq mk ml aw mm dt"><span id="ec17" class="kh ki ht lq b fv mn mo l mp mq"> module: {<br/>  rule: [<br/>    {        <br/>      <strong class="lq hu">test</strong>: /<strong class="lq hu">\.</strong>js$/, // rule for .js files        <br/>      exclude: /node_modules/,        <br/>      <strong class="lq hu">loader</strong>: "babel-loader" // name of the loader   <br/>    }<br/>  ]<br/>}</span></pre><p id="502b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这非常简单，我们只需要提供一个正则表达式来匹配我们想要应用加载器的文件和加载器的名称。</p><ul class=""><li id="6751" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated"><code class="eh ln lo lp lq b">style-loader</code>和<code class="eh ln lo lp lq b">css-loader</code>为CSS文件:<br/> <code class="eh ln lo lp lq b">&gt; npm install -D css-loader style-loader</code></li></ul><pre class="jw jx jy jz fq mj lq mk ml aw mm dt"><span id="9bf3" class="kh ki ht lq b fv mn mo l mp mq">{        <br/>    <strong class="lq hu">test</strong>: /<strong class="lq hu">\.</strong>css$/,        <br/>    <strong class="lq hu">use</strong>: ['style-loader', // order is important !<br/>          'css-loader'] // this is loaded first<br/>}</span></pre><ul class=""><li id="dee5" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated"><code class="eh ln lo lp lq b">file-loader</code>加载HTML文件:<br/>T8】</li></ul><p id="aafe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是我们最后的<code class="eh ln lo lp lq b">webpack.config.js</code></p><figure class="jw jx jy jz fq ka"><div class="bz el l di"><div class="me mf l"/></div></figure><h2 id="6ed7" class="kh ki ht bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb dt translated">构建一个简单的应用程序</h2><p id="154b" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb mg jd je jf mh jh ji jj mi jl jm jn hm dt translated">这就是webpack配置，让我们继续创建由3个文件组成的基本应用程序:</p><ul class=""><li id="9f14" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated">主页. js</li></ul><figure class="jw jx jy jz fq ka"><div class="bz el l di"><div class="me mf l"/></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek">The first line is used to load the index.html file, and inject the css file on that file.</figcaption></figure><ul class=""><li id="adff" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated">index.html:</li></ul><figure class="jw jx jy jz fq ka"><div class="bz el l di"><div class="me mf l"/></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek">Notice we don’t import css in this file, webpack will include that in the bundle.js</figcaption></figure><ul class=""><li id="335f" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated">css/style.css</li></ul><pre class="jw jx jy jz fq mj lq mk ml aw mm dt"><span id="1cd3" class="kh ki ht lq b fv mn mo l mp mq">#hello {<br/>  font-weight: bold;<br/>}</span></pre><p id="0fa9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以，如果你已经正确地遵循了，这就是你的文件夹结构应该看起来的样子。</p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff mr"><img src="../Images/86b9404028c7a2ed605945c054edbbbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*w5L7j6ThIKhsbfn2f5xxPw.png"/></div></div></figure><h2 id="b971" class="kh ki ht bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb dt translated">构建应用程序</h2><p id="b643" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb mg jd je jf mh jh ji jj mi jl jm jn hm dt translated">让我们使用webpack来构建我们的应用程序。非常简单，我们只需要运行我们之前定义的脚本。</p><p id="95b8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Webpack处于开发模式<br/> </strong> <code class="eh ln lo lp lq b">&gt; npm run build</code>这将在开发模式下运行Webpack，并在<code class="eh ln lo lp lq b">./src</code>下编译我们的代码，并在<code class="eh ln lo lp lq b">./dist</code>下构建编译后的资产</p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff ms"><img src="../Images/5352c43480cd814e0f6d46e54b3c6106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsxtTi-9C1ZoHgxM8kQASw.png"/></div></div></figure><p id="e171" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">继续检查您的<code class="eh ln lo lp lq b">./dist</code>文件夹，您应该能够找到已编译的资产。</p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div class="fe ff mt"><img src="../Images/249e4dc93e79b1a262b1008aebde13a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*R2wxLKjLyb3HTche43fWqQ.png"/></div></figure><p id="50b3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">生产模式中的web pack<br/></strong>生产模式应用了一系列优化来使我们的目标文件变得更小，它还混淆了JS，使编译后的JS对其他人来说更难阅读。<br/> <code class="eh ln lo lp lq b">&gt; npm run build:prod</code></p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff mu"><img src="../Images/1bf3949b17badf4766300c26cb708d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8OW6QQ81x7zTmDXEvZZJA.png"/></div></div></figure><p id="48ca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你很好奇，想看看生产模式和开发模式有什么不同，可以随意对比一下<code class="eh ln lo lp lq b">./dist/bundle.js</code>文件的内容。</p><blockquote class="mv mw mx"><p id="c4fa" class="iq ir my is b it iu iv iw ix iy iz ja mz jc jd je na jg jh ji nb jk jl jm jn hm dt translated">这很好，但我如何在浏览器中看到我的应用程序？</p></blockquote><p id="c597" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当然，我们将使用<code class="eh ln lo lp lq b">webpack-dev-server</code>在浏览器上显示我们的应用程序。</p><p id="cb08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在浏览器中运行应用<br/> </strong> <code class="eh ln lo lp lq b">webpack-dev-server</code>是一个很好的开发工具，它不仅可以运行webpack，还可以提供文件，因此我们可以在web浏览器中查看应用。它还支持热重新加载，因此我们可以修改任何源文件，webpack将重新编译，自动捆绑它并刷新页面，而无需我们刷新浏览器。</p><p id="7765" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">说够了，让我们看看它的行动。</p><p id="0fd5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh ln lo lp lq b">&gt; npm run dev</code></p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff nc"><img src="../Images/4e5c4ab8842dbd3c361cf35d56a63261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qu8yawrWaQtM0H_UztLGBA.png"/></div></div></figure><p id="9866" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就这样，应用程序现在可以在网络浏览器上查看了！！在浏览器上输入<code class="eh ln lo lp lq b">http://localhost:8080</code>。</p><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff nd"><img src="../Images/1e5094a3425c7f4218bd027e292c26d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jzAAgDGiYj-LxJWFBSHwTA.png"/></div></div></figure><p id="15ad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们来试试<strong class="is hu">热重装</strong>功能；按如下方式更改<code class="eh ln lo lp lq b">style.css</code>并保存文件:</p><pre class="jw jx jy jz fq mj lq mk ml aw mm dt"><span id="01a0" class="kh ki ht lq b fv mn mo l mp mq">#hello {<br/>  font-weight: bold;<br/>  color: green;<br/>}</span></pre><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff ne"><img src="../Images/2c5e8fba40310377fa355f41c8663e86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lt5Xp4p4ZKVWXvTmuUR_Og.png"/></div></div></figure><p id="efce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这就对了，网页已经自动刷新，文本的样式也改变了。是不是很酷:)？</p></div><div class="ab cl jo jp hb jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hm hn ho hp hq"><h2 id="34b7" class="kh ki ht bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb dt translated">额外收获:使用Express server提供文件服务</h2><p id="9613" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb mg jd je jf mh jh ji jj mi jl jm jn hm dt translated">如果你和我一样，想在你的本地机器上用express server服务编译好的资产，那么继续阅读。Express是一个非常强大且易于使用的网络服务器。让我们安装它。</p><p id="a6b4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh ln lo lp lq b">&gt; npm install -D express@4</code></p><ul class=""><li id="4004" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated">让我们创建一个<code class="eh ln lo lp lq b">server.js</code>来从。<code class="eh ln lo lp lq b">/dist</code>文件夹</li></ul><figure class="jw jx jy jz fq ka"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="1814" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后，让我们使用生产模式构建我们的应用程序，并使用Express Server在本地提供服务。</p><ul class=""><li id="08e7" class="lc ld ht is b it iu ix iy jb lw jf lx jj ly jn lj lk ll lm dt translated"><code class="eh ln lo lp lq b">&gt; npm run build:prod</code></li><li id="c32c" class="lc ld ht is b it lz ix ma jb mb jf mc jj md jn lj lk ll lm dt translated"><code class="eh ln lo lp lq b">&gt; npm run start</code>将在<code class="eh ln lo lp lq b">http://localhost:3000</code>为应用提供服务</li></ul><figure class="jw jx jy jz fq ka fe ff paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="fe ff nf"><img src="../Images/ae4af00d5b2c66531d5548f02caf7526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeDCgr5FMS8WH8px_cAAKw.png"/></div></div></figure><p id="018c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就是这样！现在，您已经有了一个运行在本地机器上的生产级webpack应用程序。</p><p id="ab80" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">正如我提到的，这应该是一个关于webpack的非常基础的教程，还有更多的内容要介绍…如果我有时间，我可能会在不久的将来写第二篇文章介绍其他的加载器和插件。</p><p id="028c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">希望你喜欢这篇文章，如果你有任何问题，建议或如果你需要澄清，请随时评论:)</p><p id="e0c6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考资料:</p><p id="2261" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">Github</strong>:<a class="ae ng" href="https://github.com/bishesh16/simple-webpack" rel="noopener ugc nofollow" target="_blank">https://github.com/bishesh16/simple-webpack</a></p></div></div>    
</body>
</html>