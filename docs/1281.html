<html>
<head>
<title>Installing Lightning Network part 2: Here We Go Again</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安装闪电网络第2部分:又来了</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/installing-lightning-network-part-2-here-we-go-again-ed5a84f9cade?source=collection_archive---------0-----------------------#2018-08-10">https://medium.com/coinmonks/installing-lightning-network-part-2-here-we-go-again-ed5a84f9cade?source=collection_archive---------0-----------------------#2018-08-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/fc72a1be84010acf753b3ef176ff814a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CbAeUJEC8W7G9LYP.jpg"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek"><a class="ae ig" href="https://www.google.co.in/url?sa=i&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjYvsSh4eHcAhVPVH0KHZ6JCbEQjxx6BAgBEAI&amp;url=http%3A%2F%2Fbandwidthblog.com%2Fcryptocurrency%2Flightning-network%2F&amp;psig=AOvVaw0RMeGCKoZSF5iFTDTE3kST&amp;ust=1533965522185054" rel="noopener ugc nofollow" target="_blank">image source</a></figcaption></figure><div class=""/><p id="cd2f" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在<a class="ae ig" rel="noopener" href="/coinmonks/the-lightning-network-how-to-install-and-hopefully-make-money-6e3058e3fa7c">第一部分</a>中，我在<a class="ae ig" href="https://m.do.co/c/b33858702e30" rel="noopener ugc nofollow" target="_blank">数字海洋</a>水滴上安装了一个闪电节点。目标是探索闪电网络，看看是否有可能产生被动收入。通过在服务器上全天候运行Lightning node，并将付款从一个节点转发到另一个节点，就可以赚钱。您的节点连接得越好，通过您的节点传送的变更付款就越高。那么第一个月过得怎么样？</p><h1 id="8df8" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">一个月后</h1><p id="a4a5" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">虽然其他节点让<a class="ae ig" href="https://www.marc.cn/2018/06/the-lightning-network-a-huge-opportunity-to-learn-and-earn-money.html" rel="noopener ugc nofollow" target="_blank">一周赚了5%</a>，但至少在很短的一段时间内，我发现我根本没有赚到钱。没有。我有大约85个到其他节点的通道，但是没有一个事务是通过我的节点路由的。</p><p id="facd" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我遇到的第二个问题是，我无法连接到其他一些节点。最后，我注意到我创建的一些频道处于停滞状态，为此我在GitHub上开了一期。</p><p id="c70f" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">所以我创建了第二个节点来仔细检查我的节点是否工作正常。鉴于我在创建和资助渠道方面没有问题，我不认为会有什么大问题。然而，事实证明我的节点有严重的问题。我几乎解决了(大部分)问题。这是一次既令人兴奋又令人沮丧的旅程。</p><p id="14f5" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">设置第二个节点后，我发现的主要问题是我的两个节点无法相互连接，即使它们运行完全相同的软件。我为连接问题单独开了<a class="ae ig" href="https://github.com/ElementsProject/lightning/issues/1798" rel="noopener ugc nofollow" target="_blank">一期GitHub。</a></p><p id="afb4" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">长话短说:Lightning端口设置不正确，Lightning软件无法检测到这个问题。更糟糕的是，C-Lightning readme上的示例设置配置包含完全相同的错误:Lightning端口没有将传入数据转发到Lightning Docker容器。</p><p id="325e" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">好消息是，我确实找到了一种使用Docker Compose安装Lightning节点的更简单的方法。我还修改了<a class="ae ig" href="http://github.com/ElementsProject/lightning/" rel="noopener ugc nofollow" target="_blank"> Lightning自述文件</a>并创建了一个拉取请求。下面介绍如何<em class="lh">正确</em>设置闪电节点:</p><h1 id="f671" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">从第1部分升级</h1><p id="2ac4" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">如果你按照第1部分<a class="ae ig" rel="noopener" href="/coinmonks/the-lightning-network-how-to-install-and-hopefully-make-money-6e3058e3fa7c">中的说明安装你的闪电节点</a>，你将需要移除docker容器并移除配置文件。</p><ol class=""><li id="7511" class="li lj ij ji b jj jk jn jo jr lk jv ll jz lm kd ln lo lp lq dt translated">移除现有的码头集装箱</li><li id="7fdb" class="li lj ij ji b jj lr jn ls jr lt jv lu jz lv kd ln lo lp lq dt translated">删除bitcond和clightning配置文件</li><li id="b39c" class="li lj ij ji b jj lr jn ls jr lt jv lu jz lv kd ln lo lp lq dt translated">删除便捷访问脚本</li></ol><blockquote class="lw lx ly"><p id="cbb0" class="jg jh lh ji b jj jk jl jm jn jo jp jq lz js jt ju ma jw jx jy mb ka kb kc kd hm dt translated">您不需要(也不想)删除droplet，因为这将迫使您恢复备份，这是一个困难且有风险的过程(详见第1部分)。</p></blockquote><p id="5766" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">首先，登录您的droplet。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="e0c6" class="ml kf ij mh b fv mm mn l mo mp"># Log in.<br/>$ <strong class="mh ik">ssh root@</strong>&lt;droplet's ip-address&gt;<strong class="mh ik"> -i ~/.ssh/lightning</strong></span></pre><p id="9868" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">接下来，删除现有的con</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="fb86" class="ml kf ij mh b fv mm mn l mo mp"># Stop and remove the existing docker containers</span><span id="9f38" class="ml kf ij mh b fv mq mn l mo mp"># 1. Find the docker container id's.<br/>#    The -a argument also lists paused containers<br/>$ <strong class="mh ik">docker ps -a</strong></span><span id="8f84" class="ml kf ij mh b fv mq mn l mo mp"># 2. Stop the containers, using the id's found in step 1.<br/>#    Repeat this step for each container.<br/>$ <strong class="mh ik">docker stop</strong> &lt;container id&gt;</span><span id="58fd" class="ml kf ij mh b fv mq mn l mo mp"># 3. Remove the containers.<br/>#    Repeat this step for each container.<br/>$ <strong class="mh ik">docker rm </strong>&lt;container id&gt;</span></pre><p id="43e8" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">接下来，我们将删除比特币和照明配置文件</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="7f5a" class="ml kf ij mh b fv mm mn l mo mp"># 1. Remove the bitcoin config file.<br/>$ <strong class="mh ik">cd </strong><strong class="mh ik">/scratch/bitcoin/mainnet/bitcoind</strong><br/>$ <strong class="mh ik">rm bitcoin.conf</strong></span><span id="e0cb" class="ml kf ij mh b fv mq mn l mo mp"># 2. Remove the lightning config file.<br/>$ <strong class="mh ik">cd </strong><strong class="mh ik">/scratch/bitcoin/mainnet/clightning</strong><br/>$ <strong class="mh ik">rm config</strong></span></pre><p id="3d4f" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">并删除方便脚本。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="f2ea" class="ml kf ij mh b fv mm mn l mo mp"># 1. Remove the bitcoin convenience script.<br/>$ <strong class="mh ik">rm /bin/bitcoin-cli</strong></span><span id="a310" class="ml kf ij mh b fv mq mn l mo mp"># 2. Remove the lightning convenience script.<br/>$ <strong class="mh ik">rm </strong><strong class="mh ik">/bin/lightning-cli</strong></span></pre><p id="ae27" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">你现在可以重新安装比特币和闪电了。跳过全新安装章节，继续章节(重新)安装比特币和闪电。</p><h1 id="9854" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">全新安装</h1><p id="cec3" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">如果您没有使用第1部分中解释的步骤<a class="ae ig" rel="noopener" href="/coinmonks/the-lightning-network-how-to-install-and-hopefully-make-money-6e3058e3fa7c">安装Lightning节点，您将需要使用第1部分中的以下章节来设置您的节点:</a></p><ul class=""><li id="a8db" class="li lj ij ji b jj jk jn jo jr lk jv ll jz lm kd mr lo lp lq dt translated">建立数字海洋</li></ul><p id="97d1" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然后，登录您的droplet。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="ff4b" class="ml kf ij mh b fv mm mn l mo mp"># Log in.<br/>$ <strong class="mh ik">ssh root@</strong>&lt;droplet's ip-address&gt;<strong class="mh ik"> -i ~/.ssh/lightning</strong></span></pre><p id="f97d" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">接下来，我们将为bitcoind和clightning创建工作目录:</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="de38" class="ml kf ij mh b fv mm mn l mo mp"># 1. Create a working directory outside of the Docker image,<br/>#    so the working directory won't be overwritten when you <br/>#    update the Docker image with a new bitcoind version.<br/>$ <strong class="mh ik">mkdir -p /scratch/bitcoin/mainnet/bitcoind</strong></span><span id="0650" class="ml kf ij mh b fv mq mn l mo mp"># 2. Create a working directory outside of the Docker image,<br/>#    so the working directory won't be overwritten when you <br/>#    update the Docker image with a newer C Lightning version.<br/>$ <strong class="mh ik">mkdir -p /scratch/bitcoin/mainnet/clightning</strong></span></pre><h1 id="bc4c" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">(重新)安装比特币和闪电</h1><p id="78b1" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">所以有一个</p><ol class=""><li id="dfdc" class="li lj ij ji b jj jk jn jo jr lk jv ll jz lm kd ln lo lp lq dt translated">设置防火墙</li><li id="2374" class="li lj ij ji b jj lr jn ls jr lt jv lu jz lv kd ln lo lp lq dt translated">使用docker-compose创建Docker容器</li><li id="0509" class="li lj ij ji b jj lr jn ls jr lt jv lu jz lv kd ln lo lp lq dt translated">创建便捷访问脚本</li></ol><p id="b263" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">数字海洋水滴带有一个名为ufw的防火墙。我们将为进出流量开放端口8333(比特币)和9735(闪电)。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="cc82" class="ml kf ij mh b fv mm mn l mo mp"># 1. Open bitcoin port 8333.<br/>$ <strong class="mh ik">sudo ufw allow 8333</strong></span><span id="4521" class="ml kf ij mh b fv mq mn l mo mp"># 2. Open lightning port 9735.<br/>$ <strong class="mh ik">ufw allow 9735</strong><br/>$ <strong class="mh ik">ufw allow out 9735</strong></span><span id="10cc" class="ml kf ij mh b fv mq mn l mo mp"># 3. Check the firewall status.<br/>$ <strong class="mh ik">ufw status</strong></span></pre><p id="b01b" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果一切正常，ufw将报告类似于下面列表的内容(加上任何其他打开的端口)。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="fc0f" class="ml kf ij mh b fv mm mn l mo mp">To                         Action      From<br/>--                         ------      ----<br/>9735                       ALLOW       Anywhere<br/>8333                       ALLOW       Anywhere<br/>9735 (v6)                  ALLOW       Anywhere (v6)<br/>8333 (v6)                  ALLOW       Anywhere (v6)<br/>9735                       ALLOW OUT   Anywhere<br/>8333                       ALLOW OUT   Anywhere<br/>9735 (v6)                  ALLOW OUT   Anywhere (v6)<br/>8333 (v6)                  ALLOW OUT   Anywhere (v6)<br/>...</span></pre><p id="b25f" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">接下来，我们将创建bitcoind和clightning容器。与第1部分不同，这次我们将使用一个更容易使用的docker-compose脚本。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="3bab" class="ml kf ij mh b fv mm mn l mo mp"># 1. Create an empty docker-compose file in nano.<br/>$ <strong class="mh ik">cd ~</strong><br/>$ <strong class="mh ik">nano docker-compose.yml</strong></span><span id="28c7" class="ml kf ij mh b fv mq mn l mo mp"># 2. Copy and paste the docker-compose.yml code below<br/>#    and change the aliasname, rbg, and announce-addr</span><span id="2a26" class="ml kf ij mh b fv mq mn l mo mp"># 3. Save the edited file (Ctrl-X, Y, &lt;Enter&gt;)</span></pre><p id="38fc" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">docker-compose.yml的内容如下所示。将<code class="eh ms mt mu mh b">alias</code>设置为您选择的节点名称，将<code class="eh ms mt mu mh b">announce-addr</code>设置为droplet的ip地址，并可选地将<code class="eh ms mt mu mh b">rgb</code>值设置为将用于在Lightning explorers中显示您的节点的颜色。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="c0af" class="ml kf ij mh b fv mm mn l mo mp"><strong class="mh ik">version: "3"<br/>services:<br/>  bitcoind:<br/>    image: nicolasdorier/docker-bitcoin:0.16.0<br/>    container_name: bitcoind<br/>    environment:<br/>      BITCOIN_EXTRA_ARGS: |<br/>        testnet=0<br/>        whitelist=0.0.0.0/0<br/>        server=1<br/>        rpcuser=rpcuser<br/>        rpcpassword=rpcpass<br/>    expose:<br/>      - "8333"<br/>    ports:<br/>      - "0.0.0.0:8333:8333"<br/>    volumes:<br/>      - "/scratch/bitcoin/mainnet/bitcoind:/data"</strong></span><span id="4bf1" class="ml kf ij mh b fv mq mn l mo mp"><strong class="mh ik">  clightning_bitcoin:<br/>    image: elementsproject/lightningd<br/>    container_name: lightning<br/>    command:<br/>      - --bitcoin-rpcconnect=bitcoind<br/>      - --bitcoin-rpcuser=rpcuser<br/>      - --bitcoin-rpcpassword=rpcpass<br/>      - --network=bitcoin<br/>      - --alias=</strong>&lt;Lightning node name&gt;<br/>      <strong class="mh ik">- --rgb=FF4500<br/>      - --log-level=debug<br/>      - --announce-addr=</strong>&lt;droplet IP-address&gt;<strong class="mh ik">:9735<br/>    environment:<br/>      EXPOSE_TCP: "true"<br/>    expose:<br/>      - "9735"<br/>    ports:<br/>      - "0.0.0.0:9735:9735"<br/>    volumes:<br/>      - "/scratch/bitcoin/mainnet/clightning:/root/.lightning"<br/>      - "/scratch/bitcoin/mainnet/bitcoind:/etc/bitcoin"<br/>    links:<br/>      - bitcoind</strong></span></pre><blockquote class="lw lx ly"><p id="b2d3" class="jg jh lh ji b jj jk jl jm jn jo jp jq lz js jt ju ma jw jx jy mb ka kb kc kd hm dt translated">注意:docker-compose.yml文件基于<a class="ae ig" href="https://github.com/ElementsProject/lightning/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> C-Lightning自述文件</a>中的示例。不幸的是，最初的自述文件包含一个错误:容器没有公开端口。我已经创建了包含修复的<a class="ae ig" href="https://github.com/ElementsProject/lightning/pull/1816" rel="noopener ugc nofollow" target="_blank">拉请求#1816 </a>。</p></blockquote><p id="d677" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用docker-compose创建并运行容器:</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="5441" class="ml kf ij mh b fv mm mn l mo mp">$ <strong class="mh ik">docker-compose up</strong></span></pre><p id="7314" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Docker将创建并运行两个容器。bitcoind容器应该立即开始下载区块链。对于全新安装，这将需要几个小时。</p><p id="611e" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由于脚本不会退出，请打开一个新的终端窗口或标签，然后再次登录您的droplet。</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="9e47" class="ml kf ij mh b fv mm mn l mo mp"># Log in.<br/>$ <strong class="mh ik">ssh root@</strong>&lt;droplet's ip-address&gt;<strong class="mh ik"> -i ~/.ssh/lightning</strong></span></pre><p id="6ef6" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">添加一个方便的脚本来访问bitcoind容器:</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="fe0e" class="ml kf ij mh b fv mm mn l mo mp"># 1. Create script and edit script (see below).<br/>$ <strong class="mh ik">nano /bin/bitcoin-cli</strong></span><span id="88c2" class="ml kf ij mh b fv mq mn l mo mp"># 2. Copy and past script below</span><span id="43f8" class="ml kf ij mh b fv mq mn l mo mp"># 3. Save the edited file (Ctrl-X, Y, &lt;Enter&gt;)</span><span id="3cfb" class="ml kf ij mh b fv mq mn l mo mp"># 4. Make script executable.<br/>$ <strong class="mh ik">chmod +x /bin/bitcoin-cli</strong></span><span id="80b5" class="ml kf ij mh b fv mq mn l mo mp"># 4. Confirm script is working. This command shows the wallet info.<br/>$ <strong class="mh ik">bitcoin-cli getwalletinfo</strong></span></pre><p id="0787" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在Nano(上面的步骤3)中，编辑比特币cli脚本，如下所示:</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="8846" class="ml kf ij mh b fv mm mn l mo mp"><strong class="mh ik">#!/usr/bin/env bash<br/>docker exec lightning bitcoin-cli -rpcuser=rpcuser -rpcpassword=rpcpass "$@"</strong></span></pre><p id="887a" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为Lightning添加一个方便的脚本</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="29e3" class="ml kf ij mh b fv mm mn l mo mp"># 1. Create and edit script (See below).<br/>$ <strong class="mh ik">nano /bin/lightning-cli</strong></span><span id="ccdd" class="ml kf ij mh b fv mq mn l mo mp"># 2. Copy and paste the script below</span><span id="6e7f" class="ml kf ij mh b fv mq mn l mo mp"># 3. Save the edited file (Ctrl-X, Y, &lt;Enter&gt;)</span><span id="5bfd" class="ml kf ij mh b fv mq mn l mo mp"># 2. Make script executable.<br/>$ <strong class="mh ik">chmod +x /bin/lightning-cli</strong></span><span id="8ed5" class="ml kf ij mh b fv mq mn l mo mp"># 4. Confirm script is working. <br/>$ <strong class="mh ik">lightning-cli getinfo</strong></span></pre><p id="55b9" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在Nano中(上面的步骤2)，按如下方式编辑lightning-cli脚本:</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="0c04" class="ml kf ij mh b fv mm mn l mo mp"><strong class="mh ik">#!/usr/bin/env bash<br/>docker exec lightning lightning-cli "$@"</strong></span></pre><p id="c633" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">仅此而已。享受你的全功能闪电节点！</p><blockquote class="lw lx ly"><p id="9c46" class="jg jh lh ji b jj jk jl jm jn jo jp jq lz js jt ju ma jw jx jy mb ka kb kc kd hm dt translated">实际上，不完全是。您将看到比特币命令行界面脚本不起作用。由于您不会经常使用它，所以我将在这里保留已损坏的脚本。如果你看到哪里有问题，请留下评论，我会更新帖子。</p></blockquote><h1 id="9a4a" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">更多更好的连接</h1><p id="60ca" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">在<a class="ae ig" rel="noopener" href="/coinmonks/the-lightning-network-how-to-install-and-hopefully-make-money-6e3058e3fa7c">第1部分</a>中，我列出了几种找到要连接的节点的方法。在我发布了这篇文章之后，我遇到了<a class="ae ig" href="https://www.moneni.com/nodematch" rel="noopener ugc nofollow" target="_blank"> Moneni，它可以找到你的节点没有连接到的高度连接的节点。</a></p><h1 id="d1d4" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">错误和解决方案</h1><p id="30a6" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">虽然我解决了其他节点无法连接到我的节点的最大问题，但是还有我在<a class="ae ig" rel="noopener" href="/coinmonks/the-lightning-network-how-to-install-and-hopefully-make-money-6e3058e3fa7c">第1部分</a>中提到的尚未解决的主要问题:</p><h2 id="e1ba" class="ml kf ij bd kg mv mw mx kk my mz na ko jr nb nc ks jv nd ne kw jz nf ng la nh dt translated">通道等待锁定和通道关闭</h2><p id="0418" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">即使一个月后，一些频道仍然停留在<code class="eh ms mt mu mh b">awaiting lockin</code>或<code class="eh ms mt mu mh b">shutting down</code>状态。我已经打开了一个问题(<a class="ae ig" href="https://github.com/ElementsProject/lightning/issues/1776" rel="noopener ugc nofollow" target="_blank"> issue #1776 </a>)，但是还没有收到任何评论反馈。这些渠道的比特币已经无法访问一个多月了。</p><h1 id="210d" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">最后</h1><p id="381d" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">我将运行服务器几个星期，并会分享如果运行一个闪电节点实际上是有利可图的。</p><p id="f73c" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果你正在运行一个闪电节点，请考虑创建一个渠道给我，并资助该渠道。我很感激！</p><pre class="mc md me mf fq mg mh mi mj aw mk dt"><span id="9a4f" class="ml kf ij mh b fv mm mn l mo mp">$ <strong class="mh ik">lightning-cli connect 02060d0c8577cfc2a1962220a1cde4f623ca55ef80bd25e4be5a8b15fed78b11a3@178.62.237.239</strong></span></pre><h1 id="b9c8" class="ke kf ij bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">谢谢</h1><p id="e7e5" class="pw-post-body-paragraph jg jh ij ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hm dt translated">非常感谢里奇·米勒<a class="ae ig" href="https://twitter.com/richardkazuo_en" rel="noopener ugc nofollow" target="_blank">、</a><a class="ni nj gr" href="https://medium.com/u/868945ad81ef?source=post_page-----ed5a84f9cade--------------------------------" rel="noopener" target="_blank">阿瑟尼·耶雷明</a>、<a class="ni nj gr" href="https://medium.com/u/13184ff3ef9e?source=post_page-----ed5a84f9cade--------------------------------" rel="noopener" target="_blank">大卫·卡特</a>、<a class="ae ig" href="https://twitter.com/BTCicecream" rel="noopener ugc nofollow" target="_blank">李畅</a>以及C-Lightning团队。</p><p id="ca32" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="lh">需要一个数字海洋账户？按照这个推荐链接到</em> <a class="ae ig" href="https://m.do.co/c/b33858702e30" rel="noopener ugc nofollow" target="_blank"> <em class="lh">在数字海洋上创建一个帐户，并收到10美元</em> </a> <em class="lh">(我将收到25美元)。</em></p><p id="5915" class="pw-post-body-paragraph jg jh ij ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="lh">如果你喜欢这篇文章，并想阅读更多或表达你的欣赏，比特币总是在:3 badhnwyuk 54 zva 1 drj 6 jj 8 H2 bjz 63 RC</em></p><figure class="mc md me mf fq hv fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/a8ac6a9c6b65c47cd72c02a22b804bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*u6BOJPOC7VXmIL5jlK-jwA.png"/></div></figure></div></div>    
</body>
</html>