<html>
<head>
<title>How to Make a Survey with an EOS Smart Contract (1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨EOSæ™ºèƒ½åˆåŒè¿›è¡Œè°ƒæŸ¥(1)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/coinmonks/how-to-make-a-survey-with-an-eos-smart-contract-1-ac13852405c1?source=collection_archive---------2-----------------------#2018-08-03">https://medium.com/coinmonks/how-to-make-a-survey-with-an-eos-smart-contract-1-ac13852405c1?source=collection_archive---------2-----------------------#2018-08-03</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="a457" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">ä½¿ç”¨æ™ºèƒ½åˆåŒè¿›è¡ŒæŠ½æ ·è°ƒæŸ¥ã€‚</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/21c938a108d372867e1b53fd52fd7537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNa-6I77jfVpIIVkUrXibA.png"/></div></div></figure><p id="29db" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ä½ å¥½ï¼Œæˆ‘æ˜¯ITAMæ¸¸æˆå…¬å¸çš„æ²ˆåœ¨è´¤ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç»™å‡ºä¸€ä¸ªä½¿ç”¨æ™ºèƒ½åˆåŒè¿›è¡Œè°ƒæŸ¥çš„ä¾‹å­ã€‚</p><p id="bef7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è¯·è®°ä½ï¼Œè¿™ä¸ªç¤ºä¾‹æ˜¯ä¸ºäº†ä¿æŒä¸€å®šçš„ç®€å•æ€§ï¼Œå› æ­¤åœ¨å®é™…ä½¿ç”¨ä¸­å¯èƒ½ä¸å®ç”¨ï¼Œä½†æ˜¯å›ºå®šçš„è¦æ±‚éƒ½åŒ…æ‹¬åœ¨å†…ã€‚</p><h1 id="9228" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">å¼€å§‹</h1><p id="d622" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨å¤´è„‘ä¸­æŠŠå®ƒç”»å‡ºæ¥ã€‚</p><ol class=""><li id="77a9" class="ln lo ht jw b jx jy ka kb kd lp kh lq kl lr kp ls lt lu lv dt translated">åˆåŒåˆ›å»ºè€…è¾“å…¥è°ƒæŸ¥çš„æè¿°å’Œå››ä¸ªé€‰é¡¹çš„å†…å®¹ã€‚</li><li id="04e7" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated">æ™®é€šç”¨æˆ·å°†ä»–ä»¬çš„è´¦å·å’Œä»–/å¥¹é€‰æ‹©çš„å·ç å‘é€åˆ°åˆåŒä¸Šã€‚</li><li id="fe54" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated">æ‰€æœ‰ç”¨æˆ·éƒ½ä½¿ç”¨åˆåŒæ¥æŸ¥çœ‹ç»“æœã€‚</li><li id="47b3" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated">ä¸€èˆ¬ç”¨æˆ·ä¸€æ—¦é€‰æ‹©ï¼Œå°±ä¸èƒ½ä¿®æ”¹è°ƒæŸ¥ç»“æœã€‚</li></ol><p id="1d40" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">éœ€æ±‚åœ¨ç»„ç»‡çš„æ—¶å€™å·²ç»è¢«ç»“æ„åŒ–äº†ï¼Œä¸ºäº†ç®€å•åœ°ç»“æ„åŒ–ï¼Œä¼¼ä¹éœ€è¦æœ‰3ä¸ªã€‚æ„ä¸º2~3æ¡Œã€‚</p><h2 id="8f2f" class="mb kr ht bd ks mc md me kw mf mg mh la kd mi mj lc kh mk ml le kl mm mn lg mo dt translated"><strong class="ak">åŠ¨ä½œé…ç½®</strong></h2><p id="dac5" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">æ“ä½œé…ç½®å¦‚ä¸‹ã€‚</p><ol class=""><li id="45f1" class="ln lo ht jw b jx jy ka kb kd lp kh lq kl lr kp ls lt lu lv dt translated"><strong class="jw hu">è°ƒæŸ¥</strong>:è¿›å…¥æ–°çš„è°ƒæŸ¥</li><li id="fb96" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated"><strong class="jw hu">å¢åŠ </strong>:å‚åŠ è°ƒæŸ¥</li><li id="8028" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated"><strong class="jw hu">ç»“æœ</strong>:æŸ¥çœ‹è°ƒæŸ¥ç»“æœ</li></ol><h2 id="6bd8" class="mb kr ht bd ks mc md me kw mf mg mh la kd mi mj lc kh mk ml le kl mm mn lg mo dt translated"><strong class="ak">å·¥ä½œå°é…ç½®</strong></h2><p id="0783" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">è¯¥è¡¨ä¹Ÿè¢«é…ç½®æˆå¦‚ä¸‹3ä¸ªéƒ¨åˆ†ã€‚</p><ol class=""><li id="35bc" class="ln lo ht jw b jx jy ka kb kd lp kh lq kl lr kp ls lt lu lv dt translated">åŒ…å«è°ƒæŸ¥ä¿¡æ¯å’Œ4ä¸ªé€‰é¡¹çš„è¡¨æ ¼ã€‚</li><li id="04ef" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated">ä¿å­˜è°ƒæŸ¥å‚ä¸è€…åŠå…¶é€‰æ‹©çš„è¡¨æ ¼ã€‚</li><li id="6be6" class="ln lo ht jw b jx lw ka lx kd ly kh lz kl ma kp ls lt lu lv dt translated">æ”¶é›†å’Œä¿å­˜ç»“æœçš„è¡¨ã€‚</li></ol><p id="f184" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">æˆ‘è®¤ä¸ºå¦‚æœä½ æ··åˆ1å’Œ3åº”è¯¥ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ä¸ºäº†ç¡®ä¿ç»„ä»¶æ˜¯å¯è§çš„ï¼Œæˆ‘å°†åœ¨è¿™ä¸ªä¾‹å­ä¸­åˆ†å¼€ã€‚</p><pre class="jj jk jl jm fq mp mq mr ms aw mt dt"><span id="7917" class="mb kr ht mq b fv mu mv l mw mx">#include &lt;eosiolib/eosio.hpp&gt;<br/>#include &lt;eosiolib/print.hpp&gt;</span><span id="22d3" class="mb kr ht mq b fv my mv l mw mx">using namespace eosio;</span><span id="ea72" class="mb kr ht mq b fv my mv l mw mx">class survey : public eosio::contract <br/>{<br/>  public:<br/>    using contract::contract;</span><span id="4f88" class="mb kr ht mq b fv my mv l mw mx">/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action<br/>    void csurvey() <br/>    {<br/>      print("your call to csurvey");<br/>    }</span><span id="34f9" class="mb kr ht mq b fv my mv l mw mx">/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action<br/>    void add() <br/>    {<br/>      print("your call to add");<br/>    }</span><span id="a3cf" class="mb kr ht mq b fv my mv l mw mx">/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action<br/>    void result()<br/>    {<br/>      print("your call to result");<br/>    }<br/>};</span><span id="1ab3" class="mb kr ht mq b fv my mv l mw mx">EOSIO_ABI( survey, (csurvey) (add) (result) )</span></pre><p id="cad7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">åšä¸€ä¸ªç®€å•çš„éª¨æ¶ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¯ä¸ªåŠ¨ä½œä¸­è¾“å…¥ä¸€ä¸ªæµ‹è¯•ä»£ç æ‰“å°(â€œä½ å¯¹csurveyçš„è°ƒç”¨â€)ã€‚å‘å¸ƒåç¼–è¯‘æºä»£ç å¹¶æµ‹è¯•ã€‚(å…³äºåˆåŒçš„ç¼–åˆ¶ã€å‘å¸ƒå’Œæ‰§è¡Œæ–¹æ³•ï¼Œè¯·å‚è€ƒ<a class="ae mz" rel="noopener" href="/coinmonks/using-table-on-eos-smart-contract-291f98312b80">ä¸Šä¸€ç¯‡æ–‡ç« </a></p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff na"><img src="../Images/5004ca5d6943d31e39b418fdbc236b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0X6pYOaLS315C7EPZu0UA.png"/></div></div></figure><p id="4ff3" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ä½ å¯ä»¥çœ‹åˆ°æ¯ä¸ªåŠ¨ä½œéƒ½å·¥ä½œæ­£å¸¸ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><h1 id="f317" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated"><strong class="ak">å®æ–½</strong></h1><p id="a119" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">é¦–å…ˆï¼Œåˆ¶ä½œä¸€ä¸ªç”¨äºcsurveyåŠ¨ä½œçš„è¡¨æ ¼</p><pre class="jj jk jl jm fq mp mq mr ms aw mt dt"><span id="db06" class="mb kr ht mq b fv mu mv l mw mx">using namespace eosio;<br/>using namespace std;<br/>.<br/>.<br/>.<br/>/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> table surveycon i64<br/>    struct surveycon<br/>    {<br/>      account_name owner;<br/>      string question<br/>      string no1con;<br/>      string no2con;<br/>      string no3con;<br/>      string no4con;</span><span id="71a4" class="mb kr ht mq b fv my mv l mw mx">uint64_t primary_key() const {return owner;}</span><span id="3f2b" class="mb kr ht mq b fv my mv l mw mx">EOSLIB_SERIALIZE(surveycon,(owner)(question)(no1con)(no2con)(no3con)(no4con))<br/>    };<br/>typedef multi_index&lt;N(surveycon),surveycon&gt; _survey;</span></pre><p id="3acc" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ä¸ºäº†ä½¿ç”¨å­—ç¬¦ä¸²å˜é‡ï¼Œé¦–å…ˆä½¿ç”¨stdå‘½åç©ºé—´(ä½¿ç”¨å‘½åç©ºé—´STDï¼›).ç„¶åå°†æ™ºèƒ½åå®šæ‰€éœ€çš„è¡¨å®šä¹‰ä¸ºç»“æ„ã€‚è¿™äº›è¡¨å¿…é¡»æœ‰ä¸€ä¸ªç”¨äºæœç´¢çš„ä¸»é”®ã€‚ä¸»é”®ä¸èƒ½é‡å¤æˆ–ä¸ºç©ºã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬å°†åªè¿›è¡Œä¸€é¡¹è°ƒæŸ¥ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸»é”®ä½œä¸ºæ™ºèƒ½åˆçº¦çš„å¸æˆ·ï¼Œå¹¶ä¸”è°ƒæŸ¥çš„å‰©ä½™æ•°æ®answer1ã€answer2ã€answer3ã€answer4å·²è¢«å£°æ˜ä¸ºstringç±»å‹ã€‚</p><p id="0441" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç°åœ¨å®ç°action csurveyç‰¹æ€§ã€‚</p><pre class="jj jk jl jm fq mp mq mr ms aw mt dt"><span id="b8fc" class="mb kr ht mq b fv mu mv l mw mx">/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action<br/>    void csurvey(string question,string no1con,string no2con,string no3con,string no4con) <br/>    {<br/>      _survey survey(_self,_self);<br/>      <br/>      survey.emplace(_self,[&amp;](auto&amp; surveycon)<br/>      {<br/>        surveycon.owner=_self;<br/>        surveycon.question=question;<br/>        surveycon.no1con=no1con;<br/>        surveycon.no2con=no2con;<br/>        surveycon.no3con=no3con;<br/>        surveycon.no4con=no4con;<br/>      });</span><span id="dd18" class="mb kr ht mq b fv my mv l mw mx">return;<br/>    }</span></pre><p id="0205" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">é¦–å…ˆï¼Œå®šä¹‰è¦ä¼ é€’ç»™æ“ä½œçš„æ•°æ®ã€‚æˆ‘ä»¬å¾—åˆ°äº†å°†è¦è¾“å…¥åˆ°è¡¨ä¸Šçš„é—®é¢˜çš„å­—ç¬¦ä¸²æ•°æ®ï¼Œä»¥åŠ1~4çš„ç­”æ¡ˆã€‚ç°åœ¨å°†æ¥è‡ªcsurveyçš„æ•°æ®è¾“å…¥åˆ°è¡¨æ ¼ä¸­ã€‚ä¸ºäº†ç®€å•è¯´æ˜ï¼Œæˆ‘ä»¬æ²¡æœ‰è®¨è®ºå¯†é’¥å¤åˆ¶çš„é—®é¢˜ã€‚</p><p id="3bac" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">æ¥ä¸‹æ¥ï¼Œåˆ›å»ºç”¨æˆ·ç”¨æ¥ä¿å­˜æŠ•ç¥¨ä¿¡æ¯çš„è¡¨ã€‚</p><pre class="jj jk jl jm fq mp mq mr ms aw mt dt"><span id="a3e5" class="mb kr ht mq b fv mu mv l mw mx">/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> table surveydetail i64<br/>    struct surveydetail<br/>    {<br/>      account_name who;<br/>      uint64_t selnum;</span><span id="1b18" class="mb kr ht mq b fv my mv l mw mx">uint64_t primary_key() const {return who;}</span><span id="1abf" class="mb kr ht mq b fv my mv l mw mx">EOSLIB_SERIALIZE(surveydetail,(who)(selnum))<br/>    };<br/>    typedef multi_index&lt;N(surveydetail),surveydetail&gt; _items;</span></pre><p id="daf2" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è¦å­˜å‚¨è°ä¿å­˜äº†ä»€ä¹ˆå·ç ï¼Œè¯·å®šä¹‰whoå˜é‡å’Œæ‰€é€‰å·ç selnumã€‚æˆ‘ä½¿ç”¨who(å¸æˆ·)ä½œä¸ºä¸»é”®ï¼Œä½¿ç”¨_itemsä½œä¸ºç±»å‹ã€‚</p><p id="66ab" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç°åœ¨å®ç°æ·»åŠ æ“ä½œã€‚</p><pre class="jj jk jl jm fq mp mq mr ms aw mt dt"><span id="d1b7" class="mb kr ht mq b fv mu mv l mw mx">/// <a class="ae mz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action<br/>    void add(account_name user,uint64_t selnum) <br/>    {<br/>      require_auth(user);</span><span id="8dbb" class="mb kr ht mq b fv my mv l mw mx">_items item(_self,_self);</span><span id="3fe5" class="mb kr ht mq b fv my mv l mw mx">item.emplace(_self,[&amp;](auto&amp; surveydetail){<br/>        surveydetail.who=user;<br/>        surveydetail.selnum=selnum;<br/>      });<br/>    return;<br/>    }</span></pre><p id="e39e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è¿™æ®µä»£ç ä¸ä¸Šé¢çš„csurveyæ“ä½œæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚è¿™å¯èƒ½å¾ˆå¥‡æ€ªï¼Œå› ä¸ºæˆ‘ä»¬æ‰€åšçš„åªæ˜¯å°†è°ƒæŸ¥å‚ä¸æƒ…å†µå­˜å‚¨åˆ°è¡¨ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„ä»£ç ä¸­æ·»åŠ è¯¥åŠŸèƒ½ã€‚ä»£ç é¡¶éƒ¨çš„require_auth (user)æ¯”è¾ƒéªŒè¯å¥‘çº¦çš„æ‰§è¡Œæƒé™æ˜¯å¦ä¸ç”¨æˆ·ä¸€è‡´ã€‚å› ä¸ºeosioå…è®¸æ‚¨è°ƒç”¨å¤šä¸ªå¸æˆ·çš„æ‰§è¡Œæƒé™çš„æ“ä½œï¼Œæ‰€ä»¥å¾ˆéš¾åŒºåˆ†æ‰§è¡ŒåˆåŒçš„æƒé™å’Œæ‰§è¡Œæ“ä½œçš„æƒé™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°æ¥æ£€æŸ¥åœ¨å°†å¿…è¦å¸æˆ·çš„åç§°æ”¾å…¥æ“ä½œçš„æ•°æ®ä¸­ä¹‹åï¼Œæ˜¯å¦ä½¿ç”¨å¿…è¦çš„å¸æˆ·æ‰§è¡Œæƒé™æ‰§è¡Œäº†åˆåŒã€‚</p><p id="dce9" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç”±äºç¯‡å¹…åŸå› ï¼Œæ­¤å†…å®¹å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç»§ç»­ã€‚</p></div><div class="ab cl nb nc hb nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hm hn ho hp hq"><h2 id="1133" class="mb kr ht bd ks mc md me kw mf mg mh la kd mi mj lc kh mk ml le kl mm mn lg mo dt translated">ITAMæ¸¸æˆæ˜¯ä¸€ä¸ªé€æ˜çš„æ¸¸æˆç”Ÿæ€ç³»ç»Ÿçš„åŒºå—é“¾å¹³å°</h2><p id="5d69" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">è®¢é˜…ITAMæ¸¸æˆå¹¶æ¥æ”¶æœ€æ–°ä¿¡æ¯ã€‚</p><p id="4717" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">è®¿é—®ITAMæ¸¸æˆç”µè®¯ï¼Œå°±ITAMæ¸¸æˆå’ŒåŒºå—é“¾è¿›è¡Œäº¤æµã€‚ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥åŠ å…¥ï¼ğŸ‘«</p><p id="9423" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">ç½‘å€:<strong class="jw hu"/><a class="ae mz" href="https://itam.games" rel="noopener ugc nofollow" target="_blank">https://itam . games</a><strong class="jw hu"><br/></strong>ç”µæŠ¥:<a class="ae mz" href="https://t.me/itamgames" rel="noopener ugc nofollow" target="_blank">https://t.me/itamgames</a></p></div></div>    
</body>
</html>