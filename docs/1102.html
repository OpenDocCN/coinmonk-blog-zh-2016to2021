<html>
<head>
<title>The Many Ways To Deploy Your Smart Contract To Rinkeby Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将智能合同部署到Rinkeby Network的多种方式</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/the-many-ways-to-deploy-your-smart-contract-to-rinkeby-network-38cadf7b20be?source=collection_archive---------1-----------------------#2018-07-22">https://medium.com/coinmonks/the-many-ways-to-deploy-your-smart-contract-to-rinkeby-network-38cadf7b20be?source=collection_archive---------1-----------------------#2018-07-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="3907" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了理解这篇文章，您需要了解<a class="ae jo" rel="noopener" href="/coinmonks/write-a-simple-contract-on-top-of-ethereum-92b543594e84">如何创建智能契约</a>、<a class="ae jo" rel="noopener" href="/coinmonks/test-a-smart-contract-with-truffle-3eb8e1929370">将其部署到测试网络</a>以及<a class="ae jo" rel="noopener" href="/coinmonks/build-a-simple-and-unstoppable-decentralized-web-application-dapp-aa8d08e35f9c">如何使用元掩码</a>。在本文中，我将向您展示如何将您的智能合约部署到Rinkeby network。那么什么是Rinkeby网络呢？这就像以太坊的舞台网络。虽然您的测试网络只存在于您的计算机中，但Rinkeby是一个测试网络，但它存在于全球。也许你可以说它“生活”在云中，这样住在雅加达的你可以让你住在波哥大的朋友轻松测试你的智能合约。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/64c0c01a851d94446d1ea107acc97bd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ES_8Yt7HmrTCWydopLSzaQ.jpeg"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Upload your smart contract to Rinkeby network. Photo credit: henrique from Unsplash.</figcaption></figure><p id="7975" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本地测试网络中，你从一开始就得到100以太网。在林克比，你没有。你必须“乞求”以太。转到<a class="ae jo" href="https://faucet.rinkeby.io/" rel="noopener ugc nofollow" target="_blank">https://水龙头. rinkeby.io </a>。然后创建一个包含你的公共以太坊地址的推文或公开帖子(在脸书或谷歌+)。记住，在<a class="ae jo" rel="noopener" href="/coinmonks/build-a-simple-and-unstoppable-decentralized-web-application-dapp-aa8d08e35f9c">上一篇文章</a>中，您通过在Metamask中“创建一个帐户”来创建一个新的以太坊公共地址。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/da36c7a096c6b0fbc09c78aba573837c.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*jigBMqarHlTB6U8PXY3QCQ.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Go to Rinkeby Network in your Metamask software.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff kg"><img src="../Images/1e177974725aa6231d6f43bb6d447fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*TX_sm2ez-tDBnMxwLqEPag.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Once you are in Rinkeby network, you can get the public address easily.</figcaption></figure><p id="ff43" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦你创建了一个包含你的以太坊公共地址的社交媒体帖子，将你的社交媒体帖子的链接提交到Rinkeby认证水龙头表格。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff kh"><img src="../Images/f1a332d247dd9c3c6a91f5c74e000705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*1glO7Mf1i12bRAgIrrCRfQ.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">An example of social media post containing Ethereum public address. Here I use Google+. But you can use Facebook or Twitter.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ki"><img src="../Images/f4e0b196be71f501e9370471f6447246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*63_abcaRDniFYEc_I12jmw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Submit your public link of social media post in Rinkeby form.</figcaption></figure><p id="b099" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后根据你的选择，你可以在等待8小时或1天或3天时得到3或7.5或18.75个乙醚。</p><p id="fe47" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我们将智能合约发布到Rinkeby network之前，我们需要一个智能合约。你可以使用任何你知道的智能合约。或者如果你懒，你可以用我的。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="a370" class="ko kp ht kk b fv kq kr l ks kt">pragma solidity ^0.4.19;</span><span id="ffc1" class="ko kp ht kk b fv ku kr l ks kt">contract Auction {<br/>  address public manager;<br/>  address public seller;<br/>  uint public latestBid;<br/>  address public latestBidder;</span><span id="7b33" class="ko kp ht kk b fv ku kr l ks kt">  constructor() public {<br/>    manager = msg.sender;<br/>  }</span><span id="6ae0" class="ko kp ht kk b fv ku kr l ks kt">  function auction(uint bid) public {<br/>    latestBid = bid * 1 ether; //1000000000000000000;<br/>    seller = msg.sender;<br/>  }</span><span id="7eda" class="ko kp ht kk b fv ku kr l ks kt">  function bid() public payable {<br/>    require(msg.value &gt; latestBid);</span><span id="0e93" class="ko kp ht kk b fv ku kr l ks kt">    if (latestBidder != 0x0) {<br/>      latestBidder.transfer(latestBid);<br/>    }<br/>    latestBidder = msg.sender;<br/>    latestBid = msg.value;<br/>  }</span><span id="0efa" class="ko kp ht kk b fv ku kr l ks kt">  function finishAuction() restricted public {<br/>    seller.transfer(address(this).balance);<br/>  }</span><span id="e466" class="ko kp ht kk b fv ku kr l ks kt">  modifier restricted() {<br/>    require(msg.sender == manager);<br/>    _;<br/>  }</span><span id="e7ec" class="ko kp ht kk b fv ku kr l ks kt">  function kill() restricted public { selfdestruct(manager); }<br/>}</span></pre><p id="0312" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是我在上一篇文章中开发的智能合约，增加了一点:一个杀死智能合约的方法(该方法被命名为<em class="kv"> kill </em>),这样如果你不再需要它，你就有办法清理你的智能合约。</p><p id="8b43" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">有几种方法可以将您的智能合同上传到Rinkeby network。我们将逐一讨论它们。</p><h1 id="3b08" class="kw kp ht bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">元掩码</h1><p id="9299" class="pw-post-body-paragraph iq ir ht is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hm dt translated">打开<a class="ae jo" href="https://remix.ethereum.org," rel="noopener ugc nofollow" target="_blank">https://remix.ethereum.org，</a>点击左上角的+按钮新建一个文件。将其命名为<em class="kv"> Auction.sol </em>。粘贴要部署的智能合约。然后点击<em class="kv">运行</em>选项卡，再选择<em class="kv">注入Web3 </em>环境。它将自动使用您的元掩码帐户(确保您已首先登录您的元掩码)。然后点击“<em class="kv">部署</em>按钮。最后，单击浏览器上的Metamask图标，批准向Rinkeby network发布您的智能合约。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ly"><img src="../Images/03595ad2e657ce498a3c2b7e6e0d455a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBQhvI6utdU-5_eiDyx_7Q.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Deploy your smart contract in Remix.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lz"><img src="../Images/c9e2b710458698e7569176b79f5888f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_hvW7WRtw3buNgEc4RKbiQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Click Metamask icon after clicking “Deploy” button.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ma"><img src="../Images/37db39793dfbfb409578e517aed17c5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7EWJxiob1dH4sM00xSEbhQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Approve the launching of your smart contract.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ly"><img src="../Images/625c6725b68b8233cffbe05c9aad28b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eXZelc_VMpRy-Cr6hTtGRw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">You can get your smart contract address by clicking that “small copy” paste icon.</figcaption></figure><p id="9b4e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">给这个智能合约地址就可以让全世界的人玩你的智能合约。以下是如何做到这一点，以防你在波哥大的朋友想玩你的智能合同。她可以在她的浏览器中打开Remix，然后将您的智能合同地址放入标签为“<em class="kv">从地址</em>加载合同”的表格中，然后在地址处单击“<em class="kv">按钮。</em></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mb"><img src="../Images/e136a6b1159fa9fa17bf7ea6bd4969d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zbU4m9h63pqZbsZmuWccdQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Load smart contract from the address.</figcaption></figure><p id="ab1f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这不是唯一的方法。您可以通过其他方式以编程方式玩智能合约，如使用geth客户端、Truffle控制台和使用代码(Solidity)。我只是给你一个简单的方法来测试已经部署的智能合同。</p><h1 id="163a" class="kw kp ht bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">松露配蘑菇</h1><p id="1286" class="pw-post-body-paragraph iq ir ht is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hm dt translated">通过这种方式，您将使用Truffle框架通过Infura部署智能合约。基本上Infura就是某人带API的以太坊节点。免费注册。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ly"><img src="../Images/9efa220d6f8d6849a2f5ae0903ba4595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A60BnOmS2E7kN32MMdwicw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Infura website.</figcaption></figure><p id="7509" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当他们给你发邮件时，你会得到API密匙。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mc"><img src="../Images/8bb5373276acf16e5f87af06a5382f15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cFSs0rQ0q7CdTG0loRf1Xw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Your API key from Infura.</figcaption></figure><p id="8f8f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在使用Truffle框架开发你的智能合约。</p><p id="8328" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">转到空目录。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="9a62" class="ko kp ht kk b fv kq kr l ks kt">truffle init</span></pre><p id="a274" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将智能合同粘贴到<em class="kv"> contracts/Auction.sol </em>中。然后编译它。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="6ec5" class="ko kp ht kk b fv kq kr l ks kt">truffle compile</span></pre><p id="d2d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">安装<em class="kv">truffle-HD wallet-provider</em>模块。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="405d" class="ko kp ht kk b fv kq kr l ks kt">npm install --save truffle-hdwallet-provider</span></pre><p id="abda" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在<em class="kv">migrations/2 _ deploy _ contracts . js</em>中创建部署合同文件。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="82a8" class="ko kp ht kk b fv kq kr l ks kt">var Auction = artifacts.require(“Auction”);</span><span id="6eda" class="ko kp ht kk b fv ku kr l ks kt">module.exports = function(deployer) {<br/>  deployer.deploy(Auction);<br/>};</span></pre><p id="37ad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">编辑<em class="kv"> truffle.js </em>。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="d8fb" class="ko kp ht kk b fv kq kr l ks kt">var HDWalletProvider = require(“truffle-hdwallet-provider”);</span><span id="ebef" class="ko kp ht kk b fv ku kr l ks kt">var mnemonic = “aquaman superman batman shazam flash wonderwoman greenlantern ironman captainamerica hulk blackwidow thanos”;</span><span id="73ea" class="ko kp ht kk b fv ku kr l ks kt">module.exports = {<br/>  // See &lt;<a class="ae jo" href="http://truffleframework.com/docs/advanced/configuration" rel="noopener ugc nofollow" target="_blank">http://truffleframework.com/docs/advanced/configuration</a>&gt;<br/>  // to customize your Truffle configuration!<br/>  networks: {<br/>    rinkeby: {<br/>      provider: function() {<br/>        return new HDWalletProvider(mnemonic,     “<a class="ae jo" href="https://rinkeby.infura.io/thisistheapikey" rel="noopener ugc nofollow" target="_blank">https://rinkeby.infura.io/thisistheapikey</a>");<br/>      },<br/>      network_id: 1<br/>    }<br/>  }<br/>};</span></pre><p id="7fef" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">用来自Infura的API密钥更改“<em class="kv">thisitheapikey</em>”。并且改变你的记忆术。你的记忆术是怎么来的？您可以从Metamask获得它，如下图所示。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff md"><img src="../Images/3e6ab06dbd14f96464a8ca73335a7a76.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*6xqwDjLhe-b5YF7p3ixJLA.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Click Settings.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff me"><img src="../Images/8038a147894c621b2d1e750187ac2c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*dqYDuthVXTTu6R_CNLmx-Q.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Click “Reveal Seed Words” button.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff mf"><img src="../Images/0aa3d60ddab92534960a3a6e86ba10e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*y5PSUgSqd1P_i1GKEoP-zw.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Submit password.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff mf"><img src="../Images/9485dce95d3c3f28ae49a9c11e93eddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*fL1o-14X1QmdjXHKbwPtwA.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Your seed words.</figcaption></figure><p id="e05c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后运行迁移。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="0dd5" class="ko kp ht kk b fv kq kr l ks kt">truffle migrate -f 2 --network rinkeby</span></pre><p id="d580" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">“-f 2”意味着您只运行<em class="kv">migrations/2 _ deploy _ contracts . js</em>的迁移。你不运行<em class="kv">migrations/1 _ initial _ migration . js</em>。如果要运行所有迁移，请省略if。</p><p id="3bec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您将得到如下输出:</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="e409" class="ko kp ht kk b fv kq kr l ks kt">Running migration: 2_deploy_contracts.js<br/> Replacing Auction…<br/> … 0xe473f0879bc0cbec1e9b72cf881e07a148d733753b20d9795d549a7903b5d39d<br/> Auction: 0x85db00a8660b4c006bcdeb0d221f2e6c3860c66d<br/>Saving artifacts…</span></pre><p id="39fd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">智能合约的地址是“拍卖:”一词之后的地址。是0x 85 db 00 a 8660 b4c 006 BC deb 0d 221 F2 E6 c 3860 c66d。</p><p id="1b43" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">命令的执行将会挂起。别担心。地址显示给你后，你可以Ctrl+C。</p><h1 id="939a" class="kw kp ht bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">带有Infura的web3.js</h1><p id="8765" class="pw-post-body-paragraph iq ir ht is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hm dt translated">如果你没有/不能使用Truffle framework，这里介绍如何使用Solidity编译器和Web3库将你的智能合约部署到Rinkeby network。</p><p id="5a77" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在新目录中，可以选择将其初始化为Node.js项目。它是可选的。你不一定要做，但建议你这样做。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="85ea" class="ko kp ht kk b fv kq kr l ks kt">npm init</span></pre><p id="257d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后安装必要的工具(Solidity编译器、web3和truffle hdwallet提供程序)。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="68d7" class="ko kp ht kk b fv kq kr l ks kt">npm install --save web3@1.0.0-beta.34 truffle-hdwallet-provider solc</span></pre><p id="36df" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于<em class="kv"> web3 </em>我们必须使用测试版，因为上一个稳定版太原始了。<em class="kv"> solc </em>模块是Solidity编译器。如果使用Truffle，就不需要手动安装这个模块。<em class="kv"> web3 </em>模块是负责部署智能合约的库。</p><p id="7f37" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">把你的智能合约，<em class="kv"> Auction.sol </em>放到<em class="kv"> contracts/Auction.sol </em>里。创建一个文件来编译此智能协定。将其命名为<em class="kv"> compile.js </em>，并将其放在项目目录的根目录下。它应该与<em class="kv">合同</em>目录在同一个目录下。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="751c" class="ko kp ht kk b fv kq kr l ks kt">//compile.js<br/>const path = require(‘path’);<br/>const fs = require(‘fs’);<br/>const solc = require(‘solc’);</span><span id="bd54" class="ko kp ht kk b fv ku kr l ks kt">const auctionPath = path.resolve(__dirname, ‘contracts’, ‘Auction.sol’);<br/>const source = fs.readFileSync(auctionPath, ‘utf8’);</span><span id="05c0" class="ko kp ht kk b fv ku kr l ks kt">module.exports = solc.compile(source, 1).contracts[‘:Auction’];</span></pre><p id="712d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后创建一个文件来部署智能合约。将其命名为<em class="kv"> deploy.js </em>，并将其放在项目目录的根目录下。它应该和<em class="kv">合同</em>目录在同一个目录下。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="0d23" class="ko kp ht kk b fv kq kr l ks kt">//deploy.js<br/>const HDWalletProvider = require(‘truffle-hdwallet-provider’)<br/>const Web3 = require(‘web3’);<br/>const { interface, bytecode } = require(‘./compile’);</span><span id="a16d" class="ko kp ht kk b fv ku kr l ks kt">const provider = new HDWalletProvider(<br/>  ‘aquaman superman batman shazam flash wonderwoman greenlantern ironman captainamerica hulk blackwidow thanos’,<br/>  ‘<a class="ae jo" href="https://rinkeby.infura.io/thisistheapikey'" rel="noopener ugc nofollow" target="_blank">https://rinkeby.infura.io/thisistheapikey'</a><br/>);</span><span id="5265" class="ko kp ht kk b fv ku kr l ks kt">const web3 = new Web3(provider);</span><span id="076b" class="ko kp ht kk b fv ku kr l ks kt">const deploy = async () =&gt; {<br/>     const accounts = await web3.eth.getAccounts();</span><span id="2dae" class="ko kp ht kk b fv ku kr l ks kt">console.log(‘Attempting to deploy from account’, accounts[0]);</span><span id="771a" class="ko kp ht kk b fv ku kr l ks kt">const result = await new web3.eth.Contract(JSON.parse(interface))<br/> .deploy({ data: ‘0x’ + bytecode})<br/> .send({ gas: ‘1000000’, from: accounts[0] });</span><span id="2cc7" class="ko kp ht kk b fv ku kr l ks kt">console.log(‘Contract deployed to’, result.options.address);<br/>};</span><span id="8121" class="ko kp ht kk b fv ku kr l ks kt">deploy();</span></pre><p id="5ce7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是基于来自<a class="ae jo" href="https://github.com/StephenGrider" rel="noopener ugc nofollow" target="_blank"> Stephen Grinder </a>的代码。这是他的功劳。我对它做了一点修改，所以它可以与最新版本的<em class="kv">松露-高清钱包-供应商</em>模块一起工作。</p><p id="2783" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当你使用<em class="kv"> solc </em>模块编译代码时，你会得到接口和字节码。然后我们用<em class="kv"> web3 </em>连接到提供商。从这个供应商那里，<em class="kv"> web3 </em>得到账户。最后，<em class="kv"> web3 </em>拥有部署智能合约的方法。</p><p id="8546" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">像这样执行它。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="559a" class="ko kp ht kk b fv kq kr l ks kt">node deploy.js</span></pre><p id="2ea5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该命令也会挂起。一旦获得智能合约地址，只需Ctrl+C即可。很好。没问题。</p><h1 id="cd39" class="kw kp ht bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">Geth</h1><p id="6e3e" class="pw-post-body-paragraph iq ir ht is b it lt iv iw ix lu iz ja jb lv jd je jf lw jh ji jj lx jl jm jn hm dt translated">这是将智能合约部署到Rinkeby网络的最困难的方法。从以太坊网站安装geth软件。<a class="ae jo" href="https://geth.ethereum.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://geth.ethereum.org/downloads/</a></p><p id="ab91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Geth是以太坊网站的一款软件。它可以用来采矿以获得乙醚。但是在这里，我们使用它来部署智能合约。下载并安装它。使用的操作系统不同，说明也会有所不同。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mg"><img src="../Images/28c278b7f4394b2746cbce1aabe7bf94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Li9PxEEj8wX6FVGaO7vRhQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Geth website.</figcaption></figure><p id="c057" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后像这样发射geth。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="ddfc" class="ko kp ht kk b fv kq kr l ks kt">geth --rinkeby --datadir /opt/data/ethereumdata</span></pre><p id="23a7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Geth有很多功能。当您像这样运行它时，这意味着，它将节点完全同步到rinkeby网络，并将节点数据放入<em class="kv"> /opt/data/ethereumdata </em>目录。在将智能合同部署到Rinkeby network之前，您需要这样做。获得完全同步的节点需要一段时间。在我的情况下，一个晚上是需要的时间长度。</p><p id="f34f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，您需要将您在Metamask中创建的帐户导入geth软件。在这种情况下，你不用记忆法。你用私钥。从元掩码导出私钥。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff me"><img src="../Images/5f4cfea58d37e53f7505226d0bc7c104.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*1NMJOuC1lGIKtHYVRoEoJw.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Choose “Export Private Key” menu.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff md"><img src="../Images/a01ee490b92c0ed3b523d380dfd3634d.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*7GHER6yEcKV82dH4DoVMTQ.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Submit password before exporting your private key.</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff mh"><img src="../Images/897f058d93e24d7a91e4e69e158d3314.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*BFLD356LOl1960wLNfu_ZQ.png"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Save it as a file.</figcaption></figure><p id="8617" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将您的私钥文件命名为<em class="kv"> privatekeyfile.txt </em>。像这样导入到geth软件。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="b2e1" class="ko kp ht kk b fv kq kr l ks kt">geth --rinkeby account import privatekeyfile.txt --datadir /opt/data/ethereumdata</span></pre><p id="346c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您将被要求在geth软件中设置密码来保护此帐户。</p><p id="f1b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，您使用geth软件的控制台连接到该软件。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="4ca7" class="ko kp ht kk b fv kq kr l ks kt">geth --rinkeby --verbosity 0 console --datadir /opt/data/ethereumdata</span></pre><p id="3be7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在它的控制台中(在geth控制台中，<strong class="is hu">而不是操作系统控制台中的</strong>，您将智能合约的字节码设置为变量。让我们将变量命名为<em class="kv">字节码</em>。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="c2e0" class="ko kp ht kk b fv kq kr l ks kt">bytecode = “your_smart_contract_bytecode”</span></pre><p id="955c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">那么，如何获得智能合约字节码呢？这取决于你如何编制你的智能合同。例如，如果你使用“<em class="kv">松露编译</em>”进行编译，那么你的字节码位于<em class="kv">build/contracts/auction . JSON</em>中。打开文件。找到JSON键“字节码”。它指向智能契约的字节码。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mi"><img src="../Images/edd06d8378a3fa990cd6a0ca0d85fc18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QyKYViN7mVcH5JgsFSKvtg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Your smart contract bytecode.</figcaption></figure><p id="65f2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在同一个geth控制台中，解锁您的帐户。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="90e0" class="ko kp ht kk b fv kq kr l ks kt">personal.unlockAccount(eth.accounts[0], “password”)</span></pre><p id="8505" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从元掩码导入帐户时，用您的密码替换“<em class="kv">密码</em>”。然后把你的智能合约上传到Rinkeby网络。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="6c6f" class="ko kp ht kk b fv kq kr l ks kt">tx = eth.sendTransaction({from: eth.accounts[0], data: bytecode, gas: 500e3})</span></pre><p id="8dd0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后检查是否已经上传。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="c762" class="ko kp ht kk b fv kq kr l ks kt">web3.eth.getTransactionReceipt(tx)</span></pre><p id="ce85" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果已经部署，您将得到如下输出。</p><pre class="jq jr js jt fq kj kk kl km aw kn dt"><span id="b638" class="ko kp ht kk b fv kq kr l ks kt">{<br/> blockHash: “0xfed7dcbd5e8c68e17bff9f42cd30d95588674497ae719a04fd6a2ff219bb001d”,<br/> blockNumber: 2534930,<br/> contractAddress: “0xbd3ffb07250634ba413e782002e8f880155007c8”,<br/> cumulativeGasUsed: 1071323,<br/> from: “0x1db565576054af728b46ada9814b1452dd2b7e66”,<br/> gasUsed: 458542,<br/> logs: [],<br/> logsBloom: “0x00000...”,<br/> status: “0x1”,<br/> to: null,<br/> transactionHash: “0x1a341c613c2f03a9bba32be3c8652b2d5a1e93f612308978bbff77ce05ab02c7”,<br/> transactionIndex: 4<br/>}</span></pre><p id="918d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您的合同地址由JSON键“<em class="kv"> contractAddress </em>”指向。</p><p id="a21c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">记住</strong>当你想通过geth软件部署智能合约时，你必须先同步节点。如果只是轻度同步，是否可以将智能合约部署到Rinkeby network，我不确定。现在，只需完全同步节点。</p><blockquote class="mj"><p id="e21b" class="mk ml ht bd mm mn mo mp mq mr ms jn ek translated">加入Coinmonks <a class="ae jo" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jo" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae jo" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="ko kp ht bd kx mt mu mv lb mw mx my lf jb mz na lj jf nb nc ln jj nd ne lr nf dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="ng nh ht is b it lt ix lu jb ni jf nj jj nk jn nl nm nn no dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae jo" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae jo" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae jo" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae jo" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="b359" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated">最佳<a class="ae jo" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated">杠杆代币的终极指南</li><li id="f1ee" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="https://coincodecap.com/zero-fee-crypto-exchanges" rel="noopener ugc nofollow" target="_blank"> 7大最佳零费用密码交易平台</a></li><li id="5aa5" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="https://coincodecap.com/best-online-casinos" rel="noopener ugc nofollow" target="_blank">最佳网上赌场</a> | <a class="ae jo" rel="noopener" href="/coinmonks/futures-trading-bots-5a282ccee3f5">期货交易机器人</a></li><li id="3d0e" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="https://coincodecap.com/what-are-decentralized-exchanges" rel="noopener ugc nofollow" target="_blank">分散交易所</a> | <a class="ae jo" href="https://coincodecap.com/bitbns-fip" rel="noopener ugc nofollow" target="_blank">比特FIP </a></li><li id="5cf9" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="https://coincodecap.com/buy-crypto-with-credit-card" rel="noopener ugc nofollow" target="_blank">用信用卡购买密码的10个最佳地点</a></li><li id="3d13" class="ng nh ht is b it np ix nq jb nr jf ns jj nt jn nl nm nn no dt translated"><a class="ae jo" href="https://coincodecap.com/5-best-crypto-trading-bots-in-canada" rel="noopener ugc nofollow" target="_blank">加拿大最佳加密交易机器人</a> | <a class="ae jo" href="https://coincodecap.com/bybit-binance-moonxbt" rel="noopener ugc nofollow" target="_blank"> Bybit vs币安</a></li></ul></div></div>    
</body>
</html>