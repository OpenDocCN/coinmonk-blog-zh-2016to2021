<html>
<head>
<title>Introducing TheButton.co — a Simple Ethereum Game</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍TheButton.co——一个简单的以太坊游戏</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/introducing-thebutton-co-a-simple-ethereum-game-b1b03fe1e8ce?source=collection_archive---------7-----------------------#2018-07-17">https://medium.com/coinmonks/introducing-thebutton-co-a-simple-ethereum-game-b1b03fe1e8ce?source=collection_archive---------7-----------------------#2018-07-17</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/aaa0ba52ec9fb9163182a7b372658627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKk1n2pMSvzs5qMAxTZX9w.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><a class="ae jf" href="http://thebutton.co/" rel="noopener ugc nofollow" target="_blank">TheButton.co</a></figcaption></figure><h1 id="0dcf" class="jg jh ht bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="0e6a" class="pw-post-body-paragraph ke kf ht kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hm dt translated">这是对流行的Reddit实验<a class="ae jf" href="https://en.wikipedia.org/wiki/The_Button_(Reddit)" rel="noopener ugc nofollow" target="_blank">按钮</a>的模仿，但有一些关键的不同。核心上，这个按钮是基于一个<a class="ae jf" href="https://ethereum.org/" rel="noopener ugc nofollow" target="_blank">以太坊</a>智能合约。有一个倒数计时器——当按钮被按下时，计时器重置(就像原来一样)。任何人都可以想按多少次就按多少次，但是按一次需要花费<em class="lc">乙醚</em>。最后一名按压者赢得累积的乙醚作为头奖！</p><p id="e6e2" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated"><a class="ae jf" href="http://thebutton.co/" rel="noopener ugc nofollow" target="_blank">在这里查看</a>并加入我们的<a class="ae jf" href="https://www.reddit.com/r/TheButtonCo/" rel="noopener ugc nofollow" target="_blank">子栏目</a>！</p><h1 id="fb69" class="jg jh ht bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">详细描述</h1><h2 id="3c23" class="li jh ht bd ji lj lk ll jm lm ln lo jq kp lp lq ju kt lr ls jy kx lt lu kc lv dt translated">游戏规则</h2><p id="652e" class="pw-post-body-paragraph ke kf ht kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hm dt translated">以上TL；灾难恢复是一个巨大的简化，因为它仅仅触及了表面。首先，按下按钮存入的资金进入四个不同的“桶”:</p><ul class=""><li id="407a" class="lw lx ht kg b kh ld kl le kp ly kt lz kx ma lb mb mc md me dt translated">累积奖金(目前为85%)</li><li id="86ab" class="lw lx ht kg b kh mf kl mg kp mh kt mi kx mj lb mb mc md me dt translated"><strong class="kg hu">慈善</strong>(目前为5%)</li><li id="a34b" class="lw lx ht kg b kh mf kl mg kp mh kt mi kx mj lb mb mc md me dt translated">开发人员的收入(目前为9%)</li><li id="0474" class="lw lx ht kg b kh mf kl mg kp mh kt mi kx mj lb mb mc md me dt translated">其余的将用于下一次竞选活动(目前为1%)</li></ul><p id="6790" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">可以推断，如果计时器超时，活动就结束了。当这种情况发生时，下一次按键将结束上一次活动，并开始新的活动。完成一项运动意味着累积的乙醚将按照上述预设的比例进行分离。</p><p id="05df" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">其次，按键的价格不是不变的！有两个参数决定价格如何变化:<strong class="kg hu"> N </strong>和<strong class="kg hu">价格乘数</strong>。目前N = 5，价格乘数设置为6%，这意味着每按4次价格将增加6%。</p><p id="f975" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">最后，活动还有一个决定其行为的参数——周期(或计时器重置的值),当前设置为30分钟。</p><h2 id="a5af" class="li jh ht bd ji lj lk ll jm lm ln lo jq kp lp lq ju kt lr ls jy kx lt lu kc lv dt translated">动机</h2><p id="7b86" class="pw-post-body-paragraph ke kf ht kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hm dt translated">如果你熟悉原来的按钮，那么这大部分是有意义的，但如果不是，我强烈推荐检查原来的<a class="ae jf" href="https://www.reddit.com/r/thebutton/" rel="noopener ugc nofollow" target="_blank">子编辑</a>。在过去的一年里，我一直在学习solidity，我一直在思考一些简单而有趣的想法，我可以将它们作为dApps来实现。想到过去简单的和病毒性的互联网现象，我很快就把这些点连接起来，并思考如何将这个按钮变成一个以太坊dApp。我以前从未做过任何web开发，所以这是一次重要的学习经历！</p><p id="e19a" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">我有工程背景，但我也刚刚完成工商管理硕士学位。我一直在思考智能合同能为企业做些什么，我的<a class="ae jf" rel="noopener" href="/coinmonks/accounting-base-for-solidity-smart-contracts-384c4d53eaaf">会计智能合同库</a>是我希望为打算基于智能合同开展业务的开发者和公司做出贡献的方式之一。另一个方向是<strong class="kg hu">思考回馈社会</strong>，我希望更多的区块链项目采取这个方向，我也愿意为此做出贡献。我们都痴迷于我们正在开发的技术，或者我们已经购买的密码和令牌的价格，但我们中没有多少人停下来欣赏我们所拥有的，并思考我们如何才能帮助世界上的弱势群体。这就是为什么我在button dApp中实现了一个慈善部分，并且我打算将它添加到我未来工作的任何dApp项目中。思考企业社会责任不仅仅是已经成功的公司的事情，我认为它也可以是非常年轻的企业的一部分(这个主题可以是一篇独立的文章)！</p><p id="172c" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">目前的慈善受益人是Giveth.io，我和他们没有任何关系。他们正致力于发展区块链以太坊的捐赠前景，并且是目前少数几个接受以太坊捐赠的慈善组织之一。他们对于如何使用资金是完全透明的，这使得将来向特定事业捐款变得容易。</p><h2 id="8970" class="li jh ht bd ji lj lk ll jm lm ln lo jq kp lp lq ju kt lr ls jy kx lt lu kc lv dt translated">智能合同概述</h2><p id="cf73" class="pw-post-body-paragraph ke kf ht kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hm dt translated">对于那些想了解智能合约具体做什么的人，我将在这里一步一步地解释。此处 合同部署<a class="ae jf" href="https://etherscan.io/address/0x2b0ec0993a00b2ea625e3b37fcc74742f43a72fe#code" rel="noopener ugc nofollow" target="_blank"> <em class="lc"/></a></p><p id="3543" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">有包含所有简单的getters和setters的<code class="eh mk ml mm mn b">ButtonBase</code>契约和包含核心逻辑的<code class="eh mk ml mm mn b">TheButton</code>。基础合同继承<code class="eh mk ml mm mn b"><a class="ae jf" href="https://github.com/dapphub/ds-auth" rel="noopener ugc nofollow" target="_blank">DSAuth</a></code> <a class="ae jf" href="https://github.com/dapphub/ds-auth" rel="noopener ugc nofollow" target="_blank"> </a>所有权和<code class="eh mk ml mm mn b"><a class="ae jf" rel="noopener" href="/coinmonks/accounting-base-for-solidity-smart-contracts-384c4d53eaaf">Accounting</a></code>会计。也使用<code class="eh mk ml mm mn b"><a class="ae jf" href="https://github.com/dapphub/ds-math" rel="noopener ugc nofollow" target="_blank">DSMath</a></code>进行安全的数学运算。</p><p id="8d57" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">按钮活动包含在结构中:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mo"><img src="../Images/8ae69b4a8705c39a7828c2457d9f0321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pD_CvItBZu4C2OGbakog_A.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Button Campaign Struct</figcaption></figure><p id="7bab" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">所有活动参数都可以更改，但更改它们只会影响下一个活动，因为这些参数是作为内部变量单独存储的。合同的所有者可以使用这些函数修饰符来更改参数，但只能在一定程度上更改:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mt"><img src="../Images/5bbde1a3ecba780aa1168229984bb504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixPa8pT2qTNynEoCBN1y9A.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Limiting Function Modifiers</figcaption></figure><p id="55f9" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated"><code class="eh mk ml mm mn b">limited</code>修饰符确保某些提供的参数有硬编码的限制，而<code class="eh mk ml mm mn b">timeLimited</code>修饰符确保一个函数只能偶尔调用一次——这在设置按钮参数或计算分数时很有用:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/80a4711c57a98818e3fd5296e5a3ba49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QR_z-bnUx7d-qK9VP1KZmg.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Changing Accounting Parameters</figcaption></figure><p id="809c" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">设置慈善受益人也是<code class="eh mk ml mm mn b">timeLimited</code>——这丝毫不能阻止开发者欺骗和窃取慈善资金(通过等待设置受益人的期限)，但它至少保证了我们不能随时随地这样做。我们无意骗取任何人的血汗钱，但我们需要一些时间来获得合法性和社区的信任。</p><p id="c1c2" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">赢家的资金保存在一个映射中:</p><pre class="mp mq mr ms fq mv mn mw mx aw my dt"><span id="dd11" class="li jh ht mn b fv mz na l nb nc">mapping (address =&gt; Account) winners;</span></pre><p id="d5ee" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">提取头奖非常简单(使用专有会计功能可以轻松处理价值):</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nd"><img src="../Images/e6bc8c89f1b9543a9186bc8b92b64d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlH7d63jEELh8bZdETHn2Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Jackpot Withdrawal Function</figcaption></figure><p id="4a19" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">发送慈善ETH:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ne"><img src="../Images/6fb71bc9b782ad908c877a51bf5acf1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mKjA505Wu2PvBaBZclxPQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Donation Function</figcaption></figure><p id="a0e5" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">由于会计基础跟踪所有已知的存款和取款，我们有功能来兑换任何剩余的ETH(可以从合同<code class="eh mk ml mm mn b">selfdestruct</code>发送)或ERC20令牌:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nf"><img src="../Images/db3fb66c33c8dcd5326a22eab96703b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h2WMqKyTRwUtJMnW5Xf-DQ.png"/></div></div></figure><p id="581a" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">主合同包含<strong class="kg hu">按下逻辑</strong>:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ng"><img src="../Images/cf5594c7662ea333a1990c9300e5b4dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2kdqFF0OoFlCFyzcd87_0Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Button Press Code</figcaption></figure><p id="97fd" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">归结起来就是:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nh"><img src="../Images/08419b5ff42cd3ef662afcda58a9c83a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z5tOc1kLYVf_TwWfyRO1nw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Button Press Logic</figcaption></figure><p id="76c0" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">该按钮可以停止，但这只会阻止开始新的活动，并不影响任何正在运行的活动。它还防止从媒体功能完成一个活动，这就是为什么有一个单独的公共<code class="eh mk ml mm mn b">finalize</code>功能，允许任何人完成最后一个活动。</p><p id="09c9" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">操作印刷机看起来像这样:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ni"><img src="../Images/491020a479adc86fe35aeec103f1a4e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dsjCIdMsAMJl6Nhf_JTNIQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Press Handling — Internal Function</figcaption></figure><p id="662a" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">开始新的活动:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nj"><img src="../Images/93113a0f0876737e4f1753d822491894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01CKq5R4FfsatcZhUgHLZA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">New Campaign — Internal Function</figcaption></figure><p id="204f" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">完成活动:</p><figure class="mp mq mr ms fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nk"><img src="../Images/526d5af440120b44607472bea80c14fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N3VC_jvxQ2COQPLYSUOtHg.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Finalizing a Campaign — Internal Function</figcaption></figure><p id="4a26" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">使用<code class="eh mk ml mm mn b">DSMath </code>很容易——它可以将数字视为<em class="lc"> wads </em>(有18个小数位的数字)，因此如果一个分数被设置为0.05 * 10⁸(wads中的5%)，那么使用<code class="eh mk ml mm mn b">wmul</code>函数将总余额与该分数相乘就可以计算出向给定帐户转移了多少。</p><p id="6af4" class="pw-post-body-paragraph ke kf ht kg b kh ld kj kk kl le kn ko kp lf kr ks kt lg kv kw kx lh kz la lb hm dt translated">更多信息，请查看在Etherscan 上验证的官方智能合约代码<a class="ae jf" href="https://etherscan.io/address/0x2b0ec0993a00b2ea625e3b37fcc74742f43a72fe#code" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>