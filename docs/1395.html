<html>
<head>
<title>5 minute guide to deploying smart contracts with Truffle and Ropsten</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Truffle和Ropsten部署智能合约的5分钟指南</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/5-minute-guide-to-deploying-smart-contracts-with-truffle-and-ropsten-b3e30d5ee1e?source=collection_archive---------0-----------------------#2018-08-25">https://medium.com/coinmonks/5-minute-guide-to-deploying-smart-contracts-with-truffle-and-ropsten-b3e30d5ee1e?source=collection_archive---------0-----------------------#2018-08-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="b889" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">推荐使用样板文件快速设置DApp开发</h2></div><p id="e525" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">对于部署、迁移和访问智能合同，您有各种设置选项。根据您对EVM(以太坊虚拟机)的控制和可见性级别，您可以选择使用在线IDE，如<a class="ae ke" href="http://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> Remix </a>，或者通过<a class="ae ke" href="https://geth.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> Geth </a>运行完整的以太坊挖掘节点。</p><p id="a25c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当然，Truffle使编译和部署智能合约变得更加容易，同时仍然给你可见性和控制权。</p><h2 id="fcae" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated"><strong class="ak"> 1分钟快捷方式</strong>:叉此<a class="ae ke" href="https://github.com/nczhu/truffleRopstenBoilerplate" rel="noopener ugc nofollow" target="_blank">样板模板</a></h2><figure class="lb lc ld le fq lf fe ff paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="fe ff la"><img src="../Images/7c8ebdb1bdb9036d12194bd5b3ca314a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vQBYc0XJgZMjBt5sAJmfnw.jpeg"/></div></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Here’s a framework depicting both common setups and what we’ll tackle today: <strong class="bd lq">the path in blue</strong>.</figcaption></figure><blockquote class="lr"><p id="e671" class="ls lt ht bd lu lv lw lx ly lz ma kd ek translated">查看<a class="ae ke" href="https://coincodecap.com/blockchain-courses" rel="noopener ugc nofollow" target="_blank">区块链课程</a>并学习Solidity</p></blockquote><h2 id="4025" class="kf kg ht bd kh ki mb kk kl km mc ko kp jr md kr ks jv me ku kv jz mf kx ky kz dt translated">本教程涵盖</h2><ol class=""><li id="7246" class="mg mh ht jk b jl mi jo mj jr mk jv ml jz mm kd mn mo mp mq dt translated">为Ropsten测试网络配置Truffle框架</li><li id="c2f0" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mn mo mp mq dt translated">使用它来部署(或迁移)合同实例</li><li id="1a76" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mn mo mp mq dt translated">访问已部署的实例并与之交互(通过Truffle控制台)</li></ol><h2 id="027a" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">确保你已经有了</h2><ul class=""><li id="4cc1" class="mg mh ht jk b jl mi jo mj jr mk jv ml jz mm kd mw mo mp mq dt translated">从<a class="ae ke" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>中保存您的钱包助记符</li><li id="acdb" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated">弄点<a class="ae ke" href="https://faucet.metamask.io/" rel="noopener ugc nofollow" target="_blank">测试乙醚</a></li><li id="a0f2" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated">从<a class="ae ke" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>中获取<a class="ae ke" href="https://infura.io/docs/gettingStarted/chooseaNetwork" rel="noopener ugc nofollow" target="_blank"> Ropsten API </a>密钥</li></ul><h2 id="b162" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">详细演练</h2><p id="0d9a" class="pw-post-body-paragraph ji jj ht jk b jl mi iu jn jo mj ix jq jr mx jt ju jv my jx jy jz mz kb kc kd hm dt translated"><strong class="jk hu"> 1。设置</strong> <a class="ae ke" href="https://truffleframework.com/truffle" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">松露</strong> </a></p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="0d5e" class="kf kg ht nb b fv nf ng l nh ni">npm install -g truffle</span></pre><p id="7beb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">制作一个空的储存库，<code class="eh nj nk nl nb b">cd</code>放入其中，然后</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="1092" class="kf kg ht nb b fv nf ng l nh ni">truffle init</span></pre><p id="07ec" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">安装HDWalletProvider</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="55ee" class="kf kg ht nb b fv nf ng l nh ni">npm install --save truffle-hdwallet-provider</span></pre><p id="3cb3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu"> 2。创建您的合同</strong></p><p id="41f0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在<code class="eh nj nk nl nb b">./contracts</code>中，使用以下代码创建一个名为<code class="eh nj nk nl nb b">HelloWorld.sol</code>的新合同:</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="2e88" class="kf kg ht nb b fv nf ng l nh ni">pragma solidity ^0.4.23;</span><span id="f7c9" class="kf kg ht nb b fv nm ng l nh ni">contract HelloWorld {<br/>    function sayHello() public pure returns(string){<br/>        return(“hello world”);<br/>    }<br/>}</span></pre><p id="c21c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu"> 3。部署您的合同</strong></p><p id="19aa" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在<code class="eh nj nk nl nb b">./migrations</code>中，使用以下代码创建一个名为<code class="eh nj nk nl nb b">2_deploy_contracts.js</code>的部署脚本:</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="defb" class="kf kg ht nb b fv nf ng l nh ni">var HelloWorld = artifacts.require(“HelloWorld”);</span><span id="b132" class="kf kg ht nb b fv nm ng l nh ni">module.exports = function(deployer) {<br/>    deployer.deploy(HelloWorld, “hello”);<br/>    // Additional contracts can be deployed here<br/>};</span></pre><p id="6c76" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu"> 4。配置Ropsten网络和提供商</strong></p><p id="c22c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在<code class="eh nj nk nl nb b">truffle.js</code>中，在module.exports中添加以下代码片段:</p><figure class="lb lc ld le fq lf"><div class="bz el l di"><div class="nn no l"/></div></figure><p id="5c89" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">确保用自己的替换<code class="eh nj nk nl nb b">mnemonic</code>和<code class="eh nj nk nl nb b">API_KEY</code>。</p><blockquote class="np nq nr"><p id="d265" class="ji jj ns jk b jl jm iu jn jo jp ix jq nt js jt ju nu jw jx jy nv ka kb kc kd hm dt translated">安全提示:记得把包含你钱包助记符的文件<code class="eh nj nk nl nb b">.gitignore</code>！</p></blockquote><p id="a7d3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在，将您的契约部署(或迁移)到Ropsten，如下所示。默认情况下，Truffle只部署到本地开发者网络。</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="6305" class="kf kg ht nb b fv nf ng l nh ni">truffle deploy --network ropsten</span></pre><p id="b10e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">您应该会看到如下控制台日志:</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="afdd" class="kf kg ht nb b fv nf ng l nh ni">Running migration: 1_initial_migration.js<br/>Deploying Migrations…<br/>… 0xd01dd7...<br/>Migrations: 0xf741...<br/>Saving successful migration to network…<br/>… 0x78ed...<br/>Saving artifacts…<br/>Running migration: 2_deploy_contracts.js<br/>Deploying HelloWorld…<br/>… 0x0aa9...<br/>HelloWorld: [SAVE THIS ADDRESS!!]<br/>Saving successful migration to network…<br/>… 0xee95...<br/>Saving artifacts…</span></pre><blockquote class="np nq nr"><p id="64aa" class="ji jj ns jk b jl jm iu jn jo jp ix jq nt js jt ju nu jw jx jy nv ka kb kc kd hm dt translated"><strong class="jk hu">提示:</strong>确保保存好你的合同地址，以备将来参考。如果丢失，请继续<a class="ae ke" href="https://ropsten.etherscan.io/address/0xc9ff10dcc6e830577e4aff457ad9bf858e0cabad" rel="noopener ugc nofollow" target="_blank">以太扫描</a>检查您的钱包地址交易。</p></blockquote><p id="0482" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu"> 5。访问您部署的合同</strong></p><p id="2ecd" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">设置您的Truffle控制台以支持网络:</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="5c2a" class="kf kg ht nb b fv nf ng l nh ni">truffle console --network ropsten</span></pre><p id="f2e5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过以下方式访问您部署的合同实例:</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="959a" class="kf kg ht nb b fv nf ng l nh ni">HelloWorld.deployed().then(function(instance){return instance });</span></pre><p id="862b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">或者，您可以通过以下方式按其公共地址检索实例:</p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="2631" class="kf kg ht nb b fv nf ng l nh ni">web3.eth.contract(HelloWorld.abi, contractAddress)</span></pre><p id="498a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">其中HelloWorld.abi是本地编译的abi，contractAddress是您公开部署的契约实例。</p><p id="ca61" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu"> 6。最后调用契约函数，打个招呼！</strong></p><pre class="lb lc ld le fq na nb nc nd aw ne dt"><span id="7e0f" class="kf kg ht nb b fv nf ng l nh ni">HelloWorld.deployed().then(function(instance){return instance.sayHello()});Also, Read</span></pre><blockquote class="lr"><p id="0bc7" class="ls lt ht bd lu lv lw lx ly lz ma kd ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae ke" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="kf kg ht bd kh ki mb kk kl km mc ko kp jr md kr ks jv me ku kv jz mf kx ky kz dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="mg mh ht jk b jl mi jo mj jr mk jv ml jz mm kd mw mo mp mq dt translated"><a class="ae ke" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="14e6" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae ke" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae ke" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="f33b" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">加密交换</a> | <a class="ae ke" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">印度的加密应用</a></li><li id="47a8" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="8b34" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated">最佳<a class="ae ke" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密贷款平台</a></li><li id="9487" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币</a>终极指南</li><li id="0cee" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated">购买Dogecoin的7种最佳方式 | <a class="ae ke" href="https://coincodecap.com/zebpay-review" rel="noopener ugc nofollow" target="_blank"> ZebPay评论</a></li><li id="54b6" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" href="https://coincodecap.com/futures-trading-signals" rel="noopener ugc nofollow" target="_blank">最佳期货交易信号</a> | <a class="ae ke" href="https://coincodecap.com/liquid-exchange-review" rel="noopener ugc nofollow" target="_blank">流动性交易回顾</a></li><li id="8167" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated">【Huobi的加密交易信号 | <a class="ae ke" rel="noopener" href="/coinmonks/swapzone-review-crypto-exchange-data-aggregator-e0ad78e55ed7"> Swapzone审查</a></li><li id="2335" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">最佳加密交易机器人</a> | <a class="ae ke" href="https://coincodecap.com/buy-solana" rel="noopener ugc nofollow" target="_blank">购买索拉纳</a> | <a class="ae ke" href="https://coincodecap.com/matrixport-review" rel="noopener ugc nofollow" target="_blank">矩阵导出评论</a></li><li id="eaf7" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" href="https://coincodecap.com/coldcard-review" rel="noopener ugc nofollow" target="_blank"> Coldcard评论</a> | <a class="ae ke" href="https://coincodecap.com/boxtradex-review" rel="noopener ugc nofollow" target="_blank"> BOXtradEX评论</a>|<a class="ae ke" href="https://coincodecap.com/uniswap" rel="noopener ugc nofollow" target="_blank">uni swap指南</a></li><li id="7832" class="mg mh ht jk b jl mr jo ms jr mt jv mu jz mv kd mw mo mp mq dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/coinbase-review-6ef4e0f56064">比特币基地评论</a> | <a class="ae ke" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2">德里比特评论</a> | <a class="ae ke" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX评论</a></li></ul></div></div>    
</body>
</html>