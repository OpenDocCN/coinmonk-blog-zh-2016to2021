<html>
<head>
<title>How to build a dapp on a private Ethereum network : Part — 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在私有以太网上构建dapp:第2部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/dapp-on-a-private-ethereum-network-2-a0b282586558?source=collection_archive---------1-----------------------#2020-03-12">https://medium.com/coinmonks/dapp-on-a-private-ethereum-network-2-a0b282586558?source=collection_archive---------1-----------------------#2020-03-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><blockquote class="iq ir is"><p id="4ff7" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">这是一个由5篇文章组成的系列，介绍如何在2个私有以太坊节点的网络上开发一个去中心化的应用程序(dapp ),而无需使用任何第三方API或应用程序(如Infura、MetaMask等)。).本教程涵盖了我在CSIR-CEERI的研究项目中所学到的基本要素。</p><p id="1b86" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">在前一篇文章(第1部分)中，我介绍了下面给出的目录中的第1-3节。</p></blockquote><p id="afa8" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">如果你想跳到某一部分，你可以向下滚动到本文末尾的<strong class="iw hu">所有系列链接</strong>部分。</p></div><div class="ab cl jv jw hb jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hm hn ho hp hq"><blockquote class="kc"><p id="d75a" class="kd ke ht bd kf kg kh ki kj kk kl jr ek translated">最近发布——“<a class="ae km" rel="noopener" href="/@themadhackerOI/how-to-build-a-dapp-on-a-private-ethereum-network-part-5-84177d5717be">第五部分:第八至九节</a>”</p></blockquote></div><div class="ab cl jv jw hb jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hm hn ho hp hq"><h1 id="2eb8" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">目录</h1><p id="3429" class="pw-post-body-paragraph it iu ht iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hm dt translated">在这里，您可以找到我将本教程分成的部分和子部分的列表:</p><p id="fbae" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">一.创建项目</p><p id="34c2" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">二。安装先决条件</p><p id="7e33" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">三。配置网络</p><p id="1fc2" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><strong class="iw hu"> →四。设计智能合同</strong></p><p id="c42a" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">动词 （verb的缩写）建立松露项目</p><p id="540f" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">不及物动词启动网络</p><p id="c464" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">七。构建web应用程序</p><p id="031a" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">八。测试dapp</p><p id="3ee9" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">九。修改dapp</p></div><div class="ab cl jv jw hb jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hm hn ho hp hq"><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/44f9d6b0fbe80c43312c5dc6274087ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*Fzyl7IkOH-qdzw3VTV2VPg.png"/></div></figure><p id="7f62" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">“智能合同”和“区块链”这两个术语已经广为流传。最流行的词汇之一。每个人都听说过，但很少有人知道它们到底是什么。不要再害怕了，你最多只需要20分钟就能成为其中的一员。</p><p id="3bf8" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">在第2部分中，我将解释为我们的应用程序设计和测试智能契约的最简单的方法(第四节)。你可以参考下面提到的目录来了解这个开发过程的流程。</p><h1 id="b71b" class="kn ko ht bd kp kq ly ks kt ku lz kw kx ky ma la lb lc mb le lf lg mc li lj lk dt translated">四。设计智能合同</h1><p id="b255" class="pw-post-body-paragraph it iu ht iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hm dt translated">构建和测试<a class="ae km" href="https://blog.coincodecap.com/tag/smart-contact/" rel="noopener ugc nofollow" target="_blank">智能契约</a>的最佳方式是在线混合IDE。它有一个交互式界面，并且装备精良，可以模拟一个真实的以太坊环境。有关更多信息，请参考<a class="ae km" href="https://remix-ide.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Remix IDE文档</a>。</p><h2 id="67ff" class="md ko ht bd kp me mf mg kt mh mi mj kx js mk ml lb jt mm mn lf ju mo mp lj mq dt translated">a)合同代码</h2><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div class="fe ff mr"><img src="../Images/165fb236db3c135368abb3c8c8e63ceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*GavzwhQKQ6kEPuuyz4fv_A.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">The sections circled correspond to the 3 steps mentioned below</figcaption></figure><ul class=""><li id="d147" class="mw mx ht iw b ix iy jb jc js my jt mz ju na jr nb nc nd ne dt translated">打开<a class="ae km" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> Remix IDE </a>并点击“Home”选项卡中“环境”标题下的“Solidity”按钮。</li><li id="e93f" class="mw mx ht iw b ix nf jb ng js nh jt ni ju nj jr nb nc nd ne dt translated">在“坚固性编译器”菜单下，从“编译器”下拉列表中选择<code class="eh nk nl nm nn b">0.4.25+commit.59dbf8f1</code>选项，并选择“自动编译”勾选框。</li><li id="1bf3" class="mw mx ht iw b ix nf jb ng js nh jt ni ju nj jr nb nc nd ne dt translated">从“主页”选项卡中单击“新建文件”。键入<code class="eh nk nl nm nn b">helloworld.sol</code>作为文件名。一个新的选项卡以编辑器窗口的形式打开。键入以下代码:</li></ul><p id="6696" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><strong class="iw hu"> <em class="iv">专业提示:</em> </strong> <em class="iv"> </em>要增大输入代码的编辑器的字体大小，请在此区域内单击，并按下键盘上的Ctrl和“+”。</p><pre class="lr ls lt lu fq no nn np nq aw nr dt"><span id="9abb" class="md ko ht nn b fv ns nt l nu nv">pragma solidity ^0.4.25;</span><span id="5f35" class="md ko ht nn b fv nw nt l nu nv">contract HelloWorld {<br/>    <br/>    // Define a string variable<br/>    string name;<br/>    <br/>    // Modifies the value of string variable (name)<br/>    function inputUser(string _name) public {<br/>        name = _name;<br/>    }<br/>    <br/>    // Validated that the string variable (name) holds the updated value<br/>    function dispUser() public view returns(string){<br/>        return (append("Hello world! My name is ", name));<br/>    }<br/>    <br/>    // Appends 2 strings a, b<br/>    function append(string a, string b) internal pure returns (string) {<br/>        return string(abi.encodePacked(a, b));<br/>    }<br/>}</span></pre><ul class=""><li id="c6de" class="mw mx ht iw b ix iy jb jc js my jt mz ju na jr nb nc nd ne dt translated">合同应自动编译。你也可以点击“Solidity编译器”菜单下的“编译helloworld.sol”按钮或者点击Ctrl + S (s <em class="iv"> ee图下面的</em>)。</li></ul><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div class="fe ff nx"><img src="../Images/e57e931e36fb1b28b7a694f3e5f572de.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*MHlXubMSICwAlOOvoemJPw.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">The symbol circled on the left panel is the “Solidity compiler” menu</figcaption></figure><p id="66d6" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">上面使用的契约是不言自明的。此外，注释也被用来帮助理解它的工作。</p><p id="8168" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">除了前面提到的3个关键功能的函数和变量(就在标题<a class="ae km" href="https://blog.coincodecap.com/tag/dapps" rel="noopener ugc nofollow" target="_blank"> Dapp </a> Development下)，一些额外的函数需要显式编程，因为Solidity没有预定义的库或模块(这里，<em class="iv">追加</em>)。</p><ul class=""><li id="76a2" class="mw mx ht iw b ix iy jb jc js my jt mz ju na jr nb nc nd ne dt translated"><em class="iv"> substring : </em>这使得程序员能够将两个字符串附加(连接)在一起。</li></ul><h2 id="1023" class="md ko ht bd kp me mf mg kt mh mi mj kx js mk ml lb jt mm mn lf ju mo mp lj mq dt translated">b)测试合同</h2><p id="7c55" class="pw-post-body-paragraph it iu ht iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hm dt translated">构建契约后，有必要进行测试以确保它没有错误，因为智能契约是实现和简化<code class="eh nk nl nm nn b">geth</code>控制台(即用户)和区块链之间通信的核心组件。</p><ul class=""><li id="024a" class="mw mx ht iw b ix iy jb jc js my jt mz ju na jr nb nc nd ne dt translated">在“部署和运行事务”菜单下，从“环境”部分选择“JavaScript VM”选项。JS VM将在web浏览器的沙盒区块链中执行所有事务。当您重新加载页面时，会启动一个新的区块链，而旧的不会被保存，即信息不会持续存在(见图)。</li></ul><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div class="fe ff ny"><img src="../Images/27d9b2ba8ff71a1b7429c1287edc4277.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*XtxAIMFqoiSHIfsOn3ohIw.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">The symbol circled on the left panel is the “Deploy and Run Transactions” menu</figcaption></figure><ul class=""><li id="33de" class="mw mx ht iw b ix iy jb jc js my jt mz ju na jr nb nc nd ne dt translated">然后单击“部署”按钮，生成智能合同的API。该实例的下拉箭头显示与智能合约的每个公共函数和变量相对应的按钮，通过单击这些按钮可以调用相应的函数/变量。</li></ul><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div class="fe ff nz"><img src="../Images/69265ad6c9e6eedd91e7c370e66f975f.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*mxaerRf56GjCGEDUunj6uA.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Observe the input parameter and output used for this instance</figcaption></figure><p id="2a2f" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">要测试合同是否按预期工作，请执行以下操作:</p><ol class=""><li id="dd31" class="mw mx ht iw b ix iy jb jc js my jt mz ju na jr oa nc nd ne dt translated">在string _name <code class="eh nk nl nm nn b">string _name</code>字段中用双引号(<code class="eh nk nl nm nn b">“YourName”</code>)输入您的姓名，然后点击“输入用户”按钮。</li><li id="fb33" class="mw mx ht iw b ix nf jb ng js nh jt ni ju nj jr oa nc nd ne dt translated">点击“dispUser”按钮并验证功能输出。</li></ol><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div class="fe ff ob"><img src="../Images/a91f8ccb2839ee813db215cd9f429adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*8s7iNKvXAqTWhKFBoTkGNA.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">The actions performed above can also be cross-checked by using the console window that opens after you click on the circled button</figcaption></figure><p id="49ae" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><strong class="iw hu"> <em class="iv">提示:</em> </strong>点击下面显示的任何一个矩形，都会显示相应动作的详细信息。去试试吧！</p><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="fe ff oc"><img src="../Images/02c85bc520ce10c234fc2c299e07e0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eLX7kfmNw5uVKnV6OELKXQ.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">This shows the confirmation for the transaction that deployed the smart contract</figcaption></figure><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="fe ff oh"><img src="../Images/a41d8311d5234b455af2d0b26f91ea95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_8V9l--puvQmOYYym6M0g.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">This shows the transactions that : (1) Changed the value of the “<code class="eh nk nl nm nn b">name”</code> variable when “inputUser” button is clicked, and (2) Displayed the output as “My name is…” when “dispUser” button is clicked</figcaption></figure><p id="7015" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">本教程的第四部分到此结束。当你阅读这篇文章的时候，其他的部分正在被输入。</p><p id="c451" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">在下一部分中，我们将学习如何使用geth建立一个包含两个节点的私有以太网:如何在私有以太网上构建dapp:第3部分</p></div><div class="ab cl jv jw hb jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hm hn ho hp hq"><p id="3b73" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><em class="iv">附:如果你喜欢这篇文章，请鼓掌10次！请在下面评论，让我知道你的想法，或者如果你想分享一些技巧。</em></p><p id="1e18" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated">我很快会发表更多这样有趣的文章。在 <a class="ae km" rel="noopener" href="/@themadhackerOI"> <em class="iv">上关注我</em> </a> <em class="iv">或者在</em> <a class="ae km" href="https://twitter.com/TheMadHacker01" rel="noopener ugc nofollow" target="_blank"> <em class="iv">上跟踪我</em> </a> <em class="iv">敬请关注。</em></p></div><div class="ab cl jv jw hb jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hm hn ho hp hq"><h1 id="29b1" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">所有系列链接</h1><p id="0142" class="pw-post-body-paragraph it iu ht iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hm dt translated">如果你想跳过某一部分，你可以参考下面的链接。请参考下面的<strong class="iw hu">目录</strong>将一节与其对应的主题匹配起来。</p><p id="c85f" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><a class="ae km" rel="noopener" href="/coinmonks/dapp-on-a-private-ethereum-network-1-c8b80695e049">第一部分:第一至第三节</a></p><p id="734c" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><a class="ae km" rel="noopener" href="/coinmonks/dapp-on-a-private-ethereum-network-2-a0b282586558">第二部分:第四节</a></p><p id="718b" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><a class="ae km" rel="noopener" href="/@themadhackerOI/how-to-build-a-dapp-on-a-private-ethereum-network-part-3-31066fedf7a1">第三部分:第五至第六节</a></p><p id="65b3" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><a class="ae km" rel="noopener" href="/@themadhackerOI/how-to-build-a-dapp-on-a-private-ethereum-network-part-4-ea28b6de5cf8">第4部分:第七节</a></p><p id="e785" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hm dt translated"><a class="ae km" rel="noopener" href="/@themadhackerOI/how-to-build-a-dapp-on-a-private-ethereum-network-part-5-84177d5717be">第5部分:第八至第九节</a></p><blockquote class="kc"><p id="cefe" class="kd ke ht bd kf kg kh ki kj kk kl jr ek translated"><a class="ae km" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="oj ok ol om on lv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff oi"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="lr ls lt lu fq lv fe ff paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="fe ff oo"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></div></figure></div></div>    
</body>
</html>