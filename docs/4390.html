<html>
<head>
<title>Connecting to IPFS from Android Devices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Android设备连接到IPFS</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/setting-up-ipfs-with-android-sdk-a3f621125e47?source=collection_archive---------2-----------------------#2021-04-14">https://medium.com/coinmonks/setting-up-ipfs-with-android-sdk-a3f621125e47?source=collection_archive---------2-----------------------#2021-04-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/11c461081989f7cf6b593e4380fa6cbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HQ-9VK9hf5iJmYrtg9770A.jpeg"/></div></div></figure><p id="9d19" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">虽然将Web应用程序与IPFS客户端连接起来相对容易，但从Android SDK上做同样的事情却有点棘手。在本教程中，我将带您完成设置阶段，向IPFS添加文档并查看其内容。</p><p id="9794" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">首先，导入以下gradle包:</p><p id="e9ae" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在<strong class="jd hu"> app.gradle </strong>文件中:</p><figure class="jz ka kb kc fq iu"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="c304" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">当试图实现IPFS方法时，其中一些方法可能不会像预期的那样工作。其中一个错误是:</p><pre class="jz ka kb kc fq kf kg kh ki aw kj dt"><span id="ef82" class="kk kl ht kg b fv km kn l ko kp">java.lang.NoSuchMethodError: No static method metafactory</span></pre><p id="e472" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是因为Java版本中没有一些方法&lt; 8. Switching to Java 8 compatibility might fix this issue:</p><figure class="jz ka kb kc fq iu"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="be7f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Once the project dependencies are imported, <strong class="jd hu">sync</strong>gradle文件来保存更改。</p><p id="0683" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在MainActivity.java(可以是任何活动文件)，导入以下包:</p><figure class="jz ka kb kc fq iu"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="77a4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">实例化IPFS客户端需要向构造函数传递一个多地址参数:</p><figure class="jz ka kb kc fq iu"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="4962" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">一旦设置好客户端，您就可以添加文件和检索散列。调用ipfsClient.add()方法添加文件并返回MerkleNode结果:</p><figure class="jz ka kb kc fq iu"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="53b8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">由于IPFS是内容可寻址的分散文件托管，所以您需要的只是一个散列来检索文档。从上面的代码中，您可以观察到，如果一切顺利，您将能够在日志的“info”选项卡中找到散列。在IPFS找到该文档的有效URL是:</p><p id="1b2b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">【https://ipfs.infura.io/ipfs/】T4&lt;文档哈希&gt;T5】</p><p id="747f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">就是这样。您已使用Android SDK成功将内容添加到IPFS。</p></div></div>    
</body>
</html>