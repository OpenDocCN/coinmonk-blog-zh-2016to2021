<html>
<head>
<title>How to build a blockchain in Elixir part-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Elixir中构建区块链第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/building-a-blockchain-in-elixir-part-1-4d4ed889525b?source=collection_archive---------0-----------------------#2020-09-12">https://medium.com/coinmonks/building-a-blockchain-in-elixir-part-1-4d4ed889525b?source=collection_archive---------0-----------------------#2020-09-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/4aa40d1f1bebf71b3bcfbc30504fb206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-umKNSqtxkZB0hKw62AI8w.png"/></div></div></figure><div class=""/><p id="e5ae" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">区块链是一种允许在对等(P2P)基础上存储和交换数据的技术。在结构上，由于基于共识的算法，区块链数据可以被咨询、共享和保护。它以分散的方式使用，消除了对中介或“可信第三方”的需要</p><p id="8f80" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">简单来说，区块链就是一个数据库。什么是数据库？数据库是有组织的数据集合。或者，你可以说，一个存储数据的数据结构。所以，区块链只是一个存储数据的数据结构。顾名思义，会有一连串的区块。</p><figure class="ka kb kc kd fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff jz"><img src="../Images/e05e38b839ed4f7e3482f924815e3ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*txx8n6Kf2ZaKSEihTqFfvA.png"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek"><a class="ae ki" href="https://www.spheregen.com/blockchain-technology-basics/" rel="noopener ugc nofollow" target="_blank">https://www.spheregen.com/blockchain-technology-basics/</a></figcaption></figure><p id="bf31" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个基本的区块链有一个由块组成的链表。每个块具有以下属性。</p><ul class=""><li id="9c3b" class="kj kk ie jd b je jf ji jj jm kl jq km ju kn jy ko kp kq kr dt translated">索引</li><li id="80dd" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">时间戳</li><li id="d5fe" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">以前的哈希</li><li id="482b" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">混杂</li><li id="2b7f" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">数据</li></ul></div><div class="ab cl kx ky hb kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hm hn ho hp hq"><blockquote class="le"><p id="d7b6" class="lf lg ie bd lh li lj lk ll lm ln jy ek translated">参加<a class="ae ki" href="https://blog.coincodecap.com/go/learn" rel="noopener ugc nofollow" target="_blank">这个区块链课程</a>，成为一名区块链开发者</p></blockquote><p id="5edb" class="pw-post-body-paragraph jb jc ie jd b je lo jg jh ji lp jk jl jm lq jo jp jq lr js jt ju ls jw jx jy hm dt translated">今天我们要建造一个长生不老的区块链。我们将建造任何基本区块链提供的东西，概念很简单，我假设你对长生不老药和区块链概念有点熟悉，但即使你不熟悉，我也会试着解释关于区块链的每个细节。</p><p id="c0f9" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们将一步一步地构建区块、散列、钱包、共识，因此在这一部分，我们将构建一个具有区块链的区块链。然后在后面的部分中，我们将看到如何构建事务、挖掘和其他与区块链相关的东西。</p><p id="c7ea" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">所以还是赶紧立项，赶紧开始做吧。</p><pre class="ka kb kc kd fq lt lu lv lw aw lx dt"><span id="345b" class="ly lz ie lu b fv ma mb l mc md">mix phx.new ex_chain --no-html --no-ecto</span></pre><p id="4a3c" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这将初始化我们的应用程序，让我们进入项目并开始导航。</p><pre class="ka kb kc kd fq lt lu lv lw aw lx dt"><span id="4415" class="ly lz ie lu b fv ma mb l mc md">cd ex_chain</span></pre><p id="8b67" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，让我们创建一个新文件<code class="eh me mf mg lu b">lib/blockchain/block.ex</code>，它将包含块相关的功能和逻辑。</p><p id="d993" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们为块构建结构，所以我们的块现在将有4个基本的东西，然后慢慢地我们将继续添加新的东西。</p><p id="1240" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">假设在区块链中的一个非常基础的程序块中有<code class="eh me mf mg lu b">timestamp, hash of block, block data and previous block hash</code>。所以我们把它加到块上。</p><figure class="ka kb kc kd fq hv"><div class="bz el l di"><div class="mh mi l"/></div></figure><p id="e171" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这给了我们一个基本的块结构。上面有这个街区的详细信息。</p><p id="18c6" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们在<code class="eh me mf mg lu b">block.ex</code>中添加一些基本函数，通过这些函数我们可以创建新的块和一个genesis块(Genesis块是任何区块链中的第一块)，Genesis块中没有任何以前的散列，所以我们将把以前的散列字段留空。</p><p id="d251" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因此，让我们先添加一些测试，然后我们将实现通过这些测试的函数。在<code class="eh me mf mg lu b">test/blockchain/block_test.exs</code>中创建一个文件</p><figure class="ka kb kc kd fq hv"><div class="bz el l di"><div class="mh mi l"/></div></figure><p id="06fd" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在运行<code class="eh me mf mg lu b">mix test</code>两个测试都会失败，所以让我们写函数，这样它就能通过。</p><p id="ae10" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们用以下函数修改<code class="eh me mf mg lu b">lib/blockchain/block.ex</code>。</p><figure class="ka kb kc kd fq hv"><div class="bz el l di"><div class="mh mi l"/></div></figure><p id="abf8" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这里我们创建了两个新函数，分别是<code class="eh me mf mg lu b">new/4</code>和<code class="eh me mf mg lu b">genesis/0</code>，现在我们的测试应该通过了。</p><p id="6d60" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们的下一个任务是创建mine函数并添加hash函数，以便我们传递的数据可以被验证，我们可以构建hash函数的基础。</p><p id="c401" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在我们将添加接受<code class="eh me mf mg lu b">timestamp, last_hash and data</code>的函数<code class="eh me mf mg lu b">hash/3</code>，这样我们就可以得到当前的块散列。所以让我们修改测试和函数。</p><figure class="ka kb kc kd fq hv"><div class="bz el l di"><div class="mh mi l"/></div></figure><p id="0294" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这里我们修改了现有的函数，从<code class="eh me mf mg lu b">new/3</code>函数生成块散列，并返回给我们新的<code class="eh me mf mg lu b">%Block{}</code>结构。</p><p id="2681" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们添加了一个<code class="eh me mf mg lu b">mine_block/2</code>函数，它在我们给出last_hash时挖掘新的块，因此它相应地设置参数并创建新的块。</p><p id="95a7" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们在这里停止这一部分，在下一部分，我们将从这些块创建区块链。</p><p id="1540" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是第二篇文章的链接<a class="ae ki" rel="noopener" href="/@y316nitk/how-to-build-a-blockchain-in-elixir-part-2-5c99ea9a7733?sk=e74a67d4d964039cc8f7503463d44bd8">链接</a></p><h2 id="d654" class="ly lz ie bd mj mk ml mm mn mo mp mq mr jm ms mt mu jq mv mw mx ju my mz na nb dt translated">另外，阅读</h2><ul class=""><li id="02dc" class="kj kk ie jd b je nc ji nd jm ne jq nf ju ng jy ko kp kq kr dt translated">最好的<a class="ae ki" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="b851" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a></li><li id="ae2d" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">最好的<a class="ae ki" rel="noopener" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b">加密税务软件</a></li><li id="92e4" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/the-best-crypto-trading-platforms-in-2020-the-definitive-guide-updated-c72f8b874555">最佳加密交易平台</a></li><li id="d8fc" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">最佳<a class="ae ki" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="4f10" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">最佳区块链分析工具</a></li><li id="d432" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南:新手如何赚钱</li><li id="aa54" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">最佳<a class="ae ki" rel="noopener" href="/coinmonks/what-are-the-best-charting-platforms-for-cryptocurrency-trading-85aade584d80">加密制图工具</a></li><li id="15e1" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/ledger-vs-trezor-best-hardware-wallet-to-secure-cryptocurrency-22c7a3fd391e">莱杰vs特雷佐</a></li><li id="56fd" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">了解比特币的<a class="ae ki" rel="noopener" href="/coinmonks/what-are-the-best-books-to-learn-bitcoin-409aeb9aff4b">最佳书籍有哪些？</a></li><li id="170f" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/3commas-review-an-excellent-crypto-trading-bot-2020-1313a58bec92">3商业评论</a></li><li id="d145" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/aax-exchange-review-2021-67c5ea09330c"> AAX交易所评论</a> |推荐代码、交易费用、利弊</li><li id="54f9" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2">德里比特评论</a> |选项、费用、API和Testnet</li><li id="e34b" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX密码交易所评论</a></li><li id="d0c3" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/ngrave-zero-review-c465cf8307fc">n零审核</a></li><li id="1310" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/bybit-exchange-review-dbd570019b71"> Bybit交换审查</a></li><li id="8b1e" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/cryptohopper-vs-3commas-vs-shrimpy-a2c16095b8fe"> 3Commas vs Cryptohopper </a></li><li id="b18b" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">最好的比特币<a class="ae ki" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></li><li id="e7b1" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">最佳<a class="ae ki" href="https://blog.coincodecap.com/best-monero-wallets" rel="noopener ugc nofollow" target="_blank"> monero钱包</a></li><li id="747f" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" href="https://blog.coincodecap.com/ledger-nano-s-vs-x" rel="noopener ugc nofollow" target="_blank">莱杰nano s vs x </a></li><li id="ace6" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" href="https://blog.coincodecap.com/bitsgap-3commas-quadency" rel="noopener ugc nofollow" target="_blank">bits gap vs 3 commas vs quad ency</a></li><li id="a274" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" href="https://blog.coincodecap.com/ledger-nano-s-vs-trezor-one-ledger-nano-x-trezor-t" rel="noopener ugc nofollow" target="_blank">莱杰纳米S vs特雷佐one vs特雷佐T vs莱杰纳米X </a></li><li id="44f0" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">block fi vs Celsius</a>vs Hodlnaut</li><li id="52d0" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">Bitsgap评论——一个轻松赚钱的加密交易机器人</li><li id="92c0" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated">为专业人士设计的加密交易机器人</li><li id="22eb" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT审查</a> |杠杆交易、费用和交易</li><li id="62d2" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/ellipal-titan-review-85e9071dd029">埃利帕尔泰坦评论</a></li><li id="1a26" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" href="https://blog.coincodecap.com/secux-stone-hardware-wallet-review" rel="noopener ugc nofollow" target="_blank"> SecuX Stone评论</a></li><li id="31ff" class="kj kk ie jd b je ks ji kt jm ku jq kv ju kw jy ko kp kq kr dt translated"><a class="ae ki" rel="noopener" href="/coinmonks/blockfi-review-53096053c097"> BlockFi评论</a> |从您的密码中赚取高达8.6%的利息</li></ul></div></div>    
</body>
</html>