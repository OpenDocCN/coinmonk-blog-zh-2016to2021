<html>
<head>
<title>pBFT— Understanding the Consensus Algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">pBFT—了解共识算法</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/pbft-understanding-the-algorithm-b7a7869650ae?source=collection_archive---------0-----------------------#2018-11-19">https://medium.com/coinmonks/pbft-understanding-the-algorithm-b7a7869650ae?source=collection_archive---------0-----------------------#2018-11-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="9457" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">为什么使用pBFT？</h1><p id="6265" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><strong class="jq hu"> pBFT </strong>(实用拜占庭容错)对于成员<strong class="jq hu">部分信任</strong>的企业联合体来说是一个优秀的共识算法。</p><h1 id="e8c3" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">缺点</h1><p id="8823" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">pBFT的唯一缺点是随着节点(技术上说是副本)被添加到集合中，消息数量会呈指数级增长。</p><blockquote class="km"><p id="af09" class="kn ko ht bd kp kq kr ks kt ku kv kl ek translated">交易新手？尝试<a class="ae kw" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae kw" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><h1 id="048a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb kx jd je jf ky jh ji jj kz jl jm jn dt translated">为什么这么多信息？</h1><p id="55a1" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">消息繁重算法是由于<strong class="jq hu">三阶段协议</strong>的每个阶段所需的多播消息数乘以我们集合中的每个副本。</p><h1 id="8038" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">为什么有这么多复制品？</h1><p id="4df5" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">我们需要最少的<code class="eh la lb lc ld b"><strong class="jq hu">3f + 1</strong></code>个副本，其中<code class="eh la lb lc ld b"><strong class="jq hu">f </strong></code>是错误副本的最大数量。这个最小值确保了我们有足够的无缺陷副本来发现有缺陷的副本(崩溃和拜占庭)。因此，具有可能出错的最大副本数量的副本集<code class="eh la lb lc ld b">|<strong class="jq hu">R|</strong></code>被表示为:</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff le"><img src="../Images/cae8dc60630977c37f032420a837ff29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qIZTYWBZgzh89t0HUCAqUg.png"/></div></div></figure><h1 id="d156" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">示例副本集</h1><p id="a4a0" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">如果我们希望我们的副本集容忍多达<strong class="jq hu"> 2个错误副本</strong>，我们将需要<strong class="jq hu"> 7个副本</strong>，其中一个是主副本。通过将<strong class="jq hu"> 2个错误的</strong>副本应用于我们的公式<code class="eh la lb lc ld b"><strong class="jq hu">3</strong>(<strong class="jq hu">2</strong> faulty replicas) <strong class="jq hu">+ 1 = 7 </strong>replicas</code>，我们得到了<strong class="jq hu"> 7个副本</strong></p><p id="a6d9" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">我已经计算了每个阶段的<strong class="jq hu">最小</strong>和<strong class="jq hu">最大</strong>消息数，并将其放在我创建的下图的顶部。为了清楚起见，包括了<strong class="jq hu">客户端请求</strong>和<strong class="jq hu">回复</strong>，尽管它们在pBFT算法中实际上不被认为是<strong class="jq hu"> <em class="lv">阶段</em> </strong>。</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lw"><img src="../Images/f78d73bc64781870023e7e188f90049e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sYSJbipPZjhStXFMXcyKDA.png"/></div></div></figure><h1 id="c377" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">每个客户端请求的消息总数</h1><p id="f7ef" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">该副本集的总<strong class="jq hu">最小</strong>消息数为:<br/> <code class="eh la lb lc ld b"><strong class="jq hu">1 + 3f + 3f(3f-f) + (3f-f+1)(3f+1) + 3f-1</strong></code></p><p id="df0f" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">在我们的例子中，最多有2个错误副本的<strong class="jq hu">，这将是:<br/> - <strong class="jq hu">请求</strong>消息:<code class="eh la lb lc ld b"><strong class="jq hu">1</strong></code>-<br/>-<strong class="jq hu">预准备</strong>消息:<code class="eh la lb lc ld b"><strong class="jq hu">3f = 6<br/></strong></code> - <strong class="jq hu">准备</strong>消息:<code class="eh la lb lc ld b"><strong class="jq hu">3f(3f-f) = 24<br/></strong></code> - <strong class="jq hu">提交</strong>消息:<code class="eh la lb lc ld b"><strong class="jq hu">(3f-f+1)(3f+1)= 35<br/></strong></code> - <strong class="jq hu">回复</strong>消息:<code class="eh la lb lc ld b"><strong class="jq hu">3f-1 = 5</strong></code></strong></p><p id="35db" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">这就给出了使用<strong class="jq hu"> 7个副本</strong>时<strong class="jq hu"> 1个请求</strong>的<strong class="jq hu"> 71 </strong> (1+6+24+35+5) <strong class="jq hu">总消息</strong>的<strong class="jq hu">最小值</strong>！如果我们想要有更多的<strong class="jq hu"> 1 </strong>个可能出错的副本，那么对于使用<strong class="jq hu"> 10个副本的1个请求<strong class="jq hu">142个消息</strong>来说，这个数字增加到最小<strong class="jq hu">个</strong>。</strong></p><p id="c33f" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">想要<strong class="jq hu">最多4个</strong>节点<strong class="jq hu"> </strong>有故障？只需使用<strong class="jq hu"> 13个副本</strong>、<strong class="jq hu">、</strong>但<strong class="jq hu">最小消息</strong>将攀升<strong class="jq hu"> </strong>至<strong class="jq hu"> 237 </strong>以获得<strong class="jq hu">单个请求。</strong></p><p id="c32b" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">这就是为什么<strong class="jq hu"> pBFT </strong>不<strong class="jq hu">不缩放</strong>以及其他<a class="ae kw" rel="noopener" href="/coinmonks/quorum-blockchain-consensus-algorithms-ab38790091">共识算法</a>的原因。</p><p id="918c" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">与EC2实例的负载平衡不同，由于添加了消息，您不应该添加超过绝对需要的副本。</p><h1 id="b8d9" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">pBFT的优化</h1><p id="393d" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">我们无法使用pBFT减少消息的数量，因此我们只能减少消息所需的加密证明。<strong class="jq hu">MAC</strong>的CPU密集度比<strong class="jq hu"> RSA </strong>数字签名低几个数量级</p><p id="c515" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">因此，RSA数字签名仅用于<strong class="jq hu">视图更改</strong>和<strong class="jq hu">新视图</strong>消息，这些消息仅用于将备份副本提升为主副本。<strong class="jq hu">视图变化</strong>仅在主设备出现故障或<strong class="jq hu"> k </strong>请求被处理后发生。所有其他消息都使用MAC进行认证，如<strong class="jq hu"> SHA256 </strong>。</p><p id="0f62" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">Miguel Castro和Barbara Lisk是1999年pBFT论文<a class="ae kw" href="http://pmg.csail.mit.edu/papers/osdi99.pdf" rel="noopener ugc nofollow" target="_blank">的作者，论文</a>来自<a class="ae kw" href="http://www.mit.edu/" rel="noopener ugc nofollow" target="_blank">麻省理工学院</a>，他们发现MAC的计算速度比数字签名快三个数量级。<em class="lv">不过，他们是在比较MD5和1024位RSA签名，而我们现在通常使用SHA256和2048位RSA。</em></p><h1 id="ea2b" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">结论</h1><p id="a64a" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><strong class="jq hu"> pBFT </strong>通常被认为是一种不可扩展的算法。这种感觉通常是由<code class="eh la lb lc ld b"><strong class="jq hu">node == server</strong></code>的概念引起的，当pBFT部署在企业生产环境中时不应该是这种情况。</p><p id="af0a" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated"><strong class="jq hu"> pBFT </strong>应该与企业组织的联合体一起使用，其中每个组织代表网络<code class="eh la lb lc ld b"><strong class="jq hu">node == organization</strong></code>上的一个节点。然后，这些组织节点中的每一个都应该在节点的端点后面拥有实例集群和负载平衡器，以扩展计算能力并确保快速响应时间。</p><p id="25b3" class="pw-post-body-paragraph jo jp ht jq b jr lq jt ju jv lr jx jy jz ls kb kc kd lt kf kg kh lu kj kk kl hm dt translated">你觉得这篇文章怎么样？如果你喜欢它或者学到了什么，请留下你的掌声！<a class="ae kw" href="https://darkblock.io/" rel="noopener ugc nofollow" target="_blank"> DarkBlock.io </a>是一家区块链企业发展公司，我们一直在接纳新客户。通过<a class="ae kw" href="mailto:sheffield@darkblock.io" rel="noopener ugc nofollow" target="_blank"> sheffield@darkblock.io </a>联系我或访问我们的网站<a class="ae kw" href="https://darkblock.io/" rel="noopener ugc nofollow" target="_blank"> DarkBlock.io </a>！</p><blockquote class="km"><p id="62ce" class="kn ko ht bd kp kq kr ks kt ku kv kl ek translated">加入Coinmonks <a class="ae kw" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kw" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae kw" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="lx ir ht bd is ly lz ma iw mb mc md ja jz me mf je kd mg mh ji kh mi mj jm mk dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="ml mm ht jq b jr js jv jw jz mn kd mo kh mp kl mq mr ms mt dt translated"><a class="ae kw" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae kw" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae kw" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae kw" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="9db0" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" href="https://coincodecap.com/buy-shiba-bitbns" rel="noopener ugc nofollow" target="_blank">如何在Bitbns上购买柴犬(SHIB)币？</a> | <a class="ae kw" href="https://coincodecap.com/buy-floki-inu-token" rel="noopener ugc nofollow" target="_blank">买弗洛基</a></li><li id="af80" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" href="https://coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae kw" href="https://coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae kw" href="https://coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li><li id="29b5" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" href="https://coincodecap.com/best-cryptocurrency-blogs" rel="noopener ugc nofollow" target="_blank">十大最佳加密货币博客</a> | <a class="ae kw" href="https://coincodecap.com/youhodler-review" rel="noopener ugc nofollow" target="_blank"> YouHodler评论</a></li><li id="f196" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" href="https://coincodecap.com/ascendex-margin-trading" rel="noopener ugc nofollow" target="_blank"> AscendEx保证金交易</a> | <a class="ae kw" href="https://coincodecap.com/bitfinex-staking" rel="noopener ugc nofollow" target="_blank"> Bitfinex赌注</a></li><li id="f33b" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated"><a class="ae kw" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae kw" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated">开发人员的最佳加密API</li><li id="b359" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated">最佳<a class="ae kw" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="ml mm ht jq b jr mu jv mv jz mw kd mx kh my kl mq mr ms mt dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>