<html>
<head>
<title>Tokenising NFTs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">标记NFT</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/tokenising-nfts-c02a03d34445?source=collection_archive---------5-----------------------#2021-02-04">https://medium.com/coinmonks/tokenising-nfts-c02a03d34445?source=collection_archive---------5-----------------------#2021-02-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="e67e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这个标题听起来可能有点重复，因为NFT的T已经代表了<em class="jo"> token </em>，但是我可以向你保证你将要读到的是有意义的。</p><p id="be9a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">既然NFT已经开始以相当疯狂的价格出售，他们真的已经成为他们自己的资产。随着不可替代市场的蓬勃发展，DeFi也在平行增长，似乎有一种方法来标记NFT的所有权可能会成为一个非常方便的技巧。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/ea17ebfe492e5678bf32ee34ba53c95c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hf9Y8vZnnZYOG4Sp"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Photo by <a class="ae jp" href="https://unsplash.com/@ayahya09?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ali Yahya</a> on <a class="ae jp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d08c" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">NFT魂器</h1><p id="d57f" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">我不会说谎，这将是一篇技术文章。它围绕着我今天晚上下班后突然想到的一个概念验证，即<a class="ae jp" href="https://github.com/pringao-chevere/NFT-Horcrux" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> NFT魂器</strong>T15】。这个概念很简单，你发送一个NFT给代币商，然后它创建一个新的ERC-20代币合约来代表所有权的份额。总余额将转给您，您可以根据需要进行分配。</a></p><p id="0300" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要退出NFT，你需要拥有100%的股份。撤回将把NFT转让给你和ERC-20的合同。</p><p id="7230" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">注意:我对这个项目做了重大修改，并在后续文章中写道:</em> <a class="ae jp" rel="noopener" href="/coinmonks/tokenising-nfts-improving-liquidity-de9df6131ee9"> <strong class="is hu"> <em class="jo">标记NFTs——提高流动性</em> </strong> </a> <em class="jo">。从概念上讲，这篇新文章涵盖了您将在这里读到的所有内容，但是所描述的契约还增加了一些特性。</em></p><h1 id="0525" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">符号化</h1><p id="dcea" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">由于ERC-721的<code class="eh lj lk ll lm b">onERC721Received</code>功能中的气体限制会阻止写入，令牌化过程需要3个步骤:</p><h2 id="af74" class="ln kh ht bd ki lo lp lq km lr ls lt kq jb lu lv ku jf lw lx ky jj ly lz lc ma dt translated">第一步。最好的</h2><p id="0f65" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">第一步是调用Tokeniser契约上的<code class="eh lj lk ll lm b">prime</code>函数:</p><pre class="jr js jt ju fq mb lm mc md aw me dt"><span id="dd50" class="ln kh ht lm b fv mf mg l mh mi"><strong class="lm hu">function</strong> prime(<strong class="lm hu">address</strong> _nftAddress,<strong class="lm hu">uint</strong> _tokenId)</span></pre><p id="21a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这告诉合同你将要从你当前的地址存入一个特定的NFT。<code class="eh lj lk ll lm b">_nftAddress</code>是NFT合同的地址。</p><h2 id="ba15" class="ln kh ht bd ki lo lp lq km lr ls lt kq jb lu lv ku jf lw lx ky jj ly lz lc ma dt translated">第二步。安全转移自</h2><p id="281e" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">接下来，使用<code class="eh lj lk ll lm b">safeTransferFrom</code>将NFT转移到令牌化器契约:</p><pre class="jr js jt ju fq mb lm mc md aw me dt"><span id="ba0d" class="ln kh ht lm b fv mf mg l mh mi"><strong class="lm hu">function</strong> safeTransferFrom(<strong class="lm hu">address</strong> _from, <strong class="lm hu">address</strong> _to, <strong class="lm hu">uint256</strong> _tokenId,<strong class="lm hu"> bytes memory</strong> data) <strong class="lm hu">public</strong></span></pre><p id="5836" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您没有正确准备，该交易将会失败，但是使用<code class="eh lj lk ll lm b">transferFrom</code>不可能进行这样的检查，所以确保您使用前者是安全的。否则你可能会失去你的NFT(也就是说，如果你没有正确启动它，它就会卡在合同里)。</p><p id="6414" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你确实使用了<code class="eh lj lk ll lm b">transferFrom</code>,但是你已经启动了合同，那么它仍然会很好地工作。</p><h2 id="74bb" class="ln kh ht bd ki lo lp lq km lr ls lt kq jb lu lv ku jf lw lx ky jj ly lz lc ma dt translated">第三步。象征化</h2><p id="3da5" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">最后调用标记器契约上的<code class="eh lj lk ll lm b">tokenise</code>函数:</p><pre class="jr js jt ju fq mb lm mc md aw me dt"><span id="0753" class="ln kh ht lm b fv mf mg l mh mi"><strong class="lm hu">function</strong> tokenise(<strong class="lm hu">address</strong> _nftAddress,<strong class="lm hu">uint</strong> _tokenId, <strong class="lm hu">uint</strong> tokenCount)<strong class="lm hu"> public returns</strong>(<strong class="lm hu">address</strong> newTokenAddress)</span></pre><p id="92c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以使用<code class="eh lj lk ll lm b">tokenCount</code>指定想要将您的NFT分成多少个可替换的代币。这个函数返回新的可替换令牌契约的<strong class="is hu">地址</strong>，以防您需要它。由于前端原因，还会发出一个<code class="eh lj lk ll lm b">Create</code>事件。</p><pre class="jr js jt ju fq mb lm mc md aw me dt"><span id="07ea" class="ln kh ht lm b fv mf mg l mh mi"><strong class="lm hu">event </strong>Create(<strong class="lm hu">address indexed </strong>_nftAddress, <strong class="lm hu">uint indexed </strong>_tokenId, <strong class="lm hu">address </strong>location);</span></pre><h1 id="3b9e" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">退出</h1><p id="6bf5" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">撤销NFTs很简单，只需一步。如果一个地址拥有<em class="jo">所有</em>相应的令牌，那么他们只需在令牌化器契约上调用<code class="eh lj lk ll lm b">withdraw</code>。如果他们不这样做，它就会失败。</p><pre class="jr js jt ju fq mb lm mc md aw me dt"><span id="043d" class="ln kh ht lm b fv mf mg l mh mi"><strong class="lm hu">function</strong> withdraw(<strong class="lm hu">address</strong> _nftAddress,<strong class="lm hu">uint</strong> _tokenId) <strong class="lm hu">public</strong></span></pre><p id="ee78" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将自毁可替换令牌契约，并将NFT转移到<code class="eh lj lk ll lm b">msg.sender</code>。它还放出一个<code class="eh lj lk ll lm b">Destroy</code>事件:</p><pre class="jr js jt ju fq mb lm mc md aw me dt"><span id="34cb" class="ln kh ht lm b fv mf mg l mh mi"><strong class="lm hu">event</strong> Destroy(<strong class="lm hu">address indexed </strong>_nftAddress, <strong class="lm hu">uint indexed </strong>_tokenId, <strong class="lm hu">address </strong>location);</span></pre><h1 id="2744" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">尝试一下</h1><p id="f8d7" class="pw-post-body-paragraph iq ir ht is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hm dt translated">这只是一个概念的证明，一个我下班回家时想在晚上实现的想法。在<code class="eh lj lk ll lm b">0x72253babDF6ABdF09F90caA3640898A111F74795</code>的<strong class="is hu"> Kovan </strong> testnet上部署了一个Tokeniser供人们使用，但实际上我不认为有人会想使用这个确切的实现。</p><p id="f13e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">例如，有一些围绕少数利益相关者的问题需要一些奇特的DAO机制来解决。我只是想说明标记NFT是可能的(而且很容易！).</p><p id="d438" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">玩得开心。</p></div></div>    
</body>
</html>