<html>
<head>
<title>Espressif ESP32 Tutorial — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Espressif ESP32教程—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/espressif-esp32-tutorial-programming-arduino-ide-caaf585f1d80?source=collection_archive---------7-----------------------#2018-07-13">https://medium.com/coinmonks/espressif-esp32-tutorial-programming-arduino-ide-caaf585f1d80?source=collection_archive---------7-----------------------#2018-07-13</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="499b" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">使用Arduino IDE编程</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/3d997dd2d6de976987051e5623e72b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*fivzy6VslJe1nLdi.jpg"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">Duinotech ESP32 Dev Board</figcaption></figure><p id="6ee4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">正如前一篇文章中所承诺的，让我们看看我们可以用不同的方式来编程我们的ESP32。我将从Arduino IDE开始，因为我认为这将是最常见的选择。在这篇文章中，我将只关注物联网的“hello world ”,即闪烁的LED。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/121ac2c845b580024b5628694230dad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*i-mr4-NZH7vIx_5O.png"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">ESP32 Pin Map</figcaption></figure><p id="de73" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">一旦我选择了一个IDE，我们将使用ESP32做一些有用的事情(敬请关注)。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="fe ff ji"><img src="../Images/fc475ee843f892d2a546dcbb3dc66706.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*DEDdPlCA3IQcf3j1.png"/></div></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">Install ESP32 Tool Chain via Terminal</figcaption></figure><p id="5651" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">目前还不能通过Boards Manager安装对ESP32 IC的支持，因此</p><p id="b046" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><a class="ae ku" href="https://github.com/espressif/arduino-esp32/blob/master/README.md#installation-instructions" rel="noopener ugc nofollow" target="_blank">应该使用GitHub页面</a>上的说明。对于Mac OS来说，这非常简单。</p><ol class=""><li id="ea67" class="kv kw ht jw b jx jy ka kb kd kx kh ky kl kz kp la lb lc ld dt translated">安装最新版本的Arduino IDE。</li><li id="22d9" class="kv kw ht jw b jx le ka lf kd lg kh lh kl li kp la lb lc ld dt translated">打开终端并执行以下命令(复制-&gt;粘贴并按回车键):</li></ol><pre class="jj jk jl jm fq lj lk ll bn lm ln bi"><span id="3700" class="lo lp ht lk b be lq lr l ls lt">mkdir -p ~/Documents/Arduino/hardware/espressif &amp;&amp; \ <br/>cd ~/Documents/Arduino/hardware/espressif &amp;&amp; \ <br/>git clone https://github.com/espressif/arduino-esp32.git esp32 &amp;&amp; \ <br/>cd esp32 &amp;&amp; \ <br/>git submodule update --init --recursive &amp;&amp; \ <br/>cd tools &amp;&amp; \ <br/>python get.py</span></pre><p id="17b4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">3.重新启动Arduino IDE。</p><p id="8ecf" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">对用于Arduino的ESP32的支持正在不断开发中，但是一旦所有东西都安装好了，草图的编写和上传过程与其他板类似。如果您使用的是Jaycar板，请选择ESP32 Dev Module作为板类型，并确保选择了正确的串行端口。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/5e1016eb9926c91641866b79d60b4fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/0*eb4LWuxrdKqCG4vl.png"/></div></figure><p id="45d6" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">通过USB电缆将您的ESP32开发板连接到您的PC，您应该准备好编译和上传您的第一个程序。首先检查您是否可以看到连接到ESP32的端口。在我运行High Sierra的MacBook Pro(2015年初)上，Duinotech ESP32开发板上的端口无法识别。如果发生这种情况，您可能需要为该主板安装USB串行转换器的驱动程序。它使用CP2102 IC，驱动程序可在Silicon Labs CP2102网站上找到:</p><p id="23cc" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><a class="ae ku" href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers" rel="noopener ugc nofollow" target="_blank">https://www . sil ABS . com/products/development-tools/software/USB转uart-bridge-vcp-drivers </a>。</p><p id="6cb8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">为您的操作系统下载正确的驱动程序版本后。您将需要安装它。在Mac上，这涉及到解压缩档案，安装DMG磁盘映像，然后运行硅实验室VCP驱动程序。你需要在安全和隐私偏好设置中提供运行该驱动程序的权限(这将弹出)。现在，您应该能够在Arduino IDE中看到该端口(无需重新启动或重启IDE)。</p><p id="984c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">打开闪烁草图(<code class="eh lv lw lx lk b">File -&gt; Examples -&gt; 01. Basics -&gt; Blink</code>)，编译并下载到您的ESP32。您可能会得到以下错误:</p><blockquote class="ly lz ma"><p id="75f9" class="ju jv mb jw b jx jy iu jz ka kb ix kc mc ke kf kg md ki kj kk me km kn ko kp hm dt translated">“LED_BUILTIN”未在此范围内声明</p></blockquote><p id="e794" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这里有几个新玩家的陷阱。</p><p id="ca16" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">标准Arduino板在变量文件中定义了LED_BUILTIN宏，但显然ESP32 Dev板没有。对于Arduino，内置LED通常连接到引脚13，在ESP32上，它可以是任何东西。通常怀疑是2号、5号或16号针脚。您可以通过在草图顶部setup()函数上方添加以下行来修复此错误。例如，如果您的LED连接到引脚2:</p><pre class="jj jk jl jm fq lj lk ll bn lm ln bi"><span id="dd86" class="lo lp ht lk b be lq lr l ls lt">int LED_BUILTIN = 2;</span></pre><p id="6d48" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">不幸的是，Duinotech ESP32开发板似乎没有连接到用户可控引脚的LED。当通过串行端口通信时，它有一个闪烁的蓝色LED。很难100%确定这个LED是不可控的，因为我找不到这个电路板的原理图。大多数开发板都有一个红色电源LED和一个蓝色内置LED供用户控制。无论如何，我求助于连接一个带限流电阻的外部LED到GPIO 2。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/00b3d18e8159732ae140e951b412300f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*s83HeOJKn6qIZmqf.jpg"/></div></figure><p id="0553" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">请注意，当EP32开发板放置在标准尺寸的面包板上时，将只有一排备用引脚，请确保这是在您想要连接的一侧。限流电阻的计算公式如下:</p><p id="6fde" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">电阻值= (Vs — VF)/ IF = 160欧姆(我用了150欧姆，因为那是我的值)</p><p id="6869" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">其中:</p><p id="4ce5" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">Vs =输入电源DC电压= 3.3V <br/> VF = LED正向电压= 1.7V <br/> IF = LED电流= 10 mA</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/8be157ebbb3472b5eb5be0e7a53835d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*R9H3erk7xrY8ZCb2.jpg"/></div></figure><p id="b402" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我使用LCR计测量LED正向压降(VF ),但您可以从数据手册中获得。</p><p id="e4b4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我不需要这样做，但如果你上传有问题，请尝试按住“启动”按钮，同时按下并释放“RST”按钮。这将使主板进入引导加载模式，以允许上传。</p><p id="36b9" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">当你在这里的时候，你可能想尝试一些提供的其他ESP32示例草图。例如，ChipID ( <code class="eh lv lw lx lk b">File -&gt; Examples -&gt; ESP32 -&gt; ChipID</code>)将在串行监视器中显示您的芯片MAC地址。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/5dacae9e404b53329fb0cbd919254937.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*5kDzxo6m3kFlqNO7.png"/></div></figure><p id="bef0" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">所有这些都不太痛苦。我认为Arduino IDE将是一个很好的选择，如果你已经熟悉它，只要你需要的功能是可用的。并非所有的库都与ESP32兼容(例如，<code class="eh lv lw lx lk b">analogWrite</code>还不可用，尽管还有一些工作要做)。</p><div class="mf mg fm fo mh mi"><a rel="noopener follow" target="_blank" href="/coinmonks/espressif-esp32-tutorial-programming-esp-idf-29f297837d76"><div class="mj ab ej"><div class="mk ab ml cl cj mm"><h2 class="bd hu fv z el mn eo ep mo er et hs dt translated">Espressif ESP32教程—编程(ESP-IDF)</h2><div class="mp l"><h3 class="bd b fv z el mn eo ep mo er et ek translated">ESP-32的本地软件开发框架被称为Espressif物联网开发框架(ESP-IDF)…</h3></div><div class="mq l"><p class="bd b gc z el mn eo ep mo er et ek translated">medium.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw jo mi"/></div></div></a></div></div><div class="ab cl mx my hb mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="hm hn ho hp hq"><p id="3ae4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="mb">如果你喜欢这篇文章，并愿意帮助支持我的写作，那么请</em> <a class="ae ku" href="https://reefwing.medium.com/membership" rel="noopener"> <em class="mb">订阅成为一个中等会员</em> </a> <em class="mb">。我会得到你的订阅费的一部分，你可以访问媒体上的每个故事。或者，你可以</em> <a class="ae ku" href="https://ko-fi.com/davidsuch" rel="noopener ugc nofollow" target="_blank"> <em class="mb">给我买杯咖啡</em> </a> <em class="mb">！</em></p><div class="mf mg fm fo mh mi"><a href="https://reefwing.medium.com/membership" rel="noopener follow" target="_blank"><div class="mj ab ej"><div class="mk ab ml cl cj mm"><h2 class="bd hu fv z el mn eo ep mo er et hs dt translated">用我的推荐链接加入媒体-大卫这样</h2><div class="mp l"><h3 class="bd b fv z el mn eo ep mo er et ek translated">阅读大卫·瑟奇(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="mq l"><p class="bd b gc z el mn eo ep mo er et ek translated">reefwing.medium.com</p></div></div><div class="mr l"><div class="ne l mt mu mv mr mw jo mi"/></div></div></a></div></div></div>    
</body>
</html>