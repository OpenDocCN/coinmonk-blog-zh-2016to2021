<html>
<head>
<title>Random Number at Runtime — NEO SmartContract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">运行时的随机数— NEO SmartContract</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/random-number-at-runtime-neo-smartcontract-60c4e6cb0bb1?source=collection_archive---------5-----------------------#2018-08-19">https://medium.com/coinmonks/random-number-at-runtime-neo-smartcontract-60c4e6cb0bb1?source=collection_archive---------5-----------------------#2018-08-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/ef0703e7ed58b8bf94f24d0b608cb27c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ye-mwvDTNQ2fCaICnno72Q.png"/></div></div></figure><blockquote class="jb"><p id="b371" class="jc jd ht bd je jf jg jh ji jj jk jl ek translated">我看过这个帖子:<a class="ae jm" rel="noopener" href="/verisfoundation/using-random-numbers-in-neo-smart-contracts-af7fecd2a23d">在Neo智能合约中使用随机数</a></p></blockquote><p id="6b48" class="pw-post-body-paragraph jn jo ht jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj jl hm dt translated">读完之后，我想到了一个问题。如果我们使用上面的代码在同一个块中发送两个事务？</p><p id="432f" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">答案是，我们在这个块中的所有交易都有相同的数字。</p><p id="6bab" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">新问题:<strong class="jp hu">如何在NEO网络内部获得每笔交易的随机数？</strong></p><p id="f6b5" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">我期待的答案在与<a class="kp kq gr" href="https://medium.com/u/78defa96e5f4?source=post_page-----60c4e6cb0bb1--------------------------------" rel="noopener" target="_blank">潘石屹</a>的一次对话中诞生了。</p></div><div class="ab cl kr ks hb kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hm hn ho hp hq"><h1 id="24d4" class="ky kz ht bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated"><strong class="ak">智能合约</strong></h1><figure class="lw lx ly lz fq iu"><div class="bz el l di"><div class="ma mb l"/></div></figure><h2 id="a1cc" class="mc kz ht bd la md me mf le mg mh mi li jy mj mk lm kc ml mm lq kg mn mo lu mp dt translated"><strong class="ak">编译上面的代码以获得AVM </strong></h2><blockquote class="mq mr ms"><p id="7111" class="jn jo mt jp b jq kk js jt ju kl jw jx mu km ka kb mv kn ke kf mw ko ki kj jl hm dt translated">00c 56 b 5861650700616 c 756652 c 56 b 6 c 766 b 00527 AC 46168295379737574696 f 6e 456 e 67696 e 652 e 476574536372697074436 f 6e<br/>7461696 e 655</p></blockquote><p id="9438" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">在某个privatenet上部署契约后，我们现在可以调用那个智能契约并查看结果。</p><h2 id="0941" class="mc kz ht bd la md me mf le mg mh mi li jy mj mk lm kc ml mm lq kg mn mo lu mp dt translated"><strong class="ak">调用</strong></h2><p id="9606" class="pw-post-body-paragraph jn jo ht jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj jl hm dt translated">我设法将两个事务放在同一个块上，如下所示:</p><figure class="lw lx ly lz fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nc"><img src="../Images/9afd25901fe84215687f58e47193511c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hr7MVJHnaVeGK7uEzOliEw.png"/></div></div></figure><p id="16b1" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">检查这两个事务的结果:</p><blockquote class="mq mr ms"><p id="3693" class="jn jo mt jp b jq kk js jt ju kl jw jx mu km ka kb mv kn ke kf mw ko ki kj jl hm dt translated">TX1:e 01d 0 e 5 f 9 C2 E1 BF 5b 4205386 f 9 a 68 CFA 066 b 0904 BC 789 e 9 e 86 e 7 a 5d 8 b 803 c 98 a结果:8 AC 903 b 8 a 5 e 7869 e 9 e 78 BC 04096 b 06 fa 8 ca 6 f 9865320 B4 f 51 b 2 e 9 C5 f 0 e 1 de 0</p><p id="cb1d" class="jn jo mt jp b jq kk js jt ju kl jw jx mu km ka kb mv kn ke kf mw ko ki kj jl hm dt translated">TX2:b 66 abee 7a 324 a 73566 ab 786 a3 b 3909 F5 d 8990 c 89 ad 593 BC 5d 15 cc 22 CBF 7 a9 ee 8结果:e 89 e 7 ab F2 cc 25 CD 1c 53 b 59 ad 890 c 99d 8 f 509393 b 6 a 78 ab 6635 a 724 a 3 e 7 be 6 ab 6</p></blockquote><p id="ee72" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">如你所见，<strong class="jp hu">我们可以</strong>在每笔交易中使用随机数，正因为如此，我们现在可以有很多想法，而不需要很多步骤。</p><p id="cdb7" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">我们实际上可以为每个事务创建一个运行时随机数<strong class="jp hu">,那么我们该如何改进呢？答案就在下面。</strong>再次，<a class="kp kq gr" href="https://medium.com/u/78defa96e5f4?source=post_page-----60c4e6cb0bb1--------------------------------" rel="noopener" target="_blank">潘彦祖</a>和我一起创造了这个例子，所以享受吧！！</p><h1 id="e5fa" class="ky kz ht bd la lb nd ld le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv dt translated">智能合同—改进版</h1><figure class="lw lx ly lz fq iu"><div class="bz el l di"><div class="ma mb l"/></div></figure><h2 id="3e75" class="mc kz ht bd la md me mf le mg mh mi li jy mj mk lm kc ml mm lq kg mn mo lu mp dt translated">编译上面的代码以获得AVM</h2><blockquote class="mq mr ms"><p id="ad7d" class="jn jo mt jp b jq kk js jt ju kl jw jx mu km ka kb mv kn ke kf mw ko ki kj jl hm dt translated">55 c56b 51616556016 c 766 b 00527 AC 46 c 766 b 00 c 35 a 617 c 6583006 c 766 b 51<br/>527 AC 46 c 766 b 51 c 353617 c 6571006 c 766 b 52527 AC 46 c 766 b 52 c 353617 c 65<br/>5f 006 c 766 b 53527</p></blockquote><h2 id="b970" class="mc kz ht bd la md me mf le mg mh mi li jy mj mk lm kc ml mm lq kg mn mo lu mp dt translated">调用结果</h2><p id="1746" class="pw-post-body-paragraph jn jo ht jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj jl hm dt translated">因为第一部分已经证明了每笔交易可能有不同的数字，所以我在这里只使用一个结果:</p><pre class="lw lx ly lz fq ni nj nk nl aw nm dt"><span id="2cab" class="mc kz ht nj b fv nn no l np nq">[<br/>  {<br/>    "jsonrpc": "2.0",<br/>    "id": 5,<br/>    "result": {<br/>      "txid": "0xa92f338a79e6948a652b5d514f6ed3f06d8f61c45596ef00c4c154f974a8b9c0",<br/>      "executions": [<br/>        {<br/>          "trigger": "Application",<br/>          "contract": "0x6225f0a52de0270b861fd3cb1b330fdf7a2721ba",<br/>          "vmstate": "HALT, BREAK",<br/>          "gas_consumed": "0.908",<br/>          "stack": [],<br/>          "notifications": [<br/>            {<br/>              "contract": "0x4c04655314fe10da374b7ee056459e311aae86fc",<br/>              "state": {<br/>                "type": "Array",<br/>                "value": [<br/>                  {<br/>                    "type": "ByteArray",<br/>                    "value": "a9"<br/>                  },<br/>                  {<br/>                    "type": "ByteArray",<br/>                    "value": "21ad0e73178610e1c24b"<br/>                  },<br/>                  {<br/>                    "type": "ByteArray",<br/>                    "value": "b1342d"<br/>                  },<br/>                  {<br/>                    "type": "ByteArray",<br/>                    "value": "9821bd"<br/>                  },<br/>                  {<br/>                    "type": "ByteArray",<br/>                    "value": "9368e892f1"<br/>                  }<br/>                ]<br/>              }<br/>            }<br/>          ]<br/>        }<br/>      ]<br/>    }<br/>  }<br/>]</span></pre><p id="416d" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">正如你所看到的，这个代码生成的所有数字都是互不相同的。</p><h1 id="a1b6" class="ky kz ht bd la lb nd ld le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv dt translated">附加说明</h1><p id="75f3" class="pw-post-body-paragraph jn jo ht jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj jl hm dt translated">有了这个随机数，你也可以像Jason L Perry在我开始链接的文章中所做的一样。</p><p id="8374" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">如果您想要一个范围内的随机数，您可以执行以下操作:</p><figure class="lw lx ly lz fq iu"><div class="bz el l di"><div class="ma mb l"/></div></figure></div><div class="ab cl kr ks hb kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hm hn ho hp hq"><p id="52b8" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">非常感谢丹尼尔·潘，他在这个问题上给了我很多讨论和建议。</p><p id="d71f" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">再次感谢<a class="kp kq gr" href="https://medium.com/u/8c3177ff38c2?source=post_page-----60c4e6cb0bb1--------------------------------" rel="noopener" target="_blank">杰森·L·佩里</a>给我提供了一份有趣的阅读材料，这是在NEO SmartContract上使用随机数这一新想法的第一步。</p><p id="3446" class="pw-post-body-paragraph jn jo ht jp b jq kk js jt ju kl jw jx jy km ka kb kc kn ke kf kg ko ki kj jl hm dt translated">对于那些想知道如何处理NEO SmartContract的人来说，GitHub上有一个名为<a class="ae jm" href="https://github.com/FabioRick/HowToNEO" rel="noopener ugc nofollow" target="_blank"> HowToNEO </a>的<a class="ae jm" href="https://github.com/FabioRick" rel="noopener ugc nofollow" target="_blank"> mine </a>资源库，这只是一个开始，但我会尽快把很多东西放在那里！！</p></div><div class="ab cl kr ks hb kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hm hn ho hp hq"><h1 id="49bf" class="ky kz ht bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">修订本</h1><p id="d039" class="pw-post-body-paragraph jn jo ht jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj jl hm dt translated">01-将块哈希与事务哈希一起使用。</p><blockquote class="jb"><p id="ad65" class="jc jd ht bd je jf nr ns nt nu nv jl ek translated"><a class="ae jm" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nx ny nz oa ob iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nw"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>