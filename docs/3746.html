<html>
<head>
<title>Adding a new Orderer in Running Hyperledger Fabric v2.2 Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在运行Hyperledger Fabric v2.2网络中添加新订购者</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/adding-a-new-orderer-in-running-hyperledger-fabric-v2-2-network-4c90c8315ae1?source=collection_archive---------1-----------------------#2020-12-16">https://medium.com/coinmonks/adding-a-new-orderer-in-running-hyperledger-fabric-v2-2-network-4c90c8315ae1?source=collection_archive---------1-----------------------#2020-12-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/96c4d507aed744c5205d1d43a92d4734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-H8mfBhBBS47ZolIhLIxIA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><h1 id="66c2" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">1.概观</h1><p id="76ab" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">在本文中，我们将学习Hyperledger fabric的一个高级概念，这在生产级环境中通常是必需的。我们将在没有任何停机时间或干扰HLF网络的情况下，向运行中的raft集群添加一个新的订购者。基于Raft的订购服务是在1.4.1版本中引入的，它成为比Kafka更好的集群解决方案，并且最近由于其<strong class="kf hu">崩溃容错</strong> (CFT)特性而成为v2.0中推荐的订购服务设置。在本次演示中，我们将使用v2.2，因为它是当前的LTS版本。</p><blockquote class="lb lc ld"><p id="e568" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu">TL dr</strong><a class="ae ln" href="http://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank"><strong class="kf hu">源代码</strong> </a> <strong class="kf hu">可以在这里找到。<br/> <em class="ht">同样，查看我的</em> </strong> <a class="ae ln" href="http://bit.ly/hlf-multihost-deployment" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu"> <em class="ht">课程上的超帐结构部署</em> </strong> </a></p></blockquote><h1 id="7c05" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">2.术语</h1><ol class=""><li id="d858" class="lo lp ht kf b kg kh kk kl ko lq ks lr kw ls la lt lu lv lw dt translated"><strong class="kf hu"> <em class="le">应用通道- </em> </strong>它用于应用目的，当我们构建和部署链码时，它是在<strong class="kf hu">应用通道</strong>例如<em class="le"> mychannel上完成的。</em></li><li id="0fb0" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated"><strong class="kf hu"> <em class="le">系统通道- </em> </strong>它也被称为<strong class="kf hu"> <em class="le">订购者系统通道，</em> </strong>这个通道的用途是为了订购者，它是引导或创建的第一个通道。在<a class="ae ln" href="https://github.com/hyperledger/fabric-samples/tree/release-1.4" rel="noopener ugc nofollow" target="_blank">布样发布中，v1.4 </a>被命名为<code class="eh mc md me mf b"><em class="le">byfn-sys-channel</em></code><em class="le"/>，但在<a class="ae ln" href="https://github.com/hyperledger/fabric-samples/" rel="noopener ugc nofollow" target="_blank">布样发布v2.2 </a>中使用了术语<code class="eh mc md me mf b"><em class="le">system-channel</em></code>。</li></ol><p id="65cc" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu">系统通道</strong>和<strong class="kf hu">应用通道</strong>都包含订购者的信息。当我们向正在运行的结构网络添加新的订购者时，我们需要先将其添加到系统通道，然后添加到应用程序通道，然后新添加的订购者才能为应用程序提供服务。</p><h1 id="a879" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">3.了解渠道更新流程</h1><p id="4237" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">更新频道无论是<code class="eh mc md me mf b">system channel</code>还是<code class="eh mc md me mf b">Application channel</code>，典型的流程都是一样的。下面是这个过程中涉及的步骤。</p><ol class=""><li id="2331" class="lo lp ht kf b kg lf kk lg ko mg ks mh kw mi la lt lu lv lw dt translated">从通道中获取最新的配置块(PB格式)。</li><li id="6a9c" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">将配置块转换(解码)成JSON，并提取感兴趣的数据部分。</li><li id="c00a" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">使用编辑器或jq工具添加/修改配置。</li><li id="6f72" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">将修改后的JSON文件转换(编码)回PB格式。</li><li id="e723" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">将步骤2的输出转换(编码)为PB格式。</li><li id="a107" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">计算步骤4和步骤5的输出之间的差值(delta)。结果也是PB格式的。</li><li id="8318" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">将差异(步骤6的输出)转换(解码)为JSON格式。</li><li id="e369" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">插入信封。</li><li id="8376" class="lo lp ht kf b kg lx kk ly ko lz ks ma kw mb la lt lu lv lw dt translated">将JSON文件转换(编码)回PB格式。</li></ol><h1 id="4f2b" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">4.网络:设置</h1><p id="6c09" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">对于这个演示，我使用示例中提供的<code class="eh mc md me mf b"><a class="ae ln" href="http://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank">test-network</a></code>。我已经添加了几个<a class="ae ln" href="http://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank"> shell脚本</a>并删除了未使用的代码，用户可以使用这个库。</p><p id="34ef" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">面料样品中提供的<code class="eh mc md me mf b">test-network</code>只有一个订购者提供木筏订购服务。现在，我们将向网络中再添加一个订购者(订购者2 ),通过这种方式，我们可以添加n个订购者，所有这些都将在运行的网络中完成。</p><p id="de3f" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu">步骤1。</strong>我们将以<code class="eh mc md me mf b">mychannel(Application Channel)</code>和CouchDB作为状态数据库来启动网络，我正在使用标签为2.2的docker图像</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="18a6" class="mr jg ht mf b fv ms mt l mu mv">cd fabric-samples-advance-topics/test-network<br/>./network.sh up createChannel -c mychannel -s couchdb -i 2.2</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mw"><img src="../Images/0ed5a83d9942cab6f4a6b6d838420ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJJKNSxIHSiJ80R4fdEr-Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="636c" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu">步骤2。</strong>部署名称为<em class="le">基本</em>版本为<em class="le"> 1 </em>的链码。我们正在使用<code class="eh mc md me mf b">asset-transfer-basic</code>链码的<code class="eh mc md me mf b">golang</code>版本。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="5fb1" class="mr jg ht mf b fv ms mt l mu mv">./network.sh deployCC -ccn basic -ccv 1</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mx"><img src="../Images/bcd1dc50d5c64c9341afb839f7eae17b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0RZHOpE8cF1bu0nxXv8Kxw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="c2bc" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">现在我们的网络已经建立并运行了，我们可以通过调用一些针对我们已经部署的链代码的事务来测试它。为此，我们将启动一个cli容器来执行一些事务。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="799c" class="mr jg ht mf b fv ms mt l mu mv">docker-compose -f docker/docker-compose-cli.yaml up -d</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff my"><img src="../Images/baa5aaa4874f7bcaaf130d9fbd1a720d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HyQIza6D-z7q1VOlr968lA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="b4ef" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">一旦我们的cli容器启动并运行，我们将调用一些事务。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="0948" class="mr jg ht mf b fv ms mt l mu mv">./scripts/transaction-ord1.sh</span></pre><p id="cbc8" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">该脚本将使用链码创建一个资产，然后从链码中查询所有资产。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mz"><img src="../Images/5fffa05b2c032a5b6cf991e5b5bd8497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nd18qbuVaF1heSOFnimybQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="ae51" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">现在我们的网络设置部分已经完成，我们将进入设置订购者的下一部分</p><h1 id="3060" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">5.设置新订购者</h1><p id="9fa7" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">这一步是最重要的一步。</p><ol class=""><li id="868e" class="lo lp ht kf b kg lf kk lg ko mg ks mh kw mi la lt lu lv lw dt translated"><strong class="kf hu"> <em class="le">调出订购者CLI容器<br/> </em> </strong>我们首先调出<code class="eh mc md me mf b">orderer-cli</code>，因为脚本中的所有命令都是在这个容器上发出的。我们是<strong class="kf hu">不是</strong>要用<strong class="kf hu"> <em class="le">第4节</em> </strong>用的<code class="eh mc md me mf b">cli</code>容器。</li></ol><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="6a02" class="mr jg ht mf b fv ms mt l mu mv">docker-compose -f docker-compose-orderer-cli.yaml up -d</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff na"><img src="../Images/efe225e9fcb6e8c81cdb6a6c9f2f677e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8RzaA38FLatdYjpM3TZXDQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="66da" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">2.<strong class="kf hu"> <em class="le">为订购者2 <br/> </em> </strong>创建加密材料我们将更新<code class="eh mc md me mf b">crypto-config-orderer.yaml</code>文件并为<code class="eh mc md me mf b">orderer2</code>添加配置，并将为订购者2生成证书。<br/><br/>T9】</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nb"><img src="../Images/5cdcef141fcb5e12bde268a1c9a25ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*orUP4_DoEyWuIIw762xqAA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="9e4c" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">3.<strong class="kf hu"> <em class="le">将TLS添加到系统通道<br/> </em> </strong> <em class="le">我们将使用脚本</em> <code class="eh mc md me mf b"><em class="le">addTLSsys-channel.sh</em></code> <em class="le">来执行第3节</em>  <em class="le">中提到的所有步骤。在更新</em> <code class="eh mc md me mf b"><em class="le">system-channel</em></code> <em class="le">的这一步中，我们将添加本节第2步中生成的编码base64版本的TLS证书。TLS证书将在</em> <code class="eh mc md me mf b">ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt</code>颁发</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="6785" class="mr jg ht mf b fv ms mt l mu mv">./scripts/addTLSsys-channel.sh</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nc"><img src="../Images/22bea700c15f90a38344c02ea589a5ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v42eyYD8rGWZpZQXD6EFhw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="f087" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">4.<strong class="kf hu"> <em class="le">获取最新的配置块<br/> </em> </strong>更新完成后，我们需要最新的配置块。如上所述，最新的配置块<code class="eh mc md me mf b">system channel</code>被用作订单2的起源块。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="2820" class="mr jg ht mf b fv ms mt l mu mv">./scripts/fetchConfigBlock.sh</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nd"><img src="../Images/3d8707cb0871d177a38d43f3b219a07d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8x_dNeM94LalWcxOBq_b0Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="0df8" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">我们在<code class="eh mc md me mf b">channel-artifacts </code>目录中看到了<code class="eh mc md me mf b">latest_config.block</code>。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ne"><img src="../Images/9eb25b66c8d45cbd53d1f9bf51623642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CBQ1VEGBmWyjzVscqVdzzQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="3446" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">5.<strong class="kf hu"> <em class="le">调出订单2容器<br/> </em> </strong>现在我们有了包含订单2的TLS证书的最新配置块，现在我们可以调出订单2。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="2577" class="mr jg ht mf b fv ms mt l mu mv">docker-compose -f docker-compose-orderer.yaml up -d</span></pre><figure class="mj mk ml mm fq iu"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="00c3" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">在第35行，我们可以看到<code class="eh mc md me mf b">latest_config.block</code>被用作orderer2的起源块。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nh"><img src="../Images/5f0b26f2f7b63caedb804ab0676480ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgKS8zrZe6doLRwp_Pee6Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="c2e8" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">6.<strong class="kf hu"> <em class="le">向系统通道添加新订购者端点<br/> </em> </strong>该脚本类似于步骤3，不同之处在于内容被修改(第5行)。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="db44" class="mr jg ht mf b fv ms mt l mu mv">./scripts/addEndPointSys-channel.sh</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ni"><img src="../Images/7f1acf1cd44786757edba4509a555a89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Da3NHgbltLX71pOSpZ0F9Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="a55f" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu">7<em class="le">。观察Orderer2日志<br/> </em> </strong>完成上一步后，系统通道准备就绪。当我们查看orderer2上的日志时，我们可以发现一些有趣的信息。</p><p id="ce5b" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">订购者6现在可以看到系统通道<code class="eh mc md me mf b">system-channel</code>中的所有现有节点。此外，订购者2已经从集群中的其他订购者那里了解到应用程序通道mychannel的存在。然而，它声称“不属于渠道<code class="eh mc md me mf b">mychannel</code>”。原因是订单6还没有添加到我的渠道。这将在接下来的步骤中完成。<br/>我们还可以对比一下<code class="eh mc md me mf b">orderer.example.com</code>和<code class="eh mc md me mf b">orderer2.example.com</code>的内容。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nj"><img src="../Images/f9a9ef5764d463283a6bea8a2e6da715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UuzWQNv08t-qsvhENOCWeA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="0cbe" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">首先说说<code class="eh mc md me mf b">system-channel</code></p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nk"><img src="../Images/09dc361d33dfb2b15e817fb0ec791478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JHRTb-96zJ4DNGicTLp_-g.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="3dc1" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">它们一样长。</p><p id="5da6" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">现在谈谈<code class="eh mc md me mf b"><em class="le">mychannel</em></code></p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nl"><img src="../Images/b8e37c9c6f7b7c5c337a3759424cce03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0H_scSNSxCD-rK5Elk9doA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="99cf" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">它们长度不同。这是因为订单2还不属于<code class="eh mc md me mf b"><em class="le">mychannel</em></code>。</p><p id="dcb9" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">7.<strong class="kf hu"> <em class="le">将TLS添加到申请通道<br/> </em> </strong> <em class="le">这一步类似于我们在本节步骤3中所做的。唯一不同的是，这次我们将TLS证书(以based64编码)添加到</em> <code class="eh mc md me mf b"><em class="le">mychannel(Application channel)</em></code> <em class="le">。</em></p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="b317" class="mr jg ht mf b fv ms mt l mu mv">./scripts/addTLSapplication-channel.sh</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nm"><img src="../Images/f2550c52ecdb5700b2302f7e59356e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2iUMzivgv-2CN4b8vGUOA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="1989" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">8.<strong class="kf hu"> <em class="le">添加新的订购者端点到应用程序通道<br/> </em> </strong> <em class="le">这个步骤类似于我们在本节的步骤6中所做的。唯一不同的是，这次我们将TLS证书(以based64编码)添加到</em> <code class="eh mc md me mf b"><em class="le">mychannel(Application channel)</em></code> <em class="le">。</em></p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="932e" class="mr jg ht mf b fv ms mt l mu mv">./scripts/addEndPointapplication-channel.sh</span></pre><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nd"><img src="../Images/d8d4a9912d828583729423be8a2dcde4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tqhgPMjKOruevcGW1GQTnQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="9328" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> <em class="le"> 9。遵守秩序2 <br/> </em> </strong>解决事情需要一些时间(文件中提到的五分钟)。过了一会儿，我们在orderer2上看到了这个日志。</p><p id="9a35" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">它告诉我们订单2现在可供<code class="eh mc md me mf b">mychannel</code>使用。<br/>同样我们也可以在<code class="eh mc md me mf b">mychannel</code>比较<code class="eh mc md me mf b">orderer.example.com</code>和<code class="eh mc md me mf b">orderer2.example.com</code>的内容:</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nn"><img src="../Images/0c7a950f5b76613a21b3797919cae07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0CDhK00kHXOvpcBYEZ78aQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">how to add new orderer in hyperledger fabric</figcaption></figure><p id="1a6a" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu">10<em class="le">。测试我们新添加的订单2 </em> </strong></p><p id="826f" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">我们可以通过新添加的订单2进行一些交易。</p><pre class="mj mk ml mm fq mn mf mo mp aw mq dt"><span id="ab7b" class="mr jg ht mf b fv ms mt l mu mv">./scripts/transaction-ord2.sh</span></pre><div class="mj mk ml mm fq ab cb"><figure class="no iu np nq nr ns nt paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/767c85d55822791c8eb913d40ef23acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*2S2alnxL01iMRH0W8eEiDA.png"/></div></figure><figure class="no iu nu nq nr ns nt paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><img src="../Images/1754abbd93a7da50efb76ed6b44daf83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*tXOe3qUQohGSeKrDmnPsgA.png"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek nv di nw nx">how to add new orderer in hyperledger fabric</figcaption></figure></div><h1 id="1b6d" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">6.<strong class="ak">总结</strong></h1><p id="4df5" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">在本文中，我们看到了如何将订购者添加到正在运行的Hyperledger Fabric网络中，我知道这是一项有点乏味的任务，但在一些shell脚本的帮助下，我们可以在几分钟内完成这项任务。我添加了一个脚本<code class="eh mc md me mf b"><a class="ae ln" href="http://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank">addOrderer.sh</a></code>,可以完成我们在上面学到的所有工作。你可以在这里找到脚本<a class="ae ln" href="http://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank"/>。</p><blockquote class="lb lc ld"><p id="04d0" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu">在多主机</strong> 上查看我的 <a class="ae ln" href="https://www.udemy.com/course/learn-to-deploy-hyperledger-fabric-v22-on-multihost/?referralCode=8AF12D11DDC9A3D5B636" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu">关于Hyperledger Fabric部署的课程</strong></a></p></blockquote><p id="5e96" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">如果你觉得这篇文章很有帮助，请点击拍手按钮，并跟随我阅读更多这样的信息丰富的文章。</p><p id="9065" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">你可以在<a class="ae ln" href="https://linkedin.com/in/adityajoshi12" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上找到我或者在<a class="ae ln" href="https://github.com/adityajoshi12" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上跟踪我？如果这对你来说太社交化了，如果你想和我讨论技术，就给adityaprakashjoshi1@gmail.com发封邮件。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ny"><img src="../Images/b8305e339c064263f6a7f0eabef7292a.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/1*og4TxQHbtJMFuTILCiztAw.gif"/></div></div></figure><blockquote class="lb lc ld"><p id="d654" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu"> <em class="ht">还有，查看我的</em> </strong> <a class="ae ln" href="http://bit.ly/hlf-multihost-deployment" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu"> <em class="ht">课程在Hyperledger上的架构部署在多主机上</em> </strong> </a></p></blockquote></div></div>    
</body>
</html>