<html>
<head>
<title>How to consume 3rd party web services over Ethereum Network?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过以太坊网络消费第三方web服务？</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-consume-3rd-party-web-services-over-ethereum-network-3363d6ecd301?source=collection_archive---------3-----------------------#2018-05-23">https://medium.com/coinmonks/how-to-consume-3rd-party-web-services-over-ethereum-network-3363d6ecd301?source=collection_archive---------3-----------------------#2018-05-23</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="7f65" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">听起来可能令人困惑，但是相信我，这是一件容易的工作。那么我怎么想出这个教程呢？有成吨成百万的Solidity代码样本，给出一个简单的“Hello World”输出。这很酷，至少你用一门新的语言工作，但还不够，没用。</p><p id="093a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Web开发时代，第三方API调用就像呼吸一样。所以我开始研究如何通过以太网进行可靠的API调用。我想出的解决方案是<a class="ae jo" href="http://app.oraclize.it/home/features" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Oraclize </strong> </a> <strong class="is hu">，</strong><em class="jp">——去中心化app的数据载体。不幸的是，这是一项付费服务。幸运的是，我们将在Ropsten Network上工作，这是一个测试网络，我们为任何类型的交易支付假eth。</em></p></div><div class="ab cl jq jr hb js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hm hn ho hp hq"><h1 id="9495" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">要求</h1><ul class=""><li id="6674" class="kv kw ht is b it kx ix ky jb kz jf la jj lb jn lc ld le lf dt translated">将在Ropsten网络上工作的以太网地址</li><li id="c7cd" class="kv kw ht is b it lg ix lh jb li jf lj jj lk jn lc ld le lf dt translated">一些免费测试以太坊</li></ul><p id="6dc2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了得到免费的水龙头，有一些水龙头。如:<a class="ae jo" href="http://faucet.ropsten.be:3001/" rel="noopener ugc nofollow" target="_blank">http://faucet.ropsten.be:3001/</a>。只需粘贴您的以太网地址，测试以太网将在几分钟内加载到您的帐户。</p></div><div class="ab cl jq jr hb js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hm hn ho hp hq"><h1 id="5aad" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">路标</h1><p id="e886" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hm dt lo translated"><span class="l lp lq lr bm ls lt lu lv lw di"> 1 </span>找一个web服务来消费。我刚刚用Express建立了一个，简单地返回一个字符串。你可以用它工作，随意使用。(<a class="ae jo" href="https://ihk.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://ihk.herokuapp.com/</a>)</p><p id="1041" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt lo translated"><span class="l lp lq lr bm ls lt lu lv lw di"> 2 </span>寻找最适合演示问题的环境。编译和运行我们的智能合约有两个选项:<a class="ae jo" href="http://remix.ethereum.org" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Remix </strong> </a>和<a class="ae jo" href="http://dapps.oraclize.it" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Oraclize IDE </strong> </a>。我会选择Oraclize IDE。</p><p id="ab91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你要使用Remix，你必须选择<strong class="is hu"> Injected Web3，</strong>否则代码不会像预期的那样与Javascript VM一起工作。</p></div><div class="ab cl jq jr hb js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hm hn ho hp hq"><h1 id="9fda" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">我们来编码吧！</h1><p id="21df" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hm dt translated">这就是最简单明了的可靠性代码。</p><figure class="lx ly lz ma fq mb"><div class="bz el l di"><div class="mc md l"/></div></figure><p id="7ce4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以还是一步一步来吧。</p><p id="dfed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将使用0.4.19版本的编译器。因为Oraclize支持<strong class="is hu"> 0.4.1 </strong>和<strong class="is hu"> 0.4.2 </strong>之间的版本。为此，不要忘记更改编译器版本(<em class="jp"> 0.4.19+commit。#### </em>)从设置选项卡。</p><p id="d1c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们导入Oraclize存储库。</p><p id="6379" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">契约存储的唯一变量。API调用的结果将被赋给这个变量。</p><p id="5a28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"># 15–17</strong>简单来说，我们智能合约的构造者。我们会谈到更新方法。它不是内置的，它是由我们的合同声明的，你可以在合同的最后几行看到。</p><p id="456b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"># 19–22</strong>请求执行后触发的回调状态。我们可以在这里处理结果数据。但是对于这种情况，我们不需要任何操纵。</p><p id="e853" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"># 24–27</strong>这就是了。太阳永不落山的地方，我们发出请求的地方。基于服务响应的MIME类型来修改方法参数，这是一个非常重要的救命点。我们必须根据我们的服务重写第二个参数。JSON、XML等..</p><blockquote class="me mf mg"><p id="4378" class="iq ir jp is b it iu iv iw ix iy iz ja mh jc jd je mi jg jh ji mj jk jl jm jn hm dt translated">如果是<strong class="is hu">JSON</strong>；<br/> oraclize_query("URL "，"<strong class="is hu">JSON</strong>(https://ihk . heroku app . com/)"；</p><p id="ddda" class="iq ir jp is b it iu iv iw ix iy iz ja mh jc jd je mi jg jh ji mj jk jl jm jn hm dt translated">或者<strong class="is hu">XML</strong>；<br/> oraclize_query("URL "，"<strong class="is hu">XML</strong>(https://ihk . heroku app . com/)"；</p></blockquote><p id="cfe0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们的服务将返回一个没有特殊格式的文本，简单的http/text，所以没有删除转换过程。</p></div><div class="ab cl jq jr hb js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hm hn ho hp hq"><p id="4175" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们编译我们的代码。结果屏幕应该类似于以下内容:</p><figure class="lx ly lz ma fq mb fe ff paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="fe ff mk"><img src="../Images/11a86f09aeb39b58a6f6c63aff60fe2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_u1_icRVok7DIvJwjJkdyg.png"/></div></div></figure><p id="5348" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们点击“创建”按钮。合同运行，开采和完成。现在，应该有一个部分显示我们可以在合同中运行的方法列表。好像是这样的:</p><figure class="lx ly lz ma fq mb fe ff paragraph-image"><div class="fe ff mr"><img src="../Images/2981a81a4e2975ba29e50d5693e62cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*3hmNprWBiAU7hRSOxWJwwA.png"/></div></figure><p id="e691" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">更新方法是我们消费服务、获取数据的方法。该请求将在10-20秒内完成。</p><p id="4ebf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们深呼吸。拿着它。拿着它。再多一点。现在，慢慢地，呼气。非常慢。完美。API调用应该完成。</p><p id="f850" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们跳到顶部的第4部分，名为“查询”。</p><p id="3f0d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就在那里。结果。上面写着，“伊玛目·哈蒂普勒·卡帕蒂尔辛”一个著名有趣的土耳其迷因。</p><p id="4a31" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">回头见。</p><p id="f9e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">干杯。</p><figure class="lx ly lz ma fq mb"><div class="bz el l di"><div class="ms md l"/></div></figure></div></div>    
</body>
</html>