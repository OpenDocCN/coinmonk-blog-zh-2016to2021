<html>
<head>
<title>My First “Real” Magic Leap Project: Part 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的第一个“真正的”Magic Leap项目:第4部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/my-first-real-magic-leap-project-part-4-6da95d631acf?source=collection_archive---------7-----------------------#2018-08-08">https://medium.com/coinmonks/my-first-real-magic-leap-project-part-4-6da95d631acf?source=collection_archive---------7-----------------------#2018-08-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="7a92" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">我们实现了<em class="ji">放置</em>模式</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/1affca204366352fcb653eecea068575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UbRv77oTmP4EAEVakOU1wQ.jpeg"/></div></div></figure><p id="63e5" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">本文是从我的第一个“真正的”Magic Leap项目<a class="ae kr" rel="noopener" href="/@johntucker_48673/my-first-real-magic-leap-project-part-1-de047aeaa65"> <em class="ks">开始的系列文章的一部分:第1部分</em> </a>。</p><p id="073b" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">本文的完整应用程序可以从bounce资源库的<a class="ae kr" href="https://github.com/larkintuckerllc/bounce/tree/part4" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> part4 </em> </a>分支下载。</p><p id="67fa" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">重新重构</strong></p><p id="6859" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">虽然<em class="ks"> Redux </em>模式在(大多数)web开发情况下工作良好，但我开始重新考虑在<em class="ks"> Unity </em>中将它用于<strong class="jx hu">所有</strong>状态。特别是，在最后一个例子中，我们将<em class="ks">网格区域</em>的位置和比例更新为全局状态。这种方法的问题是这些更新发生得非常快，每秒可达60次，我们真的不希望在这些更新中运行大量额外的代码。</p><p id="a795" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">因此，在这种情况下，我们可以通过简单地在<em class="ks"> MLSpatialMapper2 </em>中创建一个对<em class="ks"> MeshingZone </em>的引用来使用全局状态。然后我们可以去掉所有与网格区域位置和规模相关的全局状态，例如<em class="ks"> MLPositionX </em>。</p><p id="cbd2" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks">Assets/Table/mlspatialmapper 2 . cs</em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kt ku l"/></div></figure><p id="ae9c" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">放置</strong></p><p id="3ebc" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">现在我们继续实现下一个模式，<em class="ks"> Placement </em>，其中用户将一个球放在桌子上(网格)。球的位置基于用户的头部姿势(相机位置和方向)。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/39511f418fb306d0cbbf1ec864bad9cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epiNAm2Gg3d0IpsxWEzS0A.png"/></div></div></figure><p id="3a26" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">当用户移动他们的头时，球会慢慢地跟踪到一个新的位置。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff kv"><img src="../Images/2b5206b99858ef0c9ef9e8c7c47e4489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2uzntX-DHOqPvc2Kw6_PFA.gif"/></div></div></figure><p id="71ef" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">通过用右手给出<em class="ks"> Ok </em>手的姿势，球的位置被锁定。</p><p id="7d04" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">代码</strong></p><p id="4d03" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">新的全局状态包括:</p><ul class=""><li id="8aef" class="kw kx ht jx b jy jz kb kc ke ky ki kz km la kq lb lc ld le dt translated"><em class="ks">放置</em>:球放置的位置；存储为三个整数(一个自定义的<em class="ks">三元组</em>类)。使用整数是因为不能可靠地比较浮点数是否相等</li><li id="9adf" class="kw kx ht jx b jy lf kb lg ke lh ki li km lj kq lb lc ld le dt translated"><em class="ks"> PlacementValid </em>:布尔型，表示放置位置是否有效，即在桌子(网格)上</li></ul><p id="7a77" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">头部姿态(<em class="ks">主摄像机</em>)设置<em class="ks">放置</em>和<em class="ks">放置有效</em>全局状态。</p><p id="05ef" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks">Assets/Table/main camera . cs</em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kt ku l"/></div></figure><p id="b3b3" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">观察结果:</p><ul class=""><li id="5b6b" class="kw kx ht jx b jy jz kb kc ke ky ki kz km la kq lb lc ld le dt translated">球的放置基于<em class="ks"> Unity物理学。光线投射</em>；而不是<em class="ks">魔跃</em>T54】MLWorldRays。这是因为我们已经创建了网格</li><li id="a921" class="kw kx ht jx b jy lf kb lg ke lh ki li km lj kq lb lc ld le dt translated">出于性能方面的考虑，我们将强制转换限制为每秒仅发生一次</li></ul><p id="f50b" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks">球</em>使用<em class="ks">模式、位置和位置有效</em>全局状态来控制自身</p><p id="bb7e" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks"> Assets / Table / Ball.cs </em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kt ku l"/></div></figure><p id="050f" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">观察结果:</p><ul class=""><li id="7849" class="kw kx ht jx b jy jz kb kc ke ky ki kz km la kq lb lc ld le dt translated">我们将目标位置存储在私有变量<em class="ks"> _position </em>中，并使用<em class="ks">向量3。向</em>方法移动，慢慢将球定位</li><li id="8a21" class="kw kx ht jx b jy lf kb lg ke lh ki li km lj kq lb lc ld le dt translated">下一个模式是<em class="ks">瞄准</em>；我们从把球扔进锁定位置开始</li></ul><p id="a40a" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">下一步</strong></p><p id="7c53" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在本系列的下一篇文章中，<a class="ae kr" rel="noopener" href="/@johntucker_48673/my-first-real-magic-leap-project-part-5-c65f137e7f61"> <em class="ks">我的第一个“真正的”Magic Leap项目:第5部分</em> </a>，我们实现其余的<em class="ks">目标</em>模式(和<em class="ks">动作</em>模式)。</p></div></div>    
</body>
</html>