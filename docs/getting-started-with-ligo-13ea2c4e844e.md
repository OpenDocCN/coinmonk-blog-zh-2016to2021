# Ligo å…¥é—¨

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/getting-started-with-ligo-13ea2c4e844e?source=collection_archive---------2----------------------->

## ä½¿ç”¨ Ligo ä¸º Tezos åŒºå—é“¾åˆ›å»ºæ™ºèƒ½åˆçº¦(ç¬¬ 1 éƒ¨åˆ†)

![](img/45153c0b22e7b7fc458ef439f778767e.png)

LigoLang

åœ¨æˆ‘å†™å®Œç¬¬ä¸€ç¯‡å…³äºŽæµåŠ¨æ€§çš„æ–‡ç« åŽï¼Œæˆ‘åœ¨ Twitter ä¸Šè¿›è¡Œäº†ä¸€æ¬¡éžå¸¸æœ‰è¶£çš„äº¤æµã€‚å…¶ä¸­ï¼Œæ®æˆ‘æ‰€çŸ¥ï¼ŒLiquidity æ­£åœ¨è¿œç¦» Tezosï¼Œè½¬è€Œè‡´åŠ›äºŽ Dune networkï¼ŒTezos å¹³å°ä¸Šè¯­è¨€çš„æœªæ¥å¯èƒ½ä¸ç¡®å®šã€‚

ç”±äºŽæˆ‘æƒ³ä¸ºæˆ‘çš„ç¼–ç¨‹(å’Œæˆ‘çš„ä¸€èˆ¬çŸ¥è¯†)ä¿ç•™ä¸€ç§å‡½æ•°å¼è¯­è¨€ï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹ Tezos çš„å¦ä¸€ç§æµè¡Œçš„å‡½æ•°å¼è¯­è¨€ï¼ŒLigoLang(æˆ– Ligo)ã€‚è¿™ä¸æ˜¯æˆ‘çš„ç¬¬ä¸€é€‰æ‹©ï¼Œå› ä¸ºåœ¨çº¿ç¼–è¾‘å™¨ä¸­æ²¡æœ‰å¥‘çº¦çš„ä¾‹å­ï¼Œé™¤äº†æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­è®¨è®ºçš„â€œç®€å•å­˜å‚¨â€çš„ä¾‹å­ã€‚ç½‘ç«™ä¸Šè¿˜æœ‰ä¸€ä¸ªæ•™ç¨‹ï¼Œå¯¹äºŽç²¾é€š OCaml çš„äººæ¥è¯´å¯èƒ½ä¸é”™ï¼Œä½†å¯¹æˆ‘æ¥è¯´å¤ªæ¨¡ç³Šäº†ã€‚

äºŽæ˜¯æˆ‘å†³å®šåœ¨æŽ¢ç´¢ Tezos å¼€å‘ç”Ÿæ€ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­é‡‡ç”¨ Ligoï¼Œå¹¶å†™ä¸€ç¯‡å…³äºŽå®ƒçš„åŸºç¡€æ•™ç¨‹ï¼Œè¿™å°†å¸®åŠ©æˆ‘æ›´å¥½åœ°ç†è§£è¿™ç§è¯­è¨€ï¼Œå¹¶ä¸”(æˆ‘å¸Œæœ›)å¸®åŠ©å…¶ä»–å¯èƒ½é‡åˆ°åŒæ ·éšœç¢çš„äººã€‚å’Œ Liquidity ä¸€æ ·ï¼Œæˆ‘ä¼šé€‰æ‹© ReasonML è¯­æ³•ï¼Œæˆ‘ç›¸ä¿¡å¯¹äºŽåƒæˆ‘è¿™æ ·æ¥è‡ª JavaScript æˆ– Solidity çš„å¼€å‘è€…æ¥è¯´ï¼Œå®ƒçœ‹èµ·æ¥æ›´å®¹æ˜“ã€‚

æˆ‘ä»¬å°†åœ¨ Ligo ç½‘ç«™çš„ç¼–è¾‘å™¨ä¸­å†™ä¸‹[è¿™ä¸ªåˆåŒ](https://ide.ligolang.org/p/QlLBsoG1-gF-zQYiKeVNlQ)ã€‚å¥‘çº¦å¢žåŠ å’Œå‡å°‘å­˜å‚¨ä¸­çš„å˜é‡ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå› ä¸ºå®ƒå°†ä»‹ç»ç”¨ Ligo ç¼–å†™æ™ºèƒ½åˆåŒçš„ç»†èŠ‚ã€‚

# åˆåŒçš„ç»“æž„

## ä»“åº“

åŒºå—é“¾ä¸Šçš„æ¯ä¸ª[æ™ºèƒ½å¥‘çº¦](https://blog.coincodecap.com/tag/smart-contact/)éƒ½åŒ…å«ä¸€ä¸ªå­˜å‚¨å™¨ï¼Œå®ƒæ˜¯ä¿å­˜å¥‘çº¦çŠ¶æ€çš„å†…å­˜çš„ä¸€éƒ¨åˆ†ã€‚Ligo ä¹Ÿä¸ä¾‹å¤–ã€‚å­˜å‚¨è¢«å£°æ˜Žä¸ºä¸Žæ‚¨é€‰æ‹©çš„ç±»åž‹(æ•´æ•°ã€å­—ç¬¦ä¸²ã€è®°å½•ç­‰)ç›¸ç­‰çš„å•ä¸€ç±»åž‹ã€‚)
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºç±»åž‹**å­˜å‚¨**ï¼Œå®ƒå°†æŽ¥æ”¶ç±»åž‹ **int** çš„å€¼:

```
**type storage = int;**
```

## ä¼ªå…¥å£ç‚¹

Ligo ä¸­çš„å¥‘çº¦æœ‰ä¸€ä¸ªç‰¹æ®Šæ€§ï¼Œå³åªæœ‰ä¸€ä¸ªå…¥å£ç‚¹ï¼Œå³ä¸»å‡½æ•°ã€‚æ¯ä¸ªä¼ å…¥çš„äº‹åŠ¡éƒ½å°†ä¸Žä¸€ä¸ªæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œå¹¶è¢«é‡å®šå‘åˆ°åŒ¹é…å‡½æ•°ã€‚
ä¸ºäº†è®©å®ƒå·¥ä½œï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªå®šä¹‰ä¼ªå¤šå…¥å£ç‚¹æ“ä½œçš„å˜ä½“ã€‚*å˜é‡*æ˜¯åŒ…å«ä¸åŒæ¡ˆä¾‹çš„ç±»åž‹ï¼Œå…¶å€¼å°†æ ¹æ®æ¡ˆä¾‹è€Œå˜åŒ–ã€‚è¿™æ˜¯è¯­è¨€çš„ä¸€ä¸ªéžå¸¸å¼ºå¤§çš„æ–¹é¢ã€‚è¿™æ˜¯æˆ‘ä»¬åˆåŒçš„ä¾‹å­:

```
type storage = int;**type action =
| Increment(int)
| Decrement(int);**
```

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å£°æ˜Žäº†ä¸€ä¸ªæ–°çš„ç±»åž‹å«åšâ€œåŠ¨ä½œâ€ã€‚å®ƒå¯ä»¥æœ‰ä¸¤ä¸ªå€¼:å¯ä»¥é€’å¢žå¹¶æŽ¥æ”¶ä¸€ä¸ªæ•´æ•°ï¼Œä¹Ÿå¯ä»¥é€’å‡å¹¶æŽ¥æ”¶ä¸€ä¸ªæ•´æ•°ã€‚

## è¿™äº›åŠŸèƒ½

çŽ°åœ¨è®©æˆ‘ä»¬ä¸ºä¼ªå…¥å£ç‚¹ç¼–å†™å‡½æ•°ã€‚æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‡½æ•°:ä¸€ä¸ªå¢žåŠ çŠ¶æ€ï¼Œä¸€ä¸ªå‡å°‘çŠ¶æ€ã€‚å®ƒä»¬å¿…é¡»æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°:ç¬¬ä¸€ä¸ªæ˜¯å½“å‰å­˜å‚¨ï¼Œç¬¬äºŒä¸ªæ˜¯è¦åŠ åˆ°æˆ–å‡åŽ»å­˜å‚¨çš„å€¼ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ Ligo ä¸­çš„ä¸€èˆ¬æ¨¡å¼:æ‚¨å°†å­˜å‚¨ä¼ é€’ç»™å‡½æ•°ï¼Œæ›´æ–°å®ƒå¹¶è¿”å›žå®ƒï¼Œæ²¡æœ‰ä»Žå‡½æ•°å†…éƒ¨è®¿é—®[æ™ºèƒ½å¥‘çº¦](https://blog.coincodecap.com/tag/smart-contact/)å­˜å‚¨ã€‚Ligo æ–‡æ¡£ç§°å®ƒä»¬ä¸º*ã€aã€‘*å’Œ*ã€bã€‘*ï¼Œä½†æ˜¯ä¸ºäº†æ›´æ¸…æ¥šèµ·è§ï¼Œæˆ‘ä»¬ç§°å®ƒä»¬ä¸º*ã€å­˜å‚¨ã€‘*å’Œ*ã€è®¡æ•°ã€‘*:

```
type storage = int;type action =
| Increment(int)
| Decrement(int);**let add = ((storage, count): (int, int)): int => storage + count;
let sub = ((storage, count): (int, int)): int => storage - count;**
```

å¦‚æžœæ‚¨ä¸ç†Ÿæ‚‰è¿™ä¸ªè¯­æ³•ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å‡½æ•°:

1.  **let add** :ä½¿ç”¨â€œletâ€å…³é”®å­—å£°æ˜Žå‡½æ•°ï¼ŒåŽè·Ÿå‡½æ•°å(add)ã€‚
2.  **((storageï¼Œcount): (intï¼Œint))** :è¿™ä¸ªå—è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°(å®žé™…ä¸Šæ˜¯ä¸€ä¸ª[å…ƒç»„](https://ligolang.org/docs/next/language-basics/sets-lists-tuples/#tuples)ï¼Œç¨åŽä¼šè¯¦ç»†ä»‹ç»)ï¼Œå­˜å‚¨ç©ºé—´å’Œè¦å¯¹å…¶åŠ å‡çš„æ•°å­—ï¼Œä¸¤ä¸ªå‚æ•°éƒ½æ˜¯æ•´æ•°ã€‚
3.  **: int** :è¿™éƒ¨åˆ†å‡½æ•°è¡¨ç¤ºæˆ‘ä»¬å°†è¿”å›žä¸€ä¸ªæ•´æ•°ï¼Œè¿™å°†æ˜¯æˆ‘ä»¬æ–°çš„å­˜å‚¨ã€‚
4.  **å­˜å‚¨+è®¡æ•°/å­˜å‚¨â€”è®¡æ•°**:å°†â€œè®¡æ•°â€å˜é‡åŠ æˆ–å‡åˆ°å­˜å‚¨ä¸­å¹¶è¿”å›žã€‚è¯·æ³¨æ„ï¼Œä¸éœ€è¦æ˜¾å¼è¿”å›žã€‚

## çœŸæ­£çš„å…¥å£ç‚¹(ä¸»å‡½æ•°)

çŽ°åœ¨æ˜¯æˆ‘ä»¬å†™åˆåŒçš„çœŸæ­£åˆ‡å…¥ç‚¹çš„æ—¶å€™äº†:

```
type storage = int;type action =
| Increment(int)
| Decrement(int);let add = ((storage, count): (int, int)): int => storage + count;
let sub = ((storage, count): (int, int)): int => storage - count;**let main = ((p,s): (action, storage)) => {
    let storage = 
        switch (p) {
            | Increment(n) => add((s, n))
            | Decrement(n) => sub((s, n))
        };
    ([]: list(operation), storage);
};**
```

è¿™å®žé™…ä¸Šæ¯”çœ‹èµ·æ¥å®¹æ˜“ï¼

Ligo ä¸­çš„ä¸€ä¸ª[æ™ºèƒ½å¥‘çº¦](https://blog.coincodecap.com/tag/smart-contact/)å¿…é¡»åŒ…å«ä¸€ä¸ª **main** å‡½æ•°ï¼Œè¿™å°†æ˜¯â€œçœŸæ­£çš„â€å…¥å£ç‚¹ã€‚è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°:éšäº‹åŠ¡å‘é€çš„å‚æ•°å’Œå­˜å‚¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†å½“å‰å­˜å‚¨ç§°ä¸ºâ€œs â€,æ–°å­˜å‚¨ç§°ä¸ºâ€œstorage â€,ä»¥é¿å…æ··æ·†ã€‚(actionï¼Œstorage)éƒ¨åˆ†è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»åž‹æ˜¯ action(æˆ‘ä»¬å‰é¢å£°æ˜Žçš„å˜ä½“)ï¼Œç¬¬äºŒä¸ªå‚æ•°çš„ç±»åž‹æ˜¯â€œstorageâ€(æ™ºèƒ½åå®šå­˜å‚¨)ã€‚

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ–°å€¼æ›´æ–°å­˜å‚¨ã€‚ç„¶åŽï¼Œæˆ‘ä»¬å°†åœ¨åä¸ºâ€œstorageâ€(æˆ‘ä»¬çš„æ–°å­˜å‚¨)çš„å˜é‡ä¸­èŽ·å¾—æ–°å€¼ã€‚ä¸‹ä¸€è¡Œæ˜¯å¥‡è¿¹å‘ç”Ÿçš„åœ°æ–¹ï¼

## å¼€å…³

æè¿° Ligo(ä»¥åŠä¸€èˆ¬çš„ ML è¯­è¨€)ä¸­æ‰€æœ‰å¤æ‚çš„æ¨¡å¼åŒ¹é…æœ‰ç‚¹å¤ªé•¿äº†ï¼Œè¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ã€‚å¦‚æžœæ‚¨ä¸ç†Ÿæ‚‰è¿™ä¸ªè¯­æ³•ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥ç†è§£å®ƒ:æ‚¨å‘é€çš„å‚æ•°ä¸Žä¸åŒçš„é€‰é¡¹åŒ¹é…ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯å¯ç”¨é€‰é¡¹ä¹‹ä¸€ã€‚è¿™ä½¿å¾— JavaScript ä¸­ä¸å¯èƒ½æœ‰æœªå®šä¹‰çš„å€¼ã€‚
åœ¨æœ¬ä¾‹ä¸­ï¼Œâ€œpâ€è¢«ä¼ é€’ç»™å¼€å…³ï¼Œå¹¶ä¸Žä¸¤ä¸ªé€‰é¡¹â€œå¢žé‡â€å’Œâ€œå‡é‡â€åŒ¹é…ã€‚è¿™æ˜¯å”¯ä¸€çš„é€‰æ‹©ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¥‘çº¦å°†ç¡®ä¿ä¼ é€’çš„å€¼æ˜¯ä¹‹å‰åœ¨â€œactionâ€å˜é‡ä¸­å£°æ˜Žçš„ç±»åž‹(åœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªæ•´æ•°)ã€‚å¦‚æžœå‚æ•°ä¸Žå…¶ä¸­ä¸€ä¸ªé€‰é¡¹åŒ¹é…ï¼Œå°†ä½¿ç”¨é€‚å½“çš„å‚æ•°è°ƒç”¨ç®­å¤´å³ä¾§çš„å…³è”å‡½æ•°ã€‚
æ¯”å¦‚è°ƒç”¨â€œIncrementâ€å¹¶ä¼ é€’â€œ2â€ï¼Œå°±ä¼šè°ƒç”¨â€œaddâ€å‡½æ•°ï¼Œå°†â€œ2â€æ·»åŠ åˆ°å­˜å‚¨ä¸­ã€‚

## é€€å›žçš„å­˜å‚¨

main å‡½æ•°è¿”å›žä¸¤ä¸ªå€¼:æ“ä½œåˆ—è¡¨(åœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸¤ä¸ªç©ºæ–¹æ‹¬å·ï¼Œç±»åž‹ä¸ºâ€œlist(operation)â€)å’Œæ–°å­˜å‚¨(ç”±å¼€å…³çš„ä¸€ä¸ªé€‰é¡¹è¿”å›žçš„å€¼)ã€‚åœ¨äº‹åŠ¡ç»“æŸæ—¶ï¼Œæ–°çš„å­˜å‚¨è¢«ä¿å­˜ï¼Œå‡è®¾ä¸€åˆ‡éƒ½æŒ‰è®¡åˆ’è¿›è¡Œã€‚

## ç¼–è¯‘æˆè¿ˆå…‹å°”é€Š

çŽ°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿å¥‘çº¦èƒ½å¤Ÿæ­£å¸¸å·¥ä½œå’Œç¼–è¯‘ã€‚ä½¿ç”¨æä¾›çš„æŽ¥å£å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ã€‚åœ¨å³ä¾§ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªé€‰é¡¹çš„æ :

![](img/25b37dbbb3cc33c81265f0063164de33.png)

Compiler step

é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”è¯¥å·²ç»é€‰æ‹©äº†â€œç¼–è¯‘â€é€‰é¡¹ï¼Œæ‚¨åªéœ€å•å‡»â€œè¿è¡Œâ€æŒ‰é’®ã€‚æ‚¨å°†èŽ·å¾—ä»¥ä¸‹ä»£ç :

![](img/db7dc52e068571bc1cf5c09cb7bb595a.png)

å¦‚æžœæ˜¯è¿™æ ·çš„è¯ï¼Œæ­å–œä½ ï¼ä½ ç¼–å†™å¹¶ç¼–è¯‘äº†ä½ çš„ç¬¬ä¸€ä¸ª Ligo ä»£ç ðŸ¥³

# ä¸°å¯Œ

çŽ°åœ¨è®©æˆ‘ä»¬æ”¹è¿›åˆåŒï¼

å‡è®¾æˆ‘ä»¬å¸Œæœ›ä¿å­˜ä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ é€’çš„åç§°ã€‚è®©æˆ‘ä»¬åˆ—ä¸€ä¸ªæ¸…å•ï¼Œåˆ—å‡ºæˆ‘ä»¬å¿…é¡»åšå‡ºçš„æ”¹å˜:

*   æˆ‘ä»¬å¿…é¡»æ›´æ”¹å­˜å‚¨ç±»åž‹ï¼Œå› ä¸ºæˆ‘ä»¬çŽ°åœ¨å¿…é¡»ä¿å­˜ä¸¤ç§ä¸åŒç±»åž‹(æ•´æ•°å’Œå­—ç¬¦ä¸²)çš„ä¸¤ä¸ªä¸åŒå€¼ã€‚
*   æˆ‘ä»¬å¿…é¡»åœ¨æˆ‘ä»¬çš„*åŠ¨ä½œ*å˜ä½“ä¸­æ·»åŠ ä¸€ä¸ªæ–°é€‰é¡¹æ¥åˆ†æ´¾æ­£ç¡®çš„å‡½æ•°å¹¶ä¿å­˜åç§°ã€‚
*   æˆ‘ä»¬å¿…é¡»ç¼–å†™å‡½æ•°æ¥å°†åç§°ä¿å­˜åœ¨å­˜å‚¨å™¨ä¸­ã€‚
*   æˆ‘ä»¬å¿…é¡»æŠŠæˆ‘ä»¬çš„é€‰é¡¹åŠ åˆ°ä¸»å¼€å…³ä¸Šã€‚

è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥:

å¯¹äºŽå­˜å‚¨ï¼Œæˆ‘ä»¬çŽ°åœ¨ä½¿ç”¨ä¸€ä¸ªåä¸ºâ€œ[è®°å½•](https://ligolang.org/docs/next/language-basics/maps-records/)çš„ç±»åž‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬å­˜å‚¨ä¸åŒç±»åž‹çš„æ•°æ®:â€œè®¡æ•°â€å­—æ®µå°†ä¿å­˜æˆ‘ä»¬é€’å¢žå’Œé€’å‡çš„æ•´æ•°ï¼Œè€Œâ€œåç§°â€å­—æ®µå°†ä¿å­˜æˆ‘ä»¬å‘é€çš„å­—ç¬¦ä¸²:

```
**type storage = {
  count: int,
  name: string
};**
```

æˆ‘ä»¬çŽ°åœ¨æ·»åŠ ä¸€ä¸ªâ€œSaveNameâ€é€‰é¡¹ï¼Œè¯¥é€‰é¡¹æŽ¥å—ä¸€ä¸ªæŒ‡å‘å¥‘çº¦çš„ä¼ªå…¥å£ç‚¹çš„å­—ç¬¦ä¸²:

```
type storage = {
  count: int,
  name: string
};**type action =
  | Increment(int)
  | Decrement(int)
  | SaveName(string);**
```

çŽ°åœ¨ï¼Œè®©æˆ‘ä»¬(é‡æ–°)ç¼–å†™æ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸¤ä»¶äº‹éœ€è¦è€ƒè™‘:é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ä»Žå¤´å¼€å§‹ç¼–å†™ä¸€ä¸ªæ–°å‡½æ•°æ¥å­˜å‚¨åç§°ï¼Œå…¶æ¬¡ï¼Œæˆ‘ä»¬å¿…é¡»æ›´æ–°å‰é¢çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å½“å‰ä¸ºå­˜å‚¨è¿”å›žä¸€ä¸ªæ•´æ•°ï¼Œè€Œä¸æ˜¯ä¸€æ¡è®°å½•ã€‚

æ–°å‡½æ•°çš„è¯­æ³•éžå¸¸ç›¸ä¼¼:æˆ‘ä»¬ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œå½“å‰å­˜å‚¨å’Œåç§°ï¼Œå¹¶è¿”å›žæ–°çš„å­˜å‚¨:

```
let saveName = 
  ((s, name): (storage, string)): storage => {...s, name: name};
```

å¦‚æžœä½ æ‡‚ JavaScriptï¼Œè¯­æ³•çœ‹èµ·æ¥ä¸€å®šå¾ˆç†Ÿæ‚‰ï¼(è¿™ä¹Ÿæ˜¯æˆ‘è®¤ä¸º ReasonLigo æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„é€‰æ‹©çš„åŽŸå› ä¹‹ä¸€ã€‚)è¯¥å‡½æ•°æœŸæœ›å…ƒç»„å…·æœ‰ä¸¤ä¸ª*ç»„ä»¶*(æˆ–å€¼)ï¼Œä¸€ä¸ªæ˜¯â€œå­˜å‚¨â€ç±»åž‹ï¼Œä¸€ä¸ªæ˜¯â€œå­—ç¬¦ä¸²â€ç±»åž‹ã€‚ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œæˆ‘å°†å®žé™…çš„å­˜å‚¨ç§°ä¸ºâ€œs â€,ä»¥å…ä¸Žå®ƒçš„ç±»åž‹(ä¹Ÿæ˜¯å­˜å‚¨)æ··æ·†ã€‚
è¯¥å‡½æ•°è¿”å›žå­˜å‚¨ç±»åž‹çš„å€¼ã€‚Reason è¯­æ³•å…è®¸éžå¸¸æ–¹ä¾¿çš„å¿«æ·æ–¹å¼æ¥æ›´æ–°å’Œè¿”å›žè®°å½•:é¦–å…ˆï¼Œ[æ‰©å±•æ“ä½œç¬¦](https://reasonml.github.io/docs/en/record#immutable-update)å°†è®°å½•çš„æ‰€æœ‰å­—æ®µå¤åˆ¶åˆ°ä¸€ä¸ªæ–°è®°å½•ä¸­ï¼Œç„¶åŽï¼Œ[åŒå…³](https://reasonml.github.io/docs/en/record#syntax-shorthand)æŠ€æœ¯å…è®¸æˆ‘ä»¬åªå†™ä¸Žå­—æ®µåç§°åŒ¹é…çš„å€¼çš„åç§°(å³" *name* "è€Œä¸æ˜¯" *name: name* ")ã€‚

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°å‰é¢çš„ä¸¤ä¸ªå‡½æ•°:

```
type storage = {
  count: int,
  name: string
};type action =
| Increment(int)
| Decrement(int)
| SaveName(string);**let add = 
  ((s, count): (storage, int)): storage => 
    {...s, count: s.count + count};
let sub = 
  ((s, count): (storage, int)): storage => 
    {...s, count: s.count - count};
let saveName = 
((s, name): (storage, string)): storage => {...s, name: name};**
```

å¿«åˆ°äº†ï¼çŽ°åœ¨å”¯ä¸€ç¼ºå°‘çš„æ˜¯æ›´æ–°ä¸»å‡½æ•°çš„å¼€å…³ï¼Œå¥‘çº¦çš„å®žé™…å…¥å£ç‚¹:

```
type storage = {
  count: int,
  name: string
};type action =
| Increment(int)
| Decrement(int)
| SaveName(string);let add = 
  ((s, count): (storage, int)): storage => 
    {...s, count: s.count + count};
let sub = 
  ((s, count): (storage, int)): storage => 
    {...s, count: s.count - count};
let saveName = 
((s, name): (storage, string)): storage => {...s, name: name};**let main = ((p,s): (action, storage)) => {
  let storage =
    switch (p) {
    | Increment(n) => add((s, n))
    | Decrement(n) => sub((s, n))
    | SaveName(n) => saveName((s, n))
  };
  ([]: list(operation), storage);
};**
```

åœ¨è¿™é‡Œï¼çŽ°åœ¨è®©æˆ‘ä»¬ç¡®ä¿å®ƒèƒ½æ­£ç¡®ç¼–è¯‘ã€‚é€‰æ‹©å³æ ä¸­çš„â€œç¼–è¯‘â€é€‰é¡¹å¹¶ç‚¹å‡»â€œè¿è¡Œâ€ï¼Œå¦‚æžœä½ å¾—åˆ°ä»¥ä¸‹ä»£ç ï¼Œä½ åšåˆ°äº†ï¼

```
{ parameter (or (or (int %decrement) (int %increment)) (string %saveName)) ;
  storage (pair (int %count) (string %name)) ;
  code { DUP ;
         DUP ;
         CDR ;
         DIP { DUP } ;
         SWAP ;
         CAR ;
         IF_LEFT
           { DUP ;
             IF_LEFT
               { DIP 2 { DUP } ;
                 DIG 2 ;
                 DIP { DUP } ;
                 PAIR ;
                 DUP ;
                 CAR ;
                 DUP ;
                 DIP { DUP } ;
                 SWAP ;
                 CAR ;
                 DIP { DIP 2 { DUP } ; DIG 2 ; CDR } ;
                 SUB ;
                 SWAP ;
                 CDR ;
                 SWAP ;
                 PAIR ;
                 DIP { DROP 3 } }
               { DIP 2 { DUP } ;
                 DIG 2 ;
                 DIP { DUP } ;
                 PAIR ;
                 DUP ;
                 CAR ;
                 DUP ;
                 DIP { DUP } ;
                 SWAP ;
                 CAR ;
                 DIP { DIP 2 { DUP } ; DIG 2 ; CDR } ;
                 ADD ;
                 SWAP ;
                 CDR ;
                 SWAP ;
                 PAIR ;
                 DIP { DROP 3 } } ;
             DIP { DROP } }
           { DIP { DUP } ;
             SWAP ;
             DIP { DUP } ;
             PAIR ;
             DUP ;
             CAR ;
             DIP { DUP } ;
             SWAP ;
             CDR ;
             SWAP ;
             CAR ;
             PAIR ;
             DIP { DROP 2 } } ;
         DUP ;
         NIL operation ;
         PAIR ;
         DIP { DROP 4 } } }
```

å¦‚æžœä½ å¯¹ä»£ç æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…å®ƒä¸é€‚åˆä½ ï¼Œä¸è¦çŠ¹è±«ï¼Œåœ¨è¯„è®ºä¸­æå‡ºé—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„å¸®åŠ©ä½ ðŸ˜Š
ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç‚¹å‡»é“¾æŽ¥ç›´æŽ¥åœ¨ Ligo åœ¨çº¿ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹å®Œæ•´çš„ä»£ç [ã€‚](https://ide.ligolang.org/p/O6URqlH2e7JmawDRaBfDxA)

è¿™ç¯‡æ–‡ç« å¯ä»¥åœ¨æˆ‘çš„åšå®¢[åˆ†æ•£å‘å±•](https://decentradev.netlify.com/#/post/ligo-lesson-1)ä¸Šæ‰¾åˆ°(æ–‡ç« è¢«æ‰˜ç®¡åœ¨ IPFS ä¸Š)ã€‚

åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åœ¨çº¿ç¼–è¾‘å™¨ï¼Œå¹¶æµ‹è¯•æˆ‘ä»¬åˆšåˆšç¼–å†™çš„ä»£ç ã€‚
åœ¨ä»¥åŽçš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å§‹æ·±å…¥ Ligoï¼Œå­¦ä¹ é«˜çº§æ¦‚å¿µæ¥ç¼–å†™æ›´å¤æ‚çš„æ™ºèƒ½åˆçº¦ã€‚

å›žå¤´è§ï¼ï¼

> [åœ¨æ­¤é˜…è¯»ç¬¬äºŒéƒ¨åˆ†](/coinmonks/getting-started-with-ligo-part-2-fb0c000e40c6)
> 
> [ç›´æŽ¥åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)![](img/e9dbce386c4f90837b5db529a4c87766.png)