<html>
<head>
<title>Implementing Proof of Stake Part — 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实施利害关系证明第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/implementing-proof-of-stake-e26fa5fb8716?source=collection_archive---------0-----------------------#2019-01-26">https://medium.com/coinmonks/implementing-proof-of-stake-e26fa5fb8716?source=collection_archive---------0-----------------------#2019-01-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="6c1b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文给出了一个在node.js中实现利益一致性算法的简单方法</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/67a3c3a562cf394e00d1dc1fd2774c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*X1523S70lXzN1lyg8sm7mQ.jpeg"/></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Source: <a class="ae ka" href="https://en.bitcoinwiki.org/upload/en/images/thumb/e/e5/Proof%E2%80%93of%E2%80%93Stake_%28PoS%29.jpg/500px-Proof%E2%80%93of%E2%80%93Stake_%28PoS%29.jpg" rel="noopener ugc nofollow" target="_blank">Bitcoin Wiki</a></figcaption></figure><h1 id="d01a" class="kb kc ht bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated"><strong class="ak">股权证明</strong></h1><p id="df89" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj ld jl jm jn hm dt translated">与工作证明一样，利益证明(PoS)也是一种区块链共识算法。尽管它的工作方式非常不同。许多区块链在生产中使用这种算法，很快以太坊将它的PoS版本称为Casper。</p><p id="74bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了向区块链添加新块，需要一种算法来决定哪个节点能够向区块链添加块。因此，这是任何共识算法的主要目标。</p><h1 id="7d40" class="kb kc ht bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">工作</h1><p id="2dbc" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj ld jl jm jn hm dt translated">作为赌注的证明，为了被选为下一个区块创建者，矿工/验证者需要下注他们的代币/余额。因此，持有最多货币的矿商最有可能被选为领导者并创建下一个区块。一些区块链解决方案不遵循这样的原则，而是随机选择矿工。</p><p id="9179" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果一个矿工被发现作弊或篡改一块，它失去了所有的硬币。因此，这种限制迫使矿工诚实。</p><p id="82ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">考虑这个例子:</p><pre class="jp jq jr js fq le lf lg lh aw li dt"><span id="9c0c" class="lj kc ht lf b fv lk ll l lm ln">let stakedCoins = { <br/>                 "address-1" : 10 <br/>                 "address-2" : 70<br/>                 "address-3" : 50<br/>                 "address-4" : 20<br/>                }</span><span id="f4a2" class="lj kc ht lf b fv lo ll l lm ln">let leader = Object.keys(balances).reduce((a,b) =&gt; balances[a] &gt; balances[b] ? a :b)</span><span id="1669" class="lj kc ht lf b fv lo ll l lm ln">// leader = address-2</span></pre><p id="00e6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是一个简单的例子，在这个例子中，拥有最多令牌的地址被选为领导者。</p><p id="b7a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与工作证明相比，矿工们在计算能力方面相互竞争，而在这里，他们在货币方面竞争。</p><p id="dd2b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Casper是Ethereum的PoS实现，其中验证者必须在智能合约中存放一些令牌才能提出阻塞。任何骗子，如果被抓住，失去所有的赌注代币。</p><h1 id="606a" class="kb kc ht bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">优势</h1><blockquote class="lp"><p id="c5cc" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated">通过PoS，一个拥有普通笔记本电脑的人可以成为验证者。</p></blockquote><p id="b2f5" class="pw-post-body-paragraph iq ir ht is b it lz iv iw ix ma iz ja jb mb jd je jf mc jh ji jj md jl jm jn hm dt translated">与PoW相比，桩的证明将显著减少电力消耗，因此更环保。其次，耗时的挖掘过程将被恒定量的计算所取代。因此，这将提高整个网络的速度。</p><blockquote class="lp"><p id="77f3" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated">攻击将导致损失而不是收益</p></blockquote><p id="f84d" class="pw-post-body-paragraph iq ir ht is b it lz iv iw ix ma iz ja jb mb jd je jf mc jh ji jj md jl jm jn hm dt translated">这种攻击不但没有带来收益，反而会损失财富。由于在PoS中，欺骗导致硬币损失，攻击变得非常昂贵，因此防止分叉。</p><h1 id="2981" class="kb kc ht bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">不足之处</h1><blockquote class="lp"><p id="00bd" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated">一个拥有51%财富的矿工将拥有这个网络。</p></blockquote><p id="2912" class="pw-post-body-paragraph iq ir ht is b it lz iv iw ix ma iz ja jb mb jd je jf mc jh ji jj md jl jm jn hm dt translated">在PoS协议中，拥有总硬币51%的矿工将始终被选为领导者。因此，如果单个节点总是创建块，那么区块链的去中心化就变得无效。然而，一个节点不可能拥有全部硬币的51%。</p><p id="bc44" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="me">然而，许多区块链都有防止这种情况发生的协议。一个这样的解决方案是创造货币。其中，随着时间的推移，被选为领导者的趋势降低，或者作为验证者的硬币下注时间最长，成为领导者。</em></p><h1 id="e9f4" class="kb kc ht bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结构</h1><p id="3226" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj ld jl jm jn hm dt translated">我们将在node.js中实现以下给定的结构:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mf"><img src="../Images/301f47f7bae2e22e1f1d6ae29ad262a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-jO_9Lc2_hsSvOovb-fwQ.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Basic Structure of PoS</figcaption></figure><ol class=""><li id="a5ae" class="mk ml ht is b it iu ix iy jb mm jf mn jj mo jn mp mq mr ms dt translated">如果网络中的节点想要成为验证者，那么它首先提交验证者费用。</li><li id="9370" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">当交易被确认后，它可以投入一些硬币来与其他验证者竞争。</li><li id="75a5" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">同时，每个节点负责广播它们从客户端接收的事务。</li><li id="7295" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">当创建了足够数量的交易时，验证者选举具有最大赌注硬币的领导者。当选的领导人然后创建一个块，并向网络广播。</li><li id="ee9c" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">每个节点验证块，执行块中的所有事务，并将块添加到链中。</li><li id="ec58" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">街区也有特殊的奖励交易。给定回合的领导者获得该区块中存在的交易的交易费作为奖励。</li></ol><h1 id="303e" class="kb kc ht bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">设计</h1><p id="4d25" class="pw-post-body-paragraph iq ir ht is b it kz iv iw ix la iz ja jb lb jd je jf lc jh ji jj ld jl jm jn hm dt translated">在我们开始编码之前，让我们分析一下我们必须做什么。</p><p id="352f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以下是我们根据上述概述在代码中创建的类:</p><ol class=""><li id="2b47" class="mk ml ht is b it iu ix iy jb mm jf mn jj mo jn mp mq mr ms dt translated">块类</li><li id="5ecc" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">区块链类</li><li id="d711" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">账户模型</li><li id="8df8" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">验证程序类</li><li id="adf0" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">桩子模型</li><li id="6f85" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">交易类别</li><li id="e657" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">交易池</li><li id="9e6b" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">钱包</li><li id="0b72" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">P2P服务器</li><li id="fc33" class="mk ml ht is b it mt ix mu jb mv jf mw jj mx jn mp mq mr ms dt translated">蜜蜂</li></ol><p id="32b6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">稍后我们会添加更多，但这些看起来很好，以便更好地理解。我们继续吧。</p><p id="59fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/implementing-proof-of-stake-part-2-748156d5c85e">第2部分:实施利害关系证明</a></p></div><div class="ab cl my mz hb na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hm hn ho hp hq"><p id="2c9d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="me">感谢您的阅读。</em> <strong class="is hu"> <em class="me">在下一部分，我们将开始编写一些代码。</em> </strong> <em class="me">希望你喜欢这个简短的介绍。如果你发现这很有帮助，请鼓掌。</em>T13】</p><p id="4ed5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你对区块链、以太坊或整个世界有任何问题，请发表评论。:)</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff nf"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a></figure><blockquote class="lp"><p id="6c0f" class="lq lr ht bd ls lt ng nh ni nj nk jn ek translated"><a class="ae ka" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nm nn no np nq jt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nl"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>