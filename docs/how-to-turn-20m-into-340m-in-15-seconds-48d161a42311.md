# 如何在 15 秒内将 2000 万美元变成 3.4 亿美元

> 原文：<https://medium.com/coinmonks/how-to-turn-20m-into-340m-in-15-seconds-48d161a42311?source=collection_archive---------0----------------------->

![](img/760ec1f1faf29513482f52b16eb53098.png)

Photo by [Jason Pofahl](https://unsplash.com/@jasonpofahlphotography?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/funds?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

# TL；速度三角形定位法(dead reckoning)

> 基金不是 safu！

# 摘要

任何人只要有大约 40，000(约 20，000，000 美元)就可以窃取 Maker DAO(戴和赛)的所有抵押品，以及 Compound、Uniswap 和其他 Maker integrated systems(超过 340，000，000 美元)的大量资产。

Maker DAO v2(又名 Multi-parallels DAI，又名 McDAI)本应在推出时提供保护措施(紧急关闭和治理延迟),以防止敌对的 MKR 持有者窃取所有抵押品，并可能在此过程中抢走 Uniswap、Compound 和其他与 Maker 集成的系统的很大一部分。相反，他们决定不这样做。

# 银行

创客道。它是使戴工作的东西。它目前在 v1 和 v2 版本中锁定了价值约 3 . 4 亿美元的 ETH。它也是一个“被治理”的系统，不像 [https://uniswap.exchange](https://uniswap.exchange) 或【https://augur.net】T2，这意味着一些富豪集团可以控制系统的行为。

# 设计

治理系统可以调用各种各样的内部函数，允许管理者做任何他们想做的事情。治理是一个相当简单的“利益相关者”系统，在这个系统中，你把你的 MKR 押在你想要控制这个系统的契约上，而与最大利益相关者 MKR 的契约被给予这种控制。由于目前的执行合同(又名:执行提案)有大约 80，000 MKR 押在上面，对制造商合同做*你想做的*的天真成本大约是 80，000 MKR，或大约 4100 万美元。为了减轻恶意行为者的威胁，该系统具有一种机制，使得在选择新的执行合同之后，在它能够采取任何行动之前有一个延迟。在这一延迟期间，任何拥有足够数量 MKR 的人都可以触发整个系统的全球结算，在新的执行合同能够做任何不利的事情之前有效地关闭它。这意味着，如果一个小偷出现并试图在他们自己的执行合同中投票，该合同被编程为窃取所有抵押品，即使他们比其他执行合同拥有更多股份，他们也必须等待延迟，并希望在此期间没有人触发防御机制。

# 疏忽

问题是，Maker Foundation 认为这个治理延迟的合适值是 0 秒。没错，**防御者有 0 秒时间来抵御一个富有但怀有恶意的一方发起的攻击**。

# 微妙之处

鉴于上述情况，攻击者可能会执行以下操作:

1.  通过任何可能的手段获得 8 万 MKR。
2.  创建一份执行合同，将所有抵押品从创建者转移给你。
3.  立即(在同一交易中)对合同进行表决。
4.  立即(在同一事务中)激活合同。
5.  带着价值 3 . 4 亿美元的 ETH(不要再为你的 MKR 而烦恼了，在这之后它将一文不值)。

这非常有利可图(8 倍的投资回报率)，但是执行起来非常昂贵。幸运的是，只要耐心等待，我们就可以将攻击成本降低到原来的 50%!

还记得我们在上面描述的当前投票系统的工作方式是，拥有最多票数的高管合同是拥有所有控制权的合同吗？任何时候提出治理投票，都会有一段时间让 MKR 的股份从旧的高管合同转移到新的合同。这种情况从来不会一蹴而就，它通常会随着时间的推移而发生，因为个人会向前移动他们的选票。在某个时间点，80，000 个积极参与的 MKR 将被分成两个执行合同，每个合同中大约有 40，000 个 MKR。一个好的脚本小子可以很容易地安排交易时间，使其正好在 MKR 在两个合同之间最优分配时着陆，并在那时执行上述攻击，仅花费 40，000 多 MKR(约 2000 万美元)。

# 收银机

如果偷 3.4 亿美元对你来说还不够，你还可以铸造一个千万亿的 DAI 作为攻击执行的一部分。在与您抢劫 Maker 相同的交易中，您可以将 DAI 交给 Uniswap，并窃取 DAI:ETH 对中所有可用的 ETH 流动性。从倒霉的银行顾客的口袋里掏出一点额外的零钱，你还可以去复利，借出一万亿戴，并借入所有可用的贷款资本(你永远不会偿还贷款，只是保留借来的资产)。如果你行动迅速，你甚至可以在 IDEX、Paradex、RadarRelay 等半分散的交易所套现。铸币后，戴立即宣布。

# 人群

但是等等，还有呢！以太坊是一个建立在绑定协议上的系统！这意味着，人们可以创建一个智能契约，在这个契约中，互不信任的多人可以在一套严格的规则下相互勾结。这套规则可能是这样的:

> 如果这个合同收集 40，000 MKR，那么任何人都可以触发它，它会立即抢劫制造商。抢劫成功后，战利品将在 MKR 捐助者之间平均分配。抢劫失败后，参与者可以撤回 MKR。任何人都可以随时撤回他们的 MKR。

这个非常简单的合同是每个为合同贡献 MKR 的人之间有约束力的协议，没有必要像传统的抢劫那样让任何人互相信任。没有人可以带着所有的战利品逃跑，没有人可以窃取任何其他参与者的贡献，没有人可以使用贡献的 MKR 做任何事情，除了执行商定的抢劫。

有人可能会说(创客基金会也这么说)，任何攻击者都必须向众包报告他们的存在，创客基金会可以简单地打破他们“我们不参与治理”的规则，通过将基金会的所有 MKR 投入投票来阻止攻击，从而使现在的成本为 400，000，000 MKR 而不是 40，000 MKR。虽然如果创客基金会预见到这一点，他们确实可以阻止，但不能保证他们会预见到这一点。例如，攻击者可能在其他地方拥有资金，他们可以用这些资金在交易所外收购 MKR。袭击者也可能是 MKR 持有者，他们认识其他道德败坏的 MKR 持有者，并可能私下合作。

即使有约束力的协议合同是众所周知的，它也可能被设计成混淆众包的方式。例如，您可以让每个感兴趣的人向中央服务提供商提交一个预签名的交易(不需要完全信任他们)，然后中央服务提供商将等待广播这些交易，直到足够多的 MKR“准备好移动”。在这种情况下，要么 Maker Foundation 在不知道是否有人实际参与的情况下介入集中控制系统，要么他们什么也不做，冒着随时可能发生攻击的风险，他们将无力及时做出反应。

# 内部人员

值得注意的是，如果他们愿意，创客基金会现在就可以用这种方式攻击系统*。他们有远远超过 80，000 MKR 的必要。更糟糕的是，a16z 现在手头有足够的 MKR 来耐心地执行攻击！我不知道其他几个 MKR 持有者的身份，他们也持有足够的数量来执行耐心版本的攻击，然后还有少数人需要与一两个其他人勾结来执行攻击。*

*这里应该让你感到害怕的是，这不是#DeFi，这是#CeFi，但不是只有一个人(银行)能够偷走你所有的钱，银行**或许多大的个人股东中的任何一个，或一群小股东**可以在任何时候决定偷走你所有的钱。*

# *余波*

*那么如果有人执行这种攻击，Maker 用户会怎么样呢？首先，所有持有 CDP/保险库的人都将被扫地出门。直接盗窃是盗窃所有抵押品。由此带来的连锁效应是，戴将成为 100%的抵押不足，其价格可能会跌至零。接下来，MKR 的价值可能会变为零，因为他们的整个系统基本上失败了，在这种失败之后，复活它是不太可能的。以太坊也可能需要一点舔舔，因为这将是以太坊生态系统中的又一个大失败。我怀疑它会恢复，因为它仍然是一个好平台，但“人们可以在好事的基础上建立坏事”的提醒对于非理性繁荣来说是一个清醒的认识。*

# *辩方*

*我已经向 Maker 提出了这种攻击场景，他们明确表示不值得他们放弃即时治理控制来防范这种攻击。他们的辩护论点的总主题如下(由我转述，如果你想要第一手陈述就和他们谈)，连同我的反驳:*

*   ****攻击载体已经存在了相当一段时间，但目前为止一切正常。***
    Heartbleed (OpenSSL 攻击)存在了 10 年才被发现。众所周知，Maker 的源代码很难遵循，这是以太坊开发社区中很大一部分人的抱怨。我曾亲自告诉他们，我没有审计制造商的合同，因为阅读他们的代码太难了。我最终咬紧牙关，开始研究 Maker v2，因为它被认为是安全的(不像 Maker v1 那样众所周知是不安全的，尽管我没有意识到它有多不安全)。仅仅因为还没有人执行攻击，并不意味着他们将来不会执行攻击。当这种载体变得更加广为人知时，情况尤其如此。*
*   *它对任何人来说都太昂贵了，除了少数精选的人来执行。
    见上节人群。还要注意，攻击只需要一个人，所以“对少数人来说太贵了”并不能保证系统的安全。*
*   *攻击者必须报告他们的攻击。只有当攻击来自大量 MKR 持有者的合作，并且只有当制造者愿意仅仅因为有人可能正在准备攻击的*暗示而进行辩护。**
*   *我们会对任何攻击者采取法律行动。
    这个基本上是在#DeFi 面前吐槽。以太坊生态系统中的许多人明确地试图保护自己免受极权政府的伤害。声称“你的钱是安全的，因为你躲避的那些暴徒会保护你”一点也不让人放心。此外，它还假设攻击者不是匿名的(见下文)。*
*   ****以太坊上很难匿名。***
    是的，在以太坊上匿名有点棘手。尽管如此，DAO 攻击者仍然是未知的。聪尚不得而知。许多非常富有的 ETH 持有者不为人知。强硬并不能很好地抵御利润丰厚的攻击。*
*   ****是已知的风险，但还有未知的风险可能更糟糕。我非常不同意这种风险评估。你有一个已知的风险，其中攻击系统*非常有利可图*，并且正在与未知影响和未知可能性的未知风险进行比较。这种思路与“没有值得我们放弃控制的攻击媒介”是一致的****

# *揭秘*

*在 Maker v2 推出之前，Maker 就已经意识到了这个问题，可能是从一开始。尽管如此，他们还是*选择*不堵上这个洞(堵上很容易)。正因为如此，我不认为我保持沉默是负责任的，也不希望攻击者弄清楚对任何了解 Maker 治理模型的人来说显而易见的事情。*

# *升职*

*我很少写博客，但是如果你想要一个这样的宝石，请随时鼓掌，评论，订阅！如果你想看我在网上和人们争论类似的事情，那就在 Twitter 上关注我吧。*

> *加入 Coinmonks [电报频道](https://t.me/coincodecap)和 [Youtube 频道](https://www.youtube.com/c/coinmonks/videos)获取每日[加密新闻](http://coincodecap.com/)*

## *另外，阅读*

*   *[复制交易](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c) | [加密税务软件](/coinmonks/crypto-tax-software-ed4b4810e338)*
*   *[网格交易](https://coincodecap.com/grid-trading) | [加密硬件钱包](/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069)*
*   *[密码电报信号](http://Top 4 Telegram Channels for Crypto Traders) | [密码交易机器人](/coinmonks/crypto-trading-bot-c2ffce8acb2a)*
*   *[有哪些交易信号？](https://coincodecap.com/trading-signal) | [比特斯坦普 vs 比特币基地](https://coincodecap.com/bitstamp-coinbase)*
*   *[ProfitFarmers 回顾](https://coincodecap.com/profitfarmers-review) | [如何使用 Cornix 交易机器人](https://coincodecap.com/cornix-trading-bot)*
*   *[如何在势不可挡的域名上购买域名？](https://coincodecap.com/buy-domain-on-unstoppable-domains)*
*   *[印度的加密税](https://coincodecap.com/crypto-tax-india) | [altFINS 审查](https://coincodecap.com/altfins-review) | [Prokey 审查](/coinmonks/prokey-review-26611173c13c)*
*   *[最佳加密交易所](/coinmonks/crypto-exchange-dd2f9d6f3769) | [印度最佳加密交易所](/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9)*
*   *[开发人员的最佳加密 API](/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f)*
*   *最佳[密码借贷平台](/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa)*
*   *杠杆代币的终极指南*