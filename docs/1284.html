<html>
<head>
<title>Decoding the architecture of P2P securities transfer app on Hyperledger Fabric based app — Consensus 2018</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解码基于Hyperledger Fabric的P2P证券交易应用程序的架构—共识2018</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/decoding-the-architecture-of-p2p-securities-transfer-app-on-hyperledger-fabric-based-app-41c9aa8765d2?source=collection_archive---------3-----------------------#2018-08-10">https://medium.com/coinmonks/decoding-the-architecture-of-p2p-securities-transfer-app-on-hyperledger-fabric-based-app-41c9aa8765d2?source=collection_archive---------3-----------------------#2018-08-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/55895b98cf77f9747d914ec1a2a721c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5D21JbhwggkYs2mVUuItg.png"/></div></div></figure><p id="6525" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">2018年5月，Hyperledger主办的共识活动。许多Hyperledger成员展示了他们使用不同的区块链平台开发的产品和平台。</p><p id="cedb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">其中一位成员介绍了基于Hyperledger架构开发的P2P安全交易平台。</p><p id="b8b7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在解释应用程序之前，我们可能会有一个问题。</p><blockquote class="jz"><p id="bc31" class="ka kb ht bd kc kd ke kf kg kh ki jy ek translated"><strong class="ak">什么是证券/商业票据？</strong></p></blockquote><h2 id="66eb" class="kj kk ht bd kl km kn ko kp kq kr ks kt jm ku kv kw jq kx ky kz ju la lb lc ld dt translated">由金融/公司或大公司针对其公司发行的短期债务证券。</h2><blockquote class="jz"><p id="dbdd" class="ka kb ht bd kc kd ke kf kg kh ki jy ek translated">谁是投资者？</p></blockquote><h2 id="91ad" class="kj kk ht bd kl km kn ko kp kq kr ks kt jm ku kv kw jq kx ky kz ju la lb lc ld dt translated"><strong class="ak">通过转让行为从发行人或其他投资者处接收或转让商业票据合同的商业实体。</strong></h2><p id="b931" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">合同结束时，投资者通过利率或5%的利润获得适当的回报。它用于短期贷款。一般来说，商业票据是折价出售的。但是在赎回合同时，他们将获得合同的全部货币价值。</p><p id="547c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在商业票据中，有不同的到期期限。</p><ol class=""><li id="288f" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy lo lp lq lr dt translated">六个月</li><li id="1ee0" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">9个月。(最长270天)</li></ol><p id="ecaf" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在金融领域，任何少于270天的交易都被认为是货币市场。货币市场交易不需要T4证券交易委员会的注册和批准。金融市场中的商业票据。</p><h1 id="9e2c" class="ly kk ht bd kl lz ma mb kp mc md me kt mf mg mh kw mi mj mk kz ml mm mn lc mo dt translated">通过避免证券交易委员会的注册，它的成本更低。这是公司的一大优势。这就是为什么公司使用证券作为短期贷款来满足财务需求。</h1><p id="6c40" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">它避免了商业贷款和SEC批准的成本和时间。</p><p id="2eaf" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">商业票据的问题:</p><ul class=""><li id="8ab4" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy mp lp lq lr dt translated">商业票据是无担保的</li><li id="14b5" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">如果公司到期未能付清欠款，购买者对公司资产没有要求权。</li></ul><p id="b977" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">正因为如此，拥有良好信用的人可以成功地出售商业票据。</p><p id="7de5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">商业票据以大面额出售，</p><ul class=""><li id="9221" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy mp lp lq lr dt">10,00,000$</li></ul><p id="5539" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">商业票据的大部分投资是由大公司和富有的个人完成的。</p><h1 id="6cf6" class="ly kk ht bd kl lz ma mb kp mc md me kt mf mg mh kw mi mj mk kz ml mm mn lc mo dt translated"><strong class="ak">用例:点对点安全传输的中介。自动化区块链上的结算流程。</strong></h1><p id="899e" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">当前状态问题:</p><ul class=""><li id="5551" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy mp lp lq lr dt translated">传统的结算过程缓慢且成本高昂</li><li id="93b3" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">中介手动管理交易</li><li id="6822" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">系统不透明</li><li id="efca" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">难以扩展。</li></ul><h1 id="0784" class="ly kk ht bd kl lz ma mb kp mc md me kt mf mg mh kw mi mj mk kz ml mm mn lc mo dt translated">解决方案:</h1><p id="bf58" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">在这种情况下，三个不同的组织被用来解释这种情况。</p><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mq"><img src="../Images/5471e3147d30d591e4b4b6cf4b3401b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lT4yP3pqyDDY4vv5YOe25Q.png"/></div></div></figure><p id="a753" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> NSD: </strong>国家安全存管机构— <strong class="jd hu">可信第三方</strong>。谁负责将人带入系统并创建联盟。</p><p id="1429" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">技术责任:</p><ol class=""><li id="9ba8" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy lo lp lq lr dt translated">与三个组织建立区块链网络</li><li id="3ca4" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">运行“订购者”，相当于miner。</li><li id="72f1" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">创建针对公司的新证券发行记录。</li><li id="6138" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">维持发行人和投资者的平衡</li></ol><p id="ecd5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">发行人:</strong>通过提及转让指令/规则将商业/证券票据转让给投资者的<strong class="jd hu">商业</strong>实体。</p><p id="0f70" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">投资者:</strong>一个<strong class="jd hu">业务</strong>实体，通过按照规定的规则发起转让，从发行人或其他投资者处接收或转让商业票据合同。</p><p id="d45b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">步骤1 —网络架构</strong> —渠道和组织</p><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mv"><img src="../Images/1a3b0749625571317880bbfba82d5f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9DXBYcYcT8v-3Z56LW5sQ.png"/></div></div></figure><p id="999c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们将使用hyperledger结构配置创建三个组织渠道。在网络之上，业务逻辑将通过<strong class="jd hu">链码/智能合同</strong>实现</p><p id="08fa" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">网络中的参与者</strong></p><p id="6b68" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是一个双对等网络。发行者和投资者各有两个对等方</p><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mw"><img src="../Images/3f8384ac2420003f2c2c2ac0e1c8c60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kmZj8PpptzrggpeRCRms-Q.png"/></div></div></figure><h1 id="74cb" class="ly kk ht bd kl lz ma mb kp mc md me kt mf mg mh kw mi mj mk kz ml mm mn lc mo dt translated">频道</h1><ol class=""><li id="b8e0" class="lj lk ht jd b je le ji lf jm mx jq my ju mz jy lo lp lq lr dt translated"><strong class="jd hu">公共频道:</strong></li></ol><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff na"><img src="../Images/99cec66ffde7c5ef6977c77fd0d5411e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*emF6TPb9TOZ6v-_HuRqQ0w.png"/></div></div></figure><p id="73b1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">用于向所有其他组织广播数据的频道。每个人都可以看到的频道数据。这就像学校里的通知，每个人都可以看到上面写的数据。</p><p id="ce7b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">用于查询网络中创建和可用的安全文件(资产)</p><p id="a21f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">存管渠道</strong></p><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nb"><img src="../Images/4b69e838c90bb36e5874540def973f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9DwhKUOwIOJG75_QXZc_A.png"/></div></div></figure><ol class=""><li id="c59f" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy lo lp lq lr dt translated">NSD(国家安全存管机构)余额的维护。</li><li id="0f2e" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">谁是渠道的参与者</li><li id="f3bd" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">记录双方之间的资产转移</li></ol><p id="0a37" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">NSD投资者/发行人</strong></p><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nc"><img src="../Images/c6be67e4406c2d9a93e7f4aabc140fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2KvOGFHV-594qT_zLLcaIA.png"/></div></div></figure><ol class=""><li id="2084" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy lo lp lq lr dt translated">该通道用于NSD →发行人和NSD→投资者的数据通信。</li></ol><p id="76c6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">发行人-NSD-投资者</strong></p><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nd"><img src="../Images/68fd7fc16060c8be98ac8e8670adef90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3ZRGijlgziIQy-FGWhXYA.png"/></div></div></figure><p id="d98b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是通道，用于NSD发行人投资者</p><h1 id="1b72" class="ly kk ht bd kl lz ma mb kp mc md me kt mf mg mh kw mi mj mk kz ml mm mn lc mo dt translated">链码/智能合同/业务逻辑</h1><p id="105b" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">现在，我们可以看到业务逻辑安装在通道上</p><h2 id="1e25" class="kj kk ht bd kl km ne ko kp kq nf ks kt jm ng kv kw jq nh ky kz ju ni lb lc ld dt translated">1.图书:部署在存管渠道</h2><p id="c14b" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">a.维护组织持有的证券数量的记录。</p><p id="29d5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">b.一旦接收到匹配指令</p><p id="6c28" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">→验证转账器的余额</p><p id="d249" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">→将指定数量的证券从转让方余额转移至转让接收方。</p><h2 id="884a" class="kj kk ht bd kl km ne ko kp kq nf ks kt jm ng kv kw jq nh ky kz ju ni lb lc ld dt translated">2.指令链代码:部署在NSD-发行人-投资者</h2><p id="6f38" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">a.有效日期转移指令</p><p id="18f9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">b.转移证券数量并存储它。</p><p id="4c2d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">c.一旦接收到接收者的指令</p><p id="b270" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">→如果存在，查找相应的转移</p><p id="1b0d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">d.存管指令匹配转账成功后，将状态更改为已执行或已拒绝。</p><p id="21e0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> 3。位置链码:部署在NSD会员频道</strong></p><p id="b973" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">a.维护每个成员持有的证券查询的奖励</p><p id="2845" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">b.收到<strong class="jd hu">簿</strong>中记录的移动后，更新成员数量。</p><p id="1ce6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu"> 4。安全链码:部署在公共频道</strong></p><p id="60ca" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">a.维护证券记录。</p><p id="6f56" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">b.操作员可以记录证券的生命周期事件</p><p id="4bf3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">c.支付息票、到期和赎回。</p><h1 id="457a" class="ly kk ht bd kl lz ma mb kp mc md me kt mf mg mh kw mi mj mk kz ml mm mn lc mo dt translated">Web界面和RestAPI</h1><figure class="mr ms mt mu fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nj"><img src="../Images/0913a0c96b7673c261cfbca2bec70b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2_9WugUKXmvI3LY8fYmFSQ.png"/></div></div></figure><p id="0271" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">请看这里的<a class="ae lx" href="https://www.youtube.com/watch?v=eAwCgTUK6tc&amp;list=PL0MZ85B_96CGWiKwZ4e8jxFzU0X7UdVFp" rel="noopener ugc nofollow" target="_blank">视频</a>的演示。</p></div><div class="ab cl nk nl hb nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="hm hn ho hp hq"><p id="0744" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">请留下您的宝贵意见。</p></div></div>    
</body>
</html>