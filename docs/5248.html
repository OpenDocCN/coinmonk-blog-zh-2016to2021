<html>
<head>
<title>A Complete Beginners Guide to Setting Up a Bitcoin/Lightning Network on Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Linux上建立比特币/闪电网络的完整初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-complete-beginners-guide-to-setting-up-a-bitcoin-lightning-network-on-linux-6a388d4103d4?source=collection_archive---------0-----------------------#2021-08-29">https://medium.com/coinmonks/a-complete-beginners-guide-to-setting-up-a-bitcoin-lightning-network-on-linux-6a388d4103d4?source=collection_archive---------0-----------------------#2021-08-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="f59d" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">在regtest模式下使用比特币内核运行LND</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/4380e7ea22327a056adeb43ee54bfb86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EEHrlNxobvf3qt_Ir7F0Ng.jpeg"/></div></figure><p id="a233" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">在本文中，我将在regtest模式下完成我的LND设置。</p><h1 id="641d" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated"><strong class="ak">什么是Regtest？</strong></h1><blockquote class="le lf lg"><p id="f50b" class="jq jr lh js b jt ju iu jv jw jx ix jy li ka kb kc lj ke kf kg lk ki kj kk kl hm dt translated">比特币核心的回归测试模式(regtest mode)可以让你立即创建一个全新的私人区块链，其基本规则与testnet相同，但有一个主要区别:你可以选择何时创建新块，因此你可以完全控制环境。</p></blockquote><h1 id="a3ab" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">设置比特币核心</h1><p id="e8e0" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">我们将在LND安装闪电网络。LND与特定的比特币节点后端兼容，因此你需要安装其中一个才能让LND工作。</p><ul class=""><li id="1284" class="lq lr ht js b jt ju jw jx jz ls kd lt kh lu kl lv lw lx ly dt translated">btcd</li><li id="7a2e" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated">中微子</li><li id="7023" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><strong class="js hu">比特硬币</strong></li></ul><p id="9362" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">在本教程中，我们将使用<strong class="js hu"> bitcoind </strong>也称为比特币核心。</p><h1 id="00dc" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated"><strong class="ak">安装比特币核心</strong></h1><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="b43b" class="mj kn ht mf b fv mk ml l mm mn"><em class="lh"># Get the latest version of bitcoin core from bitcoincore.org<br/></em><strong class="mf hu">$</strong> wget <a class="ae mo" href="https://bitcoincore.org/bin/bitcoin-core-0.21.1/bitcoin-0.21.1-x86_64-linux-gnu.tar.gz" rel="noopener ugc nofollow" target="_blank">https://bitcoincore.org/bin/bitcoin-core-0.21.1/bitcoin-0.21.1-x86_64-linux-gnu.tar.gz</a><br/></span><span id="3ccb" class="mj kn ht mf b fv mp ml l mm mn"><em class="lh"># Get the corresponding signature file</em><br/><strong class="mf hu">$</strong> wget <a class="ae mo" href="https://bitcoincore.org/bin/bitcoin-core-0.21.1/SHA256SUMS.asc" rel="noopener ugc nofollow" target="_blank">https://bitcoincore.org/bin/bitcoin-core-0.21.1/SHA256SUMS.asc</a></span><span id="1bba" class="mj kn ht mf b fv mp ml l mm mn"><em class="lh"># match the signature</em><br/><strong class="mf hu">$</strong> sha256sum --ignore-missing --check SHA256SUMS.asc</span><span id="5897" class="mj kn ht mf b fv mp ml l mm mn"><em class="lh"># get the fingerprint of Bitcoin Core's release key</em><br/><strong class="mf hu">$</strong> gpg --keyserver hkp://keyserver.ubuntu.com --recv-keys        01EA5486DE18A882D4C2684590C8019E36C2E964</span><span id="1782" class="mj kn ht mf b fv mp ml l mm mn"><em class="lh"># verify the signature in the signature file</em><br/><strong class="mf hu">$</strong> gpg --verify SHA256SUMS.asc</span><span id="7a34" class="mj kn ht mf b fv mp ml l mm mn"><em class="lh"># Unpack Bitcoin Core</em><br/><strong class="mf hu">$</strong> tar -zxvf bitcoin-0.21.1-x86_64-linux-gnu.tar.gz<br/><strong class="mf hu">$</strong> cd bitcoin-0.21.1/bin</span></pre><h1 id="8a36" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated"><strong class="ak">配置</strong></h1><p id="b28d" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">首先，运行这个命令<strong class="js hu"> <em class="lh">。/bitcoind-regtest-daemon</em></strong>它会在regtest模式下启动比特币核心。我们需要建立一个配置文件，每次运行比特币核心时，它都会让我们的生活变得更轻松，但在此之前，比特币核心使用<strong class="js hu"> <em class="lh">。/bitcoin-cli -regtest stop。</em> </strong>对于Linux默认的配置文件应该在位置<strong class="js hu"> <em class="lh"> ~/里面。比特币</em> </strong>现在<strong class="js hu"><em class="lh"/></strong>我们将需要在那里创建一个<em class="lh"> bitcoin.conf </em>文件，类似于这样:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="c0a4" class="mj kn ht mf b fv mk ml l mm mn">regtest=1<br/>daemon=1<br/>txindex=1<br/>rpcuser=USERNAME_HERE<br/>rpcpassword=PASSWORD_HERE<br/>zmqpubrawblock=tcp://127.0.0.1:28332<br/>zmqpubrawtx=tcp://127.0.0.1:28333</span></pre><p id="7079" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">这告诉比特币核心使用regtest模式，作为守护进程运行，并保留所有交易的索引。它还设置了RPC身份验证和ZMQ端口，供LND用来与节点通信。现在运行<strong class="js hu"> bitcoind </strong> bitcoin-core将启动。</p><p id="e046" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在运行:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="a64d" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> ./bitcoin-cli getwalletinfo</span></pre><p id="2fe2" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">您将看到警告，这是因为最新版本的bitcoind不会自动创建钱包，因此您必须通过CLI创建一个</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="e78f" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ ./</strong>bitcoin-cli -stdin createwallet mywallet false false<br/>[passphrase]<br/>&lt;ctrl-D&gt;&lt;ctrl-D&gt;</span></pre><p id="fe78" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在我们可以开采一些区块了。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="f329" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ ./</strong>bitcoin-cli -generate 10</span></pre><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff mq"><img src="../Images/314249acebf65742dd31cae8402051b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f-QEexLKqCqXbY7FyBnwoQ.png"/></div></div></figure><p id="2689" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">在您的bitcoind节点使比特币到期之前，您必须挖掘101个区块，才能将比特币转移到另一个钱包。完成此操作后，现在您应该会看到正余额:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="853b" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>./bitcoin-cli getwalletinfo</span></pre><h1 id="457b" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated"><strong class="ak">安装Go </strong></h1><p id="5de2" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">Go是编写LND的编程语言，所以我们需要先安装它。</p><p id="f76d" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">要安装，请运行以下命令之一:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="77a3" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>wget <a class="ae mo" href="https://dl.google.com/go/go1.16.linux-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://dl.google.com/go/go1.16.linux-amd64.tar.gz</a><br/><strong class="mf hu">$</strong> sha256sum go1.16.linux-amd64.tar.gz | awk -F " " '{ print $1 }'</span></pre><p id="f742" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">上面命令的最终输出应该是<code class="eh mv mw mx mf b">013a489ebb3e24ef3d915abe5b94c3286c070dfe0818d5bca8108f1d6e8440d2</code>。如果不是，那么目标回购已经被修改，你不应该安装这个版本的Go。如果匹配，则继续安装Go:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="3626" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>sudo tar -C /usr/local -xzf go1.16.linux-amd64.tar.gz</span></pre><p id="1cc6" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">此时，您应该设置您的<code class="eh mv mw mx mf b">$GOPATH</code>环境变量，它代表您的工作空间的路径。默认情况下，<code class="eh mv mw mx mf b">$GOPATH</code>设置为<code class="eh mv mw mx mf b">~/go</code>。你还需要将<code class="eh mv mw mx mf b">$GOPATH/bin</code>添加到你的<code class="eh mv mw mx mf b">PATH</code>中。这确保了您的shell能够检测到您安装的二进制文件。</p><p id="73a2" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">设置<code class="eh mv mw mx mf b">go</code>路径，这可以在<code class="eh mv mw mx mf b">.profile</code>(显示为<code class="eh mv mw mx mf b">.bashrc</code>)或直接在<code class="eh mv mw mx mf b">.bashrc</code>中完成:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="42f9" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> nano ~/.bashrc</span></pre><p id="d734" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">添加到末尾:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="01b8" class="mj kn ht mf b fv mk ml l mm mn">export GOPATH=~/gocode<br/>export PATH=$PATH:$GOPATH/bin<br/>export PATH=$PATH:/usr/local/go/bin</span></pre><p id="f8a2" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">注销并重新登录以重新读取变量，或者您可以键入:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="c6a6" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>source ~/.bashrc</span></pre><p id="f01d" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">检查变量:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="2d39" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>go env</span></pre><p id="9d91" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">如果你看到输出，<code class="eh mv mw mx mf b">go</code>设置正确。</p><h1 id="4856" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated"><strong class="ak">安装LND </strong></h1><p id="9bfe" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">我们将从源头安装lnd</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="5d4f" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> git clone <a class="ae mo" href="https://github.com/lightningnetwork/lnd" rel="noopener ugc nofollow" target="_blank">https://github.com/lightningnetwork/lnd</a><br/><strong class="mf hu">$ </strong>cd lnd<br/><strong class="mf hu">$ </strong>"make" &amp;&amp; "make" install</span></pre><p id="855c" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">上面的命令将安装当前<code class="eh mv mw mx mf b">lnd</code>的<em class="lh">主</em>分支。如果您希望安装<code class="eh mv mw mx mf b">lnd</code>的标记版本(因为主分支有时会不稳定)，那么<a class="ae mo" href="https://github.com/lightningnetwork/lnd/releases" rel="noopener ugc nofollow" target="_blank">访问版本页面以找到最新版本</a>。</p><p id="d8b2" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">要检查lnd是否安装正确，请运行:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="be33" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>  make check</span></pre><h1 id="e271" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">建立LND</h1><p id="8ada" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">我们将运行两个LND节点，因此让我们创建目录</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="388c" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> mkdir ~/.lnd<br/><strong class="mf hu">$</strong> mkdir ~/.lnd2</span></pre><p id="498e" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在让我们制作配置文件。在<code class="eh mv mw mx mf b">.lnd</code>目录下保存为<code class="eh mv mw mx mf b">lnd.conf</code>。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="8b4e" class="mj kn ht mf b fv mk ml l mm mn">[Bitcoin]<br/><br/>bitcoin.active=1<br/>bitcoin.regtest=1<br/>bitcoin.node=bitcoind<br/><br/>[Bitcoind]<br/><br/>bitcoind.rpchost=localhost<br/>bitcoind.rpcuser=YOUR_USERNAME<br/>bitcoind.rpcpass=YOUR_PASSWORD<br/>bitcoind.zmqpubrawblock=tcp://127.0.0.1:28332<br/>bitcoind.zmqpubrawtx=tcp://127.0.0.1:28333</span></pre><p id="d51b" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">确保您使用之前在脚本中使用的比特币RPC用户名/密码。</p><p id="8add" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在我们将在<code class="eh mv mw mx mf b">.lnd2</code>目录中制作<code class="eh mv mw mx mf b">lnd.conf</code>:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="4948" class="mj kn ht mf b fv mk ml l mm mn">[Application Options]<br/><br/>listen=0.0.0.0:9734<br/>rpclisten=localhost:11009<br/>restlisten=0.0.0.0:8180<br/><br/>[Bitcoin]<br/><br/>bitcoin.active=1<br/>bitcoin.regtest=1<br/>bitcoin.node=bitcoind<br/><br/>[Bitcoind]<br/><br/>bitcoind.rpchost=localhost<br/>bitcoind.rpcuser=YOUR_USERNAME<br/>bitcoind.rpcpass=YOUR_PASSWORD<br/>bitcoind.zmqpubrawblock=tcp://127.0.0.1:28332<br/>bitcoind.zmqpubrawtx=tcp://127.0.0.1:28333</span></pre><p id="59f1" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">这为网络、RPC和REST连接设置了不同的端口</p><p id="7174" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在让我们设置一些别名。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="3e82" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> nano ~/.bashrc</span></pre><p id="f179" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">添加到末尾，这样我们就不用每次做命令的时候都把它们打出来。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="f3b2" class="mj kn ht mf b fv mk ml l mm mn">export LND1_DIR="$HOME/.lnd"<br/>export LND2_DIR="$HOME/.lnd2"</span><span id="61d8" class="mj kn ht mf b fv mp ml l mm mn">alias lnd1="lnd --lnddir=$LND1_DIR";<br/>alias lncli1="lncli -n regtest --lnddir=$LND1_DIR"</span><span id="52f2" class="mj kn ht mf b fv mp ml l mm mn">alias lnd2="lnd --lnddir=$LND2_DIR";<br/>alias lncli2="lncli -n regtest --lnddir=$LND2_DIR --rpcserver=localhost:11009"</span></pre><h1 id="6408" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">运行LND</h1><p id="e41a" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">打开终端窗口并运行:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="b618" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> lnd1</span></pre><p id="06a8" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">我们需要创建或解锁钱包。打开另一个终端窗口。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="8c25" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> lncli1 create</span></pre><p id="f220" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">按照提示并保存助记符。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="68f0" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> lncli1 getinfo</span></pre><p id="aa89" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">这将显示一些关于节点的基本信息，如下所示:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff my"><img src="../Images/84db2113e057cf240589156707d96e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zOwvLJPTBaZukl832bkGA.png"/></div></div></figure><p id="effa" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">接下来，用<code class="eh mv mw mx mf b">lnd2</code> / <code class="eh mv mw mx mf b">lncli2</code>做同样的事情</p><h1 id="fbf1" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">连接节点</h1><p id="c203" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">如果你运行<code class="eh mv mw mx mf b">lncli1 listpeers</code>，你会发现你的节点仍然是孤独的。让我们把它们连接起来。让我们获取第二个节点的信息。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="ffe5" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> lncli2 getinfo</span></pre><p id="5ec7" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">输出应包含以下内容:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff mz"><img src="../Images/b78a8b8a70898ba8a5d72ddd3edef866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VSv7WFW-9CoMEfemBG2cuQ.png"/></div></div></figure><p id="5a27" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">让我们使用以下命令将第一个节点连接到第二个节点:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="714f" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> lncli1 connect 02ddda5e36c254c9821ca3d8c17e1ecf9fd2f8ff703cf221eb59b4529224b79f92@localhost:9734</span></pre><p id="1029" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在再次运行<code class="eh mv mw mx mf b">lncli1 listpeers</code>。您的输出将类似于以下内容:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff na"><img src="../Images/7d2302f6e6a4f0bbdfe0ffd16f0025cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*4MzehL_RDBAq-EPe_RnISg.png"/></div></figure><p id="863e" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在，您已经准备好创建渠道并汇款了。</p><h1 id="a0db" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated"><strong class="ak">创建频道</strong></h1><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="293e" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$</strong> lncli2 newaddress p2wkh</span><span id="1eea" class="mj kn ht mf b fv mp ml l mm mn">{</span><span id="1a1c" class="mj kn ht mf b fv mp ml l mm mn">"address": "bcrt1q7nf2d70la3ys27ckf8lgeg67fk4e3dfejuag2y"</span><span id="b74e" class="mj kn ht mf b fv mp ml l mm mn">}</span></pre><blockquote class="le lf lg"><p id="2f8b" class="jq jr lh js b jt ju iu jv jw jx ix jy li ka kb kc lj ke kf kg lk ki kj kk kl hm dt translated"><em class="ht">这将产生一个Bech32格式地址，这是一个本地segwit地址格式，在打开/关闭通道的费用计算中费用较低。您还可以使用</em> <code class="eh mv mw mx mf b"><em class="ht">lncli newaddress np2wkh</em></code> <em class="ht">获得不同格式的地址，看起来更像传统的multisig地址，但不能利用segwit费用的优势。</em></p></blockquote><p id="f12e" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在，发送一个你之前挖掘的比特币到节点。我们将生成一些块来给它确认。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="c447" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>./bitcoin-cli -named sendtoaddress address="bcrt1q7nf2d70la3ys27ckf8lgeg67fk4e3dfejuag2y" amount=0.5 fee_rate=1 replaceable=true</span><span id="cbed" class="mj kn ht mf b fv mp ml l mm mn"><strong class="mf hu">$ ./</strong>bitcoin-cli generate 6</span></pre><p id="e404" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在，我们可以打开一个通道。让我们获取第一个节点的pubkey:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="3164" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu"> $</strong> lncli1 getinfo</span></pre><p id="f0d0" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">使用您在那里获得的值启动一个通道。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="0cdc" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>lncli2 openchannel 02de337106d04ede8b49af4533669bea94f67c605011f49f711402c11912879b02 100000</span></pre><p id="0924" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在挖掘更多的块，使通道有足够的确认。</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="54c7" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ ./</strong>bitcoin-cli generate 10</span></pre><p id="162b" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">让我们看看它是否有效:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff nb"><img src="../Images/6aa12ed9757110e6c5d7c6406834e02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*05TAI5CzW2WNvatagkJM9A.png"/></div></div></figure><h1 id="2a05" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">创建和发送发票</h1><p id="67d7" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">要在终端中创建发票类型，请执行以下操作:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="e883" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>lncli1 addinvoice -amt 100<br/>{<br/>"r_hash": "d998c9e35d73dec5b0cf7d4c35be8c4ec919aee66b698d912665684d6b69098c",</span><span id="4bc3" class="mj kn ht mf b fv mp ml l mm mn">"payment_request": "lnbcrt1u1psjhly3pp5mxvvnc6aw00vtvx004xrt05vfmy3nthxdd5cmyfxv45y66mfpxxqdqqcqzpgxqyz5vqsp5v399u058lal7u3dzswtntktg93wzdtggr2sqqkzy5t6ffd0n4pgq9qyyssqk204pw6as2599mdrefqx5lrycjax5559xnv2lrp9m4wpqavk6enkmtme09yxdt56552mx6v8eg9gpwxvl9mn0t5dea2gtmajzmukffsph8074z",</span><span id="fb34" class="mj kn ht mf b fv mp ml l mm mn">"add_index": "1",</span><span id="11b1" class="mj kn ht mf b fv mp ml l mm mn">"payment_addr": "644a5e3e87ff7fee45a2839735d9682c5c26ad081aa0005844a2f494b5f3a850<br/>}</span></pre><p id="51ee" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">复制<code class="eh mv mw mx mf b">pay_req</code>值并记下<code class="eh mv mw mx mf b">r_hash</code>以备后用。</p><p id="6a3b" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">让我们检查另一个节点上的发票:</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="e18c" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>lncli2 decodepayreq lnbcrt1u1psjhly3pp5mxvvnc6aw00vtvx004xrt05vfmy3nthxdd5cmyfxv45y66mfpxxqdqqcqzpgxqyz5vqsp5v399u058lal7u3dzswtntktg93wzdtggr2sqqkzy5t6ffd0n4pgq9qyyssqk204pw6as2599mdrefqx5lrycjax5559xnv2lrp9m4wpqavk6enkmtme09yxdt56552mx6v8eg9gpwxvl9mn0t5dea2gtmajzmukffsph8074z</span></pre><p id="dfdb" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">您的输出将类似于以下内容:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff nc"><img src="../Images/50a5e2daa8cf843cc19a25564838afd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQVN7P9RS2JyBpvxIIIstw.png"/></div></div></figure><p id="5fba" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在让我们付钱吧！</p><pre class="jj jk jl jm fq me mf mg mh aw mi dt"><span id="a51e" class="mj kn ht mf b fv mk ml l mm mn"><strong class="mf hu">$ </strong>lncli2 payinvoice lnbcrt1u1psjhly3pp5mxvvnc6aw00vtvx004xrt05vfmy3nthxdd5cmyfxv45y66mfpxxqdqqcqzpgxqyz5vqsp5v399u058lal7u3dzswtntktg93wzdtggr2sqqkzy5t6ffd0n4pgq9qyyssqk204pw6as2599mdrefqx5lrycjax5559xnv2lrp9m4wpqavk6enkmtme09yxdt56552mx6v8eg9gpwxvl9mn0t5dea2gtmajzmukffsph8074z</span></pre><p id="8801" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">您的输出将类似于以下内容:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff nd"><img src="../Images/c977dce2405c5162887846eb4d5eb1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Km1QxoINsU-lqgrM7JynEw.png"/></div></div></figure><p id="17da" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">让我们使用付款散列在接收节点上查找发票:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff my"><img src="../Images/fd27722d4153df60e68cc7e9fa367173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s7tu8EZ6igH0PPt8kkdLuQ.png"/></div></div></figure><p id="1961" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">如果你看到已解决:真这是成功的信息</p><h1 id="de84" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld dt translated">结论</h1><p id="56a7" class="pw-post-body-paragraph jq jr ht js b jt ll iu jv jw lm ix jy jz ln kb kc kd lo kf kg kh lp kj kk kl hm dt translated">这是我在2021年比特币之夏<a class="ae mo" href="https://summerofbitcoin.org/" rel="noopener ugc nofollow" target="_blank">对比特币/闪电的基本设置的快速演练。</a></p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><a href="https://www.buymeacoffee.com/NehaKumari"><div class="fe ff ne"><img src="../Images/4bc5de35955c00939383a18fb66b41d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*9vg3-OY14aZN1UpKwIxxZg.png"/></div></a></figure><blockquote class="nf"><p id="0646" class="ng nh ht bd ni nj nk nl nm nn no kl ek translated">加入<a class="ae mo" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank"> Coinmonks电报频道</a>，了解加密交易和投资</p></blockquote><h2 id="7402" class="mj kn ht bd ko np nq nr ks ns nt nu kw jz nv nw ky kd nx ny la kh nz oa lc ob dt translated">另外，阅读</h2><ul class=""><li id="3658" class="lq lr ht js b jt ll jw lm jz oc kd od kh oe kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/bitcoin-taproot" rel="noopener ugc nofollow" target="_blank">比特币主根</a> | <a class="ae mo" href="https://blog.coincodecap.com/bitso-review" rel="noopener ugc nofollow" target="_blank"> Bitso点评</a> | <a class="ae mo" rel="noopener" href="/coinmonks/bitcoin-credit-card-bc8ab6f377c6">排名前6的比特币信用卡</a></li><li id="525a" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/binance-futures-trading" rel="noopener ugc nofollow" target="_blank">币安期货交易</a>|<a class="ae mo" href="https://blog.coincodecap.com/mudrex-3commas-etoro" rel="noopener ugc nofollow" target="_blank">3 comas vs Mudrex vs eToro</a></li><li id="e0d6" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/buy-monero" rel="noopener ugc nofollow" target="_blank">如何购买Monero </a> | <a class="ae mo" href="https://blog.coincodecap.com/idex-review" rel="noopener ugc nofollow" target="_blank"> IDEX评论</a> | <a class="ae mo" href="https://blog.coincodecap.com/bitkan-trading-bot" rel="noopener ugc nofollow" target="_blank"> BitKan交易机器人</a></li><li id="0675" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/binance-vs-bitstamp" rel="noopener ugc nofollow" target="_blank">币安vs比特邮票</a> | <a class="ae mo" href="https://blog.coincodecap.com/bitpanda-coinbase-coinsbit" rel="noopener ugc nofollow" target="_blank">比特熊猫vs比特币基地vs Coinsbit </a></li><li id="fc6b" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/buy-ripple-india" rel="noopener ugc nofollow" target="_blank">如何购买Ripple (XRP) </a> | <a class="ae mo" href="https://blog.coincodecap.com/crypto-exchange-africa" rel="noopener ugc nofollow" target="_blank">非洲最好的加密交易所</a></li><li id="cada" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/crypto-exchange-africa" rel="noopener ugc nofollow" target="_blank">非洲最佳密码交易所</a> | <a class="ae mo" href="https://blog.coincodecap.com/hoo-exchange-review" rel="noopener ugc nofollow" target="_blank">胡交易所评论</a></li><li id="edfa" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/etoro-robinhood" rel="noopener ugc nofollow" target="_blank">eToro vs robin hood</a>|<a class="ae mo" href="https://blog.coincodecap.com/bybit-bityard-moonxbt" rel="noopener ugc nofollow" target="_blank">MoonXBT vs Bybit vs Bityard</a></li><li id="2a41" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/stormgain-review" rel="noopener ugc nofollow" target="_blank"> Stormgain回顾</a> | <a class="ae mo" href="https://blog.coincodecap.com/bexplus-review" rel="noopener ugc nofollow" target="_blank"> Bexplus回顾</a> | <a class="ae mo" href="https://blog.coincodecap.com/binance-vs-bittrex" rel="noopener ugc nofollow" target="_blank">币安vs Bittrex </a></li><li id="20b6" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae mo" href="https://blog.coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></li><li id="dda8" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/ftx-futures-trading" rel="noopener ugc nofollow" target="_blank">如何在FTX交易所交易期货</a> | <a class="ae mo" href="https://blog.coincodecap.com/okex-vs-binance" rel="noopener ugc nofollow" target="_blank"> OKEx vs币安</a></li><li id="ecf7" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/buy-domain-on-unstoppable-domains" rel="noopener ugc nofollow" target="_blank">如何在势不可挡的域名上购买域名？</a></li><li id="adb1" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/crypto-tax-india" rel="noopener ugc nofollow" target="_blank">印度的秘密税</a> | <a class="ae mo" href="https://blog.coincodecap.com/altfins-review" rel="noopener ugc nofollow" target="_blank"> altFINS审查</a> | <a class="ae mo" rel="noopener" href="/coinmonks/prokey-review-26611173c13c"> Prokey审查</a></li><li id="05eb" class="lq lr ht js b jt lz jw ma jz mb kd mc kh md kl lv lw lx ly dt translated"><a class="ae mo" href="https://blog.coincodecap.com/blockfi-vs-coinbase" rel="noopener ugc nofollow" target="_blank">布洛克菲vs比特币基地</a> | <a class="ae mo" href="https://blog.coincodecap.com/bitkan-review" rel="noopener ugc nofollow" target="_blank">比特坎评论</a> | <a class="ae mo" rel="noopener" href="/coinmonks/binance-review-ee10d3bf3b6e">币安评论</a></li></ul></div></div>    
</body>
</html>