<html>
<head>
<title>Sharding: The brain of Ethereum 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">切分:以太坊2.0的大脑</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/sharding-the-brain-of-ethereum-2-0-458c04b2bb5e?source=collection_archive---------1-----------------------#2020-05-10">https://medium.com/coinmonks/sharding-the-brain-of-ethereum-2-0-458c04b2bb5e?source=collection_archive---------1-----------------------#2020-05-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="66d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我们之前的文章中，我们谈到了<a class="ae jo" href="https://blog.coincodecap.com/ethereum-beacon-chain/" rel="noopener ugc nofollow" target="_blank">信标链</a>。对于心脏，你需要记忆来储存信息。这就是<strong class="is hu">分片</strong>出现的原因。分片是以太坊2.0的记忆中心。让我们来讨论一下sharding试图解决的问题。</p><h1 id="8ac3" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">DCS三角形</h1><p id="4310" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">理想的区块链是不集中的，集中的，可计算的。但在现实中，一个<a class="ae jo" href="https://blog.coincodecap.com/what-is-blockchain-a-simple-guide-for-dummies/" rel="noopener ugc nofollow" target="_blank">区块链</a>不可能同时拥有这三个。总是有一个或多个特征的折衷，也就是说，你可以拥有任意两个特征，但不能拥有所有三个特征。</p><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff ks"><img src="../Images/c0172f092e164472b4661ab0450c491a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f9LZzS_0tUaX-8dw.png"/></div></div></figure><p id="5428" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">比如以太坊和<a class="ae jo" href="https://blog.coincodecap.com/a-candid-explanation-of-bitcoin/" rel="noopener ugc nofollow" target="_blank">比特币</a>是去中心化的，一致(共识)但不可扩展。同样，Hyperledger Fabric是一致的、可扩展的，但不是分散的。它用DCS三角形直观表示。</p><h1 id="4c7d" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">可伸缩性三元悖论</h1><p id="f408" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">以太坊团队已经引入了一个名为<strong class="is hu">可伸缩性三难困境</strong>的三难困境。根据这一点，一个区块链系统最多只能有以下三种性质中的两种:</p><ol class=""><li id="feb0" class="le lf ht is b it iu ix iy jb lg jf lh jj li jn lj lk ll lm dt translated">分散</li><li id="12ae" class="le lf ht is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm dt translated">安全性</li><li id="a6ab" class="le lf ht is b it ln ix lo jb lp jf lq jj lr jn lj lk ll lm dt translated">可量测性</li></ol><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff ls"><img src="../Images/38a1a8fe02d2c528900e72e4a930e22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qgkVgkpc4nhOkgmb.png"/></div></div></figure><p id="6a6b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">目前，以太坊每秒可以处理12-30笔交易。它优于比特币(每秒可处理7-10笔交易)，但远不及Visa(每秒可处理约1700笔交易)。</p><p id="1d53" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊中的每个节点都必须处理网络中发生的事务。他们还必须在电脑上存储整个以太坊区块链(大约300 GB)。这些就是以太坊1.0不适合微交易，并且饱受可扩展性问题困扰的原因。</p><p id="49e2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，sharding是以太坊试图通过整合所有三个特性来击败trilemmas，而没有任何折衷。</p><p id="5763" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从数据库的角度来看，分片是将大型数据库划分为更小的、可管理的、可扩展的数据库片段(称为数据分片)的过程。这就像不是一个人负责所有的任务，而是在多人之间分配任务。我们来看看以太坊2.0是如何实现分片功能的。</p><h1 id="bf5f" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">以太网2.0中的分片实现</h1><p id="654a" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">在继续之前，让我们先了解一些重要的术语。</p><p id="6666" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">状态</strong>:状态一般是描述系统在任一时间点的一组信息。在以太坊中，这是包含当前余额的当前账户集，给定时间内的智能合约代码。对于每个新的事务，状态都会发生变化。</p><p id="327b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">事务</strong>:用户发出的改变系统状态的操作。它可以是以太网转移或部署智能合同。</p><p id="a11e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Merkle Tree: </strong>它是一种数据结构，可以通过加密哈希存储大量数据。</p><p id="e056" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> Receipt: </strong>它是从一个事务中生成的对象，不存储在系统的状态中，而是保存在Merkle树中，以便其他节点可以很容易地验证它的存在。</p><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff lt"><img src="../Images/95371bfef4ac85a6c3d2e111ca1eda50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7qRDp6GtdV32KJ35.png"/></div></div></figure><p id="fa80" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在分片中，整个以太坊区块链的历史和状态被划分成称为<strong class="is hu">分片</strong>的独立分区。每个碎片都有自己的状态和事务历史。</p><p id="2c9a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">正如维塔利克所说，“一个简单的思考方式是想象一下，如果以太坊被分割成几千个岛屿。每个岛都可以做自己的事，可以有自己的特色，每个属于那个岛的人都可以享受。如果他们想联系其他岛屿，他们将不得不使用某种协议”。</p><h2 id="3963" class="lu jq ht bd jr lv lw lx jv ly lz ma jz jb mb mc kd jf md me kh jj mf mg kl mh dt translated">以太坊2.0中不同类型的节点</h2><ul class=""><li id="cbfa" class="le lf ht is b it kn ix ko jb mi jf mj jj mk jn ml lk ll lm dt translated"><strong class="is hu">超满节点</strong>-这些节点下载信标链的全部数据</li><li id="1fb3" class="le lf ht is b it ln ix lo jb lp jf lq jj lr jn ml lk ll lm dt translated"><strong class="is hu">顶层节点</strong> —这些节点只处理信标链块，但不下载分片块的所有数据。</li><li id="d097" class="le lf ht is b it ln ix lo jb lp jf lq jj lr jn ml lk ll lm dt translated"><strong class="is hu">单分片节点</strong> —它们充当顶级节点，但也完全下载和验证它更关心的特定分片上的每个排序规则。</li><li id="991c" class="le lf ht is b it ln ix lo jb lp jf lq jj lr jn ml lk ll lm dt translated"><strong class="is hu"> Light node </strong> —仅下载并验证主链块的块头；不处理任何排序规则头或事务，除非它需要读取某个特定碎片状态中的某个特定条目，在这种情况下，它将Merkle分支下载到该碎片的最新排序规则头，并从那里下载该状态中所需值的Merkle证明。</li></ul><h1 id="5e19" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">碎片分组</h1><p id="b23c" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">现在你一定想知道分片会在什么基础上发生？一种这样的方案是基于地址划分碎片。</p><p id="eec4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">例如，以0x0开头的地址将形成一个碎片，以0x1开头的地址将形成另一个碎片，以此类推。</p><p id="7f5e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于简单的用例，事务可以发生在一个分片中。一些高级用例可以是跨分片交易，即从分片A到分片b发生的交易，在这种情况下，收据被用作验证工具。</p><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff mm"><img src="../Images/693c6011328508b99bceb2ba0a00c700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*63CW3jCL0OT-wrWm.png"/></div></div></figure><p id="ee3c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是Vitalik的一个例子，解释了跨碎片通信</p><p id="832d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">“如果Bob在碎片B上有50个硬币，并且Alice从碎片A向Bob发送20个硬币，但是碎片B还不知道碎片A的状态，因此不能完全认证该转账，Bob的账户状态暂时变为‘如果来自Alice的转账是真实的，则为70个硬币，否则为50个硬币’能够认证碎片A和碎片B的客户端可以确定传输的“终结性”(即一旦转账可以在链内被验证，Bob的账户状态<em class="mn">将</em>最终解析为70个硬币的事实)几乎立即发生，因此他们的钱包可以简单地表现为Bob已经有了70个硬币。"</p><p id="f3cb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从我们之前关于<a class="ae jo" href="https://blog.coincodecap.com/ethereum-beacon-chain/" rel="noopener ugc nofollow" target="_blank">信标链</a>的文章中，我们知道有一些验证器负责基于利害关系证明来生成块。在每个时间段中，将为特定的碎片随机选择一个验证者(提议者)。</p><p id="3643" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在那之后，验证器将会提出一个包含在碎片中的块。与他/她一起，99个其他验证者(证明者)将证明该块。一个块的头，连同至少67个证明签名(投票)，可以作为包含在碎片中的对象发布。类似地，在第二个槽中，随机选择另一个验证器，该过程继续。</p><p id="942e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">目前，shards还不支持智能合约。但随着EVM的进一步发展，智能合约也将进入碎片市场。分片的最大问题之一是<strong class="is hu">单分片接管攻击</strong>，在这种攻击中，单个攻击者将他所有的散列能力集中在一个分片上来创建一个恶意分片。以太坊提出通过随机性来克服。分片的第二个问题是欺诈检测，尤其是在跨分片通信的情况下。如果有人发现无效的块，目前还没有标准的协议让其他节点知道它。</p><p id="cb03" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">一些有用的链接:</strong></p></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><p id="c4d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="mn">原载于2020年5月10日https://blog.coincodecap.com</em><em class="mn">的</em> <a class="ae jo" href="https://blog.coincodecap.com/sharding-in-ethereum/" rel="noopener ugc nofollow" target="_blank"> <em class="mn">。</em></a></p><blockquote class="mv"><p id="898a" class="mw mx ht bd my mz na nb nc nd ne jn ek translated"><a class="ae jo" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ng nh ni nj nk kx fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nf"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>