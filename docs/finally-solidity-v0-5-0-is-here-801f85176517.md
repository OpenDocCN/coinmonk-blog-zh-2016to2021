# ç»ˆäºŽï¼ŒSolidity v0.5.0 æ¥äº†ï¼

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/finally-solidity-v0-5-0-is-here-801f85176517?source=collection_archive---------0----------------------->

11 æœˆ 13 æ—¥ï¼ŒæœŸå¾…å·²ä¹…çš„ç‰ˆæœ¬ Solidity i.e. 0.5.0 å‘å¸ƒäº†ã€‚åœ¨æ­¤ç‰ˆæœ¬ä¸­å†³å®šè¿›è¡Œè®¸å¤šæ›´æ”¹ã€‚è¿™ä¸ªç‰ˆæœ¬æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å˜æ›´æ—¥å¿—ï¼Œä½¿å¾—è¯­è¨€æ›´åŠ å¼ºå¤§ã€æˆç†Ÿï¼Œæœ‰åŠ©äºŽå®‰å…¨å¼€å‘ã€‚

![](img/8758da2f1ba92cb0838eb3019f0fca56.png)

Solidity v0.5.0

ä»¥å¤ªåŠåŸºé‡‘ä¼šä¸€ç›´åœ¨å°è¯•æ›´æ–° solidity è¯­è¨€ï¼Œä»¥ä½¿å¼€å‘æ›´å°‘å‡ºé”™ï¼Œæ›´å¥å£®ã€‚æ­¤ç‰ˆæœ¬ä¸å…è®¸ä¸€äº›ä¸æŽ¨èçš„åŠŸèƒ½ï¼Œå¹¶å¼ºè°ƒä»£ç å’Œå˜é‡çš„é¢„æœŸåŠŸèƒ½çš„æ¸…æ™°æŒ‡ç¤ºã€‚æˆ‘åœ¨è¿™é‡Œåˆ—å‡ºäº†ä¸€äº›æ›´æ–°å’Œä¸€äº›ä»£ç ç‰‡æ®µã€‚

# æ˜Žç¡®å£°æ˜Ž

*   å°†`public`æ·»åŠ åˆ°æ¯ä¸ªå‡½æ•°ä¸­ï¼Œå°†`external`æ·»åŠ åˆ°æ¯ä¸ªå°šæœªæŒ‡å®šå…¶å¯è§æ€§çš„å›žé€€å‡½æ•°æˆ–æŽ¥å£å‡½æ•°ä¸­ã€‚

```
**function**() **external** { x = 1; } // Fallback
```

*   æ˜Žç¡®è¯´æ˜Žç»“æž„ã€æ•°ç»„æˆ–æ˜ å°„ç±»åž‹çš„æ‰€æœ‰å˜é‡çš„æ•°æ®ä½ç½®(åŒ…æ‹¬å‡½æ•°å‚æ•°)

```
// Function parameters along with data locations **function** reveal(
        uint[] **memory** _values,
        bool[] **memory** _fake,
        bytes32[] **memory** _secret
    )
```

*   éžå¸¸æœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œå£°æ˜Žå˜é‡ï¼Œå°¤å…¶æ˜¯å‡½æ•°å‚æ•°ä¸º`address payable`ï¼Œå¦‚æžœä½ æƒ³å¯¹å®ƒä»¬è°ƒç”¨`transfer`ã€‚

```
address **payable** **public** beneficiary; // If you want to transfer funds 
uint **public** auctionEndTime;
```

# é©³å›ž

*   ä¸å…è®¸å£°æ˜Žç©ºç»“æž„ã€‚
*   ä¸å…è®¸ç”Ÿ`callcode`ã€`var`å…³é”®å­—ã€`sha3`ã€`suicide`åˆ«åã€`throw`è¯­å¥ã€`years`å•ä½å‘½å(ç”±äºŽé—°å¹´çš„å¤æ‚å’Œæ··ä¹±)å’Œä¸€å…ƒ`+`ã€‚
*   å¯¹äºŽå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿”å›žå€¼çš„å‡½æ•°ï¼Œä¸å…è®¸ä½¿ç”¨ç©ºçš„ return è¯­å¥ã€‚
*   ä¸å…è®¸`msg.value`å‡ºçŽ°åœ¨(æˆ–é€šè¿‡ä¿®é¥°ç¬¦å¼•å…¥)ä¸€ä¸ªä¸å¯æ”¯ä»˜çš„å‡½æ•°ä¸­
*   ä¸å…è®¸å›ºå®šå¤§å°æ•°ç»„çš„é•¿åº¦ä¸ºé›¶ã€‚

# å…è®¸

*   æ”¯æŒ`pop()`å­˜å‚¨æ•°ç»„å’Œ`bytes`(ä¸æ˜¯`string`)ä»Žæ•°ç»„æœ«å°¾åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚

```
pragma solidity ^0.5.0;contract Array{
    uint256[] public arr;

    function insert(uint256 element) public {
        arr.push(element);
    }

    function removeOne() public {
        arr.pop();
    }
}
```

*   åœ¨æŽ¥å£ä¸­å…è®¸`enum`s&s`struct`sã€‚

```
**interface** Token {
    **enum** TokenType { Fungible, NonFungible }
    **struct** Coin { string obverse; string reverse; }
    **function** transfer(address recipient, uint amount) **external**;
}
```

*   å…è®¸`mapping`å­˜å‚¨æŒ‡é’ˆä½œä¸ºæ‰€æœ‰å†…éƒ¨å‡½æ•°çš„å‚æ•°å’Œè¿”å›žå€¼ã€‚

æ­¤ç‰ˆæœ¬ä¸­è¿˜ä¿®å¤äº†ä¸€äº›é”™è¯¯ã€‚è¿™ä¸ªç‰ˆæœ¬æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å˜æ›´é›†ã€‚ä½ å¯ä»¥è®¿é—®å®Œæ•´çš„å˜æ›´æ—¥å¿—[è¿™é‡Œ](https://github.com/ethereum/solidity/blob/v0.5.0/Changelog.md)ã€‚(å¯¹å¼€å‘äººå‘˜æ˜¯å¼ºåˆ¶æ€§çš„)

åœ¨è¿™ä¸ªç‰ˆæœ¬ä¹‹åŽï¼Œéšç€è¯­è¨€å˜å¾—æ›´åŠ ä¸°å¯Œï¼Œå¯é æ€§ç¼–ç å’Œè§£æžå°†å¾—åˆ°å¢žå¼ºðŸ˜¬

ç¥æ‰€æœ‰å¼€å‘è€…æ™ºèƒ½ç¼–ç å¿«ä¹ï¼

æ„Ÿè°¢é˜…è¯»ã€‚

ç‰ˆæœ¬ 1: Solidity **v0.5.1** å·²ç»å‘å¸ƒï¼Œä¿®æ­£äº†ä¸€äº›é”™è¯¯ï¼Œå¹¶å¢žåŠ äº†ä»¥ä¸‹è¯­è¨€ç‰¹æ€§:

*   å…è®¸å…¬å…±å’Œå¤–éƒ¨åº“å‡½æ•°çš„å‚æ•°å’Œè¿”å›žå˜é‡çš„æ˜ å°„ç±»åž‹ã€‚
*   å…è®¸å…¬å…±å‡½æ•°è¦†ç›–å¤–éƒ¨å‡½æ•°ã€‚

ç‚¹å‡»æŸ¥çœ‹å®Œæ•´çš„å˜æ›´æ—¥å¿—[ã€‚](https://github.com/ethereum/solidity/releases/tag/v0.5.1)

> [åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­ç›´æŽ¥èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)