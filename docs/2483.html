<html>
<head>
<title>Deploy Smart Contracts with 0 ETH: LOOM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用0 ETH: LOOM部署智能合约</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/deploy-smart-contracts-with-0-eth-loom-c59cc54b749?source=collection_archive---------2-----------------------#2019-10-28">https://medium.com/coinmonks/deploy-smart-contracts-with-0-eth-loom-c59cc54b749?source=collection_archive---------2-----------------------#2019-10-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="7742" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">是的，你没听错。这不是一篇点击诱饵的文章，我将告诉你如何从零开始部署你的智能合同，费用为零。</p><p id="14d8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">走在前面之前，先试着理解什么是织机？</p><p id="f297" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">来源— <a class="ae jo" href="https://loomx.io/developers/en/intro-to-loom.html" rel="noopener ugc nofollow" target="_blank">织机</a></p><blockquote class="jp jq jr"><p id="44e7" class="iq ir js is b it iu iv iw ix iy iz ja jt jc jd je ju jg jh ji jv jk jl jm jn hm dt translated">“Loom Network是面向严肃的dapp开发人员的生产就绪型多链互操作平台。它为开发人员提供了开发高性能dappss所需的工具和知识，这些dapp需要跨多个链的快速无缝UX。通过与比特币、以太坊、币安链和所有主要区块链的集成，部署一次到Loom可以让您的dapp通过达到当今最大可能的用户群来适应未来。”</p></blockquote><figure class="jx jy jz ka fq kb fe ff paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="fe ff jw"><img src="../Images/83e5ece37dc1f92127881c4921500876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eCRHmLiVDspS50wm.png"/></div></div><figcaption class="ki kj fg fe ff kk kl bd b be z ek">loom blockchain</figcaption></figure><p id="6675" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文主要关注技术方面以及如何在Loom上从头开始部署契约，要了解更多理论知识，您可以随时访问Loom文档。</p><p id="4274" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">不用浪费太多时间，我们开始吧。</p><ol class=""><li id="e784" class="km kn ht is b it iu ix iy jb ko jf kp jj kq jn kr ks kt ku dt translated"><strong class="is hu">下载织机二进制。</strong></li></ol><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="b6e4" class="la lb ht kw b fv lc ld l le lf">curl https://raw.githubusercontent.com/loomnetwork/loom-sdk-documentation/master/scripts/get_loom.sh | sh<br/># set LOOM_BIN to reference the downloaded loom binary,<br/># makes it easy to invoke it from anywhere<br/>export LOOM_BIN=`pwd`/loom</span></pre><p id="3bed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2.<strong class="is hu">为织机生成私钥和公钥。</strong></p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="c021" class="la lb ht kw b fv lc ld l le lf">$LOOM_BIN genkey -k extdev_private_key -a extdev_public_key</span></pre><p id="d5ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">3.安装并设置Truffle。</p><p id="da5f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将使用块菌来建立我们的结构。</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="07ba" class="la lb ht kw b fv lc ld l le lf">$ npm install -g truffle</span></pre><p id="7d4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们将初始化松露</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="af6a" class="la lb ht kw b fv lc ld l le lf">$ truffle init<br/>Downloading...<br/>Unpacking...<br/>Setting up...<br/>Unbox successful. Sweet!</span><span id="5113" class="la lb ht kw b fv lg ld l le lf">Commands:</span><span id="291c" class="la lb ht kw b fv lg ld l le lf">  Compile:        truffle compile<br/>  Migrate:        truffle migrate<br/>  Test contracts: truffle test</span></pre><p id="05dd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">到目前为止，我们已经创建了一个Loom和Truffle的原始结构，现在我们需要做的就是编写一个简单的智能合同，并选择一个要部署的网络。因为这是为了测试目的，所以我们在这里部署在<strong class="is hu"> extdev-plasma-us1上。</strong></p><p id="dd25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">4.<strong class="is hu">写一个简单的智能合同- </strong></p><p id="a378" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这里，我只是给你看一个演示，你可以用n的复杂度来写你的智能合约。</p><p id="b810" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我已经为柜台写了一个简单的智能合同。</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="c279" class="la lb ht kw b fv lc ld l le lf">pragma solidity ^0.5.8;</span><span id="1b76" class="la lb ht kw b fv lg ld l le lf">contract Counter {<br/>  uint counter;</span><span id="8a28" class="la lb ht kw b fv lg ld l le lf">constructor() public {<br/>    counter = 0; // Initialise the counter to 0<br/>  }</span><span id="6441" class="la lb ht kw b fv lg ld l le lf">function increment() public {<br/>    counter++;<br/>  }</span><span id="4309" class="la lb ht kw b fv lg ld l le lf">function getCounter() public view returns (uint) {<br/>    return counter;<br/>  }<br/>}</span></pre><p id="6966" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这个你得保存在/contracts/counter.sol上</p><p id="24b6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我为你提供这个项目的Github回购链接，供进一步参考，你可以查看。</p><p id="256f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们还需要修改迁移文件。</p><p id="fc39" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">5.<strong class="is hu">安装所需的依赖项。</strong></p><p id="9491" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们需要为Truffle HD wallet安装Loom支持，这样我们就可以与它连接。</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="30d0" class="la lb ht kw b fv lc ld l le lf">$ npm install truffle-hdwallet-provider loom-truffle-provider dotenv --save-dev</span></pre><p id="1430" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">6.<strong class="is hu">设置truffle_config.js文件。</strong></p><p id="fea4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们几乎完成了，我们需要做最关键的部分，我们需要设置truffle配置文件，并定义在Loom上部署它所需的所有配置。</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="b1d9" class="la lb ht kw b fv lc ld l le lf">require('dotenv').config();<br/>const LoomTruffleProvider = require('loom-truffle-provider');<br/>const HDWalletProvider = require('truffle-hdwallet-provider');</span><span id="2ad0" class="la lb ht kw b fv lg ld l le lf">module.exports = {<br/>  networks: {<br/>    extdev: {<br/>      provider: function() {<br/>          const privateKey = process.env.PRIVATE_KEY;<br/>          const chainId = 'extdev-plasma-us1';<br/>          const writeUrl = '<a class="ae jo" href="http://extdev-plasma-us1.dappchains.com:80/rpc'" rel="noopener ugc nofollow" target="_blank">http://extdev-plasma-us1.dappchains.com:80/rpc'</a>;<br/>          const readUrl = '<a class="ae jo" href="http://extdev-plasma-us1.dappchains.com:80/query'" rel="noopener ugc nofollow" target="_blank">http://extdev-plasma-us1.dappchains.com:80/query'</a>;;<br/>          return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey)<br/>      },<br/>      network_id: '9545242630824'<br/>    }<br/>  }</span></pre><p id="e419" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里你可以注意到我们使用chainId作为<strong class="is hu"> extdev-plasma-us1 </strong>，因为我们在testnet上部署它，如果你需要在生产上部署它，你可以改变它。</p><p id="8f70" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此外，如果您还记得，我们已经为织机生成了一个私有和公共密钥。我们正在使用它，你可以做一个。env文件并定义PRIVATE_KEY，这样它就可以通过这个。</p><p id="34a2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">瞧吧！！现在我们都设置好了，现在我们可以编译和迁移它了。</p><p id="5315" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在当前目录中打开一个终端。</p><p id="478a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后跑</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="b17c" class="la lb ht kw b fv lc ld l le lf">truffle compile</span><span id="ba39" class="la lb ht kw b fv lg ld l le lf">truffle migrate --network extdev</span></pre><p id="719a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您将在终端上看到类似这样的内容。</p><pre class="jx jy jz ka fq kv kw kx ky aw kz dt"><span id="8b65" class="la lb ht kw b fv lc ld l le lf">Compiling your contracts...<br/>===========================<br/>&gt; Everything is up to date, there is nothing to compile.<br/></span><span id="ed9d" class="la lb ht kw b fv lg ld l le lf">Starting migrations...<br/>======================<br/>&gt; Network name:    'extdev'<br/>&gt; Network id:      9545242630824<br/>&gt; Block gas limit: 0x0<br/></span><span id="58a3" class="la lb ht kw b fv lg ld l le lf">1_initial_migration.js<br/>======================</span><span id="04d1" class="la lb ht kw b fv lg ld l le lf">   Deploying 'Migrations'<br/>   ----------------------<br/>   &gt; transaction hash:    0xbfc8761ec98ee6940773cfb9c04c84dc1069fb20e66e8bf7c5dbc6a3c1198fd7<br/>   &gt; Blocks: 0            Seconds: 0<br/>   &gt; contract address:    0xEeb7A3C57DA6DdBa60F0a053Dbf4Cf1467313487<br/>   &gt; block number:        8084445<br/>   &gt; block timestamp:     1567489492<br/>   &gt; account:             0xEF6E82E8099Db14bB0a7cD426aE18ca0169Ee767<br/>   &gt; balance:             0<br/>   &gt; gas used:            0<br/>   &gt; gas price:           0 gwei<br/>   &gt; value sent:          0 ETH<br/>   &gt; total cost:          0 ETH<br/></span><span id="7ddc" class="la lb ht kw b fv lg ld l le lf">   &gt; Saving migration to chain.<br/>   &gt; Saving artifacts<br/>   -------------------------------------<br/>   &gt; Total cost:                   0 ETH<br/></span><span id="5b41" class="la lb ht kw b fv lg ld l le lf">2_deploy_contracts.js<br/>=====================</span><span id="dfdc" class="la lb ht kw b fv lg ld l le lf">   Deploying 'Counter'<br/>   -------------------<br/>   &gt; transaction hash:    0x0d67c1eee590940e6fe72bcfce494bc562c6d5152630fda27c45b09aaab1bfa8<br/>   &gt; Blocks: 0            Seconds: 0<br/>   &gt; contract address:    0xcB5B46FA01Ce20a69AE972AE6A983205d896be1b<br/>   &gt; block number:        8084452<br/>   &gt; block timestamp:     1567489505<br/>   &gt; account:             0xEF6E82E8099Db14bB0a7cD426aE18ca0169Ee767<br/>   &gt; balance:             0<br/>   &gt; gas used:            0<br/>   &gt; gas price:           0 gwei<br/>   &gt; value sent:          0 ETH<br/>   &gt; total cost:          0 ETH<br/></span><span id="96af" class="la lb ht kw b fv lg ld l le lf">   &gt; Saving migration to chain.<br/>   &gt; Saving artifacts<br/>   -------------------------------------<br/>   &gt; Total cost:                   0 ETH<br/></span><span id="6868" class="la lb ht kw b fv lg ld l le lf">Summary<br/>=======<br/>&gt; Total deployments:   2<br/>&gt; Final cost:          0 ETH</span></pre><p id="ae86" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">恭喜你！！！您已经成功部署了与0 ETH的smart合同，您可以在最终成本中看到这一点。</p><p id="1ce3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在你可以给我发邮件了。</p><p id="3938" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以，这都是我这边的。你可以在下面找到Github的链接，也可以让我知道下面的任何问题或反馈。</p><p id="35e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">谢谢你</p><p id="b946" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">区块链快乐。</p><p id="a523" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/pranshurastogi/Loom-dapp-scratch" rel="noopener ugc nofollow" target="_blank">Github</a>——<a class="ae jo" href="https://www.linkedin.com/in/rastogipranshu/" rel="noopener ugc nofollow" target="_blank">Linkedin</a>——<a class="ae jo" href="https://twitter.com/pranshu3196" rel="noopener ugc nofollow" target="_blank">Twitter</a></p><figure class="jx jy jz ka fq kb fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff lh"><img src="../Images/673b3528e0b341cca62769c9baa632cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bcTJUjFtXf1QtlWzlS04XQ.jpeg"/></div></a></figure><blockquote class="li"><p id="b1e4" class="lj lk ht bd ll lm ln lo lp lq lr jn ek translated"><a class="ae jo" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="lt lu lv lw lx kb fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ls"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>