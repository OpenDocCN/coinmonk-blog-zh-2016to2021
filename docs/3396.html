<html>
<head>
<title>How we Created an Insanely Secure Crypto Wallet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们是如何创造出一个极其安全的加密钱包的</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-we-created-an-insanely-secure-crypto-wallet-617917063a06?source=collection_archive---------2-----------------------#2020-09-22">https://medium.com/coinmonks/how-we-created-an-insanely-secure-crypto-wallet-617917063a06?source=collection_archive---------2-----------------------#2020-09-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/25a947ab5ffe9cb7b2fe6c040df29173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zfdZRnV6_jAohgO5o0G5w.jpeg"/></div></div></figure><p id="a1ee" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在设计软件时，要让一个产品既安全又易用，通常会令人惊讶地困难。然而，这正是我们创建VivoPay时的想法，vivo pay是为<a class="ae ka" href="https://www.harmony.one" rel="noopener ugc nofollow" target="_blank">和谐一号</a>区块链设计的一款新的加密钱包。我们看似矛盾的目标是:</p><ol class=""><li id="14df" class="kb kc ht jd b je jf ji jj jm kd jq ke ju kf jy kg kh ki kj dt translated">让它成为最安全的软件钱包</li><li id="cf36" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">让它像Square Cash或Venmo一样易于使用，即使是首次使用加密的用户也不例外</li><li id="0fef" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">添加对跨链定义的支持(在稍后阶段)</li><li id="4d66" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">通过可在钱包内运行的新型智能合约，为区块链带来隐私和可伸缩性(在稍后阶段)</li></ol><p id="600d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在这篇博文中，我们将讨论我们如何让Vivo变得异常安全。</p><h1 id="89c7" class="kp kq ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">硬件与软件钱包</h1><p id="ad9f" class="pw-post-body-paragraph jb jc ht jd b je ln jg jh ji lo jk jl jm lp jo jp jq lq js jt ju lr jw jx jy hm dt translated">有两种加密钱包:硬件钱包和软件钱包。主要区别在于私钥是在哪里生成和存储的。</p><p id="5112" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">像<a class="ae ka" href="https://www.ledger.com" rel="noopener ugc nofollow" target="_blank"> Ledger </a>和<a class="ae ka" href="https://trezor.io" rel="noopener ugc nofollow" target="_blank"> Trezor </a>这样的硬件钱包通过USB连接到PC或移动设备。<strong class="jd hu">创建</strong>和<strong class="jd hu">在硬件钱包上存储</strong>私钥，私钥从不通过USB传输，并且<strong class="jd hu">从不离开硬件钱包</strong>。相反，交易由硬件钱包签名。PC或移动设备通过USB将交易(的散列)发送到硬件钱包，然后硬件钱包使用私钥对散列进行签名，并将结果发送回PC或移动设备。这是个人最安全的钱包选择。</p><p id="7f9d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">软件钱包和VivoPay一样，是在你的电脑或移动设备上运行的应用程序，或者是在浏览器中运行的应用程序。私钥在PC或移动设备上生成，并存储在磁盘上的一个文件中。文件用用户必须记住的密码加密。这是可行的，但这不是安全储存大量硬币的最佳解决方案。例如，任何拿到钱包文件的人都可能试图暴力破解密码或pincode。例如，使用GPU可以在五天内破解八个字符的密码，使用僵尸网络可以在几分钟内破解。</p><figure class="lt lu lv lw fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ls"><img src="../Images/4997d505d922e7c3364da4e4e1d883f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pGbV5BeKB_bgsB3OtJ-wwg.png"/></div></div></figure><p id="6d8f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们开始设计一个软件钱包，在安全性方面尽可能接近硬件钱包。以下是我们改进的内容:</p><ol class=""><li id="5959" class="kb kc ht jd b je jf ji jj jm kd jq ke ju kf jy kg kh ki kj dt translated">我们没有让人类创建易受攻击的密码，而是使用更安全的椭圆曲线加密技术(参见我们的<a class="ae ka" rel="noopener" href="/@ronaldmannak/vivopay-introduction-to-key-management-80e971459d68">密钥初级读本，了解椭圆曲线如何比密码更安全</a>)。通过删除用户，我们不仅提高了钱包的安全性，还改善了用户体验。</li><li id="1886" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">只有创建钱包的设备才能解密钱包文件。将钱包文件复制到另一台机器应该不起作用。</li><li id="bd57" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">私钥应该只在需要时(签署交易时)才存在于内存中，并在使用后从内存中删除。在所有情况下(例如查看余额)，私钥都不应加载到内存中。</li></ol><p id="76b2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">第三个目标只是一个应用程序架构的问题，将磁盘上的数据分成一个非加密的公钥列表和一个单独的加密钱包文件。</p><p id="2873" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为了实现前两个目标，我们使用了移动设备(Android和Apple都有)和Mac电脑的一个未被充分利用的功能:Secure Enclave。</p><h1 id="6dda" class="kp kq ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">安全飞地</h1><p id="d8a5" class="pw-post-body-paragraph jb jc ht jd b je ln jg jh ji lo jk jl jm lp jo jp jq lq js jt ju lr jw jx jy hm dt translated">Secure Enclave是Android、iPhone、iPad和MAC中的一个芯片，可以保护你的生物统计数据，如FaceID和TouchID。软件开发人员也可以使用Secure Enclave安全地签署和加密数据。安全飞地的关键特征:<strong class="jd hu">在安全飞地上生成的私钥不能离开安全飞地</strong>。如果这个概念听起来和硬件钱包差不多，那是因为确实如此。</p><figure class="lt lu lv lw fq iu fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/5869be6749e46f8e6d39573730a2a79f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*ab8GjbKk-ZLAU6JxxCze9w.jpeg"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">The Apple T2 Secure Enclave chip in Intel Macs.</figcaption></figure><p id="3fa8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">那么，我们可以使用安全飞地来创建一个和谐的私钥吗？不完全是。安全飞地不能为区块链生成私钥(它使用<a class="ae ka" href="https://blog.enuma.io/update/2016/11/01/a-tale-of-two-curves-hardware-signing-for-ethereum.html" rel="noopener ugc nofollow" target="_blank">一条不同的曲线</a>)。此外，由于不可能在Secure Enclave中获得私钥，所以您不能备份该密钥。如果设备丢失或损坏，私钥将永远丢失。</p><p id="cac8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">(我们听说苹果正在与多家湾区加密公司进行谈判。谁知道呢，也许我们会在未来的某个地方看到一个对区块链友好的安全飞地。)</p><p id="b87d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这就是VivoPay使用安全飞地的方式。当用户第一次启动VivoPay时，以下事情会按此顺序发生:</p><ol class=""><li id="3314" class="kb kc ht jd b je jf ji jj jm kd jq ke ju kf jy kg kh ki kj dt translated">VivoPay将在内存中创建一个带有Harmony One私钥的钱包(这是在不使用Secure Enclave的情况下完成的)。</li><li id="480d" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">然后，Secure Enclave创建一个唯一的私钥来加密钱包。</li><li id="14e3" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">加密的钱包保存在磁盘上。</li><li id="9d58" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">钱包将从内存中删除。</li></ol><p id="d28b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">当用户创建一个需要签名的新事务时，会按以下顺序发生以下事情:</p><ol class=""><li id="445d" class="kb kc ht jd b je jf ji jj jm kd jq ke ju kf jy kg kh ki kj dt translated">加密的钱包从磁盘加载，并由Secure Enclave解密。</li><li id="f2f8" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">交易由钱包签名。</li><li id="ea5f" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy kg kh ki kj dt translated">钱包将从内存中删除。</li></ol><p id="afcd" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果加密的钱包文件被复制到不同的设备上，它将不能被加密或使用。需要使用恢复短语来恢复钱包。</p><h1 id="334d" class="kp kq ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">使用Secure Enclave的其他钱包</h1><p id="fa67" class="pw-post-body-paragraph jb jc ht jd b je ln jg jh ji lo jk jl jm lp jo jp jq lq js jt ju lr jw jx jy hm dt translated">据我们所知，还有另外两个使用Secure Enclave的加密钱包:<a class="ae ka" href="https://www.mewwallet.com" rel="noopener ugc nofollow" target="_blank">新钱包</a>和<a class="ae ka" href="https://brd.com" rel="noopener ugc nofollow" target="_blank"> BRD </a>。(如果你知道其他使用Secure Enclave的钱包，请在下面留下评论)</p><p id="31ad" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">三星设备上的新钱包还可以支持三星区块链密钥库，这是一个特殊的安全飞地，<em class="jz">能够生成对区块链友好的密钥对。在iOS上，MEW在两步加密中使用Secure Enclave:FaceID解锁Secure Enclave中的一把钥匙，这把钥匙再解锁另一把钥匙，这把钥匙再解锁钱包。</em></p><h1 id="e8bb" class="kp kq ht bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">接下来去哪里？</h1><ul class=""><li id="adf6" class="kb kc ht jd b je ln ji lo jm mc jq md ju me jy mf kh ki kj dt translated">阅读<a class="ae ka" href="https://medium.com/p/c5f5faa53b70/edit" rel="noopener">我们如何创建一个超级易用的加密钱包</a></li><li id="3bdf" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">阅读<a class="ae ka" rel="noopener ugc nofollow" target="_blank" href="/@ronaldmannak/vivopay-introduction-to-key-management-80e971459d68"> VivoPay密钥管理简介</a></li><li id="6672" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/@ronaldmannak/how-vivopay-leveraged-the-secure-enclave-and-cryptokit-8f0adf865f99">阅读VivoPay如何利用Secure Enclave和CryptoKit的技术细节</a></li><li id="7f45" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">阅读vivo pay<a class="ae ka" rel="noopener ugc nofollow" target="_blank" href="/@ronaldmannak/vivo-pay-a-zero-knowledge-payment-system-727997e4d25f">零知识支付系统</a>的未来</li><li id="f3dc" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">下载<a class="ae ka" href="https://github.com/VivoPay/VivoPayEncryption" rel="noopener ugc nofollow" target="_blank"> VivoPayEncryption演示app </a>(需要iOS 14和Xcode 12)。</li><li id="82e8" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">注册<a class="ae ka" href="https://vivopay.me" rel="noopener ugc nofollow" target="_blank"> VivoPay更新</a></li></ul><p id="ed9e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">感谢校对和反馈:</p><ul class=""><li id="05f3" class="kb kc ht jd b je jf ji jj jm kd jq ke ju kf jy mf kh ki kj dt translated">亚历克斯·科马罗夫</li></ul><h2 id="44aa" class="mg kq ht bd kr mh mi mj kv mk ml mm kz jm mn mo ld jq mp mq lh ju mr ms ll mt dt translated">另外，阅读</h2><ul class=""><li id="02dc" class="kb kc ht jd b je ln ji lo jm mc jq md ju me jy mf kh ki kj dt translated">最好的<a class="ae ka" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="b851" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a></li><li id="ae2d" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">最好的<a class="ae ka" rel="noopener" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b">加密税务软件</a></li><li id="92e4" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/the-best-crypto-trading-platforms-in-2020-the-definitive-guide-updated-c72f8b874555">最佳加密交易平台</a></li><li id="d8fc" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">最佳<a class="ae ka" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密借贷平台</a></li><li id="4f10" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">最佳区块链分析工具</a></li><li id="d432" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南:新手如何赚钱</li><li id="aa54" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">最佳<a class="ae ka" rel="noopener" href="/coinmonks/what-are-the-best-charting-platforms-for-cryptocurrency-trading-85aade584d80">加密制图工具</a></li><li id="15e1" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ledger-vs-trezor-best-hardware-wallet-to-secure-cryptocurrency-22c7a3fd391e">莱杰vs特雷佐</a></li><li id="56fd" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">了解比特币的<a class="ae ka" rel="noopener" href="/coinmonks/what-are-the-best-books-to-learn-bitcoin-409aeb9aff4b">最佳书籍有哪些？</a></li><li id="170f" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/3commas-review-an-excellent-crypto-trading-bot-2020-1313a58bec92">3商业评论</a></li><li id="d145" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/aax-exchange-review-2021-67c5ea09330c"> AAX交易所评论</a> |推荐代码、交易费用、利弊</li><li id="54f9" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2"> Deribit审查</a> |选项、费用、API和Testnet</li><li id="e34b" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX密码交易所评论</a></li><li id="d0c3" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ngrave-zero-review-c465cf8307fc">n零审核</a></li><li id="1310" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/bybit-exchange-review-dbd570019b71"> Bybit交换审查</a></li><li id="8b1e" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">3Commas vs Cryptohopper </li><li id="b18b" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">最好的比特币<a class="ae ka" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></li><li id="e7b1" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">最佳<a class="ae ka" href="https://blog.coincodecap.com/best-monero-wallets" rel="noopener ugc nofollow" target="_blank"> monero钱包</a></li><li id="747f" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" href="https://blog.coincodecap.com/ledger-nano-s-vs-x" rel="noopener ugc nofollow" target="_blank">莱杰纳米s vs x </a></li><li id="ace6" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" href="https://blog.coincodecap.com/bitsgap-3commas-quadency" rel="noopener ugc nofollow" target="_blank">bits gap vs 3 commas vs quad ency</a></li><li id="a274" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" href="https://blog.coincodecap.com/ledger-nano-s-vs-trezor-one-ledger-nano-x-trezor-t" rel="noopener ugc nofollow" target="_blank">莱杰Nano S vs特雷佐one vs特雷佐T vs莱杰Nano X </a></li><li id="44f0" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">block fi vs Celsius</a>vs Hodlnaut</li><li id="52d0" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">Bitsgap评论——一个轻松赚钱的加密交易机器人</li><li id="92c0" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated">为专业人士设计的加密交易机器人</li><li id="22eb" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT审查</a> |杠杆交易、费用和交易</li><li id="62d2" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ellipal-titan-review-85e9071dd029">埃利帕尔泰坦评论</a></li><li id="1a26" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" href="https://blog.coincodecap.com/secux-stone-hardware-wallet-review" rel="noopener ugc nofollow" target="_blank">赛克斯石评论</a></li><li id="31ff" class="kb kc ht jd b je kk ji kl jm km jq kn ju ko jy mf kh ki kj dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/blockfi-review-53096053c097"> BlockFi评论</a> |从您的密码中赚取高达8.6%的利息</li></ul></div></div>    
</body>
</html>