<html>
<head>
<title>Build an insurance application with Hyperledger Composer and React.js Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Hyperledger Composer和React.js构建保险应用程序第2部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/build-an-insurance-application-with-hyperledger-composer-and-react-js-part-2-da27a9dfdee5?source=collection_archive---------0-----------------------#2019-06-25">https://medium.com/coinmonks/build-an-insurance-application-with-hyperledger-composer-and-react-js-part-2-da27a9dfdee5?source=collection_archive---------0-----------------------#2019-06-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="b06f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是教程的第二部分，第一部分可以在这里找到<a class="ae jo" rel="noopener" href="/@jackjulianhickey/build-a-insurance-application-with-hyperledger-composer-and-react-js-part-1-3ebe7ad54986"/>:</p><p id="a64c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">找到</strong> <a class="ae jo" href="https://github.com/jackjulianhickey/Hyperledger-Insurance-Tutorial/tree/master/policyholder_app" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">这里</strong> </a></p><p id="94d0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本节中，我们将通过RESTful API将Hyperledger Fabric网络与web应用程序集成，并在前端使用React.js。<strong class="is hu">本教程中构建的web应用程序只是投保人应用程序。</strong></p><h1 id="1f23" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated"><strong class="ak">实施</strong></h1><p id="d2da" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hm dt translated">请注意，上一教程中的设置是必需的，因此已经创建了资产、投保人、保险公司等。</p><p id="a337" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在insurance_application文件夹中，运行以下命令来<strong class="is hu">创建投保人web应用程序的框架:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="ffd0" class="lb jq ht kx b fv lc ld l le lf">npx create-react-app policyholder_app<br/>cd policyholder_app</span></pre><p id="b3ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">打开src/App.js，删除函数App </strong>返回中的代码，只添加Hello World作为占位符，这样你的App.js文件看起来就像这样:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="94b3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">用以下代码替换src/App.css </strong>中的代码:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="0d62" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">React应用程序的默认端口号是3000，因此需要进行更改，以免与REST API端口冲突。为此，c <strong class="is hu">将package.json的脚本部分更改为以下内容，以使端口3001: </strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="3a87" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们还需要<strong class="is hu">在文件底部添加一个代理</strong>，它将连接到Hyperledger Composer网络，所以只需在右花括号前添加以下代码行:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="91cc" class="lb jq ht kx b fv lc ld l le lf">"proxy": "<a class="ae jo" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a>"</span></pre><p id="3956" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在该文件夹中制作以下<strong class="is hu">新文件夹src/components </strong>和以下<strong class="is hu">新文件Header.js </strong>。这将为我们的应用程序创建一个带有主页链接的简单标题:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="5e2f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在<strong class="is hu">修改App.js </strong>以便它导入:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="876d" class="lb jq ht kx b fv lc ld l le lf">import { BrowserRouter as Router, Route } from 'react-router-dom';<br/>import Header from './components/Header'</span></pre><p id="e002" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它实现<strong class="is hu">组件Header.js </strong>如下:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="176b" class="lb jq ht kx b fv lc ld l le lf">&lt;Router&gt;<br/>      &lt;Header/&gt;<br/>&lt;/Router&gt;</span></pre><p id="6741" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">App.js现在应该是这样的:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="673e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可能需要<strong class="is hu">安装react-router-dom: </strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="6f3e" class="lb jq ht kx b fv lc ld l le lf">npm install --save react-router-dom</span></pre><p id="e766" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此外，稍后您可能还需要<strong class="is hu">安装react-responsive-modal: </strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="e1d8" class="lb jq ht kx b fv lc ld l le lf">npm install react-responsive-modal --save</span></pre><p id="4ff3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在<strong class="is hu">运行应用程序</strong>，通过运行policyholder_app文件夹中的以下内容来测试一切正常</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="1de3" class="lb jq ht kx b fv lc ld l le lf">npm start</span></pre><p id="7c0e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果一切正常，应用程序应该如下所示:</p><figure class="ks kt ku kv fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lj"><img src="../Images/c19077b807952569e66328531c39e00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhyMeLOPdgw4SrZJc-H62Q.png"/></div></div></figure><p id="8c4c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">创建一个函数连接区块链RESTful API </strong>。使用以下代码创建src/Connection.js:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="1ccd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在components文件夹中创建一个类component Homepage.js </strong>。这将在主页上显示所有组件:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="2bec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要导入用户资产并在主页上显示它们，需要另一个类组件。<strong class="is hu">创建一个类组件UsersAssets.js </strong>并包含以下代码:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="4167" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这需要将资产作为props数组传递。<br/>要显示资产，使用map遍历数组，并将项目传递给名为UserAssetsItems.js的类组件</p><p id="673f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">创建单独处理资产的类组件userassetitems . js</strong>。这只是创建了一个带有资产类型和值的卡片。注意，我在这里做了内联样式，但是如果你觉得这样做更舒服的话，你也可以用CSS来做。</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="3dac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">通过在文件顶部添加以下代码行，将用户资产项导入用户资产</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="62c5" class="lb jq ht kx b fv lc ld l le lf">import UserAssetsItems from './UserAssetsItems'</span></pre><p id="40d3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">将用户资产导入主页，并更新主页代码，如下所示</strong>。这只是显示用户的资产并对它们进行样式化。Homepage现在还要求将assets数组作为prop 传递，这样就可以将它传递给UserAssets.js</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="ae9d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在App.js  <strong class="is hu">中返回<strong class="is hu">添加一个状态</strong>以便包含我们的用户名和一个空的资产数组，如下所示:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="a2d0" class="lb jq ht kx b fv lc ld l le lf">state = {<br/>  name: "joe",<br/>  assets: []<br/>}</span></pre><p id="62ab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该名称将被用作硬编码值，因为该网站还没有登录。</p><p id="4752" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">通过在文件顶部添加以下行，将Connection.js导入App.js </strong>。</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="d086" class="lb jq ht kx b fv lc ld l le lf">import Connection from './Connection'</span></pre><p id="6368" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了能够获得用户的资产，需要在我们的区块链网络中创建一个执行此操作的查询。<strong class="is hu">因此，在risk-analysis-tutorial文件夹中，向queries.qry添加以下行将返回用户的资产:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="9da4" class="lb jq ht kx b fv lc ld l le lf">query selectAssetByPolicyholder {<br/>  description: "Select an asset based on the owner"<br/>  statement:<br/>    SELECT org.acme.riskanalysis.PrivateAsset<br/>      WHERE (policyholder == _$policyholder)<br/>}</span></pre><p id="e77d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">现在将package.json更新到版本4，并重新部署您的网络:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="03f5" class="lb jq ht kx b fv lc ld l le lf">composer archive create --sourceType dir --sourceName . -a risk-analysis-tutorial@0.0.4.bna<br/>composer network install --card PeerAdmin@hlfv1 --archiveFile risk-analysis-tutorial@0.0.4.bna<br/>composer network upgrade -c PeerAdmin@hlfv1 -n risk-analysis-tutorial -V 0.0.4</span></pre><p id="09f9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">运行composer rest服务器</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="263e" class="lb jq ht kx b fv lc ld l le lf">composer-rest-server -c admin@risk-analysis-tutorial -n never -u true -w true</span></pre><p id="c972" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在App.js中添加一个函数，从区块链网络中检索用户的资产，如下所示:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="d22b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">通过在文件顶部添加以下行，将主页导入App.js </strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="793c" class="lb jq ht kx b fv lc ld l le lf">import Homepage from './components/Homepage'</span></pre><p id="8e70" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们有了资产，我们可以将它们传递到我们的主页，所以在App.js的路由器中添加下面的行，它将资产作为道具传递。</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="ed5f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">您的完整App.js文件现在应该看起来像这样</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="6a28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果一切正常，您应该会在web应用程序上看到以下内容。注意:此处显示的资产是在本教程的第1部分中创建的资产。</p><figure class="ks kt ku kv fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lq"><img src="../Images/8d5d73575bc21e63feffc18449a3007e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vXYj_7-tUPPirSzEsTbgQ.png"/></div></div></figure><p id="ecb4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了添加新资产，我们需要App.js中的一个函数来实现这一点，因此<strong class="is hu">在App.js中创建函数add asset:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="6c19" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们想要创建用于显示和实现添加新资产的能力的组件。<strong class="is hu">在组件中新建一个组件add asset . js:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="b9e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您会注意到，在上面的代码中，我们还使用了表单的另一个组件，因此我们需要<strong class="is hu">创建AddAssetForm.js: </strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="3a2c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在<strong class="is hu">首页. js导入AddAsset.js: </strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="9711" class="lb jq ht kx b fv lc ld l le lf">import AddAsset from "./AddAsset"</span></pre><p id="5cc2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">现在通过添加以下div、样式和道具在Homepage.js </strong>中实现AddAsset:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="72d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们需要<strong class="is hu">通过更新App.js中的主页路径，将我们的addAsset功能从App.js传递到Homepage.js </strong>如下:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="f159" class="lb jq ht kx b fv lc ld l le lf">&lt;Homepage assets={this.state.assets} addAsset={this.addAsset} /&gt;</span></pre><p id="92d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您现在应该在您的web应用程序中查看以下内容。</p><figure class="ks kt ku kv fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lr"><img src="../Images/48c43d7d4c5208672d82be0120b23eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qk6EMv3fyuKid0neBTCkvQ.png"/></div></div></figure><p id="71b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">通过添加新的资产对其进行测试，单击“提交”后，它应该会出现在您的资产中。这可能需要几秒钟才能完全完成。</p><p id="769f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，我们还可以添加一个显示用户基本信息的配置文件。</p><p id="3e9a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在组件中<strong class="is hu">创建一个名为Profile.js的新文件，并添加以下代码:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="9ee3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在App.js update getAssets中，状态和组件将挂载以表示以下内容，并添加函数getUserProfile: </strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="626e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">将配置文件导入到Homepage.js，并添加以下div、样式和道具</strong>，这样您的Homepage.js现在看起来如下:</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="777b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请记住，我们现在还需要将用户对象从App.js传递到主页，因此<strong class="is hu">将主页路径更新为以下</strong>:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="5b46" class="lb jq ht kx b fv lc ld l le lf">&lt;Homepage assets={this.state.assets} addAsset={this.addAsset} user={this.state.user}/&gt;</span></pre><p id="7b49" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您的web应用程序现在应该是这样的:</p><figure class="ks kt ku kv fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff ls"><img src="../Images/073e74268c76988a23f18705e9c541ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BkoylyU8DxsGxy4VYnBTCA.png"/></div></div></figure><p id="a301" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">投保人网络应用程序的最后两个部分是接受和提供保险以及提出索赔的能力。这两者都依赖于保险公司的申请。但是，我们仍然可以使用Hyperledger Composer Rest Server提供的测试界面来测试这些工作。</p><p id="f386" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让<strong class="is hu">实现创建一个声明，首先添加一个名为NewClaim.js的新组件，并向其中添加以下代码:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="c384" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来<strong class="is hu">创建新的索赔表单。js </strong>将处理用户创建索赔时的表单细节<strong class="is hu"> : </strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="217c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在Homepage.js导入NewClaim.js </strong>时，在代码顶部添加以下一行:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="1818" class="lb jq ht kx b fv lc ld l le lf">import NewClaim from "./NewClaim"</span></pre><p id="1cb3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">将以下样式</strong>添加到Homepage.js的内嵌样式中:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="19fb" class="lb jq ht kx b fv lc ld l le lf">NewClaimStyle: {<br/>        position: 'absolute',<br/>        top: '610px',<br/>        width: '30%',<br/>        height: '34%',<br/>        borderBottom: '1px solid black',<br/>        left: '59%'<br/>      }</span></pre><p id="aeed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">同时<strong class="is hu">增加以下div: </strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="8975" class="lb jq ht kx b fv lc ld l le lf">&lt;div style={style.NewClaimStyle}&gt;<br/>          &lt;NewClaim newClaim={this.props.newClaimFunc} assets=   {this.props.assets} /&gt;<br/>&lt;/div&gt;</span></pre><p id="fc02" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们还需要一个函数来处理新索赔的创建，所以<strong class="is hu">将以下函数添加到App.js中:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="c5da" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在<strong class="is hu">更新首页路线</strong>通过功能如下:</p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="042c" class="lb jq ht kx b fv lc ld l le lf">&lt;Homepage assets={this.state.assets} addAsset={this.addAsset} user={this.state.user} newClaimFunc={this.newClaim} /&gt;</span></pre><p id="5617" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在你的主页应该如下所示</p><figure class="ks kt ku kv fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lt"><img src="../Images/7149f3e51d0839429d1c4e52ffa086f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oXX8RrXpepFSd_Qxn3ur7A.png"/></div></div></figure><p id="0258" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">投保人申请的最后一部分是接受未保险资产的保险提议。这是一个需要实现的大元素。</p><p id="fc9d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们需要创建一个新的查询，返回该投保人的保险报价，因此<strong class="is hu">将以下内容添加到查询中。qry在您的区块链网络代码中:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="d1ed" class="lb jq ht kx b fv lc ld l le lf">query selectInsuranceOffersByPolicyholder {<br/>  description: "Select an insurance offer based on the policyholder"<br/>  statement:<br/>    SELECT org.acme.riskanalysis.InsuranceOffer<br/>      WHERE (policyholder == _$policyholder)<br/>}</span></pre><p id="8a24" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在<strong class="is hu">将package.json更新到版本5，再次启动您的网络:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="8047" class="lb jq ht kx b fv lc ld l le lf">composer archive create --sourceType dir --sourceName . -a risk-analysis-tutorial@0.0.5.bna<br/>composer network install --card PeerAdmin@hlfv1 --archiveFile risk-analysis-tutorial@0.0.5.bna<br/>composer network upgrade -c PeerAdmin@hlfv1 -n risk-analysis-tutorial -V 0.0.5</span></pre><p id="c0c4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">运行composer rest服务器:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="c582" class="lb jq ht kx b fv lc ld l le lf">composer-rest-server -c admin@risk-analysis-tutorial -n never -u true -w true</span></pre><p id="178c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您还没有，<strong class="is hu">从Hyperledger Composer Rest服务器界面创建一项新资产并提供保险。</strong></p><p id="be09" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">在组件:</strong>中创建一个名为ViewInsuranceOffers.js的新组件</p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="e378" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在<strong class="is hu">创建viewinsuraceoffersitems . js:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="91ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">更新UserAssets.js，如下所示:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="2903" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">还要更新UserAssetsItems.js，使其看起来如下:</strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="69da" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">将这些函数添加到App.js: </strong></p><figure class="ks kt ku kv fq lg"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="b917" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">更新App.js中的主页路径，使其看起来像这样:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="47bd" class="lb jq ht kx b fv lc ld l le lf">&lt;Homepage assets={this.state.assets} addAsset={this.addAsset} user={this.state.user} newClaimFunc={this.newClaim} <br/>insuranceOffers={this.state.insuranceOffers} <br/>acceptInsuranceOfferFunc={this.acceptInsuranceOffer}/&gt;</span></pre><p id="4c54" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">将componentWillMount()更新为以下内容:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="b06a" class="lb jq ht kx b fv lc ld l le lf">componentWillMount() {<br/>    this.getAssets()<br/>    this.getUserProfile()<br/>    this.getInsuranceOffers()<br/>  }</span></pre><p id="325d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Homepage.js中的<strong class="is hu"> UserAssets组件必须更新为以下内容:</strong></p><pre class="ks kt ku kv fq kw kx ky kz aw la dt"><span id="ab2a" class="lb jq ht kx b fv lc ld l le lf">&lt;UserAssets assets={this.props.assets}<br/>insuranceOffers={this.props.insuranceOffers} acceptInsuranceOfferFunc={this.props.acceptInsuranceOfferFunc}/&gt;</span></pre><p id="b0eb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，尝试通过在Hyperledger Composer Rest界面中向没有保险的资产提供保险来进行测试，您应该会看到类似于以下内容的内容:</p><figure class="ks kt ku kv fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lt"><img src="../Images/26a7b568262894606631b8b7d96874d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-4HCUnuXPfXCcHEJ8DxkNQ.png"/></div></div></figure><p id="0c49" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于本教程已经相当长了，我将稍后提供保险公司应用程序的代码，但是我鼓励你自己尝试一下，如果你有任何问题，请随时联系我。</p><blockquote class="lu"><p id="e150" class="lv lw ht bd lx ly lz ma mb mc md jn ek translated"><a class="ae jo" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mf mg mh mi mj lg fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff me"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>