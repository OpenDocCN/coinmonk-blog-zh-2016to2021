<html>
<head>
<title>How To Display Voting Results from Blockchain On UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在UI上显示来自区块链的投票结果</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-display-voting-results-from-blockchain-on-ui-6026c4b497cd?source=collection_archive---------2-----------------------#2020-07-08">https://medium.com/coinmonks/how-to-display-voting-results-from-blockchain-on-ui-6026c4b497cd?source=collection_archive---------2-----------------------#2020-07-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="696d" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated"><em class="ji">本文是区块链公司治理系列文章的一部分。</em></h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/da680ba43ad69241927b464bcc852a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vzQ10vwAzmcRcHI7_ue-g.png"/></div></div></figure><p id="2774" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><a class="ae kr" href="https://www.trycrypto.com/blog/how-blockchain-could-change-corporate-governance-for-the-better" rel="noopener ugc nofollow" target="_blank">本系列的第1部分</a>概述了区块链在公司治理中的潜在应用，并介绍了如何按照本系列设置您的项目。<a class="ae kr" href="https://www.trycrypto.com/blog/part-2-voting-smart-contract" rel="noopener ugc nofollow" target="_blank">第2部分</a>概述了股东投票智能合同的整个业务逻辑，包括智能合同开发的最佳实践。</p><p id="0c74" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在第3部分中，我们开始在UI中编织，并学习如何从区块链中读取。在<a class="ae kr" href="https://www.trycrypto.com/guides-and-tutorials/part-4-add-voting-functionality" rel="noopener ugc nofollow" target="_blank">第4部分</a>中，我们为两位候选人添加了投票功能，并学习了如何给区块链写信。</p><p id="716a" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">这一部分将是这个系列的最后一部分。到目前为止，我们只是在开发人员控制台上记录结果。在这个博客中，我们将学习如何在用户界面上显示投票结果。</p><p id="b6cf" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">我们将以表格的形式显示结果，如下所示:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ks"><img src="../Images/b2104e789ec3ad6c2f4fb3c8105995f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*6O3Wk8iBQvjWK3DvTKu_cw.png"/></div></figure><h2 id="1415" class="kt ku ht bd kv kw kx ky kz la lb lc ld ke le lf lg ki lh li lj km lk ll lm ln dt translated">我们将通过三个简单的步骤实现这一目标:</h2><ol class=""><li id="2dbe" class="lo lp ht jx b jy lq kb lr ke ls ki lt km lu kq lv lw lx ly dt translated">创建一个隐藏的“<action-button>”,每次用户投票时都会触发。</action-button></li><li id="1d90" class="lo lp ht jx b jy lz kb ma ke mb ki mc km md kq lv lw lx ly dt translated">创建一个占位符表来显示类似于上面绘制的表的结果。</li><li id="edbf" class="lo lp ht jx b jy lz kb ma ke mb ki mc km md kq lv lw lx ly dt translated">修改“showResults()”函数以在UI上显示表格。</li></ol><h1 id="0cc6" class="me ku ht bd kv mf mg mh kz mi mj mk ld iz ml ja lg jc mm jd lj jf mn jg lm mo dt translated">我们开始吧！</h1></div><div class="ab cl mp mq hb mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hm hn ho hp hq"><h1 id="1f1d" class="me ku ht bd kv mf mw mh kz mi mx mk ld iz my ja lg jc mz jd lj jf na jg lm mo dt translated"><strong class="ak">第一步:创建一个隐藏的`&lt;动作按钮&gt; ` </strong></h1><p id="e803" class="pw-post-body-paragraph jv jw ht jx b jy lq iu ka kb lr ix kd ke nb kg kh ki nc kk kl km nd ko kp kq hm dt translated">这个“T13”将被“隐藏”，以便用户(投票者)在实际投票之前看不到当前的投票结果。</p><p id="e2bc" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在“render()”函数内的“dapp-page.js”中创建此“T14”。此按钮将被包装在一个具有唯一ID的“div”中。这个“div”也应该是“hidden”。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ne nf l"/></div></figure><p id="6684" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在上面的代码片段中，您可以看到“<action-button>”的“hidden”属性被设置为“true”。这个“T16”也有一个唯一的ID“get-candidates”。我们将ID设置为“get-candidates ”,因为这个“T17”本质上是获取与候选人相关的所有数据。这个`<action-button>'最重要的属性是`. click '属性。当单击这个隐藏的`<action-button>'时，调用“getCandidates()”方法。我们将通过操作DOM来点击这个按钮。一旦用户(投票者)投出他们的票，这个按钮将被点击，并且“getCandidates()”方法将被触发。</action-button></action-button></action-button></p><p id="2896" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">让我们在“dapp-page.js”中创建“getCandidates()”方法。该函数应该靠近其他自定义函数，如“showResults()”。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ne nf l"/></div></figure><p id="8537" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">函数“getCandidates()”通过调用智能协定从区块链获取数据。然后，接收的结果以具有唯一ID“候选查找”的表格的形式呈现。该表将在步骤2中创建。</p><h1 id="0842" class="me ku ht bd kv mf mg mh kz mi mj mk ld iz ml ja lg jc mm jd lj jf mn jg lm mo dt translated"><strong class="ak">第二步:创建一个占位符表格</strong></h1><p id="0b73" class="pw-post-body-paragraph jv jw ht jx b jy lq iu ka kb lr ix kd ke nb kg kh ki nc kk kl km nd ko kp kq hm dt translated">我们需要创建一个占位符表，以便动态填充它。你可以把它做成你喜欢的任何样式。我们将使用<a class="ae kr" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank">顺风CSS </a>。</p><p id="ee6a" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">我们将在步骤1中创建的ID为“tally”的“div”中添加这个占位符表。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ne nf l"/></div></figure><p id="7a00" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">现在，我们都准备好显示结果了。要填充的数据已经准备好被加载，占位符也准备好被填充。我们需要做的就是显示ID为“tally”的“div”。我们需要注意在加载“div”之前,“隐藏的”<action-button>被点击。</action-button></p><h1 id="9b17" class="me ku ht bd kv mf mg mh kz mi mj mk ld iz ml ja lg jc mm jd lj jf mn jg lm mo dt translated"><strong class="ak">第三步:修改“showResults()”函数</strong></h1><p id="d4c3" class="pw-post-body-paragraph jv jw ht jx b jy lq iu ka kb lr ix kd ke nb kg kh ki nc kk kl km nd ko kp kq hm dt translated">到目前为止，我们只是在开发人员控制台中记录结果。现在，让我们操作DOM并以表格的形式显示结果。</p><p id="538f" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在“dapp-page.js”的“showResults()”函数中，进行以下更改:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ne nf l"/></div></figure><p id="9007" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">我们通过ID(elid)捕获元素来访问DOM。首先，我们单击“hidden `”<action-button>’来启动“getCandidates()”函数，然后我们从ID为“tally”的“div”中删除“hidden”类，使其在DOM中可见。</action-button></p><h2 id="136c" class="kt ku ht bd kv kw kx ky kz la lb lc ld ke le lf lg ki lh li lj km lk ll lm ln dt translated">这就是全部！</h2><p id="8d26" class="pw-post-body-paragraph jv jw ht jx b jy lq iu ka kb lr ix kd ke nb kg kh ki nc kk kl km nd ko kp kq hm dt translated">您的dapp现在应该可以成功显示当前的投票结果了。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ng"><img src="../Images/163d5cf8e77e79e4541ad2a10caa911b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i-eljAsNX0096Yz4"/></div></div></figure><p id="00b5" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">这是我们想要添加到这个投票dapp的最后一个特性。</p><h2 id="16ea" class="kt ku ht bd kv kw kx ky kz la lb lc ld ke le lf lg ki lh li lj km lk ll lm ln dt translated">如果你一直在关注这个系列，并且一直坚持到现在，那么恭喜你！🎉</h2><p id="f5d0" class="pw-post-body-paragraph jv jw ht jx b jy lq iu ka kb lr ix kd ke nb kg kh ki nc kk kl km nd ko kp kq hm dt translated">我们希望您学会了如何在以太坊区块链上制作端到端全栈投票dapp。我们将在区块链的基础上推出更多有趣的用例系列。</p><h2 id="95d5" class="kt ku ht bd kv kw kx ky kz la lb lc ld ke le lf lg ki lh li lj km lk ll lm ln dt translated">敬请关注。</h2><h2 id="9d3e" class="kt ku ht bd kv kw kx ky kz la lb lc ld ke le lf lg ki lh li lj km lk ll lm ln dt translated">用DappStarter构建。</h2><blockquote class="nh"><p id="c039" class="ni nj ht bd nk nl nm nn no np nq kq ek translated"><a class="ae kr" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ns nt nu nv nw jo fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nr"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>