<html>
<head>
<title>Methods for NFT masked minting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NFT蒙版铸造方法</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/methods-for-nft-masked-minting-ddd05dceed32?source=collection_archive---------1-----------------------#2021-10-29">https://medium.com/coinmonks/methods-for-nft-masked-minting-ddd05dceed32?source=collection_archive---------1-----------------------#2021-10-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="348b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">许多NFT项目的一个非常理想的特点是在铸造过程中有一个惊喜的元素。这复制了购买收藏卡的体验，你购买一包随机分类的卡片。部分乐趣在于随机抽取，因此用户不能提前确定他们的NFT，这一点很重要。在这篇文章中，我概述了几个这样做的方法。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/3dca1749e490284bb25644b2df098c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RJxxJuS16qlzVU9Rwj5Kwg.jpeg"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Photo by <a class="ae ke" href="https://unsplash.com/@moneyphotos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Old Money</a> on <a class="ae ke" href="https://unsplash.com/s/photos/nfts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d1d1" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">ERC-721标准</h1><p id="8e6b" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hm dt translated">对于那些新手来说，有一点关于NFTs的背景知识(如果你熟悉ERC-721，可以跳过这一步)。NFT只是一个遵循标准结构的智能合约。大多数NFT使用ERC-721标准。遵循此标准的合同将具有带有以下属性的令牌<em class="li"> </em>:</p><ul class=""><li id="8c42" class="lj lk ht is b it iu ix iy jb ll jf lm jj ln jn lo lp lq lr dt translated">独一无二的<code class="eh ls lt lu lv b">tokenId</code></li><li id="abb5" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated">所有者的地址</li><li id="3630" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated">答<code class="eh ls lt lu lv b">tokenURI</code></li></ul><p id="3c95" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">除了在极少数情况下，所有其他关于NFT的信息都存储在<code class="eh ls lt lu lv b">tokenURI</code>位置。这可以是http地址，也可以是分散的IPFS地址。比如BAYC #231的<code class="eh ls lt lu lv b">tokenURI</code>是<a class="ae ke" href="https://bafybeihpjhkeuiq3k6nqa3fkgeigeri7iebtrsuyuey5y6vy36n345xmbi.ipfs.dweb.link/231" rel="noopener ugc nofollow" target="_blank">ipfs://qmesjsinhppnmxmspmjwixyn 6 zs 4 e 9 zccarigr 3 jxcawtq/231</a>。如果我们对该地址进行操作，会得到以下结果:</p><pre class="jp jq jr js fq mb lv mc md aw me dt"><span id="8ac3" class="mf kg ht lv b fv mg mh l mi mj">{<br/>  "image":"ipfs://QmbxRyCLRimkb6QRfw2xbv9dywcGn7zKMXtxtrvRQnhao1",<br/>  "attributes":[<br/>    {"trait_type":"Mouth","value":"Rage"},<br/>    {"trait_type":"Hat","value":"Beanie"},<br/>    {"trait_type":"Eyes","value":"X Eyes"},<br/>    {"trait_type":"Clothes","value":"Bone Tee"},<br/>    {"trait_type":"Background","value":"Orange"}, <br/>    {"trait_type":"Fur","value":"Pink"}<br/>]}</span></pre><p id="3a06" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是储存NFT信息的地方。为了进行假面造币，你需要改变<code class="eh ls lt lu lv b">tokenURI</code>，或者改变从<code class="eh ls lt lu lv b">tokenURI</code>返回的信息。</p><h1 id="8144" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">方法1:为每个令牌设置TokenURI</h1><p id="7ad2" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hm dt translated">第一种方法利用了<code class="eh ls lt lu lv b">ERC721URIStorage</code>契约中的<code class="eh ls lt lu lv b">_setTokenURI</code>函数。这允许您更改给定<code class="eh ls lt lu lv b">tokenId</code>的<code class="eh ls lt lu lv b">tokenURI</code>。合同可能是这样的:</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="mk ml l"/></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Note the onlyOwner decorator on setTokenURI. We shouldn’t let non-owners use this method</figcaption></figure><p id="9cbf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这种方法是最显而易见的解决方案，但是像大多数显而易见的解决方案一样，它不是一个非常好的解决方案(尽管我已经看到了多个使用这种方法的项目)。它的效率低得令人难以置信，因为你需要为每个生成的令牌调用这个函数。通过把它变成for循环，你可以得到稍微好一点的气体效率，但是仍然要花费很多ETH。</p><h1 id="5802" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">方法2:设置元数据服务器</h1><p id="1d8f" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hm dt translated">设置服务器，仅在NFT元数据生成后才提供它们。您的服务器将需要监视铸造事件的区块链，并“揭示”该令牌的文件。</p><p id="2b0e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您需要在合同中设置一个<code class="eh ls lt lu lv b">baseURI</code>来指向您的服务器。</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="f990" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后设置一个服务器，监视区块链的更新，并在令牌生成时打开端点。Node.js中有一个例子。</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="mk ml l"/></div></figure><p id="43a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">相反，如果你想一次展示所有的作品，你可以从一个目录提供静态文件(展示前的文件),然后在展示日提供真实的文件。</p><p id="47bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这种方法的好处是不需要任何额外的gas，并且更新令牌元数据非常容易。你所需要做的就是更新你的服务器来管理你的用户所看到的。然而，这种方法也有一些缺点。您将需要无限期地维护元数据服务器，否则项目将停止工作。服务器也代表了一个集中点，这是加密用户所担心的。如果一个项目被它的所有者放弃，并且服务器被关闭，NFT可能变得一文不值，因为它们不再与它们应该代表的艺术品相链接。</p><h1 id="7a17" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">方法3:更新baseURI</h1><p id="c19f" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hm dt translated">允许业主更改合同的<code class="eh ls lt lu lv b">baseURI</code>。由于默认情况下<code class="eh ls lt lu lv b">tokenURI</code>是<code class="eh ls lt lu lv b">_baseURI() + tokenId</code>，更新它将一次更新每个令牌的<code class="eh ls lt lu lv b">tokenURI</code>。</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="mk ml l"/></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Remember to add the onlyOwner decorator</figcaption></figure><p id="c26c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是非常高效的，因为你只需要做一个简单的函数调用来更新你的整个集合的<code class="eh ls lt lu lv b">tokenURI</code>。它还可以防止你被锁定到一个服务器或IPFS地址。您可以从元数据服务器开始，然后更改为使用IPFS。</p><h1 id="c0fb" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">方法四:IPNS</h1><p id="279c" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hm dt translated">使用IPNS地址，您可以在以后更新该地址。IPNS是IPFS的一个命名系统。这允许所有者更新从一个地址返回的文件，同时保持IPFS网络的分散性。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff mm"><img src="../Images/ee752b18bae401c58a443dbf181fc546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Usei0-nkvaKJQPsj8Cq3LQ.jpeg"/></div></div></figure><p id="d795" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果有兴趣，我可以为这种方法做一个教程，但我不会真的推荐这种方法。IPNS是IPFS体系的一大特色，但它仍然存在一些问题。它没有IPFS那样的稳定性，我经常很难向它发表文章。此外，IPNS记录有一个截止日期，因此它们需要长期维护，并且需要开发人员进行更多的私钥管理。</p><h1 id="c351" class="kf kg ht bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论</h1><p id="91a6" class="pw-post-body-paragraph iq ir ht is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hm dt translated">我的一般建议是使用第二种或第三种方法(或者两者的组合)。他们允许更大的灵活性，而没有高昂的天然气费用，因此NFT项目可以提供最令人兴奋的用户体验！</p><blockquote class="mn"><p id="9226" class="mo mp ht bd mq mr ms mt mu mv mw jn ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="bd97" class="mf kg ht bd kh mx my mz kl na nb nc kp jb nd ne kt jf nf ng kx jj nh ni lb nj dt translated">另外，阅读</h2><ul class=""><li id="f044" class="lj lk ht is b it ld ix le jb nk jf nl jj nm jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/passive-income-crypto-lending" rel="noopener ugc nofollow" target="_blank">如何开始通过加密贷款赚取被动收入</a></li><li id="995e" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/bigone-exchange-review-64705d85a1d4"> BigONE交易所点评</a> | <a class="ae ke" href="https://blog.coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">电网交易Bot </a></li><li id="82ae" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/anny-trade-review" rel="noopener ugc nofollow" target="_blank">氹欞侊贸易评论</a> | <a class="ae ke" href="https://blog.coincodecap.com/coinspot-review" rel="noopener ugc nofollow" target="_blank"> CoinSpot评论</a></li><li id="38ec" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">新加坡十大最佳加密交易所</a> | <a class="ae ke" href="https://blog.coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank">购买AXS </a></li><li id="8d99" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳加密软件</a> | <a class="ae ke" href="https://blog.coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank"> WazirX P2P </a></li><li id="4a8c" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/zero-fee-crypto-exchanges" rel="noopener ugc nofollow" target="_blank"> 7个最佳零费用加密交易平台</a></li><li id="5add" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/best-online-casinos" rel="noopener ugc nofollow" target="_blank">最佳网上赌场</a> | <a class="ae ke" rel="noopener" href="/coinmonks/futures-trading-bots-5a282ccee3f5">期货交易机器人</a></li><li id="64b3" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/what-are-decentralized-exchanges" rel="noopener ugc nofollow" target="_blank">分散交易所</a> | <a class="ae ke" href="https://blog.coincodecap.com/bitbns-fip" rel="noopener ugc nofollow" target="_blank">比特FIP </a> | <a class="ae ke" href="https://blog.coincodecap.com/bingbon-review" rel="noopener ugc nofollow" target="_blank">宾邦评论</a></li><li id="aa0d" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/buy-crypto-with-credit-card" rel="noopener ugc nofollow" target="_blank">用信用卡购买密码的10个最佳地点</a></li><li id="966f" class="lj lk ht is b it lw ix lx jb ly jf lz jj ma jn lo lp lq lr dt translated"><a class="ae ke" href="https://blog.coincodecap.com/5-best-crypto-trading-bots-in-canada" rel="noopener ugc nofollow" target="_blank">加拿大最佳加密交易机器人</a> | <a class="ae ke" href="https://blog.coincodecap.com/bybit-binance-moonxbt" rel="noopener ugc nofollow" target="_blank"> Bybit vs币安</a></li></ul></div></div>    
</body>
</html>