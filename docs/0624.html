<html>
<head>
<title>Getting Started with ethereum blockchain development: part-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊区块链开发入门:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/getting-started-with-ethereum-blockchain-development-part-1-d6543b441bea?source=collection_archive---------1-----------------------#2018-05-27">https://medium.com/coinmonks/getting-started-with-ethereum-blockchain-development-part-1-d6543b441bea?source=collection_archive---------1-----------------------#2018-05-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/52d1ede26bb40dc52f65804fb5e53d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jtd-S0OXhmb3u7VK."/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Photo by <a class="ae jf" href="https://unsplash.com/@thoughtcatalog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thought Catalog</a> on <a class="ae jf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b8b8" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">本文假设读者对区块链词汇有基本的了解:</strong></p><ul class=""><li id="4740" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated"><a class="ae jf" href="https://www.coindesk.com/information/what-is-blockchain-technology/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">什么是区块链？</strong> </a></li><li id="4731" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><a class="ae jf" href="https://www.coindesk.com/information/what-is-ethereum/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">以太坊是什么？</strong>T9】</a></li><li id="3c56" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><a class="ae jf" href="https://blockgeeks.com/guides/dapps/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">什么是Dapp？</strong>T13】</a></li><li id="c67f" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><a class="ae jf" href="https://www.coindesk.com/information/how-ethereum-works/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">什么是EVM？</strong> </a></li><li id="fecb" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><a class="ae jf" href="https://www.coindesk.com/information/ethereum-smart-contracts-work/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">什么是智能合约？</strong> </a></li></ul><p id="86e7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在本节中，我将尝试编写基本的智能合同，并将其部署在本地区块链上。</p><p id="b5cc" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">智能合同是用可靠的语言编写的。在编写智能合同之前，让我们为本地开发设置机器。</p><blockquote class="ks"><p id="16f1" class="kt ku ht bd kv kw kx ky kz la lb kd ek translated"><a class="ae jf" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><ol class=""><li id="3bee" class="ke kf ht ji b jj lc jn ld jr le jv lf jz lg kd lh kk kl km dt translated"><strong class="ji hu">节点环境</strong>:此处有<a class="ae jf" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">节点安装程序。您还可以使用brew之类的包管理器来安装节点。</a></li></ol><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="0b0e" class="lr ls ht ln b fv lt lu l lv lw">Install using Brew: <strong class="ln hu"><em class="lx">brew install node@8</em></strong></span></pre><p id="7c7f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">2.<a class="ae jf" href="http://solidity.readthedocs.io/en/v0.4.21/installing-solidity.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu"> Solc编译器</strong> </a>:智能合约由<em class="lx"> Solc编译器编译。</em>安装Solc编译器有<a class="ae jf" href="http://solidity.readthedocs.io/en/v0.4.21/installing-solidity.html" rel="noopener ugc nofollow" target="_blank">种不同的方式</a>。您也可以使用npm来安装它。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="8c9a" class="lr ls ht ln b fv lt lu l lv lw"><strong class="ln hu"><em class="lx">npm install -g solc</em></strong></span></pre><p id="f43a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><a class="ae jf" href="https://geth.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> 3。<strong class="ji hu"> Go以太坊</strong> </a> : <strong class="ji hu"> </strong> Go以太坊简称geth，是运行Go中实现的以太坊节点的命令行接口。你可以从<a class="ae jf" href="https://geth.ethereum.org/downloads/" rel="noopener ugc nofollow" target="_blank">这里</a>安装geth。</p><p id="4995" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">4.<a class="ae jf" href="http://truffleframework.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">松露框架</strong> </a> <strong class="ji hu"> : </strong>松露是以太坊的开发环境和测试框架。你可以用npm安装松露。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="ac35" class="lr ls ht ln b fv lt lu l lv lw"><strong class="ln hu"><em class="lx">npm install -g truffle</em></strong></span></pre><p id="7961" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">5.Ganache所做的很简单，它创建了一个虚拟以太坊区块链，并生成了一些我们将在开发过程中使用的假账户。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="1d48" class="lr ls ht ln b fv lt lu l lv lw"><strong class="ln hu"><em class="lx">npm install -g ganache-cli</em></strong></span></pre><p id="f6f5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">答对了！！</strong>现在，您的本地机器已经为区块链开发做好了准备。</p><p id="df13" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">让我们为您的第一个区块链应用程序创建truffle项目。</p><p id="f447" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以使用truffle命令来初始化项目:<strong class="ji hu"> <em class="lx"> truffle init </em> </strong></p><p id="cd6a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">将创建以下文件和文件夹:</p><ul class=""><li id="7823" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated"><strong class="ji hu">合同:</strong>文件夹，用于保存实有合同</li><li id="e46a" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><strong class="ji hu">迁移:</strong>部署solidity契约的JS脚本</li><li id="77ab" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><strong class="ji hu">测试:</strong>块菌测试用例</li><li id="02d3" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated"><strong class="ji hu"> truffle.js: </strong> Truffle配置文件</li></ul><p id="14e3" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">编写智能合同:</strong></p><ol class=""><li id="fda3" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd lh kk kl km dt translated"><strong class="ji hu">添加truffle配置文件:</strong>将下面的配置添加到truffle.js中，在下面的配置中，我们声明了开发网络，它将连接运行在localhost上的以太坊节点和端口8545。</li></ol><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="568e" class="lr ls ht ln b fv lt lu l lv lw">module.exports = {<br/>  networks: {<br/>    development: {<br/>      host: "127.0.0.1",<br/>      port: 8545,<br/>      network_id: "*" // Match any network id<br/>    }<br/>  }<br/>};</span></pre><p id="7e4f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">2.<strong class="ji hu">创建合同</strong>:让我们在合同文件夹中创建一个简单的合同‘counter . sol’文件。</p><p id="3b95" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">反合同定义了以下内容:</p><p id="c9f4" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我<strong class="ji hu">。事件</strong>:</p><p id="ff4c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">什么是可靠的事件</strong>:事件是智能合约可以启动的调度信号。DApps，或者任何连接到以太坊JSON-RPC API的东西(比如node js应用)，都可以监听这些事件，并做出相应的动作。</p><p id="165b" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">反合同定义了两个事件-</p><ul class=""><li id="6925" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated">反增量事件</li><li id="ec78" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated">反递减事件</li></ul><p id="c45a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">二。<strong class="ji hu">变量</strong>:和其他编程语言一样，变量是保存数据的东西。</p><p id="9125" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">三。<strong class="ji hu">方法</strong>:计数器契约定义了递增、递减和获取计数器值的三种方法。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="e28b" class="lr ls ht ln b fv lt lu l lv lw"><strong class="ln hu">pragma </strong>solidity ^0.4.23;</span><span id="12a8" class="lr ls ht ln b fv ly lu l lv lw"><strong class="ln hu">contract </strong>Counter {<br/>    <br/>    <strong class="ln hu">event </strong>CounterIncrementedEvent(<strong class="ln hu">int </strong>count);<br/>    <strong class="ln hu">event </strong>CounterDecrementedEvent(<strong class="ln hu">int </strong>count);</span><span id="bbc0" class="lr ls ht ln b fv ly lu l lv lw">    <strong class="ln hu">int private </strong>count = 0;</span><span id="6d6f" class="lr ls ht ln b fv ly lu l lv lw">    <strong class="ln hu">function </strong>incrementCounter() <strong class="ln hu">public </strong>{<br/>        count += 1;<br/>        <strong class="ln hu">emit </strong>CounterIncrementedEvent(count);<br/>    }</span><span id="f41d" class="lr ls ht ln b fv ly lu l lv lw">    <strong class="ln hu">function </strong>decrementCounter() <strong class="ln hu">public </strong>{<br/>        count -= 1;<br/>        <strong class="ln hu">emit </strong>CounterDecrementedEvent(count);<br/>    }</span><span id="181f" class="lr ls ht ln b fv ly lu l lv lw">    <strong class="ln hu">function </strong>getCount() <strong class="ln hu">public constant returns </strong>(<strong class="ln hu">int</strong>) {<br/>        <strong class="ln hu">return </strong>count;<br/>    }<br/>}</span></pre><p id="f943" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">3.<strong class="ji hu">部署脚本</strong> —为Counter.sol添加名为“2_initial_migration.js”的部署脚本</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="9bc4" class="lr ls ht ln b fv lt lu l lv lw"><strong class="ln hu">var </strong>Counter = artifacts.require("./Counter.sol");</span><span id="2001" class="lr ls ht ln b fv ly lu l lv lw">module.exports = <strong class="ln hu">function</strong>(deployer) {<br/>  deployer.deploy(Counter);<br/>};</span></pre><p id="a6c7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">4.<strong class="ji hu">编写Truffle测试用例:</strong>在测试文件夹中为计数器契约创建名为counter_test.js的测试文件。</p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="1ffc" class="lr ls ht ln b fv lt lu l lv lw"><strong class="ln hu">const </strong>Counter = artifacts.require("Counter");</span><span id="35a2" class="lr ls ht ln b fv ly lu l lv lw">contract('Counter test', <strong class="ln hu">async </strong>(accounts) =&gt; {<br/>  <strong class="ln hu">let </strong>instance;</span><span id="fc90" class="lr ls ht ln b fv ly lu l lv lw">  before(<strong class="ln hu">async </strong>() =&gt; {<br/>    instance = <strong class="ln hu">await </strong>Counter.deployed();//deploy contract<br/>  });</span><span id="aae9" class="lr ls ht ln b fv ly lu l lv lw">  it("Initial value of counter should be zero", <strong class="ln hu">async </strong>() =&gt; {<br/>    <strong class="ln hu">let </strong>count = <strong class="ln hu">await </strong>instance.getCount.call({from: accounts[0]});<br/>    assert.equal(count, 0);<br/>  });</span><span id="b220" class="lr ls ht ln b fv ly lu l lv lw">});</span></pre><p id="fbbd" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">5.<strong class="ji hu">运行测试用例</strong></p><ul class=""><li id="8436" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated"><strong class="ji hu">运行ganache-cli </strong>:运行以下命令运行ganache</li></ul><p id="47f7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu"> <em class="lx"> Ganache-cli </em> </strong></p><ul class=""><li id="5da0" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated"><strong class="ji hu">运行块菌测试</strong>:在单独的窗口中，使用下面的命令运行块菌测试用例。</li></ul><p id="bf3c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu"> <em class="lx">松露测试</em> </strong></p><p id="e88b" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">耶！！！您已经部署并测试了您的第一个智能合同。</p><p id="940b" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">6.<strong class="ji hu">添加更多测试:</strong></p><p id="4ac7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一、<strong class="ji hu">增加增量计数器测试:</strong></p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="6898" class="lr ls ht ln b fv lt lu l lv lw">it("Should increment counter", <strong class="ln hu">async </strong>() =&gt; {<br/>  <strong class="ln hu">await </strong>instance.incrementCounter({from: accounts[0]});<br/>  <strong class="ln hu">let </strong>count = <strong class="ln hu">await </strong>instance.getCount.call({from: accounts[0]});<br/>  assert.equal(count, 1);<br/>});</span></pre><p id="2d1e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">二。<strong class="ji hu">添加测试以验证增量计数器是否发出事件:</strong></p><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="f4ed" class="lr ls ht ln b fv lt lu l lv lw">it("Should emit event on increment counter", <strong class="ln hu">async </strong>() =&gt; {<br/>  <strong class="ln hu">let </strong>reciept = <strong class="ln hu">await </strong>instance.incrementCounter({from: accounts[0]});<br/>  assert.equal(reciept.logs.length, 1);<br/>  assert.equal(reciept.logs[0].args.count, 2);</span><span id="a7cf" class="lr ls ht ln b fv ly lu l lv lw">});</span></pre><p id="e724" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在您可以尝试为减量计数器添加测试:)</p><p id="30f7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Github上有完整的源代码:<a class="ae jf" href="https://github.com/sarveshgs/firstBlockchainApp" rel="noopener ugc nofollow" target="_blank">sarveshgs/first block chain app</a></p><div class="lz ma fm fo mb mc"><a href="https://github.com/sarveshgs/firstBlockchainApp" rel="noopener  ugc nofollow" target="_blank"><div class="md ab ej"><div class="me ab mf cl cj mg"><h2 class="bd hu fv z el mh eo ep mi er et hs dt translated">sarveshgs/firstBlockchainApp</h2><div class="mj l"><h3 class="bd b fv z el mh eo ep mi er et ek translated">这是一个简单的区块链应用程序，演示了智能合约和松露框架的用法…</h3></div><div class="mk l"><p class="bd b gc z el mh eo ep mi er et ek translated">github.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq iz mc"/></div></div></a></div><p id="5a5e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在这篇博客的第2部分，我将演示如何在node js中编写交互层，以便使用web3与智能合约进行交互。</p><p id="449a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><a class="ae jf" href="http://demystifyblockchain.com/2018/06/28/getting-started-with-ethereum-blockchain-development/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">以太坊区块链开发入门:第二部分</strong> </a></p><div class="lz ma fm fo mb mc"><a rel="noopener follow" target="_blank" href="/coinmonks/getting-started-with-ethereum-blockchain-development-921eb42975e6"><div class="md ab ej"><div class="me ab mf cl cj mg"><h2 class="bd hu fv z el mh eo ep mi er et hs dt translated">以太坊区块链开发入门</h2><div class="mj l"><h3 class="bd b fv z el mh eo ep mi er et ek translated">在第一篇博客《以太坊区块链开发入门:第1部分》中，我演示了如何创建…</h3></div><div class="mk l"><p class="bd b gc z el mh eo ep mi er et ek translated">medium.com</p></div></div><div class="ml l"><div class="mr l mn mo mp ml mq iz mc"/></div></div></a></div><p id="f6e5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">快乐编码:)</p></div></div>    
</body>
</html>