# Tezos Explorer API æœ€ä½³å®žè·µ:#2 åªè¯·æ±‚æ‚¨å®žé™…éœ€è¦çš„ä¸œè¥¿

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/tezos-explorer-api-best-practices-2-request-only-what-you-actually-need-5e265dbaba2b?source=collection_archive---------2----------------------->

![](img/71cf2846073993bcb7a35dc411d098b4.png)

åœ¨[çš„ä¸Šä¸€ç¯‡æ–‡ç« ](https://baking-bad.org/blog/2020/07/29/tezos-explorer-api-tzkt-how-often-to-make-requests/)ä¸­ï¼Œæˆ‘ä»¬åˆ†æžäº†å¦‚ä½•æ ¹æ®å—å’Œå‘¨æœŸä¹‹é—´çš„æ—¶é—´ä¼˜åŒ–å¯¹ Tezos Explorer API çš„è¯·æ±‚é¢‘çŽ‡ï¼Œå¹¶å±•ç¤ºäº†ä½¿ç”¨è¿™ä¸€çŸ¥è¯†çš„æœ€æœ‰æ•ˆæ–¹æ³•ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­å‘æ‚¨å±•ç¤ºå¦‚ä½•æœ€å¤§é™åº¦åœ°åˆ©ç”¨ [TzKTï¼ŒTezos Explorer API](https://api.tzkt.io/) ã€‚å‡ ä¹Žæ¯å¤©éƒ½æœ‰æ–°çš„é¢åŒ…å¸ˆã€é’±åŒ…ã€DAppsã€äº¤æ¢è€…ç”šè‡³å„ç§æŽ¢é™©å®¶å‡ºçŽ°åœ¨ Tezos ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚åœ¨è¿™ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å°è¯•å¸®åŠ©å¼€å‘è€…ä»¥æ›´æœ‰æ•ˆçš„æ–¹å¼ä½¿ç”¨ Tezos Explorer APIï¼Œæˆ‘ä»¬ç›¸ä¿¡è¿™å°†å¸¦æ¥æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

# ç›®å½•

*   âœ… [ä¸è¯·æ±‚ç›¸åŒçš„æ•°æ®ï¼Œç›´åˆ°å®ƒå®žé™…å‘ç”Ÿå˜åŒ–](https://baking-bad.org/blog/2020/07/29/tezos-explorer-api-tzkt-how-often-to-make-requests/#how-often-do-i-need-to-make-api-requests)
*   âœ… [åªè¦æ±‚ä½ å®žé™…éœ€è¦çš„ä¸œè¥¿](https://baking-bad.org/blog/2020/08/10/tezos-explorer-api-tzkt-request-only-what-you-need/#request-only-what-you-actually-need)
*   ðŸ”œè¿‡æ»¤ API ä¸Šçš„æ•°æ®ï¼Œè€Œä¸æ˜¯å®¢æˆ·ç«¯ä¸Šçš„æ•°æ®
*   ðŸ”œå°å¿ƒä½¿ç”¨åˆ†é¡µ

# åªè¯·æ±‚ä½ çœŸæ­£éœ€è¦çš„ä¸œè¥¿

é»˜è®¤æƒ…å†µä¸‹ï¼ŒAPI è¿”å›žåŒ…å«æœ€å¤§æ•°æ®é›†çš„å¯¹è±¡ï¼Œä»¥è¦†ç›–å°½å¯èƒ½å¤šçš„æ¡ˆä¾‹å¹¶æ»¡è¶³å°½å¯èƒ½å¤šçš„ç”¨æˆ·çš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œå¯¹äºŽæ¯ä¸ªç‰¹å®šçš„ç”¨æˆ·å’Œæ¯ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œå¤§éƒ¨åˆ†ç»“æžœæ•°æ®éƒ½æ˜¯å†—ä½™çš„ï¼Œå› ä¸ºå®ƒä»¬æ ¹æœ¬æ²¡æœ‰è¢«ä½¿ç”¨ã€‚è¿™å¯¼è‡´ç½‘ç»œæµé‡çš„ä½Žæ•ˆä½¿ç”¨ï¼Œæœ‰æ—¶è¿˜ä¼šå¯¼è‡´ä½Žæ•ˆçš„å“åº”æ—¶é—´ã€‚

ä¸ºæ­¤ï¼ŒTzKT API æä¾›äº†ä½¿ç”¨æŸ¥è¯¢å‚æ•°`?select=`å’Œ`?select.values=`åªè¯·æ±‚æ‰€éœ€æ•°æ®çš„èƒ½åŠ›ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›èŽ·å¾—å¿«ç…§çº§åˆ«ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [/cycles](https://api.tzkt.io/v1/cycles) ç«¯ç‚¹è½»æ¾åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚è™½ç„¶ï¼Œè¿™ä¸ªç«¯ç‚¹è¿”å›žä¸€ä¸ªå……æ»¡æœ‰ç”¨æ•°æ®çš„å¯¹è±¡æ•°ç»„:

```
[{
    "index": 7,
    "snapshotIndex": 9,
    "snapshotLevel": 2560,
    "randomSeed": "1bcd1d832aff2d72a8d16a9f9e5f994e177e29eac789138b019f0c4a30c4e5ec",
    "totalBakers": 52,
    "totalRolls": 19077,
    "totalStaking": 190989137117557,
    "totalDelegators": 312,
    "totalDelegated": 187846516221396
},{
    "index": 8,
    "snapshotIndex": 14,
    "snapshotLevel": 7936,
    "randomSeed": "4a38061cdab9818e0aa6e05e57fc65b5e80abc53618e82b9ab9a12bbf739c764",
    "totalBakers": 168,
    "totalRolls": 22422,
    "totalStaking": 224673132682556,
    "totalDelegators": 1169,
    "totalDelegated": 215276722522456
}]
```

ç„¶è€Œï¼Œæˆ‘ä»¬åªéœ€è¦`snapshotLevel`ã€‚å› æ­¤ï¼Œé€šè¿‡å°†æŸ¥è¯¢å‚æ•°`?select=snapshotLevel`é™„åŠ åˆ°æˆ‘ä»¬çš„è¯·æ±‚ [/cyclesï¼Ÿselect=snapshotLevel](https://api.tzkt.io/v1/cycles?select=snapshotLevel) æˆ‘ä»¬å°†å¾—åˆ°æˆ‘ä»¬å®žé™…éœ€è¦çš„ä¸œè¥¿:

```
[2560, 7936, 9728, 15872, 20480, 24576, ...]
```

è¿™æ ·å¥½å¤šäº†ï¼Œä¸æ˜¯å—ï¼Ÿæˆ‘ä»¬åªæ”¶åˆ°äº†æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ã€‚

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨`?select=`æŸ¥è¯¢å‚æ•°æœ‰åŠ©äºŽå‡å°‘ä¼ è¾“çš„æ•°æ®é‡å’Œå“åº”æ—¶é—´ï¼Œå› ä¸ºåœ¨è¯·æ±‚æ•°æ®åº“æ—¶`JOIN`æ“ä½œçš„æ•°é‡è¾ƒå°‘ã€‚

ä¸‹é¢æ˜¯æ•°æ®é€‰æ‹©å¦‚ä½•å½±å“æ€§èƒ½çš„å¦ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­:

![](img/01d2b20bbdde7a7fd4e2102fa1bd4dc3.png)

æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œé€šè¿‡ä½¿ç”¨`?select=`æŸ¥è¯¢å‚æ•°ï¼Œæ‚¨å¯ä»¥èŽ·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

# é€‰æ‹©ä¸Žé€‰æ‹©å€¼

æ­£å¦‚æˆ‘ä»¬ä¸Šé¢å·²ç»æåˆ°çš„ï¼ŒTzKT API å…è®¸ä»¥ä¸¤ç§æ–¹å¼è¿›è¡Œæ•°æ®é€‰æ‹©:`select`å’Œ`select.values`ã€‚çŽ°åœ¨è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°å…³æ³¨å®ƒä»¬ã€‚

åœ¨è¿™ä¸¤ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŒ‡å®šä¸€ä¸ªé€—å·åˆ†éš”çš„å­—æ®µåˆ—è¡¨æ¥åŒ…å«åœ¨å“åº”ä¸­ã€‚åœ¨`select`æ¨¡å¼ä¸‹ï¼Œå“åº”å°†è¢«è¡¨ç¤ºä¸ºå¸¸è§„ JSON å¯¹è±¡çš„åˆ—è¡¨ã€‚

> ***ä¾‹é¢˜***
> 
> `*?select=address,balance*`*=>*

åœ¨`select.values`æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œå“åº”å°†æ˜¯å€¼æ•°ç»„çš„æ•°ç»„ã€‚

> ***ä¾‹é¢˜***
> 
> `*?select.values=address,balance*` *= >* `*[ [ "tz1abcd", 1000 ] ]*`

ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™ä¸¤ç§æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«ï¼Œè®©æˆ‘ä»¬å†çœ‹å‡ ä¸ªä¾‹å­

![](img/b3e13087a6c739c3d32a9c1627234709.png)

å¦‚ä½ æ‰€è§ï¼Œæ•°æ®ä¸­æœ‰å·¨å¤§çš„å·®å¼‚ã€‚æ˜¾ç„¶ï¼Œæœ‰æ—¶è¿™ç§å·®å¼‚å¹¶ä¸æ˜¾è‘—:

![](img/32d34eaefd56c749320f63bb810aaf49.png)

è¿™ä¸»è¦å–å†³äºŽå­—æ®µåçš„é•¿åº¦å’Œå­—æ®µä¸­åŒ…å«çš„æ•°æ®é‡ï¼Œå› æ­¤åœ¨æ¯ç§ç‰¹å®šæƒ…å†µä¸‹ï¼Œæœ€å¥½ä¼°è®¡æ•°æ®é‡ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šåœ¨æ˜“ç”¨æ€§å’Œå“åº”æ—¶é—´ä¹‹é—´åšå‡ºé€‰æ‹©ã€‚

> **æ³¨*æ³¨*æ³¨**
> 
> *å¦‚æžœé€‰æ‹©å•å­—æ®µï¼Œåœ¨* `*.fields*` *å’Œ* `*.values*` *ä¸¤ç§æ¨¡å¼ä¸‹ï¼Œå“åº”éƒ½å°†æ˜¯ä¸€ä¸ªå€¼æ•°ç»„ã€‚*

# ç»“è®º

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨`?select`å’Œ`?select.values`å‚æ•°æ¥æ˜¾è‘—å‡å°‘ç½‘ç»œæµé‡å¹¶æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚å¦‚æžœæ‚¨åœ¨ Tezos API ä¸­é—æ¼äº†ä»€ä¹ˆï¼Œè¯·[è”ç³»æˆ‘ä»¬](https://baking-bad.org/docs/#contacts)ï¼Œæˆ‘ä»¬å°†å°½æœ€å¤§åŠªåŠ›å¸®åŠ©æ‚¨ï¼

# ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯â€œTezos Explorer API æœ€ä½³å®žè·µâ€ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®º API è¯·æ±‚ä¸­çš„æ•°æ®è¿‡æ»¤ã€‚

å¹²æ¯ï¼

*åŽŸè½½äºŽ 2020 å¹´ 8 æœˆ 10 æ—¥*[*ã€https://baking-bad.orgã€‘*](https://baking-bad.org/blog/2020/08/10/tezos-explorer-api-tzkt-request-only-what-you-need/)*ã€‚*

> [ç›´æŽ¥åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com?utm_source=coinmonks)

[![](img/160ce73bd06d46c2250251e7d5969f9d.png)](https://coincodecap.com?utm_source=coinmonks)