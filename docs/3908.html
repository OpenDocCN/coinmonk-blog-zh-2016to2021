<html>
<head>
<title>Ansible The Best Tool For Blockchain Developers To Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ansible区块链开发者部署的最佳工具</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ansible-the-best-tool-for-blockchain-developers-to-deploy-dba9d2b9eb58?source=collection_archive---------3-----------------------#2021-01-16">https://medium.com/coinmonks/ansible-the-best-tool-for-blockchain-developers-to-deploy-dba9d2b9eb58?source=collection_archive---------3-----------------------#2021-01-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="33eb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">作为一名区块链开发人员，我的大部分工作是为初创公司做MVP，为学术研究做POC，或者为政府机构做内部系统。有人让我做真人制作网络，我就觉得有点紧张。如何处理部署？如何使其具有可扩展性？我应该创建多少个节点？处理区块链网络需要许多配置、文件和命令——这就是为什么我要介绍一个很棒的工具来管理您的区块链DevOps周期。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/85a92ec9b5fdb8b2920067e028499244.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*_IL20CzJ-TCrbSlwJXJTgQ.jpeg"/></div></figure><h1 id="4394" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated">什么是Ansible？</h1><p id="7db7" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">Ansible是一个开源管理工具，用于使用<code class="eh kz la lb lc b">playbook</code>自动执行任务。playbook是一个. yaml文件，即使您不知道YAML文件的语法，您也可以用一种简单的方式将代码编写为块。例子</p><pre class="jp jq jr js fq ld lc le lf aw lg dt"><span id="244d" class="lh jx ht lc b fv li lj l lk ll">---<br/>- name: Automate some tasks<br/>  hosts: centos  <br/>  become: yes<br/>  tasks:<br/>    - name: Create A New Directory<br/>      file:        <br/>        path: /opt/newDirectory         <br/>        state: directory        <br/>        owner: root        <br/>        mode: "777"        <br/>        recurse: yes<br/>    - name: Copy File    <br/>      copy:        <br/>        src: ./run.py     <br/>        dest: /opt/newDirectory/run.py       <br/>        mode: a+x</span></pre><p id="af74" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就是这样！我不认为我需要解释它很容易阅读。您可以在任何正在运行的实例上部署此代码。我将它用于amazon ec2实例。此外，Ansible有角色。角色是一组任务，用于完成诸如在部署的实例上安装Java、配置一些指导节点(如Prometheus或Grafana)之类的任务。您可以在这里找到要使用的角色列表<a class="ae lm" href="https://galaxy.ansible.com/home" rel="noopener ugc nofollow" target="_blank">。Ansible可以用于您的区块链的CI/CD，因为我们没有太多用于区块链的工具。如果自动执行智能合约迁移/部署任务，您可以节省这样的时间。对于修改区块链网络也是如此，比如添加新的对等点、新的节点等等</a></p><h1 id="25ba" class="jw jx ht bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dt translated">可与区块链兼容</h1><p id="01b8" class="pw-post-body-paragraph iq ir ht is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hm dt translated">我第一次发现Ansible是用IBM区块链平台。我不得不使用Ansible playbook进行内部部署。通常，要部署IBM区块链平台，您需要创建12个YAMLs文件并修改它们。你可以在这里找到详细的手动安装<a class="ae lm" href="https://cloud.ibm.com/docs/blockchain-sw-25?topic=blockchain-sw-25-deploy-ocp" rel="noopener ugc nofollow" target="_blank">。然后，你定制你的区块链可能比开始使用IBM平台GUI构建你的网络要花一个多小时，这对我来说是一个枯燥的任务，要不停地点击和保存凭据。如果您不熟悉，在hyperledger fabric中设置默认网络(一个对等点、一个渠道、一个订单、一个组织)可能需要一个多小时。这里</a>可以找到详细步骤<a class="ae lm" href="https://cloud.ibm.com/docs/blockchain?topic=blockchain-ibp-console-build-network" rel="noopener ugc nofollow" target="_blank">。另一方面，ansible只用一行命令行安装IBM平台。使用<code class="eh kz la lb lc b">playbook.yaml</code>(在这里</a>找到Openshift和Kubernetes的剧本文件<a class="ae lm" href="https://ibm-blockchain.github.io/ansible-collection/tutorials/installing.html#installing-the-ibm-blockchain-platform" rel="noopener ugc nofollow" target="_blank">。)</a></p><pre class="jp jq jr js fq ld lc le lf aw lg dt"><span id="cb3d" class="lh jx ht lc b fv li lj l lk ll"><strong class="lc hu">---</strong><br/>- <strong class="lc hu">name</strong>: Deploy IBM Blockchain Platform custom resource definitions<br/>  <strong class="lc hu">hosts</strong>: localhost<br/>  <strong class="lc hu">vars</strong>:<br/>    <strong class="lc hu">state</strong>: present<br/>    <strong class="lc hu">target</strong>: k8s<br/>    <strong class="lc hu">arch</strong>: amd64<br/>    <strong class="lc hu">namespace</strong>: ibpinfra<br/>    <strong class="lc hu">image_registry_password</strong>: &lt;image_registry_password&gt;<br/>    <strong class="lc hu">image_registry_email</strong>: &lt;image_registry_email&gt;<br/>    <strong class="lc hu">wait_timeout</strong>: 3600<br/>  <strong class="lc hu">roles</strong>:<br/>    - ibm.blockchain_platform.crds<br/><br/>- <strong class="lc hu">name</strong>: Deploy IBM Blockchain Platform console<br/>  <strong class="lc hu">hosts</strong>: localhost<br/>  <strong class="lc hu">vars</strong>:<br/>    <strong class="lc hu">state</strong>: present<br/>    <strong class="lc hu">target</strong>: k8s<br/>    <strong class="lc hu">arch</strong>: amd64<br/>    <strong class="lc hu">namespace</strong>: &lt;namespace&gt;<br/>    <strong class="lc hu">image_registry_password</strong>: &lt;image_registry_password&gt;<br/>    <strong class="lc hu">image_registry_email</strong>: &lt;image_registry_email&gt;<br/>    <strong class="lc hu">console_domain</strong>: &lt;console_domain&gt;<br/>    <strong class="lc hu">console_email</strong>: &lt;console_email&gt;<br/>    <strong class="lc hu">console_default_password</strong>: &lt;console_default_password&gt;<br/>    <strong class="lc hu">wait_timeout</strong>: 3600<br/>  <strong class="lc hu">roles</strong>:<br/>    - ibm.blockchain_platform.console</span></pre><p id="afb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于Hyperledger结构网络也是如此，您可以使用行动手册创建订购服务</p><pre class="jp jq jr js fq ld lc le lf aw lg dt"><span id="88ad" class="lh jx ht lc b fv li lj l lk ll">---</span><span id="7e97" class="lh jx ht lc b fv ln lj l lk ll">- name: Create components for an ordering organization</span><span id="e690" class="lh jx ht lc b fv ln lj l lk ll">hosts: localhost</span><span id="b43d" class="lh jx ht lc b fv ln lj l lk ll">vars:</span><span id="c7fe" class="lh jx ht lc b fv ln lj l lk ll">state: present</span><span id="9057" class="lh jx ht lc b fv ln lj l lk ll">organization_name: "{{ ordering_org_name }}"</span><span id="12d7" class="lh jx ht lc b fv ln lj l lk ll">organization_msp_id: "{{ ordering_service_msp }}"</span><span id="9887" class="lh jx ht lc b fv ln lj l lk ll">vars_files:</span><span id="5688" class="lh jx ht lc b fv ln lj l lk ll">- common-vars.yml</span><span id="5348" class="lh jx ht lc b fv ln lj l lk ll">- ordering-org-vars.yml</span><span id="c4e4" class="lh jx ht lc b fv ln lj l lk ll">roles:</span><span id="1d4a" class="lh jx ht lc b fv ln lj l lk ll">- ibm.blockchain_platform.ordering_organization</span></pre><p id="f249" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在此找到所有hyperledger fabric组件自动化<a class="ae lm" href="https://github.com/IBM-Blockchain/ansible-collection/tree/master/tutorial" rel="noopener ugc nofollow" target="_blank">。这些脚本可以在IBM区块链平台中实现。您可以根据需要修改剧本，并保留您的自动化任务，以便在未来的项目中节省时间。在使用hyperledger fabric之前，我有一个使用hyperledger besu的项目。使用IBFT2进行生产部署是如此复杂，我不知道ansible than。我写了一篇关于IBFT2生产部署的</a><a class="ae lm" rel="noopener" href="/coinmonks/setting-up-hyperledger-besu-on-amazon-web-services-using-ibft2-fa8d5f3a1aa3">文章</a>。幸运的是，Hyperledger besu有一个简单的方法来使用ansible进行生产部署。Hyperledger besu是我最喜欢的区块链之一，因为他们使用权威共识算法的证明。用于生产的区块链网络需要两个启动节点和其他六个节点进行验证。详情可以从官方<a class="ae lm" href="https://besu.hyperledger.org/en/stable/Tutorials/Private-Network/Create-IBFT-Network/" rel="noopener ugc nofollow" target="_blank">文档</a>中阅读。所有的任务都可以使用Ansible自动完成。</p><p id="6a7b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要了解Ansible的更多信息，我推荐这些教程:</p><ul class=""><li id="8baf" class="lo lp ht is b it iu ix iy jb lq jf lr jj ls jn lt lu lv lw dt translated">黑客服务器<a class="ae lm" href="https://serversforhackers.com/c/an-ansible2-tutorial" rel="noopener ugc nofollow" target="_blank">教程</a></li><li id="d631" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">Ansible <a class="ae lm" href="https://github.com/RedHatNordicsSA/ansible-roadshow" rel="noopener ugc nofollow" target="_blank">路演</a></li><li id="c5ea" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">负责官员<a class="ae lm" href="https://github.com/RedHatNordicsSA/ansible-roadshow" rel="noopener ugc nofollow" target="_blank">文件</a></li><li id="4003" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">然后可以查看一些真实使用的场景<a class="ae lm" href="https://docs.ansible.com/ansible/latest/scenario_guides/guides.html" rel="noopener ugc nofollow" target="_blank">案例</a>。</li></ul><p id="b595" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Ansible不是一个主要为区块链设计的工具。它用于自动化。总的来说，我们可以使用它来自动化我们工作中的任何复杂任务，而不是将它作为一个角色来共享，以使我们的生活更加轻松。</p><blockquote class="mc"><p id="07d2" class="md me ht bd mf mg mh mi mj mk ml jn ek translated">加入Coinmonks <a class="ae lm" href="https://t.me/joinchat/EPmjKpNYwRMsBI4p" rel="noopener ugc nofollow" target="_blank"> Telegram group </a>学习加密交易和投资</p></blockquote><h2 id="bd97" class="lh jx ht bd jy mm mn mo kc mp mq mr kg jb ms mt kk jf mu mv ko jj mw mx ks my dt translated">另外，阅读</h2><ul class=""><li id="6ed0" class="lo lp ht is b it ku ix kv jb mz jf na jj nb jn lt lu lv lw dt translated"><a class="ae lm" href="http://blog.coincodecap.com/go/learn" rel="noopener ugc nofollow" target="_blank">学习以太坊和Web3开发</a></li><li id="259b" class="lo lp ht is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw dt translated">最好的<a class="ae lm" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li></ul></div></div>    
</body>
</html>