<html>
<head>
<title>Steps to deploy a contract using MetaMask and Truffle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用元掩码和Truffle部署契约的步骤</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/steps-to-deploy-a-contract-using-metamask-and-truffle-7ae65e6d8dc8?source=collection_archive---------1-----------------------#2018-03-22">https://medium.com/coinmonks/steps-to-deploy-a-contract-using-metamask-and-truffle-7ae65e6d8dc8?source=collection_archive---------1-----------------------#2018-03-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="2726" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">使用MetaMask &amp; Truffle在Ropsten网络上部署智能合约。两种解决方案，一种是运行你自己的<strong class="is hu"> <em class="jo"> geth </em> </strong>节点，它会消耗你机器的大量cpu。在我的MacBook Pro中，运行geth节点15分钟将耗尽整个电池，另一个解决方案是连接像in fura(【https://infura.io/】T4)这样的公共节点</p><p id="593d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">解决方案1:使用您自己的节点</strong></p><p id="7dc8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您拥有一个在您的机器上运行的完整节点，您可以很容易地在ropsten网络上部署。</p><p id="0a77" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一.跑步</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="2509" class="jz ka ht jv b fv kb kc l kd ke">$ geth --fast --cache=1048 --testnet --unlock "0xmyaddress" --rpc --rpcapi "eth,net,web3" --rpccorsdomain '*' --rpcaddr localhost --rpcport 8545</span></pre><p id="b6fc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">二。在truffle.js中，为ropsten网络添加以下配置</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="86db" class="jz ka ht jv b fv kb kc l kd ke">module.exports = {<br/>  networks: {<br/>    localhost: {<br/>      host: "localhost", <br/>      port: 8545,<br/>      network_id: "*" <br/>    },  <br/>    ropsten: {<br/>      host: "localhost",<br/>      port: 8545,<br/>      <!-- -->gas: 4700000,<br/>      gasPrice: 1000000000,<br/>      network_id: "3"<br/>    }<br/>  }<br/>};</span></pre><p id="4059" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">三。在ropsten网络上部署</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="1f99" class="jz ka ht jv b fv kb kc l kd ke">$ truffle migrate --network ropsten</span></pre></div><div class="ab cl kf kg hb kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hm hn ho hp hq"><p id="495c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">解决方案2:使用像Infura这样的公共节点</strong></p><p id="a2e2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">I .安装所需的库</p><p id="8070" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">导航到项目文件夹并运行以下命令:</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="d52d" class="jz ka ht jv b fv kb kc l kd ke">npm install truffle-hdwallet-provider --save</span></pre><p id="f552" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">二。在<em class="jo"> truffle.js </em>中，添加以下代码以解锁您的元掩码帐户，并通过提供助记短语(元掩码/设置/显示种子词)将Infura Ropsten节点配置为入口点</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="a7cd" class="jz ka ht jv b fv kb kc l kd ke">var HDWalletProvider = require("truffle-hdwallet-provider");</span><span id="42b1" class="jz ka ht jv b fv km kc l kd ke">var infura_apikey = "XXXXXX";<br/>var mnemonic = "twelve words you can find in metamask/settings/reveal seed words";</span><span id="bc71" class="jz ka ht jv b fv km kc l kd ke">module.exports = {<br/>  networks: {<br/>    development: {<br/>      host: "localhost",<br/>      port: 8545,<br/>      network_id: "*" // Match any network id<br/>    },<br/>    ropsten: {<br/>      provider: new HDWalletProvider(mnemonic, "https://ropsten.infura.io/"+infura_apikey),<br/>      network_id: 3<br/>    }<br/>  }<br/>};</span></pre><p id="6e0e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">三。在ropsten网络上部署</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="6349" class="jz ka ht jv b fv kb kc l kd ke">$ truffle migrate --network ropsten</span></pre><blockquote class="kn"><p id="ed34" class="ko kp ht bd kq kr ks kt ku kv kw jn ek translated">加入Coinmonks <a class="ae jp" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jp" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae jp" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="jz ka ht bd kx ky kz la lb lc ld le lf jb lg lh li jf lj lk ll jj lm ln lo lp dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="lq lr ht is b it ls ix lt jb lu jf lv jj lw jn lx ly lz ma dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae jp" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="lq lr ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated"><a class="ae jp" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae jp" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="lq lr ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated"><a class="ae jp" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae jp" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="lq lr ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae jp" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="lq lr ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="b359" class="lq lr ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated">最佳<a class="ae jp" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="lq lr ht is b it mb ix mc jb md jf me jj mf jn lx ly lz ma dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>