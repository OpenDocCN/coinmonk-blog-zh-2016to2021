# 比特币订阅支付

> 原文：<https://medium.com/coinmonks/bitcoin-subscription-payments-c41532913f48?source=collection_archive---------0----------------------->

## 比特币如何实现循环支付

![](img/0d01bf4938ce4c7cca7d27ba3f02d747.png)

Pay for your Netflix in Bitcoin?

大多数人应该熟悉传统的经常性/订阅支付。像网飞和你的电力公司这样的公司会按月向你收取服务费。这笔钱会自动从你的信用卡或银行账户中扣除。这项服务不需要你支付任何费用，尽管卖家会为信用卡支付支付高达约 3%的交易费。人们喜欢订阅付费，因为它很方便。卖家喜欢它们，因为它消除了收集问题，人们经常忘记退订。事实上，一些公司可能会通过隐藏取消过程或在你注册时没有阅读的合同中让订户很难取消。

由于这些原因，订阅费很受欢迎。然而，用比特币实现并非一帆风顺，因为有几个技术障碍。首先是比特币是推送技术。支出总是由买方发起的。传统的信用卡和银行订阅使用拉技术工作。收费是由卖家代表个人发起的，有时甚至没有得到他们的实际许可。

其次，比特币没有授权未知金额交易的机制。你可以让电力公司每个月从你的账户中扣款，即使你们都不知道金额。承诺一笔金额未知的交易是信用卡和银行可以做到的，但不能在比特币协议中直接复制。对于比特币，交易金额总是必须在交易时指定。

因此，卖家发起的可变金额订阅在比特币协议中是不直接可行的。但是，由买方发起的固定金额认购付款。在这篇文章中，我探索了使用比特币实现定期订阅支付的各种方法。

## 手动订购付款

第一种支付定期订阅费的方式是完全手动支付。虽然不性感，但这可能是今天必须重复支付的方式，理解这个案例有助于为任何改进设定基线。

以下是实现手动比特币订阅的步骤:

1.  卖家提供以比特币计价的每月订阅的产品或服务。
2.  当买家注册时，卖家向买家提供比特币地址来汇款
3.  买家记得在正确的时间付款
4.  卖方确保在正确的时间收到付款
5.  如果没有收到付款，卖方需要跟进，以确定买方是否忘记或打算取消。

这个过程显然对买卖双方都不方便。两者都必须在重复发生的基础上工作，这增加了事务的摩擦和出错的可能性。此外，当由于买方的意图不明确而未收到付款时，它会产生歧义。卖家必须跟进。

简而言之，与现有的信用卡/银行实现相比，这个版本的比特币订阅在几乎所有方面都很糟糕。谢天谢地，只要自动化一点点，我们就能做得更好。

## 自动化比特币支付

明显的改进是在上面的工作流程中增加了一些自动化。我们可以实现买卖双方流程的自动化，让比特币订阅变得更加一劳永逸。

以下是比特币自动认购流程的步骤:

1.  卖家提供以比特币计价的每月订阅的产品或服务。
2.  当买家注册时，卖家向买家提供比特币地址来发送资金。
3.  买家的热钱包有能力发送重复付款。买方设置支付给卖方，他们将自动发生，直到取消或直到资金耗尽。
4.  卖家有监控新交易的软件。这种软件会提醒卖家付款缺失。
5.  如果没有收到付款，卖家仍然需要跟进，以确定买家是否忘记(或他们的钱包离线)或他们打算取消。

步骤 1、2 和 5 与手动示例相同。步骤 3 和 4 是自动化发生的地方。改进之处在于，只要买家希望继续付款，并且钱包里有足够的资金，解决方案在很大程度上就是一劳永逸的。因此，与手动情况相比，这显然是一个改进。

比特币基地是一个具有重复交易功能的钱包，可能还有其他钱包。这种解决方案的主要缺点是，它需要一个有比特币余额的热钱包。这是一个安全风险。此外，该解决方案确实需要一些维护，因为最终购买者的钱包将需要被订阅耗尽。

最后，这种解决方案不能消除遗漏付款时的模糊性。仍然需要沟通来确定买方是否打算取消或只是支付错误。尽管有这些缺点，您可以想象这是一个实际可用的解决方案。

## 比特币订阅时间锁托管(STiLE)合同

实现比特币订阅的第三种方式是使用时间锁定输出。为了实现这一点，买方和卖方之间的订阅需要固定期限，并在一份特殊的比特币合同中预付资金，我称之为 STiLE。这种解决方案的局限性在于，订阅不能是开放式的，也不能像信用卡订阅那样按需付费。STiLE 合同必须预付资金，分期付款给卖方，但允许买方随时取消和赎回所有未支付的款项。

例如，买方将同意按月支付一年的订阅费。每一笔约定的月付款都会有一份定期合同。一个月后付款的 STiLE 合同的比特币脚本将是:

```
IF
     <now + 1 month > CHECKLOCKTIMEVERIFY DROP
     <Seller’s pubkey> CHECKSIGVERIFY
ELSE
     <Buyer’s pubkey> CHECKSIGVERIFY
ENDIF
```

这将所有订购款项放在一个托管账户中。该逻辑阻止卖方在付款日期(从现在起一个月)之前取回付款，而允许买方在任何时候取回付款。

这创造了一种支付结构，使得买方的意图在整个关系中对卖方是清楚的。当买方想要继续订阅时，他们什么也不做。这允许卖方根据付款时间表取回付款。当买家想要取消服务时，他们会取回所有未支付的款项。

所有这些 STiLE 合同都可以合并到一个单一的链上比特币交易中，与单独的每月支付相比，效率更高(如果使用公钥哈希实现效率更高)。

当每月付款到期时，卖方可以使用

```
<Seller’s signature> 1
```

卖家将需要保持对赎回的掌控，并在赎回款项可用时及时赎回。如果没有，买方可以赎回欠卖方的款项。

买方可以使用以下方式随时取回卖方未取回的任何资金:

```
<Buyer’s signature> 0
```

以下是时间锁定比特币订阅的步骤:

1.  卖家提供以比特币计价的每月订阅的产品或服务。卖方将要求最少的承诺，比如说，12 个月。
2.  当买方注册时，卖方向买方提供公钥，用于创建 STiLE 合同。
3.  买家发布单笔比特币交易，每笔支付都有一份 STiLE 合同。该交易将托管全部合同金额。
4.  卖家有软件来验证和监控买家的交易链。当付款到期时，该软件将清除每笔付款。
5.  如果买方赎回合同，卖方知道买方取消了合同。
6.  卖方需要在合同临近结束时联系买方进行续约。

如你所见，没有模棱两可的情况。卖方总是知道订阅的状态。只要有未兑现的订阅输出，它就有效。如果买方赎回未来的付款，它将被取消。当没有更多的输出时，它就过期了。

就像其他比特币解决方案一样，买家完全可以控制卖家是否获得付款。没有像信用卡订阅那样的取消限制。买方可以在任何时候赎回所有未支付的款项，订阅将被取消。

此外，与传统的无限期订阅“选择退出”相比，固定长度订阅创建了更多的“选择加入”交易。卖方必须明确说服买方在合同结束时采取行动续签合同。而对于无限期订阅，买方必须明确取消，买方忘记取消是很常见的。这一点，以及强大的取消权，使买方在关系中拥有更大的权力，并加强消费者的权利。

一旦订阅交易被添加到区块链，对于买方来说，它在订阅期间是一劳永逸的。不需要热钱包或者第三方。卖家将需要定期在线赎回付款，并监测取消。

这种 STiLE 合同交易对买方来说可以有较低的费用，特别是如果他们不取消的话。原因是具有多个输出的单个事务(每次支付一个)比每个都有一个输出的多个事务要小。这是一篇未来文章的细节。

与此相关的是，STiLE 降低了买方的费用风险。买家无法预测未来支付的费用会有多高，这将会阻碍他们购买比特币。通过将所有支付捆绑在一个立即发布的交易中，买方没有未来费用的不确定性。

这种类型的订阅确实增加了卖方的成本。首先，卖家现在需要发出 12 笔交易，才能在支付可用后扫清每笔输出。此外，这些交易的费用是不确定的，可能会高得多。

这种认购交易为买方提供了一些汇率对冲能力。只要合同有效，不管比特币的法定价格是多少，卖家大概都有义务提供服务。然而，由于买家可以随时取消，如果比特币价格上涨，他们将有动力取消并重新谈判新的合同。

几乎所有这些好处都是给买方的，通常是以卖方为代价的。也就是说，对卖家来说有两个好处。首先，卖方知道资金是可用的，因为认购是预先提供的。其次，一旦卖家兑现了付款，就没有像信用卡那样的退款或撤销的风险。

## 结论

STiLE 合同使比特币订阅变得可行。它们要求认购的期限和金额是固定的。但是，它具有以下优点:

*   强大的取消保证
*   更安全—不需要热钱包或可信任的第三方
*   对买方来说是一劳永逸的，对卖方来说是完全自动化的
*   对买家来说，比发送个人比特币付款更便宜
*   比特币卖家的可靠收入来源(！)没有支付失败的风险

> [在您的收件箱中直接获得最佳软件交易](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)[![](img/449450761cd76f44f9ae574333f9e9af.png)](http://bit.ly/2G71Sp7)

[**Click to read today’s top story**](http://bit.ly/2G71Sp7)