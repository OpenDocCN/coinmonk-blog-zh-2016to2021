<html>
<head>
<title>C++ Guide for EOS Development — Templates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EOS开发的C++指南—模板</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/c-guide-for-eos-development-templates-cce17156eaf?source=collection_archive---------0-----------------------#2018-09-12">https://medium.com/coinmonks/c-guide-for-eos-development-templates-cce17156eaf?source=collection_archive---------0-----------------------#2018-09-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/33981fbfca32e16135975e4ea6b24078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N-psg0FGvSg6pfce.png"/></div></div></figure><div class=""/><blockquote class="jb jc jd"><p id="5585" class="je jf jg jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">这篇文章是我的<a class="ae kd" href="https://cmichel.io/categories/learneos" rel="noopener ugc nofollow" target="_blank">EOS开发者C++指南</a>的一部分</p></blockquote><ol class=""><li id="1831" class="ke kf ie jh b ji jj jm jn kg kh ki kj kk kl kc km kn ko kp dt translated"><a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-basics/" rel="noopener ugc nofollow" target="_blank">基础知识</a></li><li id="722c" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated"><a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-call-by-value-reference/" rel="noopener ugc nofollow" target="_blank">通过值/引用调用&amp;指针</a></li><li id="d710" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated"><a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-classes-and-structs/" rel="noopener ugc nofollow" target="_blank">类和结构</a></li><li id="6d18" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated"><a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-templates" rel="noopener ugc nofollow" target="_blank">模板</a></li><li id="bf39" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">迭代器</li><li id="1ce4" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">λ表达式</li><li id="9c58" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">多指数</li><li id="25ac" class="ke kf ie jh b ji kq jm kr kg ks ki kt kk ku kc km kn ko kp dt translated">头文件</li></ol><h2 id="55a8" class="kv kw ie bd kx ky kz la lb lc ld le lf kg lg lh li ki lj lk ll kk lm ln lo lp dt translated">模板</h2><p id="554b" class="pw-post-body-paragraph je jf ie jh b ji lq jk jl jm lr jo jp kg ls js jt ki lt jw jx kk lu ka kb kc hm dt translated">拥有静态类型的语言有很多好处，因为可以在编译时通过类型检查来捕捉错误。然而，当编写函数或类时，它也引入了开销，因为它们需要为某种类型编写。如果你正在写一个库，并且不知道你的库将如何被使用，该怎么办？如果你想支持更多的类型，你必须重复你自己并重载这个函数。</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="857c" class="kv kw ie ma b fv me mf l mg mh">int max(int a, int b) {<br/>    return a &gt; b ? a : b;<br/>}<br/>max(5, 3); // works<br/>max(5.0, 3.0) // does not work as these are _double_s and not _int_s.</span></pre><p id="1464" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">您需要为<code class="eh mi mj mk ma b">double</code> s定义另一个函数:</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="e4d3" class="kv kw ie ma b fv me mf l mg mh">double max(double a, double b) {<br/>    return a &gt; b ? a : b;<br/>}</span></pre><p id="b205" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">如你所见，函数体<em class="jg">和</em>在两种情况下完全相同。重要的是该类型实现了比较运算符<code class="eh mi mj mk ma b">&gt;</code>。</p><p id="fb06" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">对于这些用例，C++提供了类型<code class="eh mi mj mk ma b">template</code>，你可以使用通用类型来代替特定类型。这允许您创建其功能可以适用于多种类型或类的函数或类，而无需为每种类型重复整个代码。</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="fb9c" class="kv kw ie ma b fv me mf l mg mh">// @url: https://repl.it/@MrToph/CPPBasics-Templates<br/>#include &lt;iostream&gt;<br/><br/>// create a "function-template" with template type T<br/>// T can now be used as any other type like int<br/>template&lt;class T&gt;<br/>T max(T a, T b)<br/>{<br/>  return a &gt; b ? a : b;<br/>}<br/><br/>// create a "class-template"<br/>// class members can now be of the template type T<br/>template &lt;class T&gt;<br/>class pair {<br/>    T values[2];<br/>  public:<br/>    pair(T first, T second)<br/>    {<br/>      values[0]=first;<br/>      values[1]=second;<br/>    }<br/><br/>    T first() const;<br/><br/>    T second() const;<br/>};<br/><br/>// must use template&lt;class T&gt; syntax here again<br/>template &lt;class T&gt;<br/>T pair&lt;T&gt;::first() const {<br/>  return values[0];<br/>}<br/><br/>template &lt;class T&gt;<br/>T pair&lt;T&gt;::second() const {<br/>  return values[1];<br/>}<br/><br/>int main()<br/>{<br/>    int iMax = max(3, 5);<br/>    double dMax = max(3.0, 5.0);<br/>    // class template instantiations are done<br/>    // by passing the type in angle brackets<br/>    pair&lt;int&gt; p(3, 5);<br/>    std::cout &lt;&lt; max(p.first(), p.second());<br/>}</span></pre><p id="8597" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">幕后发生的事情和我们之前手工做的事情是一样的。作为静态类型，代码被分析，并且对模板函数的任何<em class="jg">调用</em>的类型可以被解析。然后，编译器为使用的每个特定类型实例化一个函数。</p><figure class="lv lw lx ly fq hv fe ff paragraph-image"><a href="https://learneos.one#modal"><div class="fe ff ml"><img src="../Images/3b4c64d8d630932e3c4bd617d6761f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gjuqICk5pqM_EbPU.png"/></div></a></figure></div><div class="ab cl mm mn hb mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hm hn ho hp hq"><p id="3050" class="pw-post-body-paragraph je jf ie jh b ji jj jk jl jm jn jo jp kg jr js jt ki jv jw jx kk jz ka kb kc hm dt translated">最初发布于<a class="ae kd" href="https://cmichel.io/cpp-guide-for-eos-development-templates/" rel="noopener ugc nofollow" target="_blank"> cmichel.io </a></p><figure class="lv lw lx ly fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff mt"><img src="../Images/a574f768ff4e456ed7e518b0dba0c44d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ps0urxFFzmWrhFU1.gif"/></div></div></figure><blockquote class="mu"><p id="4b5d" class="mv mw ie bd mx my mz na nb nc nd kc ek translated"><a class="ae kd" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nf ng nh ni nj hv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ne"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>