<html>
<head>
<title>How to Use CoinGecko’s Free API to Get Digital Asset Data: Just the Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用CoinGecko的免费API获取数字资产数据:只是基础</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-use-coingeckos-free-api-to-get-digital-asset-data-just-the-basics-d46f232926cb?source=collection_archive---------0-----------------------#2020-02-25">https://medium.com/coinmonks/how-to-use-coingeckos-free-api-to-get-digital-asset-data-just-the-basics-d46f232926cb?source=collection_archive---------0-----------------------#2020-02-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="9052" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">软件开发人员经常谈论API。什么是API？API代表应用程序编程接口。我想为我正在从事的一个JavaScript项目收集比特币、以太坊和其他数字资产的具体市场数据。我的第一站是CoinGecko。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/8b882531719b530183bf14e4caebd2a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4pePOxyzZ5BfowWxLlsfg.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">CoinGecko is free to use and allows up to 100 requests per minute.</figcaption></figure><p id="843a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我选择CoinGecko的API是因为另一个主要的数字资产信息网站CoinMarketCap因在硬币上发布<a class="ae ke" href="https://www.coindesk.com/for-15k-hell-fake-your-exchange-volume-youll-get-on-coinmarketcap" rel="noopener ugc nofollow" target="_blank">虚假的交易量数据而臭名昭著。</a></p><ol class=""><li id="a65e" class="kf kg ht is b it iu ix iy jb kh jf ki jj kj jn kk kl km kn dt translated">决定你想要得到什么数据。我的应用程序需要给定硬币的当前市场价格、某个历史日期硬币的市场价格以及当前市场的快照。</li></ol><p id="0980" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> a. </strong>到<a class="ae ke" href="https://www.coingecko.com/en/api" rel="noopener ugc nofollow" target="_blank">https://www.coingecko.com/en/api</a>滚动到一半左右。在那里，您将看到您可以提出的请求类型。因为我的应用程序需要从CoinGecko引入一些数据，所以我想发出一个GET请求。这正是CoinGecko所能做到的。邪恶。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff ko"><img src="../Images/2ba884f0d33e8c3ed9e668226bf92402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XjhKET3k4zOgvpoWzv0HcQ.png"/></div></div></figure><p id="7e91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> b. </strong>我将使用<strong class="is hu"> /simple/price </strong>来获取硬币X、Y和Z <strong class="is hu">的当前市场价格。</strong>我将使用<strong class="is hu"> /coins/{id}/history </strong>来获取某个先前日期的硬币价格。</p><p id="b954" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2.测试数据将如何发送到您的应用程序。CoinGecko上的测试环境非常好。它给出了一个例子，说明当我发出请求时，信息将如何传递给我的应用程序。假设我想获得当前<a class="ae ke" href="https://blog.coincodecap.com/tag/bitcoin/" rel="noopener ugc nofollow" target="_blank">比特币</a>和以太的市场价格。我可以在浏览器中输入这些参数。一定要用逗号分隔硬币的id，不要用空格，否则你会遇到问题。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff kp"><img src="../Images/9f97ed94e0ba8fced7e2b972896366bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kd7o3obQ4QuBdANNo5y_Hw.png"/></div></div></figure><p id="feb7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击<strong class="is hu">执行。</strong></p><p id="f14f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当您的应用程序发出同样的请求时，CoinGecko会给出它将发送的响应。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff kq"><img src="../Images/9039896b40376d902d841dbf9b6bfdd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n9BCbp7WIxMSl32wy9NLWg.png"/></div></div></figure><p id="3551" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">太好了，所以现在我们知道了<a class="ae ke" href="https://blog.coincodecap.com/tag/bitcoin/" rel="noopener ugc nofollow" target="_blank">比特币</a>。usd将从该对象中得出一个数字9627.02。通过访问API，复制该数据结构，将其粘贴到您的控制台中，并测试如何获得您需要的信息。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff kr"><img src="../Images/487f96434defc054269e70bdc21cefca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jv1DatT_wLJkR7n_ruOLbw.png"/></div></div></figure><p id="06b3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">3.在JavaScript中导入依赖项</p><p id="87f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您只需要从终端运行:</p><pre class="jp jq jr js fq ks kt ku kv aw kw dt"><span id="5a58" class="kx ky ht kt b fv kz la l lb lc">npm install 'coingecko-api'</span></pre><p id="a6ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可能需要仔细检查package.json文件中的这个lands，如下所示:</p><pre class="jp jq jr js fq ks kt ku kv aw kw dt"><span id="2086" class="kx ky ht kt b fv kz la l lb lc">"coingecko-api": "^1.0.10"</span></pre><p id="9895" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">很好很容易！</p><p id="25ec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您只需要依赖项来使用node.js包装器，否则您可以直接点击URL。(参见下面的实现。)</p><p id="3e1f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">4.提出你的要求。</p><p id="d6bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">经验教训#1:如果你需要获得多个硬币的数据，在发送获取数据的请求时，把它们放在一个数组中。</p><p id="f6bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">经验教训#2:如果fetch请求在历史查询中抛出错误，可能是因为数据只在CoinGecko开始跟踪硬币的时候提供。</p><p id="40f8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">经验教训#3:不要忘记await函数(比如这个API查询)必须在异步函数中执行。下面是一个在React类组件中使用node.js包装器的实现:</p><pre class="jp jq jr js fq ks kt ku kv aw kw dt"><span id="a152" class="kx ky ht kt b fv kz la l lb lc"><strong class="kt hu">async</strong> componentDidMount() {</span><span id="7546" class="kx ky ht kt b fv ld la l lb lc">await this.CoinGeckoClient.coins.markets(<br/>{ vs_currency: "usd",<br/>  order: "market_cap_desc",<br/>  per_page: 100,<br/>  page: 1,<br/>  sparkline: false,<br/>  price_change_percentage: "24h"})<br/>.then(data <strong class="kt hu">=&gt;</strong> console.log(data))}</span></pre><p id="1cfb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">经验教训#4:在一个独立于应用程序的JS文件中运行你的请求可以帮助避免麻烦。只需使用该环境来练习如何使用数据，以及将数据发送到哪里。我花了半天时间在一个coin-gecko-api.js文件中练习请求，并在一个简单的react应用程序中呈现它们，只是为了感受一下如何发出不同的请求。时间用得其所。</p><p id="396f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">历史请求的实现可能是这样的:</p><pre class="jp jq jr js fq ks kt ku kv aw kw dt"><span id="4c0b" class="kx ky ht kt b fv kz la l lb lc"><strong class="kt hu">const </strong>getHistoricalPrice<strong class="kt hu"> = async </strong>event =&gt; {</span><span id="3de5" class="kx ky ht kt b fv ld la l lb lc"><strong class="kt hu">let </strong>currency1API= "bitcoin";<br/><strong class="kt hu">let </strong>indexDate="01-01-2020";<strong class="kt hu"><br/>let</strong> string = "https://api.coingecko.com/api/v3/coins/" + currency1API +"/history?date="+indexDate+"&amp;localization=false";</span><span id="3af3" class="kx ky ht kt b fv ld la l lb lc">await fetch(string)<br/>.then(resp <strong class="kt hu">=&gt;</strong> resp.json())<br/>.then(data <strong class="kt hu">=&gt;</strong> console.log(data.market_data.current_price.usd))}</span><span id="1314" class="kx ky ht kt b fv ld la l lb lc">//=&gt; 7195.15 </span></pre><p id="7eff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">5.对数据做你想做的事！</p><p id="9923" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在你已经准备好了所有的数据。谁敢赢！</p><blockquote class="le lf lg"><p id="2389" class="iq ir lh is b it iu iv iw ix iy iz ja li jc jd je lj jg jh ji lk jk jl jm jn hm dt translated"><strong class="is hu">也可阅读:开发者的10个最佳加密API</strong><a class="ae ke" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f"><strong class="is hu"/></a><strong class="is hu"/></p></blockquote><blockquote class="ll"><p id="b987" class="lm ln ht bd lo lp lq lr ls lt lu jn ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae ke" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="kx ky ht bd lv lw lx ly lz ma mb mc md jb me mf mg jf mh mi mj jj mk ml mm mn dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="kf kg ht is b it mo ix mp jb mq jf mr jj ms jn mt kl km kn dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae ke" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae ke" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="b359" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated">最佳<a class="ae ke" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated">杠杆代币的终极指南</li><li id="3310" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/ascendex-staking" rel="noopener ugc nofollow" target="_blank">AscendEx Staking</a>|<a class="ae ke" href="https://coincodecap.com/bot-ocean-review" rel="noopener ugc nofollow" target="_blank">Bot Ocean Review</a>|<a class="ae ke" href="https://coincodecap.com/bitcoin-wallets-india" rel="noopener ugc nofollow" target="_blank">最佳比特币钱包</a></li><li id="15e5" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/bitget-review" rel="noopener ugc nofollow" target="_blank"> Bitget回顾</a>|<a class="ae ke" href="https://coincodecap.com/gemini-vs-blockfi" rel="noopener ugc nofollow" target="_blank">Gemini vs block fi</a>|<a class="ae ke" href="https://coincodecap.com/okex-futures-trading" rel="noopener ugc nofollow" target="_blank">OKEx期货交易</a></li><li id="c009" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/crypto-trading-bots-in-the-us" rel="noopener ugc nofollow" target="_blank">美国最佳加密交易机器人</a> | <a class="ae ke" href="https://coincodecap.com/changelly-review" rel="noopener ugc nofollow" target="_blank">经常性回顾</a></li><li id="7716" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/crypto-arbitrage-in-india" rel="noopener ugc nofollow" target="_blank">在印度利用加密套利赚取被动收入</a></li><li id="92d8" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/huobi-review" rel="noopener ugc nofollow" target="_blank">霍比评论</a> | <a class="ae ke" href="https://coincodecap.com/okex-margin-trading" rel="noopener ugc nofollow" target="_blank"> OKEx保证金交易</a> | <a class="ae ke" href="https://coincodecap.com/futures-trading" rel="noopener ugc nofollow" target="_blank">期货交易</a></li><li id="d179" class="kf kg ht is b it mu ix mv jb mw jf mx jj my jn mt kl km kn dt translated"><a class="ae ke" href="https://coincodecap.com/sparrow-exchange-review" rel="noopener ugc nofollow" target="_blank">麻雀交换评论</a> | <a class="ae ke" href="https://coincodecap.com/nash-exchange-review" rel="noopener ugc nofollow" target="_blank">纳什交换评论</a></li></ul></div></div>    
</body>
</html>