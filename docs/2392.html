<html>
<head>
<title>Venturing into The LAO: Comparing MolochDAO and vmLAO Solidity Designs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">冒险进入老挝:比较MolochDAO和vmLAO的坚固性设计</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/venturing-into-the-lao-comparing-molochdao-and-vmlao-solidity-designs-81da2361dba5?source=collection_archive---------2-----------------------#2019-09-04">https://medium.com/coinmonks/venturing-into-the-lao-comparing-molochdao-and-vmlao-solidity-designs-81da2361dba5?source=collection_archive---------2-----------------------#2019-09-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/0d493a239f464cd13f7041d63acf728c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lHeu9AJHwZYWgrCK.jpg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">👹 + 👾 = ❤️</figcaption></figure><p id="c02f" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><a class="ae kd" rel="noopener" href="/openlawofficial/the-lao-a-for-profit-limited-liability-autonomous-organization-9eae89c9669c"> <em class="ke">最近宣布的由<a class="ae kd" href="https://www.openlaw.io/" rel="noopener ugc nofollow" target="_blank"> OpenLaw </a>支持的项目LAO </em> </a>旨在为新以太坊风险企业提供法律形式和结构模型，该项目大量借鉴了<a class="ae kd" href="https://github.com/MolochVentures/moloch" rel="noopener ugc nofollow" target="_blank">Moloch DAO smart contract framework</a>以实现以下资金管理的关键目标:</p><ul class=""><li id="3b3d" class="kf kg ht jh b ji jj jm jn jq kh ju ki jy kj kc kk kl km kn dt translated"><strong class="jh hu"> <em class="ke">简单坚固安全</em>；</strong></li><li id="0b65" class="kf kg ht jh b ji ko jm kp jq kq ju kr jy ks kc kk kl km kn dt translated"><strong class="jh hu"> <em class="ke">托管提案</em>；</strong></li><li id="f9b1" class="kf kg ht jh b ji ko jm kp jq kq ju kr jy ks kc kk kl km kn dt translated"><strong class="jh hu"> <em class="ke">优雅退场</em>；</strong></li></ul><p id="0072" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">通过这种方式，Moloch设计有助于限制成员竞争的区域，并且同样支持围绕数字基金赠款的私人订购的简单模板。将这种形式扩展到venture并不是一个沉重的技术提升，而且<a class="ae kd" href="https://twitter.com/MolochDAO/status/1166693888008081410?s=20" rel="noopener ugc nofollow" target="_blank"> Moloch v2合同升级</a>也为在线融资的自动化方面提供了一个有前途的补充设计。</p><p id="ba38" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">我们的</strong><a class="ae kd" href="https://github.com/openlawteam/TheLAO/blob/master/contracts/TheLAO.sol" rel="noopener ugc nofollow" target="_blank"><strong class="jh hu"><em class="ke">vmLAO</em></strong></a><strong class="jh hu">设计通过原始的Moloch DAO投票轨道合并链上成员和资金提案，并进行一些定制的经济更改，以适应ERC20令牌互换和会计逻辑<em class="ke">LAO</em>成员红利和投资记录。</strong></p><p id="aef7" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">随着我们的迭代，我们期待着与其他项目合作，围绕Moloch和类似的在线公会框架建立风险设计。</p><p id="d130" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">下面重点介绍了我们从Moloch派生出的简化的vmLAO设计的初步方法:<a class="ae kd" href="https://thelao.slack.com/join/shared_invite/enQtNzMyNjc0OTUwMzM4LTBmOGMxZmMzYzcyOWQ5MTlkYWJmYWYyNmYyNjkzM2Y1Mzg2NzZhOGM5MDQ1ZTVkOTNkZTk2MjM5NWE1ZDFmOWI" rel="noopener ugc nofollow" target="_blank"> <em class="ke">请提出意见、问题和建议！</em> </a></p><h2 id="0752" class="kt ku ht bd kv kw kx ky kz la lb lc ld jq le lf lg ju lh li lj jy lk ll lm ln dt translated"><strong class="ak"> <em class="lo">多令牌支持</em> </strong></h2><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="c327" class="kt ku ht lu b fv ly lz l ma mb">IERC20 public contributionToken; <br/>IERC20 private tributeToken; </span></pre><p id="f8e4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><em class="ke"> vmLAO </em>跟踪两种令牌类型:</p><p id="472d" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">(I)“<strong class="jh hu">出资权标，”</strong>成员出资的基本权标，以获得公会银行的有表决权的股份和经济利益(以及，哪些风险企业在*中请求资助)，如DAI或wETH，以及</p><p id="4926" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">(ii) <strong class="jh hu"> </strong> " <strong class="jh hu">贡品代币</strong>，<em class="ke"> vmLAO </em>智能合同在会员资格和/或资金提案期间托管的代币(<em class="ke">如果请求有投票权的股份，这将很可能匹配贡献代币类型</em>)。</p><p id="c040" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">与最初的Moloch设计类似，如果<em class="ke"> vmLAO </em>提案失败，存放的贡品令牌金额将自动返还给<em class="ke"> vmLAO </em>申请人。</p><p id="a7d4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><em class="ke">与Moloch </em>不同，LAO 成员不需要<em class="ke"> </em>作为提案保证金。确定参与者和会员协议后，<em class="ke">LAO</em>将初步探索法律责任如何帮助优化参与并减少提案流程中的垃圾邮件(<em class="ke">尽管存款机制不会影响未来的实施！</em>)。</p><h2 id="3b36" class="kt ku ht bd kv kw kx ky kz la lb lc ld jq le lf lg ju lh li lj jy lk ll lm ln dt translated"><strong class="ak">核算经济权重</strong></h2><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="ee20" class="kt ku ht lu b fv ly lz l ma mb">uint256 public totalContributed = 0; <br/>uint256 public totalDividends = 0; <br/>uint256 public totalWithdrawals = 0;</span></pre><p id="d60c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><em class="ke"> vmLAO </em>设计跟踪三个值，以在内部说明任何成员都可以通过<em class="ke">ragequitying</em>exit申请红利或完全提取的公会银行总额的*公平份额*:(I)“<strong class="jh hu">贡献总额</strong>、( ii)“<strong class="jh hu">红利总额</strong>”、(iii)“<strong class="jh hu">提取总额</strong>。”</p><p id="e9ba" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">当一个提议被处理时，基本令牌中的贡献被跟踪为一个总和(<em class="ke">匹配vmLAO向公会银行</em>存入的任何金额):</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="1aeb" class="kt ku ht lu b fv ly lz l ma mb">if (proposal.tributeToken == contributionToken) { <br/>totalContributed = totalContributed.add(proposal.tributeAmount); <br/>}</span></pre><p id="fcdf" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">对Moloch成员结构的少量添加也考虑了个人代币贡献和从公会银行总额中提取的红利，允许<em class="ke"> vmLAO </em>在运行的基础上计算个人经济份额:</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="ff7e" class="kt ku ht lu b fv ly lz l ma mb">struct Member {     <br/>address delegateKey; <br/>uint256 shares;   <br/>bool exists;     <br/><strong class="lu hu">uint256 tributeAmount;</strong><br/>uint256 highestIndexYesVote; <br/><strong class="lu hu">uint256 lastTotalDividends; </strong><br/>}</span></pre><h2 id="1c3f" class="kt ku ht bd kv kw kx ky kz la lb lc ld jq le lf lg ju lh li lj jy lk ll lm ln dt translated"><strong class="ak">添加风险管理</strong></h2><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="61df" class="kt ku ht lu b fv ly lz l ma mb">modifier onlySummoner {<br/>require(msg.sender == summoner);     <br/>_; <br/>}</span></pre><p id="5c7c" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><em class="ke"> vmLAO </em>还有一个额外的修饰符‘only召唤师’，它允许智能契约构造者设置的召唤师地址对公会银行拥有某些有限的管理特权:(i) <em class="ke">撤回</em>投资资产，以及(ii) <em class="ke">宣布</em>贡献成员应得的红利:</p><p id="f87d" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ke">管理员收回资产</em> : </strong></p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="0c1a" class="kt ku ht lu b fv ly lz l ma mb">function adminWithdrawAsset(IERC20 assetToken, address receiver, uint256 amount) onlySummoner public returns (bool) {     <strong class="lu hu">require(assetToken != contributionToken); </strong><br/>return guildBank.adminWithdrawAsset(assetToken, receiver, amount); <br/>}</span></pre><p id="5255" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ke">管理员宣布分红</em> : </strong></p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="f771" class="kt ku ht lu b fv ly lz l ma mb">updateTotalDividends(uint256 newDividendAmount) onlySummoner public { totalDividends = totalDividends.add(newDividendAmount); <br/>}</span></pre><p id="0da2" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">注</strong>:召唤师管理员不允许单方面提取公会银行中的基础贡献令牌金额；相反，他们必须通过常规的vmLAO提案流程申请此类资金(如<em class="ke">的</em>DeFi储蓄策略)。除了在Moloch v2 venture design中删除不合规成员的“公会踢”机制之外，我们还在研究添加类似的成员投票机制的好处，以删除/分配对LAO功能的管理权限，这些功能出于法律或其他预防原因可能需要管理关注。</p><h2 id="0830" class="kt ku ht bd kv kw kx ky kz la lb lc ld jq le lf lg ju lh li lj jy lk ll lm ln dt translated"><strong class="ak">新增资金拨付</strong></h2><p id="9c68" class="pw-post-body-paragraph jf jg ht jh b ji mc jk jl jm md jo jp jq me js jt ju mf jw jx jy mg ka kb kc hm dt translated">虽然最初的Moloch代码要求贡品申请人退出/退出公会并烧毁投票份额，以便根据他们的投票权重申请资金，但<em class="ke"> vmLAO </em>消除了这种纯粹资金请求的跟进机制，并在投票和经济之间进行了划分。为此，提案功能包含一个附加字段“请求的<strong class="jh hu">资金</strong>”，该字段在处理批准后将基本缴款令牌中的此类金额支付给申请人(<em class="ke">此类金额也计入从公会银行提取的总金额</em>):</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="e24b" class="kt ku ht lu b fv ly lz l ma mb">require(<br/>guildBank.withdrawFunds(proposal.applicant, proposal.fundsRequested), "Moloch::processProposal - withdrawal of tokens from guildBank failed"<br/>);</span></pre><p id="79da" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">最后，让我们来看看这个关于Moloch的附加经济脚本是如何为每个LAO成员的<em class="ke">VM LAO</em>raq退出和分红功能发挥重要作用的:</p><p id="ca8b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ke">成员退出:</em> </strong></p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="1a02" class="kt ku ht lu b fv ly lz l ma mb">function ragequit() public onlyMember {     <br/>Member storage member = members[msg.sender];      </span><span id="94b3" class="kt ku ht lu b fv mh lz l ma mb">require(canRagequit(member.highestIndexYesVote), "Moloch::ragequit - cant ragequit until highest index proposal member voted YES on is processed");          </span><span id="e245" class="kt ku ht lu b fv mh lz l ma mb"><strong class="lu hu">uint256 withdrawalAmount = (member.tributeAmount / totalContributed) * (totalContributed + totalDividends - totalWithdrawals);</strong>      </span><span id="e0b0" class="kt ku ht lu b fv mh lz l ma mb">// burn shares and other pertinent membership records     totalShares = totalShares.sub(member.shares);     <br/>member.shares = 0;     <br/><strong class="lu hu">member.tributeAmount = 0;</strong>      <br/>        <br/><strong class="lu hu">totalWithdrawals = totalWithdrawals.add(withdrawalAmount); </strong>// update total guild bank withdrawal tally to reflect raqequit amount <strong class="lu hu"> </strong>    </span><span id="f4af" class="kt ku ht lu b fv mh lz l ma mb">// instruct guild bank to transfer withdrawal amount to ragequitter     <br/>require(         <br/>guildBank.withdraw(msg.sender, <strong class="lu hu">withdrawalAmount</strong>),         "Moloch::ragequit - withdrawal of tokens from guildBank failed"     ); <br/>     <br/>emit Ragequit(msg.sender); <br/>}</span></pre><p id="bcfa" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">正如上面的计算可能表明的那样，这种设计旨在允许<em class="ke"> vmLAO </em>衡量成员对其基础令牌金额的贡献，该令牌金额用于资助<em class="ke">LAO</em>的风险投资和管理，将他们的公平经济“份额”归因于他们退出时可以提取的公会银行资金。</p><p id="0dc2" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">注</strong> : <em class="ke">与Moloch </em>不同，这一初始退出延期不允许成员退出少于其总出资额的金额(<em class="ke">根据通过投票</em>的分配进行调整)，尽管我们正在考虑更零碎的设计的好处。</p><p id="ebc0" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ke">会员索取红利:</em> </strong></p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="0674" class="kt ku ht lu b fv ly lz l ma mb">function claimDividend() public onlyMember { <br/>Member storage member = members[msg.sender]; </span><span id="7e13" class="kt ku ht lu b fv mh lz l ma mb">// claim fair share of declared member dividend amount uint256 dividendAmount = (member.tributeAmount / totalContributed) * (totalDividends — member.lastTotalDividends); </span><span id="f04f" class="kt ku ht lu b fv mh lz l ma mb">// instruct guild bank to transfer fair share to member <br/>require( <br/>guildBank.withdrawDividend(msg.sender, dividendAmount), “Moloch::claimDividend — withdrawal of tokens from guildBank failed” ); </span><span id="e1ec" class="kt ku ht lu b fv mh lz l ma mb">member.lastTotalDividends = member.lastTotalDividends.add(dividendAmount); totalWithdrawals = totalWithdrawals.add(dividendAmount); <br/>}</span></pre><p id="4cd5" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">如上所述，<em class="ke">LAO</em>成员可以调用<em class="ke"> vmLAO </em>智能合约来提取其通过公会银行基金的批准投资而获得的已宣布股息份额。</p><h2 id="201e" class="kt ku ht bd kv kw kx ky kz la lb lc ld jq le lf lg ju lh li lj jy lk ll lm ln dt translated">结论</h2><p id="d331" class="pw-post-body-paragraph jf jg ht jh b ji mc jk jl jm md jo jp jq me js jt ju mf jw jx jy mg ka kb kc hm dt translated"><em class="ke">LAO</em>和<em class="ke"> vmLAO </em> Solidity设计将以太坊领域中用于赠款的原始Moloch设计扩展到利润驱动的风险投资，其经济扩展保留了投票和成员管理简单性的核心Moloch优势，同时适度地适应了受监管环境中的盈利性业务问题。</p><blockquote class="mi"><p id="c1e8" class="mj mk ht bd ml mm mn mo mp mq mr kc ek translated"><a class="ae kd" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mt mu mv mw mx iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ms"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>