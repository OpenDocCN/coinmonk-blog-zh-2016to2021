<html>
<head>
<title>Set up Bitcoin Lightning Server on Google Cloud (GUIDE)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在谷歌云上设置比特币闪电服务器(指南)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/setup-bitcoin-lightning-server-on-google-cloud-guide-95811c439b32?source=collection_archive---------1-----------------------#2018-06-28">https://medium.com/coinmonks/setup-bitcoin-lightning-server-on-google-cloud-guide-95811c439b32?source=collection_archive---------1-----------------------#2018-06-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="1dfe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">闪电网络是有史以来打击比特币网络的最大规模解决方案之一，因为它最终使比特币成为一种日常货币，而不仅仅是一种价值储存手段。尽管它仍处于起步阶段，但它的工作速度快得惊人，一语双关。</p><p id="0cb0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">有很多关于在家用电脑或Raspberry Pi上设置lightning网络的指南，但如果你想设置一个真正可靠且可扩展的服务器，并在将来用于你的业务，那么请继续阅读。我选择谷歌云服务是因为他们为你提供300美元的礼品奖励，这实际上应该足够你的服务器免费运行半年多！足够的时间真正做出有用的东西！</p><p id="405e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> <em class="jo">本指南将指导您设置比特币全节点、闪电网络节点和一个平均堆栈服务器，以安全地与您的节点交互。</em> </strong></p></div><div class="ab cl jp jq hb jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hm hn ho hp hq"><h2 id="3fb3" class="jw jx ht bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq dt translated">创建您的谷歌云服务帐户并启动服务器</h2><p id="3da4" class="pw-post-body-paragraph iq ir ht is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hm dt translated">只需转到<a class="ae kw" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云服务(GCS) </a>并创建一个免费试用账户，即可获得300美元奖励。是的，你必须放入你的信用卡，但是你可以在用完奖金之前取消订阅。你可以用不到50美元运行一个非常强大的服务器，这意味着你可以免费运行它半年以上！</p><p id="9e0d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦你建立了你的帐户，继续创建一个新的项目。在左上角，您将看到导航菜单，单击产品部分中的云启动器。在搜索栏中输入“MEAN”，然后选择“MEAN Certified by Bitnami”。</p><p id="2d8d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">以下是最适合我的设置:</em></p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff kx"><img src="../Images/afb88234efd0b5b33066ba16483844c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Qyn7xJn5jcDsELR4b9NIg.png"/></div></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">MEAN server settings</figcaption></figure><p id="3a7c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">单击页面底部的部署按钮，等待几分钟…</p><p id="b887" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦你的服务器部署完毕，在GC搜索栏中输入“外部IP地址”并设置一个静态IP地址，这样你就不会在每次服务器重启时都得到一个新的IP地址。</p><p id="78ca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来你要做的是在你的防火墙设置中打开端口9735，因为这个端口被Lightning网络节点使用。如果您关闭此端口，其他节点将无法打开通道或连接到您的节点。</p><p id="f567" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> <em class="jo">注意，如果您关闭节点，它仍然可以连接到其他节点！</em>T13】</strong></p><p id="0cd7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在GC控制台中，转到“VPC网络”并选择“防火墙规则”，单击“创建防火墙规则”并使用以下设置:</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff ln"><img src="../Images/685552bb7346b185c7e84a34375f3214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mP6dpyZZQDbfAXHyt5xUeg.png"/></div></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">Firewall rule</figcaption></figure><p id="39ff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">单击页面底部的“创建”,您的规则将被创建。</p><p id="a265" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在转到左侧的导航菜单，点击“计算”部分下的“计算引擎”。单击您的服务器名称，然后单击页面顶部的“编辑”。</p><p id="d173" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在“网络标记”部分，添加您之前创建的防火墙规则的标记:</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lo"><img src="../Images/5f89f4193c95aef647d3cb34a258a31b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iDc29khEy2Axd6cvPO0-FQ.png"/></div></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">Add a firewall rule to the server</figcaption></figure><p id="6a10" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我还强烈建议您设置SSH密钥，这样您就可以安全地连接到您的服务器！ </p><h2 id="b8b6" class="jw jx ht bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq dt translated">跟随这个<a class="ae kw" href="https://docs.bitnami.com/virtual-machine/faq/#connecting-with-an-ssh-client" rel="noopener ugc nofollow" target="_blank">链接</a>使用Bitnami设置SSH</h2><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lp"><img src="../Images/c9a94dd9004ecbb550b5c3b78252fc31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7f4x7qyc_eV6rnYWAxP_fg.png"/></div></div></figure><p id="02bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> <em class="jo">重要！将您的SSH用户设置为“bitnami”</em></strong></p><p id="7497" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击页面底部的“保存”,您的服务器现在应该已经为有趣的内容做好准备了！</p></div><div class="ab cl jp jq hb jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hm hn ho hp hq"><h2 id="9219" class="jw jx ht bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq dt translated">配置您的平均闪电服务器</h2><p id="36fa" class="pw-post-body-paragraph iq ir ht is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hm dt translated">打开您的终端，通过SSH连接到您新部署的服务器</p><p id="c70a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我已经在GitHub上发布了一个一体化的安装脚本，所以这非常简单:</p><ol class=""><li id="e4b1" class="lq lr ht is b it iu ix iy jb ls jf lt jj lu jn lv lw lx ly dt translated">前往您的个人文件夹:</li></ol><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="acc4" class="jw jx ht ma b fv me mf l mg mh">cd ~</span></pre><p id="9eef" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2.运行以下命令:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="a7b8" class="jw jx ht ma b fv me mf l mg mh">git clone <a class="ae kw" href="https://github.com/Moonbois/lightning-installer.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Moonbois/lightning-installer.git</a></span><span id="f750" class="jw jx ht ma b fv mi mf l mg mh">cd lightning-installer/scripts/gcs_mean_bitnami/</span><span id="05c0" class="jw jx ht ma b fv mi mf l mg mh">sudo nano config</span></pre><p id="a7b7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">3.编辑配置文件。最重要的设置是:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="2009" class="jw jx ht ma b fv me mf l mg mh">bind-addr=YOUR_INTERNAL_IP</span><span id="3c1d" class="jw jx ht ma b fv mi mf l mg mh">announce-addr=YOUR_EXTERNAL_IP</span></pre><p id="95a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您转到左侧的导航菜单并单击“计算”部分下的“计算引擎”，您将找到正确的IP值。在那里，您将看到您的“内部IP”和“外部IP”，您应该将它们复制到您的配置文件中。</p><p id="40e4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">4.通过运行安装:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="be15" class="jw jx ht ma b fv me mf l mg mh">./install.sh</span></pre><p id="8d25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">4.等待几分钟，安装完成。</p><h2 id="e6de" class="jw jx ht bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq dt translated">现在你等得更久了！</h2><p id="677b" class="pw-post-body-paragraph iq ir ht is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hm dt translated">比特币区块链完全同步大约需要12个多小时。</p><p id="fe9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以通过以下方式检查进度:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="c323" class="jw jx ht ma b fv me mf l mg mh">tail -f ~/.bitcoin/debug.log</span></pre><p id="619a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当您看到“progress=1.000”时，您的节点已完全同步。</p><h2 id="45eb" class="jw jx ht bd jy jz ka kb kc kd ke kf kg jb kh ki kj jf kk kl km jj kn ko kp kq dt translated">最后一步:</h2><p id="5999" class="pw-post-body-paragraph iq ir ht is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hm dt translated">运行以下命令，用您的令牌替换<mysecrettoken>:</mysecrettoken></p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="a211" class="jw jx ht ma b fv me mf l mg mh">immortal lightningd</span><span id="9bba" class="jw jx ht ma b fv mi mf l mg mh">immortal charged --api-token &lt;mySecretToken&gt; --db-path /home/bitnami/chargedb/charge.db</span></pre><p id="3130" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让这些程序在系统重启时运行也很好，只需输入:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="99f0" class="jw jx ht ma b fv me mf l mg mh">crontab -e</span></pre><p id="657d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将这一行添加到文件的末尾:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="ed37" class="jw jx ht ma b fv me mf l mg mh">@reboot immortal bitcoind --daemon<br/>@reboot immortal lightningd<br/>@reboot immortal charged --api-token &lt;mySecretToken&gt; --db-path /home/bitnami/chargedb/charge.db</span></pre><h1 id="802f" class="mj jx ht bd jy mk ml mm kc mn mo mp kg mq mr ms kj mt mu mv km mw mx my kp mz dt translated">全部完成！</h1></div><div class="ab cl jp jq hb jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hm hn ho hp hq"><p id="46c2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以通过运行以下命令来测试节点:</p><pre class="ky kz la lb fq lz ma mb mc aw md dt"><span id="2a2a" class="jw jx ht ma b fv me mf l mg mh">lightning-cli getinfo</span></pre><p id="59d1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">查看GitHub上的<a class="ae kw" href="https://github.com/ElementsProject/lightning" rel="noopener ugc nofollow" target="_blank"> c-lightning </a>和<a class="ae kw" href="https://github.com/ElementsProject/lightning-charge" rel="noopener ugc nofollow" target="_blank"> lightning-charge </a>了解使用说明！</p><h1 id="b96f" class="mj jx ht bd jy mk ml mm kc mn mo mp kg mq mr ms kj mt mu mv km mw mx my kp mz dt translated">总而言之:</h1><p id="1d21" class="pw-post-body-paragraph iq ir ht is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hm dt translated">希望你喜欢阅读本指南。我试图让它尽可能简单，安装脚本是已经被要求了一段时间，它是一个真正的时间节省者。希望对你的项目有帮助！</p><p id="ad26" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让光进来！</p><p id="c638" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">附言:如果你的节点运行成功，请在这里给我发一个闪电提示<a class="ae kw" href="https://tippin.me/@Moonchacho" rel="noopener ugc nofollow" target="_blank">！谢谢大家！</a></p><h1 id="2ff7" class="mj jx ht bd jy mk ml mm kc mn mo mp kg mq mr ms kj mt mu mv km mw mx my kp mz dt translated">编辑:</h1><p id="f89d" class="pw-post-body-paragraph iq ir ht is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hm dt translated">一些用户在设置他们的服务器时遇到了一些问题，这就是为什么我创建了一个专门的电报组，我们可以在那里聊天！</p><p id="4659" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">任何人都可以在这里加入<a class="ae kw" href="https://t.me/gcslightning" rel="noopener ugc nofollow" target="_blank"/>！</p></div></div>    
</body>
</html>