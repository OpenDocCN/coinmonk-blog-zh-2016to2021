<html>
<head>
<title>Add editable, IPFS-based user profiles to your dapp in less than 30 mins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在不到30分钟的时间内，将基于IPFS的可编辑用户配置文件添加到您的dapp中</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/add-editable-ipfs-based-user-profiles-to-your-dapp-in-less-than-30-mins-abae8c9a05e6?source=collection_archive---------0-----------------------#2020-01-29">https://medium.com/coinmonks/add-editable-ipfs-based-user-profiles-to-your-dapp-in-less-than-30-mins-abae8c9a05e6?source=collection_archive---------0-----------------------#2020-01-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/3ef26275a8c46bfcd2a251dcbb8ec164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SHfZajrUO97qxekPYp5Sug.png"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek"><a class="ae ig" href="https://icons8.com" rel="noopener ugc nofollow" target="_blank">I</a>llustration by <a class="ae ig" href="https://icons8.com" rel="noopener ugc nofollow" target="_blank">Ouch.pics</a></figcaption></figure><div class=""/><div class=""><h2 id="6e9c" class="pw-subtitle-paragraph jg ii ij bd b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx ek translated">为Web3用户创造更人性化的体验</h2></div><p id="1770" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">用户配置文件在Web2.0应用程序中无处不在，我们每天都在使用，以至于我们很少考虑它们，但是很少有分散的应用程序使用它们。在3Box，我们希望改变这种情况，为dapps带来更人性化的用户体验。</p><h2 id="2c40" class="ku kv ij bd kw kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo dt translated">3Box的个人资料编辑插件介绍</h2><p id="5912" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated">这就是为什么我们创建了我们最新的嵌入式UI组件，<a class="ae ig" href="https://docs.3box.io/build/plugins/profile-edit" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ik">个人资料编辑插件</strong> </a> <strong class="ka ik"> </strong>(这里有<a class="ae ig" href="https://3box.github.io/3box-profile-edit-react/examples/dist/" rel="noopener ugc nofollow" target="_blank">演示</a>)。使用该组件，您可以在大约10-30分钟内将<strong class="ka ik">用户控制的可编辑配置文件添加到分散的react应用程序中</strong>。我们制作的dapps越社会化，用户就会越想使用它们；没有理由让你的用户在十六进制代码中挣扎！</p><p id="86a1" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated"><em class="lu">如果你更喜欢通过视频学习，看看这个教程👇</em></p><figure class="lv lw lx ly fq hv"><div class="bz el l di"><div class="lz ma l"/></div><figcaption class="ic id fg fe ff ie if bd b be z ek">3Box Profile Edit plugin video tutorial</figcaption></figure><h1 id="0c33" class="mb kv ij bd kw mc md me la mf mg mh le jp mi jq lh js mj jt lk jv mk jw ln ml dt translated">1.与以太坊钱包集成</h1><p id="9f84" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated"><a class="ae ig" href="https://3box.io" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ik"> 3Box </strong> </a>使用加密认证，这意味着加密密钥用于管理3Box数据库认证和身份。这些3Box密钥对每个3Box用户都是唯一的，并且是在钱包的私钥(我们从不直接接触它们)签署消息时确定性地在客户端生成的。这意味着当使用3Box时，你需要将你的前端连接到一个以太坊钱包。这使得3Box可以使用用户的以太坊地址和钱包的以太坊提供商。欲了解更多信息，请参阅我们的<a class="ae ig" rel="noopener" href="/3box/3box-architecture-a3e35c82e919">架构博客文章</a>。</p><p id="dfd4" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated"><em class="lu"> 3Box支持</em> <strong class="ka ik"> <em class="lu">所有标准以太坊钱包</em> </strong> <em class="lu">，但对于本教程我们将用</em> <a class="ae ig" href="https://metamask.io" rel="noopener ugc nofollow" target="_blank"> <em class="lu">元掩码</em> </a> <em class="lu">进行构建。</em></p><h2 id="9170" class="ku kv ij bd kw kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo dt translated">设置您的应用</h2><p id="c8e8" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated">为了入门，我用了这个用Create React app内置的<a class="ae ig" href="https://github.com/RachBLondon/metamask-3box-boilerplate" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ik">样板</strong> </a> <strong class="ka ik"> </strong>。这将通过启用由MetaMask注入到前端的以太坊提供者来设置前端以与3Box集成(最终用户将需要安装这个)。这使我们能够访问用户的元掩码地址，然后保存到react状态。这发生在以下函数中:</p><pre class="lv lw lx ly fq mm mn mo mp aw mq dt"><span id="eaa6" class="ku kv ij mn b fv mr ms l mt mu">async getAddressFromMetaMask() {<br/>    if (typeof window.ethereum == "undefined") {<br/>      this.setState({ needToAWeb3Browser: true });<br/>    } else {<br/>      const accounts = await window.ethereum.enable();<br/>      this.setState({ accounts });<br/>    }<br/>  }</span><span id="3876" class="ku kv ij mn b fv mv ms l mt mu">async componentDidMount() {<br/>    await this.getAddressFromMetaMask();	<br/>}</span></pre><p id="49b1" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">当页面在<code class="eh mw mx my mn b">componentDidMount</code>中加载时，这个函数被直接调用。这是实现起来最简单的模式，我们必须等到页面装载后才能调用该函数，因为在此之前，MetaMask不会将提供者注入页面。</p><h1 id="61e0" class="mb kv ij bd kw mc md me la mf mg mh le jp mi jq lh js mj jt lk jv mk jw ln ml dt translated">2.用3Box认证并打开空间</h1><h2 id="44d9" class="ku kv ij bd kw kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo dt translated">安装3Box.js</h2><p id="8f20" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated">现在我们已经启用了提供者，并且可以访问用户的以太坊地址，我们可以开始使用<code class="eh mw mx my mn b">3box.js</code>了。如果您还没有这样做，请确保您<code class="eh mw mx my mn b">npm i 3box</code>并将库导入到文件顶部的as框中(在JS中变量名不能以数字开头)。然后我们可以返回到<code class="eh mw mx my mn b">componentDidMount</code>函数，在我们调用<code class="eh mw mx my mn b">getAddressFromMetaMask</code>之后，我们可以添加下面几行:</p><pre class="lv lw lx ly fq mm mn mo mp aw mq dt"><span id="9709" class="ku kv ij mn b fv mr ms l mt mu">async componentDidMount() {<br/>    await this.getAddressFromMetaMask();	</span><span id="9273" class="ku kv ij mn b fv mv ms l mt mu">		const box = await Box.openBox(this.state.accounts[0], window.ethereum);<br/>		const space = await box.openSpace('edit-profile-plugin');<br/>		this.setState({ space, box });<br/>}</span></pre><h2 id="5176" class="ku kv ij bd kw kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo dt translated">认证3框</h2><p id="1d36" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated">我们需要做的第一件事就是对用户进行认证。为此，我们将调用3Box库中可用的<code class="eh mw mx my mn b">openBox</code>方法。不要担心，如果用户还没有3Box帐户，我们会为他们创建一个。这是用户从其钱包中的签名消息生成加密3盒密钥的阶段。这就是为什么我们需要传入用户的以太坊地址和提供者。</p><h2 id="de5a" class="ku kv ij bd kw kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo dt translated">验证你的应用空间</h2><p id="ccfc" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated">使用<code class="eh mw mx my mn b">openBox</code>认证3Box后，下一步是<strong class="ka ik">认证一个空间</strong>。<strong class="ka ik">空间</strong>是在用户的3Box中用于特定应用存储的命名空间区域。我们可以用<code class="eh mw mx my mn b">openSpace</code>方法做到这一点。这只需要一个参数，空间的名称。此名称将用于命名您的共享空间，因此请选择一个独特而具体的名称。对于本教程，<code class="eh mw mx my mn b">edit-profile-plugin</code>就可以了。在我们使用<strong class="ka ik">3框</strong>和我们的应用程序的<strong class="ka ik">空间</strong>进行身份验证后，我们可以保存两者以供以后使用。</p><h1 id="3bbe" class="mb kv ij bd kw mc md me la mf mg mh le jp mi jq lh js mj jt lk jv mk jw ln ml dt translated">3.添加个人资料编辑插件</h1><p id="e476" class="pw-post-body-paragraph jy jz ij ka b kb lp jk kd ke lq jn kg kh lr kj kk kl ls kn ko kp lt kr ks kt hm dt translated">接下来我们可以<code class="eh mw mx my mn b">npm i 3box-profile-edit-react</code>并将它导入到我们文件的顶部。在我们的渲染函数中，我们可以开始使用组件。</p><p id="1aa2" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">要以最简单的形式使用组件，我们只需要下面的代码。</p><pre class="lv lw lx ly fq mm mn mo mp aw mq dt"><span id="f39f" class="ku kv ij mn b fv mr ms l mt mu">{this.state.space &amp;&amp; this.state.box &amp;&amp; (<br/>          &lt;EditProfile<br/>            box={this.state.box}<br/>            space={this.state.space}<br/>            currentUserAddr={this.state.accounts[0]}<br/>          /&gt;<br/>        )}</span></pre><p id="f831" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">这里我们添加了一个条件来确保组件在<strong class="ka ik">3框</strong>和<strong class="ka ik">空间</strong>被认证之前不会呈现。然后我们进去:</p><ul class=""><li id="6b4a" class="mz na ij ka b kb kc ke kf kh nb kl nc kp nd kt ne nf ng nh dt translated">用户的地址</li><li id="30be" class="mz na ij ka b kb ni ke nj kh nk kl nl kp nm kt ne nf ng nh dt translated">认证空间和3Box(盒子)</li></ul><figure class="lv lw lx ly fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff nn"><img src="../Images/bd035285f1a64988da4e7d4acd235077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5BMKaWuFyCXVv5ha1YJTGw.png"/></div></div></figure><p id="c271" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">现在有了一个工作配置文件编辑组件！可以添加定制字段和重定向功能，以适应您的用例(<a class="ae ig" href="https://docs.3box.io/build/plugins/profile-edit#try-the-demo-here" rel="noopener ugc nofollow" target="_blank">检查文档</a>)。该组件允许用户直接从前端应用程序编辑分布式的、用户控制的配置文件。<strong class="ka ik">这是一个不错的方法，可以让你的分散式应用程序在短时间内更人性化！</strong></p><p id="f7c6" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">Edit Profile是我们的<strong class="ka ik">嵌入式react插件</strong>系列中的最新产品，旨在为分布式应用程序带来更具吸引力的UX。查看我们的<a class="ae ig" href="https://docs.3box.io/build/plugins/profile-hover" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ik">个人资料Hove </strong> </a> <strong class="ka ik"> r </strong>、<a class="ae ig" href="https://docs.3box.io/build/plugins/chatbox" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ik">聊天框</strong> </a>和<a class="ae ig" href="https://docs.3box.io/build/plugins/comments" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ik">评论</strong> </a>插件，了解更多将web2.0用户体验带入web3.0应用的方法！</p><p id="bb8f" class="pw-post-body-paragraph jy jz ij ka b kb kc jk kd ke kf jn kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated"><em class="lu">我们很想听听你在建什么，加入我们的</em> <a class="ae ig" href="https://chat.3box.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lu">不和谐</em> </a> <em class="lu">频道吧！</em></p><blockquote class="no"><p id="b4a9" class="np nq ij bd nr ns nt nu nv nw nx kt ek translated"><a class="ae ig" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nz oa ob oc od hv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ny"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="lv lw lx ly fq hv fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff oe"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></a></figure></div></div>    
</body>
</html>