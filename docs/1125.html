<html>
<head>
<title>Sweetening up your Ethereum Development Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">美化您的以太坊开发环境</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/sweetening-up-your-ethereum-development-environment-db981588e94?source=collection_archive---------4-----------------------#2018-07-24">https://medium.com/coinmonks/sweetening-up-your-ethereum-development-environment-db981588e94?source=collection_archive---------4-----------------------#2018-07-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/3d9b11a9878e64753e05f8b4970b75f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AsEZFBHATd4fGKfdWCULjQ.jpeg"/></div></div></figure><p id="1d62" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这里有一些插件和小发明，可以让你的以太坊发展到一个全新的水平</p><h2 id="2c79" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">背景</h2><p id="28b4" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">不久前，当我还是以太坊开发新手时，我写了一个多部分系列。这是一个很棒的系列，它将带您从建立一个本地私有2节点网络一直到在Heroku上部署一个web3 react dApp。对你们感兴趣的人来说，这个系列在下面:</p><p id="52ac" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><a class="ae kz" rel="noopener" href="/@cipherz/super-simple-ethereum-part-1-7e363dbc1c65">第一部分</a>、<a class="ae kz" rel="noopener" href="/@cipherz/super-simple-ethereum-part-2-6611721a391">第二部分</a>、<a class="ae kz" rel="noopener" href="/@cipherz/a-jedis-guide-to-ethereum-part-3-67007e1876f3">第三部分</a>、<a class="ae kz" rel="noopener" href="/@cipherz/a-jedis-guide-to-ethereum-part-3b-remix-1b8d98d909d4">第三部分</a>、<a class="ae kz" rel="noopener" href="/@cipherz/a-jedis-guide-to-ethereum-part-4-web3-99d40af7346d">第四部分</a></p><p id="9352" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在我有了更多的经验，我想用我学到的一些技巧来给这个遗留项目增添一点甜蜜。</p><h2 id="c36a" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">甜蜜</h2><p id="6851" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">我们会在你的松露酱中加入以下材料</p><ul class=""><li id="2d5a" class="la lb ht jd b je jf ji jj jm lc jq ld ju le jy lf lg lh li dt translated">Solium  —一种坚固的林挺工具</li><li id="3f1f" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">一个无头的以太坊区块链</li><li id="d560" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank"> Husky </a> —运行预提交钩子的简单方法</li><li id="3d3e" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated"><a class="ae kz" href="https://travis-ci.com/" rel="noopener ugc nofollow" target="_blank"> Travis </a> —一个<strong class="jd hu"> CI </strong> ( <em class="lo">持续集成</em>)服务器</li><li id="4dbf" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">Heroku——网络应用托管平台</li><li id="6bdf" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">一个连接到各种以太坊链(mainnet，kovan等)的网络服务</li></ul><h2 id="7d75" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">最终游戏</h2><p id="c11d" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">在本文结束时，您应该已经为您的dApp增加了以下功能</p><ul class=""><li id="ff41" class="la lb ht jd b je jf ji jj jm lc jq ld ju le jy lf lg lh li dt translated">编译、lint+修复和测试代码的预提交挂钩</li><li id="62a4" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">一个CI流程，用于构建、测试和部署新的智能合同到链中</li><li id="45b9" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">为Heroku构建和部署最新dApp代码的CI流程</li></ul><p id="c423" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是一个非常棒的堆栈，可以自动运行<em class="lo"/>，并允许我们专注于实际的dApp开发，而不是devOps。</p></div><div class="ab cl lp lq hb lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hm hn ho hp hq"><h1 id="f1c2" class="lw ka ht bd kb lx ly lz kf ma mb mc kj md me mf km mg mh mi kp mj mk ml ks mm dt translated">发展环境</h1><p id="ffc5" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">我们将为我们的本地开发环境设置一些检查，以保持我们的一致性，并防止将垃圾签入我们的项目。</p><p id="d7b5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">注意，需要将项目根目录下的<em class="lo"> .env.example </em>复制到<em class="lo">中。env </em>并使用您的实际值填充变量，这样就可以工作了。参见https://github.com/motdotla/dotenv的<a class="ae kz" href="https://github.com/motdotla/dotenv" rel="noopener ugc nofollow" target="_blank"/></p><h2 id="62c7" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">强壮的</h2><p id="93cb" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">对于我们来说，Husky 是一种执行预提交挂钩的简单方法，当我们试图向git repo添加新的提交时，它会为我们运行某些检查。让我们先安装模块。</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="838c" class="jz ka ht ms b fv mw mx l my mz">npm i husky</span></pre><p id="b358" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，让我们将预提交脚本添加到<em class="lo"> package.json </em>中，以保存我们所有的定制检查</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="f399" class="jz ka ht ms b fv mw mx l my mz">"precommit": "truffle compile",</span></pre><p id="576a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">注意，每次我们试图提交代码时，truffle编译脚本都会运行。</p><h2 id="6792" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">Solium</h2><p id="58f2" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">向你的项目添加Solium相当简单。首先，我们需要安装库</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="859b" class="jz ka ht ms b fv mw mx l my mz">npm i --save-dev solium</span></pre><p id="a88e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，我们需要定义几个文件，soli um<em class="lo">将使用这些文件来生成可靠性合同</em></p><p id="0a8a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建<em class="lo">。soliumignore项目根中的</em>文件如下</p><figure class="mn mo mp mq fq iu"><div class="bz el l di"><div class="na nb l"/></div></figure><p id="b1b9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在项目根目录下创建<em class="lo"> .soliumrc.json </em>文件，如下所示</p><figure class="mn mo mp mq fq iu"><div class="bz el l di"><div class="na nb l"/></div></figure><p id="8d7f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">将下面两行添加到package.json脚本中</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="fb59" class="jz ka ht ms b fv mw mx l my mz">"solium:lint:fix": "solium lint -d ./contracts --fix",</span><span id="b819" class="jz ka ht ms b fv nc mx l my mz">"solium:lint": "solium lint -d ./contracts",</span></pre><p id="28aa" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">编辑<em class="lo">预提交</em>脚本</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="9395" class="jz ka ht ms b fv mw mx l my mz">"precommit": "truffle compile &amp;&amp; npm run solium:lint:fix",</span></pre><h2 id="a29f" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">加纳切-CLI</h2><p id="5a22" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">使用ganache-cli，我们可以设置和拆除一个实际的以太坊链，以用于我们的测试。状态不会在会话之间持续，这使得它成为我们在干净的环境中运行所有测试的完美方式。让我们安装模块</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="414c" class="jz ka ht ms b fv mw mx l my mz">npm i ganache-cli</span></pre><p id="aeed" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在项目的根目录下创建以下两个文件</p><figure class="mn mo mp mq fq iu"><div class="bz el l di"><div class="na nb l"/></div></figure><p id="48f0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">将以下内容添加到package.json中</p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="097a" class="jz ka ht ms b fv mw mx l my mz">"testChain": "./startGanache.sh &amp;&amp; truffle test &amp;&amp; ./stopGanache.sh"</span></pre><p id="2e4e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">编辑你的<em class="lo">包中的<em class="lo">预提交</em>脚本</em></p><pre class="mn mo mp mq fq mr ms mt mu aw mv dt"><span id="cebc" class="jz ka ht ms b fv mw mx l my mz">"precommit": "truffle compile &amp;&amp; npm run solium:lint:fix &amp;&amp; npm run testChain",</span></pre><h2 id="0243" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">预期</h2><p id="65a1" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">太好了！现在，每当我们提交对回购协议的更改时，都会发生以下情况</p><ul class=""><li id="0d43" class="la lb ht jd b je jf ji jj jm lc jq ld ju le jy lf lg lh li dt translated">我们的合同将被整理</li><li id="7300" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">我们的合同代码将被检查林挺错误</li><li id="2497" class="la lb ht jd b je lj ji lk jm ll jq lm ju ln jy lf lg lh li dt translated">我们的合同将被部署到一个headless ganache实例并运行测试</li></ul></div><div class="ab cl lp lq hb lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hm hn ho hp hq"><h1 id="e28a" class="lw ka ht bd kb lx ly lz kf ma mb mc kj md me mf km mg mh mi kp mj mk ml ks mm dt translated">CI环境</h1><p id="8ec4" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">我们将配置我们的构建服务器(说“你好”，Travis)来运行与我们在本地预提交中运行的测试类似的测试，并将我们的dApp部署到Heroku。</p><p id="df1f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><em class="lo">注意，本文的重点是智能契约——而不是react代码。我们可以也应该轻松地构建/lint/测试react代码。</em></p><h2 id="4fe3" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">特拉维斯</h2><p id="1658" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">如果您在此处还没有账户，您需要创建一个Travis账户。</p><p id="36a7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，您需要授权Travis访问您的GitHub Repo，如下图所示:</p><figure class="mn mo mp mq fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nd"><img src="../Images/812eb7dbb24bc4c012b9fa960b9eeb23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HADZX2bIwz2LqJLmk5DxRQ.png"/></div></div></figure><p id="542b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在我们准备将配置文件<em class="lo"> .travis.yml </em>添加到我们的项目中，这是travis执行构建所需要的。将<em class="lo"> .travis.yml </em>添加到项目的根目录中，内容如下</p><figure class="mn mo mp mq fq iu"><div class="bz el l di"><div class="na nb l"/></div></figure><h2 id="0e8a" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">配置</h2><p id="d1cb" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">正如您在. travis.yml文件中看到的，我们有一些环境变量依赖关系。有多种方法可以设置env变量，但是在这种情况下，<em class="lo"> $HEROKU_API_KEY </em>值是敏感的，应该隐藏在任何输出日志中。我们可以设置这个参数，如下所示，在我们的项目特拉维斯主页</p><figure class="mn mo mp mq fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ne"><img src="../Images/6619b18a718603c2b16300cddb93961d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVa8IT50yKedR6VRsM1IOg.png"/></div></div></figure><p id="4ab7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个Travis构建将在分支被推送到repo、创建Pull请求以及Pull请求被合并到master时开始。</p><p id="ff5f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">注意，我们还设置了<em class="lo">$助记符_短语</em>和<em class="lo"> $INFURA_API_KEY </em>变量，因为我们在<em class="lo"> truffle.js </em>中的<em class="lo"> hd钱包提供者</em>设置中使用了它们</p><figure class="mn mo mp mq fq iu"><div class="bz el l di"><div class="na nb l"/></div></figure><h2 id="ad8c" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">赫罗库</h2><p id="1a75" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">travis构建脚本的<em class="lo"> deploy </em>指令需要来自您的<a class="ae kz" href="https://www.heroku.com" rel="noopener ugc nofollow" target="_blank"> Heroku </a>开发人员帐户的HEROKU _ API _ KEY。你必须添加一种支付方式，以便从特拉维斯部署，但我相信你每个月有1000个免费的动态小时，然后才开始收费(我这个月用了2个小时)</p><figure class="mn mo mp mq fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nf"><img src="../Images/db408f967751437b31fe699f75f0041d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v5jDBGDMy6-GcKsoFiHm5w.png"/></div></div></figure><h2 id="b214" class="jz ka ht bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">Infura</h2><p id="9b0b" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">你将需要一个Infura API密钥来使用他们的服务连接到以太坊链。这里有免费的<a class="ae kz" href="https://infura.io/register" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="mn mo mp mq fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ng"><img src="../Images/a8646ea6df6848d19530f0a22c75c8c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*87M_gZM1RaURrkLyB2bawg.png"/></div></div></figure></div><div class="ab cl lp lq hb lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hm hn ho hp hq"><h1 id="9252" class="lw ka ht bd kb lx ly lz kf ma mb mc kj md me mf km mg mh mi kp mj mk ml ks mm dt translated">摘要</h1><p id="9569" class="pw-post-body-paragraph jb jc ht jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">虽然以太坊开发生态系统与该领域的其他项目相比是最成熟的，但它仍然非常新——即使是在软件领域。上面的设置为您提供了一个<em class="lo">同类最佳的</em>开发堆栈，在您创建下一个改变世界的应用程序时，让您的dApp坚如磐石。我希望你喜欢这篇文章，并随时纠正我或提出问题。</p><p id="a243" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们的杰迪贝特·戴普在这里—<a class="ae kz" href="https://jedibet.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://jedibet.herokuapp.com/</a></p><p id="e2e2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">来源在这里—<a class="ae kz" href="https://github.com/cipherzzz/JediBetDapp" rel="noopener ugc nofollow" target="_blank">https://github.com/cipherzzz/JediBetDapp</a></p></div></div>    
</body>
</html>