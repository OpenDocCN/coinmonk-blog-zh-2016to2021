<html>
<head>
<title>Hyperledger Fabric By Example: Part 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">超分类帐结构示例:第4部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/hyperledger-fabric-by-example-part-4-f6b2e9e35842?source=collection_archive---------2-----------------------#2019-01-14">https://medium.com/coinmonks/hyperledger-fabric-by-example-part-4-f6b2e9e35842?source=collection_archive---------2-----------------------#2019-01-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="5519" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在联盟中加入新的组织。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/a9ecfbbdd54afb3323f2ad30d6fff136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aotDxnp7SJwXZ1JGuQOwqA.jpeg"/></div></div></figure><p id="e831" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文是以<a class="ae ka" rel="noopener" href="/@johntucker_48673/hyperledger-fabric-by-example-part-1-758547e9fb04"><em class="kb">Hyperledger Fabric By Example:Part 1</em></a>开始的系列文章的一部分。</p><p id="c11a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们继续构建我们的网络，同时引入新概念，如概念性的<em class="kb">Hyperledger Fabric block chain Network</em>文档中的<a class="ae ka" href="https://hyperledger-fabric.readthedocs.io/en/latest/network/network.html#adding-network-administrators" rel="noopener ugc nofollow" target="_blank"> <em class="kb">添加网络管理员</em> </a> <em class="kb"> </em>和<a class="ae ka" href="https://hyperledger-fabric.readthedocs.io/en/latest/network/network.html#defining-a-consortium" rel="noopener ugc nofollow" target="_blank"> <em class="kb">定义联盟</em> </a> <em class="kb"> </em>部分所述(<strong class="is hu">请在继续</strong>之前阅读这些部分)。</p><p id="9547" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">财团</strong></p><p id="4de2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们遇到的第一个新概念是<strong class="is hu">财团</strong>:</p><blockquote class="kc kd ke"><p id="1019" class="iq ir kb is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">联盟是区块链网络上非订购者组织的集合。这些是形成和加入渠道并拥有同行的组织。一个区块链网络可以有多个财团，而大多数区块链网络只有一个财团。在创建渠道时，所有添加到渠道的组织都必须是联盟的一部分。但是，未在联盟中定义的组织可以添加到现有渠道中。</p></blockquote><p id="b41d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb"> —总账结构— </em> <a class="ae ka" href="https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html" rel="noopener ugc nofollow" target="_blank"> <em class="kb">术语表</em> </a></p><p id="c3b5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我们的示例网络中，我们定义了一个联合体<em class="kb"> SampleConsortium </em>，它包含了<em class="kb"> Org1MSP </em>和<em class="kb"> Org2MSP </em>组织:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff ki"><img src="../Images/19d1a92d1203ad2fdce4ee68ec8b06ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VxA0ruubhJg6Fh7nYT1OoQ.png"/></div></div></figure><p id="921a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与创建<em class="kb"> OrderOrg </em>组织的方式非常相似，我们在一个配置文件中定义新的组织(和联合体);添加到我们之前的配置文件中:</p><p id="8908" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb">。/first-network/configtx . YAML</em></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="kj kk l"/></div></figure><p id="7383" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">和以前一样，使用这个配置文件，我们构建了<em class="kb"> genesis.block </em>文件；将用于引导orderer.example.com节点<em class="kb">。</em></p><pre class="jp jq jr js fq kl km kn ko aw kp dt"><span id="b4fb" class="kq kr ht km b fv ks kt l ku kv">configtxgen -profile TwoOrgsOrdererGenesis -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block</span></pre><p id="9188" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意</strong>:我们实际上不需要再次这样做，因为我们使用的是与上一篇文章相同的<em class="kb"> configtx.yaml </em>文件；配置文件需要联合体。</p><p id="b6ec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">同行</strong></p><p id="fb3d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在配置<em class="kb"> Org1MSP </em>和<em class="kb"> Org2MSP </em>时，我们滑入了对等体和锚对等体的概念:</p><p id="209a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">同行</strong>有:</p><blockquote class="kc kd ke"><p id="2672" class="iq ir kb is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">维护分类帐并运行链码容器以便对分类帐执行读/写操作的网络实体。对等体由成员拥有和维护。</p></blockquote><p id="308d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb"> —总账结构— </em> <a class="ae ka" href="https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html" rel="noopener ugc nofollow" target="_blank"> <em class="kb">词汇表</em> </a></p><p id="09a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">主播同行</strong>有:</p><blockquote class="kc kd ke"><p id="19c6" class="iq ir kb is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">由gossip用来确保不同组织中的同行相互了解。<br/> … <br/>由于跨组织的通信依赖于gossip才能正常工作，因此必须在通道配置中定义至少一个锚定对等体。强烈建议每个组织提供自己的一组锚定对等点，以实现高可用性和冗余。</p></blockquote><p id="a923" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb">—Hyperledger Fabric—</em><a class="ae ka" href="https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html" rel="noopener ugc nofollow" target="_blank"><em class="kb">词汇表</em> </a></p><p id="6871" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们更新<em class="kb"> Docker Compose </em>文件，以显示订购者的单个节点和四个对等节点:</p><p id="c07c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb">。/first-network/docker-compose-CLI . YAML</em></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="kj kk l"/></div></figure><p id="1c02" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">哪个引用了这个<em class="kb"> Docker编写的</em>文件:</p><p id="24ad" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb">。/first-network/base/docker-compose-base . YAML</em></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="kj kk l"/></div></figure><p id="2042" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">哪个引用了这个<em class="kb"> Docker编写的</em>文件:</p><p id="e510" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kb">。/first-network/base/peer-base . YAML</em></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="kj kk l"/></div></figure><p id="c207" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="4af4" class="kw kx ht is b it iu ix iy jb ky jf kz jj la jn lb lc ld le dt translated">找不到关于<em class="kb">超级分类帐/结构对等</em>映像的文档。</li></ul><p id="6dd8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因为我们想要开始新的<em class="kb"> Docker </em>图像，所以我们停下来，删除我们之前创建的图像:</p><pre class="jp jq jr js fq kl km kn ko aw kp dt"><span id="dfc8" class="kq kr ht km b fv ks kt l ku kv">docker stop $(docker ps -aq)<br/>docker rm $(docker ps -aq)</span></pre><p id="4a1d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如前所述，我们提出了网络:</p><pre class="jp jq jr js fq kl km kn ko aw kp dt"><span id="ec80" class="kq kr ht km b fv ks kt l ku kv">docker-compose -f docker-compose-cli.yaml up</span></pre><p id="e263" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">通过运行:</p><pre class="jp jq jr js fq kl km kn ko aw kp dt"><span id="b897" class="kq kr ht km b fv ks kt l ku kv">docker ps</span></pre><p id="1228" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以看到我们有五个容器:</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff lf"><img src="../Images/0e0c7289933ac2a0d9357d94560af4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDdHw83xp-w5MCrjrWH0Fg.png"/></div></div></figure><p id="6fa8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">下一步</strong></p><p id="bf56" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在下一篇文章中，<a class="ae ka" rel="noopener" href="/@johntucker_48673/hyperledger-fabric-by-example-part-5-67b8185078f2"><em class="kb">【Hyperledger Fabric By Example:Part 5</em></a><em class="kb"/><strong class="is hu">(编写中)</strong>，随着我们网络的扩展，我们不断引入新概念。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff lg"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a></figure><blockquote class="lh"><p id="fd1f" class="li lj ht bd lk ll lm ln lo lp lq jn ek translated"><a class="ae ka" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ls lt lu lv lw jt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lr"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>