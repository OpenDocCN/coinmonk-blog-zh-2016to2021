<html>
<head>
<title>Create an Ethereum Wallet in iOS — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在iOS中创建以太坊钱包—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/create-an-ethereum-wallet-in-ios-part-1-1e2f215226b7?source=collection_archive---------0-----------------------#2020-07-01">https://medium.com/coinmonks/create-an-ethereum-wallet-in-ios-part-1-1e2f215226b7?source=collection_archive---------0-----------------------#2020-07-01</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/a86881ed1b4238f53dcd490ea24d0876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFmo4BiW-DGQcZ88J74L1A.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Photo by <a class="ae jf" href="https://unsplash.com/@launchpresso?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Launchpresso</a> on <a class="ae jf" href="https://unsplash.com/s/photos/blockchain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5272" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如今，区块链变得越来越受欢迎，在这十年中涌现了许多创业公司和应用程序。传统银行正试图引入区块链技术，并谨防失去营销机会。</p><p id="4358" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在开始创建以太坊钱包之前，最好了解以太坊、POW/POS、智能合约等的基本工作流程。这里有一些参考资料可以帮助你赶上。</p><div class="ke kf fm fo kg kh"><a href="https://www.investopedia.com/terms/b/blockchain.asp" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">区块链解释</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">一本帮助你理解什么是区块链以及工业如何利用它的指南。你可能遇到过…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">www.investopedia.com</p></div></div><div class="kq l"><div class="kr l ks kt ku kq kv iz kh"/></div></div></a></div></div><div class="ab cl kw kx hb ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hm hn ho hp hq"><p id="acd1" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">区块链系统中的机制有一些不同的概念，例如，帐户创建，你不必上传你的帐户信息到任何服务器，你需要的是生成密钥并存储在你的本地机器中。一旦您将记录添加到分类帐，您的帐户信息将同步到分散分配系统。你只需要这把钥匙，用来查询所有的记录。</p><p id="ccf1" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我将在这篇文章中做以下事情，希望能帮助一些iOS工程师潜入<a class="ae jf" href="https://blog.coincodecap.com/what-is-blockchain-a-simple-guide-for-dummies/" rel="noopener ugc nofollow" target="_blank">区块链</a>的世界。</p><h1 id="f93b" class="ld le ht bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma dt translated">帐目</h1><p id="e87e" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated"><strong class="ji hu">加载现有账户</strong></p><ol class=""><li id="4245" class="mg mh ht ji b jj jk jn jo jr mi jv mj jz mk kd ml mm mn mo dt translated">输入帐户私钥的十六进制字符串</li><li id="fa96" class="mg mh ht ji b jj mp jn mq jr mr jv ms jz mt kd ml mm mn mo dt translated">输入12个单词的助记短语</li></ol><p id="fc00" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">生成、删除、导出账户</strong></p><h1 id="172f" class="ld le ht bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma dt translated">平衡</h1><p id="173f" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated"><strong class="ji hu">显示ETH、戴、余额</strong></p><p id="77e2" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">作为参考，您可以查看现有的wallet，如<a class="ae jf" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ji hu"><em class="mu">【meta mask】</em></strong></a>，它可以帮助您更快地了解它是如何工作的。</p><p id="bd96" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">此外，我将使用<a class="ae jf" href="https://www.rinkeby.io/#stats" rel="noopener ugc nofollow" target="_blank"><strong class="ji hu"><em class="mu">rinke by</em></strong></a>测试网络进行此演示。Rinkeby是基于以太坊的测试链。有几个以太坊testnet可以玩，比如<em class="mu"> Ropsten，Kovan，gorli等。</em></p></div><div class="ab cl kw kx hb ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hm hn ho hp hq"><h1 id="fd22" class="ld le ht bd lf lg mv li lj lk mw lm ln lo mx lq lr ls my lu lv lw mz ly lz ma dt translated">项目设置</h1><p id="0c80" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated">这个项目安装了Swift 5.1，并使用Cocoapods作为包管理器，如果你愿意，你可以随时更改为<em class="mu"> Carthage，</em>大多数区块链图书馆也支持Carthage。</p><h1 id="8de9" class="ld le ht bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma dt translated">图书馆</h1><p id="4e65" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated">该项目中使用了以下库:</p><p id="5b61" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu"><em class="mu">web 3s swift</em></strong></p><div class="ke kf fm fo kg kh"><a href="https://github.com/matter-labs/web3swift" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">matter-labs/web3swift</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">web3swift是您与以太网进行任何交互的工具箱。感谢您在……的所有支持</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">github.com</p></div></div><div class="kq l"><div class="na l ks kt ku kq kv iz kh"/></div></div></a></div><p id="1bd1" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">有几个类似的库也提供了访问以太坊账户的能力，例如</p><div class="ke kf fm fo kg kh"><a href="https://github.com/BANKEX/web3swift" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">BANKEX/web3swift</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">web3.js功能的快速实现通过JSON RPC与远程节点进行⚡交互💭智能合同ABI分析…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">github.com</p></div></div><div class="kq l"><div class="nb l ks kt ku kq kv iz kh"/></div></div></a></div><div class="ke kf fm fo kg kh"><a href="https://github.com/trustwallet/wallet-core" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">信任钱包/钱包-核心</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">Trust Wallet Core是一个跨平台的库，它实现了所有…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">github.com</p></div></div><div class="kq l"><div class="nc l ks kt ku kq kv iz kh"/></div></div></a></div><p id="85f9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Trust Wallet Core是一个非常好的库，它也为它提供了非常好的可读文档！</p><div class="ke kf fm fo kg kh"><a href="https://developer.trustwallet.com/wallet-core" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">钱包核心</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">Trust Wallet Core是一个跨平台的库，它实现了许多…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">developer.trustwallet.com</p></div></div><div class="kq l"><div class="nd l ks kt ku kq kv iz kh"/></div></div></a></div></div><div class="ab cl kw kx hb ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hm hn ho hp hq"><h1 id="9002" class="ld le ht bd lf lg mv li lj lk mw lm ln lo mx lq lr ls my lu lv lw mz ly lz ma dt translated"><strong class="ak">生成账户</strong></h1><p id="27bd" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated">首先，让我们生成帐户:</p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="aeba" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">func</strong> createAccount(name: String) <strong class="nj hu">throws</strong> -&gt; Web3Wallet {</span><span id="bbda" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> mnemonicsString = <strong class="nj hu">try </strong>BIP39.generateMnemonics(bitsOfEntropy: bitsOfEntropy) <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noMnemonics }</span><span id="0e5c" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> keystore = <strong class="nj hu">try</strong> BIP32Keystore(mnemonics: mnemonicsString, password: password, mnemonicsPassword: "", language: .english) <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noKeyStore }</span><span id="08dd" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> address = keystore.addresses?.first?.address <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noAddress }</span><span id="542b" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> keyData = <strong class="nj hu">try</strong> JSONEncoder().encode(keystore.keystoreParams)</span><span id="806f" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> mnemonics = mnemonicsString.split(separator: " ").map(String.init)</span><span id="3fac" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">return</strong> Web3Wallet(address: address, data: keyData, name: name, type: .hd(mnemonics: mnemonics))</span><span id="1567" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="f1b8" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">BIP39是最常见的seed短语标准，seed短语包括存储追回区块链基金所需的所有信息的单词列表，有关更多详细信息，您可以查看本文:</p><div class="ke kf fm fo kg kh"><a href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki" rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">比特币/bips</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">BIP: 39层:应用程序标题:生成确定性密钥的助记码作者:马雷克·帕拉蒂努斯·帕沃尔·鲁斯纳克…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">github.com</p></div></div><div class="kq l"><div class="nt l ks kt ku kq kv iz kh"/></div></div></a></div><p id="300f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这里有两种钱包，标准和高清<em class="mu">(分级确定性)</em>钱包。为了便于理解，在标准钱包中，用户必须保存私钥以与公钥配对，然后才能访问钱包。HD wallet是新时代的数字钱包，它可以自动生成私有/公共地址的分层树状结构。</p><p id="54a7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">简而言之，在这个演示中，高清钱包是有<strong class="ji hu">助记符</strong>的钱包，标准钱包有<strong class="ji hu">私钥</strong>。</p><div class="ke kf fm fo kg kh"><a href="https://www.investopedia.com/terms/h/hd-wallet-hierarchical-deterministic-wallet.asp#:~:text=An%20HD%20Wallet%2C%20or%20Hierarchical,generate%20them%20on%20their%20own." rel="noopener  ugc nofollow" target="_blank"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">分层确定性钱包—高清钱包</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">一个高清钱包，或分层确定性钱包，是一个新时代的数字钱包，自动生成…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">www.investopedia.com</p></div></div><div class="kq l"><div class="nu l ks kt ku kq kv iz kh"/></div></div></a></div><p id="98b0" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以下是我用过的钱包模型:</p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="6633" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">struct</strong> Web3Wallet: Equatable {</span><span id="ffdc" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> address: String</span><span id="5449" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> data: Data</span><span id="4442" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> name: String</span><span id="1202" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> type: WalletType</span><span id="2060" class="nn le ht nj b fv ns np l nq nr">}</span><span id="9569" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">enum</strong> WalletType: Equatable {</span><span id="b070" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">case</strong> normal</span><span id="b5eb" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">case</strong> hd(mnemonics: [String])</span><span id="82d7" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="e860" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">首先，我生成<strong class="ji hu">助记符</strong>并从中获取密钥库，这里有地址和</p><p id="8258" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">创建帐户/钱包实际上只是生成私钥或助记符，它不需要上传到任何地方。</p><p id="e7b6" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然而，这意味着你必须小心谨慎地保存好私人密钥或助记符，一旦你丢失了它，帐户将永远无法恢复😟。此外，如果有人得到你的钥匙，他/她可以访问你的帐户，无论他们喜欢什么，你不能向任何人寻求帮助。</p><h1 id="11bc" class="ld le ht bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma dt translated"><strong class="ak">导入账户</strong></h1><p id="0a31" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated">接下来，我们可以通过助记符或私钥恢复帐户，这取决于您想要恢复哪个钱包。</p><p id="fd5f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">通过私钥:</strong></p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="7202" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">func</strong> importAccount(by privateKey: String, name: String) <strong class="nj hu">throws</strong> -&gt; Web3Wallet {</span><span id="1365" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> formattedKey = privateKey.trimmingCharacters(in: .whitespacesAndNewlines)</span><span id="9119" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> dataKey = Data.fromHex(formattedKey), <strong class="nj hu">let</strong> keystore = <strong class="nj hu">try</strong> EthereumKeystoreV3(privateKey: dataKey, password: password)<br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noKeyStore }</span><span id="fc6f" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> address = keystore.addresses?.first?.address <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noAddress }</span><span id="1627" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> keyData = <strong class="nj hu">try</strong> JSONEncoder().encode(keystore.keystoreParams)</span><span id="8461" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">return</strong> Web3Wallet(address: address, data: keyData, name: name, type: .normal)</span><span id="9718" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="b4a0" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">按助记符:</strong></p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="1dff" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">func</strong> importAccount(by mnemonics: [String], name: String) <strong class="nj hu">throws</strong> -&gt; Web3Wallet {</span><span id="4dff" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> mnemonicsString = mnemonics.joined(separator: " ")</span><span id="1359" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> keystore = <strong class="nj hu">try</strong> BIP32Keystore(mnemonics: mnemonicsString, password: password, mnemonicsPassword: "", language: .english) <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noKeyStore }</span><span id="ec37" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> address = keystore.addresses?.first?.address <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noAddress }</span><span id="5267" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> keyData = <strong class="nj hu">try</strong> JSONEncoder().encode(keystore.keystoreParams)</span><span id="7a44" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">return</strong> Web3Wallet(address: address, data: keyData, name: name, type: .hd(mnemonics: mnemonics))</span><span id="06b3" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="6f0f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">之前提到过，高清钱包只能通过助记符导入。</p><p id="2b20" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">标准钱包使用私钥来创建密钥库，HD钱包使用助记符来生成密钥库以访问钱包信息。</p><h1 id="44a9" class="ld le ht bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma dt translated">导出帐户</h1><p id="b4d5" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated">根据不同种类的钱包，导出的数据是不同的。HD钱包，用户将收到<em class="mu">助记符</em>以备将来使用，而标准钱包是<em class="mu">私钥</em>代替。</p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="0c79" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">func</strong> exportAccount(wallet: Web3Wallet) <strong class="nj hu">throws</strong> -&gt; ExportedType {</span><span id="ce95" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> keyStoreManager = <strong class="nj hu">try</strong> fetchKeyStoreManager(wallet: wallet)</span><span id="e76a" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> ethereumAddress = EthereumAddress(wallet.address) <br/><strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noAddress }</span><span id="1374" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">let</strong> key = <strong class="nj hu">try</strong> keyStoreManager.UNSAFE_getPrivateKeyData(password: password, account: ethereumAddress).toHexString()</span><span id="6180" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">switch</strong> wallet.type {</span><span id="ff72" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">  case</strong> .normal: <strong class="nj hu">return</strong> .privateKey(key: key)</span><span id="3ab5" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">  case</strong> .hd(<strong class="nj hu">let</strong> mnemonics): <strong class="nj hu">return</strong> .mnemonics(mnemonics: mnemonics, key: key)</span><span id="f954" class="nn le ht nj b fv ns np l nq nr">  }</span><span id="28a6" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="8d48" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">下面是我使用的导出类型:</p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="d951" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">enum</strong> ExportedType {</span><span id="a2e1" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">case</strong> privateKey(key: String)</span><span id="84a3" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">case</strong> mnemonics(mnemonics: [String], key: String)</span><span id="daf7" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="dcb7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">分解代码，首先，我们需要根据钱包类型获取密钥库管理器:</p><pre class="ne nf ng nh fq ni nj nk nl aw nm dt"><span id="0350" class="nn le ht nj b fv no np l nq nr"><strong class="nj hu">func</strong> fetchKeyStoreManager(wallet: Web3Wallet) <strong class="nj hu">throws</strong> -&gt; KeystoreManager {</span><span id="34da" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">switch</strong> wallet.type {</span><span id="ae5a" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">case</strong> .normal:</span><span id="9719" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> keystore = EthereumKeystoreV3(wallet.data) <strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noKeyStore }</span><span id="2c73" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">return</strong> KeystoreManager([keystore])</span><span id="45c7" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">case</strong> .hd:</span><span id="a070" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">guard</strong> <strong class="nj hu">let</strong> keystore = BIP32Keystore(wallet.data) <strong class="nj hu">else</strong> { <strong class="nj hu">throw</strong> Web3ServiceError.noKeyStore }</span><span id="4fb1" class="nn le ht nj b fv ns np l nq nr"><strong class="nj hu">return</strong> KeystoreManager([keystore])</span><span id="ca7c" class="nn le ht nj b fv ns np l nq nr">}</span><span id="7d02" class="nn le ht nj b fv ns np l nq nr">}</span></pre><p id="cebd" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Standard one需要<strong class="ji hu"> EthereumKeystore </strong>，HD wallet需要<strong class="ji hu"> BIP32Keystore，</strong>然后使用这个Keystore和地址来获得私钥。</p><p id="a6b3" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">理论上，从私钥中恢复一个短语是不可能的。在此演示中，助记符存储在安全的本地数据库中，更好的方法是要求用户输入密码，并使用用户密码加密种子短语，然后将其保存在密钥库中。</p><h1 id="197d" class="ld le ht bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma dt translated">删除帐户</h1><p id="7fb9" class="pw-post-body-paragraph jg jh ht ji b jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz mf kb kc kd hm dt translated">实际上，一旦账户信息有了记录，就没有办法删除，这是区块链的主要目的之一</p><blockquote class="nv"><p id="2fa4" class="nw nx ht bd ny nz oa ob oc od oe kd ek translated"><strong class="ak">无法改变的</strong></p></blockquote><p id="ef6b" class="pw-post-body-paragraph jg jh ht ji b jj of jl jm jn og jp jq jr oh jt ju jv oi jx jy jz oj kb kc kd hm dt translated">我在这里做的，只是简单地删除我为这个帐户存储的地址，如果用户想再次访问这个帐户，必须再次导入它😅</p></div><div class="ab cl kw kx hb ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hm hn ho hp hq"><p id="dab5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是第一部分的全部内容，在第二部分，我将演示如何从以太坊测试网获得<strong class="ji hu">以太</strong>、<strong class="ji hu">戴、</strong>和<strong class="ji hu">的天平。</strong></p><div class="ke kf fm fo kg kh"><a rel="noopener follow" target="_blank" href="/coinmonks/create-an-ethereum-wallet-in-ios-part-2-9cb9baabfd8c"><div class="ki ab ej"><div class="kj ab kk cl cj kl"><h2 class="bd hu fv z el km eo ep kn er et hs dt translated">在iOS中创建以太坊钱包—第2部分</h2><div class="ko l"><h3 class="bd b fv z el km eo ep kn er et ek translated">关于第二部分已经推迟了一段时间，我在过去的6个月里一直很忙，所以让我们直接进入…</h3></div><div class="kp l"><p class="bd b gc z el km eo ep kn er et ek translated">medium.com</p></div></div><div class="kq l"><div class="ok l ks kt ku kq kv iz kh"/></div></div></a></div><p id="e8fd" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">希望这篇文章能帮助初学区块链的iOS工程师加入这项酷而神奇的技术🤩</p><p id="81a0" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">本文中可能仍有一些不正确的地方，欢迎指正或与我讨论！</p><p id="0f12" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果你觉得这篇文章有帮助，别忘了给我点掌声。</p><p id="af8b" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">快乐编码，享受区块链技术🙂</p><blockquote class="ol om on"><p id="ee4f" class="jg jh mu ji b jj jk jl jm jn jo jp jq oo js jt ju op jw jx jy oq ka kb kc kd hm dt translated">如果你想联系我，请随时通过<br/> <a class="ae jf" href="https://twitter.com/calvinchangtw" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae jf" href="https://www.linkedin.com/in/calvin-chang-cc/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>联系我</p></blockquote><blockquote class="nv"><p id="a955" class="nw nx ht bd ny nz or os ot ou ov kd ek translated">另读:<a class="ae jf" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">最佳比特币硬件钱包</a></p></blockquote><figure class="ox oy oz pa pb iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ow"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>