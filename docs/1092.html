<html>
<head>
<title>How to fix CORS Web Server error</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复CORS网络服务器错误</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-fix-cors-web-server-error-6c2c55938f95?source=collection_archive---------0-----------------------#2018-07-20">https://medium.com/coinmonks/how-to-fix-cors-web-server-error-6c2c55938f95?source=collection_archive---------0-----------------------#2018-07-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><blockquote class="iq ir is"><p id="9874" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated"><strong class="iw hu"> Clojure网络服务器</strong></p></blockquote><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff js"><img src="../Images/6c005d4a0714592ff6dfea1da1af6e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qabE0XcSQPNA7Q-K00_Q4Q.jpeg"/></div></div></figure><p id="0559" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">跨源资源共享(<a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Glossary/CORS" rel="noopener ugc nofollow" target="_blank"> CORS </a>)是一种机制，它使用额外的<a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP" rel="noopener ugc nofollow" target="_blank"> HTTP </a>报头来告诉浏览器，让在一个源(域)上运行的web应用程序有权访问来自不同源的服务器的选定资源。当一个web应用程序请求一个不同来源(域、协议和端口)的资源时，它会发出一个<strong class="iw hu">跨来源HTTP请求</strong>。</p><p id="b19a" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">在本文中，我将展示如何在我的例子中修复Clojure后端web服务器和Angular web应用程序前端之间的<code class="eh ki kj kk kl b">Access-Control-Allow-Origin</code>错误。</p><blockquote class="iq ir is"><p id="0b56" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated"><strong class="iw hu">什么是Clojure？</strong></p></blockquote><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div class="fe ff km"><img src="../Images/be290c1b77282727c1f0a5c585c59268.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*UW5b4MwwetvcIvgR7u2R5A.png"/></div></figure><p id="7c1d" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">Clojure是一种动态的通用编程语言，将脚本语言的易用性和交互式开发与多线程编程的高效且健壮的基础设施结合在一起。Clojure是一种编译语言，但仍然是完全动态的——clo jure支持的每个特性在运行时都是受支持的。Clojure提供了对Java框架的简单访问，带有可选的类型提示和类型推断，以确保对Java的调用可以避免反射。</p><p id="3bc6" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">Clojure是Lisp的一种方言，与Lisp共享代码作为数据的理念和强大的宏系统。Clojure主要是一种函数式编程语言，具有丰富的不可变的持久数据结构。当需要可变状态时，Clojure提供了软件事务内存系统和反应式代理系统，确保干净、正确的多线程设计。</p><blockquote class="iq ir is"><p id="4e35" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated"><strong class="iw hu">什么是服务器？【简单英语】</strong></p></blockquote><p id="c684" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">服务器只是一台具有更高性能(处理速度和存储能力)的计算机，它存储各种类型的信息或数据。然后将这些数据或信息提供给连接到互联网的其他计算机。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff kn"><img src="../Images/860b8f8701dbb894eebcd99c6563ecc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Vj2KQv6c4pfx_xkkRnBZg.jpeg"/></div></div></figure><p id="bcad" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">个人文件和数据存储在个人电脑中。服务器可能会存储构成网站、数据库的文件以及其他需要共享的数据。虽然个人计算机可能会被打开和关闭，但服务器始终保持运行，以确保数据的可用性(数据或网站始终可供用户使用和访问)。</p><p id="e041" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">个人计算机被设计用于人与计算机的联系(输入/输出接口、图形用户界面等)，服务器被设计用于计算机与计算机的联系。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff ko"><img src="../Images/630ed2afde9c6167f52356c87558f86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVvOV3NG6Hq2siXtrFYJwg.png"/></div></div></figure><p id="5448" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">虽然几乎任何满足最低硬件要求的<strong class="iw hu">电脑</strong>都可以运行<strong class="iw hu">服务器</strong>操作系统，但仅此一点并不能使台式<strong class="iw hu">电脑</strong>成为真正的<strong class="iw hu">服务器</strong>。相反，<strong class="iw hu">服务器</strong>管理所有网络资源。<strong class="iw hu">服务器</strong>通常是专用的(意味着除了<strong class="iw hu">服务器</strong>任务之外，它不执行其他任务)。</p><blockquote class="iq ir is"><p id="1a8b" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated"><strong class="iw hu">网络服务器</strong>是指专用于运行所述软件的服务器软件或硬件，可以向万维网提供内容。web服务器通过HTTP协议处理传入的网络请求。</p></blockquote></div><div class="ab cl kp kq hb kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hm hn ho hp hq"><h1 id="b436" class="kw kx ht bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt dt translated">如何将环形中间件CORS添加到基于环形适配器jetty的项目中？</h1><p id="cebf" class="pw-post-body-paragraph it iu ht iw b ix lu iz ja jb lv jd je ke lw jh ji kf lx jl jm kg ly jp jq jr hm dt translated">如果您正在开发一个Clojure web服务器项目，那么当您试图从一台计算机而不是另一个域上的本地计算机访问您的API端点时，您肯定会遇到CORS错误。几周前，我用Clojure创建并安装了一个后端web服务器。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/433b430973229d24f91997b358ef76dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*4o-s-dHDsoZiYihzsZzosA.png"/></div></figure><p id="3056" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">我在我的Compojure API项目中使用了环形适配器jetty服务器。我将环中间件CORS添加到我的项目中。我将展示我是如何在我的项目中添加环中间件CORS的。</p><p id="b451" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">我的Clojure后端服务器在前端的<code class="eh ki kj kk kl b">localhost:3000</code>上运行，我的Angular web应用程序在前端的<code class="eh ki kj kk kl b">localhost:4200</code>上运行。这个概念是，点击前端web应用程序的一个按钮，一个<code class="eh ki kj kk kl b">POST — GET — DELETE</code>请求将被发送到后端的不同API端点，并执行适当的操作，包括添加、显示或删除在Web服务器上建立的数据库中的数据。</p><blockquote class="iq ir is"><p id="22df" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">然而，从我的前端发出的每个请求都会导致以下错误: <code class="eh ki kj kk kl b"><strong class="iw hu">No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://localhost:4200' is therefore not allowed access. The response had HTTP status code 404.</strong></code></p></blockquote><p id="90d2" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">有几种方法可以解决这个问题，有些人会在他们的chrome浏览器中添加一个CORS扩展，但当试图从不同的计算机或网络浏览器访问网络服务器时，问题仍然存在。修复这个错误的最好方法是在我的后端web服务器中定义适当的CORS。我通过在我的Compojure路由上添加包装器实现了这一点，如下所示:</p><figure class="jt ju jv jw fq jx"><div class="bz el l di"><div class="ma mb l"/></div></figure><p id="6a34" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">上面的代码是我的项目文件的中间件代码部分。在代码上，<strong class="iw hu"> allow-cross-origin </strong>是一个中间件函数，它允许来自浏览器的跨origin请求，并完成所有的功能。当浏览器试图从不同的域调用API时，它首先发出一个选项请求，以查看服务器的跨源策略。因此，在这个方法中，当发出选项请求时，我们返回它。</p><p id="bab7" class="pw-post-body-paragraph it iu ht iw b ix iy iz ja jb jc jd je ke jg jh ji kf jk jl jm kg jo jp jq jr hm dt translated">此外，对于非选项请求，我们只需要返回“Access-Control-Allow-Origin”头，否则浏览器将无法正确读取数据。以上注释都是基于Chrome的工作原理。</p><blockquote class="iq ir is"><p id="ceac" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">关于这个项目代码的更多细节，查看我的<a class="ae kh" href="https://github.com/YannMjl/web-server-clojure" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hu"> GitHub </strong> </a> <strong class="iw hu"> </strong>资源库。</p><p id="7905" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hm dt translated">如果你喜欢这篇文章，你可能也会喜欢“<a class="ae kh" rel="noopener" href="/coinmonks/how-to-deploy-an-angular-app-8db1af39f8c1"> <strong class="iw hu">如何部署Angular Web App </strong> </a>”</p></blockquote><blockquote class="mc"><p id="e4d9" class="md me ht bd mf mg mh mi mj mk ml jr ek translated">请给它一些掌声以示支持，并对我可能遗漏的内容发表评论。干杯！！！！</p></blockquote></div></div>    
</body>
</html>