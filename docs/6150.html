<html>
<head>
<title>Gas Optimization in Solidity: Variable Packaging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">固体中的气体优化:可变包装</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/gas-optimization-in-solidity-variable-packaging-cae85154f38?source=collection_archive---------3-----------------------#2021-11-20">https://medium.com/coinmonks/gas-optimization-in-solidity-variable-packaging-cae85154f38?source=collection_archive---------3-----------------------#2021-11-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/ffedc8418c4fca7ebbe30beb71a7cf1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wwF41fLiQT_IL6l8vYHqoA.jpeg"/></div></div></figure><p id="8083" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Smarts合同旨在实现经济自动化，它改变了我们的采购方式，并将继续普及，有朝一日将像智能手机一样普及。我真的相信这项技术，我对它的应用感到非常兴奋。</p><p id="4d2c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在过去的一个月里，我越来越多地学习如何在solidity中编写智能合约。现在我想分享一些学习材料，我觉得每个solidity开发者都需要成为defi项目的重要资产。在本讲座中，您不需要对这种语言非常精通，但是，您可以开始应用我在这里介绍的知识。您需要对这种语言有基本的了解，并能够编写基本的smarts合同。</p><p id="0534" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">但是什么是气体优化，为什么如此重要？</strong></p><p id="0d83" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">每次我们部署、签署或与智能合同互动时，我们都要花费大量精力。智能合同是一个自动化的过程，由于区块链是一个分散的系统，由许多不同角色的用户维护，该系统的一个很大的特点是为他们提供奖励。这种激励是这项技术吸引很多人的原因之一。</p><p id="d6dd" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">智能合约一旦部署在区块链上，就不能更改(是一段不可变的代码)，确保消耗尽可能少的汽油非常重要。由于这个软件运行在以太坊虚拟机上，我们必须知道后台是如何处理事情的。</p><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff jz"><img src="../Images/50ce7083d8f0c0efdc0120d3f3c6c943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8jlrOC7kfCWiZMD3PSqUw.png"/></div></div></figure><p id="e946" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在solidity中，当我们编写智能合同时，我们有不同的数据保存位置，我们将讨论的是存储。存储:这是所有契约状态变量驻留的地方。每次我们初始化、声明或重新赋值一个状态变量时，我们都要消耗汽油。所以我们必须小心处理状态变量以及如何处理它们。但更重要的是，我们必须注意var是如何打包的。</p><p id="f722" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">那么……为什么var包装如此重要？</strong></p><p id="4166" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们在存储槽中逐个槽地保存状态变量，每个槽有一个32字节等于256位的空间。当我们在存储上声明了一个uint 8(8位无符号整数)和一个uint 256(256位无符号整数)时，由于8和256 uint不能一起放在一个256位的槽上，我们的约定将占用2个槽，其中一个槽仅用于8位。最终，我们将消耗64位的空间。</p><p id="ba56" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">但更糟糕的是:当你有一个完整的插槽时，由于缺乏正确的var打包，你只有一个单元8<strong class="jd hu">以太坊虚拟机必须首先将其转换为uint256才能工作，这种转换需要更多的时间！</strong>我们可以把这个过程看成一个俄罗斯方块游戏来避免！让我解释一下:</p><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/795a89d546e7b3704227d110f049e39f.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/1*rD_EaElCro1XoF3B2Dvamw.png"/></div></figure><p id="e96f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这就像编码一样:</p><pre class="ka kb kc kd fq kf kg kh ki aw kj dt"><span id="5f7e" class="kk kl ht kg b fv km kn l ko kp">contract badPackaging {<br/> uint192 a;<br/> uint256 b;<br/>}</span></pre><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div class="fe ff kq"><img src="../Images/aadceb0ec3e8932321c66235fe69c366.png" data-original-src="https://miro.medium.com/v2/resize:fit:234/format:webp/1*7saz7UGFI4ilU_72mouKlQ.png"/></div></figure><p id="c30a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这就像编码一样:</p><pre class="ka kb kc kd fq kf kg kh ki aw kj dt"><span id="ab7f" class="kk kl ht kg b fv km kn l ko kp">contract badPackaging {<br/> uint248 c;<br/> uint256 d;<br/>}</span></pre><figure class="ka kb kc kd fq iu fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/a22c9dfe093b9cc5807b3937672efc41.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*DzUX96Q0iW4-yaDdl_eVOQ.png"/></div></figure><p id="9019" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这就像编码一样:</p><pre class="ka kb kc kd fq kf kg kh ki aw kj dt"><span id="2003" class="kk kl ht kg b fv km kn l ko kp">contract GoodPackaging {<br/>    uint8 a;<br/>    uint16 b;<br/>    uint88 c;<br/>    uint64 d;<br/>    uint40 e;<br/>    uint40 f;<br/>}</span></pre><p id="b8e2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我很高兴你已经看到了我的文章的结尾，我希望我个人的抽象可以帮助你编写节能智能合同。如果你喜欢这些内容，我邀请你关注我并继续学习！</p><blockquote class="ks"><p id="f4e2" class="kt ku ht bd kv kw kx ky kz la lb jy ek translated">加入Coinmonks <a class="ae lc" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae lc" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="6048" class="kk kl ht bd ld le lf lg lh li lj lk ll jm lm ln lo jq lp lq lr ju ls lt lu lv dt translated">也阅读</h2><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/leveraged-token-3f5257808b22"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">杠杆代币[多头代币]终极指南</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">杠杆化令牌是具有杠杆化风险敞口的ERC20令牌，不考虑保证金、要求、管理…</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a href="https://blog.coincodecap.com/crypto-exchange" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">最佳加密交易所| 2021年十大加密货币交易所</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">编辑描述</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">blog.coincodecap.com</p></div></div><div class="mi l"><div class="mo l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">2021年最佳加密借贷平台| 6大比特币借贷平台</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">获得比特币和其他加密货币的最佳贷款利率</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mp l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">2021年最佳免费加密交易机器人</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">2021年币安、比特币基地、库币和其他密码交易所的最佳密码交易机器人。四进制，位间隙…</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mq l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">最佳4个加密交易信号电报通道</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">这是乏味的找到正确的加密交易信号提供商。因此，在本文中，我们将讨论最好的…</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mr l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a href="https://blog.coincodecap.com/best-social-trading-platforms" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">5个最佳社交交易平台[2021] | CoinCodeCap</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">编辑描述</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">blog.coincodecap.com</p></div></div></div></a></div><div class="lw lx fm fo ly lz"><a href="https://blog.coincodecap.com/blockfi-review" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">BlockFi评论2021:利弊和利率| CoinCodeCap</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">编辑描述</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">blog.coincodecap.com</p></div></div><div class="mi l"><div class="ms l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">如何在印度购买比特币？2021年购买比特币的7款最佳应用[手机版]</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">如何使用移动应用程序购买比特币印度</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mt l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">加密税务软件——五大最佳比特币税务计算器[2021]</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">不管你是刚接触加密还是已经在这个领域呆了一段时间，你都需要交税。</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mu l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a href="https://blog.coincodecap.com/best-hardware-wallet-bitcoin" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">存储比特币的最佳加密硬件钱包[2021] | CoinCodeCap</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">编辑描述</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">blog.coincodecap.com</p></div></div><div class="mi l"><div class="mv l mk ml mm mi mn iz lz"/></div></div></a></div><div class="lw lx fm fo ly lz"><a rel="noopener follow" target="_blank" href="/coinmonks/pionex-review-exchange-with-crypto-trading-bot-1e459d0191ea"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hu fv z el me eo ep mf er et hs dt translated">Pionex评论2021 |免费加密交易机器人和交换</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">Pionex是为交易自动化提供工具的后起之秀。Pionex上提供了9个加密交易机器人…</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">medium.com</p></div></div><div class="mi l"><div class="mw l mk ml mm mi mn iz lz"/></div></div></a></div></div></div>    
</body>
</html>