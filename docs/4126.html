<html>
<head>
<title>Ethereum under the hood- Part 7( Blocks )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引擎盖下的以太坊第七部分(积木)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereum-under-the-hood-part-7-blocks-c8a5f57cc356?source=collection_archive---------2-----------------------#2021-03-01">https://medium.com/coinmonks/ethereum-under-the-hood-part-7-blocks-c8a5f57cc356?source=collection_archive---------2-----------------------#2021-03-01</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="c60d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">欢迎回来，新年快乐。很高兴你还和我一起探索以太坊的内部。在第六章中，我们讨论了<a class="ae jo" rel="noopener" href="/@derao512/ethereum-under-the-hood-part-6-hashing-31077c7659ca"><strong class="is hu"/></a><strong class="is hu">；在</strong>这一节中，我们将深入讨论模块。Block是一个很大的主题，要在一篇中型文章中涵盖，所以我打算将Block分成2部分，第1部分的Block较短，所以在<strong class="is hu"> Block第1部分</strong>中，我们涵盖:</p><ol class=""><li id="f191" class="jp jq ht is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx dt translated">快速回顾</li><li id="4a7c" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx dt translated">阻碍</li><li id="ea46" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx dt translated">块标题</li><li id="3c6f" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx dt translated">摘要</li><li id="e0fb" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx dt translated">向前看。</li></ol><h1 id="708e" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">快速回顾:</h1><p id="7179" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">我们正在探索以太坊的旅程中稍微深入一点，但是停下来回顾一下我们到目前为止所学的东西是很好的，我已经创建了一个公共要点来刷新我们的集体记忆，对于这个概述，让我们集中在第3部分到第6部分。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lg"><img src="../Images/081724d04c0e76bc3e0d94c0e2a2ab08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMIVDtUltX0oUsCjoFoP3g.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="https://gist.github.com/deepakraous/d35635acc6d645494dba7203f1b525b5" rel="noopener ugc nofollow" target="_blank">Recap[ 3–6 ]</a></figcaption></figure><h1 id="f0f7" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">区块:</h1><p id="59f5" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">街区是区块链概念的核心；块是事务列表的历史记录保存者。这句话包含了大量的信息。以太坊和它的前身比特币一样，有区块链的概念，为了理解区块，我们将区块作为一种数据结构来处理。</p><p id="3168" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊黄皮书，它将一个区块定义为三个实体<strong class="is hu"> <em class="lw"> 1的集合。块标题2。交易列表3。Ommers List </em> </strong>，正式定义为:</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lx"><img src="../Images/d1b32464726dc99c35875e4bd1298989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WDX9vCk-H_ZjaHDLDG7i8g.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="https://ethereum.github.io/yellowpaper/paper.pdf" rel="noopener ugc nofollow" target="_blank">Section 4.3(Block)</a></figcaption></figure><p id="dac4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">块是一种类似的数据结构，具有一组经过验证的事务。</p><h1 id="574a" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">块标题:</h1><p id="2510" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">Blockheader，顾名思义是块的头，Block header由<strong class="is hu"> 15个不同的字段组成</strong>根据黄皮书，我尝试在一个电子表格中捕获它们，如下图所示:</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff ly"><img src="../Images/7e9dad2f67de0609069c3d9c4811b860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQYpfsx-SCjo8RoqwaZ84A.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="https://docs.google.com/spreadsheets/d/11keOrrjzdTiII0zL4TrGA0r7yZGQEzR3gdD74rFHdJg/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank"><em class="lz">Block Header-15 fields</em></a></figcaption></figure><p id="f4a2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些字段中的每一个都需要单独的一章，我们不会详细讨论这些字段中的每一个，但会集中讨论几个。我推荐看一看<a class="ae jo" rel="noopener" href="/coinmonks/ethereum-under-the-hood-part-4-the-trie-a3f71f8dbef8"><strong class="is hu"><em class="lw">Part-4(The trie)</em></strong></a>作为复习。现在回到块标题字段</p><p id="a9a0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> <em class="lw">括号</em> </strong>:该字段，顾名思义是指<em class="lw">该块</em>的父Keccak hash。字段大小将是256位<a class="ae jo" rel="noopener" href="/@derao512/ethereum-under-the-hood-part-6-hashing-31077c7659ca"> <strong class="is hu"> <em class="lw"> Keccak散列</em> </strong> </a>函数，主要是散列值指示<em class="lw">这个</em>块的直接父代，使用这种技术是以太坊如何将一个块链接到另一个块，形成块链。</p><p id="0782" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"><em class="lw">state root</em></strong><em class="lw">:</em>这是指状态trie(执行后)的集合的Keccak hash根，它发生在创建<em class="lw">这个块</em>，一个<em class="lw"> { key，value } </em>集合之后。只有一个全局状态，并且持续更新，每个块将具有状态trie DB的根散列。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff ma"><img src="../Images/30602b8642ddb590bcdd08b605eed17b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GTFR6vCTBofNuACBKQsFew.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="https://ethereum.stackexchange.com/questions/39915/ethereum-merkle-patricia-trie-extension-node" rel="noopener ugc nofollow" target="_blank">Ethereum Global state</a></figcaption></figure><pre class="lh li lj lk fq mb mc md me aw mf dt"><span id="b9fd" class="mg ke ht mc b fv mh mi l mj mk">Keys -&gt;  { Ethereum Address 160 bit }<br/>Values -&gt; { Nonce,Balance,StorageRoot,CodeHash }</span></pre><p id="99db" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"><em class="lw">Transaction root</em></strong><em class="lw">:</em>事务trie的根节点的Keccak Hash:该字段是指所有事务Trie的集合的Keccak hash root，自<em class="lw">该块</em>创建以来发生。</p><p id="e269" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"><em class="lw">ReceiptsRoot</em></strong><em class="lw">:</em>事务trie的根节点的Keccak hash:该字段是指所有事务Trie的集合的Keccak Hash根，自<em class="lw">该块</em>创建以来发生。收据(R)是一个由4个字段组成的<a class="ae jo" href="https://en.wikipedia.org/wiki/Tuple" rel="noopener ugc nofollow" target="_blank"> <em class="lw">元组</em> </a> <em class="lw"> </em>。以太坊黄皮书详细提到了收据根字段。收据字段是以下内容的集合</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff ml"><img src="../Images/27a759d39ec044b536851e484f72af6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qqiu1uNMe1idkpzIeXtUWg.png"/></div></div></figure><pre class="lh li lj lk fq mb mc md me aw mf dt"><span id="893c" class="mg ke ht mc b fv mh mi l mj mk">          | Description      | Symbol     |   <br/>          | :— — — — — - - -:|: — — — — -:| <br/>          | Total Gas Spent  | Ru         |<br/>          | Bloom Filter Root| Rb         | <br/>          | Logs of the Tran | Rl         | <br/>          | Status Code      | Rz         |</span></pre><p id="72ed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">黄皮书中详细描述的日志(<em class="lw"> Rl </em>)和布隆过滤器根(<em class="lw"> Rb </em>)字段；Bloom <a class="ae jo" href="https://en.wikipedia.org/wiki/Bloom_filter" rel="noopener ugc nofollow" target="_blank">过滤器</a>确实需要一个单独的部分，我计划在第8部分中讨论它们，但是现在，让我们把Bloom过滤器看作是一种可以帮助加快搜索结果速度的算法。</p><div class="mm mn fm fo mo mp"><a href="https://ethereum.stackexchange.com/questions/5888/relationship-between-transaction-trie-and-receipts-trie" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hu fv z el mu eo ep mv er et hs dt translated">交易Trie和收款Trie之间的关系</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">感谢为以太坊栈交换贡献一个答案！请务必回答问题。提供详细信息…</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">ethereum.stackexchange.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd lq mp"/></div></div></a></div><p id="d6e8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">下面是Elixir中以太坊块头的编码结构，我也提供了go代码库的链接。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff ne"><img src="../Images/49dd20643ea4ed40200c184d9ad79897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzoa374VYRTacQLvrflKnw.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="https://github.com/ethereum/go-ethereum/blob/master/core/blockchain.go" rel="noopener ugc nofollow" target="_blank">Ethereum Block header fields</a></figcaption></figure><h1 id="7234" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">块标题结构:</h1><p id="1123" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">看看这个来自卢卡斯·萨尔达尼亚的以太坊结构的出色的视觉表现，以及它与尝试的各种链接。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff nf"><img src="../Images/f42e0adb9f8191c0b3e825d3c8344c3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVvVSUIj4A9fmmVBNs4WhQ.png"/></div></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek"><a class="ae jo" href="https://www.lucassaldanha.com/ethereum-yellow-paper-walkthrough-2/" rel="noopener ugc nofollow" target="_blank"><strong class="bd ng">Source: Block Structure</strong></a></figcaption></figure><h1 id="e3cc" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">总结:</h1><ul class=""><li id="d7d7" class="jp jq ht is b it lb ix lc jb nh jf ni jj nj jn nk jv jw jx dt translated">块由块头和事务组成。</li><li id="5a25" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn nk jv jw jx dt translated">块头由15个字段组成。</li><li id="96b4" class="jp jq ht is b it jy ix jz jb ka jf kb jj kc jn nk jv jw jx dt translated">状态、交易、收据头字段具有指向根散列的指针。</li></ul><h1 id="8699" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">到:</h1><p id="5ee8" class="pw-post-body-paragraph iq ir ht is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hm dt translated">在<a class="ae jo" rel="noopener" href="/@derao512/ethereum-under-the-hood-part-8-blocks-2-8941d88014c0"> <strong class="is hu">下一个</strong> </a>第8节中，我们将继续探索区块，创世纪区块，以及区块验证，直到那时了解上。</p><h1 id="75b4" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">参考资料:</h1><div class="mm mn fm fo mo mp"><a href="https://ethereum.stackexchange.com/questions/31314/block-header-format/31317#31317" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hu fv z el mu eo ep mv er et hs dt translated">块标题格式</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">有人明白块头的每个元素代表什么吗？我这里有一个块标题示例…</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">ethereum.stackexchange.com</p></div></div><div class="my l"><div class="nl l na nb nc my nd lq mp"/></div></div></a></div><div class="mm mn fm fo mo mp"><a href="https://github.com/ethereum/go-ethereum/blob/master/core/types/block.go" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hu fv z el mu eo ep mv er et hs dt translated">以太坊/围棋以太坊</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">github.com</p></div></div><div class="my l"><div class="nm l na nb nc my nd lq mp"/></div></div></a></div><div class="mm mn fm fo mo mp"><a href="https://ethereum.stackexchange.com/questions/59203/what-exactly-does-the-m-function-in-the-formal-bloom-filter-specifications-do" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hu fv z el mu eo ep mv er et hs dt translated">正式的Bloom filter规范中的“m”函数到底是做什么的？</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">感谢为以太坊栈交换贡献一个答案！请务必回答问题。提供详细信息…</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">ethereum.stackexchange.com</p></div></div><div class="my l"><div class="nn l na nb nc my nd lq mp"/></div></div></a></div><div class="mm mn fm fo mo mp"><a href="https://ethereum.stackexchange.com/questions/61537/how-to-include-transations-in-genesis-block" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hu fv z el mu eo ep mv er et hs dt translated">如何在genesis块中包含事务</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">感谢为以太坊栈交换贡献一个答案！请务必回答问题。提供详细信息…</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">ethereum.stackexchange.com</p></div></div><div class="my l"><div class="no l na nb nc my nd lq mp"/></div></div></a></div></div></div>    
</body>
</html>