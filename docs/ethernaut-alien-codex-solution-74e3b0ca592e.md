# ä»¥å¤ªå¤–æ˜Ÿäººæ³•å…¸è§£å†³æ–¹æ¡ˆ

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/ethernaut-alien-codex-solution-74e3b0ca592e?source=collection_archive---------3----------------------->

[å¤–æ˜Ÿäººæ³•å…¸](https://ethernaut.zeppelin.solutions/level/0x73048cec9010e92c298b016966bde1cc47299df5)æ˜¯[å¦®å¯æœ±](https://medium.com/u/60cd0f45aab?source=post_page-----74e3b0ca592e--------------------------------)è®¾è®¡çš„ä»¥å¤ª 20 çº§ã€‚æœ¬æ–‡æå‡ºäº†æˆ‘çš„è§£å†³æ–¹æ¡ˆã€‚

![](img/541a1e601d8b525ffab46887294f0830.png)

**å‰§é€è­¦æŠ¥ã€‚å¦‚æžœä½ æƒ³è‡ªå·±è§£å†³ï¼Œè¯·ä¸è¦é˜…è¯»ä¸‹é¢çš„å†…å®¹ã€‚ä¸‹é¢çš„æ–‡æœ¬åŒ…å«å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚**

å…³å¡çš„ç›®æ ‡æ˜¯å£°æ˜Žå¥‘çº¦çš„æ‰€æœ‰æƒã€‚AlienCodex æ˜¯ä»Ž Ownable ç»§æ‰¿çš„ï¼Œå› æ­¤ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ‘ä»¬çš„åœ°å€è¦†ç›–å¥‘çº¦å­˜å‚¨ä¸­çš„`_owner`å˜é‡ã€‚
æ•´ä¸ªè§£å†³æ–¹æ¡ˆå¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ä»¥æŸç§æ–¹å¼å°†`contract`å˜é‡è®¾ç½®ä¸º true æ¥è®¿é—®å¥‘çº¦æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬å—åˆ°`contacted`ä¿®é¥°ç¬¦çš„ä¿æŠ¤ã€‚

# å°†è”ç³»äººè®¾ç½®ä¸º True

æ–¹æ³•`make_contact`å°†`contact`è®¾ç½®ä¸ºçœŸï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ£€æŸ¥`assert(_firstContactMessage.length > 2**200);`ã€‚æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¼ é€’é•¿åº¦å¤§äºŽ`2 ** 200`çš„`bytes32[]`æ•°ç»„ã€‚é—®é¢˜æ˜¯æ•°ç»„çš„å¤§å°æ˜¯å¦‚æ­¤ä¹‹å¤§ï¼Œä»¥è‡³äºŽæ²¡æœ‰æœºå™¨æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥å­˜å‚¨å®ƒã€‚å¦‚æžœæ‚¨å°è¯•è¿™æ ·åšï¼Œå®ƒä¼šä½¿æ‚¨çš„æœ¬åœ°èŠ‚ç‚¹å´©æºƒã€‚
èƒ½åšäº›ä»€ä¹ˆï¼Ÿæœ‰äººå¯èƒ½ä¼šé—®ã€‚ä¸€å¦‚æ—¢å¾€çš„ç»†èŠ‚é­”é¬¼ã€‚Solidity æ­¤æ—¶ä¸ä¼šç”ŸæˆéªŒè¯æœ‰æ•ˆè½½è·å¤§å°ä¸Žå£°æ˜Žé•¿åº¦çš„ä»£ç ã€‚æ¢å¥è¯è¯´ï¼Œå½“ä½ è°ƒç”¨ solidity æ–¹æ³•æ—¶ï¼Œä½ ä¼ é€’çš„æ˜¯æ•°ç»„å¤§å°ï¼Œè€Œä¸æ˜¯å®žé™…æœ‰æ•ˆè½½è·ã€‚

è®©æˆ‘ä»¬æ»¥ç”¨å®ƒã€‚

[çº¦å®š ABI](https://solidity.readthedocs.io/en/latest/abi-spec.html) è§„èŒƒå®šä¹‰äº†æˆ‘ä»¬åº”è¯¥å¦‚ä½•ä¸ºçº¦å®šè°ƒç”¨ç¼–ç æ•°æ®ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­`make_contact(bytes32[] _firstContactMessage)`ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªåŠ¨æ€å‚æ•°çš„å‡½æ•°ã€‚æ ¹æ®è§„èŒƒï¼Œæ•°æ®å‚æ•°å°†å…·æœ‰ä»¥ä¸‹ç»“æž„:

*   å‡½æ•°ç­¾åçš„ 4 å­—èŠ‚å“ˆå¸Œ
*   bytes32[]æ•°æ®éƒ¨åˆ†çš„ä½ç½®
*   bytes32[]æ•°ç»„çš„é•¿åº¦
*   å®žé™…æ•°æ®ã€‚

è®©æˆ‘ä»¬è®¡ç®—æ‰€æœ‰çš„å€¼ã€‚
å‡½æ•°ç­¾åçš„æ•£åˆ—å°†æ˜¯`web3.sha3('make_contact(bytes32[])')`ï¼Œè¿™å¯¼è‡´`0x1d3d4c0b6dd3cffa8438b3336ac6e7cd0df521df3bef5370f94efed6411c1a65`ã€‚æˆ‘ä»¬è¦å–å‰ 4 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥`0x1d3d4c0b`æˆ‘ä»¬æƒ³è¦çš„ç»“æžœã€‚
æ•°æ®çš„ä½ç½®ä»Žç­¾åçš„æ•£åˆ—å€¼åç§»ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒåªæœ‰ 32 ä¸ªå­—èŠ‚ï¼Œå› ä¸º ABI è§„èŒƒä¸­çš„é•¿åº¦æ˜¯ 32 ä¸ªå­—èŠ‚â€”`0x0000000000000000000000000000000000000000000000000000000000000020`ã€‚
æ•°ç»„çš„é•¿åº¦å¿…é¡»å¤§äºŽ`2**200`è®©æˆ‘ä»¬ç”¨`0x1000000000000000000000000000000000000000000000000000000000000000`å§ã€‚å®žé™…çš„æ•°æ®å®žé™…ä¸Šä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå› ä¸ºæˆ‘ä»¬è¿èƒŒäº†æ‰¿è¯ºï¼Œä¸ä¼šä¸ºæ•°ç»„æä¾›ä»»ä½•æ•°æ®ã€‚

æœ€ç»ˆæ•°æ®å°†æ˜¯

æœ€åŽï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨`make_contact`æ–¹æ³•å°†`contact`è®¾ç½®ä¸º trueâ€”â€”

`sendTransaction({to: contract.address, data: data, from: player, gas: 900000});`ã€‚

`await contract.contact()`çš„ç»“æžœåº”è¯¥å˜ä¸º`true`ã€‚

# ç”¨çŽ©å®¶å˜é‡è¦†ç›–æ‰€æœ‰è€…

ç”±äºŽ`contact`æ²¡æœ‰è¢«è®¾ç½®ä¸º`true`ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰è¢«`contacted`ä¿®é¥°ç¬¦ä¿æŠ¤çš„æ–¹æ³•ã€‚
ä¼¼ä¹Žæ²¡æœ‰åŠžæ³•ä¿®æ”¹`_owner`å˜é‡ï¼Œå› ä¸ºä¸å­˜åœ¨åˆ†é…å®ƒçš„ä»£ç ã€‚ä½†æ˜¯è¯·è®°ä½ï¼Œæ‰€æœ‰çŠ¶æ€å˜é‡éƒ½ä½äºŽåŒä¸€ä¸ªå­˜å‚¨è¿žç»­ä½“ä¸Šï¼Œå¯èƒ½ä¼šæˆä¸ºå†™å…¥é”™è¯¯çš„å—å®³è€…ã€‚
`revise`åŠŸèƒ½å¯ä»¥å°†ä»»ä½•å­˜å‚¨æ§½è®¾ç½®ä¸ºæˆ‘ä»¬æä¾›çš„ä»»ä½•å€¼ã€‚æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æžœæˆ‘ä»¬ç”¨ index > = length è°ƒç”¨å®ƒï¼Œå®ƒä¼šå¤±è´¥ã€‚
æ–¹æ³•`retract`æ²¡æœ‰æ£€æŸ¥ int ä¸‹æº¢ã€‚é€šè¿‡è°ƒç”¨å®ƒï¼Œæˆ‘ä»¬å°†æŠŠ`codex`çš„é•¿åº¦ä»Ž`0`æ”¹ä¸º`2**256 - 1`ã€‚EVM çš„å­˜å‚¨å¤§å°æ­£å¥½æ˜¯`2**256-1`ä¸ªæ§½çš„`32`å­—èŠ‚ã€‚æœ¬è´¨ä¸Šï¼Œé€šè¿‡å°†`codex`çš„é•¿åº¦è®¾ç½®ä¸º EVM å­˜å‚¨çš„é•¿åº¦ï¼Œæˆ‘ä»¬èŽ·å¾—äº†ä¿®æ”¹æ•´ä¸ª EVM å­˜å‚¨çš„ä»»ä½•æ’æ§½çš„èƒ½åŠ›ã€‚
æˆ‘ä»¬å¿…é¡»è®¡ç®—å‡º`_owner`å˜é‡åœ¨å­˜å‚¨å™¨ä¸Šçš„ä½ç½®ä»¥åŠåç§»é‡ç´¢å¼•ï¼Œä»¥ä¾¿ç”¨`revise`æ–¹æ³•å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚
`_owner`å˜é‡ä½äºŽåˆçº¦[å­˜å‚¨](https://programtheblockchain.com/posts/2018/03/09/understanding-ethereum-smart-contract-storage/)çš„ 0 sloã€‚Codex æ•°ç»„é•¿åº¦ä½äºŽ 1 ä¸ªå­˜å‚¨æ§½ã€‚è¿™æ˜¯å› ä¸º EVM ä¼˜åŒ–å­˜å‚¨å’Œåœ°å€ç±»åž‹å ç”¨ 20 å­—èŠ‚ï¼Œbool å ç”¨ 1 å­—èŠ‚ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½é€‚åˆä¸€ä¸ª 32 å­—èŠ‚æ§½ã€‚
çŽ°åœ¨æˆ‘ä»¬å¿…é¡»ä¸º`revise`æ–¹æ³•è®¡ç®—ç´¢å¼•`i`ã€‚æ ¹æ®åˆ†é…è§„åˆ™ï¼Œä½äºŽ`keccak256(bytes32(1))`çš„ EVM å­˜å‚¨å™¨ä¸Šçš„`codex`é˜µåˆ—çš„å¼€å§‹ã€‚å› æ­¤æˆ‘ä»¬çš„ç›®æ ‡ä½ç½®å°†æ˜¯`index = 2 ** 256 - uint(one);`ã€‚

è¿è¡ŒåŽè®¡ç®—ç»“æžœæ˜¯`35707666377435648211887908874984608119992236509074197713628505308453184860938`ã€‚
çŽ°åœ¨æˆ‘ä»¬ç»ˆäºŽå¯ä»¥è°ƒç”¨`revise`æ–¹æ³•äº†ã€‚

å› æ­¤`await contract.owner();`åº”è¯¥æ”¹æˆä½ çš„åœ°å€ã€‚æˆåŠŸï¼

# ç»“è®º

è¯¥çº§åˆ«å‘æˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•æ»¥ç”¨å¥‘çº¦ ABI æ¥ä¸ºå¥‘çº¦è°ƒç”¨ä¸­çš„åŠ¨æ€æ•°ç»„å‚æ•°æä¾›å‡é•¿åº¦ï¼Œä»¥åŠå¦‚ä½•æ»¥ç”¨å­˜å‚¨çš„åŠ¨æ€æ•°ç»„æ¥ç”¨æ‰€éœ€æ•°æ®è¦†ç›–å¥‘çº¦å­˜å‚¨å†…çš„ä»»ä½•ç‰‡æ®µã€‚

## å¦‚æžœè¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡»æ‹æ‰‹ðŸ‘æŒ‰é’®ä¸‹é¢å‡ ä¸‹ï¼Œä»¥ç¤ºæ”¯æŒï¼â¬‡â¬‡

# ç¤¾ä¼šçš„

*   åœ¨ [LinkedIn](https://www.linkedin.com/in/ylv-io/) ä¸Šä¸Žæˆ‘è”ç³»ã€‚
*   åœ¨[æŽ¨ç‰¹](https://twitter.com/ylv_io)ä¸Šå…³æ³¨æˆ‘ã€‚

# é˜…è¯»æ›´å¤š

[](https://hackernoon.com/how-to-create-and-deploy-your-own-eos-token-1f4c9cc0eca1) [## å¦‚ä½•åˆ›å»ºå’Œéƒ¨ç½²æ‚¨è‡ªå·±çš„ EOS ä»¤ç‰Œ

### æˆ‘ä»¬å°†å¼„æ¸…æ¥šä»€ä¹ˆæ˜¯ EOS ä»¤ç‰Œï¼Œä»¥åŠæ‚¨å¦‚ä½•è‡ªå·±åˆ›å»ºå’Œéƒ¨ç½²å®ƒã€‚

hackernoon.com](https://hackernoon.com/how-to-create-and-deploy-your-own-eos-token-1f4c9cc0eca1) [](https://hackernoon.com/how-much-does-it-costs-to-run-dapp-in-2018-87ee11fe1d5d) [## 2018 å¹´åŠž DApp è¦èŠ±å¤šå°‘é’±

### ä½ è®¤ä¸ºä½ çš„ AWS æˆ–ç½‘ç«™çš„æ•°å­—æµ·æ´‹è´¦å•æ­£åœ¨æ€æ­»ä½ å—ï¼Ÿ

hackernoon.com](https://hackernoon.com/how-much-does-it-costs-to-run-dapp-in-2018-87ee11fe1d5d) 

*æœ€åˆå‘è¡¨äºŽ* [*ylv.io*](https://ylv.io/p/8bada813-7700-4d34-ad30-04d19a71b802/) *ã€‚*

> [ç›´æŽ¥åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)