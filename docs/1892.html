<html>
<head>
<title>A Tutorial Introduction to Michelson &amp; Tezos, Part II: Hello Tezos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迈克尔逊&amp;泰佐斯教程介绍，第二部分:你好泰佐斯</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-tutorial-introduction-to-michelson-tezos-part-ii-hello-tezos-e0d247e1131f?source=collection_archive---------5-----------------------#2018-12-17">https://medium.com/coinmonks/a-tutorial-introduction-to-michelson-tezos-part-ii-hello-tezos-e0d247e1131f?source=collection_archive---------5-----------------------#2018-12-17</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="b8ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们知道了一点迈克尔逊，让我们看看特佐斯区块链，这是我们的迈克尔逊合约实际运行的“环境”。</p><p id="fc05" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这不会是对Tezos的详尽概述；我们将把重点放在从一个迈克尔逊程序员的角度来看最相关的那些方面。我们将会看到一些有用的工具，比如我们上一章安装的<code class="eh jo jp jq jr b">alphanet</code> docker容器中的<code class="eh jo jp jq jr b">tezos-client</code>程序和一个在线区块链浏览器。</p><p id="8286" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这些工具和Tezos本身一样，还不成熟，正在快速发展。在很大程度上，他们采用“信息转储”风格的用户界面，这对于Tezos核心开发人员来说很好，但对于新手来说可能会很难接受。出于本教程的目的，我们特别感兴趣的是如何用迈克尔逊编程，所以我们可以抽象出工具所暴露的更多细节，这些细节在其他情况下更相关，比如我们想经营一家面包店。其中一些细节将在以后的章节中更深入地讨论。</p><p id="bb30" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">目前，我们的目标是对如何使用当前的Tezos工具有一个基本的了解，目标是在下一章结束时，在Tezos alphanet上运行一个简单的Michelson契约并与之交互。</p><h1 id="87fc" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">Tezos区块链</h1><p id="1e93" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">在您的终端中，在上一章中安装alphanet容器的目录中，执行以下命令:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="a0b8" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh head</span></pre><p id="1eb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">假设节点正在运行(如果没有，用<code class="eh jo jp jq jr b">./alphanet.sh start</code>启动它)，它应该会输出如下内容:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="505c" class="ld jt ht jr b fv le lf l lg lh">Warning: </span><span id="f723" class="ld jt ht jr b fv li lf l lg lh">                   This is NOT the Tezos Mainnet.</span><span id="78b8" class="ld jt ht jr b fv li lf l lg lh">      The node you are connecting to claims to be running on the <br/>                 Tezos Alphanet DEVELOPMENT NETWORK. <br/>         Do NOT use your fundraiser keys on this network. <br/>         Alphanet is a testing network, with free tokens.</span><span id="1925" class="ld jt ht jr b fv li lf l lg lh">{ "protocol": "PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",    "chain_id": "NetXgtSLGNJvNye", <br/>"hash": "BLe9jhCFStAkeYVpp4Czuh1Kp18qKUq1v5XWasbm1MiBMT1LGAs", <br/>"level": 27750, "proto": 1, "predecessor": "BLcZcNKP6ETkC9QRku27VFhSbWwFLqzjpEiMY4U6k5qJnfThVcn", <br/>"timestamp": "2018-12-13T12:53:28Z", <br/>"validation_pass": 4, <br/>"operations_hash": "LLoaaw91Q5k48SfBL96ttQe54WcUdn32BGKyNoDZ8sCA5KAEwJGMb", <br/>"fitness": [ "00", "00000000000bf429" ], <br/>"context": "CoWNoFZFhB2hGWhXv5VqEZgL6mS4UFtdJbYKrM7VY6Yt8MgZXiEp", "priority": 0, <br/>"proof_of_work_nonce": "00000003e24de8c8", <br/>"signature":<br/>"sigk66tvEvH2aYRTb3wurhqrRhw2SnGXuXreZii5Vg55mWgrDL98PJkXeDJ2Q8yZwJPLbTFPCUg9WT6bxYS6x5kBpqqK4Qa2" }</span></pre><p id="4f4e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请暂时忽略其中的所有内容，除了下面一行:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="cccb" class="ld jt ht jr b fv le lf l lg lh">"hash": "BLe9jhCFStAkeYVpp4Czuh1Kp18qKUq1v5XWasbm1MiBMT1LGAs",</span></pre><p id="c291" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请复制右边的值，因为我们一会儿会用到它。请注意，您的终端中显示的实际值几乎肯定会与我在这里写下的不同。请从您的终端复制该值。</p><p id="5862" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在在你的浏览器中打开<a class="ae lj" href="https://alphanet.tzscan.io/" rel="noopener ugc nofollow" target="_blank"> tzcan.io的alphanet block explorer </a>，在搜索框中粘贴哈希值并点击回车。</p><p id="8413" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您应该会看到类似这样的内容:</p><figure class="kv kw kx ky fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lk"><img src="../Images/8aa9f3e387c51ef4aa3abd5a2784c47d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zUttrn2520SYWj0bZ2ePMw.jpeg"/></div></div></figure><p id="6c61" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是您的节点认为当前是Tezos alphanet区块链头的块的<a class="ae lj" href="https://en.wikipedia.org/wiki/Hash_function" rel="noopener ugc nofollow" target="_blank">哈希值</a>。</p><h1 id="4751" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">区块链:简要回顾</h1><p id="c67e" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">看看那些写着</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="4d2b" class="ld jt ht jr b fv le lf l lg lh">Predecessor: BLcZcNKP6ETkC9QRku27VFhSbWwFLqzjpEiMY4U6k5qJnfThVcn Successor: BL5CZUh1CePUW4gwjKAJvyUsGrZwyExMwwjUPJGsHcC6vDWmU6j</span></pre><p id="a1a0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">简单回顾一下，区块链，顾名思义，就是一连串的区块。每个块包括其前任块的散列，而前任块又包括其前任的散列，以此类推，直到链中没有前任的第一个(或“起源”)块。(注意，块中实际上只有前一个哈希，后一个哈希是tzScan为了方便起见添加的带外信息)。</p><figure class="kv kw kx ky fq ll fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/8905a2b72499c52b7c2e4d1e76106bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/0*o5jNWj5kWGR2GxfQ.png"/></div></figure><p id="fb6c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以在这里看一下alpha net Genesis block:<a class="ae lj" href="https://alphanet.tzscan.io/0" rel="noopener ugc nofollow" target="_blank">https://alphanet.tzscan.io/0</a></p><p id="c4ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">每个块都包含其前一个块的散列的原因是为了创建一个难以秘密修改的数据结构。</p><p id="191d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">例如，假设我想编辑block <code class="eh jo jp jq jr b">BLe9jh...</code>的副本，并添加一个向我的一个帐户存入10亿技术开发区的交易，我可以这样做。但是对每个人来说，我篡改了块是显而易见的，因为块的散列不再匹配。</p><p id="6824" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">块中的所有信息(序列化时)只是一个数字。块的散列只是该数字上特定散列函数的输出:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="cc66" class="ld jt ht jr b fv le lf l lg lh">Hash(serializedBlock) = BLe9jh...</span></pre><p id="aa2e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，如果我添加一个事务并更改块信息，我会更改代表该块的序列号，这将更改该块的哈希。由于哈希函数的运行时间和成本可以忽略不计，所以如果我试图将我篡改的块副本发送给其他任何人，他们可以很容易地重新计算哈希函数，并发现哈希不匹配。</p><p id="1e51" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此外，因为每个块都包括其前任的散列，所以更改任何块都会更改其“下游”的所有其他块。这意味着，只要你和我对链中的最新块(头)是什么达成一致，我们就可以对链的整个历史达成一致。(就头部达成一致是由共识算法解决的问题，在Tezos中，这是委托利害关系证明的一种变体)。</p><p id="e97b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一般来说，这种类型的数据结构被称为<a class="ae lj" href="https://en.wikipedia.org/wiki/Merkle_tree" rel="noopener ugc nofollow" target="_blank">散列树或Merkle树</a>。考虑到这个术语的各种滥用，需要强调的是，所有“区块链”指的是一个散列树，它的节点是事务块。它与“键值映射”或“链表”属于同一类别。</p><h1 id="e954" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">Tezos Mainnet，Alphanet，Zeronet</h1><p id="a09f" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">返回到我们的块浏览器:</p><figure class="kv kw kx ky fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff lk"><img src="../Images/8aa9f3e387c51ef4aa3abd5a2784c47d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zUttrn2520SYWj0bZ2ePMw.jpeg"/></div></div></figure><p id="238a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以看到块<code class="eh jo jp jq jr b">BLe9jh..</code>中实际上没有任何事务。(您的具体街区可能会)。这是因为Tezos Alphanet是为测试而设计的，所以事务相当少，阻塞也很频繁(每30秒一次)。Alphanet tez的价值可以忽略不计，事实上，它是通过一个无限的水龙头(我们将在后面使用)免费送给任何想要它们的人的。Alphanet不是分散的，每隔几周就会从genesis中定期重置。</p><p id="7747" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Tezos有三个并行的区块链，称为“Mainnet”、“Alphanet”和“Zeronet”</p><p id="d8c9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Mainnet是技术开发中心真正有价值的地方，也是网络分散的地方。Zeronet是一个主要由核心开发人员使用的前沿测试网络，通常每天重置几次。</p><p id="e5b6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要查看有实际交易的块，进入<a class="ae lj" href="https://tzscan.io/blocks" rel="noopener ugc nofollow" target="_blank"> Mainnet块列表</a>。</p><p id="93bd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我们将在Alphanet上完成大部分工作，尽管在后面的章节中，我们将通过一个新的genesis块来引导我们自己的测试网络。</p><p id="9276" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">顺便说一下，如果你重新运行:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="7573" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh head</span></pre><p id="0686" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您会注意到，在您阅读本节时，标题已经更新。</p><h1 id="e9e6" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">与Tezos Alphanet互动</h1><p id="119b" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">现在我们已经讨论了足够多的上下文，我们将在Alphanet上实际做一些事情。</p><p id="11df" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们需要一个身份，进入您的终端并运行:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="80ab" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh shell</span></pre><p id="3509" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将我们放在docker容器中，因此我们可以直接在tezos-node上执行命令。您的提示可能会改变，您可以运行一些命令来验证您现在是在docker容器中:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="fbd6" class="ld jt ht jr b fv le lf l lg lh">$ pwd /home/tezos ~ <br/>$ whoami tezos ~ <br/>$ ls -a . .. .ash_history .tezos-client .tezos-node</span></pre><p id="6d8a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以使用<code class="eh jo jp jq jr b">&lt;Ctrl-D&gt;</code>或</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="2bfe" class="ld jt ht jr b fv le lf l lg lh">$ exit</span></pre><p id="9fc7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">返回到您的常规提示。</p><h1 id="27ab" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">生成Alphanet身份</h1><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="2e6f" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet shell <br/>$ tezos-node identity generate</span></pre><p id="7c6b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将需要很短的时间，所以请继续阅读。</p><p id="a1cf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Tezos身份包含以下内容:</p><ol class=""><li id="2af4" class="lt lu ht is b it iu ix iy jb lv jf lw jj lx jn ly lz ma mb dt translated">向网络唯一标识我们的<code class="eh jo jp jq jr b">peer_id</code>。你可以在<a class="ae lj" href="https://alphanet.tzscan.io/network" rel="noopener ugc nofollow" target="_blank"> tzScan的网络页面</a>上看到alphanet的同行列表</li><li id="c988" class="lt lu ht is b it mc ix md jb me jf mf jj mg jn ly lz ma mb dt translated">一对<code class="eh jo jp jq jr b">public_key, secret_key</code>密钥，让我们可以安全地与其他对等方通信。例如，我们可以使用我们的秘密密钥来生成交易，其他对等体可以使用我们的公共密钥来验证这些交易是否来自我们。</li><li id="4900" class="lt lu ht is b it mc ix md jb me jf mf jj mg jn ly lz ma mb dt translated">一个<code class="eh jo jp jq jr b">proof_of_work_stamp</code>表明我们在生成身份时做了一些计算工作。这就是为什么<code class="eh jo jp jq jr b">identity generate</code>命令需要一些时间的原因，并且是为了防止人们通过生成无止境的身份向网络发送垃圾邮件。</li></ol><p id="dbc6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以阅读更多关于身份生成的信息</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="3459" class="ld jt ht jr b fv le lf l lg lh">$ tezos-node identity --help</span></pre><p id="c87d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">至此，我们可以看到通过运行以下命令生成的身份文件:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="7a31" class="ld jt ht jr b fv le lf l lg lh">$ cat /home/tezos/.tezos-node/identity.json <br/>{ "peer_id": "idtRhgUQFQcUFJLW5HXQbRcdYkaUr4", <br/>"public_key":"34a911ff9258d7c23b44844372a54c2a2a031d41e275e6a7d1251d1aeb95e207", <br/>"secret_key": xxxx <br/>"proof_of_work_stamp":"70e5ea8e85745a54f1a1d11b7c650e56f57f5c76243c072f"</span></pre><p id="a02d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">(实际上这个<code class="eh jo jp jq jr b">.tezos-node/identity.json</code>文件是一个虚拟文件，docker容器将真实身份存储在<code class="eh jo jp jq jr b">/var/run/tezos/node/data/identity.json</code>中，但是如果你从源代码安装tezos，它将位于<code class="eh jo jp jq jr b">.tezos-node</code>下)</p><p id="bc7b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">记住永远不要在任何地方张贴你的秘密钥匙。如果除了你之外的任何人知道了你的秘密密钥，你的整个身份就暴露了。在Alphanet上，这真的无关紧要，但即使在无关紧要的时候也要实践良好的操作安全性，这是一个好主意，这样当它变得无关紧要时，它就会成为一种习惯。</p><h1 id="594b" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">用$$闲钱$$激活帐户</h1><p id="4fcf" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">Tezos Alphanet水龙头是由Tezos开发者运营的一个网站，让我们下载钱包文件。本质上，每当开发人员重置alphanet时，他们都会在genesis块中包含一系列受资助的帐户，然后将这些帐户的密钥免费提供给任何想要进行alphanet测试的人。</p><p id="1495" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">导航到<a class="ae lj" href="https://faucet.tzalpha.net/" rel="noopener ugc nofollow" target="_blank">https://faucet.tzalpha.net/</a>并下载文件。</p><p id="0b67" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在退出alphanet docker容器，并捕获该文件的内容:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="4234" class="ld jt ht jr b fv le lf l lg lh">$ exit <br/>$ cat ~/Downloads/tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4.json <br/>{ "mnemonic": [ "xxxx", "xxxx", "xxxx", "xxxx", "xxxxx "xxxx", "xxxx", "xxxx", "xxxx", "xxxx", "xxxx" "xxxx", "xxxx", "xxxx", "xxxx", ], <br/>"secret": "xxxx", <br/>"amount": "7489334243", <br/>"pkh": "tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4", <br/>"password": "xxxx" "email": "qaqjqdvr.xlicmfia@tezos.example.org" <br/>}%</span></pre><p id="90ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与我们相关的两条线是:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="d128" class="ld jt ht jr b fv le lf l lg lh">"amount": "7489334243", <br/>"pkh": "tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4",</span></pre><p id="6fab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与身份文件一样，这个钱包文件也有一个加密密钥。激活此文件中列出的帐户后，您要告诉网络您要进行转账的方式是通过点对点网络广播交易消息(用此密钥签名)，使用我们之前生成的p2p身份。其他同行可以通过用我们的账户公钥(即账户的“地址”)验证我们的签名，以及通过在区块链中查找我们的余额，来验证交易的正确性(我们是否有足够的tez来进行转账)。</p><p id="ca1d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们激活帐户，给它一个本地昵称<code class="eh jo jp jq jr b">alice</code>:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="65bc" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet client activate account alice with "container:/home/jcb/Downloads/tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4.json"</span></pre><p id="548d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这应该会输出:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="1cdb" class="ld jt ht jr b fv le lf l lg lh">Node is bootstrapped, ready for injecting operations. <br/>Operation successfully injected in the node. <br/>Operation hash: onotiUDrveZX1NRt39zQmPxVbVkxS2qfpM5gucFTV8BvvfPZoRB Waiting for the operation to be included... <br/>Operation found in block: BM5RPwciV64Bz5nG3FbYY6xusrFt2j6EHTBrA7Hhye9fzWUhMK1 (pass: 2, offset: 0) This sequence of operations was run: <br/>  Genesis account activation: Account: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 <br/>Balance updates: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ... +ꜩ7489.334243 </span><span id="247c" class="ld jt ht jr b fv li lf l lg lh">The operation has only been included 0 blocks ago. We recommend to wait more. Use command tezos-client wait for onotiUDrveZX1NRt39zQmPxVbVkxS2qfpM5gucFTV8BvvfPZoRB to be included --confirmations 30 and/or an external block explorer. <br/>Account alice (tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4) activated with ꜩ7489.334243.</span></pre><p id="7520" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们打开tzScan，看看包含此激活的块<code class="eh jo jp jq jr b">BM5RPwciV64Bz5nG3FbYY6xusrFt2j6EHTBrA7Hhye9fzWUhMK1</code>:</p><figure class="kv kw kx ky fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff mh"><img src="../Images/00ae37669405204a337cacc70f578e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XeryJ9ODgUC55rm20DFyg.jpeg"/></div></div></figure><p id="c06f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，如果我们单击帐户激活，我们应该会看到:</p><figure class="kv kw kx ky fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff mi"><img src="../Images/4e439ec2746e3a255943a88323680542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nw7nFWBrGCDTlRWWLtmMug.jpeg"/></div></div></figure><p id="9632" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">用余额！</p><p id="2f21" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">(交易可能需要几分钟才能出现在tzScan上，因此如果您没有看到您的交易，请稍等片刻，等待更多块得到确认，然后重试。)</p><h1 id="4c3b" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">生成新帐户</h1><p id="4743" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">现在让我们生成一个没有tez余额的名为“bob”的新帐户:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="2186" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh client gen keys bob</span></pre><p id="c6fc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这应该只是输出Alphanet警告，但是我们可以进入docker容器，查看我们生成或激活的帐户</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="dc54" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh shell <br/>$ cat /var/run/tezos/client/public_key_hashs <br/>[ { "name": "bob", "value": "tz1QCUKL2YZuGLSdTesXtVHJB8zRcG6XTz8f" }, <br/>  { "name": "alice", "value": "tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4" } ]</span></pre><p id="33c0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所有内部存储的客户端数据都在docker容器的<code class="eh jo jp jq jr b">/var/run/tezos/client</code>中，如果从源代码安装，则在<code class="eh jo jp jq jr b">.tezos-client</code>中。</p><p id="c976" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但是，客户端为内部存储的数据提供了更好的接口:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="3303" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh client list known addresses </span><span id="7181" class="ld jt ht jr b fv li lf l lg lh">bob: tz1QCUKL2YZuGLSdTesXtVHJB8zRcG6XTz8f (unencrypted sk known) <br/>alice: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 (unencrypted sk known)</span></pre><h1 id="6df0" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">将tez从alice转移到bob</h1><p id="98ba" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">让我们检查一下<code class="eh jo jp jq jr b">alice</code>和<code class="eh jo jp jq jr b">bob</code>的余额:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="5e9e" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh client get balance for alice <br/>7489.334243 ꜩ</span><span id="4ab9" class="ld jt ht jr b fv li lf l lg lh">$ ./alphanet.sh client get balance for bob <br/>0 ꜩ</span></pre><p id="218f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们从<code class="eh jo jp jq jr b">alice</code>转移420个代币给鲍勃:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="7bab" class="ld jt ht jr b fv le lf l lg lh">$ ./alphanet.sh client transfer 420.5 from alice to bob --fee 0.5 </span><span id="a256" class="ld jt ht jr b fv li lf l lg lh">Fatal error: The operation will burn ꜩ0.257 which is higher than the configured burn cap (ꜩ0). Use `--burn-cap 0.257` to emit this operation.</span></pre><p id="ddec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">客户端中有<code class="eh jo jp jq jr b">burn-cap</code>设置，防止我们意外发送一个会消耗过多tez的交易:</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="26f8" class="ld jt ht jr b fv le lf l lg lh">Λ ➜ ./alphanet.sh client transfer 420.5 from alice to bob --fee 0.5 --burn-cap 0.257 </span><span id="8239" class="ld jt ht jr b fv li lf l lg lh">Node is bootstrapped, ready for injecting operations. <br/>Estimated gas: 10100 units (will add 100 for safety) <br/>Estimated storage: 257 bytes added (will add 20 for safety) <br/>Operation successfully injected in the node. <br/>Operation hash: opXPyuAXx2yWoReQvWF6tra4aREqS2NgCBQNDtyo4rtZJAuizrM <br/>Waiting for the operation to be included... <br/>Operation found in block: BMRY5jRXjTtU2LeVoWFgSo9D7BU4eFqNB6UCSeZ6neWZhu5AXPt (pass: 3, offset: 0) </span><span id="20be" class="ld jt ht jr b fv li lf l lg lh">This sequence of operations was run:</span><span id="3710" class="ld jt ht jr b fv li lf l lg lh">Manager signed operations: <br/>From: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 <br/>Fee to the baker: ꜩ0 <br/>Expected counter: 5807 <br/>Gas limit: 10000 <br/>Storage limit: 0 bytes <br/>Revelation of manager public key: <br/>  Contract: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4<br/>  Key: edpkuS9a1795Cwwrstx6B6Q3Bugo3CKJ2NxtohxnjEaQGiJkWTD5YE <br/>  This revelation was successfully applied <br/>  Consumed gas: 10000 </span><span id="e714" class="ld jt ht jr b fv li lf l lg lh">Manager signed operations: <br/>From: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 <br/>Fee to the baker: ꜩ0.5 <br/>Expected counter: 5808 <br/>Gas limit: 10200 <br/>Storage limit: 277 bytes </span><span id="edfc" class="ld jt ht jr b fv li lf l lg lh">Balance updates: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ... -ꜩ0.5 <br/>fees(tz3NdTPb3Ax2rVW2Kq9QEdzfYFkRwhrQRPhX,14) ........... +ꜩ0.5 <br/>Transaction: <br/>  Amount: ꜩ420.5 <br/>  From: tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 <br/>  To: tz1QCUKL2YZuGLSdTesXtVHJB8zRcG6XTz8f <br/>  This transaction was successfully applied <br/>  Consumed gas: 10100 </span><span id="daa0" class="ld jt ht jr b fv li lf l lg lh">Balance updates: <br/>tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ... -ꜩ420.5 <br/>tz1QCUKL2YZuGLSdTesXtVHJB8zRcG6XTz8f ... +ꜩ420.5 <br/>tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ... -ꜩ0.257 </span><span id="7b85" class="ld jt ht jr b fv li lf l lg lh">The operation has only been included 0 blocks ago. <br/>We recommend to wait more.<br/>Use command tezos-client wait for opXPyuAXx2yWoReQvWF6tra4aREqS2NgCBQNDtyo4rtZJAuizrM to be included --confirmations 30 and/or an external block explorer.</span></pre><p id="5a28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这为我们打印了一张很好的收据，详细记录了我们的技术开发中心到底发生了什么。</p><p id="e38d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们来看看tzScan上的<code class="eh jo jp jq jr b">bob</code>，或者说<code class="eh jo jp jq jr b">tz1QCUKL2YZuGLSdTesXtVHJB8zRcG6XTz8f</code>:</p><figure class="kv kw kx ky fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff mj"><img src="../Images/9c5f635d0899221aef1ff3accb920b6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nm4kxq1OVaq1NhDpBSiXcQ.jpeg"/></div></div></figure><p id="da62" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但是等等，为什么是<code class="eh jo jp jq jr b">420.5</code> tez？我们不是交了<code class="eh jo jp jq jr b">0.5</code> tez的费用吗？再次查看收据的余额更新部分(我添加了地址为<code class="eh jo jp jq jr b">alice</code>和<code class="eh jo jp jq jr b">bob</code>的注释)</p><pre class="kv kw kx ky fq kz jr la lb aw lc dt"><span id="d11e" class="ld jt ht jr b fv le lf l lg lh">... Balance updates: <br/>      alice tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ....... -ꜩ0.5<br/>      fees(tz3NdTPb3Ax2rVW2Kq9QEdzfYFkRwhrQRPhX,14) .... +ꜩ0.5   <br/>      ... <br/>      Balance updates: <br/>        alice tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ... -ꜩ420.5 <br/>        bob tz1QCUKL2YZuGLSdTesXtVHJB8zRcG6XTz8f ......+ꜩ420.5 <br/>        alice tz1M1tuK4BM53S2niKvQDn6SbACiVk6zbjx4 ... -ꜩ0.257</span></pre><p id="9d8e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">费用来自<code class="eh jo jp jq jr b">alices</code>账户，与交易分开。所以<code class="eh jo jp jq jr b">alice</code>支付的总金额是<code class="eh jo jp jq jr b">-ꜩ421.257</code></p><h1 id="cbb6" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">结论</h1><p id="5a0e" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated">我们关于基本Tezos操作的章节到此结束。下一章，我们将把我们在这里学到的东西与我们在第一章学到的迈克尔逊结合起来，在泰佐斯区块链上实际运行迈克尔逊合约！</p><h1 id="0a9b" class="js jt ht bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dt translated">练习</h1><p id="296e" class="pw-post-body-paragraph iq ir ht is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hm dt translated"><strong class="is hu">练习1:</strong>Tezos客户端附带一份手册，您可以通过</p><p id="085b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh jo jp jq jr b">$ ./alphanet.sh client man</code></p><p id="7363" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这将默认输出带颜色格式的手册。使用手册来确定传递给<code class="eh jo jp jq jr b">client man</code>命令关闭颜色的选项。</p><p id="0f22" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Unix工具<code class="eh jo jp jq jr b">grep</code>和<code class="eh jo jp jq jr b">less</code>在这里可能有用，网上也有一份:<a class="ae lj" href="http://tezos.gitlab.io/alphanet/api/cli-commands.html" rel="noopener ugc nofollow" target="_blank">http://tezos.gitlab.io/alphanet/api/cli-commands.html</a></p><p id="a8a1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">练习2: </strong>进入docker容器外壳(如我们前面所述)并运行</p><p id="7bb7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh jo jp jq jr b">$ tezos-admin-client-p2p stat</code></p><p id="b6c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">滚动到“已知对等方”部分。在浏览器中，打开<a class="ae lj" href="https://alphanet.tzscan.io/network" rel="noopener ugc nofollow" target="_blank"> tzScan的alphanet网络统计页面</a>。</p><p id="3bd1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">查找同时出现在两个列表中的对等ID。</p><p id="b877" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">练习3: </strong>找出Mainnet、Alphanet和Zeronet genesis块的哈希值。它们有什么不同？</p><p id="4193" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">练习4: </strong>在客户端生成四个新地址，分别为<code class="eh jo jp jq jr b">eenie</code>、<code class="eh jo jp jq jr b">meenie</code>、<code class="eh jo jp jq jr b">meinie</code>和<code class="eh jo jp jq jr b">mo</code>。对每个地址进行传输，使<code class="eh jo jp jq jr b">eenie</code>正好有<code class="eh jo jp jq jr b">1</code>个tez，<code class="eh jo jp jq jr b">meenie</code>正好有2个tez，<code class="eh jo jp jq jr b">meinie</code>正好有<code class="eh jo jp jq jr b">3</code>，<code class="eh jo jp jq jr b">mo</code>正好有<code class="eh jo jp jq jr b">4</code>。</p></div><div class="ab cl mk ml hb mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hm hn ho hp hq"><p id="5844" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="mr">最初发布于</em><a class="ae lj" href="https://gitlab.com/camlcase-dev/michelson-tutorial/tree/master/02" rel="noopener ugc nofollow" target="_blank"><em class="mr">https://git lab . com/caml case-dev/Michel son-tutorial/tree/master/02</em></a><em class="mr">。</em></p><blockquote class="ms"><p id="7959" class="mt mu ht bd mv mw mx my mz na nb jn ek translated"><a class="ae lj" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="nd ne nf ng nh ll fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nc"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="kv kw kx ky fq ll fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff ni"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a><figcaption class="nj nk fg fe ff nl nm bd b be z ek"><a class="ae lj" href="http://bit.ly/2G71Sp7" rel="noopener ugc nofollow" target="_blank"><strong class="bd nn">Click to read today’s top story</strong></a></figcaption></figure></div></div>    
</body>
</html>