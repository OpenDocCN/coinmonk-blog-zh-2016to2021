<html>
<head>
<title>So you want to check your ETH and EOSIO smart contracts for bugs?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">所以你想检查你的ETH和EOSIO智能合约的漏洞？</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/so-you-want-to-check-your-smart-contract-for-security-bugs-ded0e8696846?source=collection_archive---------1-----------------------#2019-08-21">https://medium.com/coinmonks/so-you-want-to-check-your-smart-contract-for-security-bugs-ded0e8696846?source=collection_archive---------1-----------------------#2019-08-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/7c2aecc22b30612bb5a4ae2fc7bab0ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VCRKDwzYEYZJmJiu.jpg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Hackers are out to exploit vulnerabilities in your smart contracts.</figcaption></figure><p id="d1e8" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">智能合约是一种程序，一旦部署，就会在区块链上自动执行。根据所使用的区块链(以及智能合约部署的方法)，这些智能合约在一定程度上可以是不可变的。不可变的意思是，一旦部署，它们就不能被它们的创建者修改。</p><p id="7e76" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">如果您曾经开发过一个重要的软件，那么您应该知道第一次部署正确的软件是极其困难的，因为您开发的软件可能包含各种各样的错误:</p><figure class="ke kf kg kh fq iu fe ff paragraph-image"><div class="fe ff kd"><img src="../Images/3fd416734b24b7c515e3a00297bd4a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*0cus5LXh2WLUemAz.png"/></div></figure><ul class=""><li id="e357" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">逻辑错误</li><li id="678e" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">商业错误</li><li id="53db" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">安全漏洞</li></ul><p id="6780" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">虽然逻辑和业务错误可以在一定程度上得到缓解，但区块链智能合约中的安全漏洞可能更难恢复。智能合约通常控制加密令牌，这些令牌是假名，很容易转换成流动现金。这使得智能合约成为不良行为者非常有利可图的目标，他们希望利用任何错误以相对较低的检测风险快速获利。事实上，这是如此普遍，以至于区块链空间充斥着坏人利用智能合约在现实世界中获利的事件。</p><h1 id="5a47" class="kx ky ht bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">避免胜于治疗</h1><p id="3bd1" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">为了避免这些漏洞，软件开发人员正在采用来自链外开发的技术，包括:</p><figure class="ke kf kg kh fq iu fe ff paragraph-image"><div class="fe ff ma"><img src="../Images/0d71ab3e8784b683c9d2c3a0fbf06bf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*UzpdrIUCQdVV9YwT.png"/></div></figure><ul class=""><li id="0a62" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">遵循智能合同开发最佳实践</li><li id="beec" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">通过彻底审查代码来审计他们的合同</li><li id="285a" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">让他们的部署合同受制于白帽黑客</li></ul><p id="5f46" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在这一段中，我们将注意力集中在第二个中的<em class="mb">；审核您的智能合约，以便在部署之前发现漏洞。审计有两种形式。首先，这个领域中的许多人所熟悉的是由一组精通安全漏洞艺术的专家对您的智能合约的业务和编程逻辑进行手动审查。这些专家仔细研究您的智能合约的设计和源代码，目的是识别任何漏洞。根据智能合同的规模和范围，这一过程可能需要一周到几个月的时间，花费从5万美元到50万美元不等。智能合同审计是一项非常专业的技能，因此该领域的许多新生项目内部不太可能有这样的专家。他们通常会委托外部机构进行审计。</em></p><p id="870f" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">即使委托外部安全审计的组织资金充足，通过这种审计的多次迭代也可能是时间和成本所不允许的。因此，组织将此类审计作为将智能合同部署到其选择的区块链之前的最后一步。在这个敏捷开发的世界里，这有点像回到瀑布开发的旧时代。简而言之，手动安全审计根本不可扩展。</p><p id="0cb0" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">现在开始流行的第二种方法是使用智能合同分析工具，该工具对智能合同进行自动审查，以识别漏洞。虽然自动分析的结果可能无法捕捉到适当深入的手动安全审核所暴露的全部问题，但自动分析确实具有比手动审核成本更低、执行更方便的优势。这允许在开发周期中使用自动化分析，以便在代码提交给最终的手动安全审计之前捕捉潜在的问题。自动化分析还使开发人员能够利用一些专家智能合约安全研究人员的工作，使自动化分析成为一种更具可扩展性的方法。</p><h1 id="e5a0" class="kx ky ht bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">自动化智能合同漏洞分析方法</h1><p id="95e9" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">软件程序的自动化漏洞分析是一个研究得很好的领域，在web、桌面和企业软件的外链世界中有着丰富的血统。在设计自动化分析方法时，有两个主要方面需要进行权衡:</p><ul class=""><li id="8b94" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">可再现性:需要采取什么步骤来准确触发漏洞定义漏洞是否可再现。一些分析方法可能无法捕获关于如何触发漏洞的信息，因此任何已识别的漏洞可能需要手动验证。</li><li id="a1a0" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">语义洞察:洞察一个程序或者它的一部分如何以及为什么行为。</li></ul><p id="4ba5" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">通常，自动化分析无法同时优化再现性和语义洞察力。高再现性通常意味着低覆盖率，为了使结果可再现，分析需要能够理解如何到达被分析的代码；移除这个需求意味着一个分析可以达到更高的代码覆盖率。然而，缺乏可再现性会导致高假阳性率(即，对实际上不存在的漏洞的假警报)。另一方面，高语义理解可能需要处理和存储大量数据。尝试实现完整的语义洞察并识别可再现的弱点的分析可能与通过其所有可能的输入排列来执行智能合约没有完全不同，这对于足够复杂的智能合约来说通常是不可扩展的。</p><p id="26fc" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">自动化漏洞分析可以分为两种类型:</p><ul class=""><li id="f03f" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">静态漏洞分析:在运行智能合同之前识别缺陷</li><li id="6946" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">动态漏洞分析:在运行智能合同后识别漏洞<em class="mb"/></li></ul><h2 id="30e9" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated">静态脆弱性分析</h2><p id="058d" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">智能合约上的静态漏洞分析是通过对代码进行推理而不是实际执行代码来执行的。通常，分析是在智能合约源代码的某种表示形式上完成的，或者是源代码本身，或者是目标代码之上的某种中间形式。偶尔也可以对目标代码进行静态分析。</p><p id="94b4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">静态分析的优势？</p><ul class=""><li id="b541" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">它可以很好地覆盖正在分析的智能契约，并且通常可以覆盖每一个可能的执行路径</li><li id="0ca0" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">追溯漏洞到代码中的确切位置会更容易</li></ul><p id="d90b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">静态漏洞分析确实有一些缺点:</p><ul class=""><li id="0e84" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">结果不可重复:关于如何触发已识别漏洞的信息通常不会被捕获，因此可能需要验证漏洞以避免误报。</li><li id="5047" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">缺乏语义洞察力:他们在更简单的数据域上操作，并且可能减少了对为什么智能合约的一部分存在漏洞或者输入的哪些部分导致不当行为的洞察力</li></ul><h2 id="988a" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated">动态脆弱性分析</h2><p id="1d77" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">动态漏洞分析是通过在真实或虚拟处理器上执行智能合约，并对其进行测试输入以验证其在各种条件下的行为来执行的。对智能合约进行单元测试以发现错误是最常见的动态分析方法之一。</p><p id="0150" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">自动化动态分析技术分为两大类:具体执行和符号执行。</p><ul class=""><li id="5649" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">具体的执行包括根据用户提供的精心制作的测试用例正常运行智能契约。一种常见的动态具体执行技术是fuzzing，在这种技术中，向智能合约提供格式错误的输入，以试图发现漏洞。</li><li id="86a6" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">符号执行使用符号变量并在整个程序执行过程中跟踪智能合约的状态，在仿真环境中执行智能合约。在每个条件分支，分析器跟踪每条路径并保存路径条件。分析器然后可以使用累积的路径条件来推理如何准确地触发已识别的漏洞。</li></ul><p id="4b84" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">动态分析的优势是什么？它与静态分析相比如何？</p><ul class=""><li id="682f" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">由于您拥有触发漏洞所需的输入或路径条件，因此识别出的漏洞具有很高的重现性</li><li id="6da2" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">它允许对智能合约进行分析，在这种情况下，您无法访问实际代码。</li></ul><p id="2ae6" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">动态分析的缺点。</p><ul class=""><li id="d58b" class="ki kj ht jh b ji jj jm jn jq kk ju kl jy km kc kn ko kp kq dt translated">模糊器通常需要精心制作的测试用例，以避免只识别浅层漏洞。</li><li id="22dd" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">与静态分析类似，模糊器对输入的哪些部分导致漏洞被触发的语义洞察有限。这使得追溯漏洞到代码中的确切位置变得更加困难。另一方面，符号执行提供了高度的语义洞察力。</li><li id="b900" class="ki kj ht jh b ji kr jm ks jq kt ju ku jy kv kc kn ko kp kq dt translated">通过符号执行，条件路径的数量导致要探索的可能路径呈指数增长，从而限制了可以分析的智能合约的复杂性。</li></ul><p id="5c9b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">从上面可以看出，静态和动态分析技术都有不同的优缺点。不能说一种技术一定比另一种好。为了利用它们不同的属性，我们看到一些领先的智能合同分析工具供应商在他们的产品中同时使用这两种类型的分析。</p><h1 id="9aac" class="kx ky ht bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">以太坊和EOS区块链的顶级漏洞分析工具</h1><p id="1355" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">现在我们对不同的智能合约漏洞分析方法有了基本的了解，有什么工具可以用来检查你的以太坊和EOS智能合约的bug？</p><h2 id="f2e7" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated"><a class="ae kw" href="https://mythx.io" rel="noopener ugc nofollow" target="_blank"> MythX </a></h2><p id="127a" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">MythX是一个SaaS平台，结合了以太坊智能合约的静态、模糊和动态符号分析。它是由一个康塞思人开发的。</p><p id="6faa" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">提供了一个API，工具(如ide、web接口等)可以使用它在应用程序中启用安全扫描。</p><p id="0ea7" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">每位用户199戴起。https://mythx.io/plans<a class="ae kw" href="https://mythx.io/plans" rel="noopener ugc nofollow" target="_blank"/></p><h2 id="e5bf" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated"><a class="ae kw" href="https://github.com/ConsenSys/mythril" rel="noopener ugc nofollow" target="_blank"> Mythril </a></h2><p id="525f" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">由MythX背后的团队开发的。利用动态符号执行。</p><p id="784f" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">开源，免费使用。</p><h2 id="4df2" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated"><a class="ae kw" href="https://securify.chainsecurity.com/" rel="noopener ugc nofollow" target="_blank">安全</a></h2><p id="59bb" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">以太坊智能合约的在线和开源安全扫描器，执行静态分析。</p><p id="fd07" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在线版本可以免费使用，但需要签署提交源代码的权利。</p><h2 id="10b0" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated"><a class="ae kw" href="https://github.com/trailofbits/manticore" rel="noopener ugc nofollow" target="_blank">蝎狮</a></h2><p id="18f3" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">开源动态符号执行分析工具。可以分析以太坊智能合约和Linux ELF二进制。</p><p id="4d58" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在过去的3个月中，通过对其Github库的多次贡献，似乎得到了积极的维护。</p><h2 id="6e11" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated"><a class="ae kw" href="https://tool.smartdec.net/" rel="noopener ugc nofollow" target="_blank">智能检查</a></h2><p id="e23c" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">在线和开源的静态分析工具，将以太坊代码转换成基于XML的表示，并在此基础上检查安全模式。</p><p id="a30b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">它的Github库没有显示出太多近期活动的迹象。</p><h2 id="3544" class="mc ky ht bd kz md me mf ld mg mh mi lh jq mj mk ll ju ml mm lp jy mn mo lt mp dt translated"><a class="ae kw" href="https://github.com/quoscient/octopus" rel="noopener ugc nofollow" target="_blank">章鱼</a></h2><p id="ab14" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">Octopus支持智能合约的基本分析，允许合约分解、控制流分析和将字节码转换为中间表示。</p><p id="1b5b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">虽然它是我们发现的少数几个同时支持以太坊的EVM和EOS的WASM字节码格式的工具之一，但它目前不能运行漏洞分析。这是通过动态符号执行在未来计划的。</p><p id="767a" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">它的Github库没有显示出太多近期活动的迹象。</p><h1 id="dbd2" class="kx ky ht bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">结论</h1><p id="5d21" class="pw-post-body-paragraph jf jg ht jh b ji lv jk jl jm lw jo jp jq lx js jt ju ly jw jx jy lz ka kb kc hm dt translated">自动化漏洞分析是一个新兴领域，将有助于保护智能合同。</p><p id="a18e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">有各种各样的工具可用，但这些主要针对以太坊生态系统。我们发现只有一个工具对EOS的支持很少。</p><p id="3cde" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">你知道我们应该在列表中包括哪些工具吗？你认为自动化分析可以代替人工审查吗？请在评论中告诉我们你的想法。</p><blockquote class="mq"><p id="bd5b" class="mr ms ht bd mt mu mv mw mx my mz kc ek translated"><a class="ae kw" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="nb nc nd ne nf iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff na"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div><div class="ab cl ng nh hb ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="hm hn ho hp hq"><figure class="ke kf kg kh fq iu fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff nn"><img src="../Images/a06b758bdcc47dca7c2504f298674d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_s6JsD3P0hVj32E7t9EtGg.jpeg"/></div></a></figure></div></div>    
</body>
</html>