<html>
<head>
<title>Hey bot! Give me all your money…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">嘿机器人！把你所有的钱都给我…</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/hey-bot-give-me-all-your-money-e1f692594f2e?source=collection_archive---------1-----------------------#2020-10-01">https://medium.com/coinmonks/hey-bot-give-me-all-your-money-e1f692594f2e?source=collection_archive---------1-----------------------#2020-10-01</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/00ff8d314c32ad5feefda8d6f49b9202.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z4umDHM_Wr6xtf-L"/></div></div></figure><p id="7c1c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><em class="jz">TL；DR:拥有曾经在Uniswap上交易过的机器人的交易者可以申请400 UNI。但是他们需要小心！如果机器人没有得到适当的保护，有人可以抢劫他们。这是一个黑客利用的故事，对他来说，这只是利用$EMN之前的热身，也是对鲁莽的机器人运营商的警示。</em></p><p id="2525" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们受到了<a class="ae ka" href="https://twitter.com/FrankResearcher" rel="noopener ugc nofollow" target="_blank">@ frank research</a>在他最近的推文中描述的案例的启发:</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kb"><img src="../Images/2b7cf7328cce95f9eabb920bbbdec794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kSC94mrO5RNYXnwV"/></div></div></figure><p id="e30b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">真的有可能为Uniswap上交易的任意合约索赔UNI，然后从中窃取令牌吗？</p><p id="1648" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在与<a class="ae ka" href="https://twitter.com/bkiepuszewski" rel="noopener ugc nofollow" target="_blank"><em class="jz">@ bkiepuszewski</em></a><em class="jz"/>和几杯咖啡的数据争论之后，我们意识到在许多情况下这是可能的，并且这个漏洞可以很容易地用来从机器人的库存中窃取任何令牌。</p><p id="fdc6" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">所以在为时已晚之前检查你的机器人吧！T13】</p><h1 id="8b90" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">通用套利模式</h1><p id="8176" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">当同一资产在两个交易所的价格不同时，就创造了一个机会，可以在一个地方立即买入，在另一个地方卖出。</p><p id="cf54" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">例如，如果Exchange1上的<strong class="jd hu"> 1 UNI = 0.01219 ETH </strong>和Exchange2上的<strong class="jd hu"> 1 UNI = 0.01321ETH </strong>，并且您恰好有10个ETH，您可以:</p><ol class=""><li id="abe6" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy lo lp lq lr dt translated">在交易所用10 ETH交换820.3445 UNI 1</li><li id="409d" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">立即在交易所2用820.3445瑞士法郎兑换10.8367瑞士法郎</li><li id="1383" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated">享受你的利润，这是0.8357 ETH减去汽油费</li></ol><p id="181d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">每个市场上都有数百个机器人在寻找这样的机会，这通常是一个双赢的局面。机器人为它们的操作者创造利润，但同时它们保持市场平衡(资产的价格在每个交易所都趋于平稳)。</p><h1 id="bd7c" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">简单的套利机器人架构</h1><p id="68d8" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">这里的关键是时机。套利交易者必须在别人之前发现机会，并迅速行动，因为他们的成功取决于两个独立的交易。对他们来说，最好的解决方案通常是创建一个套利机器人。</p><p id="16ef" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">有许多可能的架构，我不会过多地讨论技术细节，但通常包括:</p><ol class=""><li id="fb42" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy lo lp lq lr dt translated"><strong class="jd hu">链外逻辑</strong> —实时跟踪市场价格和天然气成本、寻找套利机会、评估风险和风险/回报权衡等的能力。</li><li id="94c0" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated"><strong class="jd hu">操作员</strong> —用来触发机器人动作的以太坊地址。</li><li id="0d11" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy lo lp lq lr dt translated"><strong class="jd hu"> Bot本身</strong> —一个智能合约，具有:<strong class="jd hu">库存</strong>(它需要资金来启动套利)<strong class="jd hu">功能</strong>(唤醒它并给它命令)<strong class="jd hu">参数化</strong>(告诉Bot做什么)。</li></ol><h1 id="d147" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">套利例子</h1><p id="818f" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">让我们来看看这个机器人被利用之前的历史。</p><p id="d39c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">例如，在这个<a class="ae ka" href="https://ethtx.info/0x2f39c926810059cf4b551df9cdab1be8e25ea430ec760121a267603d9348d1d3" rel="noopener ugc nofollow" target="_blank">交易</a>中，它从<strong class="jd hu">平衡器和<strong class="jd hu"> WETH/MCX </strong>市场上的Uniswap </strong>之间的套利中赚取了<strong class="jd hu"> 0.0197 ETH </strong>，花费了<strong class="jd hu"> 0.0067 ETH </strong>的汽油费。</p><p id="73ae" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">可以想象机器人和它的操作者之间的对话:</strong></p><blockquote class="lx ly lz"><p id="03cd" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht">操作员发现平衡器上的MCX价格比Uniswap上的稍低。</em></p><p id="895a" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">操作员——“嘿，机器人，醒醒。这是0.65 ETH。去Balancer上买些MCX，马上在Uniswap上卖。”</p><p id="c911" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">机器人——“是的，是的，是的！我们来盈利吧！”</p><p id="45ee" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht"> Bot在平衡器上交易0.65 ETH，得到9955.29 MCX。</em></p><p id="7203" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">Bot——“好哇，交易成功了。让我们检查一下我的口袋。哇我有9955.29 MCX，来赚一笔吧！”</p><p id="e5db" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht"> Bot在Uniswap上交易9955.29 MCX，获得0.6696 ETH。</em></p><p id="9f1e" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">Bot——“好哇，交易也成功了。我有0.6696 ETH，由最初的0.65 ETH组成。利润不错啊！我真是个伟大的机器人。请拥抱我……”</p></blockquote></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><h1 id="cd49" class="kg kh ht bd ki kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld dt translated">弱点</h1><p id="20a5" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">为了实现这一切，机器人至少需要理解两个命令。</p><ul class=""><li id="9b19" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy mp lp lq lr dt translated">某种“<strong class="jd hu"> do_arbitrage </strong>”命令，其中操作者说资产应该在哪里交易、交易什么以及如何交易；和</li><li id="bb5a" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">某种“<strong class="jd hu">给我你的钱</strong>”命令，操作者从机器人的口袋里提取赚取的利润。</li></ul><p id="3349" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">很明显，第二个命令必须尽可能地受到保护，因为运营商肯定不希望别人窃取它的宝贵令牌。</p><p id="4451" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">但是第一个好像挺安全的。如果机器人足够聪明，能够检查套利是否成功并获利，那么运营商为什么要保护这一点？也许通过调用机器人来鼓励大家为我们赚钱是件好事？</p><p id="4fd3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这可能是运营商在被利用的bot中没有保护“do_arbitrage”功能的原因。</p><p id="c677" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">第二个弱点是在参数化调用方面给予了太多的自由。实际上，该机器人假设至少应该使用<strong class="jd hu">s<em class="jz">wapExactTokensForTokens</em>T35】函数与UniswapRouter进行一次交易，但这对于一个聪明的开发者来说不是一个大问题。</strong></p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><h1 id="023e" class="kg kh ht bd ki kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld dt translated">要求UNI签订合同</h1><p id="f595" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">现在是一个简短的关于要求UNI令牌的题外话。</p><p id="0d43" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Uniswap ( <a class="ae ka" href="https://uniswap.org/blog/uni/" rel="noopener ugc nofollow" target="_blank"> link </a>)宣布，在Uniswap2上交易的每个个人以太坊地址都有资格申领400 UNI。这也意味着曾经在Uniswap2上交易的合约(尤其是机器人)可以获得奖金。</p><p id="7230" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">但是这样一个已经部署的bot，很可能并没有实现“认领”功能，所以你可能会觉得什么都做不了。</p><p id="ff55" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">但是Uniswap提供了另一种方法——您可以代表另一个地址声明UNI。</p><p id="ab79" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是一个使用<a class="ae ka" href="http://ethtx.info" rel="noopener ugc nofollow" target="_blank">ethx . info</a>的<a class="ae ka" href="https://ethtx.info/0xbe3f29c597e8957fd80040defb979fa90052197a6d18a07ef7a588183d74e177" rel="noopener ugc nofollow" target="_blank">交易</a>的例子。</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mq"><img src="../Images/a6dd576d097af4d571a270753ddcb9ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LBxVt9zd2q5ZTKh_"/></div></div></figure><p id="8935" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因此，该合同获得了新的优利代币，但真正的问题是如何从机器人的口袋里取出它们？如果它是你的契约(并且你被授权调用它的函数)，这可能很简单。但是如果由于某种原因你不能这样做呢？</p><p id="a2f8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">或者不是你的bot 又是什么<strong class="jd hu">？</strong></p><p id="14d2" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这就是这个故事变得有趣的地方</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><h1 id="3bff" class="kg kh ht bd ki kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld dt translated">这是怎么发生的</h1><p id="f245" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">一个攻击者发现了一个易受攻击的bot，并代表它声明了400 UNI(<a class="ae ka" href="https://ethtx.info/0xbe3f29c597e8957fd80040defb979fa90052197a6d18a07ef7a588183d74e177" rel="noopener ugc nofollow" target="_blank">事务</a>)。</p><p id="684d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">所以现在bot有了UNI令牌，但是提取它的唯一方法是使用"<strong class="jd hu">transferer C20</strong>(address _ to，uint256 _value)"函数，该函数包含一个简单而强大的保护:</p><blockquote class="lx ly lz"><p id="98a4" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">要求呼叫者= = 0x2d 033 Fe 0 AFC 028 a 71 f 54536d 3 e c8 EC 08 e 60300d 4</p></blockquote><p id="c73d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这意味着，如果你不是0x2d033…你不能在这里做任何事情。</p><p id="1f6e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">但是等等…，仍然有任何人都可以调用的'<strong class="jd hu"> do_arbitrage </strong>'函数。如公开交易数据所示，剥削者需要做的唯一一件事就是准备假的交易所来欺骗机器人。</p><p id="85a0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">事情是这样的。攻击者部署了两份假装是交易所的合同，并要求机器人在它们之间进行套利。</p><ul class=""><li id="bc6e" class="lj lk ht jd b je jf ji jj jm ll jq lm ju ln jy mp lp lq lr dt translated"><strong class="jd hu">第一个交换</strong>可能是最简单的一个——它的功能是……<em class="jz">什么都不做</em>；</li><li id="1448" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">第二个交换更复杂一点——它伪装成UniswapRouter，其假冒的<strong class="jd hu"><em class="jz">swapExactTokensForTokens</em></strong>函数只是将代币转移给了攻击者。</li></ul><p id="f7c0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们想象一下这次的对话:</p><blockquote class="lx ly lz"><p id="fa96" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht">剥削者为bot索赔400 UNI，并部署假的交换。</em></p><p id="e7c0" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">剥削者——“嘿，机器人，醒醒。这是0.00001 ETH。去交易所1买些UNI，然后马上在交易所2卖。</p><p id="2ccd" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><strong class="jd hu">Bot</strong>——“对，对，对，我们来盈利吧！”</p><p id="948f" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht"> Bot认为它在Exchange1上交易了0.00001 ETH，但实际上什么都没发生(“什么都没发生”也意味着交易没有恢复)。这就是这里交易痕迹里的神秘空叫:</em></p></blockquote><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mr"><img src="../Images/e691f121f7406697f072ddf7680619b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O1uNpSsTrDCrRKnh"/></div></div></figure><blockquote class="lx ly lz"><p id="1e7f" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht">但机器人只是机器人。</em></p></blockquote><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ms"><img src="../Images/022a21bba8131105ccc80e9de7cbed94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X1yTUggmnRMLAAHd"/></div></div></figure><blockquote class="lx ly lz"><p id="df14" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">Bot——“好哇，交易成功了。让我们检查一下我的口袋。哇我有400 UNI了，来赚一笔吧！”</p><p id="a75b" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated"><em class="ht"> Bot在Exchange2交易400 UNI，一无所获。在幕后，假冒的Exchange2将UNI令牌转移到攻击者的地址。</em></p><p id="4fa8" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">Bot——“好啊，交易也成功了。我没有检查利润，因为我最亲爱的操作员说最小利润是零，所以我不必检查。我真是个伟大的机器人。请拥抱我……”</p></blockquote><p id="20cc" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">下面是实际的<a class="ae ka" href="https://ethtx.info/0xcd7e2003eb33be84db301570ed78cf0bda620f72dbc4bc3be331e65e9fd0e29b" rel="noopener ugc nofollow" target="_blank">剥削交易</a>(更多细节见下文)。</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><h1 id="4c5b" class="kg kh ht bd ki kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld dt translated">经验教训</h1><p id="c580" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">剥削者向别人索取400 UNI的机器人。然后，他们通过使用一个可公开访问的函数和部署两个假的交换机来欺骗它撤销UNI。</p><p id="3992" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">从中可以学到什么:</strong></p><blockquote class="lx ly lz"><p id="eeb2" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">如果UNI曾经在Uniswap 上交易过，UNI可以被称为机器人，唯一的问题是如何将它收回到运营商的钱包中(但如果它是你的机器人，你可能已经为此实现了一个功能)；</p><p id="5391" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">潜在的<strong class="jd hu">其他机器人可能容易受到这种攻击</strong>。它需要一个公开的、不受保护的“套利”功能，以及一定程度的交易参数化灵活性。所有操作员都应该检查他们的机器人，以确保他们不会受到这种影响。</p><p id="98ed" class="jb jc jz jd b je jf jg jh ji jj jk jl ma jn jo jp mb jr js jt mc jv jw jx jy hm dt translated">机器人库存中的任何代币都可以用这种方法偷走。它不以任何方式局限于UNI。如果一个机器人口袋里有任何东西，它可能会被诱骗发送到第三方地址。</p></blockquote><p id="e44f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">请注意，并采取适当的预防措施！</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><p id="2a99" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">想一想，因为你可能忘记了你的机器人可以很容易地给你400美元买一个新的PlayStation。</p><p id="9dc5" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">或者如果机器人没有得到适当的保护，它可以把它给任何人。</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><h1 id="c75f" class="kg kh ht bd ki kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld dt translated">更深入</h1><p id="a82e" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">Bartek Kiepuszewski对机器人代码进行了逆向工程:</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mt"><img src="../Images/21c7ee2bccaceac8c87e2d220b995069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aIG9OxtvmwbAScMZ"/></div></div></figure><p id="75fd" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个伪代码展示了这个非常简单但也很有效的东西的确切功能。</p><p id="9cd1" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">使用<a class="ae ka" href="http://ethtx.info" rel="noopener ugc nofollow" target="_blank">ethx . info</a>漏洞利用交易的跟踪如下所示:</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/2a32537b437c0cd6ffa969351a905df7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DH4mtt3sr1Hgxizc"/></div></div></figure><p id="84c3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在一次交易中，开发者<strong class="jd hu">部署了</strong>两个虚假交易，<strong class="jd hu">触发了</strong>bot，<strong class="jd hu">撤销了</strong>UNI。</p><p id="f944" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这是一次精心策划的利用，就在此之前，戴从吸走了数百万美元。</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><p id="46eb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">免责声明:本文提供的信息和研究仅用于信息和教育目的。出于任何目的使用所提供的任何信息，风险由您自行承担。</p><p id="01ac" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><em class="jz">一如既往的感谢</em><a class="ae ka" href="https://twitter.com/bkiepuszewski" rel="noopener ugc nofollow" target="_blank"><em class="jz">@ bkiepuszewski</em></a><em class="jz">对他的启发和帮助:)</em></p><h2 id="f521" class="mv kh ht bd ki mw mx my km mz na nb kq jm nc nd ku jq ne nf ky ju ng nh lc ni dt translated">另外，阅读</h2><ul class=""><li id="02dc" class="lj lk ht jd b je le ji lf jm nj jq nk ju nl jy mp lp lq lr dt translated">最好的<a class="ae ka" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="b851" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a></li><li id="ae2d" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">最好的<a class="ae ka" rel="noopener" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b">加密税务软件</a></li><li id="92e4" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/the-best-crypto-trading-platforms-in-2020-the-definitive-guide-updated-c72f8b874555">最佳加密交易平台</a></li><li id="d8fc" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">最佳<a class="ae ka" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密借贷平台</a></li><li id="4f10" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">最佳区块链分析工具</a></li><li id="d432" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南:新手如何赚钱</li><li id="aa54" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">最佳<a class="ae ka" rel="noopener" href="/coinmonks/what-are-the-best-charting-platforms-for-cryptocurrency-trading-85aade584d80">加密制图工具</a></li><li id="15e1" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ledger-vs-trezor-best-hardware-wallet-to-secure-cryptocurrency-22c7a3fd391e">莱杰vs特雷佐</a></li><li id="56fd" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">了解比特币的<a class="ae ka" rel="noopener" href="/coinmonks/what-are-the-best-books-to-learn-bitcoin-409aeb9aff4b">最佳书籍有哪些？</a></li><li id="170f" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/3commas-review-an-excellent-crypto-trading-bot-2020-1313a58bec92">3商业评论</a></li><li id="d145" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/aax-exchange-review-2021-67c5ea09330c"> AAX交易所评论</a> |推荐代码、交易费用、利弊</li><li id="54f9" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2"> Deribit审查</a> |选项、费用、API和Testnet</li><li id="e34b" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX密码交易所评论</a></li><li id="d0c3" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ngrave-zero-review-c465cf8307fc">n零审核</a></li><li id="1310" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/bybit-exchange-review-dbd570019b71">逐位交换审查</a></li><li id="8b1e" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/cryptohopper-vs-3commas-vs-shrimpy-a2c16095b8fe"> 3Commas vs Cryptohopper </a></li><li id="b18b" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">最好的比特币<a class="ae ka" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></li><li id="e7b1" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">最佳<a class="ae ka" href="https://blog.coincodecap.com/best-monero-wallets" rel="noopener ugc nofollow" target="_blank"> monero钱包</a></li><li id="747f" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" href="https://blog.coincodecap.com/ledger-nano-s-vs-x" rel="noopener ugc nofollow" target="_blank">莱杰nano s vs x </a></li><li id="ace6" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" href="https://blog.coincodecap.com/bitsgap-3commas-quadency" rel="noopener ugc nofollow" target="_blank">Bitsgap vs 3 commas vs quad ency</a></li><li id="a274" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" href="https://blog.coincodecap.com/ledger-nano-s-vs-trezor-one-ledger-nano-x-trezor-t" rel="noopener ugc nofollow" target="_blank">莱杰Nano S vs特雷佐one vs特雷佐T vs莱杰Nano X </a></li><li id="44f0" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">block fi vs Celsius</a>vs Hodlnaut</li><li id="52d0" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/bitsgap-review-a-crypto-trading-bot-that-makes-easy-money-a5d88a336df2">bits gap review</a>——一个轻松赚钱的加密交易机器人</li><li id="92c0" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated">为专业人士设计的加密交易机器人</li><li id="22eb" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT审查</a> |杠杆交易、费用和交易</li><li id="62d2" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/ellipal-titan-review-85e9071dd029">埃利帕尔泰坦评论</a></li><li id="1a26" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" href="https://blog.coincodecap.com/secux-stone-hardware-wallet-review" rel="noopener ugc nofollow" target="_blank">赛克斯·斯通评论</a></li><li id="afbd" class="lj lk ht jd b je ls ji lt jm lu jq lv ju lw jy mp lp lq lr dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/blockfi-review-53096053c097"> BlockFi评论</a> |赚取高达8.6%的加密利息</li></ul></div></div>    
</body>
</html>