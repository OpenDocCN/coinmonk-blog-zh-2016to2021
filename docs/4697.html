<html>
<head>
<title>How to Implement a Crypto Trading Bot (for Dummies)— Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何实现一个加密交易机器人(针对傻瓜)——第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-implement-a-crypto-trading-bot-for-dummies-part-1-efc9d14dffb7?source=collection_archive---------1-----------------------#2021-06-04">https://medium.com/coinmonks/how-to-implement-a-crypto-trading-bot-for-dummies-part-1-efc9d14dffb7?source=collection_archive---------1-----------------------#2021-06-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="1d7b" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">设置bot在您的本地机器上运行</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/dc64569055eabadbb5c06b7b52a5d630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIk2PdI5lHBOVHpSCKwvRA.jpeg"/></div></div></figure><p id="cca8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在教程的这一部分，我们设置了一个在币安上执行交易的加密机器人。查看<a class="ae kq" rel="noopener" href="/coinmonks/how-to-implement-a-crypto-trading-bot-for-dummies-overview-b9511664ed74">概述</a>以了解我们正在构建的内容。</p><p id="cfca" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">给自己来杯☕️，我们开始吧！</p><h1 id="bf8d" class="kr ks ht bd kt ku kv kw kx ky kz la lb iz lc ja ld jc le jd lf jf lg jg lh li dt translated">币安—设置</h1><ul class=""><li id="2d1b" class="lj lk ht jw b jx ll ka lm kd ln kh lo kl lp kp lq lr ls lt dt translated">你需要做的第一件事是去币安注册一个账户。</li><li id="760d" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp lq lr ls lt dt translated">在“安全性”中设置两步认证。</li></ul><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/c44edec33c815d972389c62cc4502b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:386/format:webp/1*nAi-3J3_wYsrzFVGIzQHLA.png"/></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">In “Security” you set up 2FA. In a later step we need to come back to “Settings” → “API-Management”.</figcaption></figure></div><div class="ab cl me mf hb mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hm hn ho hp hq"><h1 id="ac0b" class="kr ks ht bd kt ku ml kw kx ky mm la lb iz mn ja ld jc mo jd lf jf mp jg lh li dt translated">下载机器人的代码</h1><p id="9c0f" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">首先，我们创建一个文件夹来保存我们项目的所有文件。打开终端或CMD，写下:</p><pre class="jj jk jl jm fq mt mu mv mw aw mx dt"><span id="3bab" class="my ks ht mu b fv mz na l nb nc">$ mkdir crypto-for-dummies<br/>$ cd crypto-for-dummies</span></pre><p id="1116" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">第一个命令创建一个文件夹<code class="eh nd ne nf mu b">crypto-for-dummies</code>。第二个命令<strong class="jw hu"> c </strong>将<strong class="jw hu"> d </strong>目录切换到该文件夹。让我们暂时保持终端开放。</p><p id="e223" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们使用一个公开可用的贸易机器人。我们将根据我们的需要改变这个机器人。一个普遍的指导原则是，如果处理你的钱的代码不是你自己的代码，你就不应该相信它。我研究了机器人的代码。它值得我信赖，我从2021年2月开始使用它。还有一个<a class="ae kq" href="http://binance-trade-bot-master" rel="noopener ugc nofollow" target="_blank"> Discord </a>频道，用户在那里谈论机器人。在本教程的最后，我们将深入研究机器人的逻辑，以了解它是如何工作的。</p><p id="7bb7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">按下“代码”按钮下载代码。解压文件夹，并将解压后的文件夹移动到<code class="eh nd ne nf mu b">crypto-for-dummies</code>文件夹中。在终端中键入<code class="eh nd ne nf mu b">ls</code>将会输出:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/4812ee571bb8cf40c33858d210145871.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*EsY1CtHrR8TsWHxdkdk-pw.png"/></div></figure><p id="c031" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在终端输入<code class="eh nd ne nf mu b">cat binance-trade-bot-master/requirements.txt</code>。这会列出一堆外部需求(包)。我们的机器人需要这些包才能正常运行。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nh"><img src="../Images/0d31489f7a672075a64a960f99601733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ciDRXtFOF_mz_3z-TqEUcQ.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">Necessary external packages. <em class="ni">Side note: There is a mapping of macOS to Windows terminal commands in the overview article in case they are different.</em></figcaption></figure><p id="97dd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">为了管理外部包，我们将使用Anaconda。</p></div><div class="ab cl me mf hb mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hm hn ho hp hq"><h1 id="3a6d" class="kr ks ht bd kt ku ml kw kx ky mm la lb iz mn ja ld jc mo jd lf jf mp jg lh li dt translated">下载蟒蛇</h1><p id="79f5" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">前往<a class="ae kq" href="https://docs.anaconda.com/anaconda/install/" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>并为你的操作系统下载它。成功安装后，重启你的终端/ CMD并输入<code class="eh nd ne nf mu b">conda</code>。您应该得到如下输出:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nj"><img src="../Images/555eaa402a2ec4edfc930f1b228fdbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*wiLm5gRVoUfHVhIL8taxvQ.png"/></div></div></figure><p id="2a5b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="nk">边注:我很久以前就装了Anaconda。如果你遇到任何麻烦，检查他们的文件，否则随时联系。</em></p><p id="6e86" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">首先，我们创建一个Anaconda <a class="ae kq" href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank">环境</a>。类型<code class="eh nd ne nf mu b">conda create --name crypto-for-dummies python=3.8</code>。如果要求继续，请确认。等到蟒蛇完成。通过键入<code class="eh nd ne nf mu b">conda activate crypto-for-dummies</code>激活环境。</p><p id="200b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">Anaconda环境对于跨不同项目管理外部包非常有用。例如，在我们的项目中，<code class="eh nd ne nf mu b">requirements.txt</code>中列出的所有外部包都将被安装到Anaconda环境“虚拟加密”中。如果您启动另一个项目，您将创建另一个anaconda环境，外部包将被安装到第二个环境中。</p></div><div class="ab cl me mf hb mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hm hn ho hp hq"><h1 id="19c2" class="kr ks ht bd kt ku ml kw kx ky mm la lb iz mn ja ld jc mo jd lf jf mp jg lh li dt translated">下载PyCharm</h1><p id="efbe" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">我们需要的下一个程序是PyCharm。前往<a class="ae kq" href="https://www.jetbrains.com/pycharm/download" rel="noopener ugc nofollow" target="_blank">那里</a>并下载社区版本。PyCharm是一个开发环境。这是我们将要编写代码的地方。</p><p id="8a3f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">一旦你安装了PyCharm，启动它并点击“打开”。找到你的<code class="eh nd ne nf mu b">crypto-for-dummies</code>文件夹并选择它。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nl"><img src="../Images/e8b602a21e72515f0490d5cf9658b953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3HY9qOPyuy-4iRTyC6wosw.png"/></div></div></figure><p id="1c3b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">为了验证你选择了正确的文件夹，在你的终端中输入<code class="eh nd ne nf mu b">ls -a</code>。这将列出<code class="eh nd ne nf mu b">crypto-for-dummies</code>文件夹中的所有文件夹和文件(甚至是不可见的文件/文件夹)。应该有两个文件夹:<code class="eh nd ne nf mu b">.idea</code>和<code class="eh nd ne nf mu b">binance-trade-bot-master</code>。<code class="eh nd ne nf mu b">.idea</code>文件夹保存了PyCharm的一系列配置。不用担心这些。</p><p id="5789" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">接下来我们想把PyCharm和Anaconda联系起来。以便PyCharm知道使用哪个Python版本和外部包。在我的情况下，这是自动发生的。如果PyCharm的右下角有一小段文字写着:“Python 3.8(傻瓜密码)”，那么它就是链接的。</p><p id="ca3e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">如果没有自动发生，进入“py charm”→“首选项”，然后搜索“解释器”。您可以将解释器手动设置到<strong class="jw hu">现有的</strong> conda环境。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nm"><img src="../Images/301c6839acb5af30b97c79a97e8de60a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPnMckhWivkkW8w1mFflJA.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">If everything is set up properly it should look like this.</figcaption></figure><p id="2c92" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">让我们安装需求:</p><ol class=""><li id="b6fc" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp nq lr ls lt dt translated">打开您的终端并检查您的环境是否处于活动状态。否则用<code class="eh nd ne nf mu b">conda activate crypto-for-dummies</code>激活它。</li><li id="c4bc" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">安装外部软件包:<code class="eh nd ne nf mu b">pip install -r binance-trade-bot-master/requirements.txt</code></li></ol></div><div class="ab cl me mf hb mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hm hn ho hp hq"><h1 id="7679" class="kr ks ht bd kt ku ml kw kx ky mm la lb iz mn ja ld jc mo jd lf jf mp jg lh li dt translated">运行机器人</h1><p id="35e4" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">我们首先需要做几件事:</p><ol class=""><li id="7ad3" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp nq lr ls lt dt translated">在目录<code class="eh nd ne nf mu b">binance-trade-bot-master</code>中创建一个新文件，并将其命名为<code class="eh nd ne nf mu b">user.cfg</code>。将文件内容从<code class="eh nd ne nf mu b">.user.cfg.example</code>复制到新创建的文件中。这个配置文件包含机器人操作的某些设置。</li><li id="07c9" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">去币安。在“设置”→“API管理”中，您需要创建一个<a class="ae kq" href="https://en.wikipedia.org/wiki/API" rel="noopener ugc nofollow" target="_blank"> API </a>密钥。你可以称之为“傻瓜密码”。有了这个密钥，我们的机器人可以与币安通信并执行交易。</li><li id="e89d" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">用币安的值替换<code class="eh nd ne nf mu b">user.cfg</code>中<code class="eh nd ne nf mu b">api_key</code>的值。对<code class="eh nd ne nf mu b">api_secret_key</code>的值做同样的操作。保管好秘密。任何知道这个秘密的人都可以进入你的币安账户。</li><li id="c36f" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在币安，买一枚你喜欢的硬币。花10美元–20美元就够了。</li><li id="86ec" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在<code class="eh nd ne nf mu b">user.cfg</code>内设置<code class="eh nd ne nf mu b">current_coin</code>的值。我买的是Filecoin，所以在我的情况下看起来是这样的:<code class="eh nd ne nf mu b">current_coin=FIL</code>。使用你的硬币的股票代号！(例如FIL)</li><li id="f94f" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">文件<code class="eh nd ne nf mu b">supported_coin_list</code>列出了机器人将要交易的所有硬币。调整到你喜欢的程度。唯一的要求是你也要添加你的<code class="eh nd ne nf mu b">current_coin</code>。</li></ol><p id="9205" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">好了，是时候运行机器人了:</p><ol class=""><li id="7d68" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp nq lr ls lt dt translated">再次打开你的终端，输入:<code class="eh nd ne nf mu b">cd binance-trade-bot-master</code>。检查您的conda环境是否处于活动状态！</li></ol><p id="35ba" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">2.然后键入:<code class="eh nd ne nf mu b">python -m binance_trade_bot</code>。您应该会看到如下输出:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nr"><img src="../Images/e2a1ad9b65db8017dc3fcf13e09a35ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y8O3sNPqm3Fa3p0pnmB71w.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">Initializing all the ratios between the coins.</figcaption></figure><p id="945c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">有点耐心。在某个时候，将会有以下输出:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ns"><img src="../Images/e49f6b865f6df3a7e199d9451ad7de74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGM7mvxMwGDSKPdWeecW8g.png"/></div></div></figure><p id="36c2" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">好极了👏！资产管理自动化的第一步。</p></div><div class="ab cl me mf hb mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hm hn ho hp hq"><h1 id="e2e9" class="kr ks ht bd kt ku ml kw kx ky mm la lb iz mn ja ld jc mo jd lf jf mp jg lh li dt translated">深潜:机器人如何工作</h1><p id="990a" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">请务必阅读<a class="ae kq" href="https://github.com/edeng23/binance-trade-bot" rel="noopener ugc nofollow" target="_blank">自述文件</a>。这个机器人遵循一个<a class="ae kq" href="https://en.wikipedia.org/wiki/Greedy_algorithm" rel="noopener ugc nofollow" target="_blank">贪婪策略</a>。机器人的目标是积累更多的硬币。它不关心法定货币。</p><p id="39c8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">让我们看一个例子和相应的代码。当你第一次启动这个机器人时，它会在<code class="eh nd ne nf mu b">supported_coin_list</code>文件中初始化你所有硬币之间的比率(见上面的截图)。</p><h2 id="b76c" class="my ks ht bd kt nt nu nv kx nw nx ny lb kd nz oa ld kh ob oc lf kl od oe lh of dt translated">初始化</h2><p id="f992" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">比如说你的<code class="eh nd ne nf mu b">supported_coin_list</code>里有EOS和LINK，你现在的硬币是EOS。EOS的市值是10美元，LINK的市值是20美元。在您的数据库中会有以下信息:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff og"><img src="../Images/e60ea03340cc7edc7c5375e3336832a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*1FC_oe2nu8xrAH58pMk5vg.png"/></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">The first row shows information about the EOS → LINK. 10 / 20 is the ratio for that pair. The second row shows information about the LINK → EOS pair.</figcaption></figure><h2 id="0f1c" class="my ks ht bd kt nt nu nv kx nw nx ny lb kd nz oa ld kh ob oc lf kl od oe lh of dt translated">侦察——跳到下一个最好的硬币</h2><p id="e9b5" class="pw-post-body-paragraph ju jv ht jw b jx ll iu jz ka lm ix kc kd mq kf kg kh mr kj kk kl ms kn ko kp hm dt translated">当机器人开始侦察时，它会反复调用<code class="eh nd ne nf mu b">auto_trader.py</code>内部一个名为<code class="eh nd ne nf mu b">_jump_to_best_coin</code>的函数:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff oh"><img src="../Images/d09d9680550104f42392e463192388c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4f8yREaLN95LRTGtD672Qg.png"/></div></div></figure><p id="36d9" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这个函数做三件事</p><ul class=""><li id="125d" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp lq lr ls lt dt translated">在第140行，我们从另一个名为<code class="eh nd ne nf mu b">self._get_ratios</code>的函数中得到某种<a class="ae kq" href="https://www.w3schools.com/python/python_dictionaries.asp" rel="noopener ugc nofollow" target="_blank">字典</a>。不要管<code class="eh nd ne nf mu b">self._get_ratios</code>是怎么工作的。我们稍后会对此进行调查。在<code class="eh nd ne nf mu b">ratio_dict</code>中，我们存储的键值对可能是这样的:</li></ul><pre class="jj jk jl jm fq mt mu mv mw aw mx dt"><span id="0e38" class="my ks ht mu b fv mz na l nb nc"># The key of the dictionary is a pair of coins<br/># The value of the dictionary is some kind of ratio</span><span id="fd3c" class="my ks ht mu b fv oi na l nb nc">{<br/>  EOS-&gt;ETH: -1.3,<br/>  EOS-&gt;ALGO: -0.5,<br/>  EOS-&gt;ATOM: 0.01,<br/>  EOS-&gt;LINK: 0.04<br/>}</span></pre><ul class=""><li id="6d1d" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp lq lr ls lt dt translated">在第143行，我们只保存比率大于0的值。所以<code class="eh nd ne nf mu b">ratio_dict</code>会是这个样子。</li></ul><pre class="jj jk jl jm fq mt mu mv mw aw mx dt"><span id="9de1" class="my ks ht mu b fv mz na l nb nc">{<br/>  EOS-&gt;ATOM: 0.01,<br/>  EOS-&gt;LINK: 0.04<br/>}</span></pre><ul class=""><li id="861f" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp lq lr ls lt dt translated">在第146–149行:<code class="eh nd ne nf mu b">best_pair</code>表示比率最高的一对。在我们的例子中，这是EOS → LINK。在这种情况下，机器人将出售所有的EOS硬币，目前在你的拥有和购买链接(第149行)。如果没有比率&gt; 0，机器人重新开始。</li></ul><h2 id="0745" class="my ks ht bd kt nt nu nv kx nw nx ny lb kd nz oa ld kh ob oc lf kl od oe lh of dt translated">侦察——获取比率</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff oj"><img src="../Images/08c7bd7c7dfbf7a26fa23573f2024f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D7ZO4BjDjNP3swx4vlPY-g.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">_get_ratios function inside auto_trader.py. I slightly modified the function for better understanding.</figcaption></figure><p id="b63a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这个函数的目标是构造一个字典，就像我们之前看到的一样:</p><ol class=""><li id="0a03" class="lj lk ht jw b jx jy ka kb kd nn kh no kl np kp nq lr ls lt dt translated">这个函数接收我们当前持有的硬币的<strong class="jw hu">电流</strong><code class="eh nd ne nf mu b">coin_price</code>(EOS)。让我们假设EOS的价格变为15美元。</li><li id="4ad4" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在第113行，我们从数据库中获得我们持有的当前<code class="eh nd ne nf mu b">coin</code>的<code class="eh nd ne nf mu b">all_pairs</code>(例如EOS)。所有对是一个列表，可能看起来像这样:<code class="eh nd ne nf mu b">all_pairs = [(EOS-&gt;LINK), (EOS-&gt;ALGO), (EOS-&gt;ATOM), (EOS-&gt;ETH)]</code>。</li><li id="9c8a" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在第114行，我们循环遍历每一对。在第115行，我们得到了<code class="eh nd ne nf mu b">to_coin</code>的<strong class="jw hu">当前</strong>价格。让我们假设LINK的价格是25美元。</li><li id="6dc1" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在第118行，我们计算比率<code class="eh nd ne nf mu b">coin_opt_coin_ratio</code>。这将导致15美元/ 25美元= 0.6</li><li id="46bc" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在第120-122行，我们得到了来自币安的费用。我们假设<code class="eh nd ne nf mu b">transaction_fee</code>等于0.02。</li><li id="f067" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在第124行<code class="eh nd ne nf mu b">epsilon</code>被计算。在我们的例子中:0.02 * 5 * 0.6 = 0.06。<code class="eh nd ne nf mu b">self.config.SCOUT_MULTIPLIER</code>是在<code class="eh nd ne nf mu b">user.cfg</code>文件中指定的值，默认为5。在第125行，我们计算出<code class="eh nd ne nf mu b">current_market_ratio</code>为:0.6–0.06 = 0.54</li><li id="fb90" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp nq lr ls lt dt translated">在第126行，我们计算比率，然后将它放入字典。在我们的例子中:0.54–0.5 = 0.04。记住<code class="eh nd ne nf mu b">pair.ratio</code>是我们从初始化步骤得到的0.5。这在<code class="eh nd ne nf mu b">ratio_dict</code>中产生了第一个键值对:</li></ol><pre class="jj jk jl jm fq mt mu mv mw aw mx dt"><span id="5341" class="my ks ht mu b fv mz na l nb nc">{<br/>  EOS-&gt;LINK: 0.04<br/>}</span></pre><p id="6b18" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们对<code class="eh nd ne nf mu b">all_pairs</code>中的每一对重复这些计算。</p><p id="1f1e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">好的，太好了！那么这一切意味着什么呢？我们从基于当前市场数据(<code class="eh nd ne nf mu b">current_market_ratio</code>)的比率中减去基于先前市场数据(<code class="eh nd ne nf mu b">pair.ratio</code>)的比率。如果结果是0，我们知道这将是一笔有利可图的交易。</p><p id="a20e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">让我们假设您将<code class="eh nd ne nf mu b">self.config.SCOUT_MULTIPLIER</code>更改为一个更大的值。结果是<code class="eh nd ne nf mu b">current_market_ratio</code>变小了。并且<code class="eh nd ne nf mu b">current_market_ratio — pair.ratio</code>大于0的概率更小。这意味着你的机器人将等待更大的硬币收益/损失，直到它交易。</p></div><div class="ab cl me mf hb mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hm hn ho hp hq"><p id="d4ac" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="nk">随时联系我</em><a class="ae kq" href="https://www.linkedin.com/in/lorenzhofmannwellenhof/" rel="noopener ugc nofollow" target="_blank"><em class="nk">LinkedIn</em></a><em class="nk">。订阅我的</em> <a class="ae kq" href="http://eepurl.com/hx6Jvf" rel="noopener ugc nofollow" target="_blank"> <em class="nk">时事通讯</em> </a> <em class="nk">，当我写博客讲述我作为软件工程师的个人经历时，我会收到通知。查看本教程的第二部分。编码快乐！</em></p><h2 id="e1a2" class="my ks ht bd kt nt nu nv kx nw nx ny lb kd nz oa ld kh ob oc lf kl od oe lh of dt translated">另外，阅读</h2><ul class=""><li id="2b06" class="lj lk ht jw b jx ll ka lm kd ln kh lo kl lp kp lq lr ls lt dt translated"><a class="ae kq" href="https://blog.coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">电网交易机器人</a></li><li id="9f4f" class="lj lk ht jw b jx lu ka lv kd lw kh lx kl ly kp lq lr ls lt dt translated"><a class="ae kq" href="https://blog.coincodecap.com/best-crypto-trading-bots" rel="noopener ugc nofollow" target="_blank">密码交易机器人</a></li></ul></div></div>    
</body>
</html>