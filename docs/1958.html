<html>
<head>
<title>Hyperledger Fabric By Example: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">超分类帐结构示例:第2部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/hyperledger-fabric-by-example-part-2-57242add8409?source=collection_archive---------3-----------------------#2019-01-10">https://medium.com/coinmonks/hyperledger-fabric-by-example-part-2-57242add8409?source=collection_archive---------3-----------------------#2019-01-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="9f28" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">探索<em class="ji"> Hyperledger Fabric </em>如何严重依赖数字证书。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/325c74e6c03fe12df06a4a914be9cdbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Sac4mKd3LwNaL59SL0Ijw.jpeg"/></div></div></figure><p id="ffee" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">本文是以<a class="ae kr" rel="noopener" href="/@johntucker_48673/hyperledger-fabric-by-example-part-1-758547e9fb04"><em class="ks">Hyperledger Fabric By Example:Part 1</em></a>开始的系列文章的一部分。</p><p id="3747" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">正如上一篇文章中所讨论的，我们将剖析byfn.sh 的<em class="ks">,并将一切与概念和软件组件联系起来。</em></p><p id="9285" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">本教程让您运行的第一个命令是:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="847b" class="ky kz ht ku b fv la lb l lc ld">./byfn.sh generate</span></pre><p id="1f51" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">隐源</strong></p><p id="c11d" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">按照脚本的逻辑，第一个有影响的命令是:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="5af6" class="ky kz ht ku b fv la lb l lc ld">cryptogen generate --config=./crypto-config.yaml</span></pre><p id="ae74" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">使用以下配置(去掉大量注释):</p><p id="ce55" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks">。/first-network/crypto-config . YAML</em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="le lf l"/></div></figure><p id="cd5e" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><a class="ae kr" href="https://hyperledger-fabric.readthedocs.io/en/latest/commands/cryptogen.html" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> Cryptogen </em> </a>是<em class="ks"> fabric-samples </em>安装中提供的命令行界面工具之一:</p><blockquote class="lg lh li"><p id="a071" class="jv jw ks jx b jy jz iu ka kb kc ix kd lj kf kg kh lk kj kk kl ll kn ko kp kq hm dt translated">cryptogen是一个用于生成Hyperledger结构密钥材料的实用程序。它是一种为测试目的而预先配置网络的方法。它通常不会用于生产网络的运行。</p></blockquote><p id="ea1e" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks"> —超帐织物— </em> <a class="ae kr" href="https://hyperledger-fabric.readthedocs.io/en/latest/commands/cryptogen.html" rel="noopener ugc nofollow" target="_blank"> <em class="ks">隐源</em> </a></p><p id="9d18" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">观察结果:</p><ul class=""><li id="8966" class="lm ln ht jx b jy jz kb kc ke lo ki lp km lq kq lr ls lt lu dt translated">构建你的第一个网络教程对这个工具的功能有一个合理的描述。从根本上说，我们正在为我们的示例网络创建数字证书基础设施；在生产中，这将通过从支持<a class="ae kr" href="https://blog.cloudflare.com/ecdsa-the-digital-signature-algorithm-of-a-better-internet/" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> ECDSA </em> </a>的<a class="ae kr" href="https://en.wikipedia.org/wiki/Certificate_authority" rel="noopener ugc nofollow" target="_blank">认证机构</a>获得数字证书来手动完成</li><li id="8457" class="lm ln ht jx b jy lv kb lw ke lx ki ly km lz kq lr ls lt lu dt translated"><em class="ks">超帐结构</em>在<a class="ae kr" href="https://hyperledger-fabric.readthedocs.io/en/latest/identity/identity.html" rel="noopener ugc nofollow" target="_blank"> <em class="ks">超帐结构—标识</em> </a>中提供了相关的概念文档</li><li id="bee5" class="lm ln ht jx b jy lv kb lw ke lx ki ly km lz kq lr ls lt lu dt translated">在我们运行<em class="ks"> cryptogen </em>工具后，生成的数字证书和密钥将被保存到一个名为<em class="ks"> crypto-config </em>的文件夹中。它创建的<a class="ae kr" href="https://gist.github.com/larkintuckerllc/8c2f390081204ab132ccd4b8a7be5e7a" rel="noopener ugc nofollow" target="_blank"> 109个目录和107个文件</a>有点吓人。我们将在后面探讨如何使用其中的每一个</li></ul><p id="3a26" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">示例网络</strong></p><p id="cd86" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">示例网络由节点和用户组成；每个都有自己的证书和密钥。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ma"><img src="../Images/0c54934858dcd2573259f7f9438ad322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*je_AcGO6O8xG_ZSJYSZLmw.png"/></div></div></figure><p id="ddb6" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在这种情况下，请注意三个证书颁发机构(CA):</p><blockquote class="lg lh li"><p id="d877" class="jv jw ks jx b jy jz iu ka kb kc ix kd lj kf kg kh lk kj kk kl ll kn ko kp kq hm dt translated">为每个组织提供一个唯一的根证书(ca-cert ),将特定组件(对等方和订购方)绑定到该组织。通过为每个组织分配一个唯一的CA证书，我们模拟了一个典型的网络，其中参与成员将使用自己的证书颁发机构。</p></blockquote><p id="f8a9" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks">—Hyperledger Fabric—</em><a class="ae kr" href="https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#how-does-it-work" rel="noopener ugc nofollow" target="_blank"><em class="ks">构建您的第一张网络</em> </a></p><p id="cf07" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">虽然<em class="ks"> Hyperledger Fabric </em>提供了它们自己的<a class="ae kr" href="https://hyperledger-fabric-ca.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">证书授权实现</a>(通过<em class="ks"> Docker </em>映像)供开发期间使用，但本教程并不要求实例化它们；我们使用<em class="ks"> cryptogen </em>命令行界面工具预先生成所有的数字证书和密钥。</p><p id="a07e" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu"> Configtxgen </strong></p><p id="e768" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">回到<code class="eh mb mc md ku b">./byfn.sh generate</code>脚本中的下一个有影响的命令，我们看到它使用了<em class="ks"> fabric-samples </em>安装中提供的另一个命令行界面工具(四次):<a class="ae kr" href="https://hyperledger-fabric.readthedocs.io/en/latest/commands/configtxgen.html" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> configtxgen </em> </a>。</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="8b15" class="ky kz ht ku b fv la lb l lc ld">configtxgen -profile TwoOrgsOrdererGenesis -outputBlock ./channel-artifacts/genesis.block</span><span id="b516" class="ky kz ht ku b fv me lb l lc ld">configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID $CHANNEL_NAME</span><span id="dbd5" class="ky kz ht ku b fv me lb l lc ld">configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/Org1MSPanchors.tx -channelID $CHANNEL_NAME -asOrg Org1MSP</span><span id="84ec" class="ky kz ht ku b fv me lb l lc ld">configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate \<br/>    ./channel-artifacts/Org2MSPanchors.tx -channelID $CHANNEL_NAME -asOrg Org2MSP</span></pre><p id="0fa9" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">至于这个工具是做什么的。</p><blockquote class="lg lh li"><p id="40b1" class="jv jw ks jx b jy jz iu ka kb kc ix kd lj kf kg kh lk kj kk kl ll kn ko kp kq hm dt translated">configtxgen命令允许用户创建和检查与通道配置相关的工件。</p></blockquote><p id="94a6" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><em class="ks">—Hyperledger Fabric—</em><a class="ae kr" href="https://hyperledger-fabric.readthedocs.io/en/latest/commands/configtxgen.html" rel="noopener ugc nofollow" target="_blank"><em class="ks">configtxgen</em></a></p><p id="a60f" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">没什么帮助。更糟糕的是，这个工具使用了自文档化的配置文件；在这个例子中，它有322行长；<a class="ae kr" href="https://gist.github.com/larkintuckerllc/7ae7d7b47cdf731a2ccb2a386bb2d383" rel="noopener ugc nofollow" target="_blank"> <em class="ks">。/first-network/configtx . YAML</em></a>。</p><p id="4ad8" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><strong class="jx hu">下一步</strong></p><p id="6e90" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">在下一篇文章中，<a class="ae kr" rel="noopener" href="/@johntucker_48673/hyperledger-fabric-by-example-part-3-8f28b6080852"><em class="ks">Hyperledger Fabric By Example:Part 3</em></a><em class="ks">，</em>我们通过构建一个最小网络来继续探索关键的<em class="ks"> Hyperledger Fabric </em>概念。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff mf"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a></figure><blockquote class="mg"><p id="56d0" class="mh mi ht bd mj mk ml mm mn mo mp kq ek translated"><a class="ae kr" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mr ms mt mu mv jo fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mq"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>