<html>
<head>
<title>Compile Bitcoin Core 0.17.1 on FreeNAS 11.2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在FreeNAS 11.2上编译比特币核心0.17.1</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/compile-bitcoin-core-0-17-0rc3-with-tor-hidden-service-ncurses-tui-on-freenas-11-2-iocage-jail-4a0c4c5c9111?source=collection_archive---------0-----------------------#2018-09-16">https://medium.com/coinmonks/compile-bitcoin-core-0-17-0rc3-with-tor-hidden-service-ncurses-tui-on-freenas-11-2-iocage-jail-4a0c4c5c9111?source=collection_archive---------0-----------------------#2018-09-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="c84a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">此文章不再维护。请在我的github页面上查看最新说明:</h1><p id="2c3d" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><a class="ae km" href="https://github.com/seth586/guides/tree/master/FreeNAS" rel="noopener ugc nofollow" target="_blank">https://github.com/seth586/guides/tree/master/FreeNAS</a></p><h1 id="4dfc" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated"><strong class="ak">本文是系列文章的一部分:</strong></h1><p id="1587" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">接下来:<a class="ae km" rel="noopener" href="/@seth586/freenas-jail-install-electrum-personal-server-9ca9eea96046">在弗里纳斯监狱安装electrum个人服务器</a></p><h1 id="02ac" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">目标:</h1><p id="58c6" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">本文概述了如何在FreeNAS 11.2 iocage jail上编译和运行比特币核心0.17.1(或您可能希望的其他版本)，为公共IP和tor连接提供服务，使用ncurses2终端用户界面。在以后的文章中，这将被配置为与闪电实验室的LND一起工作。</p><h1 id="21e6" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">先决条件:</h1><p id="aafe" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">因此，在这一点上，我们可以假设您构建了您的家庭服务器。希望你足够聪明去遵循<a class="ae km" href="https://forums.freenas.org/index.php?resources/hardware-recommendations-guide.12/" rel="noopener ugc nofollow" target="_blank">硬件推荐指南</a>。我的基本建议是:确保你得到一个服务器级主板，它有互联网协议管理接口(IPMI) &amp;支持错误代码纠正(ECC)内存。我强烈推荐RAIDZ2配置中的6个硬盘，这是最好的空间和冗余。当硬盘出现故障时，RAIDZ1中的任何数量的驱动器都会失去冗余，而RAIDZ2中的4个驱动器的存储容量只有RAIDZ2中6个驱动器的一半。如果价值主张越来越贵，从较小的硬盘开始。一旦卷设置完毕，您就不能向卷中添加驱动器，但是您可以用更大的驱动器替换驱动器，一旦所有6个驱动器都是更大的驱动器，您就可以增加卷的大小。</p><p id="77c8" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">我假设你知道你的路由器。我的示例路由器是运行OpenWRT的Linksys WRT1900ACv1。您的路由器配置用户界面可能与此处解释的不同。</p><p id="3f7f" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">我们还假设您在家庭服务器上安装了FreeNAS，浏览了<a class="ae km" href="https://forums.freenas.org/index.php" rel="noopener ugc nofollow" target="_blank"> FreeNAS论坛</a>，阅读了<a class="ae km" href="http://doc.freenas.org/11/freenas.html" rel="noopener ugc nofollow" target="_blank"> FreeNAS文档</a>，并设置了一个ZFS卷。</p><h1 id="be81" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">创建监狱:</h1><p id="f840" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">把监狱想象成更高效的虚拟机。你可以在FreeNAS上安装一堆虚拟机，在这些虚拟机上运行linux，并在网上提供的各种linux指南中做出选择。但是运行一个虚拟机需要比监狱更多的资源，为虚拟机分配内存等等。另外，如果我们搞砸了，我们可以删除监狱，重新开始。我们在监狱里做的任何事情都不应该破坏主机上的任何东西。毕竟，我们为正常运行时间构建了具有服务器级硬件的计算机！</p><p id="431e" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">FreeNAS 11.2使用iocage来管理监狱。以前的版本使用warden，现在已被弃用。要创建监狱，请登录到您的FreeNAS用户界面，并在左侧菜单中选择监狱。单击右上角的“+”符号，并为您的监狱命名。我决定叫我的<code class="eh ks kt ku kv b">bitcoin_node</code>。在释放下，选择<code class="eh ks kt ku kv b">11.2-RELEASE</code>。点击“下一步”。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff kw"><img src="../Images/d73d2493f63f70f52b72ef5212b0e9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hmpYwLfjvm0sQ3SBh4JaIg.png"/></div></div></figure><p id="df9f" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">单击“DHCP自动配置IPv4”，应该会自动选择VNET。动态主机配置协议允许你的主机(你的家庭路由器)分配一个IP地址给你的监狱。VNET将为你的监狱创建一个虚拟以太网适配器。不需要额外的电缆。现在，您的家庭路由器会将您的FreeNAS服务器和您的监狱视为两个独立的设备。当我们可以根据分配的IP地址在您的路由器上引导流量时，这将非常方便！点击“下一步”</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff li"><img src="../Images/00dddbe373789d158aa36ed8bdbc92c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pG6pUoMcxtdAQtFmoMA5yw.png"/></div></div></figure><p id="6674" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">最后，“提交”。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff kw"><img src="../Images/568c9b2cde23976867944fb7f4e4ec2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mEOKdgePXUkuBJUUTtTIPA.png"/></div></div></figure><p id="3396" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">接下来，我们要确定这个监狱的最大运行时间。如果你有一个服务器重启，我们希望监狱也能自动启动。单击新监狱旁边的“<strong class="jq hu"> ⋮' </strong>符号，然后单击“编辑”。点击“自动启动”，然后点击“保存”。再次点击“<strong class="jq hu"> ⋮' </strong>符号，并点击“开始”。一旦开始动画消失，刷新你的浏览器，你应该看到你的路由器分配给你的新监狱的IP地址。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lj"><img src="../Images/a86f22560f15cfda1794ee91ac503b94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXHYY4hjSvZsHhAdtbr84A.png"/></div></div></figure><p id="4668" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">恭喜你，你刚刚建立了你的第一个监狱！</p><h1 id="3267" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">定义:IP范围/子网/网络掩码/MAC/WAN/LAN</h1><p id="34c4" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">随着新设备连接到您的路由器或从您的路由器分离，您的路由器将分配不同的IP地址。我们想专门为我们的监狱保留一个IP地址。我们的路由器可以根据其<a class="ae km" href="https://techterms.com/definition/macaddress" rel="noopener ugc nofollow" target="_blank">“媒体访问控制”(MAC)地址</a>唯一地识别不同的以太网设备，并为该MAC地址保留一个IP地址。</p><p id="4abe" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">大多数路由器将192.168.1.0/24指定为私有网络的<a class="ae km" href="https://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml" rel="noopener ugc nofollow" target="_blank">默认子网。一个</a><a class="ae km" href="https://en.wikipedia.org/wiki/Subnetwork" rel="noopener ugc nofollow" target="_blank">子网</a>是一组共享一个IP地址空间的计算机。/24被称为<a class="ae km" href="https://www.computerhope.com/jargon/n/netmask.htm" rel="noopener ugc nofollow" target="_blank">网络掩码</a>。网络掩码代表一系列IP。例如，192.168.1.0/24代表254个IP地址，从192.168.1.1到192.168.1.254。有时/24表示为子网掩码255.255.255.0。你可以在这里玩一个子网掩码计算器<a class="ae km" href="http://www.subnet-calculator.com/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="3148" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">此子网192.168.1.0/24代表您的路由器与互联网逻辑隔离的所有设备。您只有一个互联网服务提供商(ISP)分配给您的IP地址。您的路由器在逻辑上转换您的家庭子网和互联网之间的流量。通常，您的路由器将互联网称为“广域网”(WAN)，将您的家庭子网称为“局域网”(LAN)。</p><h1 id="0e86" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">可选:分配唯一的主子网范围</h1><p id="91e8" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">在后面的指南中，我们将设置一个VPN，以便您可以安全地远程访问您的家庭网络，所以现在我们将把您家庭的子网更改为一个不太常用的IP范围，以防止干扰远离家庭的远程子网。我们现在这样做是因为这样可以避免重新配置我们将要做的更改。登录到您的路由器，并转到网络/接口/局域网</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div class="fe ff lk"><img src="../Images/57acaebb42ca72f62f7abdfbfefd312c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*6mRuk1yJ5L1K-9mJECOgkw.png"/></div></figure><p id="f62f" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">将IPv4地址更改为类似192.168.XXX.1的地址，其中XXX不是0或1。我选了84。你可能需要重新启动你的电脑来检测新的子网，并获得一个新的IP地址分配。</p><h1 id="4b13" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">我们监狱的IP静态租赁</h1><p id="8dbb" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">现在选择网络/DHCP和DNS。在这里，您可以看到连接到路由器的所有LAN设备。你应该看到你的比特币节点监狱也列在这里。向下滚动到“静态租赁”，并为我们的比特币节点监狱创建一个。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff ll"><img src="../Images/c7636b0c0d0cd5b9ec299928b05c8108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gj0iDecqqn8ImGa8sq6jxw.png"/></div></div></figure><p id="8e7e" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">点击“保存并应用”。</p><h1 id="ae29" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">从公共互联网地址转发端口8333到我们的监狱</h1><p id="d1a6" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">您的路由器还提供了一个“防火墙”，限制哪些端口可以在您的家庭子网和互联网之间通信。可以把端口想象成通向每个IP地址的无数扇门。默认情况下，您的路由器会尽可能关闭这些门。对于连接到您的节点的其他节点，它们需要连接到您的公共IP地址和端口，通过路由器，到监狱的子网IP和端口。开放口岸就像打开了一扇通往世界的大门，所以我们要小心我们开放什么口岸。考虑下面的例子，我只是为你的互联网IP地址和分配给你的监狱的家庭子网IP抛出随机数。</p><p id="1d3f" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">(互联网IP):(端口)—路由器→(家庭子网bitcoincore jail IP):(端口)</p><p id="9fff" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">123.234.165.254:8333—路由器— -&gt;192.168.1.123:8333</p><p id="7c71" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">为了在您的路由器防火墙中制定这一例外规则，我们将把端口8333转发到我们的bitcoincore监狱。登录到您的openWRT路由器，并选择网络/防火墙/端口转发。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div class="fe ff lm"><img src="../Images/dde119f074a82634d5b05c90b10344af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*LQB-PNUjQOKtWi480hutFA.png"/></div></figure><p id="70b4" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">制定一个新规则，我就叫它比特币_节点，使用TCP协议，从外部WAN区端口8333到我们比特币_节点监狱的内部区域LAN ip地址在端口8333。确保你选择正确的IP地址分配给你的监狱！</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff ln"><img src="../Images/2b126db15d475ab2927de215a402287e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cmnae49dZBT4MR0aAgT3Yw.png"/></div></div></figure><p id="abfb" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">点击“保存并应用”。</p><p id="b3ae" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">您的监狱网络现已配置完毕。让我们安装一些软件！</p><h1 id="6614" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">安全套接字外壳(SSH)进入监狱&amp;编译比特币&amp;安装</h1><p id="23b5" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">SSH是一种通过网络远程管理服务器的方式。当您不将显示器和键盘直接插入服务器时，它被称为“无头”服务器。最流行的SSH客户端叫做<a class="ae km" href="https://www.putty.org/" rel="noopener ugc nofollow" target="_blank"> PuTTY，在这里下载</a>。连接到您的FreeNAS的IP地址，并使用您的凭据登录。</p><p id="232f" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">类型:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="7f71" class="ls ir ht kv b fv lt lu l lv lw"># iocage list</span></pre><p id="d535" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">你应该看到你的比特币节点监狱列表。</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="c2ad" class="ls ir ht kv b fv lt lu l lv lw">iocage console bitcoin_node</span></pre><p id="d709" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">你被录取了。让我们开始安装东西吧！</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="4d4e" class="ls ir ht kv b fv lt lu l lv lw"># <!-- -->pkg install autoconf automake boost-libs git gmake libevent libtool <!-- -->libzmq4 <!-- -->openssl pkgconf wget nano tor python3</span></pre><p id="d65e" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">去<a class="ae km" href="https://github.com/bitcoin/bitcoin/releases" rel="noopener ugc nofollow" target="_blank">https://github.com/bitcoin/bitcoin/releases</a>，找到我们想要安装的tar.gz版本。https://github.com/bitcoin/bitcoin/archive/v0.17.1.tar.gz<a class="ae km" href="https://github.com/bitcoin/bitcoin/archive/v0.17.0.1.tar.gz" rel="noopener ugc nofollow" target="_blank">的最新版本是0 . 17 . 1</a></p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="7a33" class="ls ir ht kv b fv lt lu l lv lw"># wget <a class="ae km" href="https://github.com/bitcoin/bitcoin/archive/v0.17.0.1.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/bitcoin/bitcoin/archive/v0.17.1.tar.gz</a><br/># tar xzvf v0.17.1.tar.gz</span></pre><p id="f792" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">要查看当前目录中的内容，请键入<code class="eh ks kt ku kv b">ls</code>(缺少/意味着在根目录中，您可以通过键入<code class="eh ks kt ku kv b">cd /root</code>导航到根目录)</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/be1d82d288ca4657a0987393813c27dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*eFn6Kek5kyIm6pyD2fG2DA.png"/></div></figure><p id="900c" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">你可以看到我们下载的文件，<code class="eh ks kt ku kv b">v0.17.1.tar.gz</code>和解压缩的目录<code class="eh ks kt ku kv b">bitcoin-0.17.1</code>，让我们改变到比特币目录，并配置编译。</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="ff64" class="ls ir ht kv b fv lt lu l lv lw"># cd bitcoin-0.17.1<br/># sh <br/># ./contrib/install_db4.sh `pwd`<br/># export BDB_PREFIX='/root/bitcoin-0.17.1/db4'<br/># ./autogen.sh<br/># ./configure MAKE=gmake BDB_LIBS="-L${BDB_PREFIX}/lib -ldb_cxx-4.8" BDB_CFLAGS="-I${BDB_PREFIX}/include" --without-gui --without-miniupnpc<br/># gmake check<br/># gmake install</span></pre><p id="0e2f" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">这个过程可能需要一段时间。完成并安装后，我们需要添加一个rc.d脚本，以便在启动时自动启动比特币守护进程。点击阅读更多关于FreeBSD rc.d脚本<a class="ae km" href="https://www.freebsd.org/doc/en_US.ISO8859-1/articles/rc-scripting/index.html" rel="noopener ugc nofollow" target="_blank">的信息。FreeBSD ports维护了一个启动脚本，我们可以在</a><a class="ae km" href="https://github.com/freebsd/freebsd-ports/blob/master/net-p2p/bitcoin/files/bitcoind.in" rel="noopener ugc nofollow" target="_blank">https://github . com/FreeBSD/FreeBSD-ports/blob/master/net-P2P/bitcoin/files/bitcoind . in</a>中使用该脚本(单击原始链接可以获得文件的直接链接)</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="26ec" class="ls ir ht kv b fv lt lu l lv lw"># cd /etc/rc.d/<br/># wget <a class="ae km" href="https://raw.githubusercontent.com/freebsd/freebsd-ports/master/net-p2p/bitcoin/files/bitcoind.in" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/freebsd/freebsd-ports/master/net-p2p/bitcoin/files/bitcoind.in</a><br/># mv bitcoind.in bitcoind<br/># chmod +x bitcoind</span></pre><p id="3a95" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">让我们编辑本地环境的启动脚本:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="22a3" class="ls ir ht kv b fv lt lu l lv lw">nano bitcoind</span></pre><p id="8231" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">%%PREVIX%%变量需要改为本地路径，用户需要改为<code class="eh ks kt ku kv b">_tor</code>:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="034f" class="ls ir ht kv b fv lt lu l lv lw">command="/usr/local/bin/bitcoind"<br/>: ${bitcoind_user:="_tor"}<br/>: ${bitcoind_group:="_tor"}<br/>: ${bitcoind_config_file:="/root/.bitcoin/bitcoin.conf"}</span></pre><p id="5194" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">现在我们已经安装了启动脚本，让我们在/etc/rc.conf中启用它:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="4ba0" class="ls ir ht kv b fv lt lu l lv lw">sysrc 'bitcoind_enable=yes'</span></pre><p id="b9b5" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">让我们制作比特币的<a class="ae km" href="https://jlopp.github.io/bitcoin-core-config-generator/" rel="noopener ugc nofollow" target="_blank">配置文件</a>:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="34a7" class="ls ir ht kv b fv lt lu l lv lw">mkdir /var/db/bitcoin<br/>mkdir /root/.bitcoin<br/>nano /root/.bitcoin/bitcoin.conf</span></pre><p id="3424" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">添加以下几行:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="ee1b" class="ls ir ht kv b fv lt lu l lv lw">datadir=/var/db/bitcoin<br/>server=1<br/>txindex=1</span></pre><p id="8257" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">要保存在nano中，按CTRL+O，退出，CTRL+X</p><h1 id="bacc" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">隐藏服务的位编码</h1><p id="ff0a" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">IP地址就像街道地址，它们不提供匿名。Tor是一种网络，它通过加密和反弹网络中的数据来伪装您的实际IP地址，从而防止追踪。我们将配置bitcoind作为隐藏服务在Tor网络上进行通信，以及通过IP进行通信。</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="ff08" class="ls ir ht kv b fv lt lu l lv lw"># sysrc 'tor_enable=yes'<br/># nano /usr/local/etc/tor/torrc</span></pre><p id="9b56" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">将下列行添加到tor的配置文件中</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="14d1" class="ls ir ht kv b fv lt lu l lv lw">ControlPort 9051<br/>CookieAuthentication 1<br/>CookieAuthFileGroupReadable 1</span></pre><p id="539d" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">保存并退出。</p><h1 id="0b87" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">重启监狱并验证</h1><p id="18b2" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">回到你的监狱的freenas GUI。停下来，然后开始你的比特币监狱。SSH回到您的监狱，并检查运行的进程:</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="080f" class="ls ir ht kv b fv lt lu l lv lw"># ps auxww</span></pre><p id="4658" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">你应该看到tor和bitcoind在运行。使用bitcoin-cli通过其远程过程调用(RPC)接口从bitcoind调用一些信息。RPC是软件与节点交互和操作的方式。getnetworkinfo会显示你的tor地址。</p><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="12d1" class="ls ir ht kv b fv lt lu l lv lw"># bitcoin-cli getblockchaininfo<br/># bitcoin-cli getnetworkinfo </span></pre><h1 id="4ec8" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">可选项:Bitcoind-ncurses2终端用户界面</h1><p id="9418" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">这个是一个非常酷的终端用户界面(TUI ),它通过RPC接口与您的节点通信。除了其他特性之外，它还显示了关于您的节点正在做什么的有趣数据。</p><figure class="kx ky kz la fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff ly"><img src="../Images/ca50200c29aac22c51c8db9713b6fc78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0wF2cxOfDatQhIygLHT3w.png"/></div></div></figure><pre class="kx ky kz la fq lo kv lp lq aw lr dt"><span id="f6a6" class="ls ir ht kv b fv lt lu l lv lw"># cd /root<br/># pkg install py36-pip python3<br/># <!-- -->git clone <a class="ae km" href="https://github.com/esotericnonsense/bitcoind-ncurses2" rel="noopener ugc nofollow" target="_blank">https://github.com/esotericnonsense/bitcoind-ncurses2</a><br/># pip-3.6 install -r bitcoind-ncurses2/requirements.txt<br/># python3 /root/bitcoind-ncurses2/main.py --datadir /var/db/bitcoin</span></pre><p id="ac3d" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">使用CTRL+Z暂停</p><p id="dfb7" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">编辑:2018年9月18日:版本0.17.0rc3被0.16.3取代</p><p id="a712" class="pw-post-body-paragraph jo jp ht jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hm dt translated">编辑:2019年12月18日:更新至版本0.17.0.1，并使用ZeroMQ编译，以兼容Lightning Lab的lnd。</p><blockquote class="lz"><p id="f367" class="ma mb ht bd mc md me mf mg mh mi kl ek translated"><a class="ae km" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mk ml mm mn mo lb fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mj"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>