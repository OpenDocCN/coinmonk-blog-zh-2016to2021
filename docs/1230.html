<html>
<head>
<title>Step by Step Approach to create DAPP — using Ethereum, ReactJS &amp; IPFS — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用以太坊、ReactJS和IPFS逐步创建DAPP的方法第2部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/step-by-step-approach-to-create-dapp-using-ethereum-reactjs-ipfs-part-2-1f8095dc154d?source=collection_archive---------1-----------------------#2018-08-04">https://medium.com/coinmonks/step-by-step-approach-to-create-dapp-using-ethereum-reactjs-ipfs-part-2-1f8095dc154d?source=collection_archive---------1-----------------------#2018-08-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk iq ir is it fe ff paragraph-image"><div class="ab fr cl iu"><img src="../Images/41e72dee533a8ea4b06b4624049463b5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ZLNUgM3jkWNQxEgbUw5M9w.png"/></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">Source: Google</figcaption></figure><p id="a0a9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">抱歉耽搁了！！，一直忙于生产中的产品设置…开始吧，我的下一章。</p><p id="e7eb" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在我的上一篇文章(<a class="ae jz" rel="noopener" href="/coinmonks/step-by-step-approach-to-create-dapp-using-ethereum-reactjs-ipfs-part-1-42ea4cf69488">第一部分</a>)中，我们已经看到了下面的6个步骤，如果你正在阅读这篇文章，请确保在开始阅读之前先阅读第一部分。</p><blockquote class="ka kb kc"><p id="9265" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">第一步:我们需要安装MetaMask并在Chrome中启用扩展</p><p id="4b34" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">第二步:需要安装“Ganache”</p><p id="7ebf" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">步骤3:需要使用NPM安装“松露框架”</p><p id="1529" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">步骤4:创建reactJS应用程序</p><p id="eff3" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">步骤5:使用Solidity语言创建我们的第一个智能合同</p><p id="731c" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">步骤6:在Ganache网络中使用Truffle部署我们的合同</p></blockquote><p id="bf0d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们将继续下一组步骤..我们开始吧。我们已经拆箱了react app &amp;我们把它命名为<strong class="jd hu"> mydapp。</strong>让我们继续吧</p><p id="7882" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">首先阅读我们的智能合同，看看它包含什么</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kh"><img src="../Images/93b00a853eb456328439257b1026ea72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IT2CCm9Im_IlBe1-xHgm-w.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">Default Solidity Program</figcaption></figure><blockquote class="ka kb kc"><p id="4806" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">注意:如果你是使用solidity的smartcontract新手，我建议你去Youtube上看看solidity教程，你会发现很多作者都很好地解释了solidity语言</p></blockquote><p id="91ac" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Pragma -&gt;这只不过是一个根或事实，在这个程序中，它表明高于0.4.18的Solidity编译器应该支持。准确地说，是兼容性检查。</p><p id="f296" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">contract -&gt;每个smartcontract都应该以关键字“contract”开头，后跟contractname。始终使用camelcase或Propcase以获得更好的命名约定</p><p id="b26e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">datatypes-&gt; solidity中的data types很多，这里我们有一个无符号整数用于“storedData”变量。默认情况下，所有变量都声明为“公共”访问。如果你不想让其他契约访问这个变量，那么使用适当的访问修饰符，比如“私有的，受保护的，内部的”等等。</p><p id="4878" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个程序有两个功能，一个是“设置”，另一个是“获取”。</p><p id="40b8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Set函数接收输入x并将该值存储到“StoreData”中</p><p id="0b4d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">Get函数返回“storedData”进行显示</p><blockquote class="ka kb kc"><p id="c795" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">N <!-- -->注:在区块链写作成本价(气价)，阅读免费..所以在这里当你调用“Set”函数时，会调用“MetaMask”来传输气体，而如果你调用“Get”函数它就不会..</p></blockquote><p id="c0ec" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">使用这个简单的程序，让我们玩玩IPFS，存储我们的文档，然后将散列检索回最终用户。</p><p id="c263" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">坚持住！，什么是IPFS？</p><p id="d743" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">IPFS是一个对等分布式文件系统，它试图将所有具有相同文件系统的计算设备连接起来。在某些方面，IPFS类似于<a class="ae jz" href="https://en.wikipedia.org/wiki/World_Wide_Web" rel="noopener ugc nofollow" target="_blank">万维网</a>，但是IPFS可以被视为一个单独的<a class="ae jz" href="https://en.wikipedia.org/wiki/BitTorrent" rel="noopener ugc nofollow" target="_blank"> BitTorrent </a>群，在一个<a class="ae jz" href="https://en.wikipedia.org/wiki/Git_(software)" rel="noopener ugc nofollow" target="_blank"> Git </a>库内交换对象。(来自维基)</p><p id="1b21" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">简单来说，如果你想在区块链中上传巨大的文件，这真的需要巨额资金(就以太而言)，而且绝对不可能花费仅仅是为了存储我们的文档软拷贝。你可以做的是，上传你的文件到IPFS，这将密码存储它，并检索出一个独特的“哈希”。这是检索您的文件的关键。</p><p id="5a8d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因此，在区块链中存储这个散列会很简单&amp;比存储实际文件的成本更低。</p><p id="3ca0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们来看看https://ipfs.io/是如何工作的</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kq"><img src="../Images/bba8bcdb065b36d11e81e5a16d71d09a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k05S-RdgJziJtfP3-gs7Xg.png"/></div></div></figure><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kq"><img src="../Images/e344e9d3947af7a6ea5b3252b7cd251c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Np8Cof6_LD6e3MsnL9ns5A.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">Source: IPFS.io</figcaption></figure><p id="e501" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">好了，让我们从理论部分结束吧！。现在我们清楚了，内容将存储在IPFS &amp;生成的散列将存储在区块链。让我们看看我们将如何实现。哈希是32字节的字母数字值，我们应该更新我们的智能合同来存储这个值。我将使用数据类型—字符串来更新智能合约</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kr"><img src="../Images/e6e8ee5b6a6a1aa735074d674ef1db6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Owpy2M4qZtLYSt9hvMOwEQ.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">Note: error lines are not actually an error its a space indentation error.</figcaption></figure><p id="61f8" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们使用truffle命令再次编译这个智能契约，并检查build文件夹中的json文件。</p><p id="af71" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">使用以下命令</p><p id="ca1c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">松露迁移-网络ganache -重置-编译-全部</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ks"><img src="../Images/db38984489235117d573ae4a9f5c1142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y-HHJ2ePY3OSV91EXPtYZQ.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">SmartContract Migrated Successfully</figcaption></figure><p id="8292" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要验证我们的合同地址，有两种方法，你可以使用truffle控制台&amp;获取合同地址，或者直接进入“build”文件夹，在那里你会找到你的contract.json(在这种情况下，它是SimpleStorage.json)</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kt"><img src="../Images/328dee7a1dd8a85217f9b9418a3b0895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p02ENPrbQ1cxbmxbZ8wGkw.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">SimpleStorage.Json</figcaption></figure><p id="6adc" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">只要到这个文件的底部，你会在网络配置中找到“合同地址”。如果你看这个，它会显示网络ID : 5777(来自你的Ganache)</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/a2a9e8ec7b2f4be087dd4130692ae975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F30ANua_uc78HWEK6ZPtGQ.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">Contract Address</figcaption></figure><p id="4f67" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个契约地址对于通过reactJs应用程序从我们的智能契约中调用函数非常重要。所以要记下来！。</p><blockquote class="ka kb kc"><p id="ed7b" class="jb jc kd jd b je jf jg jh ji jj jk jl ke jn jo jp kf jr js jt kg jv jw jx jy hm dt translated">注意:当您在smart contract中进行任何更改时，使用reset &amp; compile-all标志以清除旧的已部署smart contract并创建新的contract地址非常重要。</p></blockquote><p id="a60c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated"><strong class="jd hu">第七步:将SmartContract逻辑集成到ReactJS程序中，这样你就可以使用前端GUI </strong></p><p id="7251" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们看看如何整合..</p><p id="59be" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在项目结构中的“Src”文件夹下创建以下两个文件。</p><p id="f4f3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">&gt; web3.js(坚持这个命名约定，因为我们将在许多文件中调用它)</p><p id="8bee" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">&gt; storemyvalue.js(用户自定义名称，您可以保留您想要的任何内容)</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kv"><img src="../Images/f7f513c70dd89f5160aeb05c09b28fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nn9g7j9aqrVQtkGqQdV11Q.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">web3.js</figcaption></figure><p id="4d25" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建storeMyValue.js并插入以下行</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kw"><img src="../Images/84ff6ce194cd92470d7599cc7b7e8bf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ET-ZGEAfRje-sLvYjq897A.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">storeMyValue.Js</figcaption></figure><ul class=""><li id="859c" class="kx ky ht jd b je jf ji jj jm kz jq la ju lb jy lc ld le lf dt translated">const address-&gt;是合同地址，可以从构建文件夹下的SampleStorage.json中获得</li><li id="d0a0" class="kx ky ht jd b je lg ji lh jm li jq lj ju lk jy lc ld le lf dt translated">abi -&gt;应用程序二进制接口，您可以从构建文件夹下的SampleStorage.json获得它</li></ul><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ll"><img src="../Images/ca3080c2dc8f57087c6c206843725c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*baJTaWJC5iowVPCAXHk2Hg.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">Fetch ABI from SampleStorage.Json</figcaption></figure><p id="e47c" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">更新上述参数后，您的文件应该如下所示</p><figure class="ki kj kk kl fq it fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff lm"><img src="../Images/8fd8ddcf51c54465bd048b63ecc1c1dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0PifxLj7_4XmnhVEafBIg.png"/></div></div><figcaption class="ix iy fg fe ff iz ja bd b be z ek">storeMyValue.js -&gt; after updating above two params</figcaption></figure><p id="20cf" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">有两种方法，您可以导入合同地址和各自的ABI到您的反应堆。第一，你可以像上面一样建立一个单独的文件(storeMyvalue.js)并添加ABI(应用程序二进制接口)和网络地址</p><p id="e1b3" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">第二个选项是，当您迁移您的合同时，将生成一个包含contract.json(contract是您的合同名称)的构建文件夹。使用这个文件，您可以调用您的契约和各自的方法。</p><p id="8e40" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们将很快在我的下一篇文章中看到这个选项(:)。</p><p id="d7fc" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">第一部分-&gt; <a class="ae jz" rel="noopener" href="/coinmonks/step-by-step-approach-to-create-dapp-using-ethereum-reactjs-ipfs-part-1-42ea4cf69488">点击这里</a> <br/>国际泳联第一部分- &gt; <a class="ae jz" rel="noopener" href="/@lokeshwaran.a82/step-by-step-approach-to-create-dapp-using-ethereum-reactjs-ipfs-part-3-final-851187ca9c24">点击这里</a></p><p id="7f19" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">注:喜欢这篇文章？，给Logeswaran竖起大拇指(鼓掌)并在Linkedin<a class="ae jz" href="http://www.linkedin.com/in/logeswaranaudhikesavan" rel="noopener ugc nofollow" target="_blank">/</a><a class="ae jz" href="https://twitter.com/lokeshwaran_a" rel="noopener ugc nofollow" target="_blank">Twitter</a>上关注他</p><p id="ea1b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要获得本系列下一部分的更多更新，请标记这个故事！…在我的下一篇文章中再见。</p></div></div>    
</body>
</html>