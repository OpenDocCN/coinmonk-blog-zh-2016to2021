<html>
<head>
<title>Ardor Lightweight Contracts Security Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ardor轻量级合同安全模型</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ardor-lightweight-contracts-security-model-3ec67e213596?source=collection_archive---------4-----------------------#2018-10-26">https://medium.com/coinmonks/ardor-lightweight-contracts-security-model-3ec67e213596?source=collection_archive---------4-----------------------#2018-10-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/978c518270af0abfd385e788dd0dab5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_fLfFoTRAYY78U4IOC2Isw.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Ardor Lightweight Contracts Security Model, photo by <a class="ae jf" href="https://unsplash.com/photos/c53HvA-blYQ?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Victor Garcia</a> on <a class="ae jf" href="https://unsplash.com/search/photos/blockchain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2976" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">正如我在之前的文章中所讨论的，轻量级契约为现有的“智能”契约框架提供了一个非常安全的替代方案。我们的基于热情的契约仅由特定的契约运行者节点执行，并且不存储任何状态，使它们免受可能允许黑客窃取或冻结资金的错误的影响。只要契约运行者节点信任契约开发者和/或采取合理的措施来审查契约代码，则与其他框架相比，该节点可以在更好的安全保证下运行契约。</p><p id="0cc2" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然而，为了充分发挥这项技术的潜力，我们希望合同运营商运行由他们不完全信任的第三方开发的合同。支持这一点将为合同提供类似市场的“应用商店”体验，任何节点运行者都可以选择运行任何合同，而不必信任合同的开发者，就像应用在智能手机上运行一样。我们通过按合同授予权限和合同执行的沙盒来实现这一点。</p><p id="5f1d" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">让我们讨论一下运行从区块链下载的不可信合同代码的潜在风险。这样做打开了我们需要防范的几个攻击媒介。</p><p id="5185" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">请注意，默认情况下，任何节点都不运行合同，因此不会暴露于下面列出的风险。默认情况下，即使充当协定运行程序的节点也不会运行任何协定。它首先需要设置一个从契约运行者帐户到它想要运行的契约的显式契约引用。</p><p id="c870" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">让我们假设您已经<a class="ae jf" href="https://ardordocs.jelurida.com/Lightweight_Contracts" rel="noopener ugc nofollow" target="_blank">设置</a>您的节点为契约运行程序，并选择通过设置契约引用来运行契约。您的节点面临什么风险？</p><p id="5b61" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">让我们列出风险，然后看看热情轻量级合同如何防范这些风险。</p><ol class=""><li id="8c1e" class="ke kf ht ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated">操作系统访问——从区块链下载的合同理论上可以读取您本地驱动器上的任何文件或删除任何文件。它可以访问环境变量，在本地工作站上运行程序，杀死你的节点等。很明显，我们不想让合同在没有我们允许的情况下执行这些操作。</li><li id="60d8" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated">查询节点信息—即使我们阻止对本地工作站资源的直接访问，我们仍然不希望合同能够使用节点本身间接访问它，例如，合同运行程序的属性文件可能存储密码短语或管理员密码。我们也不希望契约能够告诉节点进程id或关于契约运行程序的其他环境信息，因为这可能有助于使用旁路攻击节点。</li><li id="d7be" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated">误用节点—恶意合同可以尝试使用节点的对等连接来DDOS其他节点，或者尝试误用节点资源和信誉来攻击其他节点或最终用户。</li><li id="a4eb" class="ke kf ht ji b jj kn jn ko jr kp jv kq jz kr kd kj kk kl km dt translated">破坏节点内部状态—恶意契约可以更改契约运行者节点的状态，例如，通过以扰乱节点内部状态的方式改变内部帐户余额表。这与其说是一个真正的问题，不如说是一个麻烦，因为这个节点在某个时候会被其他节点列入黑名单，但是它可以被用来试图以某种方式误导节点操作者或在同一节点上运行的其他契约。</li></ol><p id="302f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了减轻这些风险并保护契约运行者节点免受它选择运行的不受信任的契约发出的攻击，使用复杂的沙箱来在它们自己的权限减少的环境中运行契约。我们的解决方案基于Java认证和授权服务(JAAS)，这可以说是最健壮的安全框架之一。</p><p id="64b7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">基于这个解决方案。契约是使用它们自己的类装入器装入的。合同运行人员使用标准Java策略工具将合同权限分配给合同，并且可以为每个合同开发人员帐户或每个特定合同分配策略。安全性是由Java类库本身加强的。</p><p id="afa0" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们没有发明这种许可的沙盒解决方案。相反，我们选择将Java权限系统集成到我们代码的内部。我们相信Java工程师和20年的关键任务Java应用程序遗产能够为我们的合同提供最好的安全框架。</p><p id="30ad" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">总而言之，轻量级合同存放在区块链，但它们的执行不属于区块链共识。他们的输出是正常的区块链交易。因此，他们不能系统地伤害区块链本身。由于它们是无状态的，与其他解决方案相比，合同损失或锁定用户资金的风险要小得多。</p><p id="1592" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">契约运行者节点在受保护的沙箱中运行它们的契约，该沙箱保护本地节点免受契约试图进行的任何恶意活动。这由内置的Java安全框架支持。我们没有使用自己的安全系统，而是利用了现有的最佳安全框架之一。</p><blockquote class="ks"><p id="e1b8" class="kt ku ht bd kv kw kx ky kz la lb kd ek translated"><a class="ae jf" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ld le lf lg lh iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lc"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>