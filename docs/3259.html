<html>
<head>
<title>Ethereum’s Issuance: blockReward</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊的发行:blockReward</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereums-issuance-minerreward-3cad5b9a72ff?source=collection_archive---------2-----------------------#2020-08-15">https://medium.com/coinmonks/ethereums-issuance-minerreward-3cad5b9a72ff?source=collection_archive---------2-----------------------#2020-08-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="7946" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最近，在Crypto Twitter上有一场关于以太坊货币供应的争论(在这里开始<a class="ae jo" href="https://twitter.com/pierre_rochard/status/1291522796410089474" rel="noopener ugc nofollow" target="_blank">，在这里</a>继续<a class="ae jo" href="https://twitter.com/hashtag/SupplyGate" rel="noopener ugc nofollow" target="_blank">)。有人声称以太坊的货币供应不容易获得，也没有得到广泛认同。</a></p><p id="0491" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">新闻快讯:这两种说法都是对的。</p><p id="079d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在某一点上，我们的项目TrueBlocks被提及，所以我想我应该写一篇文章(现在已经发展为两篇文章<a class="ae jo" rel="noopener" href="/@tjayrush/ethereums-issuance-unclereward-72de71b0f9f6">和一个代码库</a><a class="ae jo" href="https://github.com/Great-Hill-Corporation/trueblocks-core/tree/develop/src/other/issuance" rel="noopener ugc nofollow" target="_blank"/>)来探讨这个问题。</p><p id="e47b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">虽然我们在这里提出的工作不一定使数字更容易获得(修复节点！)，数字精确到小数点后18位，并验证到每个区块的链上帐户余额。我们用TrueBlocks做到了这一点。</p><h2 id="dabf" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj dt translated">回归基础</h2><p id="8894" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hm dt translated">要真正深入研究，我们要回到基础。在以太坊，这意味着阅读黄皮书。我们将仔细研究第11.3节，因为该节描述了新以太的发行，或者他们称之为奖励应用。</p><p id="93bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我将一字不差地呈现11.3节的每个句子，然后展示一份与该句子相关的方程式，然后将这些方程式翻译成英文。最后，我们使用<strong class="is hu"> TrueBlocks </strong>将这些方程翻译成有目的地简化的<code class="eh kp kq kr ks b">C++</code>代码。<strong class="is hu"> TrueBlocks </strong>帮助我们提取和分析数据，作为<a class="ae jo" href="https://github.com/Great-Hill-Corporation/trueblocks-core/tree/develop/src/other/issuance" rel="noopener ugc nofollow" target="_blank">代码库</a>的一部分。</p><h2 id="37ef" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj dt translated">第11.3节</h2><p id="ef51" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hm dt translated">我们从11.3节的介绍性句子开始:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff kt"><img src="../Images/e7913e496e45249f9f42832db7695887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8o-rbq9R3jGYnOA9cHDrcA.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Introductory sentence of Section 11.3 of Yellow Paper</figcaption></figure><p id="f071" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于没有等式，我们将直接跳到英语重写开始:</p><blockquote class="lj lk ll"><p id="9bbe" class="iq ir lm is b it iu iv iw ix iy iz ja ln jc jd je lo jg jh ji lp jk jl jm jn hm dt translated">在每一个街区，至少一个，但可能更多的账户余额被<strong class="is hu">发行</strong>新硬币。</p></blockquote><p id="8235" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在讲得太远之前，我们先来定义一下<em class="lm"/>ommer这个词。“Ommer”是中性词，表示父母的兄弟姐妹。你的叔叔和婶婶是孤儿。“ommer”和“uncle”这两个词在本文中可以互换使用。每个块都有一个零个或多个ommers的列表。给定块中最多有两个ommers(第11.1节)。</p></div><div class="ab cl lq lr hb ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hm hn ho hp hq"><p id="78fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">上句中提到了两个不同账户余额的增加。</p><p id="b2af" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将第一次增加称为批量奖励的<strong class="is hu">受益人的账户余额</strong>—<code class="eh kp kq kr ks b">blockReward</code>。每个区块都有一个<code class="eh kp kq kr ks b">blockReward</code>。<code class="eh kp kq kr ks b">blockRewards</code>论述此文。</p><p id="4ecd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将第二次增加——到ommer rewards 的<strong class="is hu">受益人的账户余额——称为<code class="eh kp kq kr ks b">uncleReward</code>。不是所有街区都有大叔；因此，并不是所有的区块都有一个<code class="eh kp kq kr ks b">uncleReward</code>。<code class="eh kp kq kr ks b">uncleRewards</code>在<a class="ae jo" rel="noopener" href="/@tjayrush/ethereums-issuance-unclereward-72de71b0f9f6">下篇</a>中讨论。</strong></p><h2 id="f6fe" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj dt translated">第11.3节的关键</h2><p id="82fe" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hm dt translated">黄皮书第11.3节的下一句话是计算的关键。这句话充分描述了以太坊的<strong class="is hu">发行</strong>:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lx"><img src="../Images/e7107fa3b49e3b31eea1e9366c9d2fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sdEuTqRXVsg_WSNvjCcN4g.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Second sentence of Section 11.3 of Yellow Paper</figcaption></figure><p id="78b5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">虽然这个句子是完整的，但它非常不合语法，很难理解。</p><p id="b57a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它有两个主要分句，用蓝色括号标识，更糟糕的是，第一个分句包含了两个被搅在一起的想法(并被分号错误地分开)。这两个想法应该结合起来，就像我对红色的修正一样。</p><p id="8940" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">幸运的是，这句话的两个部分对应于前面提到的两种余额增加。第一条是指给予整笔奖励 ( <code class="eh kp kq kr ks b">blockReward</code>)的<strong class="is hu">受益人的奖励。第二条是指<strong class="is hu">的ommer奖励受益人</strong> ( <code class="eh kp kq kr ks b">uncleReward</code>)。</strong></p><h2 id="a6ef" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj dt translated">批量奖励</h2><p id="1919" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hm dt translated">请看第11.3节第二句话的前半部分(已更正)…</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ly"><img src="../Images/ff16491647f76fc8872c9f74e8fa3c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwMWXd7--2578wClqGfcQg.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">First half of second sentence of Section 11.3 (corrected)</figcaption></figure><p id="a6a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">…您应该能够看到这仅指的是<strong class="is hu">受益人账户</strong>(即中奖矿工)。它表示中奖矿工的帐户余额增加(即硬币由<strong class="is hu"> <em class="lm">发行</em> </strong>至<strong class="is hu"> <em class="lm"> ) </em> </strong>一个由<code class="eh kp kq kr ks b">R-block</code>(以下我们称之为<code class="eh kp kq kr ks b">baseReward</code>)指定的金额加上该金额的<code class="eh kp kq kr ks b">1/32</code>给区块中的每个大叔。</p><p id="f732" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">黄皮书用两个等式总结了这一数额的产生:等式161和等式162。等式161表示:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lz"><img src="../Images/6742e54a71456c3ee449c8de26ff0177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9wSs4hK843xXdHi4G-k85Q.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Equation 161</figcaption></figure><p id="3423" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">哪里…</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ma"><img src="../Images/b87fce71719460953ed0ab6e333c113b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZId3S3gIK-m2xvjhqJG0Iw.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Explanation of symbols in Equation 161</figcaption></figure><p id="8f24" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">换句话说，等式161表示，“ω是一个函数，它取当前块和当前块之前的状态，并转换到一个新状态，该新状态保持不变，除了……等式162中出现的内容”:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mb"><img src="../Images/de1b2acb5369adc50a8041611c3eb42c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4HEbTRpHsytNYGNlN0dng.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Equation 162</figcaption></figure><p id="f10b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">哪里…</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mc"><img src="../Images/afbad4e4c3d95eb287954f2b2cd3019d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9VQlxPK_xeoPQJ_eVSvs3Q.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Explanation of symbols in Equation 162</figcaption></figure><p id="e01a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">等式162表示“对于每个叔叔，受益人(矿工)的账户余额增加了<code class="eh kp kq kr ks b">baseReward</code>加上<code class="eh kp kq kr ks b">baseReward</code>的1/32。”</p><p id="e34c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh kp kq kr ks b">baseReward</code>在方程166中定义为:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff md"><img src="../Images/2c885737d488376a7d5ed6f0a457163b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KqIGaP2UjjLj5MyYUhHWQQ.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Slightly incorrect Equation 166</figcaption></figure><p id="2512" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是稍微错误的，因为它忽略了在拜占庭硬分叉(从5以太到3)和在君士坦丁堡硬分叉(从3以太到2)的块奖励的变化。这一遗漏在法典中有所说明。</p><p id="dab7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以上所有晦涩难懂的内容都可以用三行代码来编写:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff me"><img src="../Images/3005e6c44bb93a8a409fd134e9e157ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCNA_iV9_WMoDJ9z_CgViQ.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Code for blockReward at a given block</figcaption></figure><p id="5628" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意，如果没有叔叔，<code class="eh kp kq kr ks b">blockReward</code>与<code class="eh kp kq kr ks b">baseReward</code>相同。如果有叔叔，每个叔叔的<code class="eh kp kq kr ks b">blockReward</code>增加<code class="eh kp kq kr ks b">baseReward</code>乘以<code class="eh kp kq kr ks b">1/32</code>。包括我们在内的一些人把这种额外增加称为<code class="eh kp kq kr ks b">nephewReward</code>。(恰当地说，如果一个块有一个叔叔，它有时被称为<code class="eh kp kq kr ks b">nephew</code>。)</p><p id="3a48" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">看起来很疯狂，这就是<code class="eh kp kq kr ks b">blockReward</code>的全部计算。我们将在下一篇文章中查看<code class="eh kp kq kr ks b">uncleReward</code>。</p></div><div class="ab cl lq lr hb ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hm hn ho hp hq"><p id="eded" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">两个功能<code class="eh kp kq kr ks b">getUncleCount</code>和<code class="eh kp kq kr ks b">getBlockReward</code>(在上面的代码中显示为绿色)是<strong class="is hu"> TrueBlocks </strong>的一部分，有待解释。</p><p id="7f07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh kp kq kr ks b">getUncleCount</code>是以太坊的RPC调用<code class="eh kp kq kr ks b">eth_getUncleCount</code>的直接通道。感兴趣的读者可参考<a class="ae jo" href="https://openethereum.github.io/wiki/JSONRPC-eth-module#eth_getunclecountbyblocknumber" rel="noopener ugc nofollow" target="_blank">文档</a>了解该功能。</p><p id="eb3d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><code class="eh kp kq kr ks b">getBlockReward</code>功能同样简单，因为它是<code class="eh kp kq kr ks b">blockNumber</code>的常量功能。下面是<code class="eh kp kq kr ks b">getBlockReward</code>的代码，它返回wei中的结果:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mf"><img src="../Images/095c1872e887df0795bf4da06876e7c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VjwLm-bavxzNLHbAlHb7fA.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Code for getBlockReward corrected for change of issuance at hard forks</figcaption></figure><p id="c719" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">回顾一下，这个函数最好叫做<code class="eh kp kq kr ks b">getBaseReward</code>。</p><p id="955f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">之前我提到过<code class="eh kp kq kr ks b">blockReward</code>只是以太坊<strong class="is hu">发行</strong>计算的一部分。另一部分叫做<code class="eh kp kq kr ks b">uncleReward</code>，将在下一篇文章的<a class="ae jo" rel="noopener" href="/@tjayrush/ethereums-issuance-unclereward-72de71b0f9f6">中描述。</a></p><h2 id="0c72" class="jp jq ht bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj dt translated">支持我们的工作</h2><p id="bb66" class="pw-post-body-paragraph iq ir ht is b it kk iv iw ix kl iz ja jb km jd je jf kn jh ji jj ko jl jm jn hm dt translated">我要感谢梅里亚姆·赞迪对这篇文章的帮助。</p><p id="07f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">帮助我们继续工作。访问我们的GitCoin赠款页面:<a class="ae jo" href="https://gitcoin.co/grants/184/trueblocks" rel="noopener ugc nofollow" target="_blank">https://gitcoin.co/grants/184/trueblocks</a>，今天就捐款吧。</p><p id="89a0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">或者，如果你不想让自己暴露在审查之下，但你仍然愿意捐赠，请将ETH发送到0xb 97073 b 754660 bb 356 dfe 12 f 78 AE 366d 77 DBC 80 f。</p><blockquote class="mg"><p id="b751" class="mh mi ht bd mj mk ml mm mn mo mp jn ek translated"><a class="ae jo" href="https://coincodecap.com?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mr ms mt mu mv ky fe ff paragraph-image"><a href="https://coincodecap.com?utm_source=coinmonks"><div class="fe ff mq"><img src="../Images/160ce73bd06d46c2250251e7d5969f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*BoDnKUyK8p4hitHAJZ5Pdw.png"/></div></a></figure></div></div>    
</body>
</html>