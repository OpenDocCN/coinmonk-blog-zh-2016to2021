<html>
<head>
<title>High frequency and high speed arbitrage and market making</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">高频高速套利与做市</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/high-frequency-and-high-speed-arbitrage-and-market-making-e721cec542d5?source=collection_archive---------5-----------------------#2021-03-10">https://medium.com/coinmonks/high-frequency-and-high-speed-arbitrage-and-market-making-e721cec542d5?source=collection_archive---------5-----------------------#2021-03-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="5e31" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">…为什么速度和低费用如此重要</h1><p id="b02b" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">由于每个交易所都有自己的订单簿，并且交易所是独立的、地理上分布的实体，因此每个交易所之间的订单簿是不同的。差异可能很小，也可能很大，它们会随时间变化，套利者和做市商会确保它们不会存在太久。</p><h2 id="898e" class="km ir ht bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz dt translated"><strong class="ak">套利</strong></h2><p id="64e9" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">交易所之间的价格差异导致这样的情况:在一个交易所购买一项资产，然后在另一个交易所以更高的价格出售，价格包括订单费用和一些假设的利润，这就是我们所说的套利。套利是一种相对简单的操作，在这种操作中，我们是市场订单或限价订单的双方接受者，这些订单具有“立即或取消”的生效时间。你可以在我的旧文章系列<a class="ae la" rel="noopener" href="/coinmonks/cryptocurrency-arbitrage-strategies-part-i-20e9dd327919">加密货币套利策略</a>中找到关于这个策略的更多细节。</p><h2 id="9998" class="km ir ht bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz dt translated"><strong class="ak">交叉外汇对冲做市</strong></h2><p id="92b2" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">当我们看到交易所A提供一项资产时——假设价格X比交易所B的价格Y低0.01 BTC——我们开始在交易所B为价格X +费用+假设利润提供0.01 BTC。这意味着我们将限价单放入交易所B的账簿中，当交易所A的价格发生变化时，我们会积极地调整这个订单。当我们的订单在交易所B完成时，这意味着我们以X +费用+假定利润的价格卖出了我们的BTC，我们在交易所A执行市价订单，为X购买0.01 BTC。在此操作之后，我们在BTC的总余额没有变化，我们在两个交易所都支付了费用，我们的口袋里有了一些额外的钱，这就是假定利润。</p><figure class="lc ld le lf fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff lb"><img src="../Images/e4d4a3e8b524853c2ece78f7245e4d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q1q42_pv2DikkdNV39d82Q.png"/></div></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">Figure 1: Market making with cross-exchange hedging</figcaption></figure><p id="f0a0" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">在这种情况下，我们一方使用限价单，总费用低于我们在套利中使用市价单的情况，一方的限价单保证了交易所匹配引擎将尽快满足我们的订单。这个因素使这种方法比两边都有两个接受订单更有弹性，因为接受订单我们有更高的滑点机会。</p><h2 id="4388" class="km ir ht bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz dt translated"><strong class="ak">价差的争夺</strong></h2><p id="f47b" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">在这两种情况下，一切都是从交易所的差价开始的。为了使这个例子更简单，我们假设价差是订单簿顶层条目的价格之间的差异(实际上，我们应该更深入地研究两个方向，我们的价差将由曲线而不是单个值来表示，您可以在<a class="ae la" href="https://www.multitrader.io/cross-exchange-order-book-matching/" rel="noopener ugc nofollow" target="_blank">我的关于交叉交换订单簿匹配</a>的文章中了解它)。如果我们在寻找<a class="ae la" href="https://blog.coincodecap.com/crypto-arbitrage-guide-how-to-make-money-as-a-beginner" rel="noopener ugc nofollow" target="_blank">加密套利</a>，我们将测量我们的价差，作为交易所A的买价和交易所B的买价或交易所A的买价和交易所A的买价之间的差额。如果是交叉交易所对冲的做市，价差是交易所A的买价和交易所B的买价或交易所A的买价和交易所B的买价之间的差额。</p><p id="29b0" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">假设在T1时刻，我们开始看到交易所之间的价差。这是比赛开始的时刻。谁先缩小差距，谁就能从差价中获利。</p><figure class="lc ld le lf fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff lw"><img src="../Images/c490deb41833b98cbc5513781a7a9fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GGBmlgxuy9sTsNhQvZfaSg.png"/></div></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">Figure 2: Spread in time</figcaption></figure><p id="bab1" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">为简单起见，我假设价差以线性方式清算。事实上，价差将在一个或多个不连续的步骤中清算，因此该图表应该看起来像楼梯。</p><p id="d59f" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">所以当我们开始看到价差时，是3美元。两个交易所的总费用是70美分——在这张图上用红色虚线表示。从理论上讲，如果我们能够立即结束运营，我们将获得2，3美元的利润。如果我们未能在价差降至70美分以下之前平仓，这意味着我们在此次操作中亏损，或者如果我们在对冲时使用了立即生效或取消生效的限价单，这意味着我们的订单被取消而没有任何填充，我们根本没有设法对冲，现在我们暴露了。从图1可知，从第1点到第5点，我们操作的总周转时间是400 ms，我们可以看到，在T2，当我们结束操作时，价差是2美元。减去费用后，它是1.3美元，比我们立即关闭的情况少76%，比我们的操作时间缩短两倍的情况少38%，如果它需要200毫秒。</p><p id="2f5c" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">现在，让我们来看看当我们在图3中的交易所处于高波动期时，价差会发生什么。</p><figure class="lc ld le lf fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff lx"><img src="../Images/a5eddef3a13283dd51b29bce8fd93037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pduREIPCExuh306xIoGRgw.png"/></div></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">Figure 3: high volatility situation</figcaption></figure><p id="805a" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">与平静期相比，交易总数和交易量可能上升数百倍。这可能会导致交易所之间的价差变大，运营条件也更具挑战性。为了便于举例，让我们假设两个交易所之间的价差在500ms内以比正常情况下快两倍的速度关闭。可以预期，exchange在发送订单时可能会略有延迟—更多的价格点、更多的客户、更多的负载通常意味着性能下降。第二件事是来自交易所的业务将影响交易所互联网连接的整体吞吐量。第三是exchange APIs接受您的订单，在繁重的负载下将需要更多的时间来处理您的订单请求。考虑到这三个因素，让我们假设正常周转时间从400毫秒增加30%到530毫秒。瞧，我们在水下。经过5.3亿个小时的运作，我们要么亏损了(相当多)，要么没有进行对冲。现在，我们正在研究这笔投资到底会带来什么。这些数字有些理论性，但重点在于:速度很重要！</p><h2 id="642c" class="km ir ht bd is kn ko kp iw kq kr ks ja jz kt ku je kd kv kw ji kh kx ky jm kz dt translated"><strong class="ak">有点靠手续费</strong></h2><p id="bbc7" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">让我们回到市场平静时的情形(图2)，让我们假设我们有低得多的费用——由于我们有大量的交易，我们的费用大大降低，而不是必须支付70美分，我们只需要支付20美分</p><figure class="lc ld le lf fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff ly"><img src="../Images/1580521eefa533e5765b071f2a8a5c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-jj6XvV0h-RE-SaPTS0Xg.png"/></div></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">Figure 4: lower fees</figcaption></figure><p id="89a3" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">如果我们在正常的预期时间内成功完成业务，不仅我们会赚得更多，而且我们完成整个业务的时间也会增加约20%，而不会有暴露的风险。</p><p id="3b16" class="pw-post-body-paragraph jo jp ht jq b jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh lv kj kk kl hm dt translated">当然，本文给出的例子只是试图形象化地描述一个复杂得多的现象，但希望它能阐明<strong class="jq hu">为什么速度和低费用很重要</strong>！</p></div></div>    
</body>
</html>