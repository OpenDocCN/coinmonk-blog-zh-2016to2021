<html>
<head>
<title>Hyperledger Fabric implementation — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hyperledger结构实施—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/hyperledger-fabric-implementation-v1-1-292c479608b?source=collection_archive---------7-----------------------#2018-05-16">https://medium.com/coinmonks/hyperledger-fabric-implementation-v1-1-292c479608b?source=collection_archive---------7-----------------------#2018-05-16</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="a46c" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">Hyperledger Fabric实现:使用Fabric v1.1 SDK时的重要信息</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/3db365a0ece50de3776d8bc4e16f9a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4MfnPLogMm19IVbf.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek"><a class="ae jy" href="https://wiki.hyperledger.org/projects/fabric" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><p id="c7bc" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt kv translated"><span class="l kw kx ky bm kz la lb lc ld di">在</span> <a class="ae jy" rel="noopener" href="/@pradeep.padmarajaiah/hyperledger-fabric-implementation-v1-1-part-1-chaincode-for-node-7b72aec2430d">第1部分</a>中，我们探讨了使用Node.js和Golang的Chaincode及其API的概述。在这个故事中，我们将浏览关于Fabric SDK及其API的一般信息。</p><p id="b469" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在后面的系列文章中，我们将探索使用Chaincode编写的端到端用例实现，以及它如何通过Fabric SDK与应用程序交互。最后一个系列将有一个前端应用程序，它将使用链码，智能合同和应用层与分类帐进行交互。</p><p id="9a4c" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如果有人在设置开发环境方面需要帮助，请告诉我。我会在最后一个系列中添加它。</p></div><div class="ab cl le lf hb lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hm hn ho hp hq"><h1 id="2618" class="ll lm ht bd ln lo lp lq lr ls lt lu lv iz lw ja lx jc ly jd lz jf ma jg mb mc dt translated"><strong class="ak">很高兴知道</strong></h1><p id="a8d0" class="pw-post-body-paragraph jz ka ht kb b kc md iu ke kf me ix kh ki mf kk kl km mg ko kp kq mh ks kt ku hm dt translated">Fabric SDK主要由两个组件组成。</p><blockquote class="mi mj mk"><p id="ecd9" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated">* <strong class="kb hu">结构客户端</strong>:整体网络交互和交易流API<br/>*<strong class="kb hu">结构CA客户端</strong>:参与者管理API</p></blockquote><p id="359c" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">开发的代码流，可以大致分为三类</p><h1 id="9a40" class="ll lm ht bd ln lo mp lq lr ls mq lu lv iz mr ja lx jc ms jd lz jf mt jg mb mc dt translated"><strong class="ak"> 1)用户界面实现流程</strong></h1><p id="5895" class="pw-post-body-paragraph jz ka ht kb b kc md iu ke kf me ix kh ki mf kk kl km mg ko kp kq mh ks kt ku hm dt translated">每个用户都必须有用户名、帐户名、用户关系、用户注册证书信息(注册对象)、用户成员资格服务提供商标识符<br/>作为开始步骤，创建一个实现用户接口的java类。<br/><strong class="kb hu">API探索:</strong></p><blockquote class="mi mj mk"><p id="3eaf" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">接口</strong>:org . hyperledger . fabric . SDK . enrollment，org . hyperledger . fabric . SDK . user</p></blockquote><h1 id="3271" class="ll lm ht bd ln lo mp lq lr ls mq lu lv iz mr ja lx jc ms jd lz jf mt jg mb mc dt translated">2)认证机构机制</h1><ul class=""><li id="b326" class="mu mv ht kb b kc md kf me ki mw km mx kq my ku mz na nb nc dt translated">创建客户端证书颁发机构的新实例。考虑本系列中的织物CA。</li><li id="93da" class="mu mv ht kb b kc nd kf ne ki nf km ng kq nh ku mz na nb nc dt translated">注册并加载管理员用户。默认情况下，CA将生成管理员用户加密</li><li id="a842" class="mu mv ht kb b kc nd kf ne ki nf km ng kq nh ku mz na nb nc dt translated">向现有管理员注册(API使用该管理员作为注册员)并注册非管理员用户。<br/><strong class="kb hu">API探索:</strong></li></ul><blockquote class="mi mj mk"><p id="bd53" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric _ ca . SDK . hfcaclient。</p><p id="96e6" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : createNewInstance()，setCryptoSuite()，enroll()，register()</p><p id="4786" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric _ ca . SDK . registration request</p><p id="4797" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong>:注册()</p></blockquote><h1 id="81dd" class="ll lm ht bd ln lo mp lq lr ls mq lu lv iz mr ja lx jc ms jd lz jf mt jg mb mc dt translated">3)交易流程</h1><ul class=""><li id="4efc" class="mu mv ht kb b kc md kf me ki mw km mx kq my ku mz na nb nc dt translated">创建结构客户端证书的新实例，并设置CryptoSuite和用户上下文。考虑到本系列中的管理工作是在完整的事务流上进行的。</li><li id="9ba4" class="mu mv ht kb b kc nd kf ne ki nf km ng kq nh ku mz na nb nc dt translated">创建或获取通道，并通过添加peer、orderer、eventhub对其进行初始化。</li></ul><p id="cdb5" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">API探索:</strong></p><blockquote class="mi mj mk"><p id="25fe" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . HF client</p><p id="11d1" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : setCryptoSuite()，setUserContext()</p><p id="e10d" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . channel</p><p id="79fe" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : newChannel()、addPeer()、addEventHub()、addOrderer()、initialize()、getChannel()</p></blockquote><ul class=""><li id="f226" class="mu mv ht kb b kc kd kf kg ki ni km nj kq nk ku mz na nb nc dt translated"><strong class="kb hu">调用查询</strong>到总账是通过首先创建新的查询建议请求来实现的。然后为请求设置一个链码id、链码函数和链码参数。通过在所需通道上调用queryByChaincode方法返回查询响应。<br/><strong class="kb hu">API探索:，</strong></li></ul><blockquote class="mi mj mk"><p id="14da" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric _ ca . SDK . HF client</p><p id="9611" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : newQueryProposalRequest()</p><p id="0916" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . querybychaincoderequest</p><p id="10c6" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : setChaincodeID()，setFcn()，setArgs()</p><p id="2330" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . chain codeid</p><p id="1feb" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : newBuilder()，setName()，build()</p><p id="0774" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . proposal response</p><p id="8b57" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong>:getChaincodeActionResponsePayload()</p></blockquote><ul class=""><li id="2b6f" class="mu mv ht kb b kc kd kf kg ki ni km nj kq nk ku mz na nb nc dt translated"><strong class="kb hu">调用分类帐上的修改(创建/更新/删除)</strong>请求通过首先创建新的交易建议请求来实现。然后为请求设置一个链码id、链码函数和链码参数。通过在所需通道上调用sendTransactionProposal方法返回建议响应。如果建议有效，则使用sendTransaction通过返回事件的通道将交易发送给订购方。事件用于确定交易是否通过isValid方法提交至分类帐，并获取已提交交易的交易id。<br/><strong class="kb hu">API探索:</strong></li></ul><blockquote class="mi mj mk"><p id="5a97" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric _ ca . SDK . HF client</p><p id="3b01" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong>:newTransactionProposalRequest()</p><p id="5e88" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . transactionproposalrequest</p><p id="535f" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : setChaincodeID()，setFcn()，setArgs()</p><p id="adf0" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . channel</p><p id="2b21" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : sendTransactionProposal()，sendTransaction()</p><p id="8dae" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . chain codeid</p><p id="c738" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong> : newBuilder()，setName()，build()</p><p id="cdb9" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">类</strong>:org . hyperledger . fabric . SDK . proposal response</p><p id="4c6f" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated"><strong class="kb hu">方法</strong>:getChaincodeActionResponsePayload()</p></blockquote><p id="99fd" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">订购服务</strong>包含关于网络的关键信息，如</p><blockquote class="mi mj mk"><p id="7d83" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated">*属于网络的组织详细信息<br/> *现有渠道详细信息。<br/> *组织和渠道关系<br/> *网络中任何变化的政策</p></blockquote><p id="46a4" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">添加一个<strong class="kb hu">新的组织参与者</strong>，</p><blockquote class="mi mj mk"><p id="a9f2" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated">*将新组织参与者的详细信息添加到订购者<br/> *如果组织希望维护一个分类帐，则需要添加对等详细信息(可选)</p></blockquote><p id="5b86" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">同行</strong></p><blockquote class="mi mj mk"><p id="26b2" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated">*默认情况下，所有对等方都是提交者。对等体还可以通过启用引导配置来承担签署者角色。<br/> *在指定端口上向相关方广播事件(当冻结被添加到分类帐时)</p></blockquote><p id="b6b2" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">身份</strong></p><blockquote class="mi mj mk"><p id="7700" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated">*每个操作都应该有数字签名。每个资源(订单节点、对等节点、用户)都必须拥有由证书颁发机构(CA)签名的证书。</p></blockquote><p id="f102" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">织物CA </strong></p><blockquote class="mi mj mk"><p id="3e5e" class="jz ka ml kb b kc kd iu ke kf kg ix kh mm kj kk kl mn kn ko kp mo kr ks kt ku hm dt translated">*为动态身份管理提供REST APIs，包括注册、登记(获取证书)、撤销和重新登记。<br/> *这样创建的用户只是会员，不是管理员(管理频道&amp;链码)</p></blockquote></div><div class="ab cl le lf hb lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hm hn ho hp hq"><p id="3866" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">参考文献</strong></p><p id="8e7e" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><strong class="kb hu">Fabric SDK Java</strong>:<a class="ae jy" href="https://github.com/hyperledger/fabric-sdk-java" rel="noopener ugc nofollow" target="_blank">https://github.com/hyperledger/fabric-sdk-java</a><br/><strong class="kb hu">Fabric CA</strong>:<a class="ae jy" href="http://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html" rel="noopener ugc nofollow" target="_blank">http://hyperledger-Fabric-CA . readthedocs . io/en/latest/users-guide . html</a><br/><strong class="kb hu">event hub</strong>:<a class="ae jy" href="https://fabric-sdk-node.github.io/EventHub.html" rel="noopener ugc nofollow" target="_blank">https://fabric-sdk-node.github.io/EventHub.html</a></p></div></div>    
</body>
</html>