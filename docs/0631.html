<html>
<head>
<title>A really simple smart contract on how to insert value into the ethereum blockchain and display it on a webpage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个非常简单的智能合同，说明如何将价值插入以太坊区块链并显示在网页上</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-really-simple-smart-contract-on-how-to-insert-value-into-the-ethereum-blockchain-and-display-it-62c455610e98?source=collection_archive---------0-----------------------#2018-05-28">https://medium.com/coinmonks/a-really-simple-smart-contract-on-how-to-insert-value-into-the-ethereum-blockchain-and-display-it-62c455610e98?source=collection_archive---------0-----------------------#2018-05-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="c3cd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本教程中，我将向您介绍在以太坊区块链上创建和部署智能合约的步骤。</p><p id="e7d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本教程的目的是教你</p><p id="3155" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一.创建智能合同所需的工具</p><p id="2a7c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">二。如何创建基本智能合同</p><p id="7c60" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">三。如何将您的智能合约部署到以太坊区块链</p><p id="7e80" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">四。如何通过网页与智能合同进行交互</p><p id="8b08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">动词 （verb的缩写）如何通过智能合约从网页调用函数将值存储到区块链</p><p id="cfb5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">不及物动词如何通过智能合约调用函数来显示存储在区块链上的值</p><blockquote class="jo"><p id="75f5" class="jp jq ht bd jr js jt ju jv jw jx jn ek translated"><a class="ae jy" href="https://coincodecap.com/category/blockchain-node-and-api" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳以太坊开发工具</a></p></blockquote><p id="0a3a" class="pw-post-body-paragraph iq ir ht is b it jz iv iw ix ka iz ja jb kb jd je jf kc jh ji jj kd jl jm jn hm dt translated">在本教程结束时，我们将会有一个类似这样的网络界面。</p><p id="3268" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以在我的github页面这里找到完整的源代码【https://github.com/yubzee/SimpleStorage<a class="ae jy" href="https://github.com/yubzee/simplestorage" rel="noopener ugc nofollow" target="_blank"><em class="ke"/></a></p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/788cef942e497e45b31db1c92a0ac39f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*-TzPrTrFq0c8c1Fwdx_J_w.jpeg"/></div></figure><p id="8dc5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">假设</strong></p><p id="b9cd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">假设你知道区块链和智能合同，你也知道html和javascript的基础知识。</p><p id="11d6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以让我们把手弄脏吧</p><h1 id="59e9" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">创建智能合同所需的工具</h1><ul class=""><li id="4463" class="ll lm ht is b it ln ix lo jb lp jf lq jj lr jn ls lt lu lv dt translated">Remix IDE  :- Remix是以太坊IDE，用于名为<strong class="is hu"> Solidity </strong>的智能合约编程语言，具有集成的调试器和测试环境。最新的在线版本可在【remix . ether eum . org】(<a class="ae jy" href="http://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank">http://remix.ethereum.org</a>)获得。</li></ul><p id="9f5b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想的话，混音是一个很好的解决方案</p><p id="62d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">a.开发智能合同(remix集成了一个可靠性编辑器)。</p><p id="77b2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">b.调试智能合同的执行。</p><p id="add5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">c.访问已部署的智能合约的状态和属性。</p><p id="a419" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">d.调试已经提交的事务。</p><p id="359d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">e.分析可靠性代码以减少编码错误并实施最佳实践</p><p id="f261" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">f.与Mist或Metamask(或任何注入web3的工具)一起，Remix可用于测试和调试dApp</p><ul class=""><li id="dde3" class="ll lm ht is b it iu ix iy jb lw jf lx jj ly jn ls lt lu lv dt translated">元掩码(meta mask):-元掩码是一座桥梁，让你今天就能在浏览器中访问未来的分布式网络。它允许您在浏览器中运行以太坊dApps，而无需运行完整的以太坊节点。MetaMask包括一个安全的身份库，提供了一个用户界面来管理您在不同网站上的身份和签署区块链交易。你可以在Chrome、Firefox、Opera以及新的<a class="ae jy" href="https://brave.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">勇敢浏览器</strong> </a>中安装MetaMask插件。如果你是一名开发者，你可以从今天开始使用MetaMask进行开发。</li></ul><p id="c72c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在此安装<a class="ae jy" href="https://www.metamask.io" rel="noopener ugc nofollow" target="_blank">的Metamask插件，并按照步骤创建一个帐户。请务必保存12个单词的密码，因为这是在您忘记密码或私人密钥时找回帐户的唯一方法。你应该有这样的东西</a></p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/2097f3210bb38b6b777f1dbf80602df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*0xLblevroNB4WAhYzmMJWA.jpeg"/></div></figure><p id="7366" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您现在在metamask上拥有一个帐户，可以使用它与dApps和智能合约进行交互。</p><p id="b067" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">确保您将帐户切换到Ropsten测试网络(Ropsten测试网络上的醚是没有价值的，我们将需要它们用于开发目的)。</p><p id="96e4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击<strong class="is hu">购买按钮&gt; Ropsten测试水龙头</strong>并请求尽可能多的水龙头乙醚。</p><h1 id="c01a" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">如何创建基本智能合同</h1><p id="1538" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hm dt translated">我们将创建一个非常简单但非常强大的dApp。我们的dApp将使用户能够修改区块链中整数值的状态。我们dApp的用户将通过一个简单的html页面和元掩码与我们的智能合约进行交互。</p><p id="4718" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在去<a class="ae jy" href="http://remix.ethereum.org" rel="noopener ugc nofollow" target="_blank">http://remix.ethereum.org</a>启动你的混音IDE。记得用Chrome，Firefox，Opera或者Brave浏览器。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff md"><img src="../Images/92f56cad15570a132ae165f7eeff2d16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P02guLMkRif2PUCQ28hmIA.jpeg"/></div></div></figure><p id="270d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">RemixIDE为您创建了一个名为<strong class="is hu"> Ballot.sol </strong>的投票合同样本。但是我们想从头开始创建一个我们自己的简单契约。单击左上角的+(加号)按钮创建一个新文件。</p><p id="8270" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意:使用RemixIDE创建的文件存储在浏览器的内部存储器中</strong></p><p id="ceff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将文件命名为<strong class="is hu"> SimpleStorage.sol </strong></p><p id="c388" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在IDE中复制并粘贴以下代码</p></div><div class="ab cl mi mj hb mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hm hn ho hp hq"><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="7709" class="mu ko ht mq b fv mv mw l mx my"><strong class="mq hu">pragma solidity ^0.4.4;</strong></span><span id="ffd7" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">contract SimpleStorage{</strong></span><span id="311f" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">uint storeddata;</strong></span><span id="5f3d" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">function set(uint x) public{</strong></span><span id="ae09" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">storeddata = x;</strong></span><span id="36fb" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">}</strong></span><span id="ab30" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">function get() public view returns(uint){</strong></span><span id="797f" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">return storeddata;</strong></span><span id="c1db" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">}</strong></span><span id="8260" class="mu ko ht mq b fv mz mw l mx my"><strong class="mq hu">}</strong></span></pre><p id="8be9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我解释每一行代码。</p><ul class=""><li id="eedf" class="ll lm ht is b it iu ix iy jb lw jf lx jj ly jn ls lt lu lv dt translated">第一行简单地告诉我们源代码是为Solidity版本0.4.0或任何不破坏功能的更新版本(直到但不包括版本0.5.0)编写的。这是为了确保新的编译器版本不会突然改变契约的行为。关键字<strong class="is hu"> pragma </strong>之所以这样叫是因为，一般来说，pragma是编译器关于如何处理源代码的指令(例如，pragma once)。</li><li id="180d" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated">第二行<strong class="is hu">契约SimpleStorage </strong>告诉solidity编译器我们正在创建一个名为SimpleStorage的新契约。为了在solidity中创建新合同，我们使用关键字<strong class="is hu">合同。</strong>从可靠的意义上来说，契约是代码(其功能)和数据(其状态)的集合，驻留在以太坊区块链上的特定<strong class="is hu">地址</strong>(是的，每个契约都必须驻留在特定地址)。</li><li id="53ca" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated">行<strong class="is hu"> uint存储数据</strong>；声明一个名为<strong class="is hu">的状态变量，其类型为<strong class="is hu">uint</strong>(256位无符号整数)。您可以将它视为数据库中的一个插槽，可以通过调用管理数据库的代码的函数来查询和修改它。在以太坊的情况下，这总是拥有契约(它当然有一个地址)。在这种情况下，函数<strong class="is hu"> set </strong>和<strong class="is hu"> get </strong>可以用来修改或检索变量的值。</strong></li></ul><p id="1cc0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">除了允许任何人存储一个世界上任何人都可以访问的数字，而没有(可行的)方法阻止你发布这个数字之外，这个合同没有做太多事情(由于以太坊建立的基础设施)。当然，任何人都可以用不同的值再次调用<strong class="is hu"> set </strong>并覆盖您的号码，但该号码仍将永远保存在区块链的历史中。</p><p id="bcca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">稍后，在下一课中，我将向您展示如何施加访问限制，以便只有您可以更改该数字。</p><p id="8fcf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一切都应该是这样的</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff nf"><img src="../Images/73fad2d190ae917c1b9f57519001d215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2xI049rtM82CQZzysSFPg.jpeg"/></div></div></figure><h1 id="d0a4" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">如何将您的智能合约部署到以太坊区块链</h1><p id="e1d2" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hm dt translated">为了将我们的智能合约部署到以太坊区块链，我们需要通过metamask经由<strong class="is hu">注入的web3 </strong>进行部署，在我们的例子中<strong class="is hu"> </strong>运行在Ropsten TestNetwork上。</p><p id="728b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，让我们来编制我们的智能合同。点击右上角的<strong class="is hu">编译</strong>选项卡，然后点击<strong class="is hu">开始编译</strong>按钮，编译智能合同。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/1fef8b0795ba0f48fa1ebb9eafcf5d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*exHxDUDoMPlpvIFu0uRAcg.jpeg"/></div></figure><p id="dcb4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">希望它编译时没有任何错误。</p><p id="571b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来点击<strong class="is hu">运行</strong>选项卡，将智能合约部署到以太坊区块链。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/517ec11599f705d62ebb9025958e67d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*nIyYYj0s-IQU12r7qPZvoQ.jpeg"/></div></figure><p id="ea38" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我解释一下这里发生了什么</p><ul class=""><li id="aa75" class="ll lm ht is b it iu ix iy jb lw jf lx jj ly jn ls lt lu lv dt translated">第一行名为<strong class="is hu">环境</strong>显示了我们所连接的网络节点。因为我们正在使用Metamask，从列表中选择<strong class="is hu">注射网3 </strong>并且记住在你的metamask上确保你在Ropsten测试网络上并且你的帐户有足够的乙醚支付汽油。</li><li id="f925" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated">下一行叫做<strong class="is hu">账户</strong>显示你的以太坊地址和你的以太余额。这种账户被称为<strong class="is hu">外部所有账户(EOS) </strong></li><li id="7994" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated">剩下的两行显示了气体限制和我们愿意为智能合同的部署支付的价值。跳过这几行，继续部署合同。</li></ul><p id="b3ab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击<strong class="is hu">部署</strong>按钮，将合同部署到区块链。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/b2cf4887880bf8647dd617758f1e133a.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*KhRyVW_jW8zBWm9mv6vjPA.jpeg"/></div></figure><p id="737b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这个动作将通过注入的web3调用元掩码</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/804187b2d4fd12198c6e8a71df43ebf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*W6ljr0TNSUr3WH-n3afAzw.jpeg"/></div></figure><p id="7a58" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以将天然气价格提高到3或4 GWEI，以加快交易开采。</p><p id="6306" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后点击<strong class="is hu">提交</strong>按钮将合同添加到区块链。</p><p id="d274" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">之后，点击metamask上的<strong class="is hu">已发送</strong>选项卡，查看您的合同状态</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff nj"><img src="../Images/3526aaf6182872fb95f9475c177693a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*y3PCKuWzPO1AZd2UNPFA1A.jpeg"/></div></figure><p id="dce0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后点击新创建的合同，在Etherscan上查看您的合同信息</p><p id="7402" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">复制合同地址，并将其保存在我们以后需要的地方。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff nk"><img src="../Images/93fdc11c7b56d13e39d3b3dfb3a2db38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TvyKrQCf2It4slLPNN20zw.jpeg"/></div></div></figure><p id="7b05" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">恭喜</strong>您已经成功创建并部署了区块链以太坊的智能合约。</p><p id="4bc0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你已经走了这么远，深呼吸。你现在是一名Solidity smart合同开发人员。</p><h1 id="1db1" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">如何通过网页与智能合同进行交互</h1><p id="519f" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hm dt translated">为了让用户与我们的智能合约进行交互，他们需要一个界面。我们将建立一个简单的网页，使用户能够调用我们的智能合同和访问其公共功能。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff nl"><img src="../Images/d09a102fecdc884717e7e67b87aa4960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*Zy434xX5Ksp8Xi1mVM6SIQ.jpeg"/></div></figure><p id="3110" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将以下HTML代码复制并粘贴到您喜欢的代码编辑器中</p></div><div class="ab cl mi mj hb mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hm hn ho hp hq"><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="9348" class="mu ko ht mq b fv mv mw l mx my">&lt;!DOCTYPE html&gt;</span><span id="03ce" class="mu ko ht mq b fv mz mw l mx my">&lt;html&gt;</span><span id="b689" class="mu ko ht mq b fv mz mw l mx my">&lt;head&gt;</span><span id="0223" class="mu ko ht mq b fv mz mw l mx my">&lt;title&gt;&lt;/title&gt;</span><span id="e87e" class="mu ko ht mq b fv mz mw l mx my">&lt;meta charset=”utf-8" /&gt;</span><span id="1b47" class="mu ko ht mq b fv mz mw l mx my">&lt;/head&gt;</span><span id="5ffc" class="mu ko ht mq b fv mz mw l mx my">&lt;body&gt;</span><span id="df93" class="mu ko ht mq b fv mz mw l mx my">&lt;center&gt;</span><span id="2abf" class="mu ko ht mq b fv mz mw l mx my">&lt;div id=”metamask”&gt;&lt;/div&gt;</span><span id="ba1e" class="mu ko ht mq b fv mz mw l mx my">&lt;h3&gt;Insert and retrieve value on the blockchain&lt;/h3&gt;</span><span id="e177" class="mu ko ht mq b fv mz mw l mx my">&lt;br /&gt;</span><span id="096b" class="mu ko ht mq b fv mz mw l mx my">&lt;table&gt;</span><span id="6e08" class="mu ko ht mq b fv mz mw l mx my">&lt;tr&gt;</span><span id="e36b" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;&lt;/td&gt;</span><span id="093d" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;</span><span id="81a2" class="mu ko ht mq b fv mz mw l mx my">&lt;div id=”xbalance”&gt;&lt;/div&gt;</span><span id="fd3c" class="mu ko ht mq b fv mz mw l mx my">&lt;/td&gt;</span><span id="7b3f" class="mu ko ht mq b fv mz mw l mx my">&lt;/tr&gt;</span><span id="0e20" class="mu ko ht mq b fv mz mw l mx my">&lt;tr&gt;</span><span id="f981" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;Insert a new value :&lt;/td&gt;</span><span id="0894" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;</span><span id="ba13" class="mu ko ht mq b fv mz mw l mx my">&lt;input id=”xvalue” type=”text” /&gt;</span><span id="e6df" class="mu ko ht mq b fv mz mw l mx my">&lt;input id=”Button1" type=”button” onclick=”setvalue()” value=”Add to Blockchain” /&gt;</span><span id="c57d" class="mu ko ht mq b fv mz mw l mx my">&lt;/td&gt;</span><span id="b825" class="mu ko ht mq b fv mz mw l mx my">&lt;/tr&gt;</span><span id="c7ba" class="mu ko ht mq b fv mz mw l mx my">&lt;/table&gt;</span><span id="023b" class="mu ko ht mq b fv mz mw l mx my">&lt;/center&gt;</span><span id="81f8" class="mu ko ht mq b fv mz mw l mx my">&lt;/body&gt;</span><span id="a7c5" class="mu ko ht mq b fv mz mw l mx my">&lt;/html&gt;</span></pre><p id="8827" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里的html代码非常简单</p><p id="aebc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，将下面的javascript代码添加到HTML页面的body标记的下面和center标记的前面。</p><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="9ed5" class="mu ko ht mq b fv mv mw l mx my">&lt;script&gt;</span><span id="bc0c" class="mu ko ht mq b fv mz mw l mx my">window.onload = function () {</span><span id="4e14" class="mu ko ht mq b fv mz mw l mx my">// check to see if user has metamask addon installed on his browser. check to make sure web3 is defined</span><span id="6cb3" class="mu ko ht mq b fv mz mw l mx my">if (typeof web3 === ‘undefined’) {</span><span id="319e" class="mu ko ht mq b fv mz mw l mx my">document.getElementById(‘metamask’).innerHTML = ‘You need &lt;a href=”https://metamask.io/"&gt;MetaMask&lt;/a&gt; browser plugin to run this example’</span><span id="84ff" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="3d15" class="mu ko ht mq b fv mz mw l mx my">// call the getvalue function here</span><span id="fa9e" class="mu ko ht mq b fv mz mw l mx my">getvalue();</span><span id="6aeb" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="5ab2" class="mu ko ht mq b fv mz mw l mx my">&lt;/script&gt;</span></pre><p id="ac47" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们通过web3从我们的元面具与以太坊区块链交流。上面这段javascript代码检查用户的浏览器上是否安装了metamask插件，如果没有，则显示一条消息，指示用户安装metamask</p><h1 id="4e7e" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">如何通过智能合约调用函数来显示存储在区块链上的值</h1><p id="dfa0" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hm dt translated">来自上面注释行下面的脚本</p><p id="19c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">//在这里调用getvalue函数</strong></p><p id="8ce1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们调用智能合约的<strong class="is hu"> get </strong>函数来检索通过智能合约插入到区块链中的最后一个整数值。</p><p id="f2b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们创建获取值函数。</p><p id="4a28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在最后一个右括号<strong class="is hu"> } </strong>后添加以下代码</p></div><div class="ab cl mi mj hb mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hm hn ho hp hq"><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="aa07" class="mu ko ht mq b fv mv mw l mx my">//function to retrieve the last inserted value on the blockchain</span><span id="2bd5" class="mu ko ht mq b fv mz mw l mx my">function getvalue() {</span><span id="113e" class="mu ko ht mq b fv mz mw l mx my">try {</span><span id="5fa4" class="mu ko ht mq b fv mz mw l mx my">// contract Abi defines all the variables,constants and functions of the smart contract. replace with your own abi</span><span id="ea4a" class="mu ko ht mq b fv mz mw l mx my">var abi = [</span><span id="d24f" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="2dee" class="mu ko ht mq b fv mz mw l mx my">“constant”: false,</span><span id="3f38" class="mu ko ht mq b fv mz mw l mx my">“inputs”: [</span><span id="ed2d" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="aeaa" class="mu ko ht mq b fv mz mw l mx my">“name”: “x”,</span><span id="4e52" class="mu ko ht mq b fv mz mw l mx my">“type”: “uint256”</span><span id="8a8a" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="011a" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="aaca" class="mu ko ht mq b fv mz mw l mx my">“name”: “set”,</span><span id="4e77" class="mu ko ht mq b fv mz mw l mx my">“outputs”: [],</span><span id="bb32" class="mu ko ht mq b fv mz mw l mx my">“payable”: false,</span><span id="14a4" class="mu ko ht mq b fv mz mw l mx my">“stateMutability”: “nonpayable”,</span><span id="ee0a" class="mu ko ht mq b fv mz mw l mx my">“type”: “function”</span><span id="309d" class="mu ko ht mq b fv mz mw l mx my">},</span><span id="98de" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="c464" class="mu ko ht mq b fv mz mw l mx my">“constant”: true,</span><span id="5a8b" class="mu ko ht mq b fv mz mw l mx my">“inputs”: [],</span><span id="5d00" class="mu ko ht mq b fv mz mw l mx my">“name”: “get”,</span><span id="a8e9" class="mu ko ht mq b fv mz mw l mx my">“outputs”: [</span><span id="8b44" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="8f7a" class="mu ko ht mq b fv mz mw l mx my">“name”: “”,</span><span id="427a" class="mu ko ht mq b fv mz mw l mx my">“type”: “uint256”</span><span id="147f" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="a4d2" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="f182" class="mu ko ht mq b fv mz mw l mx my">“payable”: false,</span><span id="1d0d" class="mu ko ht mq b fv mz mw l mx my">“stateMutability”: “view”,</span><span id="f652" class="mu ko ht mq b fv mz mw l mx my">“type”: “function”</span><span id="57da" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="196c" class="mu ko ht mq b fv mz mw l mx my">]</span><span id="2198" class="mu ko ht mq b fv mz mw l mx my">//contract address. please change the address to your own</span><span id="0332" class="mu ko ht mq b fv mz mw l mx my">var contractaddress = ‘0x9b5bb96009bf3562a53bbbc491fe1e12338778a7’;</span><span id="7728" class="mu ko ht mq b fv mz mw l mx my">//instantiate and connect to contract address via Abi</span><span id="68c7" class="mu ko ht mq b fv mz mw l mx my">var myAbi = web3.eth.contract(abi);</span><span id="e326" class="mu ko ht mq b fv mz mw l mx my">var myfunction = myAbi.at(contractaddress);</span><span id="12aa" class="mu ko ht mq b fv mz mw l mx my">//call the get function of our SimpleStorage contract</span><span id="c9f9" class="mu ko ht mq b fv mz mw l mx my">myfunction.get.call(function (err, xname) {</span><span id="1a28" class="mu ko ht mq b fv mz mw l mx my">if (err) { console.log(err) }</span><span id="7a98" class="mu ko ht mq b fv mz mw l mx my">if (xname) {</span><span id="fc5a" class="mu ko ht mq b fv mz mw l mx my">//display value on the webpage</span><span id="4b14" class="mu ko ht mq b fv mz mw l mx my">document.getElementById(“xbalance”).innerHTML = “last inserted value into the blockchain is : “ + xname;</span><span id="de25" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="a863" class="mu ko ht mq b fv mz mw l mx my">});</span><span id="501e" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="80bd" class="mu ko ht mq b fv mz mw l mx my">catch (err) {</span><span id="a275" class="mu ko ht mq b fv mz mw l mx my">document.getElementById(“xbalance”).innerHTML = err;</span><span id="7f78" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="c668" class="mu ko ht mq b fv mz mw l mx my">}</span></pre><p id="590d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意这条线</p><p id="e685" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">var abi=(“我们这里的ABI…请用你自己的替换”)</p><p id="dd7e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ABI代表<strong class="is hu"> <em class="ke">应用二进制接口</em> </strong>。</p><p id="b312" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一般来说，ABI基本上就是你如何在契约中调用函数并获取数据的方式</p><p id="4625" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊智能合约是部署在以太坊区块链上的字节码。在一个合同中可能有几个功能。ABI是必要的，这样您就可以指定调用契约中的哪个函数，并保证该函数将以您期望的格式返回数据。</p><p id="6a12" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要得到你的合同ABI，切换回混音IDE，点击右上角的<strong class="is hu">编译</strong>标签，然后点击<strong class="is hu">细节</strong>按钮</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff nm"><img src="../Images/d82c610d2b9341249a6226692b23680a.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*gqoc8Trlr8jlN-E_GBZ7LQ.jpeg"/></div></figure><p id="c80f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">复制ABI代码(您需要向下滚动才能看到)</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff nn"><img src="../Images/c3c58da45ab62eb4655fade3ae907337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*PjeK7N87rMGjjmyLuZPjqQ.jpeg"/></div></figure><p id="f57c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">并在生产线上替换它</p><p id="eb30" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">var abi=(“请在此处重复您的ABI…”)</p><p id="76d1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">切换回您的HTML页面，并用您自己的地址替换合同地址。</p><p id="00b3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">var contractaddress = '在此处替换为您自己的..'；</p><p id="147b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">完成后，您可以预览HTML页面，查看通过智能合约存储在区块链上的最后一个整数值。</p><p id="ad64" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果这是第一次，该值将返回零(0)</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/788cef942e497e45b31db1c92a0ac39f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*-TzPrTrFq0c8c1Fwdx_J_w.jpeg"/></div></figure><h1 id="6469" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">如何通过智能合约从网页调用函数将值存储到区块链</h1><p id="25f0" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hm dt translated">在我们的智能合约上调用<strong class="is hu"> set </strong>函数来增加区块链的值也很容易，类似于<strong class="is hu"> get </strong>函数的过程</p><p id="de35" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将以下代码行复制并粘贴到HTML页面中<strong class="is hu"> getvalue </strong>函数的最后一个右括号之后</p></div><div class="ab cl mi mj hb mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hm hn ho hp hq"><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="45f1" class="mu ko ht mq b fv mv mw l mx my">// function to add a new integer value to the blockchain</span><span id="45ea" class="mu ko ht mq b fv mz mw l mx my">function setvalue() {</span><span id="9037" class="mu ko ht mq b fv mz mw l mx my">try {</span><span id="f813" class="mu ko ht mq b fv mz mw l mx my">// contract Abi defines all the variables,constants and functions of the smart contract. replace with your own abi</span><span id="617f" class="mu ko ht mq b fv mz mw l mx my">var abi = [</span><span id="dc23" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="c554" class="mu ko ht mq b fv mz mw l mx my">“constant”: false,</span><span id="bb44" class="mu ko ht mq b fv mz mw l mx my">“inputs”: [</span><span id="b1f5" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="3739" class="mu ko ht mq b fv mz mw l mx my">“name”: “x”,</span><span id="a1b3" class="mu ko ht mq b fv mz mw l mx my">“type”: “uint256”</span><span id="8745" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="ac13" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="128d" class="mu ko ht mq b fv mz mw l mx my">“name”: “set”,</span><span id="af3a" class="mu ko ht mq b fv mz mw l mx my">“outputs”: [],</span><span id="0b21" class="mu ko ht mq b fv mz mw l mx my">“payable”: false,</span><span id="2cf9" class="mu ko ht mq b fv mz mw l mx my">“stateMutability”: “nonpayable”,</span><span id="cda7" class="mu ko ht mq b fv mz mw l mx my">“type”: “function”</span><span id="f537" class="mu ko ht mq b fv mz mw l mx my">},</span><span id="7323" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="9dad" class="mu ko ht mq b fv mz mw l mx my">“constant”: true,</span><span id="6e75" class="mu ko ht mq b fv mz mw l mx my">“inputs”: [],</span><span id="0335" class="mu ko ht mq b fv mz mw l mx my">“name”: “get”,</span><span id="a44f" class="mu ko ht mq b fv mz mw l mx my">“outputs”: [</span><span id="346e" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="7b9a" class="mu ko ht mq b fv mz mw l mx my">“name”: “”,</span><span id="547e" class="mu ko ht mq b fv mz mw l mx my">“type”: “uint256”</span><span id="f9b8" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="2b88" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="dc0e" class="mu ko ht mq b fv mz mw l mx my">“payable”: false,</span><span id="5f3c" class="mu ko ht mq b fv mz mw l mx my">“stateMutability”: “view”,</span><span id="742d" class="mu ko ht mq b fv mz mw l mx my">“type”: “function”</span><span id="3d35" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="affb" class="mu ko ht mq b fv mz mw l mx my">]</span><span id="5d08" class="mu ko ht mq b fv mz mw l mx my">//contract address. please change the address to your own</span><span id="7dfb" class="mu ko ht mq b fv mz mw l mx my">var contractaddress = ‘0x9b5bb96009bf3562a53bbbc491fe1e12338778a7’;</span><span id="be5c" class="mu ko ht mq b fv mz mw l mx my">//instantiate and connect to contract address via Abi</span><span id="5117" class="mu ko ht mq b fv mz mw l mx my">var myAbi = web3.eth.contract(abi);</span><span id="bf74" class="mu ko ht mq b fv mz mw l mx my">var myFunction= myAbi.at(contractaddress);</span><span id="fd7a" class="mu ko ht mq b fv mz mw l mx my">//call the set function of our SimpleStorage contract</span><span id="da4c" class="mu ko ht mq b fv mz mw l mx my">myFunction.set.sendTransaction(document.getElementById(“xvalue”).value, { from: web3.eth.accounts[0], gas: 4000000 }, function (error, result) {</span><span id="3453" class="mu ko ht mq b fv mz mw l mx my">if (!error) {</span><span id="0216" class="mu ko ht mq b fv mz mw l mx my">console.log(result);</span><span id="286f" class="mu ko ht mq b fv mz mw l mx my">} else {</span><span id="a854" class="mu ko ht mq b fv mz mw l mx my">console.log(error);</span><span id="6264" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="f455" class="mu ko ht mq b fv mz mw l mx my">})</span><span id="74db" class="mu ko ht mq b fv mz mw l mx my">} catch (err) {</span><span id="fe73" class="mu ko ht mq b fv mz mw l mx my">document.getElementById(“xvalue”).innerHTML = err;</span><span id="abd3" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="7cc9" class="mu ko ht mq b fv mz mw l mx my">}</span></pre><p id="d05f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">记得把合同ABI改成你自己的。</p><p id="3870" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是你可以复制粘贴的完整代码</p></div><div class="ab cl mi mj hb mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hm hn ho hp hq"><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="bf7e" class="mu ko ht mq b fv mv mw l mx my">&lt;!DOCTYPE html&gt;</span><span id="52a9" class="mu ko ht mq b fv mz mw l mx my">&lt;html&gt;</span><span id="77d6" class="mu ko ht mq b fv mz mw l mx my">&lt;head&gt;</span><span id="a18a" class="mu ko ht mq b fv mz mw l mx my">&lt;title&gt;&lt;/title&gt;</span><span id="fc64" class="mu ko ht mq b fv mz mw l mx my">&lt;meta charset="utf-8" /&gt;</span><span id="92ad" class="mu ko ht mq b fv mz mw l mx my">&lt;/head&gt;</span><span id="49eb" class="mu ko ht mq b fv mz mw l mx my">&lt;body&gt;</span><span id="4929" class="mu ko ht mq b fv mz mw l mx my">&lt;script&gt;</span><span id="3f6b" class="mu ko ht mq b fv mz mw l mx my">window.onload = function () {</span><span id="1020" class="mu ko ht mq b fv mz mw l mx my">// check to see if user has metamask addon installed on his browser. check to make sure web3 is defined</span><span id="5646" class="mu ko ht mq b fv mz mw l mx my">if (typeof web3 === 'undefined') {</span><span id="5099" class="mu ko ht mq b fv mz mw l mx my">document.getElementById('metamask').innerHTML = 'You need &lt;a href="https://metamask.io/"&gt;MetaMask&lt;/a&gt; browser plugin to run this example'</span><span id="caad" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="adf7" class="mu ko ht mq b fv mz mw l mx my">// call the getvalue function here</span><span id="ef61" class="mu ko ht mq b fv mz mw l mx my">getvalue();</span><span id="933d" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="1c11" class="mu ko ht mq b fv mz mw l mx my">//function to retrieve the last inserted value on the blockchain</span><span id="0035" class="mu ko ht mq b fv mz mw l mx my">function getvalue() {</span><span id="b711" class="mu ko ht mq b fv mz mw l mx my">try {</span><span id="846f" class="mu ko ht mq b fv mz mw l mx my">// contract Abi defines all the variables,constants and functions of the smart contract. replace with your own abi</span><span id="96d2" class="mu ko ht mq b fv mz mw l mx my">var abi = [</span><span id="1c83" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="6a84" class="mu ko ht mq b fv mz mw l mx my">"constant": false,</span><span id="8fa8" class="mu ko ht mq b fv mz mw l mx my">"inputs": [</span><span id="c378" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="f88e" class="mu ko ht mq b fv mz mw l mx my">"name": "x",</span><span id="5d09" class="mu ko ht mq b fv mz mw l mx my">"type": "uint256"</span><span id="ec32" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="3742" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="eae8" class="mu ko ht mq b fv mz mw l mx my">"name": "set",</span><span id="c21e" class="mu ko ht mq b fv mz mw l mx my">"outputs": [],</span><span id="7e26" class="mu ko ht mq b fv mz mw l mx my">"payable": false,</span><span id="0b03" class="mu ko ht mq b fv mz mw l mx my">"stateMutability": "nonpayable",</span><span id="9708" class="mu ko ht mq b fv mz mw l mx my">"type": "function"</span><span id="361d" class="mu ko ht mq b fv mz mw l mx my">},</span><span id="8a30" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="7c89" class="mu ko ht mq b fv mz mw l mx my">"constant": true,</span><span id="f03a" class="mu ko ht mq b fv mz mw l mx my">"inputs": [],</span><span id="c05a" class="mu ko ht mq b fv mz mw l mx my">"name": "get",</span><span id="51d4" class="mu ko ht mq b fv mz mw l mx my">"outputs": [</span><span id="9c7a" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="7124" class="mu ko ht mq b fv mz mw l mx my">"name": "",</span><span id="ff9c" class="mu ko ht mq b fv mz mw l mx my">"type": "uint256"</span><span id="d564" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="13da" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="d795" class="mu ko ht mq b fv mz mw l mx my">"payable": false,</span><span id="3382" class="mu ko ht mq b fv mz mw l mx my">"stateMutability": "view",</span><span id="1ac1" class="mu ko ht mq b fv mz mw l mx my">"type": "function"</span><span id="ca67" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="d613" class="mu ko ht mq b fv mz mw l mx my">]</span><span id="d311" class="mu ko ht mq b fv mz mw l mx my">//contract address. please change the address to your own</span><span id="a499" class="mu ko ht mq b fv mz mw l mx my">var contractaddress = '0xc80cae7c51f27bc25b3862d072d56fa84965f5c1';</span><span id="fbeb" class="mu ko ht mq b fv mz mw l mx my">//instantiate and connect to contract address via Abi</span><span id="459c" class="mu ko ht mq b fv mz mw l mx my">var myAbi = web3.eth.contract(abi);</span><span id="95a9" class="mu ko ht mq b fv mz mw l mx my">var myfunction = myAbi.at(contractaddress);</span><span id="15fc" class="mu ko ht mq b fv mz mw l mx my">//call the get function of our SimpleStorage contract</span><span id="646a" class="mu ko ht mq b fv mz mw l mx my">myfunction.get.call(function (err, xname) {</span><span id="3668" class="mu ko ht mq b fv mz mw l mx my">if (err) { console.log(err) }</span><span id="725c" class="mu ko ht mq b fv mz mw l mx my">if (xname) {</span><span id="ff84" class="mu ko ht mq b fv mz mw l mx my">//display value on the webpage</span><span id="2214" class="mu ko ht mq b fv mz mw l mx my">document.getElementById("xbalance").innerHTML = "last inserted value into the blockchain is : " + xname;</span><span id="86e4" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="a77d" class="mu ko ht mq b fv mz mw l mx my">});</span><span id="8c07" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="8830" class="mu ko ht mq b fv mz mw l mx my">catch (err) {</span><span id="8f67" class="mu ko ht mq b fv mz mw l mx my">document.getElementById("xbalance").innerHTML = err;</span><span id="ef9c" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="6c25" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="70b2" class="mu ko ht mq b fv mz mw l mx my">// function to add a new integer value to the blockchain</span><span id="ab6e" class="mu ko ht mq b fv mz mw l mx my">function setvalue() {</span><span id="2d34" class="mu ko ht mq b fv mz mw l mx my">try {</span><span id="0d6e" class="mu ko ht mq b fv mz mw l mx my">// contract Abi defines all the variables,constants and functions of the smart contract. replace with your own abi</span><span id="ee5a" class="mu ko ht mq b fv mz mw l mx my">var abi = [</span><span id="7028" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="6ae3" class="mu ko ht mq b fv mz mw l mx my">"constant": false,</span><span id="a3ec" class="mu ko ht mq b fv mz mw l mx my">"inputs": [</span><span id="2993" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="c9f6" class="mu ko ht mq b fv mz mw l mx my">"name": "x",</span><span id="54ac" class="mu ko ht mq b fv mz mw l mx my">"type": "uint256"</span><span id="7f6f" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="d8b5" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="88b2" class="mu ko ht mq b fv mz mw l mx my">"name": "set",</span><span id="e26b" class="mu ko ht mq b fv mz mw l mx my">"outputs": [],</span><span id="6043" class="mu ko ht mq b fv mz mw l mx my">"payable": false,</span><span id="57b9" class="mu ko ht mq b fv mz mw l mx my">"stateMutability": "nonpayable",</span><span id="43dd" class="mu ko ht mq b fv mz mw l mx my">"type": "function"</span><span id="4363" class="mu ko ht mq b fv mz mw l mx my">},</span><span id="d86b" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="0b32" class="mu ko ht mq b fv mz mw l mx my">"constant": true,</span><span id="aee1" class="mu ko ht mq b fv mz mw l mx my">"inputs": [],</span><span id="609a" class="mu ko ht mq b fv mz mw l mx my">"name": "get",</span><span id="fae3" class="mu ko ht mq b fv mz mw l mx my">"outputs": [</span><span id="3fee" class="mu ko ht mq b fv mz mw l mx my">{</span><span id="a0c4" class="mu ko ht mq b fv mz mw l mx my">"name": "",</span><span id="d469" class="mu ko ht mq b fv mz mw l mx my">"type": "uint256"</span><span id="64b9" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="2cb1" class="mu ko ht mq b fv mz mw l mx my">],</span><span id="c098" class="mu ko ht mq b fv mz mw l mx my">"payable": false,</span><span id="641a" class="mu ko ht mq b fv mz mw l mx my">"stateMutability": "view",</span><span id="79e3" class="mu ko ht mq b fv mz mw l mx my">"type": "function"</span><span id="65bb" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="aad0" class="mu ko ht mq b fv mz mw l mx my">]</span><span id="8c26" class="mu ko ht mq b fv mz mw l mx my">//contract address. please change the address to your own</span><span id="107d" class="mu ko ht mq b fv mz mw l mx my">var contractaddress = '0xc80cae7c51f27bc25b3862d072d56fa84965f5c1';</span><span id="11a2" class="mu ko ht mq b fv mz mw l mx my">//instantiate and connect to contract address via Abi</span><span id="09b9" class="mu ko ht mq b fv mz mw l mx my">var myAbi = web3.eth.contract(abi);</span><span id="0c66" class="mu ko ht mq b fv mz mw l mx my">var myfunction = myAbi.at(contractaddress);</span><span id="afcf" class="mu ko ht mq b fv mz mw l mx my">//call the set function of our SimpleStorage contract</span><span id="9cd5" class="mu ko ht mq b fv mz mw l mx my">myfunction.set.sendTransaction(document.getElementById("xvalue").value, { from: web3.eth.accounts[0], gas: 4000000 }, function (error, result) {</span><span id="0d97" class="mu ko ht mq b fv mz mw l mx my">if (!error) {</span><span id="9afe" class="mu ko ht mq b fv mz mw l mx my">console.log(result);</span><span id="4ac6" class="mu ko ht mq b fv mz mw l mx my">} else {</span><span id="e80e" class="mu ko ht mq b fv mz mw l mx my">console.log(error);</span><span id="bf76" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="bf0b" class="mu ko ht mq b fv mz mw l mx my">})</span><span id="cb51" class="mu ko ht mq b fv mz mw l mx my">} catch (err) {</span><span id="e4c9" class="mu ko ht mq b fv mz mw l mx my">document.getElementById("xvalue").innerHTML = err;</span><span id="e1dc" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="c93e" class="mu ko ht mq b fv mz mw l mx my">}</span><span id="05ff" class="mu ko ht mq b fv mz mw l mx my">&lt;/script&gt;</span><span id="bb40" class="mu ko ht mq b fv mz mw l mx my">&lt;center&gt;</span><span id="65e5" class="mu ko ht mq b fv mz mw l mx my">&lt;div id="metamask"&gt;&lt;/div&gt;</span><span id="9129" class="mu ko ht mq b fv mz mw l mx my">&lt;h3&gt;Insert and retrieve value on the blockchain&lt;/h3&gt;</span><span id="7520" class="mu ko ht mq b fv mz mw l mx my">&lt;br /&gt;</span><span id="670b" class="mu ko ht mq b fv mz mw l mx my">&lt;table&gt;</span><span id="3ef4" class="mu ko ht mq b fv mz mw l mx my">&lt;tr&gt;</span><span id="96de" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;&lt;/td&gt;</span><span id="bee0" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;</span><span id="8399" class="mu ko ht mq b fv mz mw l mx my">&lt;div id="xbalance"&gt;&lt;/div&gt;</span><span id="4aaf" class="mu ko ht mq b fv mz mw l mx my">&lt;/td&gt;</span><span id="73ff" class="mu ko ht mq b fv mz mw l mx my">&lt;/tr&gt;</span><span id="d1ac" class="mu ko ht mq b fv mz mw l mx my">&lt;tr&gt;</span><span id="3678" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;Insert a new value :&lt;/td&gt;</span><span id="bcfa" class="mu ko ht mq b fv mz mw l mx my">&lt;td&gt;</span><span id="fafb" class="mu ko ht mq b fv mz mw l mx my">&lt;input id="xvalue" type="text" /&gt;</span><span id="218b" class="mu ko ht mq b fv mz mw l mx my">&lt;input id="Button1" type="button" onclick="setvalue()" value="Add to Blockchain" /&gt;</span><span id="a19e" class="mu ko ht mq b fv mz mw l mx my">&lt;/td&gt;</span><span id="1e40" class="mu ko ht mq b fv mz mw l mx my">&lt;/tr&gt;</span><span id="6ad1" class="mu ko ht mq b fv mz mw l mx my">&lt;/table&gt;</span><span id="d810" class="mu ko ht mq b fv mz mw l mx my">&lt;/center&gt;</span><span id="60f7" class="mu ko ht mq b fv mz mw l mx my">&lt;/body&gt;</span><span id="1244" class="mu ko ht mq b fv mz mw l mx my">&lt;/html&gt;</span></pre><h1 id="163b" class="kn ko ht bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">测试我们的dAPP</h1><p id="e8bd" class="pw-post-body-paragraph iq ir ht is b it ln iv iw ix lo iz ja jb ma jd je jf mb jh ji jj mc jl jm jn hm dt translated">每当我们为以太坊区块链增加价值时，我们都需要支付汽油费。</p><p id="c904" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，在文本框中输入一个整数值，然后单击<strong class="is hu">添加到区块链</strong>按钮。</p><p id="80ff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">支付气价，等待你的交易被处理和开采。</p><p id="fcfe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">刷新浏览器以检索您添加的新值。</p><p id="fc3f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">如果你已经做到了这一步，那么祝贺你成为dApp开发者。</strong></p><p id="b2ff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你面临任何挑战或建议，我欢迎提问</p><p id="bdfb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">古德勒克</p><p id="738e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">捐赠总是令人感激的</strong></p><p id="cbb6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> <em class="ke">以太坊地址:</em>0x f 98 ab 27 f 68136133 EBA 36 b 6 c 92753496173 CBF 02</strong></p><blockquote class="jo"><p id="5f0f" class="jp jq ht bd jr js jt ju jv jw jx jn ek translated">加入Coinmonks <a class="ae jy" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jy" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae jy" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="mu ko ht bd kp no np nq kt nr ns nt kx jb nu nv lb jf nw nx lf jj ny nz lj oa dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="ll lm ht is b it ln ix lo jb lp jf lq jj lr jn ls lt lu lv dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae jy" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">电网交易</a> | <a class="ae jy" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae jy" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="4139" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" href="https://coincodecap.com/trading-signal" rel="noopener ugc nofollow" target="_blank">有哪些交易信号？</a> | <a class="ae jy" href="https://coincodecap.com/bitstamp-coinbase" rel="noopener ugc nofollow" target="_blank">比特斯坦普vs比特币基地</a></li><li id="20ec" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" href="https://coincodecap.com/profitfarmers-review" rel="noopener ugc nofollow" target="_blank"> ProfitFarmers回顾</a> | <a class="ae jy" href="https://coincodecap.com/cornix-trading-bot" rel="noopener ugc nofollow" target="_blank">如何使用Cornix Trading Bot </a></li><li id="9801" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" href="https://coincodecap.com/buy-domain-on-unstoppable-domains" rel="noopener ugc nofollow" target="_blank">如何在势不可挡的域名上购买域名？</a></li><li id="8e13" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" href="https://coincodecap.com/crypto-tax-india" rel="noopener ugc nofollow" target="_blank">印度的秘密税</a> | <a class="ae jy" href="https://coincodecap.com/altfins-review" rel="noopener ugc nofollow" target="_blank"> altFINS审查</a> | <a class="ae jy" rel="noopener" href="/coinmonks/prokey-review-26611173c13c"> Prokey审查</a></li><li id="f33b" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae jy" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated">开发人员的最佳加密API</li><li id="b359" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated">最佳<a class="ae jy" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="ll lm ht is b it na ix nb jb nc jf nd jj ne jn ls lt lu lv dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币</a>终极指南</li></ul></div></div>    
</body>
</html>