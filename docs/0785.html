<html>
<head>
<title>A Simple ERC-721 Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个简单的ERC 721的例子</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-simple-erc-721-example-c3f72b5aa19?source=collection_archive---------0-----------------------#2018-06-18">https://medium.com/coinmonks/a-simple-erc-721-example-c3f72b5aa19?source=collection_archive---------0-----------------------#2018-06-18</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="e38a" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">这是什么？</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff ji"><img src="../Images/25839646d4c0c75468714850f330cddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/0*jr7S0JF8XiousKKz.png"/></div></figure><p id="1049" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">ERC-721代币是今天的热门话题，随着<a class="ae km" href="https://www.cryptokitties.co/" rel="noopener ugc nofollow" target="_blank">加密kitties </a>的出现以及因其成功而产生的许多其他数字收藏品。<a class="ae km" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank"> ERC-721标准</a>已经经历了几次迭代，现在或多或少已经就位，所以期待越来越多的玩家进入这个领域。这些<a class="ae km" href="https://en.wikipedia.org/wiki/Non-Fungible_Tokens" rel="noopener ugc nofollow" target="_blank">不可替代令牌</a>的基本前提是每个令牌都是唯一的，因此不能像ERC20令牌那样以1:1的基础进行交换。在许多使用案例中，独特的有形或数字资产可以由这些ERC-721令牌来表示，例如房地产、艺术品、宝石等。实际上，数字收藏品用例可能是所有用例中市场价值最低的用例。</p><blockquote class="kn"><p id="276d" class="ko kp ht bd kq kr ks kt ku kv kw kl ek translated"><a class="ae km" href="https://coincodecap.com/category/blockchain-node-and-api" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链api和节点产品</a></p></blockquote><h2 id="3b33" class="kx ky ht bd kz la lb lc ld le lf lg lh jz li lj lk kd ll lm ln kh lo lp lq lr dt translated"><strong class="ak">本文目的</strong></h2><p id="50bd" class="pw-post-body-paragraph jq jr ht js b jt ls iu jv jw lt ix jy jz lu kb kc kd lv kf kg kh lw kj kk kl hm dt translated">本文将尝试使用<a class="ae km" href="https://github.com/OpenZeppelin/openzeppelin-solidity/tree/master/contracts/token/ERC721" rel="noopener ugc nofollow" target="_blank">ERC-721标准</a><a class="ae km" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">的</a>实现来创建一个最简单有用的ERC-721。我建议查看上面链接的标准，以便熟悉这些需求，因为它们有时可能隐藏在优秀的OpenZeppelin实现中。这里还有一篇精彩的文章<a class="ae km" rel="noopener" href="/blockchannel/walking-through-the-erc721-full-implementation-72ad72735f3c">深入描述了ERC-721的规格。</a></p></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hm hn ho hp hq"><h2 id="9c56" class="kx ky ht bd kz la me lc ld le mf lg lh jz mg lj lk kd mh lm ln kh mi lp lq lr dt translated">设置项目</h2><p id="66d1" class="pw-post-body-paragraph jq jr ht js b jt ls iu jv jw lt ix jy jz lu kb kc kd lv kf kg kh lw kj kk kl hm dt translated">确保您已经安装了node、npm和truffle</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="754d" class="kx ky ht mk b fv mo mp l mq mr">mkdir erc721 &amp;&amp; cd erc721 &amp;&amp; truffle init</span></pre><p id="d666" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">用以下内容替换<em class="ms"> truffle.js </em>内容:</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="f1cf" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">安装<a class="ae km" href="http://truffleframework.com/ganache/" rel="noopener ugc nofollow" target="_blank"> Ganache </a>并确保它在8545上运行</p><p id="dd8a" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">编译和迁移</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="7170" class="kx ky ht mk b fv mo mp l mq mr">truffle compile<br/>truffle migrate</span></pre><p id="3724" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">将文件夹初始化为npm项目</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="8d2c" class="kx ky ht mk b fv mo mp l mq mr">npm init</span></pre><p id="6155" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">安装zeppelin依赖项</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="21bf" class="kx ky ht mk b fv mo mp l mq mr">npm install zeppelin-solidity</span></pre></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hm hn ho hp hq"><h2 id="e11f" class="kx ky ht bd kz la me lc ld le mf lg lh jz mg lj lk kd mh lm ln kh mi lp lq lr dt translated">令牌</h2><p id="3354" class="pw-post-body-paragraph jq jr ht js b jt ls iu jv jw lt ix jy jz lu kb kc kd lv kf kg kh lw kj kk kl hm dt translated">将以下内容添加到合同中，作为<em class="ms"> MyERC721.sol </em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="9adf" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">将以下迁移添加到/migrations中，作为<em class="ms"> 2_erc721_migration.js </em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="a876" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">运行迁移脚本，并验证其部署无误</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="a8b7" class="kx ky ht mk b fv mo mp l mq mr">Marks-MacBook-Pro:erc721 markmathis$ truffle migrate<br/>Using network 'development'.</span><span id="c3c8" class="kx ky ht mk b fv mv mp l mq mr">Running migration: 2_erc721_migration.js<br/>Deploying MyERC721...<br/>...<br/>0x25c26fd5b79b6328bee75bd34d78b37ff9389aad2d487600d46595adf0ee398d<br/>MyERC721: 0x6d9b92dfaf3cc3ae2e45b37b584f52f23bc03085<br/>Saving successful migration to network...<br/>...<br/>0x5c147afb3f4c2d225ef3b4cabcd7b9d3b5e4cbab88617fa150b061b85eb4cc0a<br/>Saving artifacts...</span></pre></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hm hn ho hp hq"><h2 id="f34f" class="kx ky ht bd kz la me lc ld le mf lg lh jz mg lj lk kd mh lm ln kh mi lp lq lr dt translated">测试一下</h2><p id="a2e3" class="pw-post-body-paragraph jq jr ht js b jt ls iu jv jw lt ix jy jz lu kb kc kd lv kf kg kh lw kj kk kl hm dt translated">安装测试库</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="9f01" class="kx ky ht mk b fv mo mp l mq mr">npm install chai --save-dev<br/>npm install chai-as-promised --save-dev<br/>npm install babel-preset-es2015 --save-dev<br/>npm install babel-register --save-dev<br/>npm install babel-polyfill --save-dev</span></pre><p id="6b87" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">添加<em class="ms">。babelrc </em>到项目根</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="85fc" class="kx ky ht mk b fv mo mp l mq mr">{<br/>  "presets": ["babel-preset-es2015"]<br/>}</span></pre><p id="abc0" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">将<em class="ms"> erc721.spec.js </em>添加到/test</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="3058" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">从项目根目录运行测试</p><pre class="jj jk jl jm fq mj mk ml mm aw mn dt"><span id="9bc5" class="kx ky ht mk b fv mo mp l mq mr">truffle test</span></pre><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="fe ff mw"><img src="../Images/b025c32877e2b8a918b4a59645d0ec60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZ9h1i5oaWrD8ISiGH5L8w.png"/></div></div></figure></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hm hn ho hp hq"><h2 id="7046" class="kx ky ht bd kz la me lc ld le mf lg lh jz mg lj lk kd mh lm ln kh mi lp lq lr dt translated">附录</h2><p id="4aeb" class="pw-post-body-paragraph jq jr ht js b jt ls iu jv jw lt ix jy jz lu kb kc kd lv kf kg kh lw kj kk kl hm dt translated">几乎所有常规的ERC20功能都可以在ERC721合同中获得。你可以批准第三方消费你的代币，烧代币等。功能是相同的，但是输入和幕后发生的事情要复杂一些。有几个ERC721方法没有在本文中讨论，但也值得独立研究</p><ul class=""><li id="9634" class="nb nc ht js b jt ju jw jx jz nd kd ne kh nf kl ng nh ni nj dt translated">安全转移自</li><li id="65dc" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated">isApprovedForAll</li><li id="4e76" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated">setApprovedForAll</li></ul></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hm hn ho hp hq"><h2 id="de26" class="kx ky ht bd kz la me lc ld le mf lg lh jz mg lj lk kd mh lm ln kh mi lp lq lr dt translated">摘要</h2><p id="4fab" class="pw-post-body-paragraph jq jr ht js b jt ls iu jv jw lt ix jy jz lu kb kc kd lv kf kg kh lw kj kk kl hm dt translated">让我们回顾一下我们在这篇文章中学到的内容。首先，我们用truffle设置项目，并导入我们的依赖项，包括世界一流的智能契约库，OpenZeppelin。接下来，我们使用open zeppelin—<em class="ms">ERC721 token</em>模板编写了ERC 721令牌。我们进行了一些检查以确保我们的合同是有效的，然后我们设置了一个mocha测试来测试我们的断言。我们的solidity代码看似简单，我建议深入研究ERC721标准和OpenZeppelin实现。在本文中，我们通过创建一个简单的ERC721令牌实现了我们的目的，您应该可以继续学习这种新的令牌类型。尽管这个令牌不是“可替换的”——我希望你仍然觉得“有趣”:</p><p id="84e2" class="pw-post-body-paragraph jq jr ht js b jt ju iu jv jw jx ix jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><em class="ms">完整的项目源代码在这里</em>—<a class="ae km" href="https://github.com/cipherzzz/erc721" rel="noopener ugc nofollow" target="_blank"/></p><blockquote class="np nq nr"><p id="c5f1" class="jq jr ms js b jt ju iu jv jw jx ix jy ns ka kb kc nt ke kf kg nu ki kj kk kl hm dt translated"><em class="ht">加入Coinmonks </em> <a class="ae km" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank"> <em class="ht">电报频道</em> </a> <em class="ht">和</em> <a class="ae km" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> <em class="ht"> Youtube频道</em> </a> <em class="ht">获取每日</em> <a class="ae km" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ht">加密新闻</em> </a></p></blockquote><h1 id="8a78" class="nv ky ht bd kz nw nx ny ld nz oa ob lh iz oc ja lk jc od jd ln jf oe jg lq of dt translated">另外，阅读</h1><ul class=""><li id="f514" class="nb nc ht js b jt ls jw lt jz og kd oh kh oi kl ng nh ni nj dt translated"><a class="ae km" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae km" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="4c42" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae km" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="335c" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="http://top%204%20telegram%20channels%20for%20crypto%20traders/" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae km" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="6d7b" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae km" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="b9ad" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated">面向开发者的最佳加密API</li><li id="72b6" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳密码</a>|<a class="ae km" href="https://coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank">WazirX P2P</a>|<a class="ae km" href="https://coincodecap.com/hi-dollar-review" rel="noopener ugc nofollow" target="_blank">Hi Dollar Review</a></li><li id="4b02" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/5-best-crypto-trading-bots-in-canada" rel="noopener ugc nofollow" target="_blank">加拿大最佳加密交易机器人</a> | <a class="ae km" href="https://coincodecap.com/kucoin-review" rel="noopener ugc nofollow" target="_blank">库币评论</a></li><li id="4c52" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/huobi-crypto-trading-signals" rel="noopener ugc nofollow" target="_blank">火币加密交易信号</a> | <a class="ae km" rel="noopener" href="/coinmonks/hitbtc-review-c5143c5d53c2"> HitBTC审核</a></li><li id="3793" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/traderwagon-review" rel="noopener ugc nofollow" target="_blank"> TraderWagon回顾</a> | <a class="ae km" href="https://coincodecap.com/kraken-vs-gemini-vs-bityard" rel="noopener ugc nofollow" target="_blank">北海巨妖vs双子vs比特亚德</a></li><li id="e8e7" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated">如何在FTX交易所交易期货</li><li id="a747" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/okex-kucoin" rel="noopener ugc nofollow" target="_blank"> OKEx vs KuCoin </a> | <a class="ae km" href="https://coincodecap.com/celsius-alternatives" rel="noopener ugc nofollow" target="_blank">摄氏替代品</a> | <a class="ae km" href="https://coincodecap.com/buy-vechain" rel="noopener ugc nofollow" target="_blank">如何购买VeChain </a></li><li id="1a73" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" href="https://coincodecap.com/profitfarmers-review" rel="noopener ugc nofollow" target="_blank"> ProfitFarmers回顾</a> | <a class="ae km" href="https://coincodecap.com/cornix-trading-bot" rel="noopener ugc nofollow" target="_blank">如何使用Cornix Trading Bot </a></li><li id="a3e7" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated">最佳<a class="ae km" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="ccad" class="nb nc ht js b jt nk jw nl jz nm kd nn kh no kl ng nh ni nj dt translated"><a class="ae km" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币的终极指南</a></li></ul></div></div>    
</body>
</html>