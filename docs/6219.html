<html>
<head>
<title>First Blockchain project with Ethereum</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与以太坊合作的第一个区块链项目</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/setup-the-campaign-project-on-ethereum-1-f542e5a00051?source=collection_archive---------3-----------------------#2021-11-25">https://medium.com/coinmonks/setup-the-campaign-project-on-ethereum-1-f542e5a00051?source=collection_archive---------3-----------------------#2021-11-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="a287" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">活动项目的简要设置步骤。活动应用程序允许经理(活动所有者)创建一个活动，并让人们为他们感兴趣的活动捐款。该活动需要获得足够的批准者和资金，以便经理最终确定该活动。</em></p><p id="7b13" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我想把所有的荣誉都给<strong class="is hu">斯蒂芬·格里德</strong>，他是<a class="ae jp" href="https://www.udemy.com/share/101rjU3@nMBieXXtpGkcdP56qbxQJTYvdJufh7AoRrVkMjagA2Hknoba3R1_7QcttzV4Y5snDA==/" rel="noopener ugc nofollow" target="_blank">的导师<strong class="is hu"> Udemy课程</strong>T7】来建造这个项目。</a></p><h2 id="32aa" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">我将只解释如何在编辑器上设置项目，但我暂时不会解释其中的任何可靠性代码。</h2></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><h1 id="58f2" class="ks jr ht bd js kt ku kv jw kw kx ky ka kz la lb kd lc ld le kg lf lg lh kj li dt translated">应用模型</h1><h2 id="7465" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">登录页面</h2><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lj"><img src="../Images/bb0d8967f74fefd312aefd31b37c794f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEBUS2L3orEkO2rxfWG4ZQ.png"/></div></div></figure><h2 id="deb5" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">创建活动页面</h2><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lv"><img src="../Images/088d7bcb3b11bcde2cb63950da74d310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wcd_0vcKKoByyN4uoByLng.png"/></div></div></figure><h2 id="f5de" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">作出贡献</h2><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lw"><img src="../Images/5762e50f2ca0ba88782afd15d03e8c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sxlRnw3kcwGUMr2PnMKF1g.png"/></div></div></figure><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lx"><img src="../Images/d893a3322c96e3b56c69de31ac7d0f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXujhCP7anhYa_an6HZyvw.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Only the manager or a campaign owner can create a request with address of the recipient.</figcaption></figure><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff mc"><img src="../Images/cac33d0c0167f9dab0b4484f6a939727.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xiRmoFaX3icptZnCOP2CwQ.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">I entered too much Ether, so I create a new request.</figcaption></figure><h2 id="8337" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">批准请求</h2><p id="731c" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">您只有在向活动捐款后才能批准请求，因此请确保您已经向活动捐款，否则会出现错误。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff mi"><img src="../Images/3eacd61113a2530a0fedc9433715d2dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myDj-JE8QNrP7pjkKuT8cQ.png"/></div></div></figure><h2 id="1d61" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">完成请求</h2><p id="417f" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">一旦请求被最终确定，钱将被发送给接收者。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff mj"><img src="../Images/ce31423b4c147d6394bff16a03701a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WOVgbgE0YdbPfTcjxBpXGg.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Only the manager can finalize a request</figcaption></figure></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><blockquote class="mk"><p id="a5f9" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">首先，在VScode上安装<a class="ae jp" href="https://www.trufflesuite.com/ganache" rel="noopener ugc nofollow" target="_blank"> ganache </a>，solidity扩展，在chrome上安装Metamask扩展。确保使用测试网络ex。林克比测试网络</p></blockquote><p id="fdbb" class="pw-post-body-paragraph iq ir ht is b it mu iv iw ix mv iz ja jb mw jd je jf mx jh ji jj my jl jm jn hm dt translated">首先，使用命令提示符创建一个新的项目目录:<strong class="is hu"> mkdir kickstart </strong></p><p id="aec4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">下一个目录改变:<strong class="is hu"> cd kickstart </strong></p><p id="92ff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后打了一大串回车…</p><p id="d2e9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在安装软件包:<strong class="is hu"> npm安装ganache-CLI mocha solc @ . 4.17 fs-extra web 3</strong></p><p id="c197" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后在VScode或您首选的IDE上打开kickstart目录。</p><p id="67f1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在终端运行<strong class="is hu"> npm install web3，npm install solc@0.4.17 </strong></p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><p id="bbf8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在Kickstart目录下，创建一个<strong class="is hu">以太坊</strong>文件夹，创建一个<strong class="is hu"> compile.js </strong>和<strong class="is hu"> deploy.js </strong>文件。接下来在以太坊文件夹中创建另外两个文件夹，名为<strong class="is hu"> build </strong>和<strong class="is hu"> contracts。</strong></p><p id="a1bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在contracts文件夹中，创建一个文件<strong class="is hu"> Campaign.sol </strong></p><p id="1653" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">并粘贴一个合同代码(如果你有)，如果没有，你可以尝试从remix编辑器默认代码。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/b17bc1ec57bae87858312932c1abd418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*u6V3nZu54GOLPGFjf7ns1A.png"/></div></figure></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><blockquote class="mk"><p id="cca3" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">我们应该只运行一次编译脚本，并且应该能够运行我们的应用程序任意多次，而不必再次运行编译脚本。</p></blockquote><p id="661e" class="pw-post-body-paragraph iq ir ht is b it mu iv iw ix mv iz ja jb mw jd je jf mx jh ji jj my jl jm jn hm dt translated">运行编译脚本后的输出将是构建文件夹中的CampaignFactory和Campaign factory文件。然后，每当我们想访问ab时，我们可以在构建目录中读取它们，而无需重新编译我们的契约。</p><p id="5a10" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在综合终端打开以太坊文件夹，运行<strong class="is hu"> node compile.js </strong>，等待输出。</p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><h2 id="5549" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated"><strong class="ak">测试文件设置</strong></h2><p id="fa5f" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">在根项目目录中创建一个<strong class="is hu">测试</strong>文件夹。接下来创建一个<strong class="is hu"> Campaign.test.js </strong>文件，并在脚本部分编辑package.json文件，指定“mocha”进行测试。</p><blockquote class="mk"><p id="152b" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">"脚本":{</p><p id="e73b" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">“测试”:“摩卡”</p><p id="6fb5" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">}</p></blockquote><p id="3346" class="pw-post-body-paragraph iq ir ht is b it mu iv iw ix mv iz ja jb mw jd je jf mx jh ji jj my jl jm jn hm dt translated">运行<strong class="is hu"> npm运行测试</strong></p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/2fb5d64c6bec5c229e4c62e80db2faaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*bIvrWixG9zs2xS1kaN0PuA.png"/></div></figure></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><h2 id="87ee" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated"><strong class="ak">部署流程</strong></h2><p id="dd00" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">将部署脚本复制粘贴到deploy.js文件中。</p><p id="a3e4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">安装模块，打开kickstart目录中的终端并运行</p><p id="b697" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">NPM install @ truffle/HD wallet-provider</strong></p><h2 id="dffa" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated"><strong class="ak">重构部署</strong></h2><p id="43d3" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">重构deploy.js文件的代码，从</p><p id="c122" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">const { interface，bytecode } = require('。/compile . js’)；</p><p id="6254" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">把它改成</p><pre class="lk ll lm ln fq nc nd ne nf aw ng dt"><span id="991c" class="jq jr ht nd b fv nh ni l nj nk"><strong class="nd hu">const compiledFactory = require('./build/CampaignFactory.json');</strong></span></pre><p id="45ec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在合同创建过程中，<strong class="is hu"> JSON.parse(interface) </strong>和<strong class="is hu">deploy({ data:bytecode })</strong></p><p id="1f97" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将其更新为</p><p id="c7ca" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">const result = wait new web 3 . eth . contract(</p><p id="8fac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">JSON . parse(<strong class="is hu">compiled factory . interface</strong>))</p><p id="ff43" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">。部署({ data:<strong class="is hu">compiled factory . bytecode</strong>})</p><p id="b2dd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">。发送({ gas: '1000000 '，from:accounts[0]})；</p><p id="0fe6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">console.log('合同部署到'，result . options . address)；</p><p id="dd9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在以太坊目录下的终端上运行<strong class="is hu"> node deploy.js </strong>。</p><p id="3bcf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦部署成功，它将返回</p><blockquote class="nl nm nn"><p id="fdc7" class="iq ir jo is b it iu iv iw ix iy iz ja no jc jd je np jg jh ji nq jk jl jm jn hm dt translated"><em class="ht">试图从帐户0x7546部署..<br/>合同部署到</em> <strong class="is hu"> <em class="ht"> 0xb3b45..</em> </strong></p></blockquote><p id="83b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保留契约部署到的地址，并首先将其粘贴到其他地方，我们将在将来使用它。</p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><h2 id="9209" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">创建React App vs. Next.js</h2><p id="8913" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">创建react应用程序只建立一个简单的react应用程序不包括任何导航，数据，加载和我们需要的更多功能。</p><p id="929b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Next.js是react的一个框架，围绕它构建了一系列功能。我们需要Nect.js用于多页面应用程序，它还内置了对服务器端渲染和热模块重载的支持。</p><h2 id="4d04" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">为我们的应用程序设置Next</h2><p id="f3a0" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">打开Kickstart目录中的终端并安装模块，</p><p id="6d32" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> npm安装下一个反应反应对象</strong></p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff nr"><img src="../Images/b5003cb97f9b5680be8bc0269fa25ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Murj5PvtSNSaczpHiv4X_w.png"/></div></div></figure><p id="7b03" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在根目录下创建一个<strong class="is hu"> pages </strong>文件夹。接下来特别期待看到一个名为“<strong class="is hu"> pages </strong>的文件夹。如果你叫它别的什么，它不会工作。然后创建一个文件<strong class="is hu"> index.js </strong> →此页面显示列出所有活动</p><p id="53f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">启动next.js并在package.json中添加入口脚本</p><blockquote class="mk"><p id="494d" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">"脚本":{</p><p id="20ab" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">《考》:“摩卡”，</p><p id="1d4e" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">“开发”:“下一个开发”</p><p id="744c" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">}</p></blockquote><p id="049d" class="pw-post-body-paragraph iq ir ht is b it mu iv iw ix mv iz ja jb mw jd je jf mx jh ji jj my jl jm jn hm dt translated">在这些文件中，<strong class="is hu">创建一个导出单个react组件。</strong></p><blockquote class="mk"><p id="ab0e" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">从“React”导入React；</p><p id="9155" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">export default () =&gt; {</p><p id="6a00" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">返回<h1>这是显示页面。</h1>；</p><p id="f6a7" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">};</p></blockquote><p id="dde8" class="pw-post-body-paragraph iq ir ht is b it mu iv iw ix mv iz ja jb mw jd je jf mx jh ji jj my jl jm jn hm dt translated">开始一个项目，看看我们是否能访问这些网页。在kickstart目录终端<strong class="is hu">中执行该命令，npm运行dev </strong>并访问localhost:3000</p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><p id="7686" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在以太坊文件夹中创建<strong class="is hu"> web3.js </strong>和<strong class="is hu"> factory.js </strong>文件。</p><h2 id="1348" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">web3.js</h2><p id="387d" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">创建一个web3的新实例，一个由Metamask提供的提供者，我们可以通过</p><p id="4079" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">web 3 = new web 3(window . web 3 . current provider)；</p><p id="b101" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果用户在他们的浏览器中没有<strong class="is hu">元掩码</strong>，它将抛出一个错误，所以我们必须向他们指定这个应用程序需要<strong class="is hu">元掩码</strong>。</p><blockquote class="mk"><p id="347a" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">从“Web3”导入web 3；</p><p id="46a4" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">让web3</p><p id="9cd3" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">if(窗口类型！== '未定义' &amp;&amp; typeof window.web3！== '未定义'){</p><p id="ef97" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">//我们在浏览器中，如果元掩码已经在web3中注入(用户有元掩码扩展)→元掩码正在运行。</p><p id="5c7c" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">web 3 = new web 3(window . web 3 . current provider)；</p><p id="38af" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">}否则{</p><p id="506d" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">//我们在服务器上*或者*用户没有运行元掩码</p><p id="61a9" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">const provider = new web 3 . providers . http provider(</p><p id="b044" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">'您的infura链接'</p><p id="338c" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">);</p><p id="a9e3" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">web3 =新web3(提供商)；</p><p id="e98f" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">}</p><p id="e406" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">导出默认web3</p></blockquote><h2 id="c3b2" class="jq jr ht bd js jt ns jv jw jx nt jz ka jb nu kc kd jf nv kf kg jj nw ki kj kk dt translated">工厂. js</h2><blockquote class="mk"><p id="f7b6" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">从'导入web3。/web 3’；</p><p id="88f0" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">从“”导入CampaignFactory。/build/campaign factory . JSON '；//已编译的合同:abi</p><p id="10c7" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">const instance = new web 3 . eth . contract(</p><p id="1149" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">JSON . parse(campaign factory . interface)，</p><p id="38db" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">'我们上次部署的地址'</p><p id="b1ba" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">);</p><p id="b706" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">导出默认实例；</p></blockquote><p id="6e64" class="pw-post-body-paragraph iq ir ht is b it mu iv iw ix mv iz ja jb mw jd je jf mx jh ji jj my jl jm jn hm dt translated">现在我们已经有了CampaignFactory实例，可以用来检索已部署活动的列表，并在react组件中显示列表。</p><p id="4dea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在pages目录中，将newcampaign.js文件重命名为<strong class="is hu"> index.js. </strong></p><p id="0494" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">编辑内容以向用户显示此页面。创建组件文件夹并创建Layout.js和Header.js文件。因为这些布局和标题，我们希望它出现在我们的应用程序的每一页。</p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><p id="0151" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">next . js在为我们做什么？</strong></p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff nx"><img src="../Images/8f7f7e2f51a5222a27e9c5d8fb9c2a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBvJHD0Bd1E1h8KhmV00lg.png"/></div></div></figure><p id="a87c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Next.js使用了一个叫做“<strong class="is hu">服务器端渲染</strong>的过程。</p><p id="8e4e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">每当有人访问next服务器时，服务器将获取我们的React应用程序，而不是将所有的JS发送到浏览器，Next将自己呈现整个React应用程序。(所有JS代码将在下一个服务器上执行)</p><p id="9251" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该服务器构建HTML文档，并将完整呈现的HTML文档发送给用户，特别是如果我们的用户在移动设备上。最终JS代码被加载到浏览器中。</p><p id="853b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这种方法让用户比使用create-react-app更快地看到屏幕上的内容。</p><p id="ab6d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">如果我们不为next.js指定要渲染的窗口对象，就会出现错误。</strong></p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><h2 id="81e5" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">嵌套路由</h2><p id="cb3c" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">创建一个新文件夹，并在其中创建新组件。</p><h2 id="6cd2" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">使用Next.js导航</h2><p id="869f" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">用户发起活动后。用户应该能够自动重定向回我们的应用程序的根目录，并看到一个包括他们的新活动已经创建的所有活动的列表。</p><h2 id="1fe0" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">npm安装下一个路由—传统对等dep</h2><p id="c581" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">自定义Next.js启动什么先转到server.js。</p><blockquote class="mk"><p id="41ec" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">"脚本":{</p><p id="95fa" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">《考》:“摩卡”，</p><p id="cb9d" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">" dev": "node server.js "</p><p id="458d" class="ml mm ht bd mn mo mp mq mr ms mt jn ek">}</p></blockquote><h2 id="57a1" class="jq jr ht bd js jt ns jv jw jx nt jz ka jb nu kc kd jf nv kf kg jj nw ki kj kk dt translated">带有地址(令牌)的自定义路由</h2><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff ny"><img src="../Images/96cfc9760cd4e09958f0335206129b6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sh6yQ3XJbTqq5-9lNvC6SQ.png"/></div></div></figure></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><h2 id="39b4" class="jq jr ht bd js jt ju jv jw jx jy jz ka jb kb kc kd jf ke kf kg jj kh ki kj kk dt translated">重新部署战役工厂</h2><p id="ba0e" class="pw-post-body-paragraph iq ir ht is b it md iv iw ix me iz ja jb mf jd je jf mg jh ji jj mh jl jm jn hm dt translated">这是我们可能会做很多次的事情，更新合同，用新的功能重新部署合同，以返回关于单个活动的所有单独的详细信息。</p><figure class="lk ll lm ln fq lo fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff nz"><img src="../Images/9a17a27b5294bb8fda5b142e6a97ee01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DTGwsQUh3v2g7T2665FVAg.png"/></div></div></figure><p id="7dc0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">当你想重新部署合同时，在以太坊文件夹中，运行<strong class="is hu">节点compile.js </strong></p><p id="c554" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后<strong class="is hu">节点deploy.js </strong></p><p id="d5e2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以获取新版本的新协定地址，并确保将此新地址协定更新到factory.js中的代码编辑器。</p></div><div class="ab cl kl km hb kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hm hn ho hp hq"><p id="e3d8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">这只是一个关于如何使用React和Next.js设置项目以在web应用程序上显示的概述。因此，我可以对它如何工作有一个基本的想法，但没有去详细了解里面的代码。</em></p><blockquote class="mk"><p id="a1fb" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated">加入Coinmonks <a class="ae jp" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jp" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="3e0c" class="jq jr ht bd js jt ns jv jw jx nt jz ka jb nu kc kd jf nv kf kg jj nw ki kj kk dt translated">另外，阅读</h2><ul class=""><li id="6c6b" class="oa ob ht is b it md ix me jb oc jf od jj oe jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易机器人</a> | <a class="ae jp" rel="noopener" href="/coinmonks/cryptohopper-review-a388ff5bae88"> Cryptohopper审查</a> | <a class="ae jp" href="https://blog.coincodecap.com/bexplus-review" rel="noopener ugc nofollow" target="_blank"> Bexplus审查</a></li><li id="6b89" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度的加密交易所</a> | <a class="ae jp" rel="noopener" href="/coinmonks/bitcoin-savings-account-e65b13f92451">比特币储蓄账户</a></li><li id="5c74" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/binance-fees-8588ec17965">币安费用</a> | <a class="ae jp" rel="noopener" href="/coinmonks/botcrypto-review-2021-build-your-own-trading-bot-coincodecap-6b8332d736c7">僵尸加密审查</a> | <a class="ae jp" rel="noopener" href="/coinmonks/hotbit-review-cd5bec41dafb">热点审查</a></li><li id="390e" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/my-experience-with-crypto-copy-trading-d6feb2ce3ac5">我的密码交易经验</a> | <a class="ae jp" rel="noopener" href="/coinmonks/aax-exchange-review-2021-67c5ea09330c"> AAX交易所评论</a></li><li id="98d1" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/bybit-margin-trading-e5071676244e">逐位融资融券交易</a> | <a class="ae jp" rel="noopener" href="/coinmonks/binance-margin-trading-c9eb5e9d2116">币安融资融券交易</a> | <a class="ae jp" rel="noopener" href="/coinmonks/overbit-review-9446ed4f2188">超位审核</a></li><li id="394b" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/trading-signal" rel="noopener ugc nofollow" target="_blank">有哪些交易信号？</a> | <a class="ae jp" href="https://blog.coincodecap.com/bitstamp-coinbase" rel="noopener ugc nofollow" target="_blank">比特斯坦普vs比特币基地</a></li><li id="a720" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/profitfarmers-review" rel="noopener ugc nofollow" target="_blank"> ProfitFarmers回顾</a> | <a class="ae jp" href="https://blog.coincodecap.com/cornix-trading-bot" rel="noopener ugc nofollow" target="_blank">如何使用Cornix交易机器人</a></li><li id="78eb" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/buy-bitcoin-anonymously" rel="noopener ugc nofollow" target="_blank">如何匿名购买比特币</a> | <a class="ae jp" href="https://blog.coincodecap.com/bitcoin-cash-wallets" rel="noopener ugc nofollow" target="_blank">比特币现金钱包</a></li><li id="777b" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/binance-vs-ftx" rel="noopener ugc nofollow" target="_blank">币安vs FTX </a> | <a class="ae jp" href="https://blog.coincodecap.com/solana-wallets" rel="noopener ugc nofollow" target="_blank">最佳(SOL)索拉纳钱包</a></li><li id="d34d" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/swap-crypto-on-uniswap" rel="noopener ugc nofollow" target="_blank">如何在Uniswap上交换加密？</a> | <a class="ae jp" href="https://blog.coincodecap.com/a-ads-review" rel="noopener ugc nofollow" target="_blank"> A-Ads审查</a></li><li id="7883" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/cryptocurrency-savings-accounts-be3bc0feffbf">加密货币储蓄账户</a> | <a class="ae jp" rel="noopener" href="/coinmonks/yobit-review-175464162c62"> YoBit审核</a></li><li id="f652" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" rel="noopener" href="/coinmonks/botsfolio-vs-napbots-vs-mudrex-c81344970c02">Botsfolio vs nap bots vs Mudrex</a>|<a class="ae jp" rel="noopener" href="/coinmonks/gate-io-exchange-review-61bf87b7078f">gate . io交流回顾</a></li><li id="7b9b" class="oa ob ht is b it oj ix ok jb ol jf om jj on jn of og oh oi dt translated"><a class="ae jp" href="https://blog.coincodecap.com/coinflex-review" rel="noopener ugc nofollow" target="_blank"> CoinFLEX评论</a> | <a class="ae jp" href="https://blog.coincodecap.com/aex-exchange-review" rel="noopener ugc nofollow" target="_blank"> AEX交易所评论</a> | <a class="ae jp" href="https://blog.coincodecap.com/upbit-review" rel="noopener ugc nofollow" target="_blank"> UPbit评论</a></li></ul></div></div>    
</body>
</html>