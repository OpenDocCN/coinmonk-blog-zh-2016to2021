<html>
<head>
<title>Getting started with Ligo (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ligo入门(第2部分)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/getting-started-with-ligo-part-2-fb0c000e40c6?source=collection_archive---------2-----------------------#2020-02-24">https://medium.com/coinmonks/getting-started-with-ligo-part-2-fb0c000e40c6?source=collection_archive---------2-----------------------#2020-02-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="31fb" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">使用Ligo为Tezos区块链创建智能合约</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/3e150404f47cf46372f994f060331ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rm6UceSxjeNllOOr7KWWkA.jpeg"/></div></div></figure><p id="851a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">(这是关于Ligolang的系列教程的第2部分，LIGO lang是Tezos的一种智能契约语言。你可以在这里  <em class="kq">找到part 1 </em> <a class="ae kr" rel="noopener" href="/@claudebarde/getting-started-with-ligo-13ea2c4e844e"> <em class="kq">。)</em></a></p><p id="0742" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在本系列的第1部分中，我们基于打开<a class="ae kr" href="https://ide.ligolang.org/" rel="noopener ugc nofollow" target="_blank">在线编辑器</a>时提供的契约创建了一个简单的契约。您可以通过<a class="ae kr" href="https://ide.ligolang.org/p/DzQ592x-s-IBBzGzWtV4Tw" rel="noopener ugc nofollow" target="_blank">链接</a>轻松访问我们创建的合同。</p><p id="edf1" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">编写智能合同的一大部分是测试它们，以验证它们是否按计划运行。在线IDE提供了一些功能可以帮助我们实现它，这将是本教程的主题。在按下某些按钮之前，我们将先看看不同的功能:)</p><h1 id="ce77" class="ks kt ht bd ku kv kw kx ky kz la lb lc iz ld ja le jc lf jd lg jf lh jg li lj dt translated">界面</h1><p id="caee" class="pw-post-body-paragraph ju jv ht jw b jx lk iu jz ka ll ix kc kd lm kf kg kh ln kj kk kl lo kn ko kp hm dt translated">无论您是从头开始输入第1部分的代码，还是点击上面的链接，您都应该看到一个看起来或多或少像下面这样的界面(截至2020年2月):</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lp"><img src="../Images/29bd43e4f38ee1eb56083293d9c841d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t5kHTowmZuxdDY0hEy_TPA.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">Screenshot of Ligo online IDE</figcaption></figure><p id="8e60" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">IDE可以大致分为4个部分:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lp"><img src="../Images/6b28c94e814bbdcc748c17880d9d2b9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJaeqoRWimFAvW-WMgLVog.png"/></div></div></figure><ul class=""><li id="07d9" class="lu lv ht jw b jx jy ka kb kd lw kh lx kl ly kp lz ma mb mc dt translated"><strong class="jw hu">导航条区域</strong>:现在这不是很有用，但是当你写代码的时候，如果需要的话，你可以找到一个快速访问文档的链接。</li><li id="7bef" class="lu lv ht jw b jx md ka me kd mf kh mg kl mh kp lz ma mb mc dt translated"><strong class="jw hu">语法区</strong> : Ligo支持三种不同的语法，Cameligo(受OCaml的启发，我们将在未来的教程中更好地了解它)、Pascal(我们很可能不会在这里谈论它)和ReasonML(这是我们在这里使用的一个，在我看来，它是来自JavaScript/Solidity的程序员的一个很好的入口)。注意，当加载页面时，默认选择“Cameligo”，尽管我们使用的是Reasonligo。在这种情况下，只需手动将其切换到Reasonligo。</li><li id="7c66" class="lu lv ht jw b jx md ka me kd mf kh mg kl mh kp lz ma mb mc dt translated">编辑区:这是你写代码的地方！有一个简单但有用的高亮语法，自动缩进，但是不支持你输入的语法错误(Ligo团队，如果你读了这篇文章！)</li><li id="25db" class="lu lv ht jw b jx md ka me kd mf kh mg kl mh kp lz ma mb mc dt translated"><strong class="jw hu">“actions”区域</strong>:这是我如何调用IDE的区域，在这里你可以编译、部署、模拟运行和评估你的代码的函数和值。在本教程中，我们将使用这个区域来测试我们的<a class="ae kr" href="https://blog.coincodecap.com/tag/smart-contact/" rel="noopener ugc nofollow" target="_blank">智能合约</a>。</li></ul><p id="e965" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">现在，我们来看一下“Configure”选项卡下拉菜单中给出的不同选项。</p><h2 id="7a5d" class="mi kt ht bd ku mj mk ml ky mm mn mo lc kd mp mq le kh mr ms lg kl mt mu li mv dt translated">编译智能合同</h2><p id="d5bf" class="pw-post-body-paragraph ju jv ht jw b jx lk iu jz ka ll ix kc kd lm kf kg kh ln kj kk kl lo kn ko kp hm dt translated">既然我们的智能契约已经准备好了，我们必须首先确保它能够正确编译。编译过程将我们的Ligo代码转换成迈克尔逊语言，这种语言实际上是用来在Tezos <a class="ae kr" href="https://blog.coincodecap.com/tag/blockchain/" rel="noopener ugc nofollow" target="_blank">区块链</a>上运行智能合约的。<br/>大多数时候，你不打算更改入口点的名称而使用<em class="kq"> main </em>，所以你不必在“entry point”字段中更改它。你只需要按下“运行”，然后等几秒钟，编译器就会吐出迈克尔逊代码。如果您的代码有任何问题，此时您将会收到一条错误消息。一旦你的代码被编译并且你看到了迈克尔逊代码，你可以使用“输出”栏顶部的两个图标选择复制它或者下载到一个文本文件中。</p><p id="1653" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">您不会对这段代码编译成功感到惊讶🙂</p><h2 id="86fe" class="mi kt ht bd ku mj mk ml ky mm mn mo lc kd mp mq le kh mr ms lg kl mt mu li mv dt translated">部署智能合同</h2><p id="a080" class="pw-post-body-paragraph ju jv ht jw b jx lk iu jz ka ll ix kc kd lm kf kg kh ln kj kk kl lo kn ko kp hm dt translated">我们在这里不打算使用这个函数，因为我们的目标只是在本地测试智能合约，只需知道它会将合约部署到Babylon网络。</p><h2 id="e139" class="mi kt ht bd ku mj mk ml ky mm mn mo lc kd mp mq le kh mr ms lg kl mt mu li mv dt translated">试运行智能合同</h2><p id="0062" class="pw-post-body-paragraph ju jv ht jw b jx lk iu jz ka ll ix kc kd lm kf kg kh ln kj kk kl lo kn ko kp hm dt translated">这就是我们将要测试智能合约的地方！模拟运行允许您测试契约的不同伪入口点，就好像契约已经部署并且您正在发送一个事务一样。选择“模拟运行”后，屏幕右侧的面板应如下所示:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mw"><img src="../Images/bfa1e0597b0b95e9d0c3f631a2bf857a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7VxGUBu5qYS_GvSjADkZg.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">Dry Run</figcaption></figure><p id="a0c2" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">正如您所看到的，有3个不同的字段:“<em class="kq"> Entrypoint </em>”字段必须包含契约的真正入口点，也就是我们例子中的main函数；“<em class="kq"> Parameters </em>”字段接收您想要测试的伪入口点的名称及其参数(如果有的话)；“<em class="kq">存储</em>”字段获取当前的存储值。</p><p id="ca8e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">虽然字段中的默认参数是正确的，但是存储是错误的，因为我们用记录替换了默认的整数。您现在可以通过键入:<code class="eh mx my mz na b">{count: 0, name: ""}</code>(即您可能会在部署时为您的合同提供的默认存储)来修复它。</p><p id="80e6" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">你现在可以点击“运行”。等待几秒钟后，您应该在“Output”列中看到下面的结果:<code class="eh mx my mz na b">(list[] , record[count-&gt;1, name-&gt;""])</code>。你可能猜到了它的意思，这是主函数的返回值，一个操作列表和新的存储。您可以看到<em class="kq">计数</em>值已经增加到1，而<em class="kq">名称</em>值保持不变。还需要注意的是，IDE不会将新的存储空间保存在内存中，它将始终使用您在“存储空间”字段中提供的存储空间值进行模拟运行。</p><p id="579c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">现在让我们在存储中保存一个名称！我相信你现在知道怎么做了😏<br/>我们将从“参数”字段中删除<code class="eh mx my mz na b">Increment 1</code>,并添加<code class="eh mx my mz na b">SaveName "John"</code>。不要忘记将值放在双引号中，因为Ligo编译器在这里需要一个字符串。您可以使用相同的值保留默认存储，并试运行合同。如果一切顺利，你应该去看看<code class="eh mx my mz na b">(list[] , record[count-&gt;0, name-&gt;"John"])</code>。</p><p id="0ed5" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这是在在线编辑器中测试智能合约的一个非常基本的方法，以验证您获得的值是您期望的值。这是一个非常简单的智能合约，因此测试也很简单，但是我们将在以后的教程中使用它来测试更复杂的智能合约。</p><h2 id="8ac7" class="mi kt ht bd ku mj mk ml ky mm mn mo lc kd mp mq le kh mr ms lg kl mt mu li mv dt translated">评估功能</h2><p id="d18a" class="pw-post-body-paragraph ju jv ht jw b jx lk iu jz ka ll ix kc kd lm kf kg kh ln kj kk kl lo kn ko kp hm dt translated">如果您只想测试分配给伪入口点的其中一个函数，而不是整个智能协定，那么这个选项会很有用。选择它后，您应该会看到以下界面:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nb"><img src="../Images/25d3b1f884237abd5224cea8feaaed80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pUV10TaEoi2CZ0lBCVZFdA.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">Evaluating a function</figcaption></figure><p id="87ff" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们在代码中保留了<em class="kq"> add </em>函数，所以我们不必改变入口点，但是，参数现在不同了，因为我们期望存储一个记录。删除“参数”字段中的默认值，并输入<code class="eh mx my mz na b">({count:0,name:""}, 6)</code>。这将传递一个带有默认值和值6的存储记录。点击“运行”，几秒钟后，你会在“输出”栏看到:<code class="eh mx my mz na b">record[count -&gt; 6 , name -&gt; ""]</code>。事实上，我们期待字段计数等于6的记录！</p><p id="ec3f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">您还可以测试“sub”和“saveName”函数，以验证存储是否正确更新。</p><h1 id="0c38" class="ks kt ht bd ku kv kw kx ky kz la lb lc iz ld ja le jc lf jd lg jf lh jg li lj dt translated">结论</h1><p id="f8ff" class="pw-post-body-paragraph ju jv ht jw b jx lk iu jz ka ll ix kc kd lm kf kg kh ln kj kk kl lo kn ko kp hm dt translated">您现在对Ligo在线编辑器的界面工作方式有了更好的理解。该接口对于编写合同、将合同编译到Michelson、测试合同和部署合同非常有用。</p><p id="84a3" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在本教程的下一部分，我们将开始深入研究Ligo，并编写一个处理不同类型的数据和tez的真实世界的契约！</p><p id="c0cd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">敬请期待！</p><p id="ae3a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这篇文章也可以在我的IPFS博客<a class="ae kr" href="https://decentradev.netlify.com/#/post/ligo-lesson-2" rel="noopener ugc nofollow" target="_blank">上找到，地址是</a>。</p><blockquote class="nc"><p id="8860" class="nd ne ht bd nf ng nh ni nj nk nl kp ek translated"><a class="ae kr" rel="noopener" href="/coinmonks/getting-started-with-ligo-part-3-c1c4a403c5e4">在此阅读第3部分</a></p><p id="6a91" class="nd ne ht bd nf ng nh ni nj nk nl kp ek translated"><a class="ae kr" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nn no np nq nr jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nm"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ns"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></div></figure></div></div>    
</body>
</html>