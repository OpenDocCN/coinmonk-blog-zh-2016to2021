<html>
<head>
<title>Deploy a Smart Contract on ethereum Development, Ropsten, and MainNet #HowToBUIDL (3/n)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在以太坊开发、Ropsten和MainNet #HowToBUIDL (3/n)上部署智能合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/complete-walkthrough-deploy-a-smart-contract-to-development-ropsten-and-mainnet-howtobuidl-a7d1a89fa75a?source=collection_archive---------0-----------------------#2018-05-13">https://medium.com/coinmonks/complete-walkthrough-deploy-a-smart-contract-to-development-ropsten-and-mainnet-howtobuidl-a7d1a89fa75a?source=collection_archive---------0-----------------------#2018-05-13</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="3002" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">#BUIDL::如何在没有完整节点的情况下部署SmartContracts。</h2></div><blockquote class="ji jj jk"><p id="99d8" class="jl jm jn jo b jp jq iu jr js jt ix ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">当人们开始智能合约开发时，有一种倾向是掩盖如何将他们正在玩的示例代码实际部署到公共区块链。这是软件开发的关键部分，理解这一点很重要。毕竟，一个永远得不到观众的聪明的契约有什么好处呢？在我们开始宣传它的存在之前，我们应该确保座位和场地的存在！该部署了。</p></blockquote><p id="b8b7" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们将引用我们在# HowToBUIDL系列的上一篇文章中开始的<code class="eh kl km kn ko b">ComeOneComeAll</code>项目中的同一个<code class="eh kl km kn ko b">GreatestShow</code>契约，标题为<a class="ae kp" rel="noopener" href="/coinmonks/howtobuidl-2ofn-come-one-come-all-8a3e0ee706b1">‘您的第一个智能契约’</a>，因此如果您还没有自己构建它，请在继续之前获取一个<a class="ae kp" href="https://github.com/emmonspired/ComeOneComeAll" rel="noopener ugc nofollow" target="_blank">示例项目</a>的副本。</p><blockquote class="kq"><p id="80d2" class="kr ks ht bd kt ku kv kw kx ky kz kh ek translated"><a class="ae kp" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><figure class="lb lc ld le lf lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/54b5d276b3ccfabf867d9bea8e6a84fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-pNy6MvfqcU8XonbekXcmA.png"/></div></div></figure><p id="05d3" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">到目前为止，我们已经建立了我们的<code class="eh kl km kn ko b">GreatestShow</code>智能合同，但是我们甚至还没有在本地运行它。我们先这样做一会儿。在项目的基础上打开一个控制台窗口，运行一个区块链模拟器，名为<code class="eh kl km kn ko b">testrpc</code>。TestRPC</p><blockquote class="ji jj jk"><p id="5466" class="jl jm jn jo b jp jq iu jr js jt ix ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated"><strong class="jo hu"> testrpc </strong>是一个基于Node.js的以太坊客户端，用于测试和开发。它使用ethereumjs来模拟完整的客户端行为，并使开发以太坊应用程序变得更快。它还包括所有流行的RPC功能和特性(如事件)，并且可以确定性地运行，使开发变得轻而易举。</p></blockquote><p id="f147" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">确保您已经在命令行上安装了testrpc。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="c012" class="lv lw ht ko b fv lx ly l lz ma">npm install -g ethereumjs-testrpc</span></pre><p id="5326" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">然后，启动一个<code class="eh kl km kn ko b">testrpc</code>实例，这是在<em class="jn">模拟</em>采矿时运行符合以太坊<em class="jn">协议</em>的测试区块链的好方法，因此进行函数调用和提交事务是快速而高效的。帐户可以重复使用和重置。不用于生产，但肯定用于开发&amp;测试阶段。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="ca72" class="lv lw ht ko b fv lx ly l lz ma">testrpc -m “warrior minimum breeze raven garden express solar flavor obvious twenty alpha actress”</span></pre><p id="3698" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">以<code class="eh kl km kn ko b">-m</code>标志开始<code class="eh kl km kn ko b">testrpc</code>允许你指定一个12个字的助记符，该程序生成的所有账户将使用该助记符作为创建<em class="jn">私钥</em>和账户<em class="jn">地址</em>的种子。这是一个我们现在将跳过的细节，但是不，每次开始使用相同的助记符允许我们确定性地知道将创建什么帐户。一旦这个过程开始运行，我们就会知道，因为我们将得到类似于10个可用帐户及其私钥列表的输出。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mb"><img src="../Images/f2385c877e5fc134ed4870acd34281d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*olPN1bZc1nhBcVEPcEm42A.png"/></div></div></figure><p id="fc64" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">现在我们已经有一个模拟的区块链在本地主机的端口8545上运行，客户端可以连接到它。我们的第一个客户将是作为<code class="eh kl km kn ko b">truffle</code>框架一部分的<code class="eh kl km kn ko b">truffle console</code>。继续，打开一个新的标签，并启动控制台。</p><p id="0059" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><code class="eh kl km kn ko b">truffle console</code></p><p id="e798" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">你会被提示一个可怕的错误。别担心。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="ba90" class="lv lw ht ko b fv lx ly l lz ma">No network available. Use `truffle develop` or add network to truffle.js config.</span></pre><p id="d9fe" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">不要像消息建议的那样使用<code class="eh kl km kn ko b">truffle develop</code>,因为我们需要完成这一步，以便在将来继续连接其他网络。这是了解如何连接到其他网络的必要步骤。</p><p id="710d" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">打开你的编辑器(我用的是sublime，所以我可以在提示符下输入<code class="eh kl km kn ko b">subl .</code>。在配置的根目录下打开一个名为<code class="eh kl km kn ko b">truffle.js</code>的文件。让我们定义三种不同的网络:<code class="eh kl km kn ko b">development</code>、<code class="eh kl km kn ko b">ropsten</code>和<code class="eh kl km kn ko b">mainnet</code>。稍后我们将为ropsten和mainnet填充细节。现在让我们用<code class="eh kl km kn ko b">development</code>开始吧。我喜欢让<code class="eh kl km kn ko b">gas</code>限制尽可能接近<code class="eh kl km kn ko b">ropsten</code>测试网络，但这只是个人偏好，也有一些实际目的。我可以保证我的合同从来没有要求测试网络的限制，这在这个时候低于<code class="eh kl km kn ko b">mainnet</code>。保持在这个限度之内，你也是生产的黄金。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="b2a4" class="lv lw ht ko b fv lx ly l lz ma">let ropstenProvider, mainNetProvider;</span><span id="7d35" class="lv lw ht ko b fv mc ly l lz ma">module.exports = {<br/>  networks: {<br/>    development: { host: "localhost", port: 8545, <br/>                   network_id: "*", gas: 4465030 },    <br/>    ropsten: { provider: ropstenProvider, <br/>                   network_id: "3", gas: 4465030 },<br/>    mainnet: { provider: mainNetProvider, <br/>                   network_id: "1", gas: 7500000 }<br/>  }<br/>};</span></pre><p id="83b5" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">请务必保存您的文件，然后让我们回到控制台。这一次键入<code class="eh kl km kn ko b">truffle console</code>将连接到您的本地<code class="eh kl km kn ko b">testrpc</code>，输出中将出现几行，在那里读入版本和帐户。</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mk"><img src="../Images/9b4dc8689019f2461a3a42f45aeea837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBfmtsOc4jK3rYpLGiloSQ.png"/></div></div></figure><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff ml"><img src="../Images/bc0adc2ed675c4a270f7515936ff3ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*um4p_7kBzGXcR2EAJyP3IQ.png"/></div></div></figure><p id="cc7e" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">web3.js库中的函数和属性在控制台中可用。在<code class="eh kl km kn ko b">testrpc</code>窗口中，记录了所有与本地主机网络的交互。我们可以看到它配置正确。</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><p id="055f" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">让我们找点乐子。将<code class="eh kl km kn ko b">GreatestShow</code>合同部署到<code class="eh kl km kn ko b">development</code>网络的时间到了。这只是我们的本地机器，但无论如何是时候获得一些使用合同的经验了。在<code class="eh kl km kn ko b">truffle console:</code></p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/60c8a628c125310fac7be38e94d93dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lITVFa3cntxZDNxX5qxX1Q.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">The first time we’re deploying our `<strong class="bd mq">GreatestShow</strong>` contract is to a very tiny audience: ourselves.</figcaption></figure><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="7a7f" class="lv lw ht ko b fv lx ly l lz ma">GreatestShow.new("PT Barnum")</span></pre><p id="2b8b" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">您将在屏幕上看到大量的输出，基本上只是在您的<code class="eh kl km kn ko b">development</code>环境中创建的对象的JSON文本表示。请注意，<code class="eh kl km kn ko b">Transaction</code>实际上发生了，将您的代码部署到本地区块链。现在，在日志中显示的地址创建了一个您的<code class="eh kl km kn ko b">GreatestShow</code>智能契约的实例。注意，相同的<code class="eh kl km kn ko b">address</code>和<code class="eh kl km kn ko b">transactionHash</code>出现在您的JSON对象中。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mr"><img src="../Images/7040a3a86e65f972c026587d08be6c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pm5A8E8GH0Bex6WvC8vIkg.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">On the left, you’ll see a series of RPC logs that transpired as a result of creating the new GreatestShow contract, including a Transaction hash.</figcaption></figure><p id="17ef" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">使用这个地址，我们可以获得对刚刚创建的契约的引用。一旦我们有了一个引用，我们就可以开始使用它，调用函数并查看它与区块链的交互:</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="2030" class="lv lw ht ko b fv lx ly l lz ma">show = GreatestShow.at('0xf2ddaa2b461af9955fbe220aa229806611f6ac02')<br/>show.setAvailableSeats( 125 );<br/>show.getAvailableSeats();</span></pre><p id="b2ff" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">不言自明。我们设置了125个座位，并检查了数据。<br/>在我们的契约中改变数据的行为产生了一个新的<code class="eh kl km kn ko b">transaction</code>！<br/> <strong class="jo hu">理解这一点很重要。</strong>对<strong class="jo hu"> <em class="jn">状态</em> </strong> <em class="jn"> </em>的任何改变都将要求一个有效的事务转移到一个新的状态。在真实的区块链中，在将新状态存储在区块链上之前，节点将通过代码的执行和验证来实现<strong class="jo hu"><em class="jn"/></strong><em class="jn"/>。</p><blockquote class="ji jj jk"><p id="00d3" class="jl jm jn jo b jp jq iu jr js jt ix ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">以太坊状态转换功能:<code class="eh kl km kn ko b"><em class="ht">APPLY(S,TX) -&gt; S'</em></code></p></blockquote><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff ms"><img src="../Images/de576d1f988c4adbbbbaed25e9bfbba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ndUxgF0Slqav_-SKDWH-RA.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Example of an Ethereum state transition. Calling a function that changes state requires a valid Transaction to be mined.</figcaption></figure><p id="f9a9" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">在本教程中，我们不会对我们的<code class="eh kl km kn ko b">GreatestShow</code>智能契约的每个函数进行调用，但是您可以通过在变量名后点击<code class="eh kl km kn ko b">&lt;tab&gt;</code>键，然后点号来自行探索。因为我们将引用命名为<code class="eh kl km kn ko b">show</code>，所以它将是<code class="eh kl km kn ko b">show.&lt;tab&gt;</code>，控制台将帮助提示您契约上可用的属性和功能。请注意，<code class="eh kl km kn ko b">show.ringMaster</code>引用了一个<em class="jn">公共视图函数</em>，它不会*改变<em class="jn">状态，</em>因此用<code class="eh kl km kn ko b">show.ringMaster.call()</code>调用它*不*需要<code class="eh kl km kn ko b">Transaction</code>。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mt"><img src="../Images/22e4a22d297ea839f2b0c976afe5dd02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LMC2zvIdQnqKaY5t-FdL1g.png"/></div></div></figure><p id="d898" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">现在，让我们通过点击<code class="eh kl km kn ko b">ctrl-c</code>来终止<code class="eh kl km kn ko b">truffle console</code>进程。再次启动它。请注意，由于契约的状态存储在我们唯一的节点中，并且该节点已经死亡，在没有旧区块链的任何上下文的情况下启动它将意味着我们失去对本地契约的引用。这就是为什么<code class="eh kl km kn ko b">development</code>和<code class="eh kl km kn ko b">testrpc</code>对于快速的一次性测试和<em class="jn">单元测试</em>(我们将在以后的文章中讨论)这样的小目的是有用的。请注意，当我们试图重新获取杀死<code class="eh kl km kn ko b">testrpc</code>之前创建的合同的引用时，它不再可用。我们必须重新创建并重新部署它。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mu"><img src="../Images/25ec0fdbc1d6a45fa5ed9e8729288ce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k6v78G5swk91FE6OGglNkA.png"/></div></div></figure></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><p id="23de" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">如果我们把代码留给我们自己和我们自己的机器，我们可以看到它，但其他人看不到。为了我们自己的眼睛和享受在当地部署不是我答应你的。差远了。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/e978f3a6191ac2944e5975f91212bb4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*avEemwJ4TukyvS1a_n8a7Q.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">It’s empty and dark in our private Blockchain. Let’s deploy somewhere the rest of the world can see it.</figcaption></figure></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hm hn ho hp hq"><p id="05cf" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">对于跨越多人的开发团队的测试，或者对于必须持续很多天的状态，一个可用的选择是使用真实的、持久的区块链。你可以通过点燃<code class="eh kl km kn ko b">geth</code>来启动你自己的私人以太坊区块链，也可以启动几个矿工，但这会让你陷入其他问题，比如服务器基础设施成本，并且需要你开始考虑谁来负责维护。不知不觉中，现在您不再担心您的核心业务，也不再在核心产品或服务之外的事情上浪费大量时间。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mv"><img src="../Images/339395ea81cbfc9866f5d2306c29abc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zfg2irHl-loSXvCI4XrUmQ.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Infura.io provides a way to connect to the popular Ethereum networks for *FREE*</figcaption></figure><p id="2166" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">如果我告诉你有一种方法可以免费连接和部署到以太坊<code class="eh kl km kn ko b">ropsten</code>和<code class="eh kl km kn ko b">mainnet</code>会怎么样？您不必担心自己的运行节点，也不必担心维护或停机，您可以专注于您的<code class="eh kl km kn ko b">GreatestShow</code>？有。</p><blockquote class="ji jj jk"><p id="c0ed" class="jl jm jn jo b jp jq iu jr js jt ix ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">进入<strong class="jo hu"> infura.io. </strong>点击“免费开始”&amp;输入信息。你会得到一个API密匙。</p></blockquote><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mv"><img src="../Images/36c126d5245768692b9b38ab8868a338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSwgeZwkqOmHm4vK89-1dA.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Step 1: Fill Out Your Information to Request API Access</figcaption></figure><p id="a6a9" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">邮件列表是可选的，但是可以让您了解来自Infura的最新消息。需要同意服务条款，但是协议中的法律术语相当标准。您同意使用一项无需您自己的硬件即可将您连接到以太坊网络的服务。您同意不以恶意方式使用服务。如果你问我的话，我认为免费使用这款产品的条款非常公平，风险/回报也不对称。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mw"><img src="../Images/66ed8ed4cc72cea6a0ad9100d6fa7f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bo7yKB-kRMySacnruJdgnw.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Step 2: Copy and Secure your API Key Safely</figcaption></figure><p id="fbb8" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">记下(your-api-key ),它将是一串随机的字母和数字。一定要保密。您的API密钥与您的帐户相关联，它用于将您的应用程序与各种测试网络和MainNet连接起来。请安全存放。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mx"><img src="../Images/9a40af96ffa6300204dbad2c2d02687e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B2W6v03DvQARsJY-Y5NoPw.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Step 3: Scroll down and make note of the URLs followed by your API Key</figcaption></figure><p id="e7af" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">当你向下滚动时，你会注意到无论你使用的是<code class="eh kl km kn ko b">mainnet</code>还是像<code class="eh kl km kn ko b">ropsten</code>或<code class="eh kl km kn ko b">rinkeby</code>这样的测试网络，你都会在url后面加上<code class="eh kl km kn ko b">/</code>和<code class="eh kl km kn ko b">your-api-key</code>。这就是我们注册所要做的一切。现在让我们配置我们的<code class="eh kl km kn ko b">truffle.js</code>文件来使用这个键。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/40c590057eb8301373c9249fdfa8b7f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iFONpYLVTc9ObKbwPwszdg.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Let’s prepare the project for it’s first launch onto the Ropsten test network.</figcaption></figure><h2 id="4412" class="lv lw ht bd my mz na nb nc nd ne nf ng ki nh ni nj kj nk nl nm kk nn no np nq dt translated">让我们为部署准备最棒的表演</h2><p id="853b" class="pw-post-body-paragraph jl jm ht jo b jp nr iu jr js ns ix ju ki nt jx jy kj nu kb kc kk nv kf kg kh hm dt translated">因为我们想让privateKey和Infura.io API key这样的东西保密，所以让我们在项目的根目录下创建一个<code class="eh kl km kn ko b">secrets.js</code>文件。<strong class="jo hu">为了举例，我使用了一个众所周知的私有密钥，但是不要在生产中使用相同的密钥。你的数据和钱会被偷。</strong></p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="7f81" class="lv lw ht ko b fv lx ly l lz ma">var infuraKey = "&lt;your-infura-key&gt;";<br/>var accountPK = "<strong class="ko hu">7879d28218d7b2339ec492a6f6ba73c0ea9544080703c4823c9d85b54d165d54</strong>";<br/>var mainnetPK = accountPK;<br/>var ropstenPK = accountPK;</span><span id="08b6" class="lv lw ht ko b fv mc ly l lz ma">module.exports = {infuraKey: infuraKey, mainnetPK: mainnetPK, ropstenPK:ropstenPK};</span></pre><p id="a990" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们将数据从<code class="eh kl km kn ko b">secrets.js</code>中分离出来，因为它们将存储在我们的计算机上，而不是github项目中。向您的<code class="eh kl km kn ko b">.gitignore</code>文件添加一个条目，这样我们就不会意外地将它签入到您的开源项目中。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="e186" class="lv lw ht ko b fv lx ly l lz ma">secrets.js</span></pre><p id="85c8" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们将不得不安装一些依赖项来完成这项工作。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="5df0" class="lv lw ht ko b fv lx ly l lz ma">npm install --save-dev truffle-wallet-provider</span></pre><p id="173e" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">现在回到<code class="eh kl km kn ko b">truffle.js</code>,我们需要写一些引入这些变量的东西。这将充实我们用全球公认的network _ id“3”和<code class="eh kl km kn ko b">mainnet</code>(network _ id:“1”)连接到<code class="eh kl km kn ko b">ropsten</code>所需的一切。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="bb75" class="lv lw ht ko b fv lx ly l lz ma">let secrets = require('./secrets');<br/>const WalletProvider = require("truffle-wallet-provider");<br/>const Wallet = require('ethereumjs-wallet');</span><span id="39ec" class="lv lw ht ko b fv mc ly l lz ma">let mainNetPrivateKey = new Buffer(secrets.mainnetPK, "hex");<br/>let mainNetWallet = Wallet.fromPrivateKey(mainNetPrivateKey);<br/>let mainNetProvider = new WalletProvider(mainNetWallet, "<a class="ae kp" href="https://mainnet.infura.io/" rel="noopener ugc nofollow" target="_blank">https://mainnet.infura.io/</a>");</span><span id="cfee" class="lv lw ht ko b fv mc ly l lz ma">let ropstenPrivateKey = new Buffer(secrets.ropstenPK, "hex");<br/>let ropstenWallet = Wallet.fromPrivateKey(ropstenPrivateKey);<br/>let ropstenProvider = new WalletProvider(ropstenWallet,  "<a class="ae kp" href="https://ropsten.infura.io/" rel="noopener ugc nofollow" target="_blank">https://ropsten.infura.io/</a>");</span><span id="d650" class="lv lw ht ko b fv mc ly l lz ma">module.exports = {<br/>  networks: {<br/>    development: { host: "localhost", port: 8545, <br/>                   network_id: "*", gas: 4465030 },    <br/>    ropsten: { provider: ropstenProvider, <br/>                   network_id: "3", gas: 4465030 },<br/>    live: { provider: mainNetProvider, <br/>                   network_id: "1", gas: 7500000 }<br/>  }<br/>};</span></pre><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/015afd3640a480e822c73ce340ac9ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GJ_RAgRLK6SzaZGZFpyUIg.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Everything is in place. We’re ready for the GreatestShow</figcaption></figure><h2 id="8236" class="lv lw ht bd my mz na nb nc nd ne nf ng ki nh ni nj kj nk nl nm kk nn no np nq dt translated"><strong class="ak">部署合同到底意味着什么？</strong></h2><p id="edcb" class="pw-post-body-paragraph jl jm ht jo b jp nr iu jr js ns ix ju ki nt jx jy kj nu kb kc kk nv kf kg kh hm dt translated">部署一个契约，在表面下，会从某个特定的地址向以太网<em class="jn">发送一个<em class="jn">签名的</em> <code class="eh kl km kn ko b">Transaction</code>。<em class="jn">外部拥有的账户(EOA) </em>的所有者控制着<em class="jn">私钥</em>，该私钥能够花费以太网以便执行网络所请求的操作。一个<em class="jn">函数</em>调用内的每个操作都需要<em class="jn">气体</em>才能被处理。在要部署的事务中发送的<em class="jn">数据</em>包含所有已经编译成汇编的代码，供<em class="jn">以太坊虚拟机(EVM) </em>存储。部署之后，所有存储的数据都将可用于将来通过<code class="eh kl km kn ko b">function</code>调用进行的<code class="eh kl km kn ko b">Transaction</code>状态更改。由于在交易中没有指定的<em class="jn">到</em> <strong class="jo hu"> <em class="jn"> </em> </strong>地址，网络会将这种特定类型的<em class="jn">交易</em>识别为将<em class="jn">数据</em>作为以太坊智能合约存储在具有新地址的新生成的<em class="jn">合约账户</em>中的请求。甚至<em class="jn">部署</em>的行为也涉及与请求相关的交易<em class="jn">成本</em>和<em class="jn">气体</em>费用。本质上，我们需要将一些<strong class="jo hu"> <em class="jn">乙醚</em> </strong>存入我们的账户，我们知道<em class="jn">私钥</em>的用途，这样我们的EOA就可以花掉它。</em></p><p id="3f8e" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">您将需要知道您的<strong class="jo hu">公共地址</strong>(不是您的<em class="jn">私有密钥)</em>以便进行下一步。如果您知道您的私钥，那么您很可能也已经知道了您的公共地址。但是如果您不知道，您可以使用几个工具来查找您的公钥。这里有一个方法。从控制台:</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="9c12" class="lv lw ht ko b fv lx ly l lz ma">npm install --save-dev bluebird</span><span id="7961" class="lv lw ht ko b fv mc ly l lz ma">truffle console --network ropsten</span></pre><p id="cc57" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们安装了一个方便的javascript库，让我们可以轻松地异步创建对象上的方法版本，并兼容在控制台中调用。<br/>我们要加载<code class="eh kl km kn ko b">bluebird</code>库，利用它找到我们对应的以太坊账号地址。记下来。在下面的示例中，它将是0x2a 578 cbcc 561 AE 8 b 13 cccb 0c 1212 a 2262 EAA 610</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="bff8" class="lv lw ht ko b fv lx ly l lz ma">Promisify = require("bluebird")<br/>Promisify.promisifyAll(web3.eth)<br/>web3.eth.getAccountsAsync()</span><span id="0c74" class="lv lw ht ko b fv mc ly l lz ma">&gt;&gt; [ '<strong class="ko hu">0x2a578cbcc561ae8b13cccb0c1212a2262eaa61e0</strong>' ]</span></pre><h2 id="f947" class="lv lw ht bd my mz na nb nc nd ne nf ng ki nh ni nj kj nk nl nm kk nn no np nq dt translated">由于我们不想使用<code class="eh kl km kn ko b">mainnet</code>要求的真实货币(乙醚)，我们需要着手在测试网络上获取一些。</h2><p id="cb36" class="pw-post-body-paragraph jl jm ht jo b jp nr iu jr js ns ix ju ki nt jx jy kj nu kb kc kk nv kf kg kh hm dt translated">前往以下网址，这是一个为<code class="eh kl km kn ko b">ropsten</code>测试网络提供“免费”乙醚的<em class="jn">龙头</em>。这个以太网没有实际的货币价值，因为谁拥有<code class="eh kl km kn ko b">ropsten</code>网络上的每个以太网的记录存储在与<code class="eh kl km kn ko b">mainnet</code>完全分开的区块链网络上。当人们谈论ETH/USD的价格或乙醚的美元价值时，他们指的是存储在<code class="eh kl km kn ko b">mainnet</code>上的乙醚，而不是任何其他测试网络。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="7f7a" class="lv lw ht ko b fv lx ly l lz ma"><a class="ae kp" href="http://faucet.ropsten.be:3001/" rel="noopener ugc nofollow" target="_blank">http://faucet.ropsten.be:3001/</a></span></pre><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff nw"><img src="../Images/1744f25a0bd216e4bd5d411343876541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUFfK3ApIAHDNLekORF83g.png"/></div></div></figure><p id="cc26" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">点击<em class="jn">“给我发送1个测试以太网”</em>，等待交易处理。然后单击TxHash并验证它是否通过。你也可以直接前往<code class="eh kl km kn ko b">ropsten.etherscan.io</code>，输入你的账户地址，查看最近的交易，并验证<code class="eh kl km kn ko b">Transaction</code>是否已处理</p><p id="8806" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">本帖描述的<code class="eh kl km kn ko b">Transaction</code>可以在这里查看。<br/><a class="ae kp" href="https://ropsten.etherscan.io/tx/0xb060a864d272642bf734cee2796497fdd1006000070a8d18c34fa76b6c0dfd8c" rel="noopener ugc nofollow" target="_blank">https://ropsten . ethers can . io/tx/0xb 060 a 864d 272642 BF 734 CEE 2796497 FDD 1006000070 a 8d 18 c 34 fa 76 b 6 c 0 DFD 8 c</a></p><h2 id="2f9c" class="lv lw ht bd my mz na nb nc nd ne nf ng ki nh ni nj kj nk nl nm kk nn no np nq dt translated">女士们先生们，这是你们期待已久的时刻</h2><p id="944e" class="pw-post-body-paragraph jl jm ht jo b jp nr iu jr js ns ix ju ki nt jx jy kj nu kb kc kk nv kf kg kh hm dt translated">是时候在<code class="eh kl km kn ko b">ropsten</code>上尝试一切了。如此之近，你几乎可以尝到它！</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/49a04d530fe092df96181779ff6401e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ePuQ5wZwWo6zuZr0KVS5w.png"/></div></div></figure><p id="5886" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们就要完成了。<code class="eh kl km kn ko b">truffle framework</code>提供<code class="eh kl km kn ko b">migration</code>步骤来协助部署。惯例是在<code class="eh kl km kn ko b">./migrations</code>文件夹中的每个步骤前面加上它的步骤，所以我们将创建一个<code class="eh kl km kn ko b">2_deploy_greatest_show.js</code>文件，以便使用<code class="eh kl km kn ko b">deployer</code>对象的<code class="eh kl km kn ko b">deploy</code>方法。完整的文件如下所示。我们需要藏物并部署。真的只有一句台词有魔力。<code class="eh kl km kn ko b">deployer.deploy(...)</code></p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="6fe2" class="lv lw ht ko b fv lx ly l lz ma">const GreatestShow = artifacts.require("./GreatestShow.sol");</span><span id="9808" class="lv lw ht ko b fv mc ly l lz ma">module.exports = (deployer, network, accounts) =&gt; {</span><span id="48d8" class="lv lw ht ko b fv mc ly l lz ma">    let deployAddress = accounts[0]; // by convention</span><span id="54ad" class="lv lw ht ko b fv mc ly l lz ma">    console.log('Preparing for deployment of GreatestShow...');<br/>    <br/>    if( network == "mainnet" ) {            <br/>        throw "Halt. Sanity check. Not ready for deployment to mainnet. Manually remove this throw and try again.";<br/>    }</span><span id="429a" class="lv lw ht ko b fv mc ly l lz ma">    console.log('deploying from:' + deployAddress);<br/>    <br/>    <strong class="ko hu">deployer.deploy(GreatestShow, <br/>        'Dan Emmons', {from: deployAddress});</strong></span><span id="e22b" class="lv lw ht ko b fv mc ly l lz ma">};</span></pre><blockquote class="ji jj jk"><p id="c603" class="jl jm jn jo b jp jq iu jr js jt ix ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">您可能会注意到“mainnet”的if检查。这只是一个额外的健全性检查，这样我们就不会意外地部署到真实的网络上，浪费真正的金钱。</p></blockquote><p id="a363" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">在命令行中，执行一行来部署到<code class="eh kl km kn ko b">ropsten</code>。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff nx"><img src="../Images/7e09b18ede547044ab9dde34d887f63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G5LcJZyhq2AlrmwOGDYurw.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">GreatestShow contract deployed to <strong class="bd mq">ropsten</strong> address <strong class="bd mq">0xdd70b0c09890a5b2a3957af2d3b340b7618989fa</strong></figcaption></figure><p id="85fe" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们可以从<code class="eh kl km kn ko b">Externally Owned Account </code><a class="ae kp" href="https://ropsten.etherscan.io/address/0x2a578cbcc561ae8b13cccb0c1212a2262eaa61e0" rel="noopener ugc nofollow" target="_blank">https://ropsten . ethers can . io/address/0x 2a 578 cbcc 561 AE 8 b 13 cccb 1212 a 2262 EAA 610 e 0</a>在<code class="eh kl km kn ko b">Contract Address</code><a class="ae kp" href="https://ropsten.etherscan.io/address/0xdd70b0c09890a5b2a3957af2d3b340b7618989fa" rel="noopener ugc nofollow" target="_blank">https://ropsten . ethers can . io/address/0x DD 70 b 0c 09890 a5 B2 a 3957 af 2d 3 b 340 b 7618989 fa</a>验证该合同是否部署在<code class="eh kl km kn ko b">ropsten.etherscan.io</code> <br/>上</p><p id="d696" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">请注意，<code class="eh kl km kn ko b">data</code>部分与<code class="eh kl km kn ko b">ABI</code>或<code class="eh kl km kn ko b">./build/contracts/GreatestShow.json</code> <code class="eh kl km kn ko b">byteCode</code>的应用二进制接口相匹配。</p><h2 id="4207" class="lv lw ht bd my mz na nb nc nd ne nf ng ki nh ni nj kj nk nl nm kk nn no np nq dt translated">表演时间到了。这就是<code class="eh kl km kn ko b">GreatestShow</code>。</h2><p id="1387" class="pw-post-body-paragraph jl jm ht jo b jp nr iu jr js ns ix ju ki nt jx jy kj nu kb kc kk nv kf kg kh hm dt translated">去以太扫描看看吧。</p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff ny"><img src="../Images/16cf68a249f90226edf6e36f9b47a575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fF2mk7QmrHYnrN0C0geNGg.png"/></div></div></figure><p id="448b" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们甚至可以通过控制台与我们的<code class="eh kl km kn ko b">ropsten</code>部署契约进行交互。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="66fa" class="lv lw ht ko b fv lx ly l lz ma">truffle console --network ropsten</span></pre><p id="fea2" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">当控制台加载时，获取对它的引用并获取<code class="eh kl km kn ko b">ringMaster</code>。</p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="d43a" class="lv lw ht ko b fv lx ly l lz ma">GreatestShow.at("0xdd70b0c09890a5b2a3957af2d3b340b7618989fa")<br/>show = _<br/>show.ringMaster.call()</span><span id="ae2e" class="lv lw ht ko b fv mc ly l lz ma">&gt;&gt; 'Dan Emmons'</span></pre><blockquote class="ji jj jk"><p id="5fd2" class="jl jm jn jo b jp jq iu jr js jt ix ju jv jw jx jy jz ka kb kc kd ke kf kg kh hm dt translated">看看能不能加个表演进去。</p></blockquote><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="55a6" class="lv lw ht ko b fv lx ly l lz ma">show.addPerformance( "Knife Thrower", 2, 0, 0, 0, 180, false );</span></pre><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff nz"><img src="../Images/fabc8d5c7ba196c1be1a6c15d29a7da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tRb3ig1USHsnZnQ4GQkvMQ.png"/></div></div></figure><p id="f7ae" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">我们得到一个包含一个<code class="eh kl km kn ko b">TransactionHash</code>的<code class="eh kl km kn ko b">TransactionReceipt</code>，我们可以在<code class="eh kl km kn ko b">ropsten.etherscan.io</code>上检查它是否成功。<a class="ae kp" href="https://ropsten.etherscan.io/tx/0x679dc4a8003e94329f48fd7a2c90077084785a6e3c3dc51b485d379717302165" rel="noopener ugc nofollow" target="_blank">https://ropsten . ethers can . io/tx/0x 679 DC 4a 8003 e 94329 f 48 FD 7 a2 c 90077084785 a 6 E3 C3 DC 51 b 485d 379717302165</a></p><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff ny"><img src="../Images/67f6a855284d1c5ea365cc75f65fe3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJE5VCJu3z40otlzhCRDKQ.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Amazing. <strong class="bd mq">ropsten</strong> shows that the <strong class="bd mq">transaction</strong> was successful and the state was modified.</figcaption></figure><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff oa"><img src="../Images/d012abce24536e26bfd0d88dfbf2d64f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G8ukLFrJfR5_WyP8dW_5jA.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Our “Knife Thrower” performance has been added to the Ethereum blockchain on <strong class="bd mq">ropsten</strong>.</figcaption></figure><p id="22e4" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jo hu"> <em class="jn">咻。那是许多工作。但是回报是值得的！你现在确切地知道了你需要执行什么步骤来让一切在这个世界上被称为以太坊的计算机上启动和运行。</em></strong></p><p id="bfcd" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">既然你部署了它，没人能阻止它，也没人能审查它。你的智能合约程序将无限期地在区块链上运行，而这个世界已经被永远地改变了。</p><h2 id="9211" class="lv lw ht bd my mz na nb nc nd ne nf ng ki nh ni nj kj nk nl nm kk nn no np nq dt translated">MainNet呢？</h2><p id="87b8" class="pw-post-body-paragraph jl jm ht jo b jp nr iu jr js ns ix ju ki nt jx jy kj nu kb kc kk nv kf kg kh hm dt translated">这就是它的美妙之处。您为<code class="eh kl km kn ko b">ropsten</code>部署执行的所有相同步骤也将适用于<code class="eh kl km kn ko b">mainnet</code>,但是有两个小的不同。首先，您将使用<strong class="jo hu"> <em class="jn">真实以太</em> </strong>，这意味着<strong class="jo hu"> <em class="jn">真实货币。</em> </strong>这里没有水龙头可以让你获得你需要的乙醚量来部署你的合同给<code class="eh kl km kn ko b">mainnet</code>，所以你必须通过不同的方式获得，比如通过<code class="eh kl km kn ko b">Coinbase.com</code>或<code class="eh kl km kn ko b">localbitcoins.com</code>。您可以在<code class="eh kl km kn ko b">ropsten</code>测试网络上玩一玩，随心所欲地重新部署，直到您准备好原始版本的合同，而不会有任何后果。但是当涉及到<code class="eh kl km kn ko b">mainnet</code>时，你会想要非常确定你已经准备好将你的代码存储在<code class="eh kl km kn ko b">mainnet</code>区块链上<code class="eh kl km kn ko b"><strong class="jo hu">PERMANENTLY</strong></code>。</p><p id="7556" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">在以后的文章中，我们将讨论在  <em class="jn">部署到</em> <code class="eh kl km kn ko b"><em class="jn">mainnet</em></code>之前你想要采取的<strong class="jo hu"> <em class="jn">的其他步骤，比如用<code class="eh kl km kn ko b">mocha</code>框架创建一整套单元测试，并获得你的代码的完全独立的<code class="eh kl km kn ko b">audit</code>。请记住，您存储在区块链上的数据是<code class="eh kl km kn ko b">immutable</code>，因此尽您所能解决所有问题非常重要。</em></strong></p><p id="8c41" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><strong class="jo hu">最后，当您准备好迎接黄金时间，并且拥有真正的以太时，注释掉</strong> <code class="eh kl km kn ko b"><strong class="jo hu">2_deploy_greatest_show.js</strong></code> <strong class="jo hu">中的健全性检查，以便部署不会失败，并启动它。</strong></p><pre class="ln lo lp lq fq lr ko ls lt aw lu dt"><span id="c4ce" class="lv lw ht ko b fv lx ly l lz ma">truffle deploy --network mainnet</span></pre><h1 id="338f" class="ob lw ht bd my oc od oe nc of og oh ng iz oi ja nj jc oj jd nm jf ok jg np ol dt translated">这是最棒的表演！</h1><figure class="ln lo lp lq fq lg fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff la"><img src="../Images/4e962531c4baf0da31aee80a04b912ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ohhsjJDh33Pqx6rQlZCyw.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">This is the Greatest Show!</figcaption></figure><p id="7d08" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated"><em class="jn"> Dan Emmons是</em><a class="ae kp" href="http://www.emmonspired.com/" rel="noopener ugc nofollow" target="_blank"><em class="jn">Emmonspired LLC</em></a><em class="jn">的所有者，一名</em> <a class="ae kp" href="http://cryptoconsortium.org/lookup/6f0d14" rel="noopener ugc nofollow" target="_blank"> <em class="jn">认证比特币专业人士</em> </a> <em class="jn">，认证以太坊开发者，全栈开发者，加密货币项目顾问。他还是一个名为</em><a class="ae kp" href="https://www.youtube.com/watch?v=SVBZ7mdgGcA" rel="noopener ugc nofollow" target="_blank"><em class="jn"># ByteSizeBlockchain</em></a><em class="jn">的Youtube频道和iTunes播客的创作者。</em></p><p id="607a" class="pw-post-body-paragraph jl jm ht jo b jp jq iu jr js jt ix ju ki jw jx jy kj ka kb kc kk ke kf kg kh hm dt translated">有很多一次性的方法来试验Remix，这是一个用于Solidity的在线IDE，但是在Truffle框架中有一个更专业的工具可供我们使用。</p></div></div>    
</body>
</html>