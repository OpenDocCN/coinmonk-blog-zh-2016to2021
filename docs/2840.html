<html>
<head>
<title>Tips for Vyper Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给Vyper初学者的提示</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/for-those-who-is-going-to-learn-vyper-8bac3cc0e01c?source=collection_archive---------2-----------------------#2020-03-15">https://medium.com/coinmonks/for-those-who-is-going-to-learn-vyper-8bac3cc0e01c?source=collection_archive---------2-----------------------#2020-03-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/29ef044bee4c862ca5d847220c260a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/0*cq93YUSgS3MUOXwG.jpg"/></div></div></figure><div class=""/><div class=""><h2 id="bce9" class="pw-subtitle-paragraph jb id ie bd b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js ek translated">有些事情你应该记住</h2></div><ol class=""><li id="47ed" class="jt ju ie jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dt translated">Vyper不是Solidity的替代品，但它提供了一些安全、简单的高级功能。</li><li id="94ed" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated">Vyper不提供动态类型、类继承、函数重载、运算符重载以及递归、修饰符、内联汇编等</li></ol><h2 id="0516" class="kq kr ie bd ks kt ku kv kw kx ky kz la ka lb lc ld kc le lf lg ke lh li lj lk dt translated">Vyper哲学</h2><ol class=""><li id="5f8d" class="jt ju ie jv b jw ll jy lm ka ln kc lo ke lp kg kh ki kj kk dt translated">安全性:在Vyper中构建安全的智能合约应该是可能的，也是自然的。</li><li id="fbd6" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><strong class="jv if">简单性</strong> : Vyper的目标是构建一种外行人也容易理解和审核的编程语言。对读者来说简单比对作者来说简单更重要，而对没有多少Vyper使用经验(以及一般编程经验)的读者来说简单尤为重要。</li></ol><blockquote class="lq lr ls"><p id="2184" class="lt lu lv jv b jw jx jf lw jy jz ji lx ly lz ma mb mc md me mf mg mh mi mj kg hm dt translated"><a class="ae mk" rel="noopener" href="/coinmonks/search?q=vyper"> <strong class="jv if">阅读更多关于Vyper编程语言的文章</strong> </a></p></blockquote><h1 id="e1cf" class="ml kr ie bd ks mm mn mo kw mp mq mr la jk ms jl ld jn mt jo lg jq mu jr lj mv dt translated">安装、语法和示例的基础</h1><p id="8e4a" class="pw-post-body-paragraph lt lu ie jv b jw ll jf lw jy lm ji lx ka mw ma mb kc mx me mf ke my mi mj kg hm dt translated">Vyper现在仍处于实验开发阶段，而<a class="ae mk" href="https://vyper.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">正式文档</a>是您应该首先开始的地方。之后，请遵循下面提供的列表:</p><ol class=""><li id="4377" class="jt ju ie jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dt translated"><a class="ae mk" href="https://github.com/vyperlang/vyper/wiki/Vyper-tools-and-resources" rel="noopener ugc nofollow" target="_blank">工具和资源</a></li><li id="f0b0" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><a class="ae mk" href="https://gitter.im/ethereum/vyper" rel="noopener ugc nofollow" target="_blank"> Gitter频道</a>获取快速帮助和讨论</li><li id="6d7b" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><a class="ae mk" href="https://learnxinyminutes.com/docs/vyper/" rel="noopener ugc nofollow" target="_blank">从零开始快速学习Vyper】</a></li><li id="b4f1" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated">除了来自官方文件的例子外，LayerXverified Vyper smart contract是一个阅读和实践的好地方</li></ol><h2 id="e215" class="kq kr ie bd ks kt ku kv kw kx ky kz la ka lb lc ld kc le lf lg ke lh li lj lk dt translated">调用外部合同</h2><p id="118b" class="pw-post-body-paragraph lt lu ie jv b jw ll jf lw jy lm ji lx ka mw ma mb kc mx me mf ke my mi mj kg hm dt translated">在智能契约开发中，我们经常调用外部契约来获得状态或执行。在Solidity上，在互联网上走来走去是相当容易的。</p><p id="4778" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">然而在Vyper中，一些特殊情况下的信息仍然很少，这就是我写这篇文章的原因。</p><p id="4a87" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">在Vyper中有两种方法可以做到这一点:</p><h2 id="b2ff" class="kq kr ie bd ks kt ku kv kw kx ky kz la ka lb lc ld kc le lf lg ke lh li lj lk dt translated">声明契约接口并调用Solidity:</h2><p id="7a99" class="pw-post-body-paragraph lt lu ie jv b jw ll jf lw jy lm ji lx ka mw ma mb kc mx me mf ke my mi mj kg hm dt translated">接口可以通过内联定义或从单独的文件导入来添加到智能合约中。</p><p id="e6ef" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">此外，Vyper还有内置接口<strong class="jv if"> ERC20 </strong>、<strong class="jv if"> ERC721、</strong>你可以用:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="70e0" class="kq kr ie ne b fv ni nj l nk nl">from vyper.interfaces import ERC20</span></pre><p id="7101" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">要声明一个接口，使用如下的<strong class="jv if">契约</strong>关键字:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="f72e" class="kq kr ie ne b fv ni nj l nk nl"># Declare contract interface FooBar with 2 function<br/>contract FooBar:<br/>    <strong class="ne if">def</strong> calculate() -&gt; uint256: constant # get state of FooBar contract<br/>    <strong class="ne if">def</strong> test1(): modifying # A call will execute and change state of FooBar contract</span><span id="060b" class="kq kr ie ne b fv nm nj l nk nl"># Function make external call<br/>@public<br/>def makeCall(fooBarAddress: address):<br/>    FooBar(fooBarAddress).calculate()  <em class="lv"># cannot change storage</em><br/>    FooBar(fooBarAddress).test1()  <em class="lv"># storage can be altered</em></span></pre><p id="4dc3" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">或者您可以使用<strong class="jv if"> raw_call </strong>调用另一个契约，这是一个低级内置函数，提供对指定的<a class="ae mk" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊</a>地址的调用，带有函数签名和数据、值。</p><p id="f600" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">由于Vyper不提供动态类型，这意味着如果你调用一个动态类型的函数，如<strong class="jv if"> uint256[]，raw_call </strong>是唯一的方法。</p><p id="5131" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">例如，你有一个像<a class="ae mk" href="https://github.com/CryptoManiacsZone/1split/blob/master/contracts/IOneSplit.sol" rel="noopener ugc nofollow" target="_blank">这样的函数:</a></p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="5dd8" class="kq kr ie ne b fv ni nj l nk nl">function swap(address fromToken, address toToken, uint256 amount,        uint256 minReturn, uint256[] memory distribution, uint256 disableFlags) public payable;</span></pre><p id="f453" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">您<strong class="jv if">不能</strong>像下面的代码一样在Vyper中声明接口，因为Vyper不提供动态类型:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="4cdb" class="kq kr ie ne b fv ni nj l nk nl">contract IOneSplit:<br/>   <strong class="ne if">def</strong> swap(fromToken: address, toToken: address, amount: uint256, minReturn: uint256, distribution: uint256[], disableFlags: uint256) -&gt; uint256: modifying</span></pre><p id="7fd6" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">或者甚至你知道<strong class="jv if">分布的大小(见下面的代码)</strong>并写一个接口代码如:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="e4ea" class="kq kr ie ne b fv ni nj l nk nl">contract IOneSplit:<br/>   <strong class="ne if">def</strong> swap(fromToken: address, toToken: address, amount: uint256, minReturn: uint256, distribution: uint256[4], disableFlags: uint256) -&gt; uint256: modifying</span></pre><p id="a1bc" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated">上述代码是正确的Vyper语法，但它不是<strong class="jv if"> OneSplit的<strong class="jv if"> swap </strong>函数，因为<strong class="jv if"> uint256[] </strong>和<strong class="jv if"> uint256[4]之间的函数签名会不同。</strong></strong></p><h2 id="cc61" class="kq kr ie bd ks kt ku kv kw kx ky kz la ka lb lc ld kc le lf lg ke lh li lj lk dt translated"><strong class="ak">迄今为止唯一正确的方法……</strong></h2><p id="de59" class="pw-post-body-paragraph lt lu ie jv b jw ll jf lw jy lm ji lx ka mw ma mb kc mx me mf ke my mi mj kg hm dt translated">因此，从Vyper调用Solidity contract中具有动态参数的函数的唯一方法是使用具有4字节签名和数据的<strong class="jv if"> raw_call </strong>函数进行调用，值如下:</p><figure class="mz na nb nc fq hv"><div class="bz el l di"><div class="nn no l"/></div><figcaption class="np nq fg fe ff nr ns bd b be z ek">Raw_call example</figcaption></figure><p id="2911" class="pw-post-body-paragraph lt lu ie jv b jw jx jf lw jy jz ji lx ka lz ma mb kc md me mf ke mh mi mj kg hm dt translated"><strong class="jv if"> funSig </strong>变量是<strong class="jv if"> OneSplit的交换函数</strong>和<strong class="jv if"> data的函数签名:bytes[352] </strong>是352字节的数据将作为参数传递到该函数中。</p><h1 id="6647" class="ml kr ie bd ks mm mn mo kw mp mq mr la jk ms jl ld jn mt jo lg jq mu jr lj mv dt translated">参考资料:</h1><ol class=""><li id="ca7e" class="jt ju ie jv b jw ll jy lm ka ln kc lo ke lp kg kh ki kj kk dt translated"><a class="ae mk" href="https://github.com/vyperlang/vyper/wiki/Vyper-tools-and-resources" rel="noopener ugc nofollow" target="_blank">https://github . com/vyperlang/Vyper/wiki/Vyper-tools-and-resources</a></li><li id="5d2b" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><a class="ae mk" href="https://vyper.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">https://vyper.readthedocs.io/en/latest/index.html</a></li><li id="7813" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><a class="ae mk" href="https://learnxinyminutes.com/docs/vyper/" rel="noopener ugc nofollow" target="_blank">https://learnxinyminutes.com/docs/vyper/</a></li><li id="25db" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><a class="ae mk" href="https://github.com/CryptoManiacsZone/1split/tree/master/contracts" rel="noopener ugc nofollow" target="_blank">https://github . com/cryptomaniaczone/1 split/tree/master/contracts</a></li><li id="28eb" class="jt ju ie jv b jw kl jy km ka kn kc ko ke kp kg kh ki kj kk dt translated"><a class="ae mk" href="https://blockgeeks.com/guides/understanding-vyper/" rel="noopener ugc nofollow" target="_blank">https://blockgeeks.com/guides/understanding-vyper/</a></li></ol><figure class="mz na nb nc fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff nt"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></div></figure><blockquote class="nu"><p id="6733" class="nv nw ie bd nx ny nz oa ob oc od kg ek translated"><a class="ae mk" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="of og oh oi oj hv fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff oe"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>