<html>
<head>
<title>Getting Started with Hyperledger Composer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Hyperledger Composer入门</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/getting-started-with-hyperledger-composer-34cb7228d44c?source=collection_archive---------2-----------------------#2018-09-04">https://medium.com/coinmonks/getting-started-with-hyperledger-composer-34cb7228d44c?source=collection_archive---------2-----------------------#2018-09-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="8c07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在第一篇文章中，我想介绍一下Hyperledger Composer在Ubuntu 16.0.4 LTS版上的安装过程。在第二部分，我们将创建一个简单的SAP移动应用程序，它使用Hyperledger Composer的REST API。</p><blockquote class="jo"><p id="2908" class="jp jq ht bd jr js jt ju jv jw jx jn ek translated"><a class="ae jy" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><h1 id="cc68" class="jz ka ht bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dt translated"><strong class="ak">什么是Hyperledger作曲家？</strong></h1><p id="d1f0" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">根据他们的网站:Hyperledger Composer是一套用于构建区块链商业网络的协作工具，使企业主和开发人员能够简单快速地创建智能合同和区块链应用程序来解决商业问题。Composer采用JavaScript构建，利用node.js、npm、CLI和流行编辑器等现代工具，提供以业务为中心的抽象以及带有易于测试的devops流程的示例应用，以创建强大的区块链解决方案，推动业务需求与技术开发保持一致。</p><p id="cd66" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">【https://www.hyperledger.org/projects/composer T4】</p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff lc"><img src="../Images/5205ae6193a21d236306bdcf594d0201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HarF6pwo0JSa0RWi.png"/></div></div></figure><h1 id="5e2c" class="jz ka ht bd kb kc kd ke kf kg kh ki kj kk lo km kn ko lp kq kr ks lq ku kv kw dt translated"><strong class="ak"> Hyperledger Composer安装</strong></h1><p id="4fc9" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">在您的主目录中，通过运行以下脚本安装必备组件:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="8c29" class="lw ka ht ls b fv lx ly l lz ma">cd $HOME<br/>curl -O -k <a class="ae jy" href="https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh" rel="noopener ugc nofollow" target="_blank">https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh</a><br/>chmod u+x prereqs-ubuntu.sh</span></pre><p id="0b90" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">运行命令安装:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="151f" class="lw ka ht ls b fv lx ly l lz ma">sudo apt-get install -y software-properties-common</span></pre><p id="357e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦没有任何错误地完成，您将收到以下消息:</p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/ab60901203ff808c4b1d86acd7477479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*EJT5Y64NLeXFA8Zu16vd6g.png"/></div></figure><h2 id="af61" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">安装所需组件</strong></h2><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="6e4b" class="lw ka ht ls b fv lx ly l lz ma">npm install -g composer-cli@0.20<br/>npm install -g composer-rest-server@0.20<br/>npm install -g generator-hyperledger-composer@0.20<br/>npm install -g yo</span></pre><h2 id="f9ad" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">安装游乐场</strong></h2><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="6a4e" class="lw ka ht ls b fv lx ly l lz ma">npm install -g composer-playground@0.20</span></pre><h2 id="efe4" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">安装Hyperledger Fabric </strong></h2><p id="1ee5" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">在您的主目录下创建一个目录fabric-dev-servers。</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="2d40" class="lw ka ht ls b fv lx ly l lz ma">mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers</span></pre><p id="a34b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">并运行curl命令下载该工具并将其解压缩。</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="6113" class="lw ka ht ls b fv lx ly l lz ma">curl -O <a class="ae jy" href="https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz</a></span><span id="2b08" class="lw ka ht ls b fv mp ly l lz ma">tar -xvf fabric-dev-servers.tar.gz</span></pre><h2 id="7e44" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">下载运行时:</strong></h2><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="fca9" class="lw ka ht ls b fv lx ly l lz ma">export FABRIC_VERSION=hlfv12<br/>./downloadFabric.sh</span></pre><h2 id="711e" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">第一次运行</strong></h2><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="ea41" class="lw ka ht ls b fv lx ly l lz ma">cd ~/fabric-dev-servers<br/> export FABRIC_VERSION=hlfv12<br/> ./startFabric.sh<br/> ./createPeerAdminCard.sh</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff mq"><img src="../Images/5f5c399a4795a26842f141a2fbe5fb66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c30OC-_LfLff1ueYjm-5-Q.png"/></div></div></figure><p id="b01c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要停止，请运行以下命令:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="ce84" class="lw ka ht ls b fv lx ly l lz ma">~/fabric-dev-servers/stopFabric.sh</span></pre><h2 id="1e0f" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">启动游乐场</strong></h2><p id="034d" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">要开始，请运行以下命令:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="764a" class="lw ka ht ls b fv lx ly l lz ma">composer-playground</span></pre><p id="4de9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">它会自动打开浏览器，重定向到<a class="ae jy" href="http://localhost:8080/login" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/log in</a></p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff mr"><img src="../Images/774b60b0210a9ec7bebd5d114ca0c3b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X9Is0z2ogFkDGJu1cRrB7A.png"/></div></div></figure></div><div class="ab cl ms mt hb mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hm hn ho hp hq"><h1 id="fe7b" class="jz ka ht bd kb kc mz ke kf kg na ki kj kk nb km kn ko nc kq kr ks nd ku kv kw dt translated"><strong class="ak">使用命令行创建新的业务网络</strong></h1><p id="a68b" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">在你的主文件夹下创建一个新文件夹，命名为<strong class="is hu"> blockchainDocker </strong>。转到该文件夹并运行以下命令:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="92c8" class="lw ka ht ls b fv lx ly l lz ma">yo hyperledger-composer:businessnetwork</span></pre><p id="34bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">填写业务网络名称:<strong class="is hu">教程-网络</strong>，命名空间:<strong class="is hu"> org.basic.server </strong>剩下的就看你自己了。</p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff ne"><img src="../Images/6e57d585903d02b293d0564b34cff2f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nn2eKEupTP1TcV8oYbdUtw.png"/></div></div></figure><p id="6b81" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">成功后，您将看到新文件夹<strong class="is hu">教程-网络</strong>被创建。</p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff nf"><img src="../Images/b79e78952be12bad440c9a722602a1fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*RwIewhdknHhFX5qLTi91iQ.png"/></div></figure><p id="b62f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">转到文件夹<strong class="is hu"> tutorial-network/lib </strong>，用以下内容更新<strong class="is hu"> logic.js </strong>:</p><figure class="ld le lf lg fq lh"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="2e28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">用以下内容更新<strong class="is hu">教程-网络/模型</strong>中的<strong class="is hu"> org.basic.server.cto </strong>:</p><figure class="ld le lf lg fq lh"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="1e3d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将保持<strong class="is hu"> permissions.acl </strong>文件不变。</p><figure class="ld le lf lg fq lh"><div class="bz el l di"><div class="ng nh l"/></div></figure></div><div class="ab cl ms mt hb mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hm hn ho hp hq"><h1 id="5652" class="jz ka ht bd kb kc mz ke kf kg na ki kj kk nb km kn ko nc kq kr ks nd ku kv kw dt translated">生成业务网络档案</h1><p id="493d" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">在我们定义了业务网络之后，必须将它打包到一个可部署的业务网络档案中。bna)文件。转到<strong class="is hu"> tutorial-network </strong>文件夹并运行这个命令。</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="d858" class="lw ka ht ls b fv lx ly l lz ma">composer archive create -t dir -n .</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff ni"><img src="../Images/ce217fa0638bf4e3053aacda6151738f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3tENI9T8794RW5atYhpiTg.png"/></div></div></figure></div><div class="ab cl ms mt hb mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hm hn ho hp hq"><h1 id="93f7" class="jz ka ht bd kb kc mz ke kf kg na ki kj kk nb km kn ko nc kq kr ks nd ku kv kw dt translated">部署业务网络存档</h1><p id="50a1" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">运行以下命令从t <strong class="is hu"> utorial-network </strong>目录安装业务网络:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="b697" class="lw ka ht ls b fv lx ly l lz ma">composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nj"><img src="../Images/b3374c60b1f30be977ba10c51f5b7dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqCUJ8mYkKzCfUJDdQnN7Q.png"/></div></div></figure><p id="7456" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要启动业务网络，请运行以下命令:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="debf" class="lw ka ht ls b fv lx ly l lz ma">composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nk"><img src="../Images/61cf2a968fb2f8c07958483485a946ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ulfiNyiG-Y8NUaRGFxSjvQ.png"/></div></div></figure><p id="4944" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要将网络管理员身份作为可用的业务网卡导入，请运行以下命令:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="20c1" class="lw ka ht ls b fv lx ly l lz ma">composer card import --file networkadmin.card</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nl"><img src="../Images/1dbc3051fa637ee301ef6df1521b360d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FK5CRbtqDgWoxLyYu4mHKQ.png"/></div></div></figure><p id="b4db" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦导入，你就会在游乐场看到卡:<a class="ae jy" href="http://localhost:8080/login" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/log in</a></p><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff nm"><img src="../Images/3c09872c770c1ba12b80f05eed35bd33.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*E6fMStB2yGaz2GzXcQwbXQ.png"/></div></figure><p id="9544" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要检查业务网络是否已成功部署，请运行以下命令来ping网络:</p><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="fedb" class="lw ka ht ls b fv lx ly l lz ma">composer network ping --card admin@tutorial-network</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nn"><img src="../Images/c9eeb72ef5170dd7c44b57dd634ac1dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZB_kz6KNbJGgaPtUmGKxQ.png"/></div></div></figure></div><div class="ab cl ms mt hb mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hm hn ho hp hq"><h2 id="b452" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">测试网络</strong></h2><p id="a00c" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">我们将通过填充资产<strong class="is hu"> DataCenterId </strong>的先决条件信息来测试网络。本例中的参与者<strong class="is hu">人员</strong>未被使用。一旦我们填充了数据中心ID，我们就可以根据特定的数据中心ID和服务器参数(如安装了多少内存、安装了多少CPU等)提交事务。</p><ul class=""><li id="ed5a" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">转到<a class="ae jy" href="http://localhost:8080/login" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/log in</a></li><li id="9e30" class="no np ht is b it nx ix ny jb nz jf oa jj ob jn nt nu nv nw dt translated">点击<strong class="is hu">立即连接</strong>连接网络</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff oc"><img src="../Images/d4983a6c18640fe334dcc40b1ac8f4f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*J6WlWZOxM616aBkhFmM0Zw.png"/></div></div></figure><ul class=""><li id="76bf" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">转到<strong class="is hu">测试</strong>选项卡。</li><li id="0d6f" class="no np ht is b it nx ix ny jb nz jf oa jj ob jn nt nu nv nw dt translated">填充先决条件信息。在<strong class="is hu">参与者</strong>下，选择<strong class="is hu">人员</strong>，点击<strong class="is hu">新增参与者</strong>。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff od"><img src="../Images/9ad1623e437d1e289666b8cdfed27b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*S3geNCzRIbKixkyHy9M2Aw.png"/></div></figure><ul class=""><li id="82fa" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">创建完成后，您将在<strong class="is hu">参与者</strong>下看到注册表条目。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff oe"><img src="../Images/fb4f8c5fd312233641d58ef19cce4381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-x2qz2PJmVpBMh6bxnXyQ.png"/></div></div></figure><ul class=""><li id="0b9b" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">创建资产<strong class="is hu"> DataCenterId </strong>(例如<strong class="is hu"> DC1 </strong>)。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff of"><img src="../Images/0c3efe2b8cd22ff1ce06ca889347816e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*lDc3cWcVrjcGBU15P4zGow.png"/></div></figure><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff og"><img src="../Images/432a6ae2748df989e1b676ca32e0e53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iBr-DKl8sPcfeOzf3hUirQ.png"/></div></div></figure><ul class=""><li id="baf2" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">向一个特定的数据中心提交一个事务，在这个例子中是我们刚刚创建的数据中心Id <strong class="is hu"> DC1 </strong>。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff oh"><img src="../Images/b24387f1d1980e22efe241de797215e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*1qsCXNClfSxuNhJL2b3RYA.png"/></div></div></figure><ul class=""><li id="c2f9" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">如果我们将事务提交给不存在的数据中心Id，它将抛出一个错误消息。在下面的示例中，数据中心Id <strong class="is hu"> DC2 </strong>尚未定义，我们将收到一条错误消息。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff oi"><img src="../Images/afa5c6a8db12e9d795156419cb22efa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*nlEsJZfBC_7gkVaMZLe3kQ.png"/></div></figure><ul class=""><li id="0a86" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">成功提交交易后，您将看到服务器参数信息被填充到您提交的数据中心Id下(在本例中为<strong class="is hu"> DC1 </strong>)。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff oj"><img src="../Images/92f056fd18dbd1d1140561fcd1797387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_lVOOS1X01hU764PwNXuQ.png"/></div></div></figure><ul class=""><li id="ee38" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">要查看交易日志，选择<strong class="is hu">所有交易。</strong>点击<strong class="is hu">查看记录</strong>查看所有详细日志交易。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff ok"><img src="../Images/48dc5a15068b8dccc5997fcb0361a0c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Tib-slx7Dr59Nv-sCLu3A.png"/></div></div></figure></div><div class="ab cl ms mt hb mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hm hn ho hp hq"><h2 id="f154" class="lw ka ht bd kb mc md me kf mf mg mh kj jb mi mj kn jf mk ml kr jj mm mn kv mo dt translated"><strong class="ak">休息服务器</strong></h2><p id="e8e4" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">我们最不想构建的是REST服务器。这样，我们就可以公开我们创建的资产、参与者和交易，这样就可以通过客户端应用程序(如web或移动应用程序)来使用它们。</p><p id="258c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为此，我们将通过以下步骤创建一个docker容器:</p><ul class=""><li id="7450" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">为MongoDB安装环回连接器:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="5a0b" class="lw ka ht ls b fv lx ly l lz ma">npm install -g loopback-connector-mongodb</span></pre><ul class=""><li id="5cb8" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">确保你能ping通<strong class="is hu">教程-网络</strong>。运行以下命令:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="d69f" class="lw ka ht ls b fv lx ly l lz ma">composer network ping -c admin@tutorial-network</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff ol"><img src="../Images/84ec0e4a6ccb02f11951b30b8fa04469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K504bL2kH_TlhaCFP1e_sQ.png"/></div></div></figure><ul class=""><li id="cf8b" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">启动一个名为<strong class="is hu"> mongo </strong>的docker实例。这个实例将用于为REST服务器保存所有关于已验证用户及其钱包的信息。</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="6a10" class="lw ka ht ls b fv lx ly l lz ma">docker run -d --name mongo --network composer_default -p 27017:27017 mongo</span></pre><ul class=""><li id="1c8b" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">在新文件夹下新建一个名为<strong class="is hu"> Dockerfile </strong>的文件，内容如下:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="7562" class="lw ka ht ls b fv lx ly l lz ma">FROM hyperledger/composer-rest-server<br/>RUN npm install --production loopback-connector-mongodb passport-github &amp;&amp; \<br/>    npm cache clean --force &amp;&amp; \<br/>    ln -s node_modules .node_modules</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff om"><img src="../Images/9711bbc42ff589acc71c66bbc7d95f35.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*qc9JWfr0gXnJm1zVAnNwzw.png"/></div></figure><ul class=""><li id="2568" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">运行以下命令:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="0904" class="lw ka ht ls b fv lx ly l lz ma">docker build -t myorg/my-composer-rest-server .</span></pre><ul class=""><li id="72a8" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">在同一文件夹中创建一个新文件<strong class="is hu"> envvars.txt </strong>，内容如下:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="ef14" class="lw ka ht ls b fv lx ly l lz ma">COMPOSER_CARD=admin@tutorial-network<br/>COMPOSER_NAMESPACES=never<br/>COMPOSER_AUTHENTICATION=true<br/>COMPOSER_MULTIUSER=false<br/>COMPOSER_PROVIDERS='{<br/>    "github": {<br/>        "provider": "github",<br/>        "module": "passport-github",<br/>        "clientID": "REPLACE_WITH_CLIENT_ID",<br/>        "clientSecret": "REPLACE_WITH_CLIENT_SECRET",<br/>        "authPath": "/auth/github",<br/>        "callbackURL": "/auth/github/callback",<br/>        "successRedirect": "/",<br/>        "failureRedirect": "/"<br/>    }<br/>}'<br/>COMPOSER_DATASOURCES='{<br/>    "db": {<br/>        "name": "db",<br/>        "connector": "mongodb",<br/>        "host": "mongo"<br/>    }<br/>}'</span></pre><ul class=""><li id="2611" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">运行以下命令将其加载到环境变量中:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="9786" class="lw ka ht ls b fv lx ly l lz ma">source envvars.txt</span></pre><ul class=""><li id="388c" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">我们需要更新<strong class="is hu"> ~/上的localhost字符串。composer/cards/admin @ tutorial-network/connection . JSON</strong>。</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="fc2c" class="lw ka ht ls b fv lx ly l lz ma">sed -e ‘s/localhost:7051/peer0.org1.example.com:7051/’ -e ‘s/localhost:7053/peer0.org1.example.com:7053/’ -e ‘s/localhost:7054/ca.org1.example.com:7054/’ -e ‘s/localhost:7050/orderer.example.com:7050/’ &lt; $HOME/.composer/cards/admin@tutorial-network/connection.json &gt; /tmp/connection.json &amp;&amp; cp -p /tmp/connection.json $HOME/.composer/cards/admin@tutorial-network/</span></pre><ul class=""><li id="82b0" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">运行docker:</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="70a1" class="lw ka ht ls b fv lx ly l lz ma">docker run \<br/>    -d \<br/>    -e COMPOSER_CARD=${COMPOSER_CARD} \<br/>    -e COMPOSER_NAMESPACES=${COMPOSER_NAMESPACES} \<br/>    -e COMPOSER_AUTHENTICATION=${COMPOSER_AUTHENTICATION} \<br/>    -e COMPOSER_MULTIUSER=${COMPOSER_MULTIUSER} \<br/>    -e COMPOSER_PROVIDERS="${COMPOSER_PROVIDERS}" \<br/>    -e COMPOSER_DATASOURCES="${COMPOSER_DATASOURCES}" \<br/>    -v ~/.composer:/home/composer/.composer \<br/>    --name rest \<br/>    --network composer_default \<br/>    -p 3000:3000 \<br/>    myorg/my-composer-rest-server</span></pre><ul class=""><li id="6d85" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">检查服务器是否运行正常，你会看到如下截图所示的信息。</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="3158" class="lw ka ht ls b fv lx ly l lz ma">docker logs -f rest</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nn"><img src="../Images/a5f78b0c43494f206e16c8530370abb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eCDtdftOyIVkFvgDIseq5Q.png"/></div></div></figure><ul class=""><li id="7cbe" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">打开网络浏览器并转到以下URL:<a class="ae jy" href="http://localhost:3000/auth/github" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/auth/github</a></li><li id="df6d" class="no np ht is b it nx ix ny jb nz jf oa jj ob jn nt nu nv nw dt translated">点击<strong class="is hu">授权</strong>。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff on"><img src="../Images/0d4e6302bfdc88b7e4d4b02370279428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Jv3qtG2thfANhtGw6dsOA.png"/></div></div></figure><ul class=""><li id="0b79" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">如果没有错误，您将看到下面的页面，其中包含访问令牌信息。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nn"><img src="../Images/3560d1b2ff50dc69b111ec7d37b384c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vkO2Je_A8AF7rJf7iEWJqg.png"/></div></div></figure><ul class=""><li id="cef7" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">选择<strong class="is hu">服务器:一个名为</strong>的事务，点击<strong class="is hu">发布</strong>。用下面的数据填充并点击<strong class="is hu">试试看！</strong>。</li></ul><pre class="ld le lf lg fq lr ls lt lu aw lv dt"><span id="98d7" class="lw ka ht ls b fv lx ly l lz ma">{<br/> “$class”: “org.basic.server.Server”,<br/> “Active_Memory”: 4,<br/> “HW_Model”: “Dell”,<br/> “Installed_CPUs”: 2,<br/> “Installed_RAM”: 4,<br/> “Server_Model”: “Model A”,<br/> “datacenterid”: “DC1”<br/>}</span></pre><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nn"><img src="../Images/c0a2281b5bb9977398ce008fb4249622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*76JoCfoIkJufrPO2xyGzlw.png"/></div></div></figure><ul class=""><li id="839a" class="no np ht is b it iu ix iy jb nq jf nr jj ns jn nt nu nv nw dt translated">现在选择<strong class="is hu">获取</strong>并点击<strong class="is hu">尝试一下！</strong>。您将看到您发布的数据。</li></ul><figure class="ld le lf lg fq lh fe ff paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="fe ff nn"><img src="../Images/47c65b720561c27e724bb904735fa3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VTHNl4urC82xdMWkTu0_og.png"/></div></div></figure><p id="4d96" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请继续关注第2部分，我们将构建一个使用REST API的SAP移动应用程序(SAPUI5)。感谢您阅读我的帖子。</p><blockquote class="jo"><p id="b012" class="jp jq ht bd jr js jt ju jv jw jx jn ek translated"><a class="ae jy" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="op oq or os ot lh fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff oo"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>