# 如何建造:以太坊上的 BTC

> 原文：<https://medium.com/coinmonks/how-to-build-btc-on-ethereum-1b214f3b26?source=collection_archive---------0----------------------->

![](img/bb8e08ceecc7393d8b97d524bbc223c0.png)

## 可赎回的 BTC

我们最终想要的是一种在以太坊上实现 ERC-777(或者，因为我们没有好东西，ERC-20)的可替换令牌的方法，它可以被 BTC 的持有者赎回。让我们称这个令牌为 BTC 可替换令牌(BTC 金融时报)。创建 BTC-FT 最简单的方法是让一个用户(爱丽丝)将一定量的 ETH 存入托管账户，并承诺如果有人需要一定量的 BTC，爱丽丝将把 BTC 发给他们，否则将失去他们的托管账户。

作为一个例子，想象 1 BTC == 100 以太网，爱丽丝将把 125 以太网托管，作为交换，她将在以太网上获得 1 BTC 英尺。然后，爱丽丝用她 1 BTC 英尺的代币换了一些 Unisocks，这可以让她晚上保持温暖。一段时间后，鲍勃(通过任何方式)获得了 1 BTC 英尺，并向爱丽丝兑换了 1 BTC 英尺，给了她他的比特币地址。爱丽丝现在要做出选择。要么她把鲍勃 1 BTC 发送到他指定的地址，要么如果她在 24 小时内什么都不做，鲍勃将得到第 125 个第三方托管。因为 125 ETH 比 1 BTC 更值钱，如果爱丽丝不坚持到底，鲍勃会更喜欢它！然而，如果她这么做了，鲍勃就会如愿以偿地得到一个真正的 BTC。

## 关于爱丽丝反应的一个注记

爱丽丝必须时刻在线/保持警惕，这样她才能快速响应 BTC 的要求。我们希望需求和交付之间的时间很短，这意味着超时需要很短。这意味着普通用户不能担当 BTC-FT 创建者的角色，它需要高级用户运行自动满足 BTC 需求的自动化服务。这很好，因为我们真正关心的是我们不必相信爱丽丝。我们的目标不是让任何人都能成为 BTC 金融时报的流动性提供者。

## 追加保证金的通知

所有这些在以太坊上都是可能的，而且都相对容易(最难的部分是 BTC 转移证明，但那是以前解决的问题)。问题在于，BTC:瑞士法郎的汇率并不固定，波动性很大。想象一下，如果 1 BTC 的价值增加到 200 埃特，爱丽丝只有 125 埃特托管，这意味着如果鲍勃出现并要求 1 BTC，这是爱丽丝的最佳利益，只是让他有她的 125 埃特抵押品，而不是给他 1 BTC(现在价值 200 埃特)！

如果我们在以太坊上有一个**价格反馈**，告诉我们 1 BTC 在以太网中的价值，那么我们可以在系统中添加保证金通知。当爱丽丝锁定的抵押品(ETH)数量过低时，就会发生保证金追缴，系统试图通过购买 1 BTC 英尺并将其用于自己的托管交易，或在托管中添加更多的 ETH 以使她不再有风险，来迫使爱丽丝结清她的头寸。这种激励的形式是威胁爱丽丝失去她所有的托管资金。例如，如果 1 BTC 的值达到 120 ETH，则系统可以拍卖 Alice 的 125 ETH，而不管它可以获得多少 BTC 英尺(在这种情况下，预期略高于 1 BTC 英尺)。

由于爱丽丝宁愿要 125 个 ETH 而不是 1 个 BTC(价值 120 个 ETH)，她受到激励在 1 个 BTC 的价值达到 120 个 ETH 之前自己解决问题*。*

## 集中价格馈送

有几个项目做到了这一步，除了 T5、T6 和 T7 之外，以上所有的项目都是不可信的和抵制审查的*。大多数试图解决这个问题的项目只是说，“哦，我们将稍后解决价格馈送，因为现在我们将只是手动提供价格馈送作为引导系统的一种方式”。问题是 ***价格饲料是这个问题的难点！以上都相对容易，我能够在上面的 5 个段落中描述整个事情，并且它可以由一个有能力的团队在几个月内实现。****

集中式价格馈送的问题在于，谁控制了价格馈送，谁就控制了第三方托管。想象一下，1 BTC 的市场价值是 100 埃特，爱丽丝有 125 埃特托管支持承诺转让 1 BTC 给任何人给她 1 BTC 英尺(就像我们上面的例子)。现在假设向系统提供价格源的人(Carol)突然更新价格源，声称 1 BTC 值 1，000，000 ETH！爱丽丝将立即得到极端偏见的保证金要求，因为她是水下的方式！这意味着爱丽丝，谁片刻之前有 125 ETH 在代管 1 BTC 英尺的承诺，现在将失去她所有的代管。由于现实中 100 个 ETH 值 1 个 BTC，而且她有承诺在未来交付 1 个 BTC，所以她在这里的总损失是 25 个 ETH。如果爱丽丝有更多的托管支持她的 1 BTC，那么她的损失会更高。

当我们忽略价格反馈问题时，我们就有了一个不可信的、抵制审查的系统。通过增加一个集中的价格反馈，我们不再有一个不可信的系统:爱丽丝需要相信卡罗尔不会欺骗她。也许卡罗尔是一个非常好的人，但是如果她被黑客攻击，或者有人用扳手胁迫她怎么办？我们不仅需要相信 Carol 没有恶意，我们还需要相信她有不可逾越的操作安全性，并且在面对有动机的攻击者时能够保持匿名。

## 潜在的解决方案

我们如何获得 BTC:ETH 的价格反馈，以便当 Alice 的抵押品由于价格波动而变得过低时，我们可以追加保证金？不幸的是，答案很复杂。你可能注意到的一件事是，我们实际上并不需要一个全价提要，我们只需要 ETH 中 1 BTC 值的一个下限。也就是说，我们需要知道 125 ETH(爱丽丝拥有的抵押品)至少值*1*BTC。如果这是真的，那么我们不需要给 Alice 追加保证金，我们也不关心 1 BTC 在 ETH 中的值是多少。

一个潜在的解决方案是不断拍卖 ETH 作为 BTC 金融时报的抵押品。由于 1 BTC-金融时报在任何时候都可以兑换 1 BTC，我们可以假设 ETH 的拍卖最终会比 1 BTC 的价值多一点，超过的金额取决于投标人的竞争程度。这次拍卖会给我们一个下限。拍卖结束后，我们可以说,“105 埃特(拍卖的规模)至少值 1 BTC 英尺(拍卖的收益), 1 BTC 英尺大约值 1 BTC，因此，如果爱丽丝有 125 埃特代管，她有超过 1 BTC 的代管价值。

这种方法有几个问题:

1.  我们拍卖谁的抵押品？这里最简单的解决方法就是拍卖最低抵押人的抵押品。这里的问题是，没有人希望他们的抵押品被拍卖，因为你的债务几乎肯定会以高于其价值的价格被清算(也就是说，你的抵押品将被拍卖掉超过 1 BTC 的价值)。这就导致了一个问题，参与者不断地争取不成为最低抵押的个人。这听起来可能不错，但如果没有人愿意创建 BTC 金融时报，这可能会成为一个问题，因为对抵押品的要求太高，因为这是一场非底层竞争。
2.  价格馈送更新相对较慢。像这样的反向拍卖需要时间，而且价格在拍卖期间会有很大变化。你不希望它太快，因为那样你会以非竞争性拍卖告终，但你也不希望它太慢，因为那样价格波动可能会很大，而价格反馈无法做出反应。价格反馈更新之间价格波动的可能性越大，你需要的保证金追缴阈值就越高。

总的来说，这个解决方案并不可怕，虽然它可能无法完美地适用于经济理性的行为者，但当涉及到真实的人类时，它可能会工作得足够好。价格波动可能足够小，以允许我们有一个长的拍卖期(例如，6 小时)，人类可能愿意让自己被拍卖掉，而不是偿还他们的债务(我们在 Maker 中看到这种行为，目前在拍卖的基础上有一个陡峭的惩罚)。

## 另一种选择

另一种选择是允许人们(在一个独立于上述市场的市场上)以特定的抵押方式提供购买 BTC 的报价。举个例子，Bob 会在公开市场上创建一个订单，他说，“我会锁定 100 ETH 作为支付给第一个支付 10 ETH 作为抵押并承诺在 6 小时内支付给我 1 BTC 的人。”如果爱丽丝有一些 BTC，她有兴趣为 ETH 出售，她可以接受鲍勃的提议，锁定 10 个 ETH，然后将 1 个 BTC 转让给他，然后在以太坊上证明转让，这将导致她拿回 10 个 ETH 和鲍勃的 100 个 ETH。如果爱丽丝未能转移 1 BTC，那么 6 小时后鲍勃得到爱丽丝的 10 ETH。

这并没有给我们带来我们想要的 BTC 金融时报，但它确实给了我们某种形式的价格供给。如果我们看看这个市场上所有的公开报价，我们可以大致知道 1 BTC 值多少钱。特别是，1 BTC 的价值大约比目前无人问津的最高出价高一点点。如果鲍勃和大卫都出价购买 1 BTC 90 埃特和 100 埃特，没有人出价购买 1 BTC 超过这一价格，那么我们可以假设 1 BTC 价值超过 100 埃特。对于我们的 BTC 金融时报令牌，我们只需要知道 BTC 价格的下限，这给了我们。

不出所料，这种方法存在一些问题:

1.  如果你对买卖 BTC 感兴趣，为什么你会使用它而不是建立在它之上的 BTC 金融时报？我们实际上是在为 BTC 创造两个独立的市场:ETH，它们相互竞争。如果这个系统流动性不够，那么我们就得不到好的价格反馈数据。
2.  如果没有人创造任何优惠会发生什么？如果流动性为零，系统可能不会产生良好的价格馈送数据。我们可能最终得到的唯一报价是没有人愿意接受的超低报价，这将导致我们的价格远远超出(太低)，从而使我们无法正确追加保证金。
3.  我们如何决定对 BTC 卖家来说合适的托管金额是多少(本质上是作为托管的时间货币价值的期权价格)？在上面的例子中，我们对 BTC 卖家有 10%的托管要求，但是应该是 5%还是 15%？当 BTC:ETH 波动性增加时会发生什么，我们应该相应地调整托管金额吗？我们可以让每个 BTC 买家选择他们想要的托管百分比，但我们遇到了拉价格馈送数据的问题，因为即使报价很好，也不会接受具有 1000%托管百分比的人，因此给了我们一个不好的下限(太高)。

## 结论

由于价格上涨，以太坊上的可替换 BTC 代币很难实现。任何解决方案，只要一提到价格，就说是“我们以后再解决的事情”，那就是在回避问题最难的部分！分散价格供给可能有足够好的解决手头问题的解决方案，但它们都带有一些警告，可能会也可能不会成为交易的破坏者。

如果任何人想建立上述系统，请这样做！我也考虑过自己做这个东西，但是一直在其他项目中结束，我宁愿看到这个领域发生一些事情，而不是我紧紧抓住我的想法不放。

> [在您的收件箱中直接获得最佳软件交易](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)