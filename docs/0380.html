<html>
<head>
<title>EOSIO Single Node Testnet Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EOSIO单节点测试网络设置</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/test-4fbd38fdc4e8?source=collection_archive---------2-----------------------#2018-04-26">https://medium.com/coinmonks/test-4fbd38fdc4e8?source=collection_archive---------2-----------------------#2018-04-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="fc79" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">1.概观</h1><p id="6722" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">EOSIO附带了许多程序。主要的有:</p><ul class=""><li id="d032" class="km kn ht jq b jr ko jv kp jz kq kd kr kh ks kl kt ku kv kw dt translated">nodeos:服务器端区块链节点组件</li><li id="3038" class="km kn ht jq b jr kx jv ky jz kz kd la kh lb kl kt ku kv kw dt translated">cleos:与区块链交互和管理钱包的命令行界面</li><li id="c0c0" class="km kn ht jq b jr kx jv ky jz kz kd la kh lb kl kt ku kv kw dt translated">keosd:管理EOSIO钱包的组件</li></ul><p id="b8ca" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">下图说明了这些组件之间的基本关系。</p><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff lf"><img src="../Images/c036be95c64f39aaf9cda1b8f31c85a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTBQDMrSq7b_bF070uty9w.png"/></div></div></figure><h1 id="2e49" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">2.获取代码</h1><p id="e773" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">要下载所有代码，克隆<code class="eh lr ls lt lu b">eos</code>存储库及其子模块。</p><pre class="lg lh li lj fq lv lu lw lx aw ly dt"><span id="0855" class="lz ir ht lu b fv ma mb l mc md">git clone <a class="ae me" href="https://github.com/EOSIO/eos" rel="noopener ugc nofollow" target="_blank">https://github.com/EOSIO/eos</a> --recursive</span></pre><h1 id="a450" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">3.建筑EOSIO</h1><p id="3267" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">有一个自动化的构建脚本，可以安装所有的依赖项并构建EOSIO。构建将内容放在<code class="eh lr ls lt lu b">eos/build</code>文件夹中。可执行文件可以在<code class="eh lr ls lt lu b">eos/build/programs</code>文件夹的子文件夹中找到。</p><h2 id="d03d" class="lz ir ht bd is mf mg mh iw mi mj mk ja jz ml mm je kd mn mo ji kh mp mq jm mr dt translated">3.1.系统需求</h2><ul class=""><li id="0335" class="km kn ht jq b jr js jv jw jz ms kd mt kh mu kl kt ku kv kw dt translated">需要8GB可用内存</li><li id="7328" class="km kn ht jq b jr kx jv ky jz kz kd la kh lb kl kt ku kv kw dt translated">需要20GB可用磁盘空间</li></ul><h2 id="2180" class="lz ir ht bd is mf mg mh iw mi mj mk ja jz ml mm je kd mn mo ji kh mp mq jm mr dt translated">3.2.运行构建脚本</h2><pre class="lg lh li lj fq lv lu lw lx aw ly dt"><span id="fdb5" class="lz ir ht lu b fv ma mb l mc md">cd eos<br/>./eosio_build.sh</span></pre><p id="7932" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">结果:</p><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff mv"><img src="../Images/357b018d1d825a375ccf7f94c988b11c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ookSQsMzUIbmU_yLVtQ2CA.png"/></div></div></figure><h2 id="33a7" class="lz ir ht bd is mf mg mh iw mi mj mk ja jz ml mm je kd mn mo ji kh mp mq jm mr dt translated">3.3.构建验证</h2><p id="6a05" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">或者，可以针对您的构建运行一组测试来执行一些基本的验证。为了在构建之后运行测试套件，启动<code class="eh lr ls lt lu b">mongod</code>并运行<code class="eh lr ls lt lu b">make test</code>。</p><pre class="lg lh li lj fq lv lu lw lx aw ly dt"><span id="f5a0" class="lz ir ht lu b fv ma mb l mc md">/usr/local/bin/mongod -f /usr/local/etc/mongod.conf &amp;<br/>cd build<br/>make test</span></pre><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff mw"><img src="../Images/828b2db206ab0a6824812e21e6681bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADSlJYq81V8kpNs16zV65A.png"/></div></div></figure><h2 id="a3c9" class="lz ir ht bd is mf mg mh iw mi mj mk ja jz ml mm je kd mn mo ji kh mp mq jm mr dt translated">3.4.安装可执行文件</h2><pre class="lg lh li lj fq lv lu lw lx aw ly dt"><span id="8cab" class="lz ir ht lu b fv ma mb l mc md">sudo make install</span></pre><h1 id="31a2" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">4.创建和启动单节点测试网</h1><p id="d78e" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">成功构建项目后，<code class="eh lr ls lt lu b">nodeos</code>二进制文件应该出现在<code class="eh lr ls lt lu b">build/programs/nodeos</code>文件夹中。<code class="eh lr ls lt lu b">nodeos</code>可以使用<code class="eh lr ls lt lu b">programs/nodeos/nodeos</code>直接从<code class="eh lr ls lt lu b">build</code>文件夹运行，或者您可以<code class="eh lr ls lt lu b">cd build/programs/nodeos</code>切换到该文件夹并从那里运行<code class="eh lr ls lt lu b">nodeos</code>命令。</p><p id="bf30" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">您可以使用以下命令启动自己的单节点区块链:</p><pre class="lg lh li lj fq lv lu lw lx aw ly dt"><span id="58ca" class="lz ir ht lu b fv ma mb l mc md">cd build/programs/nodeos<br/>./nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin --plugin eosio::account_history_api_plugin</span></pre><p id="f138" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">运行<code class="eh lr ls lt lu b">nodeos</code>时，您应该会得到类似下面的日志消息。这意味着积木已经制作成功。</p><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff mx"><img src="../Images/ae75aed4af4ccc9d4f57d2d3049fbbb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69ppMGD0g-YyCUce96CquA.png"/></div></div></figure><p id="5145" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">此时，<code class="eh lr ls lt lu b">nodeos</code>正在运行一个单独的生成器，<code class="eh lr ls lt lu b">eosio</code>。可以按<code class="eh lr ls lt lu b">ctr + c</code>停止生产。</p><h2 id="ae69" class="lz ir ht bd is mf mg mh iw mi mj mk ja jz ml mm je kd mn mo ji kh mp mq jm mr dt translated">4.1.高级步骤</h2><p id="a064" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated"><code class="eh lr ls lt lu b">nodeos</code>使用自定义配置文件夹。该文件夹的位置由您的系统决定。</p><p id="87ed" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">对于Mac OS: <code class="eh lr ls lt lu b">~/Library/Application Support/eosio/nodeos/config</code></p><p id="2fa1" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">为了做有意义的工作，<code class="eh lr ls lt lu b">nodeos</code>将需要一个正确配置的<code class="eh lr ls lt lu b">config.ini</code>文件。启动时，<code class="eh lr ls lt lu b">nodeos</code>在配置文件夹中查找<code class="eh lr ls lt lu b">config.ini</code>。如果没有找到，就会创建一个默认的<code class="eh lr ls lt lu b">config.ini</code>文件。如果您还没有准备好使用的<code class="eh lr ls lt lu b">config.ini</code>文件，运行<code class="eh lr ls lt lu b">nodeos</code>，然后使用Ctrl-C键立即关闭它。config文件夹中会创建一个默认配置(<code class="eh lr ls lt lu b">config.ini</code>)。编辑<code class="eh lr ls lt lu b">config.ini</code>文件，将以下设置添加/更新到已有的默认值中:</p><pre class="lg lh li lj fq lv lu lw lx aw ly dt"><span id="ad73" class="lz ir ht lu b fv ma mb l mc md"># Load the testnet genesis state, which creates some initial block producers with the default key. E.g. genesis-json = "/Users/LiuYang/Library/Application Support/eosio/nodeos/config/genesis.json"<br/>genesis-json = /path/to/eos/source/genesis.json<br/>​<br/># Enable production on a stale chain, since a single-node test chain is pretty much always stale<br/>enable-stale-production = true<br/>​<br/># Enable block production with the testnet producers<br/>producer-name = eosio<br/>​<br/># Load the block producer plugin, so you can produce blocks<br/>plugin = eosio::producer_plugin<br/>​<br/># Wallet plugin<br/>plugin = eosio::wallet_api_plugin<br/>​<br/># As well as API and HTTP plugins<br/>plugin = eosio::chain_api_plugin<br/>plugin = eosio::http_plugin<br/>​<br/># This will be used by the validation step below, to view account history<br/>plugin = eosio::account_history_api_plugin</span></pre><p id="d60b" class="pw-post-body-paragraph jo jp ht jq b jr ko jt ju jv kp jx jy jz lc kb kc kd ld kf kg kh le kj kk kl hm dt translated">现在应该可以运行<code class="eh lr ls lt lu b">/eos/programs</code>文件夹或<code class="eh lr ls lt lu b">eos/build/programs</code>文件夹中的<code class="eh lr ls lt lu b">nodeos</code>，并看到它开始生成程序块。</p></div></div>    
</body>
</html>