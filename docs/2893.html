<html>
<head>
<title>An in Depth Look at Orphan Blocks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入了解孤立区块</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/an-in-depth-look-at-orphan-blocks-45baeaca9d28?source=collection_archive---------0-----------------------#2020-04-03">https://medium.com/coinmonks/an-in-depth-look-at-orphan-blocks-45baeaca9d28?source=collection_archive---------0-----------------------#2020-04-03</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/03f9e56367cd7103bb4d0b33f0774018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJzV822uc7B0pYdLClf5kQ.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Photo by <a class="ae jf" href="https://unsplash.com/@tadekl?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Tadeusz Lakota</a></figcaption></figure><p id="3a6f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">虽然我的兴趣主要在于以太坊和其他“图灵全集”区块链，但<a class="ae jf" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊</a>建立在许多最初源于<a class="ae jf" href="https://blog.coincodecap.com/tag/bitcoin/" rel="noopener ugc nofollow" target="_blank">比特币</a>的概念之上，因此与它有许多相似之处。</p><p id="564f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在本帖中，我们将看看<a class="ae jf" href="https://blog.coincodecap.com/tag/bitcoin/" rel="noopener ugc nofollow" target="_blank">比特币</a>中的“孤儿块”。在很大程度上，所有利用工作证明(PoW)算法的区块链都与我下面描述的类似。</p><p id="29e5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在比特币中，有一个概念被称为“最长的链获胜”。这意味着具有最大累积功率的链将是网络接受的有效或“主”链。该规则的存在是为了防止个人或个人群体超越集体网络(除非所述群体代表该网络的50%以上)。因为PoW算法需要大量的计算，因此需要大量的能量，所以对于恶意参与者来说，试图维持最长的链是非常困难和昂贵的。</p><blockquote class="ke kf kg"><p id="9270" class="jg jh kh ji b jj jk jl jm jn jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kd hm dt translated"><strong class="ji hu">亦读:</strong> <a class="ae jf" href="https://blog.coincodecap.com/how-bitcoin-mining-work/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hu">比特币挖矿如何运作？</strong>T11】</a></p></blockquote><p id="bdd9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">最长的链通常是包含最多块的链，但是如果链具有相同数量的块，则它将是具有更多集合功率的链(通过对困难求和)。应该注意的是，术语“最长链胜出”可能经常有点误导，因为它暗示在单个网络中可能存在多个独立的竞争链(除非我们指的是测试网，但它们不竞争)。相反，应该认为在一个链中可以采用多条路径，并且期望节点跟随具有最大功率的路径。</p><p id="a54e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">但是我所说的这些路径是什么意思呢？我们经常会遇到这样的情况，网络中出现意想不到的分歧或“分叉”。</p><p id="8b3e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在使用PoW算法的区块链，当网络上的两个矿工在相似的时间解决PoW难题时，会发生意外分叉。当这些矿工宣布他们有一个到网络其余部分的“获胜”块(传播)时，由于延迟，这不是瞬时的。</p><blockquote class="kl"><p id="030f" class="km kn ht bd ko kp kq kr ks kt ku kd ek translated">在所有节点能够意识到新挖掘的块之前，总是需要一些时间。</p></blockquote></div><div class="ab cl kv kw hb kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hm hn ho hp hq"><p id="cb3e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">例如，假设两个矿工几乎同时解决了力量难题。我们将把这些街区称为B and B的。两个矿工都将把他们的“获胜”块传播给他们最近的邻居，他们将依次重复这个过程。这种情况会一直发生，直到整个网络都知道这个新块。如果一个数据块到达整个网络需要10秒钟(这不是实际需要的时间),并且两个矿工都在地球的另一端，则在传播5秒钟时，我们将有一个拆分的网络(假设延迟在整个网络中保持不变)。</p><p id="77a9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一半的网络现在相信以块B为头的链是正确的链，而另一半相信B’是正确的链。</p><p id="34dd" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这显然是个问题，因为…</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lc"><img src="../Images/353a4ef8e11015321e1a39288429ca74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BakaiaSIhER3bwqydf_Gsw.gif"/></div></div></figure><p id="95ca" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了纠正这个问题，在整个网络意识到两个B and B之后，它们将把它们首先看到的块保持在它们链的顶端，但是也将它们其次看到的块链接到它们的父块(紧接在B and B之前的块)，作为参考。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div class="fe ff lh"><img src="../Images/c685a827efff8f7e0bb7da1989357e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*ieG8yrmOYzN5FwtNo9j_pw.png"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Node representing B as the head of their main chain while keeping reference to B’.</figcaption></figure><p id="0287" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在此之后，挖掘节点立即开始挖掘下一个块的过程，比赛开始。根据矿工，下一个块将被添加到带有块B的链或带有块B '的链中。</p><p id="f4aa" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">对于这个例子，让我们假设一个以B为获胜区块的矿工开采下一个区块C。他们现在将C添加到他们的链中(使其成为最长的链),并将其传播到网络的其余部分。除非有另一个分叉，否则在接收到C时，在其主链的头部具有块B '的节点将接受具有块B(C是头部)的路径，因为它现在是最长的链。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div class="fe ff li"><img src="../Images/9cd317f4e4f62cb23af8f4b701d35b30.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*F3d1pR0xx_Q6KE-o24RH5g.png"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Regardless of whether nodes had B or B’ at their head, they will all abandon B’ once C is added on top of B</figcaption></figure><p id="f098" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">B '事务然后被返回到mempool，B '被丢弃并被唾弃，使其成为孤儿，令B '的矿工沮丧的是，他们失去了开采该区块的奖励。</p><p id="169d" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">这就是比特币区块间隔设为10分钟的原因</strong>。中本聪认为这是快速(足够)确认时间和低分叉概率之间的最佳点，因此世界上的孤儿较少，这总是一件好事。</p><p id="dc50" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="kh">为了更好地可视化和更深入地了解这一点，请访问GitHub上Andreas Antonopoulos的“</em> <a class="ae jf" href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch10.asciidoc" rel="noopener ugc nofollow" target="_blank"> <em class="kh">【掌握比特币</em> </a> <em class="kh">”的第10章。</em></p><p id="a07f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">更新:</p><p id="7c10" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">最近我注意到，围绕着<em class="kh">孤儿</em>块和<em class="kh">陈旧</em>块之间的区别有很多混淆。我想用这一节来阐明两者的不同含义。</p><ol class=""><li id="c55e" class="lj lk ht ji b jj jk jn jo jr ll jv lm jz ln kd lo lp lq lr dt translated"><strong class="ji hu"/><strong class="ji hu">陈旧块是在孤立块之上挖掘的块。</strong></li></ol><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ls"><img src="../Images/0d72c1d7fc0d4235abc1d3860bc430b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSl5rJ0FxkxlnQcFLjTF-Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Miners of both the orphan and the stale block will not be rewarded for their efforts even though they both provided a valid PoW.</figcaption></figure><p id="6b07" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">需要注意的是，上面描述的情况不会发生在比特币中，因为一旦它被挖掘出来并传播给它们，整个网络都会选择跟随D。</p><p id="8d3b" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">2.孤立块实际上是陈旧块。</p><p id="9ede" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">有些人会说，我在这篇文章中使用的术语“孤儿块”应该被称为陈旧块。</p><p id="ad52" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">3.<strong class="ji hu">旧块是在找到有效PoW后正在处理的块。</strong></p><p id="352c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一个名为“<a class="ae jf" href="https://btcvsltc.blogspot.com/" rel="noopener ugc nofollow" target="_blank">比特币来源</a>”的网站已经很好地总结了这一点(我不再相信它仍然存在)，所以我将包括他们的定义。</p><p id="f49d" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="kh">“在任何一秒钟，一个障碍都可能被“解决”。“这意味着世界上在那个区块上工作的每个人都必须停下来，重新开始他们的工作。在该点之后继续工作被称为在“陈旧块”上工作，因为它是旧数据和旧事务。</em></p><p id="6603" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">4.<strong class="ji hu">孤立块是指没有“父”的块。</strong></p><p id="c377" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这就是第二点的原因。有些人认为，孤儿块应该只指“没有父块”的块。</p><p id="7289" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">因为比特币是一个广泛分布的网络，一些节点可以知道其他节点不知道的区块。如果一个节点接收到一个块，并且不知道它的父节点，它们就不能验证它，所以它们必须向网络中的对等节点询问这个信息。在他们收到这个信息之前，这个块被认为是一个<em class="kh">孤立块。</em></p><p id="0743" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然而，这些类型的孤儿在v0.10之后不再存在于比特币中，因为节点下载块的方式发生了变化。</p><blockquote class="kl"><p id="dec3" class="km kn ht bd ko kp kq kr ks kt ku kd ek translated"><a class="ae jf" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="lu lv lw lx ly iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lt"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="ld le lf lg fq iu fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff lz"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></a></figure></div></div>    
</body>
</html>