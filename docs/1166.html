<html>
<head>
<title>Merging multiple dataframes in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">合并R中的多个数据帧</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/merging-multiple-dataframes-in-r-72629c4632a3?source=collection_archive---------1-----------------------#2018-07-30">https://medium.com/coinmonks/merging-multiple-dataframes-in-r-72629c4632a3?source=collection_archive---------1-----------------------#2018-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/6be7fe15ad320a2e7369096af33b2e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x_3IojdKnhqYSpmJ"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Photo by <a class="ae jf" href="https://unsplash.com/@laurenzpicture?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Laurenz Kleinheider</a> on <a class="ae jf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="478d" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">r有很多方便的合并和追加多个数据帧的功能。特别是，我想介绍当您希望将多个具有相同列的数据帧合并在一起时的用例。</p><p id="7e5a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">作为一个例子，让我们<a class="ae jf" href="https://www.kaggle.com/NUFORC/ufo-sightings" rel="noopener ugc nofollow" target="_blank">将Kaggle </a>中的UFO数据集分成多个片段，看看我们如何轻松地将它们组合在一起。</p><p id="a92f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了分割数据，我们将使用kcha设计的以下函数:</p><figure class="ke kf kg kh fq iu"><div class="bz el l di"><div class="ki kj l"/></div></figure><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="9de8" class="kp kq ht kl b fv kr ks l kt ku">ufos &lt;- read.csv("scrubbed.csv")<br/>splitDf &lt;- split_k(ufos,4)</span></pre><p id="66df" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们将数据分成四个数据帧，ufo1、ufo2、ufo3和ufo4。</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="ccd6" class="kp kq ht kl b fv kr ks l kt ku">ufo1 &lt;- splitDf$`1`<br/>ufo2 &lt;- splitDf$`2`<br/>ufo3 &lt;- splitDf$`3`<br/>ufo4 &lt;- splitDf$`4`</span></pre><p id="da40" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">现在，如果我们只想将前两个数据帧合并在一起，我们可以使用rbind，如下所示:</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="8f78" class="kp kq ht kl b fv kr ks l kt ku">ufo1And2 &lt;- rbind(ufo1,ufo2)</span></pre><p id="7115" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以使用NROW确认数据已经成功合并:</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="897c" class="kp kq ht kl b fv kr ks l kt ku">&gt; NROW(ufo1)<br/>[1] 20083<br/>&gt; NROW(ufo2)<br/>[1] 20083<br/>&gt; NROW(ufo1And2)<br/>[1] 40166</span></pre><p id="de3e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然而，由于我们已经将数据分成了四部分，所以不难想象我们会想要合并四个数据帧。Rbind只接受两个数据帧，所以我们必须稍微调整代码来容纳更多的数据帧。</p><h2 id="d0b8" class="kp kq ht bd kv kw kx ky kz la lb lc ld jr le lf lg jv lh li lj jz lk ll lm ln dt translated"><strong class="ak">合并两个以上的数据帧</strong></h2><p id="facb" class="pw-post-body-paragraph jg jh ht ji b jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz ls kb kc kd hm dt translated">要在R中合并两个以上的数据帧，我们可以将rbind调用与do.call结合起来。</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="dfe9" class="kp kq ht kl b fv kr ks l kt ku">do.call("rbind", list(dataframes to merge))</span></pre><p id="8d33" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">工作原理:</strong></p><p id="adab" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">do.call函数允许我们使用任何现有的R函数，比如前面提到的rbind，但是在这个实例中，我们不是只传递两个数据帧，而是能够传递多个。</p><p id="2772" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">因此，当与rbind一起使用时，我们可以使用do.call一次合并两个以上的数据帧。</p><p id="4c1d" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">把这些放在一起，我们可以把我们的UFO数据帧合并到一起，如下所示:</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="ffd2" class="kp kq ht kl b fv kr ks l kt ku">ufoMerged &lt;- do.call("rbind", list(ufo1, ufo2, ufo3, ufo4))</span></pre><p id="adb5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以通过检查行数来确认我们的数据已成功合并:</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="1f5f" class="kp kq ht kl b fv kr ks l kt ku">&gt; NROW(ufoMerged)<br/>[1] 80332<br/>&gt; NROW(ufos)<br/>[1] 80332</span></pre><p id="6d7c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以及使用dplyr执行anti_join，返回null:</p><pre class="ke kf kg kh fq kk kl km kn aw ko dt"><span id="826b" class="kp kq ht kl b fv kr ks l kt ku">library(dplyr)<br/>ufoChecker &lt;- anti_join(ufoMerged, ufos)<br/>ufoChecker<br/> [1] datetime             city                 state                country             <br/> [5] shape                duration..seconds.   duration..hours.min. comments            <br/> [9] date.posted          latitude             longitude           <br/>&lt;0 rows&gt; (or 0-length row.names)</span></pre><p id="11ef" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这只是合并多个数据帧的一种方法，在<a class="ae jf" href="https://www.r-bloggers.com/the-rbinding-race-for-vs-do-call-vs-rbind-fill/" rel="noopener ugc nofollow" target="_blank"> R-Bloggers </a>你可以找到其他方法的速度比较。然而，我发现do.call与rbind结合使用是连接多个数据帧的最直观的方法之一。</p><h2 id="26a2" class="kp kq ht bd kv kw kx ky kz la lb lc ld jr le lf lg jv lh li lj jz lk ll lm ln dt translated">有用的资源</h2><div class="lt lu fm fo lv lw"><a href="https://www.stat.berkeley.edu/~s133/Docall.html" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab ej"><div class="ly ab lz cl cj ma"><h2 class="bd hu fv z el mb eo ep mc er et hs dt translated">{do.call}功能</h2><div class="md l"><h3 class="bd b fv z el mb eo ep mc er et ek translated">allframes = sapply(1:20，function(x)read.csv(paste(x，' csv '，sep= ' . ')))&gt; head(allframes) [，1] [，2] [，3] [，4] [，5] [，6]…</h3></div><div class="me l"><p class="bd b gc z el mb eo ep mc er et ek translated">www.stat.berkeley.edu</p></div></div></div></a></div><blockquote class="mf"><p id="7de2" class="mg mh ht bd mi mj mk ml mm mn mo kd ek translated">加入Coinmonks <a class="ae jf" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jf" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae jf" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="kp kq ht bd kv kw mp ky kz la mq lc ld jr mr lf lg jv ms li lj jz mt ll lm ln dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="mu mv ht ji b jj lo jn lp jr mw jv mx jz my kd mz na nb nc dt translated"><a class="ae jf" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae jf" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="14e6" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae jf" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae jf" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="f33b" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">加密交易所</a> | <a class="ae jf" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">印度的加密应用</a></li><li id="47a8" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="4aad" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated">最佳<a class="ae jf" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密贷款平台</a></li><li id="9487" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated">杠杆代币的终极指南</li><li id="bbad" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" rel="noopener" href="/coinmonks/coinbase-review-6ef4e0f56064">比特币基地评论</a> | <a class="ae jf" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2">德里比特评论</a> | <a class="ae jf" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX评论</a></li><li id="0005" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" href="https://coincodecap.com/coinmetro-review" rel="noopener ugc nofollow" target="_blank"> Coinmetro评论</a> | <a class="ae jf" href="https://coincodecap.com/virgocx-review" rel="noopener ugc nofollow" target="_blank"> VirgoCX评论</a></li><li id="67c6" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" href="https://coincodecap.com/copy-trading-platforms-france" rel="noopener ugc nofollow" target="_blank">法国4大最佳加密副本交易平台</a></li><li id="fe86" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" href="https://coincodecap.com/reasons-to-switch-from-wazirx-to-coindcx" rel="noopener ugc nofollow" target="_blank">从WazirX切换到CoinDCX的5个理由</a></li><li id="1b0f" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated"><a class="ae jf" href="https://coincodecap.com/unocoin-review" rel="noopener ugc nofollow" target="_blank">联合国硬币评论</a> | <a class="ae jf" href="https://coincodecap.com/best-crypto-staking-coins" rel="noopener ugc nofollow" target="_blank">最佳加密赌注硬币</a></li><li id="1019" class="mu mv ht ji b jj nd jn ne jr nf jv ng jz nh kd mz na nb nc dt translated">如何使用MetaMask Wallet获得KCC地址？</li></ul></div></div>    
</body>
</html>