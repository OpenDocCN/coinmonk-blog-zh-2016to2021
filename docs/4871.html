<html>
<head>
<title>Solana From Source</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来源茄属植物</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/solana-from-source-527cec3730b1?source=collection_archive---------1-----------------------#2021-06-28">https://medium.com/coinmonks/solana-from-source-527cec3730b1?source=collection_archive---------1-----------------------#2021-06-28</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/040eea27e5c6f9ff3a6033f85b2d90d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1RmTW8WOF6o3UGBkjuTOYA.jpeg"/></div></div></figure><div class=""/><p id="3a18" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">索拉纳是一个有趣的区块链项目，有望成为一个低油费和快速封锁时间的L1。为了检验它，我决定试着在它上面创建一些测试智能合同。然而，他们的二进制版本只适用于OSX x86，而且目前还没有提供OSX arm64二进制版本。因此，为了让事情继续运行，我必须从他们的主要回购中构建我需要的东西。</p><p id="9efa" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">要在M1系统上构建Solana并运行<a class="ae jz" href="https://github.com/solana-labs/example-helloworld" rel="noopener ugc nofollow" target="_blank"> Hello World示例</a>你需要Rust。可以通过<a class="ae jz" href="https://rustup.rs" rel="noopener ugc nofollow" target="_blank"> rustup.rs </a>安装。一旦安装了rust，我们就可以克隆Solana master并安装将示例智能合同部署到devnet所需的一切。</p><h1 id="a52b" class="ka kb ie bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">建立索拉纳大师</h1><p id="b471" class="pw-post-body-paragraph jb jc ie jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">在撰写本指南时，Solana的最新1.7.1版本没有构建在M1系统上。尽管如此，主分支已经有了一些支持M1的提交(例如提交<code class="eh ld le lf lg b"><a class="ae jz" href="https://github.com/solana-labs/solana/commit/8a9b7f5ef272996c78ec15694678833cf85ddce4" rel="noopener ugc nofollow" target="_blank">8a9b7f5</a></code>)。</p><p id="d32c" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">克隆Solana repo，并将cd放入其中:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="8405" class="lp kb ie lg b fv lq lr l ls lt">$ git clone <a class="ae jz" href="https://github.com/solana-labs/solana" rel="noopener ugc nofollow" target="_blank">https://github.com/solana-labs/solana</a><br/>$ cd solana</span></pre><p id="af19" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，您可以尝试运行脚本<code class="eh ld le lf lg b">scripts/cargo-install-all.sh</code>，如<a class="ae jz" href="https://docs.solana.com/cli/install-solana-cli-tools#build-from-source" rel="noopener ugc nofollow" target="_blank"> Solana工具套件指南</a>中所述。然而，对我来说，这个脚本不能开箱即用。它使用一些脚本来找到你的<code class="eh ld le lf lg b">cargo</code>安装，但它在我的系统上有麻烦。为了解决这个问题，我简单地编辑了脚本，使用路径中的<code class="eh ld le lf lg b">cargo</code>:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="84ae" class="lp kb ie lg b fv lq lr l ls lt">#cargo="$("${readlink_cmd}" -f "${here}/../cargo")"<br/>cargo="cargo"</span></pre><p id="6300" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在您应该可以毫无问题地构建Solana了:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="a143" class="lp kb ie lg b fv lq lr l ls lt">$ ./scripts/cargo-install-all.sh --validator-only .</span></pre><p id="3fb9" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们在这里使用<code class="eh ld le lf lg b">validator-only</code>开关，因为目前建造<code class="eh ld le lf lg b">spl-token-cli</code>几乎是不可能的。该程序位于<a class="ae jz" href="https://github.com/solana-labs/solana-program-library" rel="noopener ugc nofollow" target="_blank"> Solana程序库</a> repo中，该程序目前依赖于Solana <code class="eh ld le lf lg b">1.6.11</code>。依赖于master的每夜构建会很好:)</p><p id="01d7" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">脚本完成后，您应该在<code class="eh ld le lf lg b">./bin</code>文件夹中拥有所有的验证器二进制文件。为了简单起见，将这个<code class="eh ld le lf lg b">bin</code>文件夹添加到您的路径中。然而，它排除了<code class="eh ld le lf lg b">solana-test-validator</code>，但是无论如何，它似乎不能正确地与M1系统一起工作，所以没关系。如果你想试一试，你可以用下面的代码来编译它:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="fb94" class="lp kb ie lg b fv lq lr l ls lt">$ cargo build --release --bin solana-test-validator<br/>$ cp target/release/solana-test-validator ./bin</span></pre><p id="38b4" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在测试验证器也应该在<code class="eh ld le lf lg b">bin</code>文件夹中了。</p><h1 id="bf93" class="ka kb ie bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">设置索拉纳</h1><p id="a662" class="pw-post-body-paragraph jb jc ie jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">现在我们有了<code class="eh ld le lf lg b">solana</code>二进制文件，我们可以配置它使用devnet:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="0031" class="lp kb ie lg b fv lq lr l ls lt">$ solana config set --url <a class="ae jz" href="https://api.devnet.solana.com" rel="noopener ugc nofollow" target="_blank">https://api.devnet.solana.com</a></span></pre><p id="0449" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建新的密钥对:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="a270" class="lp kb ie lg b fv lq lr l ls lt">$ solana-keygen new</span></pre><p id="9040" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">有了新生成的密钥对，我们可以请求空投一些SOL:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="e3d1" class="lp kb ie lg b fv lq lr l ls lt">$ solana airdrop 5</span></pre><p id="f3c0" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这将为我们的钱包增加5 SOL，我们可以使用它将智能合同部署到devnet。</p><h1 id="8ff8" class="ka kb ie bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">安装BPF SDK</h1><p id="8a4e" class="pw-post-body-paragraph jb jc ie jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">为了能够将hello world程序部署到测试验证器上，您需要安装BPF SDK。您可以通过从项目根目录转到<code class="eh ld le lf lg b">sdk/cargo-build-bpf</code>来实现。从那里，运行以下命令:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="85eb" class="lp kb ie lg b fv lq lr l ls lt">$ cargo install --path .</span></pre><p id="c5b1" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这将把<code class="eh ld le lf lg b">cargo-build-bpf</code>程序安装到<code class="eh ld le lf lg b">~/.cargo/bin</code>上。接下来在<code class="eh ld le lf lg b">~/.cargo/bin</code>中，在项目的<code class="eh ld le lf lg b">bin</code>文件夹中创建一个指向<code class="eh ld le lf lg b">sdk</code>文件夹的符号链接，如下所示:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="4b16" class="lp kb ie lg b fv lq lr l ls lt">$ ln -s $PROJECT_ROOT/bin/sdk ~/.cargo/bin/sdk</span></pre><p id="084d" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">用你的Solana项目文件夹替换<code class="eh ld le lf lg b">$PROJECT_ROOT</code>。</p><h1 id="33cc" class="ka kb ie bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">编译Hello World智能合约</h1><p id="7bc2" class="pw-post-body-paragraph jb jc ie jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">现在创建了所有的二进制文件，我们可以编译<a class="ae jz" href="https://github.com/solana-labs/example-helloworld" rel="noopener ugc nofollow" target="_blank"> Hello World示例程序</a>。将它克隆到某个地方，并在项目文件夹中运行以下命令:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="1e90" class="lp kb ie lg b fv lq lr l ls lt">$ cargo build-bpf \<br/>    --manifest-path=./src/program-rust/Cargo.toml \<br/>    --bpf-out-dir=dist/program</span></pre><p id="7e2f" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果一切顺利，现在应该编译智能契约了。您可以将它部署到devnet，如下所示:</p><pre class="lh li lj lk fq ll lg lm ln aw lo dt"><span id="cc1c" class="lp kb ie lg b fv lq lr l ls lt">$ solana program deploy ./dist/program/helloworld.so</span></pre><p id="dc83" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">搞定了。hello world示例智能合同现已部署到devnet。</p><blockquote class="lu"><p id="0551" class="lv lw ie bd lx ly lz ma mb mc md jy ek translated">加入<a class="ae jz" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank"> Coinmonks电报频道</a>，了解加密交易和投资</p></blockquote><h2 id="bd97" class="lp kb ie bd kc me mf mg kg mh mi mj kk jm mk ml ko jq mm mn ks ju mo mp kw mq dt translated">另外，阅读</h2><ul class=""><li id="c6ab" class="mr ms ie jd b je ky ji kz jm mt jq mu ju mv jy mw mx my mz dt translated">最好的比特币<a class="ae jz" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a> | <a class="ae jz" rel="noopener" href="/coinmonks/bitbox02-review-your-swiss-bitcoin-hardware-wallet-c36c88fff29"> BitBox02回顾</a></li><li id="2fe9" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">BlockFi vs Celsius</a>|<a class="ae jz" rel="noopener" href="/coinmonks/hodlnaut-review-best-way-to-hodl-is-to-earn-interest-on-your-bitcoin-6658a8c19edf">Hodlnaut点评</a> | <a class="ae jz" href="https://blog.coincodecap.com/kucoin-review" rel="noopener ugc nofollow" target="_blank"> KuCoin点评</a></li><li id="1dc3" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/bitsgap-review-a-crypto-trading-bot-that-makes-easy-money-a5d88a336df2"> Bitsgap审查</a> | <a class="ae jz" rel="noopener" href="/coinmonks/quadency-review-a-crypto-trading-automation-platform-3068eaa374e1"> Quadency审查</a> | <a class="ae jz" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns审查</a></li><li id="4268" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a> | <a class="ae jz" rel="noopener" href="/coinmonks/coinmama-review-ace5641bde6e"> Coinmama审核</a></li><li id="0700" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/coinbase-review-6ef4e0f56064">比特币基地评论</a> | <a class="ae jz" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2">德里比特评论</a> | <a class="ae jz" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX评论</a> | <a class="ae jz" rel="noopener" href="/coinmonks/stealthex-review-396c67309988"> StealthEX评论</a></li><li id="1a62" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/ngrave-zero-review-c465cf8307fc">n平均零点评审</a> | <a class="ae jz" rel="noopener" href="/coinmonks/phemex-review-4cfba0b49e28"> Phemex评审</a> | <a class="ae jz" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT评审</a></li><li id="c46f" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated">最佳<a class="ae jz" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">区块链分析</a>工具| <a class="ae jz" rel="noopener" href="/coinmonks/earn-bitcoin-6e8bd3c592d9">赚比特币</a> | <a class="ae jz" rel="noopener" href="/coinmonks/swapzone-review-crypto-exchange-data-aggregator-e0ad78e55ed7"> Swapzone评论</a></li><li id="b037" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南| <a class="ae jz" rel="noopener" href="/coinmonks/how-to-short-bitcoin-568a2d0b4ae5">如何做空比特币</a> | <a class="ae jz" rel="noopener" href="/coinmonks/prokey-review-26611173c13c"> Prokey回顾</a></li><li id="7ee2" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/binance-trading-bots-d0d57bb62c4c">币安交易机器人</a> | <a class="ae jz" rel="noopener" href="/coinmonks/okex-review-6b369304110f"> OKEx审查</a> | <a class="ae jz" href="https://blog.coincodecap.com/atani-review" rel="noopener ugc nofollow" target="_blank"> Atani审查</a></li><li id="d235" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/best-crypto-signals-telegram-5785cdbc4b2b">最佳加密交易信号电报</a> | <a class="ae jz" rel="noopener" href="/coinmonks/moonxbt-review-6e4ab26d037"> MoonXBT评论</a></li><li id="f41c" class="mr ms ie jd b je na ji nb jm nc jq nd ju ne jy mw mx my mz dt translated"><a class="ae jz" rel="noopener" href="/coinmonks/godex-io-review-7366086519fb"> Godex.io审核</a> | <a class="ae jz" rel="noopener" href="/coinmonks/invity-review-70f3030c0502">邀请审核</a> | <a class="ae jz" rel="noopener" href="/coinmonks/bitforex-review-c4bb28d9e271"> BitForex审核</a></li></ul></div></div>    
</body>
</html>