# ä½¿ç”¨ EOS æ™ºèƒ½åˆåŒâ€œæ•°æ®â€

> åŸæ–‡ï¼š<https://medium.com/coinmonks/using-the-eos-smart-contract-data-a3244b415410?source=collection_archive---------4----------------------->

![](img/7818d530e32fb436fb16a5e040c883d7.png)

åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨æ™ºèƒ½åˆçº¦ä¸Šä¼ è¾“æ•°æ®ã€‚æ™ºèƒ½åˆåŒæ•°æ®å¼•ç”¨äº† cleos å¸®åŠ©ä¸­çš„æœ¯è¯­ã€‚

```
Push a transaction with a single action
Usage: cleos push action [OPTIONS] account action data
```

# **åŸºæœ¬ç»“æ„**

```
#include <eosiolib/eosio.hpp>
#include <eosiolib/print.hpp>using namespace eosio;class hiworld : public eosio::contract {
  private:

  public:
    using contract::contract;void hi( account_name user) {
        print("hi message");
    }void bye( account_name user ) {
        print("bye message");
    }
};EOSIO_ABI( hiworld, (hi) (bye) )
```

åªéœ€ç¼–å†™ç¤ºä¾‹ä»£ç ã€‚

```
eosiocpp -o hiworld.wast hiworld.cppeosiocpp -g hiworld.abi hiworld.cpp
```

ç¼–åˆ¶

å¦‚æœæ‚¨çœ‹åˆ° Action hiï¼Œæ‚¨å°†èƒ½å¤Ÿçœ‹åˆ°â€œvoid hi ( account_name user ) {â€ã€‚äº†è§£äº†è¿™äº›ï¼Œæ‰“å¼€ hiworld.abi æ–‡ä»¶ã€‚

```
{
  "____comment": "This file was generated by eosio-abigen. DO NOT EDIT - 2018-06-21T08:42:39",
  "version": "eosio::abi/1.0",
  "types": [],
  "structs": [{
      "name": "hi",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "name"
        }
      ]
    },{
      "name": "bye",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "name"
        }
      ]
    }
  ],
  "actions": [{
      "name": "hi",
      "type": "hi",
      "ricardian_contract": ""
    },{
      "name": "bye",
      "type": "bye",
      "ricardian_contract": ""
    }
  ],
  "tables": [],
  "ricardian_clauses": [],
  "error_messages": [],
  "abi_extensions": []
}
```

æ‰“å¼€ hiworld.abi æ–‡ä»¶åï¼Œæ‚¨ä¼šçœ‹åˆ°ç±»ä¼¼ä¸Šé¢çš„å†…å®¹ã€‚

ä»ä¸Šé¢çš„â€œ__commentâ€ä½ å¤§æ¦‚å¯ä»¥çŒœåˆ°ï¼Œeosio ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª abi æ–‡ä»¶ã€‚ä¹‹å‰ä½¿ç”¨çš„ EOS iocppâ€“g é€‰é¡¹æ˜¯è‡ªåŠ¨åˆ›å»ºè¿™ä¸ª abi çš„é€‰é¡¹ã€‚

```
"structs": [{
      "name": "hi",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "name"
        }
      ]
    },{
      "name": "bye",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "name"
        }
      ]
    }
  ],
```

å¦‚æœæ‚¨æŸ¥çœ‹ struct éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ° function å‚æ•°åœ¨ Action å‡½æ•°çš„å½¢çŠ¶ä¸­æ³¨å†Œä¸º Action çš„æ•°æ®ã€‚

ç°åœ¨ï¼Œåƒä¸‹é¢è¿™æ ·ä¿®æ”¹æºä»£ç ï¼Œå¹¶æ£€æŸ¥ abi æ–‡ä»¶æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚

```
void hi( account_name user, uint64_t number) {
        print("hi message");
}
```

å‘ hiworld.cpp çš„ hi Action å‡½æ•°æ·»åŠ å‚æ•°ã€‚

```
eosiocpp -o hiworld.wast hiworld.cppeosiocpp -g hiworld.abi hiworld.cpp
```

ç¼–è¯‘å¹¶æ£€æŸ¥ abi æ–‡ä»¶ã€‚

```
"structs": [{
      "name": "hi",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "name"
        },{
          "name": "number",
          "type": "uint64"
        }
      ]
    },{
      "name": "bye",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "name"
        }
      ]
    }
  ],
```

æ‚¨å°†èƒ½å¤Ÿæ£€æŸ¥ä¿®æ”¹åçš„åç§°:ç¼–å·ï¼Œç±»å‹:uint64 æ˜¯å¦å·²æ·»åŠ ã€‚

```
#cleos set contract usersc ~/sc/hiworld/
```

ä¸Šä¼ ä¿®è®¢åçš„æ™ºèƒ½åˆåŒã€‚

```
#cleos push action usersc hi -p usersc
```

å¦‚æœæ‚¨ä»å¦‚ä¸‹æ‰€ç¤ºçš„è¯­æ³•ä¸­åˆ é™¤æ•°æ®éƒ¨åˆ†ï¼Œcleos ä¼šå°†å…¶è¿‡æ»¤æ‰ã€‚æ•°æ®æ˜¯å¿…é¡»çš„ã€‚

![](img/b1d57876c7afe286c9c9139ce10ac696.png)

```
# cleos push action usersc hi '' -p usersc
```

å¦‚æœæ‚¨å°†æ•°æ®ç•™ç©ºä¸º''ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œæ‚¨å°†æ— æ³•é€šè¿‡åŒºå—é“¾å®¡æ ¸ã€‚

![](img/a315200b0d14aaf846e14f3e724f44da.png)

```
# cleos push action usersc hi '["test"]' -p usersc
```

å¦‚æœæ‚¨å£°æ˜äº† 2 ä¸ªæ•°æ®ï¼Œä½†å¦‚ä¸Šæ‰€ç¤ºåªå‘é€äº† 1 ä¸ªï¼Œ

![](img/0d7624c691f8cffeceb75d89a65d982e.png)

ä½ åº”è¯¥ä¼šå¾ˆå®¹æ˜“æˆåŠŸã€‚

[Trap]å¦‚æœå£°æ˜ 2ï¼Œå®é™…ä¸Šå¿…é¡»å‘é€ä¸¤ä¸ªæ•°æ®ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œuint64_t ç±»å‹è¢«ç›´æ¥ä»ç©ºå€¼è§£é‡Šä¸º 0ã€‚

```
# cleos push action usersc hi '["test","a"]' -p usersc
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ•°æ®ç±»å‹æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä½†ä½ ä½œä¸ºä¸€ä¸ªå­—ç¬¦æ‰§è¡Œã€‚

![](img/fa1b3837f300d7324800c7c9720463ef.png)

åŒºå—é“¾æ£€æµ‹æ•°æ®ç±»å‹ï¼Œå¦‚æœç±»å‹ä¸åŒï¼Œå°±ä¼šå‡ºé”™ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å›é¡¾äº†æ™ºèƒ½åˆçº¦åŠ¨ä½œæ•°æ®ï¼Œä»¥åŠå“ªäº›è°ƒç”¨æ˜¯å…è®¸çš„ã€‚

## ITAM æ¸¸æˆæ˜¯ä¸€ä¸ªé€æ˜çš„æ¸¸æˆç”Ÿæ€ç³»ç»Ÿçš„åŒºå—é“¾å¹³å°

è®¢é˜… ITAM æ¸¸æˆå¹¶æ¥æ”¶æœ€æ–°ä¿¡æ¯ã€‚

è®¿é—® ITAM æ¸¸æˆç”µè®¯ï¼Œå°± ITAM æ¸¸æˆå’ŒåŒºå—é“¾è¿›è¡Œäº¤æµã€‚ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥åŠ å…¥ï¼ğŸ‘«

ç½‘å€:**[https://itam . games](https://itam.games)ç”µæŠ¥:[https://t.me/itamgames](https://t.me/itamgames)**