<html>
<head>
<title>Simple Oraclize example with Solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有可靠性的简单组织示例</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/simple-oraclize-example-with-solidity-68b6811902da?source=collection_archive---------5-----------------------#2018-06-09">https://medium.com/coinmonks/simple-oraclize-example-with-solidity-68b6811902da?source=collection_archive---------5-----------------------#2018-06-09</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="d09b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我已经和Solidity smart contracts一起工作了一段时间。今天我将展示我们如何使用<strong class="is hu"> Oraclize </strong>从外部世界获取数据到以太坊智能合约中。这个特性将使我们的智能合约非常动态，并处理许多好的用例。这个故事的重点是让您从一个简单的工作示例开始。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/08762dd1ab405174bc6c6d6f020cf5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KrHGg6BdR3SNWjY5EM0-w.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">source: blog.oraclize.it</figcaption></figure><p id="aa03" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，你可能会想为什么我们需要外部世界的数据。嗯，有各种各样的使用案例，其中您需要在您的智能合同外链数据。即</p><ul class=""><li id="0984" class="ke kf ht is b it iu ix iy jb kg jf kh jj ki jn kj kk kl km dt translated">如果您的智能合约处理天气状况，请查询天气数据</li><li id="761e" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">获取股票价格</li><li id="d43d" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">生成安全随机数(因为在链上生成随机数不是很安全)</li><li id="ffbf" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">通过WolframAlpha做一些复杂的计算</li><li id="4692" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">等等。</li></ul></div><div class="ab cl ks kt hb ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hm hn ho hp hq"><h2 id="df98" class="kz la ht bd lb lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt dt translated">例如:ETH/BTC价格检查器</h2><p id="9a52" class="pw-post-body-paragraph iq ir ht is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hm dt translated">对于我们的示例，我们将使用<strong class="is hu"> Oraclize </strong>从北海巨妖交易所获取最新的一对ETH/BTC，并将其存储在我们的智能合约中。这是我们的<code class="eh lz ma mb mc b">SimpleOraclizeContract</code>:</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="md me l"/></div></figure><p id="08cc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Oraclize的使用非常简单，我们只需要导入<a class="ae mf" href="https://gist.github.com/bishesh16/34cd6dff58f8d5b2865576a6157996b6" rel="noopener ugc nofollow" target="_blank"> Oraclize.sol </a>契约，然后从<code class="eh lz ma mb mc b">usingOraclize</code>契约继承我们的<code class="eh lz ma mb mc b">SimpleOraclizeContract</code>契约，可以在这里找到:<br/>https://gist . github . com/bishesh 16/34c D6 dff 58 F8 d5b 2865576 a 6157996 b 6或<br/>T15】https://github . com/Oraclize/ethereum</p><p id="526a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">只需将上述联系人的内容粘贴到一个新文件中，并将该文件命名为“Oraclize.sol”。</p><p id="054e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">就是这样！！！</p><h2 id="5661" class="kz la ht bd lb lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt dt translated"><strong class="ak">使用Metamask在Remix IDE上测试它</strong></h2><p id="10f0" class="pw-post-body-paragraph iq ir ht is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn hm dt translated">使用<a class="ae mf" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> remix </a> IDE复制上述两个文件，并与Ropsten、Kovan、Rinkeby testnets甚至main-net上的智能合约进行交互:)</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff mg"><img src="../Images/b557b371822daa8441c8242ea824d146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mw83EnnGiWwK4p5njQ2hKQ.png"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Deploying the contract on Ropsten network. Metamask is required !</figcaption></figure><p id="3709" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">检验契约的步骤:<br/> 1 .部署合同<br/> 2。使用少量以太网调用<code class="eh lz ma mb mc b">updatePrice()</code>函数，即0.05以太网(使用类似Ropsten的测试网络)<br/>如果一分钟后之前的交易成功，Oraclize将调用我们的合同并更新价格对ETH/XBT <br/> 3。查价格ETHXBT，应该更新了:)</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff mh"><img src="../Images/b04445c337ef59cedc9699c1e76672dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AfYXPKBJBFAngEOAWrUBeg.png"/></div></div></figure><p id="cc4e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意:</strong>为了调用Oraclize，您需要将一些乙醚转移到您的智能合约，否则它将无法查询Oraclize ( <a class="ae mf" href="http://docs.oraclize.it/#pricing" rel="noopener ugc nofollow" target="_blank">在此检查费用</a>)。</p><p id="ee08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">参考资料:</strong> <br/> Github回购:<a class="ae mf" href="https://github.com/bishesh16/simple-oraclize-solidity" rel="noopener ugc nofollow" target="_blank">https://github.com/bishesh16/simple-oraclize-solidity</a>T5】Oraclize docs:<a class="ae mf" href="http://docs.oraclize.it/#home" rel="noopener ugc nofollow" target="_blank">http://docs.oraclize.it/#home</a></p></div></div>    
</body>
</html>