<html>
<head>
<title>Tell me more Internet of Things — Part 4— IOTA cost and value comparison</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解更多物联网信息—第4部分— IOTA成本和价值比较</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/tell-me-more-internet-of-things-part-4-iota-cost-and-value-comparison-381008495d1d?source=collection_archive---------2-----------------------#2019-03-04">https://medium.com/coinmonks/tell-me-more-internet-of-things-part-4-iota-cost-and-value-comparison-381008495d1d?source=collection_archive---------2-----------------------#2019-03-04</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="30d4" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">IOTA——如何通过IOTA (MAM)消息将您的设备数据传输到分布式不可变的Tangle，并可视化其内容。</h2></div><p id="419d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-1-iot-platform-cost-and-value-comparison-558ce8966767">Part 1</a><strong class="jk hu">|</strong>|<a class="ae ke" rel="noopener" href="/coinmonks/tell-me-more-internet-of-things-part-2-google-cloud-iot-cost-and-value-comparison-38bfb20d94e1">Part 2<strong class="jk hu"><em class="kf"/></strong></a><em class="kf">|</em>|<a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-3-mindsphere-cost-and-value-comparison-b333ebfb872a">Part 3</a><em class="kf">|</em>|<a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-4-iota-cost-and-value-comparison-381008495d1d"><strong class="jk hu">Part 4</strong></a><em class="kf">|</em><a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-5-google-cloud-user-handling-ae285e7e34b2">Part 5</a><strong class="jk hu"/>|<a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-6-google-cloud-user-input-push-subscription-aa39ebc4a348">Part 6</a><em class="kf">|…| Part n</em></p><p id="a0b1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在<a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-1-iot-platform-cost-and-value-comparison-558ce8966767">第1部分</a>中，我们介绍了<a class="ae ke" rel="noopener" href="/coinmonks/tell-me-more-internet-of-things-part-2-google-cloud-iot-cost-and-value-comparison-38bfb20d94e1">第2部分</a> Google IoT和<a class="ae ke" rel="noopener" href="/@bertrand.jan/tell-me-more-internet-of-things-part-3-mindsphere-cost-and-value-comparison-b333ebfb872a">第3部分</a> MindSphere中的目标和硬件。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff kg"><img src="../Images/cf45e70fa66778045ae9a80cfa1b8ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*iqJR08LDh3q3wqcNM0av6w.png"/></div></figure><p id="1493" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">本文比较了IOTA，并将其协议用于我们的特定业务/用例，并将其与所选的IoT平台解决方案进行比较。</p><p id="e561" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我将测量数据发送到Tangle (IOTA的不可变数据库网络),并探索如何将它可视化，以用于我们的规模化、有望成功的环境传感器商业案例。每个设备的实现成本有多高，以及对用户有什么好处。请记住，当前的网络和协议正在不断发展，只有从基于互联网的架构迁移到基于网状物联网网络的架构，IOTA的未来重要性和优势才能充分展现。此外，对于我们的用例，在我看来，无论如何，基于云的特性和基于IOTA的特性的组合目前会更合适。</p><p id="7f69" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当谈到区块链或在这种情况下分布式账本技术(DLT)通常是每个人都想到的加密货币。目前我们不需要这个特性。除了支持价值交易的交换(像其他加密货币一样)，IOTA还有一些有趣的其他功能。众所周知，IOTA支持基于零费用的零价值不可变交易。这项服务可以单独用于将所有数据装载到IOTA的网络中，但它不是有组织的(流式)也不是私有的。这是第二级实现，屏蔽认证消息(MAM)声明将安全可靠的数据流引入该无许可分布式分类帐。实现零费用交易的诀窍在于结束那些验证分类账的人(在其他区块链架构中称为激励性矿工)和那些在网络中执行交易的人的分离。在IOTA中，您是两者，如果您想要添加一个事务，您需要在您的事务得到验证之前验证另外两个事务。</p><p id="7bd8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">听起来不错。让我们首先尝试为M0-M3里程碑实现最简单的解决方案，然后在扩展用例时探索成本。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff ko"><img src="../Images/1c59d4202b5fece63e8c22c0579ac96e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Qq5xo7j5sRbnIpUM"/></div></div></figure><p id="2230" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">本文和用例的实现主要如下。</p><ul class=""><li id="855c" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated"><a class="ae ke" href="https://www.iota.org/" rel="noopener ugc nofollow" target="_blank">https://www.iota.org/</a></li><li id="cdcf" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated"><a class="ae ke" href="https://www.mobilefish.com/developer/iota/iota_quickguide_raspi_mam.html" rel="noopener ugc nofollow" target="_blank">https://www . mobile fish . com/developer/iota/iota _ quick guide _ raspi _ mam . html</a></li><li id="9830" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">【https://discordapp.com/invite/fNGZXvh T4】</li><li id="23bd" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated"><a class="ae ke" href="https://github.com/iotaledger" rel="noopener ugc nofollow" target="_blank">https://github.com/iotaledger</a></li><li id="78f0" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated"><a class="ae ke" href="https://thetangle.business/" rel="noopener ugc nofollow" target="_blank">https://thetangle.business/</a></li></ul><p id="0c66" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当然，已经有一个优秀的思想开放的社区，它提供了许多教程和概念证明(PoC)案例，尽管IOTA基金会还很早。我尝试实现一个基于开源免费协议的解决方案，并指出当从我们的原型向上扩展时，我们需要在哪里进行调整。</p><h1 id="7fb5" class="lh li ht bd lj lk ll lm ln lo lp lq lr iz ls ja lt jc lu jd lv jf lw jg lx ly dt translated">实施情况和结果概述</h1><p id="c2e5" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">该解决方案基于</p><ul class=""><li id="06df" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">用MAM发送数据。这是我们的Raspberry Pi (RPi)的MAM publisher程序。MAM对象创建和签名是在设备上完成的。</li><li id="77e7" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">在服务的Permanode上执行tip选择(随机查找两个需要验证的事务，作为getTransactionToConfirm (gTTA)函数调用)以计算成本。<em class="kf">实际上在实现中使用devnets full节点作为原型(这是免费提供的)。</em></li><li id="df1e" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">将工作证明(PoW)外包给同一个完整节点。(<a class="ae ke" href="https://devnet.thetangle.org/nodes;" rel="noopener ugc nofollow" target="_blank">https://devnet.thetangle.org/nodes;</a>https://powsrv.io/T2)</li><li id="b630" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">通过同一个完整的节点广播它，然后将它传播给整个网络的邻居。</li><li id="610a" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">使用MAM在部署在google app engine上的web应用程序上获取数据——MAM接收器。</li><li id="ac8f" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">通过谷歌图表可视化(部署在谷歌应用引擎)。</li></ul><p id="1865" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">IOTA生态系统的大部分库都在github上。这意味着我们可以使用我们的包管理器快速进入。</p><p id="dcdb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由于IOTA是无许可的，我们不需要在某个地方创建一个帐户或获得任何其他授权来使用该系统。事实证明，属性“无许可”是最令人兴奋的，但也是最难的属性，以确保网络安全。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff me"><img src="../Images/efe7cc8008b93aa3673ddc0ddf9cdab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SArrNhZR8SzRstEtP73OHw.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek"><em class="mj">Overview of flow of data</em></figcaption></figure><p id="d82f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一个更加先进和完整的真实MAM用例原型已经由<a class="ae ke" rel="noopener" href="/@erwinrooijakkers/gdpr-compliant-smart-meter-data-on-the-iota-tangle-four-lessons-learned-while-putting-the-dea852a5b2aa"> Erwin Rooijakkers </a>实现并记录下来。</p><p id="dbc2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">他已经列出了当前的一些缺点，如</p><ul class=""><li id="9d67" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">您的MAM渠道不提供现成的安全授权。</li></ul><blockquote class="mk ml mm"><p id="5267" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">很可能会在即将到来的<strong class="jk hu"> MAM+ </strong>版本中推出</p></blockquote><ul class=""><li id="84b8" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">永久存储不可变数据的永久节点(服务)不可用。(拥有永久不变的加密存储的缺点及其对未来技术潜在利用它的影响。)</li></ul><blockquote class="mk ml mm"><p id="17f0" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">现在有一项服务处于测试阶段(价格可能会有变化)本文中的估计仅反映当前的定价表—2019年2月<a class="ae ke" href="https://thetangle.business" rel="noopener ugc nofollow" target="_blank">https://thetangle . business</a></p></blockquote><ul class=""><li id="d6b7" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">目前，在将消息附加到缠结之前，工作证明(PoW)(用于网络的垃圾邮件保护)的计算/能量成本相对较高。</li></ul><blockquote class="mk ml mm"><p id="141d" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">可以使用现场可编程门阵列(FPGA)进行显著优化</p></blockquote><ul class=""><li id="1a1f" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">尖端选择的计算工作量。该算法对于在发出交易之前找到待确认的两个最佳提示是必要的。</li></ul><p id="06f7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当谈到当前相对较高的功率要求时，我们有一些由<a class="ae ke" href="https://hackernoon.com/lessons-learned-from-evaluating-iota-on-internet-of-things-devices-a44575e606de" rel="noopener ugc nofollow" target="_blank"> Atis Elsts </a>和<a class="ae ke" rel="noopener" href="/@punpck/iota-crypto-core-fpga-1st-progress-report-caebe1dac579">微引擎</a>提供的更近的分析。</p><p id="ce49" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">PoW的计算工作量</strong></p><p id="12e0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">除了所有其他任务(尝试字节转换、签名等。)PoW为设备承担了最繁重的工作。在我们的RPi上，两者都显示83到90的power(不知道他们使用的是哪种power实现)。这对我们很有用，因为我们每3分钟发送一次新的测量值。</p><p id="3c2c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">做功消耗的能量</strong></p><ul class=""><li id="a9ff" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">Atis文章推导出大约55J(焦耳)的功率是1.5*10^-5千瓦时。</li><li id="9b12" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">Erwins文章为PoW的一次交易导出0，00005kWh ~180J。</li></ul><blockquote class="mk ml mm"><p id="01a3" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">据我所知，计算时间和必要的能源消耗可以减少到大约300毫秒的时候使用FPGA代替RPi。基本上是用硬件门实现PoW例程来加速计算。</p></blockquote><h2 id="4563" class="mq li ht bd lj mr ms mt ln mu mv mw lr jr mx my lt jv mz na lv jz nb nc lx nd dt translated">消息大小和TPS要求</h2><p id="5cf0" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">假设每个IOTA事务1600字节(2673 trytes ),我们需要每个MAM消息两个事务。此外，每个设备每3分钟发送一个MAM消息(这是针对我们的消息21事务)。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff ne"><img src="../Images/4757be1666ab1c3724dccbaf7daba968.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*5V1BFl9svTz8quMip17deA.png"/></div></figure><p id="eb41" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">实施#1(目前可能)</strong></p><ul class=""><li id="a769" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">完整节点执行PoW、gTTA和findTransactions(所有繁重的任务都外包了——我们需要信任这里的节点)。</li><li id="d28f" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">该节点只是从不执行快照(随着tangle网络及其所有事务的增长)。</li><li id="beb5" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">没有公钥加密的MAM实现(我们只发送加密密钥(副密钥)，例如通过电子邮件)。</li></ul><p id="ee8d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是我基于商业服务价格的估计。使用getTransactionToApprove(gTTA)-刀尖选择(每1000次执行0.3€)，然后附加Tanlge (PoW)(每100次执行1€)。此外，我还假设每个用户每天从MAM流中获取100次(findTransactions)。我们需要一个MAM消息(带有当前的有效负载和安全性)两个事务。要广播的两个事务都需要执行PoW。但是对于MAM包，我们只需要一个gTTA。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff nf"><img src="../Images/a01e7b50cbb9b2150db09d569143723f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*SGYejBlooRbP20kqWNBtCw.png"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Cost for the use case for implementation #1</figcaption></figure><p id="9f93" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是一个很高的价格，对于我们的用例来说，现在可能不值得遵循。</p><p id="b19f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">实施#2(目前可能)</strong></p><ul class=""><li id="e8bd" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">我们的RPi设备在大约90秒/个事务中执行PoW。对于我们的MAM消息，这需要大约180秒。能源成本将由设备持有者承担。</li><li id="2ba4" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">节点在100天后执行本地快照(快照后数据会丢失)，这意味着我们会丢失较旧的数据。<em class="kf">我们只是使用来自angle.business </em>的permanode服务进行成本估算。</li><li id="5065" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">用自制密钥加密交换的MAM实现(希望是量子证明)。</li></ul><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/636cce043221279b0733207d0a990f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*9Po6Law2UfyIwc_7jQ2_5g.png"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Estimation of cost for Implementation #2</figcaption></figure><p id="aa57" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">估计基于gTTA和findTransactions的角度.业务费率。PoW是在RPi上完成的，并且试图仅近似PoW所需的那部分能量(知道RPi无论如何都必须全时运行)。对于一个设备来说，它被假定保持在总是免费的限度内，但是仅仅花费用户额外的能量成本。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/4cca1f6d93e42e077e8e3ebf3413b703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*9bSoNbFY1_x__lz_yuNybQ.png"/></div></figure><p id="9881" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我仍然相信，使用优化的硬件和软件<strong class="jk hu"> K1 </strong>可以进一步降低价格。正如前面所指出的，这都是测试和早期。<br/>说到软点，我经历了一些困难，以找出哪些库是最新的，可以使用。不和谐的聊天和社区在这里真的很有帮助，当被卡住的时候<strong class="jk hu"> K3 </strong>。我特别喜欢从基金会转移到限制聊天到更多与开发相关的话题，而不是让它淹没在IOTA令牌的价格谈判中。就在最近，文档也有了新的面貌。现在，开发会谈甚至可以在聊天中实时跟踪——这非常有趣！开箱即用的功能都是可用的，或者正在以各种编程语言构建——但是还没有真正的基于图形用户界面的平台。</p><p id="6cac" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当涉及到我们的特定用例(环境传感器数据的可视化)时，将每一个测量值存储在一堆数据上并在那里对其进行可视化有点太戏剧化了。但是，当你想象医院有必要(根据法律)测量污染水平时——用于审计跟踪的不可变分类账可能会变得更有趣(成本和价值方面)。</p><p id="1b00" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="jk hu">实施#3(未来可能的设置—欧米茄)</strong></p><ul class=""><li id="19ba" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">该设备以非常有效方式执行功率(甚至可能只有非常有限的量，少于今天所需要的)。主要保护将是网络绑定工作证明(NBPoW)。</li></ul><blockquote class="mk ml mm"><p id="ea7e" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">带宽是一种稀缺资源，自然会限制不良行为者的能力，因为保留带宽的主要部分的成本变得过于昂贵。</p></blockquote><ul class=""><li id="b31d" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">永久节点存储所有必要的事务。</li></ul><blockquote class="mk ml mm"><p id="829b" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">或者用IOTA控制的代理(ICT)分布(不是一个节点上的所有事务)，通过Iota令牌激励。或者通过IRI永久节点集中管理—通过IOTA令牌进行管理。至少这是我对它的有限理解。</p></blockquote><ul class=""><li id="8f87" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">MAM+与开箱即用的sidekey安全加密交换一起使用。</li></ul><p id="2cad" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了充分享受这个建筑，恐怕我们需要等待几年。</p></div><div class="ab cl ni nj hb nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hm hn ho hp hq"><h1 id="3703" class="lh li ht bd lj lk np lm ln lo nq lq lr iz nr ja lt jc ns jd lv jf nt jg lx ly dt translated">实现用例</h1><p id="ccd6" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">如前所述，IOTA正在积极发展。通过加入Discord聊天，你甚至可以在github上看到开发者为他们的pr交换信息。第二层协议MAM也正在朝着MAM+的方向发展。这意味着当你读到这篇文章的时候，我正在使用的库的某些部分可能已经过时了。</p><h2 id="fdad" class="mq li ht bd lj mr ms mt ln mu mv mw lr jr mx my lt jv mz na lv jz nb nc lx nd dt translated">在公共MAM信道上发送消息</h2><p id="f195" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">在RPi上</p><pre class="kh ki kj kk fq nu nv nw nx aw ny dt"><span id="1496" class="mq li ht nv b fv nz oa l ob oc"><strong class="nv hu">pi@raspberrypi:~/tmmiot $</strong><br/>mkdir IOTA</span><span id="bd9d" class="mq li ht nv b fv od oa l ob oc"><strong class="nv hu">pi@raspberrypi:~/tmmiot/IOTA $</strong><br/>git clone <a class="ae ke" href="https://github.com/jhab82/tmmiot-IOTA-agent.git" rel="noopener ugc nofollow" target="_blank">https://github.com/jhab82/tmmiot-IOTA-agent.git</a></span><span id="9663" class="mq li ht nv b fv od oa l ob oc"><strong class="nv hu">pi@raspberrypi:~/tmmiot/IOTA/tmmiot-IOTA-agent $</strong><br/>npm install</span></pre><p id="0129" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在我们传输传感器数据之前，让我们先尝试发送一条消息，了解一下MAM提供的不同选项。</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="oe of l"/></div></figure><p id="21fe" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">上面的代码初始化了创建MAM通道所必需的MAM对象(对于那些喜欢深入研究这种默克尔树结构的人来说，可以尝试使用短的<a class="ae ke" href="https://github.com/l3wi/mam.client.js/blob/master/docs/overview.md" rel="noopener ugc nofollow" target="_blank">或长的</a><a class="ae ke" rel="noopener" href="/coinmonks/iota-mam-eloquently-explained-d7505863b413"/></p><p id="5370" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们需要IOTA javascript库<code class="eh og oh oi nv b">const IOTA = require(’iota.lib.js’)</code>，它允许我们创建事务并将工作外包给IOTA服务器(完整节点)。这些服务器是分布式的，大多是运行IOTA参考软件(IRI)的虚拟专用服务器VPS(在AWS、Google Cloud或Azure上)。所谓的全节点是当前IOTA网络的主干。</p><blockquote class="oj"><p id="927f" class="ok ol ht bd om on oo op oq or os kd ek translated">IOTA的开发考虑到了未来物联网的网状网络环境。当前的网络试图通过手动对等和计算能力等措施来模拟性能。</p></blockquote><figure class="ou ov ow ox oy kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff ot"><img src="../Images/c0b2e1151db58da8df0a7e0d9b15d8e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bnyt8PCkFhjrgzYxDz1QrQ.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek"><a class="ae ke" href="https://www.iota.org/get-started/faqs" rel="noopener ugc nofollow" target="_blank">https://www.iota.org/get-started/faqs</a></figcaption></figure><p id="1980" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">由于我们自己没有安装完整的节点，我们使用公共可用的完整节点及其公开的API将我们的消息附加到tangle。由于我们处于开发阶段，我们当然会使用IOTA基金会提供的开发纠结<code class="eh og oh oi nv b">https://nodes.devnet.thetangle.org</code></p><p id="6d9e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">此外，我们用IOTA provider <code class="eh og oh oi nv b">Mam.init(iota, undefined, 1)</code>初始化我们的MAM对象，并将其定义为最低安全性，并将其更改为public。妈妈可以</p><ul class=""><li id="ba74" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated"><strong class="jk hu"> public </strong>(意思是每个有地址的人——我们在这里称之为根地址——都可以读取流)和</li><li id="06d4" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated"><strong class="jk hu">受限</strong>(仅具有发布者选择的根地址和密码(侧密钥))以及</li><li id="5fc2" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated"><strong class="jk hu">私人</strong>(仅限种子持有者)。</li></ul><p id="3844" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这已经是对IOTA生态系统所使用的单词和短语的深入探究了。别担心，虽然我们还没有触及这项复杂事业的表面😄但是数据的加入非常快。</p><p id="454a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在代码中，我们有一个异步发布函数，它将我们的有效载荷转换为trytes，并通过<code class="eh og oh oi nv b">Mam.attach</code>将其附加到tangle。在这里，完整节点承担了寻找两个tip以确认(gTTA)用这些tip执行PoW的繁重工作。在RPi上，构建事务(如果是私有的或受限的，也要签名),然后发送到广播。</p><pre class="kh ki kj kk fq nu nv nw nx aw ny dt"><span id="f26f" class="mq li ht nv b fv nz oa l ob oc"><strong class="nv hu">pi@raspberrypi:~/tmmiot/IOTA/tmmiot-IOTA-agent $</strong><br/>node mam_min_publish.js</span></pre><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff oz"><img src="../Images/f938a074865bed160516e5409f4f6f11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sAnOwEf6ee6r3yr-"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Feedback of the channel-id / root / address</figcaption></figure><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff oz"><img src="../Images/61f896a0db0331d7e5c204f54fc0d706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gR1M6Bz3sxdalV74"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">RTPSMMSRXHS9TKHVNJ9B9KPVJSVOET9JRJVPVTZJTVCYZVKXVIWBLWIKAQCGNKBVJMEEA9GWVQEGGTOHKLLTWDD9WD</figcaption></figure><p id="3a9e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们的一条消息需要两个IOTA事务。如果您将有效负载的大小增加到IOTA事务的限制之上(根据<a class="ae ke" href="https://docs.iota.org/introduction/iota-token/anatomy-of-a-transaction" rel="noopener ugc nofollow" target="_blank">iota.org</a>您可以在这个消息中存储2187个trytes)或者更改安全设置，那么每个MAM消息将需要更多的事务。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff oz"><img src="../Images/a8a0917641db161f22e754a39aeb1bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LO48jbkN2dopYAzi"/></div></div></figure><p id="d9b0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">tangle explorer显示我们已经创建了两个立即得到确认的事务。</p><p id="89df" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在IOTA中，每个事务都需要验证另外两个事务(这两个要确认的事务可以通过tip选择或getTransactionToApprove (gTTA)函数找到)。当涉及到零价值交易时，他们不需要任何验证。一旦他们被广播到tangle，他们就会被接受。与价值交易相反，价值交易只有在经过他人验证后才能得到确认(基本上是确保价值没有被创造或删除——不包括双重花费)。</p><p id="0a96" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了保护网络免受垃圾邮件的侵害，IOTA网络要求为每个附加的事务提供一些工作证明(PoW)。PoW需要一些计算能力，现在我们把它外包给公众可用的完整节点(幸运的是，他们通过API免费提供)。</p><p id="c204" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用公共的MAM解码器，我们得到解码的消息和作为根地址的信道ID以及下一个消息将被存储的下一个信道ID(下一个根地址)。</p><p id="b6f7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">上面的截图向我们展示了我们已经成功地存储了我们的数据，并且我们可以使用提供的根地址(channel-ID)来获取它。</p><h1 id="0c56" class="lh li ht bd lj lk ll lm ln lo lp lq lr iz ls ja lt jc lu jd lv jf lw jg lx ly dt translated">与其他实现有什么不同</h1><p id="e3ff" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">与其他两个物联网平台相反，我们没有授权、注册或必须设立账户，也没有为未来的账单提供任何信用卡信息——你现在可能会觉得太棒了，我会把我所有的数据都存储在这里。不幸的是你不能。至少不会永远那么容易。为了使完整的节点数据库保持合理的规模，需要不时地对数据库进行清理(IOTA称之为快照)。这意味着只有IOTA地址的余额被求和，并且数据库重新开始，当然对所有非零余额的状态有合理的共识。<em class="kf">所以数据根本不是不可变的？</em>确定是在节点被手动修剪之前— <strong class="jk hu">或者你有一个永久节点，它保存所有数据并让你查询(很可能像在thetangle.business中那样收费)。</strong></p><p id="da97" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">除了其他物联网平台，在这个网络中你不会有一个可以查看、更改或删除你的数据的中央权威。它不是谷歌或西门子，我的意思是授权你访问的管理员。我敢肯定，在集中组织的许可系统中，有不同的方法通过合理的权限管理和加密来限制访问的可能性，但一旦我们转向机器经济，这些方法都容易失败。</p><p id="0e50" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">IOTA中偏执型数据所有者的另一个特征是其声称的抗量子计算机加密架构。这听起来太超前了，老实说，我没有足够的知识来和你讨论后量子密码术。总之，我所理解的是，大多数公钥算法能够被足够强大的未来量子计算机破解。基于一次一密OTP的架构不容易被非常高效的量子计算强行破解。</p><p id="ed0d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">总而言之，我们有</p><ul class=""><li id="7b35" class="kt ku ht jk b jl jm jo jp jr kv jv kw jz kx kd ky kz la lb dt translated">创建了一个MAM编码的消息</li><li id="c6e0" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">通过远程电源将此消息附加到缠结上</li><li id="3b2f" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">通过公共tangle explorer接收消息(提供通道ID /根地址)</li><li id="fe9e" class="kt ku ht jk b jl lc jo ld jr le jv lf jz lg kd ky kz la lb dt translated">通过公共网络接口解码信息</li></ul><p id="4744" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当再次执行上述程序时，将生成一个新的channel-ID，使我们的消息不相关。但是我们希望能够停止我们的流，并在重新开始时恢复到相同的频道。让我们接下来做这个。</p><h1 id="be62" class="lh li ht bd lj lk ll lm ln lo lp lq lr iz ls ja lt jc lu jd lv jf lw jg lx ly dt translated">在已创建的频道上恢复发布</h1><p id="138e" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">为了恢复通道上的发布，我们需要存储下一个根地址和来自MAM对象状态(mamState)的一些其他信息(包括种子)。</p><p id="b1f5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了总是重新流整个通道，我们还需要存储第一个根地址。我已经重写了上面的代码来做到这一点。现在，我们可以在这个公共频道上恢复发布，甚至在我们的RPi出现故障后，也能够恢复该频道。</p><div class="pa pb fm fo pc pd"><a href="https://github.com/jhab82/tmmiot-IOTA-agent/blob/master/mam_resume_publish.js" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab ej"><div class="pf ab pg cl cj ph"><h2 class="bd hu fv z el pi eo ep pj er et hs dt translated">jhab 82/TMM IOTA-剂</h2><div class="pk l"><h3 class="bd b fv z el pi eo ep pj er et ek translated">tmmiot项目的MAM代理。通过在GitHub上创建帐户，为jhab82/tmmiot-IOTA代理的开发做出贡献。</h3></div><div class="pl l"><p class="bd b gc z el pi eo ep pj er et ek translated">github.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr km pd"/></div></div></a></div><p id="6aba" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">接下来，我们限制其他人查看该频道——我们需要将MAM对象更改为由选择的密码(side-key)加密。</p><h1 id="6dab" class="lh li ht bd lj lk ll lm ln lo lp lq lr iz ls ja lt jc lu jd lv jf lw jg lx ly dt translated">将频道切换到受限模式</h1><p id="58c8" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">除了创建一个密钥并将密钥转换为trytes之外，对代码只需做很少的修改:</p><pre class="kh ki kj kk fq nu nv nw nx aw ny dt"><span id="f2c8" class="mq li ht nv b fv nz oa l ob oc">const key = iota.utils.toTrytes("tmmiot-iota-sideky");</span></pre><p id="09d1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然后我们需要改变我们的mamState的模式:</p><pre class="kh ki kj kk fq nu nv nw nx aw ny dt"><span id="9963" class="mq li ht nv b fv nz oa l ob oc">mamState = Mam.changeMode(mamState, "restricted", key);</span></pre><p id="5e8e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">就是这样，从这里我们不能使用纠结浏览器，但另一个浏览器来查看我们的限制频道。查看现在为每个新频道创建的mamChannelRoot.json，我们拥有请求流的所有信息。</p><pre class="kh ki kj kk fq nu nv nw nx aw ny dt"><span id="63e9" class="mq li ht nv b fv nz oa l ob oc">{"subscribed":[],"channel":{"side_key":"HDADADXCCDHDRAXCCDHDPCRAGDXCSCTCZCMD","mode":"restricted","next_root":"DKMVKBRGITNGLVEZPOGASILFTIRK9KFJHBKJESQKFIYMGOJLFQKWKFMGIPASCNNTBGR9ITJRQGYJSJILS","security":1,"start":1,"count":1,"next_count":1,"index":0},"seed":"UJHR9SDKXUOBNVHDGDXKPUBCABGPXDWAATCKITOTQRQSJJCBXONMZVDVKZDPPYXNZYLTQMHHJ9SISIDJF"}</span></pre><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff ps"><img src="../Images/c2a1558317f82e277e4694cc9b43fdee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2U9Ewc7twckui30C2XEqg.png"/></div></div></figure><p id="e201" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当我们恢复提要时，我们得到更多的条目。</p><h1 id="40ff" class="lh li ht bd lj lk ll lm ln lo lp lq lr iz ls ja lt jc lu jd lv jf lw jg lx ly dt translated">将传感器数据添加到代理</h1><p id="891d" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">就像我们为Google和MindSphere中的其他代理所做的那样添加包。</p><div class="pa pb fm fo pc pd"><a href="https://github.com/jhab82/tmmiot-IOTA-agent/blob/master/tmmiot_mam_publish.js" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab ej"><div class="pf ab pg cl cj ph"><h2 class="bd hu fv z el pi eo ep pj er et hs dt translated">jhab 82/TMM IOTA-剂</h2><div class="pk l"><h3 class="bd b fv z el pi eo ep pj er et ek translated">tmmiot项目的MAM代理。通过在GitHub上创建帐户，为jhab82/tmmiot-IOTA代理的开发做出贡献。</h3></div><div class="pl l"><p class="bd b gc z el pi eo ep pj er et ek translated">github.com</p></div></div><div class="pm l"><div class="pt l po pp pq pm pr km pd"/></div></div></a></div><pre class="kh ki kj kk fq nu nv nw nx aw ny dt"><span id="3767" class="mq li ht nv b fv nz oa l ob oc"><strong class="nv hu">const</strong> rpiDhtSensor = require(‘rpi-dht-sensor’); <br/>//DHT sensor com package<br/><strong class="nv hu">var</strong> dht = <strong class="nv hu">new</strong> rpiDhtSensor.DHT22(4); //on GPIO 4</span><span id="b452" class="mq li ht nv b fv od oa l ob oc"><strong class="nv hu">const</strong> Sensor = require(‘sds011-client’);//PM sensor com package <br/><strong class="nv hu">const</strong> sensor = <strong class="nv hu">new</strong> Sensor(“/dev/ttyUSB0”); <br/>// Use your system path of SDS011 sensor.</span><span id="6c44" class="mq li ht nv b fv od oa l ob oc">sensor.setReportingMode(‘query’); //set the PM sensor to query mode<br/>sensor.setWorkingPeriod(3); //set the interval to 3min.</span></pre><p id="a21d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">并查询我们的PM传感器。我们每三分钟收到一次。然后发布到我们的频道。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff pu"><img src="../Images/b8f4a428031b450a766ade6d66dad92d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g5amUp7X06lnPQwv"/></div></div></figure><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff oz"><img src="../Images/3687a35b21078734799d565e7b1f6ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ozSWZfQC_752GoPH"/></div></div></figure><p id="0e63" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">太棒了——我们可以运行这个nohup并离开房间，并且可以放心地知道我们会将传感器数据安全地、不变地存储在tangle中。</p><p id="dd73" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">记住这一点——我们的RPi并没有做很多工作。它每3分钟获取一次传感器数据，并由此创建一个MAM对象，然后将所有的努力工作发送到完整的节点，这为我们提供了查找事务的机会，以确认是否执行PoW并将消息附加到tangle。</p><p id="2171" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">可能devnet全节点是负载平衡虚拟专用服务器(VPS)——为我们提供了一个进入tangle devnet的入口点。但它也可以是硬件优化的集群，提供非常环保高效的服务。</p><h1 id="c2f7" class="lh li ht bd lj lk ll lm ln lo lp lq lr iz ls ja lt jc lu jd lv jf lw jg lx ly dt translated">数据可视化</h1><p id="1b50" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">与<a class="ae ke" rel="noopener" href="/coinmonks/tell-me-more-internet-of-things-part-2-google-cloud-iot-cost-and-value-comparison-38bfb20d94e1">第2部分</a>中的谷歌云实现相比，我们还没有看到一个旧的学校数据库，可以用SQL查询该数据库，以获得可视化各种指标所需的所有信息。有了MindSphere，还没有可用的API或GUI来查询机载数据——我们只是看到了我们自己的传感器数据的预定义可视化。两个物联网平台都没有准备好搭载新的环境传感器——它们都是完全许可的。管理员需要对它们进行授权(如图所示)。当然，我们需要自动化入职流程，但目前都是手动许可的。</p><p id="fb74" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">有了IOTA，每个人都可以单独携带他们的数据，并遵循上述指南来解决同样的问题。但是，为了获得来自所有传感器(100、1000和10.000)的所有数据，我们需要进一步思考。</p><p id="ceb3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当然，我们可以实现一个能够存储单个根地址和它们的侧密钥的市场(可能通过向所有者提供一点现金或者更好的IOTA令牌)，但这可能是为了后面的章节(类似于<a class="ae ke" href="http://data.iota.org" rel="noopener ugc nofollow" target="_blank">data.iota.org</a>)。现在我们假设我们知道所有的根地址和它们的侧键。</p><p id="908d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">接下来，我构建了一个简单的google chart应用程序，能够从混乱中获取数据(通过提供您的根键——类似于我们查询数据的firebase应用程序，但不是列出变量并将它们写入图表。)</p><h2 id="bb1b" class="mq li ht bd lj mr ms mt ln mu mv mw lr jr mx my lt jv mz na lv jz nb nc lx nd dt translated">MAM流的可视化</h2><p id="9cdc" class="pw-post-body-paragraph ji jj ht jk b jl lz iu jn jo ma ix jq jr mb jt ju jv mc jx jy jz md kb kc kd hm dt translated">我已经写了一个非常粗略的可视化的公共MAM流</p><div class="pa pb fm fo pc pd"><a href="https://github.com/jhab82/iota-mam-visualization" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab ej"><div class="pf ab pg cl cj ph"><h2 class="bd hu fv z el pi eo ep pj er et hs dt translated">jhab 82/iota-mam-可视化</h2><div class="pk l"><h3 class="bd b fv z el pi eo ep pj er et ek translated">在google折线图中MAM传感器数据的可视化-jhab 82/iota-MAM-可视化</h3></div><div class="pl l"><p class="bd b gc z el pi eo ep pj er et ek translated">github.com</p></div></div><div class="pm l"><div class="pv l po pp pq pm pr km pd"/></div></div></a></div><p id="8739" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">而在数据库中，您可以查询过滤对象(例如设备)的最近10个条目。有了MAM，你需要从头开始一直跑到最后。因为消息的下一个根是从实际根派生出来的。</p><p id="a909" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">有一天，我将我的传感器数据流式传输到了现在有480个有效载荷不可变地存储在这个分布式分类账中的混乱中。为了可视化这个并不断更新流，我需要在某个地方存储我的根地址，否则我需要从头到尾通过计算量很大的MAM运行。</p><blockquote class="mk ml mm"><p id="a8f3" class="ji jj kf jk b jl jm iu jn jo jp ix jq mn js jt ju mo jw jx jy mp ka kb kc kd hm dt translated">已经有了其他的MAM实现，比如<a class="ae ke" rel="noopener" href="/@lamberti.robin/random-access-authenticated-messaging-45a5f40f2532"> RAAM </a>。此外，如前所述，基金会议程上有一个MAM+项目，可能会有额外的功能。</p></blockquote><p id="51d7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">但这是当前的MAM实现。或者我应该说，我希望是现在。为了减少计算量，我们只导出下一条消息，并临时存储下一个根。用户可以手动执行以解码该流中的下一条消息。</p><p id="d29f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我已经切换回了一个公共的MAM流(只是因为我不知道如何在这个后端实现上安全地请求sidekey)。我应该在客户端实现它(也许下一步)。</p><p id="e169" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">获取单个MAM消息和路由器的后端函数的代码片段。</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="oe of l"/></div></figure><p id="be10" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><a class="ae ke" href="https://iota-mam-vis-app-dot-tell-me-more-iot.appspot.com/" rel="noopener ugc nofollow" target="_blank">https://iota-mam-vis-app-dot-tell-me-more-iot.appspot.com/</a></p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff pw"><img src="../Images/5fece16a5898d12ed7d4e6a4a60b2fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zkTSAOUllSVRUgXs"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Animated (GIF) for the implemented visualization of an MAM sensor stream</figcaption></figure></div><div class="ab cl ni nj hb nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hm hn ho hp hq"><p id="1b40" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我喜欢你的评论、更正和建议👌。</p><blockquote class="oj"><p id="f643" class="ok ol ht bd om on oo op oq or os kd ek translated"><a class="ae ke" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ou ov ow ox oy kl fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff px"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>