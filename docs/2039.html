<html>
<head>
<title>Private Ethereum By Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">私人以太坊举例</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/private-ethereum-by-example-b77063bb634f?source=collection_archive---------0-----------------------#2019-02-05">https://medium.com/coinmonks/private-ethereum-by-example-b77063bb634f?source=collection_archive---------0-----------------------#2019-02-05</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="f2bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">私人<em class="jo">以太坊</em>示例使用权威共识证明，而不是更熟悉的工作共识证明。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/42c2e45b3a67b5d0b98f785352ab82b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vdi67cIDI3Bk3vVVC4mG9Q.jpeg"/></div></div></figure><p id="af80" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，对<em class="jo"> Adeyemi Toluhi </em>的文章<a class="ae kb" rel="noopener" href="/coinmonks/ethereum-setting-up-a-private-blockchain-67bbb96cf4f1"> <em class="jo">以太坊:建立私有区块链</em> </a>大声疾呼，因为它对我写这篇文章很有帮助。</p><p id="925b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">私人以太坊</strong></p><p id="65fe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">私人<em class="jo">以太坊</em>是私人区块链的一个例子；由<em class="jo">以太坊</em>创始人描述。</p><blockquote class="kc kd ke"><p id="bd02" class="iq ir jo is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">从本质上讲，除了拥有完全公开且不受控制的网络和受密码经济学保护的状态机(如工作证明、利益证明)，还可以创建一个系统，其中访问权限受到更严格的控制，修改甚至读取区块链状态的权限仅限于少数用户，同时仍保持区块链提供的多种部分真实性和分散性保证。</p></blockquote><p id="2a52" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo"> —维塔利克·布特林— </em> <a class="ae kb" href="https://www.coindesk.com/vitalik-buterin-on-public-and-private-blockchains" rel="noopener ugc nofollow" target="_blank"> <em class="jo">论公私区块链</em> </a></p><blockquote class="ki"><p id="9692" class="kj kk ht bd kl km kn ko kp kq kr jn ek translated">还念:最好的以太坊<a class="ae kb" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></p></blockquote><p id="87f7" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hm dt translated"><strong class="is hu">授权证明</strong></p><p id="e1e6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于<em class="jo">以太坊</em>，<em class="jo">集团</em>协议是一个更广泛的<em class="jo">权威证明</em>共识机制<em class="jo"> : </em>的例子</p><blockquote class="kc kd ke"><p id="2aee" class="iq ir jo is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">对于那些不知道PoA如何工作的人来说，它是一个非常简单的协议，其中不是矿工们竞相寻找一个难题的解决方案，而是授权的签名者可以随时根据自己的判断创建新的块。</p><p id="500a" class="iq ir jo is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">这些挑战围绕着如何控制铸造频率、如何在不同的签名者之间分配铸造负载(和机会)以及如何动态地调整签名者的列表..</p></blockquote><p id="fc08" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo"> —以太坊— </em> <a class="ae kb" href="https://github.com/ethereum/EIPs/issues/225" rel="noopener ugc nofollow" target="_blank"> <em class="jo">小团体PoA协议&amp; Rinkeby PoA testnet </em> </a></p><p id="c6da" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">例子</strong></p><p id="e327" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将构建一个私有的<em class="jo">以太坊</em>区块链，运行在由三个节点组成的网络上；每个人都有自己的账户。其中一个账户被指定为授权账户，又名密封账户。</p><p id="ad4e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，我们将在区块链上创建并运行<em class="jo">以太坊</em> <a class="ae kb" href="https://www.ethereum.org/greeter" rel="noopener ugc nofollow" target="_blank"> <em class="jo">欢迎者</em>智能合约示例</a>。</p><p id="e171" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">先决条件(可选)</strong></p><p id="70f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想跟随，你需要安装<a class="ae kb" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"><em class="jo">Docker</em></a>；我们将使用<em class="jo">码头</em>集装箱做一切事情。</p><p id="e0c8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">节点</strong></p><p id="6337" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第一步是使用<a class="ae kb" href="https://geth.ethereum.org/install/#run-inside-docker-container" rel="noopener ugc nofollow" target="_blank"><em class="jo">ether eum/client-go:all tools-stable</em></a>映像创建三个节点作为<em class="jo"> Docker </em>容器(我们使用较大的映像，因为我们需要额外的工具来<em class="jo"> Geth </em>)。我们在三个终端中分别运行以下命令:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="bbd1" class="lc ld ht ky b fv le lf l lg lh">docker run -it ethereum/client-go:alltools-stable</span></pre><p id="045b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="2196" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated"><em class="jo"> -it </em>选项使<em class="jo"> Docker </em>容器具有交互性</li><li id="0e23" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">为了帮助跟踪每个节点，我为每个终端使用了不同的颜色。</li></ul><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/f071aac0dbf388c0dfe089c036c93385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmVp9xRyTbgu2a-XZc9JSQ.png"/></div></div></figure><p id="5871" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">账目</strong></p><p id="0c77" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在每个节点中，我们执行以下命令；为以后的用户复制帐户地址:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="6da3" class="lc ld ht ky b fv le lf l lg lh">geth --datadir ./datadir account new</span></pre><p id="e739" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="693e" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">如果您稍后需要查找地址，可以在<em class="jo">数据目录/密钥库</em>文件夹中的文件(每个帐户一个)中找到</li></ul><p id="5d07" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">创世纪区块</strong></p><p id="0ffe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们接下来创建创世纪模块:</p><blockquote class="kc kd ke"><p id="25ee" class="iq ir jo is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">每一个区块链都必须从某个地方开始，所以在开始的时候有一个所谓的创世街区。这是第一块，以太坊的创建者可以自由地说“首先，下面的账户都有X单位的我的加密货币。”区块链上乙醚的任何转移将源自这些初始账户中的一个(或来自采矿)。</p></blockquote><p id="568e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo">—Brandon Arvanaghi—</em><a class="ae kb" href="https://arvanaghi.com/blog/explaining-the-genesis-block-in-ethereum/" rel="noopener ugc nofollow" target="_blank"><em class="jo">讲解以太坊</em> </a>中的创世纪板块</p><p id="bd35" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里我们使用<em class="jo"> Docker </em>图像中的一个附加工具；在其中一个节点上执行以下命令<strong class="is hu">。</strong></p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="a9e2" class="lc ld ht ky b fv le lf l lg lh">puppeth</span></pre><p id="aa74" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="9429" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">该工具有一个交互式向导界面</li><li id="ba1e" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">虽然这个工具有其他功能，但我们将只使用它来生成genesis文件</li></ul><p id="fb58" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">步骤:</p><ol class=""><li id="b435" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn lw lo lp lq dt translated">提供一个<em class="jo">网络名</em>；该值是该工具的内部值，否则没有意义</li><li id="86a0" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择<em class="jo">配置新起源</em>选项</li><li id="f339" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择<em class="jo">从头创建新的起源</em>选项</li><li id="3a6b" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择<em class="jo">集团—授权证明</em>选项</li><li id="0c29" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">保留问题<em class="jo">的默认值(15 ),阻塞需要多少秒？</em></li><li id="39b9" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">在<em class="jo">上哪些账户允许封存？</em>，提供其中一个账户的地址(将是权限)；我使用了黑色窗口中节点上的帐户</li><li id="8343" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">在<em class="jo">上，哪些账户应该预先拨款？</em>，提供全部三个账户地址</li><li id="b453" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择默认(是)到<em class="jo">应该预编译地址(0x1..0xff)被预资助1魏？</em></li><li id="d927" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">提供一个随机数(默认)给<em class="jo">指定你的链/网络ID… </em></li><li id="28e0" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择<em class="jo">管理现有起源</em>选项</li><li id="de85" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择<em class="jo">导出起源配置</em>选项</li><li id="6d92" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">选择<em class="jo">的默认(空)文件夹来保存genesis规格？</em></li><li id="34cb" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn lw lo lp lq dt translated">按下<em class="jo"> Ctrl+c </em>退出<em class="jo"> puppeth </em></li></ol><p id="28d9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="d45b" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">不知道<em class="jo">预编译地址</em>是什么；找不到关于他们的信息</li><li id="fb23" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">不用担心创建<em class="jo">第一链</em>和<em class="jo">第二链</em>规格的错误；反正我们不需要它们</li><li id="2324" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">继续删除生成的以<em class="jo"> -harmony.json </em>结尾的文件</li><li id="135b" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">为了清楚起见，将另一个生成的文件重命名为<em class="jo"> genesis.json </em></li></ul><p id="5b23" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo"> genesis.json </em></p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="88a6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="ce98" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">为了可读性，我删除了与<em class="jo">预编译地址</em>相关的大部分分配</li><li id="9577" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">文章<a class="ae kb" href="https://arvanaghi.com/blog/explaining-the-genesis-block-in-ethereum/" rel="noopener ugc nofollow" target="_blank"> <em class="jo">解释了以太坊</em> </a> <em class="jo"> </em>中的创世纪块，很好地描述了这个文件中的所有信息</li><li id="2214" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">由于<em class="jo"> eth </em>货币与专用网络无关，我们预先分配了每个具有巨大(几乎无限)余额的账户(使用授权证明)；虽然<em class="jo">以太坊</em>还是需要它来操作。与此同时，不清楚我们应该如何管理新账户的余额。嗯？</li></ul><p id="734c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们现在将这个文件复制到另外两个节点中；在我的例子中，我使用<em class="jo"> cat </em>来列出文件，选择我使用机器的copy ( <em class="jo"> cntl+c </em>)命令的输出，并粘贴到其他两个节点上打开的<em class="jo"> vi </em>编辑器中。</p><p id="8abc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意</strong> : IMHO，会用<a class="ae kb" href="https://www.ccsf.edu/Pub/Fac/vi.html" rel="noopener ugc nofollow" target="_blank"> <em class="jo"> vi </em> </a>是必须的；就像知道如何打字一样。</p><p id="e0ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后，在每个节点上，我们执行:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="e570" class="lc ld ht ky b fv le lf l lg lh">geth --datadir ./datadir init genesis.json</span></pre><p id="9c82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">启动客户端</strong></p><p id="5923" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们使用以下命令启动节点上的客户端(没有授权帐户):</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="8ca6" class="lc ld ht ky b fv le lf l lg lh">geth --datadir ./datadir --nat extip:`hostname -i` console</span></pre><p id="b5b7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="c1e0" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">默认情况下，客户端试图确定一个公共IP地址进行通信(因为<em class="jo">以太坊</em>是一个对等网络)；然而，我们运行的是私有网络(因此需要使用<em class="jo"> nat </em>选项)</li><li id="b36d" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><em class="jo"> UNIX </em></li></ul><p id="0e78" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于我们想要在节点上的客户机上登录(也称为解锁)授权帐户(使用授权帐户)，我们首先使用帐户的密码创建一个文件<em class="jo"> password.txt </em>，然后执行:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="155e" class="lc ld ht ky b fv le lf l lg lh">geth --datadir ./datadir --nat extip:`hostname -i` --unlock 0 --password password.txt console</span></pre><p id="9195" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="c2ae" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">帐户在零索引数组中维护；因此，第一个也是唯一一个帐户的值为0</li></ul><p id="9806" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">添加同行</strong></p><p id="45ea" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">由于客户端开始于相同的起源块(因此具有相同的链id ),因此它们可以参与相同的区块链。同时，按照配置，客户端不能发现彼此；我们需要手动添加它们的对等关系。</p><p id="a6d3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注</strong>:另一种方法，首选，是设置另一个节点作为引导节点；<a class="ae kb" href="https://github.com/ethereum/go-ethereum/wiki/Private-network" rel="noopener ugc nofollow" target="_blank">中描述<em class="jo">以太坊:专网</em>。</a></p><p id="d9a1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们在每个客户端上运行以下命令来获取其地址:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="14b6" class="lc ld ht ky b fv le lf l lg lh">admin.nodeInfo.enode</span></pre><p id="20f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在三个节点的情况下，我们有三个对等关系；因此，我们需要执行下面的命令三次(将由您来决定客户端和订单):</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="d443" class="lc ld ht ky b fv le lf l lg lh">admin.addPeer('[CLIENT-ADDRESS]')</span></pre><p id="eaf1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意</strong>:这就是为什么使用引导节点是首选。</p><p id="b5cb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们可以使用以下命令来验证对等体:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="7dfa" class="lc ld ht ky b fv le lf l lg lh">admin.peers</span></pre><p id="d2bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">启动矿工</strong></p><p id="e1fc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">虽然我们在技术上不是在挖掘，但是我们使用了授权证明，我们仍然需要使用授权帐户登录的客户端持续生成块；否则，我们创建的交易将不会添加到区块链中。</p><p id="0258" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注意</strong>:我觉得不断创建没有事务的块很奇怪。嗯？</p><p id="8faa" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们在拥有authority帐户的客户机上执行以下命令，开始挖掘:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="1550" class="lc ld ht ky b fv le lf l lg lh">miner.start(1)</span></pre><p id="7e77" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="164e" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated"><em class="jo"> 1 </em>参数表示我们正在使用单线程</li><li id="4406" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">如果一切顺利，每隔15秒，我们就会看到一个新的区块被创建；记录每个客户端的输出</li></ul><p id="0081" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">创建智能合同</strong></p><p id="3431" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">按照<a class="ae kb" href="https://www.ethereum.org/greeter" rel="noopener ugc nofollow" target="_blank"> <em class="jo">以太坊的说明:创建一个数字迎宾员</em> </a>创建一个智能合同示例:</p><blockquote class="kc kd ke"><p id="82c2" class="iq ir jo is b it iu iv iw ix iy iz ja kf jc jd je kg jg jh ji kh jk jl jm jn hm dt translated">智能合约是以太坊区块链上的账户持有对象。它们包含代码功能，可以与其他契约交互，做出决策，存储数据，并向其他人发送以太网。契约是由它们的创建者定义的，但是它们的执行，以及它们提供的服务，是由以太网本身提供的。只要整个网络存在，它们就将存在并可执行，只有当它们被编程为自毁时才会消失。</p></blockquote><p id="6442" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jo"> —以太坊— </em> <a class="ae kb" href="https://www.ethereum.org/greeter" rel="noopener ugc nofollow" target="_blank"> <em class="jo">创建一个数字迎宾</em> </a></p><p id="40fe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">构建神器，从<em class="jo"> Remix </em>，我们需要的是<em class="jo">JavaScript</em><em class="jo">web 3 deploy</em>代码；复制到两个客户端之一的文件中，例如<em class="jo"> Greeter.js </em>(没有权限帐户)。</p><p id="75d2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们还需要更新<em class="jo">JavaScript</em><em class="jo">web 3 deploy</em>代码的第一行，为<em class="jo"> Greeter </em>构造函数提供所需的<em class="jo"> _greeting </em>参数。</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="04e5" class="lc ld ht ky b fv le lf l lg lh">var _greeting = "Hello World!";<br/>...</span></pre><p id="453b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最简单的方法是使用<em class="jo"> exit </em>命令终止客户端，创建文件，重启客户端(如上)，并添加回两个对等关系(如上)。</p><p id="55af" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">注</strong>:开始希望我们设置引导节点。</p><p id="b67c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">部署智能合同</strong></p><p id="ab90" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了部署智能合约，我们需要在客户端(在具有<em class="jo"> Greeter.js </em>文件的节点上)登录(解锁)帐户(具有足够的<em class="jo"> eth </em>):</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="6f1a" class="lc ld ht ky b fv le lf l lg lh">personal.unlockAccount(eth.accounts[0], '[PASSWORD]')</span></pre><p id="9226" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察:</p><ul class=""><li id="10b7" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">同样，帐户在一个零索引数组中维护；因此，第一个也是唯一一个帐户为0(在此节点上)</li><li id="ec4d" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">当帐户在客户端解锁时，它会在一分钟左右自动注销(锁定)</li></ul><p id="7e48" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后，我们可以使用以下命令部署智能合约:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="e8c4" class="lc ld ht ky b fv le lf l lg lh">loadScript('Greeter.js')</span></pre><p id="8d91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">提交后，miner客户端会定期(每15秒)将其添加到区块链中:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/b7fe2ae574a5f1f71e35412ec4b4cc1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z11w8OI2ysLXdbY_H311oA.png"/></div></figure><p id="a908" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">运行智能合同</strong></p><p id="463b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从部署智能合约的客户端，我们只需使用以下命令即可运行智能合约:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="5b9c" class="lc ld ht ky b fv le lf l lg lh">greeter.greet();</span></pre><p id="337b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">显示<em class="jo">你好世界！</em></p><p id="43ce" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">虽然其他客户端可以访问<em class="jo"> Greeter </em>智能合同(在区块链)，但是它们既没有对它的引用，也没有它的接口。</p><p id="b115" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从部署了智能合约的客户端，我们可以运行以下命令来获取智能合约的地址(在区块链)；这是参考:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="95c0" class="lc ld ht ky b fv le lf l lg lh">greeter.address</span></pre><p id="5071" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">从我们编译智能契约的地方，<em class="jo"> Remix </em>，我们复制了ABI；这是界面:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="b760" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">观察结果:</p><ul class=""><li id="b2d5" class="li lj ht is b it iu ix iy jb lk jf ll jj lm jn ln lo lp lq dt translated">这只是智能合约的接口和元信息；没有实施</li></ul><p id="0ce0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">有了接口和引用，我们就可以定义<em class="jo"> greeter </em>变量:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="e2ef" class="lc ld ht ky b fv le lf l lg lh">var greeter = eth.contract([INTERFACE]).at([REFERENCE]);</span></pre><p id="a2bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后像我们之前一样称之为:</p><pre class="jq jr js jt fq kx ky kz la aw lb dt"><span id="55d6" class="lc ld ht ky b fv le lf l lg lh">greeter.greet();</span></pre><p id="464e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">总结</strong></p><p id="4f3b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">虽然它还在我的脑海中挥之不去，但我现在已经看到了区块链(分布式账本)技术力量的一丝曙光；在这种情况下，我们能够在两个不同的帐户(组织)之间共享一段公共的不可变代码。</p><blockquote class="ki"><p id="b96c" class="kj kk ht bd kl km kn ko kp kq kr jn ek translated">加入Coinmonks <a class="ae kb" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kb" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae kb" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="lc ld ht bd ma mb mc md me mf mg mh mi jb mj mk ml jf mm mn mo jj mp mq mr ms dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="li lj ht is b it mt ix mu jb mv jf mw jj mx jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae kb" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae kb" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae kb" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="2bf3" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">购买比特币印度</a> | <a class="ae kb" rel="noopener" href="/coinmonks/pionex-review-exchange-with-crypto-trading-bot-1e459d0191ea"> Pionex评论</a> | <a class="ae kb" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></li><li id="957b" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度的加密交易所</a> | <a class="ae kb" rel="noopener" href="/coinmonks/bitcoin-savings-account-e65b13f92451">比特币储蓄账户</a></li><li id="fce2" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" href="https://coincodecap.com/cloudbet-casino-review" rel="noopener ugc nofollow" target="_blank"> Cloudbet赌场评论</a> | <a class="ae kb" href="https://coincodecap.com/ignition-casino-review" rel="noopener ugc nofollow" target="_blank">点火赌场评论</a></li><li id="a2b9" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/binance-fees-8588ec17965">币安收费</a> | <a class="ae kb" rel="noopener" href="/coinmonks/botcrypto-review-2021-build-your-own-trading-bot-coincodecap-6b8332d736c7">僵尸加密审查</a> | <a class="ae kb" rel="noopener" href="/coinmonks/hotbit-review-cd5bec41dafb">热点审查</a></li><li id="0df7" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" href="https://coincodecap.com/myconstant-review" rel="noopener ugc nofollow" target="_blank">my constant Review</a>|<a class="ae kb" href="https://coincodecap.com/best-swing-trading-bots" rel="noopener ugc nofollow" target="_blank">8款最佳摇摆交易机器人</a></li><li id="f33b" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae kb" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">开发人员的最佳加密API</a></li><li id="b359" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated">最佳<a class="ae kb" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="li lj ht is b it lr ix ls jb lt jf lu jj lv jn ln lo lp lq dt translated"><a class="ae kb" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币</a>终极指南</li></ul></div></div>    
</body>
</html>