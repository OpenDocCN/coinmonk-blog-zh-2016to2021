<html>
<head>
<title>From Role Base Access Control to a Role &amp; Permission Access Control on a Blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从基于角色的访问控制到区块链上的角色和权限访问控制</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/from-role-base-access-control-to-a-role-permission-access-control-on-blockchain-be92bb096894?source=collection_archive---------0-----------------------#2019-10-15">https://medium.com/coinmonks/from-role-base-access-control-to-a-role-permission-access-control-on-blockchain-be92bb096894?source=collection_archive---------0-----------------------#2019-10-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/74a51f3bd2ca99b39247501fe83fbffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K11Pmf3ia_4mhrQ_6_4sjA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Role &amp; Permission Access control on a Blockchain</figcaption></figure><p id="e490" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">看过<strong class="jh hu">阿尔贝托·单面山·卡尼亚达</strong>在Hackernoon发表的一篇很棒的文章“<a class="ae kd" href="https://hackernoon.com/role-based-access-control-for-the-ethereum-blockchain-bcc9dfbcfe5c" rel="noopener ugc nofollow" target="_blank">以太坊区块链的基于角色的访问控制</a>”。</p><p id="55a4" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我决定接受他的建议，在Alberto的RBAC智能合同实现中扩展功能，这不是一个简单的任务，但进一步了解solidity与数据结构(映射、数组、简单列表等)的使用相关的复杂性的更多细节是非常令人高兴的。</p><p id="6b7d" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我过去曾与solidity合作，为我的客户开发概念证明，遭受了语言的缺点，但发现很难找到人以易于理解的方式解释事情；在这方面，Julien Klepatch和他的youtube <a class="ae kd" href="https://www.youtube.com/channel/UCZM8XQjNOyG2ElPpEUtNasA/channels" rel="noopener ugc nofollow" target="_blank">频道</a>对我掌握知识非常有用。</p><p id="7ef8" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">花时间听解释，在视频和阿尔贝托的RBAC智能合同代码之间来回切换；很明显，我想开发一些功能，允许为一个地址分配权限，从而扩展对按角色分组的地址的粒度控制。</p><p id="d576" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">需要进一步研究众所周知的坚固性<a class="ae kd" href="https://ethereum.stackexchange.com/questions/13167/are-there-well-solved-and-simple-storage-patterns-for-solidity" rel="noopener ugc nofollow" target="_blank">模式</a>发现以下内容非常有用:</p><p id="cdb2" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">用结构映射</strong></p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ke"><img src="../Images/a12fa45248a73ed53951e9dfb3496f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b2Zp7jFGmae3MyysFBLhOA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Template for a Mappings with Struct and functions.</figcaption></figure><p id="0349" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">优势</strong></p><ul class=""><li id="3d70" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">通过唯一Id随机访问</li><li id="5bc2" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">身份唯一性保证</li><li id="bdd2" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">在每个“记录”中包含数组、映射、结构</li></ul><p id="d439" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">弱点</strong></p><ul class=""><li id="5471" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">无法枚举密钥</li><li id="3fd2" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">无法计算键数</li><li id="60c5" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">需要手动检查来区分默认记录和显式“全0”记录</li></ul><p id="9455" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">带索引的映射结构</strong></p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kx"><img src="../Images/13c248f61658c3c79b3872921a964dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6yA4UUbL5o-7dH2KWOhRg.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Template for a Mappings with Index and functions.</figcaption></figure><p id="b941" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">优势</strong></p><ul class=""><li id="ac0d" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">通过唯一Id或行号随机访问</li><li id="bf4d" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">身份唯一性保证</li><li id="1ed8" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">在每个“记录”中包含数组、映射和结构</li><li id="2f32" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">列表维护声明的顺序</li><li id="1423" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">清点记录</li><li id="dbce" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">枚举id</li><li id="3758" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">通过设置布尔值来“软”删除项目</li></ul><p id="29e1" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">弱点</strong></p><ul class=""><li id="a69a" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">名单不受控制的增长</li></ul><p id="890d" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">具有启用删除索引的映射结构</strong></p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ky"><img src="../Images/5f7ecafe815b883ad3d2025258c09cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n6PMEU9IIznOLNk0sPlQHg.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Template for Mapped Structs with Delete-enabled Index and functions.</figcaption></figure><p id="6d45" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">优势</strong></p><ul class=""><li id="66f7" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">通过唯一Id或行号随机访问</li><li id="8f40" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">身份唯一性保证</li><li id="34e9" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">在每个“记录”中包含数组、映射和结构</li><li id="cbdb" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">清点记录</li><li id="4e98" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">枚举id</li><li id="45c3" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">用删除功能逻辑控制活动列表的大小</li></ul><p id="04d9" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">弱点</strong></p><ul class=""><li id="c59d" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">略微增加了代码复杂性</li><li id="f5c6" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">略高的存储成本</li><li id="9e6c" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">密钥列表本质上是无序的</li></ul><p id="ddf5" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">具有唯一id的结构数组</strong></p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kz"><img src="../Images/7bedf6fde19bb4264cad67a2d64d40ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21Uxl1ewSzRVFK5-RSPS3A.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Template for Array of Struct with unique Id and functions.</figcaption></figure><p id="1a0e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">强项</strong></p><ul class=""><li id="b344" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">按行号随机存取</li><li id="f516" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">身份唯一性保证</li><li id="9ec0" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">用每个“记录”括起数组、映射和结构</li></ul><p id="6678" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh hu">弱点</strong></p><ul class=""><li id="e4df" class="kj kk ht jh b ji jj jm jn jq kl ju km jy kn kc ko kp kq kr dt translated">没有随机存取的Id</li><li id="00ac" class="kj kk ht jh b ji ks jm kt jq ku ju kv jy kw kc ko kp kq kr dt translated">名单不受控制的增长</li></ul><p id="062e" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">路径现在很清晰，并且实现了我在阿尔贝托的RBAC智能合同中设想的功能；将它放在一个名为RPAC.sol <a class="ae kd" href="https://github.com/mauriciomferz/RPAC/blob/master/RPAC.sol" rel="noopener ugc nofollow" target="_blank"> link </a>的新智能合约中</p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff la"><img src="../Images/6dfb146336777e6e3537c67bd42df275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lyVQeicPiQ6zvvEIGywTJg.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Struct Permission and iassgined, getCounterpermissionlist, newPermissionset, updatePermissions functions.</figcaption></figure><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lb"><img src="../Images/19c577c1d5273b33c66c180266d247c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GG6MNrYnaLh2uktWVuECmA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">retrieveaccountpermissions, deletePermission functions.</figcaption></figure><p id="d24d" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">新的智能合约分为三个合约。</p><blockquote class="lc ld le"><p id="1162" class="jf jg lf jh b ji jj jk jl jm jn jo jp lg jr js jt lh jv jw jx li jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ht">合同角色</em> </strong></p><p id="9d2d" class="jf jg lf jh b ji jj jk jl jm jn jo jp lg jr js jt lh jv jw jx li jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ht">合同权限</em> </strong></p><p id="59de" class="jf jg lf jh b ji jj jk jl jm jn jo jp lg jr js jt lh jv jw jx li jz ka kb kc hm dt translated"><strong class="jh hu"> <em class="ht">合同地址2角色</em> </strong></p></blockquote><p id="e419" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">Addresses2Roles继承了契约角色和权限的功能，尽管建议实现您自己的接口来与后者进行交互。</p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lj"><img src="../Images/401ea19c80f747dcbab4f47a5774fbc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJAa0NnzaKAypr_pliwXzQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd lk"><em class="ll">Contract Addresses2Roles</em></strong></figcaption></figure><p id="d230" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">结果是将权限扩展到一个地址，并按角色Id对它们进行分组。</p><blockquote class="lm"><p id="eaea" class="ln lo ht bd lp lq lr ls lt lu lv kc ek translated"><a class="ae kd" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="lx ly lz ma mb iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lw"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>