<html>
<head>
<title>Simple APIs to get Latest Uniswap Pair Listing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">获取最新Uniswap对列表的简单API</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/simple-apis-to-get-latest-uniswap-pair-listing-5806aac69185?source=collection_archive---------4-----------------------#2020-09-14">https://medium.com/coinmonks/simple-apis-to-get-latest-uniswap-pair-listing-5806aac69185?source=collection_archive---------4-----------------------#2020-09-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/4757498f9d0a7b19dfdb47f6c9ade2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QVME2lUAALmJJpMJ.png"/></div></div><figcaption class="ic id fg fe ff ie if bd b be z ek">Uniswap API</figcaption></figure><div class=""/><p id="1e71" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在上一篇文章中，我们向您展示了如何使用简单的rest APIs获得<a class="ae kd" href="https://blog.bitquery.io/dex-data-apis" rel="noopener ugc nofollow" target="_blank"> Uniswap交易</a>。今天，我们将展示如何使用一个GraphQL查询获得最新的Uniswap清单。</p><p id="1439" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在继续之前，我们先了解一下什么是Uniswap pair listing？</p><p id="ed91" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">任何人都可以在Uniswap上创建两个令牌池。在创建时，他们需要为两个令牌提供初始流动性(无论他们想要什么),以进行价格发现。该池是一个ERC20令牌智能合约，由Uniswap工厂合约创建。</p><p id="34e3" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">不用担心；随着我们的进展，我们将向你展示每样东西的例子。</p><p id="b9b0" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">现在，让我们从Uniswap获取新创建的池列表。</p><p id="4a3c" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh ij">注:</strong>本文中我们是Uniswap V2。</p><h2 id="469b" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">获取新创建的Uniswap池</h2><p id="0998" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">要获得最新的Uniswap池，我们需要运行以下GraphQL查询。这里—【https://graphql.bitquery.io/】T4。这也是我们的GraphQL APIs的端点。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="ac25" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  ethereum {<br/>    arguments(smartContractAddress: <br/>      {is: "0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f"},<br/>      smartContractEvent: {is: "PairCreated"}, <br/>      options: {desc: "block.height", limit: 3}) {<br/>      block {<br/>        height<br/>      }<br/>      argument {<br/>        name<br/>      }<br/>      reference {<br/>        address<br/>      }<br/>    }<br/>  }<br/>}</span></pre><h2 id="9e60" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated"><strong class="ak">结果</strong></h2><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="3ead" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  "data": {<br/>    "ethereum": {<br/>      "arguments": [<br/>        {<br/>          "block": {<br/>            "height": 10836664<br/>          },<br/>          "argument": {<br/>            "name": "token0"<br/>          },<br/>          "reference": {<br/>            "address": "0x930ed81ad809603baf727117385d01f04354612e"<br/>          }<br/>        },<br/>        {<br/>          "block": {<br/>            "height": 10836664<br/>          },<br/>          "argument": {<br/>            "name": "pair"<br/>          },<br/>          "reference": {<br/>            "address": "0x7bc3a77b1b8daa4bf4b38c710119b932c5b27925"<br/>          }<br/>        },<br/>        {<br/>          "block": {<br/>            "height": 10836664<br/>          },<br/>          "argument": {<br/>            "name": "token1"<br/>          },<br/>          "reference": {<br/>            "address": "0xdf5e0e81dff6faf3a7e52ba697820c5e32d806a8"<br/>          }<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</span></pre><h2 id="6bbc" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">理解查询和结果</h2><p id="bf4d" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">在此查询中，我们从Uniswap事件中提取数据。每当创建池时，Uniswap都会发出一个名为'<strong class="jh ij"> PairCreated' </strong>、带有3个主要参数的事件。</p><ul class=""><li id="2c8f" class="lr ls ii jh b ji jj jm jn jq lt ju lu jy lv kc lw lx ly lz dt translated">令牌0 —一个ERC20令牌</li><li id="28bd" class="lr ls ii jh b ji ma jm mb jq mc ju md jy me kc lw lx ly lz dt translated">令牌1 —另一个ERC20令牌</li><li id="9a3b" class="lr ls ii jh b ji ma jm mb jq mc ju md jy me kc lw lx ly lz dt translated">对—新创建的对(即池)令牌地址</li></ul><figure class="le lf lg lh fq hv fe ff paragraph-image"><div class="ab fr cl mf"><img src="../Images/515d46069117f14dcbed1d0ffe875f50.png" data-original-src="https://miro.medium.com/v2/format:webp/1*EMy-BL_WsWrHavMkgncY_A.png"/></div></figure><p id="3b9b" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">我们将在查询中使用“PairCreated”事件来获取最新的Uniswap对/池。</p><p id="cfd2" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">如果您注意到，我们在查询中使用了<a class="ae kd" href="https://explorer.bitquery.io/ethereum/smart_contract/0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f" rel="noopener ugc nofollow" target="_blank"> Uniswap Factory </a>联系地址(0x 5c 69 bee 701 ef 814 a2 b 6 a3 edd 4b 1652 CB 9 cc 5a a6 f)和一个limit 3来获取最新的3个参数。</p><p id="1810" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">正如您在结果中看到的，这些参数是令牌0地址、令牌1地址和新创建的地址对。</p><h2 id="9711" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">了解代币</h2><p id="922c" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">要了解令牌的详细信息，只需使用令牌地址运行以下查询。</p><p id="1d36" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">例如，如果我们想从上面的结果中了解token0的详细信息。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="bb86" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  ethereum {<br/>    address(address: {is: "0x930ed81ad809603baf727117385d01f04354612e"}) {<br/>      annotation<br/>      address<br/>      smartContract {<br/>        contractType<br/>        currency {<br/>          symbol<br/>          name<br/>          decimals<br/>          tokenType<br/>        }<br/>      }<br/>      balance<br/>    }<br/>  }<br/>}</span></pre><h2 id="751d" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated"><strong class="ak">结果</strong></h2><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="b382" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  "data": {<br/>    "ethereum": {<br/>      "address": [<br/>        {<br/>          "annotation": "",<br/>          "address": "0x930ed81ad809603baf727117385d01f04354612e",<br/>          "smartContract": {<br/>            "contractType": "Token",<br/>            "currency": {<br/>              "symbol": "SOLARITE",<br/>              "name": "SOLARITE",<br/>              "decimals": 18,<br/>              "tokenType": "ERC20"<br/>            }<br/>          },<br/>          "balance": 0<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</span></pre><h2 id="248b" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">学习配对(池)</h2><p id="9fd2" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">现在，让我们看一下新创建的池的一些细节。</p><h2 id="5aa9" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">获得资金池的初始流动性</h2><p id="253a" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">正如我们上面提到的，在创建一个池的同时，你需要为两个令牌提供流动性；因此，如果我们想知道池中两个令牌的初始数量，请运行以下查询。</p><p id="4493" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">这里我们得到了池(对)收到的前两个事务。</p><p id="90a0" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh ij">注</strong>:0x 7 BC 3a 77 B1 b 8 da a4 BF 4b 38 c 710119 b 932 C5 b 27925从上面的结果来看是池(对)地址。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="8f42" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  ethereum {<br/>    transfers(options: {asc: "block.timestamp.time", limit: 2}, amount: {gt: 0}, receiver: {is: "0x7bc3a77b1b8daa4bf4b38c710119b932c5b27925"}) {<br/>      block {<br/>        timestamp {<br/>          time(format: "%Y-%m-%d %H:%M:%S")<br/>        }<br/>        height<br/>      }<br/>      address: sender {<br/>        address<br/>        annotation<br/>      }<br/>      currency {<br/>        address<br/>        symbol<br/>      }<br/>      amount<br/>      transaction {<br/>        hash<br/>      }<br/>      external<br/>    }<br/>  }<br/>}</span></pre><h2 id="f35f" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">结果</h2><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="1262" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  "data": {<br/>    "ethereum": {<br/>      "transfers": [<br/>        {<br/>          "block": {<br/>            "timestamp": {<br/>              "time": "2020-09-10 22:10:16"<br/>            },<br/>            "height": 10836664<br/>          },<br/>          "address": {<br/>            "address": "0x37d50885b44500a2eacab7c93dd349590600f05f",<br/>            "annotation": null<br/>          },<br/>          "currency": {<br/>            "address": "0x930ed81ad809603baf727117385d01f04354612e",<br/>            "symbol": "SOLARITE"<br/>          },<br/>          "amount": 0.08,<br/>          "transaction": {<br/>            "hash": "0xf69e4560ae36fd2948cfe5b6a5d22654b46307fe0ef04022bc68c8a3ee55f957"<br/>          },<br/>          "external": true<br/>        },<br/>        {<br/>          "block": {<br/>            "timestamp": {<br/>              "time": "2020-09-10 22:10:16"<br/>            },<br/>            "height": 10836664<br/>          },<br/>          "address": {<br/>            "address": "0x37d50885b44500a2eacab7c93dd349590600f05f",<br/>            "annotation": null<br/>          },<br/>          "currency": {<br/>            "address": "0xdf5e0e81dff6faf3a7e52ba697820c5e32d806a8",<br/>            "symbol": "yDAI+yUSDC+yUSDT+yTUSD"<br/>          },<br/>          "amount": 200,<br/>          "transaction": {<br/>            "hash": "0xf69e4560ae36fd2948cfe5b6a5d22654b46307fe0ef04022bc68c8a3ee55f957"<br/>          },<br/>          "external": true<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</span></pre><h2 id="666b" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">获取池中不同代币的总余额</h2><p id="b684" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">假设现在您想要检查Uniswap池中两个令牌的余额。您可以使用下面的查询。</p><p id="5808" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">默认情况下，每个池/对货币名称都是“统一V2”。记住，我们提到过池本身是一个ERC20令牌。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="45f4" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  ethereum {<br/>    address(address: {is: "0x7bc3a77b1b8daa4bf4b38c710119b932c5b27925"}) {<br/>      balances {<br/>        currency {<br/>          symbol<br/>        }<br/>        value<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="104e" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh ij">结果</strong></p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="9896" class="ke kf ii lj b fv ln lo l lp lq">{<br/>  "data": {<br/>    "ethereum": {<br/>      "address": [<br/>        {<br/>          "balances": [<br/>            {<br/>              "currency": {<br/>                "symbol": "UNI-V2"<br/>              },<br/>              "value": 0<br/>            },<br/>            {<br/>              "currency": {<br/>                "symbol": "SOLARITE"<br/>              },<br/>              "value": 619.42286725<br/>            },<br/>            {<br/>              "currency": {<br/>                "symbol": "yDAI+yUSDC+yUSDT+yTUSD"<br/>              },<br/>              "value": 199915.11344483<br/>            }<br/>          ]<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</span></pre><h2 id="052b" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">包扎</h2><p id="894a" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated">我们的GraphQL APIs是高度灵活和高性能的。您可以编写GraphQL查询来从任何以太坊协议获取任何数据。在以后的文章中，我们将展示如何为不同的DeFi协议获取数据。如果您有任何问题，请通过我们的<a class="ae kd" href="https://t.me/Bloxy_info" rel="noopener ugc nofollow" target="_blank">电报</a>频道联系我们。</p><p id="1f6b" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><strong class="jh ij">亦读:</strong></p><ul class=""><li id="f853" class="lr ls ii jh b ji jj jm jn jq lt ju lu jy lv kc lw lx ly lz dt translated"><a class="ae kd" href="https://blog.bitquery.io/get-ethereum-total-supply" rel="noopener ugc nofollow" target="_blank">获取以太坊供应和数据的简单API</a></li><li id="523e" class="lr ls ii jh b ji ma jm mb jq mc ju md jy me kc lw lx ly lz dt translated"><a class="ae kd" href="https://bitquery.io/blog/etheruem-token-api" rel="noopener ugc nofollow" target="_blank">获取以太坊令牌余额的单一API</a></li><li id="cf17" class="lr ls ii jh b ji ma jm mb jq mc ju md jy me kc lw lx ly lz dt translated"><a class="ae kd" href="https://blog.bitquery.io/dex-data-apis" rel="noopener ugc nofollow" target="_blank">获取Uniswap数据的简单rest API</a>(DEX数据API)</li></ul><h2 id="7f7a" class="ke kf ii bd kg kh ki kj kk kl km kn ko jq kp kq kr ju ks kt ku jy kv kw kx ky dt translated">关于Bitquery</h2><p id="d417" class="pw-post-body-paragraph jf jg ii jh b ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy ld ka kb kc hm dt translated"><a class="ae kd" href="https://bitquery.io/?source=blog&amp;utm_medium=about_coinpath" rel="noopener ugc nofollow" target="_blank"> <strong class="jh ij"> Bitquery </strong> </a>是一套软件工具，以统一的方式解析、索引、访问、搜索和使用区块链网络上的信息。我们的产品是:</p><ul class=""><li id="4f5f" class="lr ls ii jh b ji jj jm jn jq lt ju lu jy lv kc lw lx ly lz dt translated"><a class="ae kd" href="https://bitquery.io/products/coinpath?utm_source=blog" rel="noopener ugc nofollow" target="_blank"><strong class="jh ij">coin path</strong></a><strong class="jh ij">API</strong>为超过24个区块链提供<a class="ae kd" href="https://blog.bitquery.io/coinpath-blockchain-money-flow-apis" rel="noopener ugc nofollow" target="_blank">区块链资金流分析</a>。使用Coinpath的API，您可以监控区块链交易，调查比特币洗钱等加密犯罪，并创建加密取证工具。阅读<a class="ae kd" href="https://blog.bitquery.io/coinpath-api-get-start" rel="noopener ugc nofollow" target="_blank">开始使用Coinpath </a>。</li><li id="8a4d" class="lr ls ii jh b ji ma jm mb jq mc ju md jy me kc lw lx ly lz dt translated"><a class="ae kd" href="https://bitquery.io/products/digital_assets?utm_source=blog&amp;utm_medium=about" rel="noopener ugc nofollow" target="_blank"> <strong class="jh ij">数字资产API </strong> </a>提供与所有主要加密货币、硬币和代币相关的索引信息。</li><li id="5c31" class="lr ls ii jh b ji ma jm mb jq mc ju md jy me kc lw lx ly lz dt translated"><a class="ae kd" href="https://bitquery.io/products/dex?utm_source=blog&amp;utm_medium=about" rel="noopener ugc nofollow" target="_blank"> <strong class="jh ij"> DEX API </strong> </a>提供Uniswap、Kyber Network、Airswap、Matching Network等不同DEX协议上的实时存款和交易、交易及其他相关数据。</li></ul><p id="763d" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">如果您对我们的产品有任何疑问，请通过我们的<a class="ae kd" href="https://t.me/Bloxy_info" rel="noopener ugc nofollow" target="_blank">电报频道</a>提问，或发邮件至<a class="ae kd" href="mailto:hello@bitquery.io" rel="noopener ugc nofollow" target="_blank"> hello@bitquery.io </a>联系我们。此外，请订阅我们下面的时事通讯，我们将为您提供加密货币世界的最新动态。</p></div><div class="ab cl mg mh hb mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hm hn ho hp hq"><p id="b381" class="pw-post-body-paragraph jf jg ii jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated"><em class="mn">原载于2020年9月14日</em><a class="ae kd" href="https://bitquery.io/blog/uniswap-pool-api" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://bit query . io</em></a><em class="mn">。</em></p></div></div>    
</body>
</html>