<html>
<head>
<title>How to Use EOSJS API (1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用EOSJS API (1)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/how-to-use-eosjs-api-1-770b037b22ad?source=collection_archive---------5-----------------------#2018-08-01">https://medium.com/coinmonks/how-to-use-eosjs-api-1-770b037b22ad?source=collection_archive---------5-----------------------#2018-08-01</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="890b" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">通过5个常用API学习EOSJS</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/80da1d78ba1df310c2d5bda4205ae52a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yCq0DMWGbsO5R9pRaWiSnA.png"/></div></div></figure><p id="833f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">你好，我是ITAM电视网的董军·权。在之前一篇关于“EOSJS入门”的文章中，我们讨论了如何使用EOSJS。在本帖中，我们将回顾EOSJS上常用的API，并对它们进行测试。</p><blockquote class="kq kr ks"><p id="85ac" class="ju jv kt jw b jx jy iu jz ka kb ix kc ku ke kf kg kv ki kj kk kw km kn ko kp hm dt translated">点击<a class="ae kx" href="https://github.com/EOSIO/eosjs-api/blob/master/docs/api.md#eos--object" rel="noopener ugc nofollow" target="_blank">此处</a>查看API列表</p></blockquote><h1 id="f1eb" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated"><strong class="ak">准备</strong></h1><p id="675f" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">我们将提供所有代码供使用。为了使其可用，需要进行准备。准备工作如下:</p><ol class=""><li id="3abb" class="lv lw ht jw b jx jy ka kb kd lx kh ly kl lz kp ma mb mc md dt translated">节点. js</li><li id="d080" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated">EOSJS</li></ol><p id="1754" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">请安装以上两个，并将以下内容放在javascript文件的顶部。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><p id="5e99" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">完成这些之后，编写下面的api示例，并使用node.js运行javascript来获取值。</p><blockquote class="kq kr ks"><p id="ca1d" class="ju jv kt jw b jx jy iu jz ka kb ix kc ku ke kf kg kv ki kj kk kw km kn ko kp hm dt translated">因为每个BP端点具有不同的速度和/或可靠性，我们建议您使用最适合您的BP。</p></blockquote><h1 id="f600" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated">getBlock(blockNumOrId)</h1><p id="f222" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">用于携带适用块的信息。</p><h2 id="8d25" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">参数</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mz"><img src="../Images/3e064e5213c3ae5dfa76b6ced72194cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vfLVM_IzvOsQJhUiIDG75w.png"/></div></div></figure><h2 id="1471" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">密码</h2><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><h2 id="9b78" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">结果</h2><pre class="jj jk jl jm fq na nb nc nd aw ne dt"><span id="7a34" class="ml kz ht nb b fv nf ng l nh ni">{ timestamp: '2018-06-08T08:08:08.500',<br/>  producer: '',<br/>  confirmed: 1,<br/>  previous:<br/>   '0000000000000000000000000000000000000000000000000000000000000000',<br/>  transaction_mroot:<br/>   '0000000000000000000000000000000000000000000000000000000000000000',<br/>  action_mroot:<br/>   'aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906',<br/>  schedule_version: 0,<br/>  new_producers: null,<br/>  header_extensions: [],<br/>  producer_signature:<br/>   'SIG_K1_111111111111111111111111111111111111111111111111111111111111111116uk5ne',<br/>  transactions: [],<br/>  block_extensions: [],<br/>  id:<br/>   '00000001405147477ab2f5f51cda427b638191c66d2c59aa392d5c2c98076cb0',<br/>  block_num: 1,<br/>  ref_block_prefix: 4126519930 }</span></pre><p id="1b32" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">要查看适用块中发生的活动，请查看事务。要查看事务，请执行以下操作:</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><p id="18d4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">如果您使用上面的值来查看事务，就会看到一些操作。通过查看行动，您可以更深入地了解发生的活动。</p><h1 id="5995" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated">getAccount(accountName)</h1><p id="a78a" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">用于获取EOS帐户的信息。</p><h2 id="ee28" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">参数</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nj"><img src="../Images/c52c70448bb88f857984706ebe243e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAgx8sXCmOLdKZQVEwey-w.png"/></div></div></figure><h2 id="dc2f" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">密码</h2><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><h2 id="7860" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">结果</h2><pre class="jj jk jl jm fq na nb nc nd aw ne dt"><span id="7e97" class="ml kz ht nb b fv nf ng l nh ni">{ account_name: 'itamnetwork1',<br/>  head_block_num: 8516805,<br/>  head_block_time: '2018-07-30T07:34:52.500',<br/>  privileged: false,<br/>  last_code_update: '1970-01-01T00:00:00.000',<br/>  created: '2018-07-09T02:24:58.500',<br/>  core_liquid_balance: '12.6131 EOS',<br/>  ram_quota: 14976,<br/>  net_weight: 201000,<br/>  cpu_weight: 10401000,<br/>  net_limit: { used: 1679786, available: 11108657, max: 12788443 },<br/>  cpu_limit: { used: 7950353, available: 6356380, max: 14306733 },<br/>  ram_usage: 10934,<br/>  permissions:<br/>   [ { perm_name: 'active', parent: 'owner', required_auth: [Object] },<br/>     { perm_name: 'owner', parent: '', required_auth: [Object] } ],<br/>  total_resources:<br/>   { owner: 'itamnetwork1',<br/>     net_weight: '20.1000 EOS',<br/>     cpu_weight: '1040.1000 EOS',<br/>     ram_bytes: 14976 },<br/>  self_delegated_bandwidth:<br/>   { from: 'itamnetwork1',<br/>     to: 'itamnetwork1',<br/>     net_weight: '0.1000 EOS',<br/>     cpu_weight: '0.1000 EOS' },<br/>  refund_request: null,<br/>  voter_info:<br/>   { owner: 'itamnetwork1',<br/>     proxy: '',<br/>     producers: [],<br/>     staked: 4000,<br/>     last_vote_weight: '0.00000000000000000',<br/>     proxied_vote_weight: '0.00000000000000000',<br/>     is_proxy: 0 } }</span></pre><p id="61d4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我来解释一下上面的一些结果值。</p><ol class=""><li id="3345" class="lv lw ht jw b jx jy ka kb kd lx kh ly kl lz kp ma mb mc md dt translated"><strong class="jw hu"> account_name: </strong>大家可能都已经知道了，这是EOS账户名。</li><li id="213d" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> ram_quota: </strong>我持有的ram的数量，以字节为单位。</li><li id="b7c0" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> net_limit: </strong>一个账户的净值、可用净值、已用净值的总量，以字节为单位。</li><li id="a44f" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> cpu_limit: </strong>一个账户的cpu总量，可用CPU，已用CPU，以美制计量。</li><li id="c201" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> ram_usage: </strong>账户使用的ram量，以字节为单位。</li><li id="8b1d" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> total_resources: </strong>分配给我的资源EOS。</li><li id="826d" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu">self _ delegated _ bandwidth:</strong>我委托给自己的信息。</li><li id="80fe" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> voter_info: </strong>关于投票的信息。请注意“下注”部分，它显示了我下注的金额。更确切地说，是包括我委托给自己的和别人委托给自己的价值。</li></ol><h1 id="2217" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated">getKeyAccounts(publicKey)</h1><p id="1d67" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">获取公钥的帐户。</p><h2 id="f27a" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">参数</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nk"><img src="../Images/752958d12a586566f4316909c4979e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1T0RTBqTjsjgURNmwPZ-Tw.png"/></div></div></figure><h2 id="8b72" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">密码</h2><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><h2 id="c0b5" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">结果</h2><pre class="jj jk jl jm fq na nb nc nd aw ne dt"><span id="cfcf" class="ml kz ht nb b fv nf ng l nh ni">{ account_names: [ 'itamnetwork1' ] }</span></pre><p id="89f3" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">使用一个EOS公钥可以创建多个帐户。这就是account_name的值是字符串形式的数组的原因。</p><h1 id="9ab4" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated">getCurrencyBalance(代码、帐户、符号)</h1><p id="3a6c" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">获取对应于代码符号的标记。</p><h2 id="6ae8" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">参数</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nl"><img src="../Images/8a970476df7a229de0e707d080e134ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3tOLOWzNdsT0uwOZPsEZTQ.png"/></div></div></figure><h2 id="37fb" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">密码</h2><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><h2 id="238f" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">结果</h2><pre class="jj jk jl jm fq na nb nc nd aw ne dt"><span id="7043" class="ml kz ht nb b fv nf ng l nh ni">[ '12.6131 EOS' ]</span></pre><p id="3ece" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">如果您查看结果值，您可以看到一个字符串形式的数组。这是因为帐户中可能有许多不同符号的代币。在EOS testnet，Jungle Net上，如果你搜索eosio.token不包括symbol，你可以看到2个token。</p><h1 id="721d" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated">getCurrencyStats(代码，符号)</h1><p id="7d15" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">获取符号的令牌信息。</p><h2 id="3941" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">参数</h2><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nm"><img src="../Images/b6434cd305cd1ca1d0f055b7d52830ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OClVt4-fHMEQf7m3juliJA.png"/></div></div></figure><h2 id="e273" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">密码</h2><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mj mk l"/></div></figure><h2 id="9060" class="ml kz ht bd la mm mn mo le mp mq mr li kd ms mt lk kh mu mv lm kl mw mx lo my dt translated">结果</h2><pre class="jj jk jl jm fq na nb nc nd aw ne dt"><span id="f720" class="ml kz ht nb b fv nf ng l nh ni">{ EOS:<br/>   { supply: '1006148640.3388 EOS',<br/>     max_supply: '10000000000.0000 EOS',<br/>     issuer: 'eosio' } }</span></pre><p id="350f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">以下是结果值的描述。</p><ol class=""><li id="e426" class="lv lw ht jw b jx jy ka kb kd lx kh ly kl lz kp ma mb mc md dt translated"><strong class="jw hu">供给:</strong>当前供给的令牌数。</li><li id="384d" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu"> max_supply: </strong>代币总数。</li><li id="b1c2" class="lv lw ht jw b jx me ka mf kd mg kh mh kl mi kp ma mb mc md dt translated"><strong class="jw hu">发行人:</strong>发行人</li></ol><h1 id="66de" class="ky kz ht bd la lb lc ld le lf lg lh li iz lj ja lk jc ll jd lm jf ln jg lo lp dt translated"><strong class="ak">结论</strong></h1><p id="dc20" class="pw-post-body-paragraph ju jv ht jw b jx lq iu jz ka lr ix kc kd ls kf kg kh lt kj kk kl lu kn ko kp hm dt translated">我们讨论了5个最常用的EOSJS APIs。还有很多API我们还没有介绍，我计划在以后的文章中介绍这些。谢谢你。</p></div><div class="ab cl nn no hb np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="hm hn ho hp hq"><p id="c165" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">订阅ITAM网络，接收最新信息。</p><p id="eb4e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">访问ITAM网络电讯，就ITAM网络和区块链进行交流。点击下面的链接加入！</p><p id="9f9c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">网址:<strong class="jw hu"/><a class="ae kx" href="https://itam.games/en" rel="noopener ugc nofollow" target="_blank">https://itam . games</a><strong class="jw hu"><br/></strong>电报:<a class="ae kx" href="https://t.me/itamgames" rel="noopener ugc nofollow" target="_blank">https://t.me/itamgames</a></p></div></div>    
</body>
</html>