<html>
<head>
<title>Guide to Deploying Applications to Akash DeCloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将应用部署到Akash DeCloud的指南</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/guide-to-deploying-applications-to-akash-decloud-b35dc97e5ca4?source=collection_archive---------1-----------------------#2020-12-19">https://medium.com/coinmonks/guide-to-deploying-applications-to-akash-decloud-b35dc97e5ca4?source=collection_archive---------1-----------------------#2020-12-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="06d3" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">学习在分散的云上部署任何容器化的应用程序</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/c4af6b365a3632a939377f3fc1325726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t94ZM0Q8tPwpP9f0"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Photo by <a class="ae jy" href="https://unsplash.com/@edurnepaula?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Edurne Chopeitia</a> on <a class="ae jy" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3350" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">我最近在区块链发现了一个很有前途的传统云平台的替代品，叫做Akash。<a class="ae jy" href="https://akash.network/" rel="noopener ugc nofollow" target="_blank"> Akash Network </a>正在构建第一个分散式云(DeCloud)计算市场，它使任何具有未使用计算周期的计算机都可以成为云提供商，并允许开发人员以远低于(据称高达10倍！)由当前市场提供商(如AWS、Google Cloud和Microsoft Azure)提供的那些。如果你不熟悉去中心化云(DeCloud)或Akash，你可以看看他们的<a class="ae jy" href="https://akash.network/" rel="noopener ugc nofollow" target="_blank">网站</a>，他们的<a class="ae jy" href="https://akash.network/whitepapers/" rel="noopener ugc nofollow" target="_blank">白皮书</a>，他们的<a class="ae jy" href="https://akash.network/blog/" rel="noopener ugc nofollow" target="_blank">博客</a>，以及<a class="ae jy" rel="noopener" href="/crypto/youre-not-decentralized-if-you-re-relying-on-amazon-or-microsoft-for-hosting-4f0c74471b17">其他博客</a>。这个项目仍然相当年轻，但是他们最近的<a class="ae jy" href="https://akash.network/challenge/" rel="noopener ugc nofollow" target="_blank">阿卡什安挑战3 </a>展示了他们部署平台的一个令人印象深刻的测试版本。</p><p id="a151" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在本指南中(基于<a class="ae jy" href="https://docs.akash.network/guides/deploy" rel="noopener ugc nofollow" target="_blank">官方文档</a>)，我将向您展示将容器化的应用程序部署到Akash是多么容易。正如您将看到的，最困难的部分是编写和封装您的应用程序，无论您选择哪个云提供商，您都可能会这样做。经过一次设置后，部署到Akash只需要编写一个小的配置文件并执行几个命令。</p></div><div class="ab cl kv kw hb kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hm hn ho hp hq"><h1 id="8258" class="lc ld ht bd le lf lg lh li lj lk ll lm iz ln ja lo jc lp jd lq jf lr jg ls lt dt translated">先决条件</h1><p id="19cf" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">本指南应该适用于Mac用户、(大多数)Linux用户，而<em class="lz">可能</em>适用于Windows用户(参见<a class="ae jy" href="https://github.com/ovrclk/akash" rel="noopener ugc nofollow" target="_blank">支持的平台</a>)。本指南还假设了基本的命令行舒适性和对<a class="ae jy" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> Docker </a>的一些熟悉。</p><p id="aa48" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">本指南中使用的Docker镜像可以在用户名<code class="eh ma mb mc md b">wlouie1</code>下<a class="ae jy" href="https://hub.docker.com/r/wlouie1/ufo-data-vis" rel="noopener ugc nofollow" target="_blank">这里</a>获得，但是如果你想自己创建一个，你需要安装<a class="ae jy" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> Docker </a>并在<a class="ae jy" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>上拥有一个账户。</p><p id="4a48" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">要部署到Akash DeCloud，您需要:</p><ol class=""><li id="f230" class="me mf ht kb b kc kd kf kg ki mg km mh kq mi ku mj mk ml mm dt translated"><a class="ae jy" href="https://docs.akash.network/guides/install" rel="noopener ugc nofollow" target="_blank">安装阿卡什</a>。</li><li id="23dd" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku mj mk ml mm dt translated"><a class="ae jy" href="https://docs.akash.network/guides/version" rel="noopener ugc nofollow" target="_blank">选择您的阿卡什网络</a>。我们将使用<em class="lz"> edgenet </em>，这是一个测试网，其部署能力将反映他们的下一个Mainnet版本。</li><li id="069c" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku mj mk ml mm dt translated"><a class="ae jy" href="https://docs.akash.network/guides/funding" rel="noopener ugc nofollow" target="_blank">向您的账户</a>注入阿卡什代币(Akt)来支付部署费用。对于edgenet，Akash提供了一个AKT水龙头来资助测试部署。</li></ol><h1 id="8197" class="lc ld ht bd le lf ms lh li lj mt ll lm iz mu ja lo jc mv jd lq jf mw jg ls lt dt translated">容器化您的应用程序</h1><p id="4aa9" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated"><em class="lz">(此处</em>  <em class="lz">提供了本节中描述的应用程序的Docker映像，因此可以直接跳到下面的</em> <strong class="kb hu"> <em class="lz">部署到Akash </em> </strong> <em class="lz">一节。)</em></p><h2 id="aa88" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">编写应用程序</h2><p id="6999" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">出于演示目的，我们将使用<a class="ae jy" href="https://github.com/wlouie1/UFO-Sightings" rel="noopener ugc nofollow" target="_blank">这个web应用程序</a>来探索世界各地的UFO目击事件:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nl"><img src="../Images/b3919292a5c72bce1c609119c33432dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TgNKhFrLpTDo3fBvf04QBw.gif"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">UFO Sightings Around the World, 1906–2014. <a class="ae jy" href="https://wilsonlouie.medium.com/" rel="noopener">Image by Author</a></figcaption></figure><p id="1f44" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">通过以下方式克隆应用程序:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="4761" class="mx ld ht md b fv nq nr l ns nt">git clone <a class="ae jy" href="https://github.com/wlouie1/UFO-Sightings.git" rel="noopener ugc nofollow" target="_blank">https://github.com/wlouie1/UFO-Sightings.git</a><br/>cd UFO-Sightings/</span></pre><p id="973a" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如您所见，该应用程序完全由静态HTML/Javascript/CSS文件组成。如果您要在本地启动服务器，例如，如果您安装了Python 3，则使用以下命令:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="ec19" class="mx ld ht md b fv nq nr l ns nt">python -m http.server 8000</span></pre><p id="3568" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">然后您可以导航到<code class="eh ma mb mc md b"><a class="ae jy" href="http://localhost:8000" rel="noopener ugc nofollow" target="_blank">http://localhost:8000</a></code>并查看应用程序。</p><h2 id="e6a0" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">用码头工人集装箱化</h2><p id="14d5" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">因为我们所需要的只是一个服务器来服务我们web应用程序的静态文件，所以我们可以创建一个简单的Docker映像，将我们的静态文件与web服务器捆绑在一起，比如<a class="ae jy" href="https://nginx.org/en/" rel="noopener ugc nofollow" target="_blank"> Nginx </a>。</p><p id="e917" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在<code class="eh ma mb mc md b">UFO-Sightings</code>目录下，创建一个名为<code class="eh ma mb mc md b">Dockerfile</code>的文件，内容如下:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="e0bd" class="mx ld ht md b fv nq nr l ns nt"><strong class="md hu">FROM</strong> nginx:alpine<br/><strong class="md hu">COPY</strong> . /usr/share/nginx/html</span></pre><p id="8620" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">构建Docker映像(为了简单起见，我们将其命名为<code class="eh ma mb mc md b">ufo-data-vis</code>并标记为<code class="eh ma mb mc md b">latest</code>；<a class="ae jy" href="https://vsupalov.com/docker-latest-tag/" rel="noopener ugc nofollow" target="_blank">小心实践中的“最新”标签，尽管</a>)通过:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="2917" class="mx ld ht md b fv nq nr l ns nt">docker build -t ufo-data-vis:latest .</span></pre><p id="1a87" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">要测试它，将映像作为容器运行，将主机的端口80转发到容器的端口80(Nginx的默认端口):</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="4105" class="mx ld ht md b fv nq nr l ns nt">docker run -p 80:80 ufo-data-vis:latest</span></pre><p id="ec0e" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如果一切正常，你应该可以在<code class="eh ma mb mc md b"><a class="ae jy" href="http://localhost:8000" rel="noopener ugc nofollow" target="_blank">http://localhost:80</a></code>查看申请。</p><h2 id="2c44" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">将图像推送到Docker注册表</h2><p id="d7af" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">一旦我们有了一个构建好的Docker映像，我们需要让它公开可用，这样Akash部署过程就可以提取映像(私有容器支持在他们的<a class="ae jy" href="https://github.com/orgs/ovrclk/projects/2#card-28484701" rel="noopener ugc nofollow" target="_blank">路线图</a>中)。如果您有一个用户名为<code class="eh ma mb mc md b">USERNAME</code>的Docker Hub帐户，创建一个名为<code class="eh ma mb mc md b">ufo-data-vis</code>的存储库，然后使用以下内容标记并推送图像:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="4b26" class="mx ld ht md b fv nq nr l ns nt">docker tag ufo-data-vis:latest USERNAME/ufo-data-vis:latest<br/>docker push USERNAME/ufo-data-vis:latest</span></pre><p id="c4f9" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">..我们完事了。代表我们的容器化应用程序的Docker映像现在是公开可用的，我们可以继续部署到Akash。</p><h2 id="64b9" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">考虑Docker合成文件</h2><p id="b911" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">部署到Akash包括编写一个定义部署配置的栈定义语言(SDL)文件(更多细节在下面的<strong class="kb hu">创建部署配置</strong>部分)。SDL文件在这里是<a class="ae jy" href="https://docs.akash.network/documentation/sdl" rel="noopener ugc nofollow" target="_blank"/>。你可能会注意到SDL格式与Docker合成文件非常相似！</p><p id="de7d" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如果我们要构建一个Docker合成文件，利用我们的web应用程序的公共Docker图像，它看起来会像这样:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="46a7" class="mx ld ht md b fv nq nr l ns nt"><strong class="md hu">version</strong>: "3.8"<br/><strong class="md hu">services</strong>:<br/>  <strong class="md hu">web</strong>:<br/>    <strong class="md hu">image</strong>: USERNAME/ufo-data-vis:latest<br/>    <strong class="md hu">ports</strong>:<br/>      - "80:80"</span></pre><p id="d4ba" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">为了验证，您可以将这个文件保存为<code class="eh ma mb mc md b">UFO-Sightings</code>目录下的<code class="eh ma mb mc md b">docker-compose.yml</code>，并使用docker-compose运行容器(确保停止任何先前运行的容器):</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="a342" class="mx ld ht md b fv nq nr l ns nt">docker-compose up --build</span></pre><p id="a8fd" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">并导航至<code class="eh ma mb mc md b"><a class="ae jy" href="http://localhost:8000" rel="noopener ugc nofollow" target="_blank">http://localhost:80</a></code>进行确认。</p><p id="00c4" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">正如您将在<strong class="kb hu">创建部署配置</strong>一节中看到的，编写SDL文件实质上变成了直接翻译。</p></div><div class="ab cl kv kw hb kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hm hn ho hp hq"><h1 id="9a83" class="lc ld ht bd le lf lg lh li lj lk ll lm iz ln ja lo jc lp jd lq jf lr jg ls lt dt translated">部署到阿卡什</h1><p id="509d" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">在编写和封装您的应用程序之后，您就完成了最难的部分！除了一些一次性设置之外，部署到Akash只需要编写一个小的配置文件并执行几个命令。</p><h2 id="ab54" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">环境设置</h2><p id="59ff" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">使用<code class="eh ma mb mc md b">export VARNAME=…</code>设置以下外壳变量:</p><ul class=""><li id="45b1" class="me mf ht kb b kc kd kf kg ki mg km mh kq mi ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">AKASH_NODE</code> : Akash网络配置基础URL。见<a class="ae jy" href="https://docs.akash.network/guides/version" rel="noopener ugc nofollow" target="_blank">此处</a>。</li><li id="9140" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">AKASH_CHAIN_ID</code>:连接到的阿卡什网络的链ID。见<a class="ae jy" href="https://docs.akash.network/guides/version" rel="noopener ugc nofollow" target="_blank">此处</a>。</li><li id="6b11" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">ACCOUNT_ADDRESS</code>:您的账户地址。见<a class="ae jy" href="https://docs.akash.network/guides/wallet#account-address" rel="noopener ugc nofollow" target="_blank">此处</a>。</li><li id="61df" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">KEY_NAME</code>:您将要部署的密钥的名称。如果您尚未设置密钥，请参见此处的<a class="ae jy" href="https://docs.akash.network/guides/wallet" rel="noopener ugc nofollow" target="_blank"/>。</li></ul><p id="a48e" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">您可以通过运行以下命令来检查您的帐户是否有足够的余额:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="a634" class="mx ld ht md b fv nq nr l ns nt">akash query bank balances --node <strong class="md hu">$AKASH_NODE</strong> <strong class="md hu">$ACCOUNT_ADDRESS</strong></span></pre><p id="d990" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">您应该会看到类似以下内容的响应:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="b3c1" class="mx ld ht md b fv nq nr l ns nt">balances:<br/>- <strong class="md hu">amount: "93000637"</strong><br/>  <strong class="md hu">denom: uakt</strong><br/>pagination:<br/>  next_key: null<br/>  total: "0"</span></pre><p id="87ce" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">请注意，所显示的余额是以10^-6).为单位的在上面的例子中，账户余额为93 AKT 。我们现在开始部署。</p><h2 id="d907" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">创建部署配置</h2><p id="d036" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">部署服务、数据中心、定价等。，由使用<a class="ae jy" href="https://docs.akash.network/documentation/sdl" rel="noopener ugc nofollow" target="_blank">栈定义语言</a> (SDL)的<a class="ae jy" href="http://www.yaml.org/start.html" rel="noopener ugc nofollow" target="_blank"> YAML </a>配置文件描述。编写这个配置文件非常类似于编写一个Docker Compose文件加上一些额外的东西。对于我们的web应用程序，一个SDL可能看起来像这样(参见上面的<strong class="kb hu">考虑Docker合成文件</strong>一节中类似的Docker合成文件):</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="c15c" class="mx ld ht md b fv nq nr l ns nt">---<br/><strong class="md hu">version</strong>: "2.0"</span><span id="84e4" class="mx ld ht md b fv nv nr l ns nt"><strong class="md hu">services</strong>:<br/>  <strong class="md hu">web</strong>:<br/>    <strong class="md hu">image</strong>: USERNAME/ufo-data-vis:latest<br/>    <strong class="md hu">expose</strong>:<br/>      - <strong class="md hu">port</strong>: 80<br/>        <strong class="md hu">as</strong>: 80<br/>        <strong class="md hu">to</strong>:<br/>          - <strong class="md hu">global</strong>: true</span><span id="f43b" class="mx ld ht md b fv nv nr l ns nt"><strong class="md hu">profiles</strong>:<br/>  <strong class="md hu">compute</strong>:<br/>    <strong class="md hu">web</strong>:<br/>      <strong class="md hu">resources</strong>:<br/>        <strong class="md hu">cpu</strong>:<br/>          <strong class="md hu">units</strong>: 0.1<br/>        <strong class="md hu">memory</strong>:<br/>          <strong class="md hu">size</strong>: 512Mi<br/>        <strong class="md hu">storage</strong>:<br/>          <strong class="md hu">size</strong>: 512Mi<br/>  <strong class="md hu">placement</strong>:<br/>    <strong class="md hu">westcoast</strong>:<br/>      <strong class="md hu">attributes</strong>:<br/>        <strong class="md hu">organization</strong>: ovrclk.com<br/>      <strong class="md hu">signedBy</strong>:<br/>        <strong class="md hu">anyOf</strong>:<br/>          - "akash1vz375dkt0c60annyp6mkzeejfq0qpyevhseu05"<br/>      <strong class="md hu">pricing</strong>:<br/>        <strong class="md hu">web</strong>: <br/>          <strong class="md hu">denom</strong>: uakt<br/>          <strong class="md hu">amount</strong>: 1000</span><span id="ffa4" class="mx ld ht md b fv nv nr l ns nt"><strong class="md hu">deployment</strong>:<br/>  <strong class="md hu">web</strong>:<br/>    <strong class="md hu">westcoast</strong>:<br/>      <strong class="md hu">profile</strong>: web<br/>      <strong class="md hu">count</strong>: 1</span></pre><p id="f6ac" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">上面指定了<code class="eh ma mb mc md b">services</code>下类似Docker Compose的规范(在我们的例子中，我们只有一个名为<code class="eh ma mb mc md b">web</code>的工作负载，它构建我们的web应用程序映像)、在<code class="eh ma mb mc md b">profiles.compute</code>下为每个服务分配多少计算资源、<code class="eh ma mb mc md b">profiles.placement</code>下命名的数据中心配置文件，以及在<code class="eh ma mb mc md b">deployment</code>下数据中心配置文件和计算配置文件之间的映射。</p><p id="fca9" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">将该文件另存为<code class="eh ma mb mc md b">deploy.yml</code>。只需几个命令，应用程序就可以部署了！</p><h2 id="ac4a" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">部署！</h2><p id="0077" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">部署的语法是<code class="eh ma mb mc md b">akash tx deployment create &lt;config-path&gt; --from &lt;key-name&gt;</code>。更具体地说，在我们的案例中:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="7082" class="mx ld ht md b fv nq nr l ns nt">akash tx deployment create <strong class="md hu">deploy.yml</strong> --from <strong class="md hu">$KEY_NAME</strong> --node <strong class="md hu">$AKASH_NODE</strong> --chain-id <strong class="md hu">$AKASH_CHAIN_ID</strong> -y</span></pre><p id="f982" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这会发布您的部署，并触发Akash marketplace尝试通过拍卖为您匹配一个提供商。这可能需要几秒钟。您可以通过运行以下命令来检查租赁状态:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="4b63" class="mx ld ht md b fv nq nr l ns nt">akash query market lease list --owner <strong class="md hu">$ACCOUNT_ADDRESS</strong> --node <strong class="md hu">$AKASH_NODE</strong> --state active</span></pre><p id="062c" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">一旦您与提供商匹配，您应该会看到类似于以下内容的响应:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="816c" class="mx ld ht md b fv nq nr l ns nt">- lease_id:<br/>    <strong class="md hu">dseq</strong>: "19553"<br/>    <strong class="md hu">gseq</strong>: 1<br/>    <strong class="md hu">oseq</strong>: 1<br/>    owner: akash1j8s87w3fctz7nlcqtkl5clnc805r240443eksx<br/>    <strong class="md hu">provider</strong>: akash15ql9ycjkkxhpc2nxtnf78qqjguwzz8gc4ue7wl<br/>  price:<br/>    amount: "186"<br/>    denom: uakt<br/>  state: active<br/>pagination:<br/>  next_key: null<br/>  total: "0"</span></pre><p id="4fc7" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在上面的示例中，租约是使用每块0.00000186 AKT来执行容器而创建的。</p><p id="3be7" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">为了方便和清楚起见，根据上述步骤返回的租约信息，将下面的一组值提取到shell变量中:</p><ul class=""><li id="8ff8" class="me mf ht kb b kc kd kf kg ki mg km mh kq mi ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">PROVIDER</code> : <code class="eh ma mb mc md b">akash15ql9ycjkkxhpc2nxtnf78qqjguwzz8gc4ue7wl</code>在我们上面的例子中。</li><li id="6061" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">DSEQ</code> : <code class="eh ma mb mc md b">19553</code>在我们上面的例子中。</li><li id="0fa0" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">OSEQ</code> : <code class="eh ma mb mc md b">1</code>在我们上面的例子中。</li><li id="01bd" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><code class="eh ma mb mc md b">GSEQ</code> : <code class="eh ma mb mc md b">1</code>在我们上面的例子中。</li></ul><p id="1d47" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">获得租约后的最后一步是开始在提供商机器上构建映像。这是通过以下方式上传清单来完成的:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="8bf2" class="mx ld ht md b fv nq nr l ns nt">akash provider send-manifest <strong class="md hu">deploy.yml</strong> --node <strong class="md hu">$AKASH_NODE</strong> --dseq <strong class="md hu">$DSEQ</strong> --oseq <strong class="md hu">$OSEQ</strong> --gseq <strong class="md hu">$GSEQ</strong> --owner <strong class="md hu">$ACCOUNT_ADDRESS</strong> --provider <strong class="md hu">$PROVIDER</strong></span></pre><p id="8a1e" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">当您的映像在提供者机器上构建时，您可以查看应用程序日志来观察进度或进行调试:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="a329" class="mx ld ht md b fv nq nr l ns nt">akash provider service-logs --node <strong class="md hu">$AKASH_NODE</strong> --dseq <strong class="md hu">$DSEQ</strong> --oseq <strong class="md hu">$OSEQ</strong> --gseq <strong class="md hu">$GSEQ</strong> --provider <strong class="md hu">$PROVIDER</strong> --owner <strong class="md hu">$ACCOUNT_ADDRESS</strong> --service <strong class="md hu">$SERVICE_NAME</strong></span></pre><p id="a517" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">其中<code class="eh ma mb mc md b">$SERVICE_NAME</code>是您的SDL中定义的服务的名称。在我们这里，这是<code class="eh ma mb mc md b">web</code>。</p><p id="7dfb" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">最后，您可以通过运行以下命令来检索访问详细信息:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="8f6e" class="mx ld ht md b fv nq nr l ns nt">akash provider lease-status --node <strong class="md hu">$AKASH_NODE</strong> --dseq <strong class="md hu">$DSEQ</strong> --oseq <strong class="md hu">$OSEQ</strong> --gseq <strong class="md hu">$GSEQ</strong> --provider <strong class="md hu">$PROVIDER</strong> --owner <strong class="md hu">$ACCOUNT_ADDRESS</strong></span></pre><p id="047e" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这将给出类似于以下内容的响应:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="7b6e" class="mx ld ht md b fv nq nr l ns nt">{<br/>  "services": {<br/>    "web": {<br/>      "name": "web",<br/>      "available": 1,<br/>      "total": 1,<br/>      <strong class="md hu">"uris": [<br/>        "6veev7chcfmnclgqklegcc.provider4.akashdev.net"<br/>      ],</strong><br/>      "observed-generation": 0,<br/>      "replicas": 0,<br/>      "updated-replicas": 0,<br/>      "ready-replicas": 0,<br/>      "available-replicas": 0<br/>    }<br/>  },<br/>  "forwarded-ports": {}<br/>}</span></pre><p id="a079" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">在上面的例子中，在<code class="eh ma mb mc md b">uris</code>下，我们的应用程序可以在<a class="ae jy" href="http://6veev7chcfmnclgqklegcc.provider4.akashdev.net" rel="noopener ugc nofollow" target="_blank">http://6veev7chcfmnclgqklegcc.provider4.akashdev.net</a>访问。尝试导航到您在<code class="eh ma mb mc md b">uris</code>下看到的任何链接，您应该会看到我们的web应用程序！</p><h2 id="f996" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">关闭部署</h2><p id="4aca" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">关闭您的部署意味着您的容器将被取消供应，令牌传输将停止。如果您想要关闭部署，请通过以下方式创建一个<code class="eh ma mb mc md b">deployment-close</code>事务:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="4336" class="mx ld ht md b fv nq nr l ns nt">akash tx deployment close --node <strong class="md hu">$AKASH_NODE</strong> --chain-id <strong class="md hu">$AKASH_CHAIN_ID</strong> --dseq <strong class="md hu">$DSEQ</strong> --owner <strong class="md hu">$ACCOUNT_ADDRESS</strong> --from <strong class="md hu">$KEY_NAME</strong> -y</span></pre><p id="3800" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">您可以查询市场以检查您的租赁是否成功结束:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="833d" class="mx ld ht md b fv nq nr l ns nt">akash query market lease list --owner <strong class="md hu">$ACCOUNT_ADDRESS</strong> --node <strong class="md hu">$AKASH_NODE</strong></span></pre><p id="212f" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这将返回类似于以下内容的响应:</p><pre class="jj jk jl jm fq nm md nn no aw np dt"><span id="e52d" class="mx ld ht md b fv nq nr l ns nt">leases:<br/>- lease_id:<br/>    dseq: "19553"<br/>    gseq: 1<br/>    oseq: 1<br/>    owner: akash1j8s87w3fctz7nlcqtkl5clnc805r240443eksx<br/>    provider: akash15ql9ycjkkxhpc2nxtnf78qqjguwzz8gc4ue7wl<br/>  price:<br/>    amount: "186"<br/>    denom: uakt<br/>  <strong class="md hu">state: closed</strong><br/>pagination:<br/>  next_key: null<br/>  total: "0"</span></pre><p id="5299" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如上图所示，您的租约应标记为<code class="eh ma mb mc md b">state: closed</code>。</p></div><div class="ab cl kv kw hb kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hm hn ho hp hq"><h1 id="0798" class="lc ld ht bd le lf lg lh li lj lk ll lm iz ln ja lo jc lp jd lq jf lr jg ls lt dt translated">结论</h1><p id="8693" class="pw-post-body-paragraph jz ka ht kb b kc lu iu ke kf lv ix kh ki lw kk kl km lx ko kp kq ly ks kt ku hm dt translated">如前所述，将应用程序部署到Akash相当简单。由于这是Akash部署平台的测试版，我们可以期待<a class="ae jy" href="https://github.com/orgs/ovrclk/projects/2" rel="noopener ugc nofollow" target="_blank">更多的功能</a>和未来进一步简化的工作流程。</p><p id="5dae" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">如果你有兴趣在Akash上了解机器学习，也请查看我的其他系列(<a class="ae jy" href="https://wilsonlouie.medium.com/machine-learning-on-akash-decloud-part-1-3-training-cnn-on-mnist-using-tensorflow-be464f0f067e" rel="noopener"> <strong class="kb hu">第1部分</strong> </a>、<a class="ae jy" href="https://wilsonlouie.medium.com/machine-learning-on-akash-decloud-part-2-3-tensorflow-model-serving-12e30d77a156" rel="noopener"> <strong class="kb hu">第2部分</strong> </a>和<a class="ae jy" href="https://wilsonlouie.medium.com/machine-learning-on-akash-decloud-part-3-3-deploying-a-deep-learning-web-application-6a9e71e71dd1" rel="noopener"> <strong class="kb hu">第3部分</strong> </a>)，详细介绍我在Akash上进行的训练、服务和部署深度学习web应用程序的实验！</p><h2 id="50a2" class="mx ld ht bd le my mz na li nb nc nd lm ki ne nf lo km ng nh lq kq ni nj ls nk dt translated">另外，阅读</h2><ul class=""><li id="0bc7" class="me mf ht kb b kc lu kf lv ki nw km nx kq ny ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="5241" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/3commas-review-an-excellent-crypto-trading-bot-2020-1313a58bec92">3商业评论</a></li><li id="25b2" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/aax-exchange-review-2021-67c5ea09330c"> AAX交易所评论</a> |推荐代码、交易费用、利弊</li><li id="ab2a" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2"> Deribit审查</a> |选项、费用、API和Testnet</li><li id="6778" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">FTX密码交易所评论</li><li id="a108" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/bybit-exchange-review-dbd570019b71"> Bybit交换审查</a></li><li id="cfc6" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/cryptohopper-vs-3commas-vs-shrimpy-a2c16095b8fe"> 3Commas vs Cryptohopper </a></li><li id="51e2" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">最好的比特币<a class="ae jy" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></li><li id="4268" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a></li><li id="5243" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" href="https://blog.coincodecap.com/bitsgap-3commas-quadency" rel="noopener ugc nofollow" target="_blank">bits gap vs 3 commas vs quad ency</a></li><li id="69bb" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">最好的<a class="ae jy" rel="noopener" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b">加密税务软件</a></li><li id="7c4f" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/the-best-crypto-trading-platforms-in-2020-the-definitive-guide-updated-c72f8b874555">最佳加密交易平台</a></li><li id="97a4" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">最佳<a class="ae jy" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密借贷平台</a></li><li id="ab33" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" href="https://blog.coincodecap.com/ledger-nano-s-vs-trezor-one-ledger-nano-x-trezor-t" rel="noopener ugc nofollow" target="_blank">莱杰Nano S vs特雷佐one vs特雷佐T vs莱杰Nano X </a></li><li id="9efe" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">block fi vs Celsius</a>vs Hodlnaut</li><li id="1dc3" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/bitsgap-review-a-crypto-trading-bot-that-makes-easy-money-a5d88a336df2"> Bitsgap评论</a>——一个轻松赚钱的加密交易机器人</li><li id="2401" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/quadency-review-a-crypto-trading-automation-platform-3068eaa374e1"> Quadency Review </a> -专为专业人士打造的加密交易机器人</li><li id="2791" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT审查</a> |杠杆交易、费用和交易</li><li id="4fc4" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" href="https://blog.coincodecap.com/altrady-reivew" rel="noopener ugc nofollow" target="_blank"> Altrady审查</a></li><li id="eb27" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/ellipal-titan-review-85e9071dd029">埃利帕尔泰坦评论</a></li><li id="dc32" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" href="https://blog.coincodecap.com/secux-stone-hardware-wallet-review" rel="noopener ugc nofollow" target="_blank"> SecuX Stone评论</a></li><li id="5279" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/blockfi-review-53096053c097"> BlockFi评论</a> |从您的密码中赚取高达8.6%的利息</li><li id="6e2e" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">开发人员的最佳加密API</a></li><li id="6a8a" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated"><a class="ae jy" href="https://bitquery.io/blog/best-blockchain-analysis-tools-and-software" rel="noopener ugc nofollow" target="_blank">最佳区块链分析工具</a></li><li id="b037" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">加密套利指南:新手如何赚钱</li><li id="b46f" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">顶级<a class="ae jy" href="https://blog.coincodecap.com/bitcoin-node-solutions" rel="noopener ugc nofollow" target="_blank">比特币节点</a>提供商</li><li id="0966" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">最佳<a class="ae jy" rel="noopener" href="/coinmonks/what-are-the-best-charting-platforms-for-cryptocurrency-trading-85aade584d80">加密制图工具</a></li><li id="ef45" class="me mf ht kb b kc mn kf mo ki mp km mq kq mr ku nu mk ml mm dt translated">了解比特币的<a class="ae jy" rel="noopener" href="/coinmonks/what-are-the-best-books-to-learn-bitcoin-409aeb9aff4b">最佳书籍有哪些？</a></li></ul><blockquote class="nz"><p id="b751" class="oa ob ht bd oc od oe of og oh oi ku ek translated"><a class="ae jy" rel="noopener" href="/coinmonks/newsletters/coinmonks">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ok ol om on oo jn fe ff paragraph-image"><a href="https://medium.com/coinmonks/newsletters/coinmonks"><div class="fe ff oj"><img src="../Images/160ce73bd06d46c2250251e7d5969f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*BoDnKUyK8p4hitHAJZ5Pdw.png"/></div></a></figure></div></div>    
</body>
</html>