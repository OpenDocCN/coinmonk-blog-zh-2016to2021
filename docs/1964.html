<html>
<head>
<title>Hyperledger Fabric By Example: Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">超分类帐结构示例:第3部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/hyperledger-fabric-by-example-part-3-8f28b6080852?source=collection_archive---------0-----------------------#2019-01-12">https://medium.com/coinmonks/hyperledger-fabric-by-example-part-3-8f28b6080852?source=collection_archive---------0-----------------------#2019-01-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="0009" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated"><strong class="ak">建立一个最小的网络。</strong></h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/f1abe0a7011d2186342668eac96a87e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9GFTo6oj8IraeFUO8jDf1g.jpeg"/></div></div></figure><p id="5a97" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">本文是以<a class="ae kq" rel="noopener" href="/@johntucker_48673/hyperledger-fabric-by-example-part-1-758547e9fb04"><em class="kr">Hyperledger Fabric By Example:Part 1</em></a>开始的系列文章的一部分。</p><p id="39bc" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">此时，我们有了下图中每个网络元素的身份(数字证书和密钥)。我们也知道证书颁发机构(CA)的作用是生成这些身份；然而，在本教程中，我们使用了<em class="kr"> cryptogen </em>命令行界面工具来生成它们，因此我们不需要CAs的运行实例。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ks"><img src="../Images/9b8a948a61d62017fe46100d0f5cac80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MWINUTWHGfgeFcQVN-Vjig.png"/></div></div></figure><p id="cdeb" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这些网络元件是<em class="kr">超级分类帐结构</em>网络的这个例子的物理元件，即主机和用户。同时，该图中缺少逻辑覆盖，例如组织等。</p><p id="edfa" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">由于有相当多的新概念要学习，我们将采用<a class="ae kq" href="https://hyperledger-fabric.readthedocs.io/en/latest/network/network.html" rel="noopener ugc nofollow" target="_blank"><em class="kr">Hyperledger Fabric block chain Network</em></a><em class="kr"/>文档的方法，一步一步地构建网络。</p><p id="358d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">最小网络</strong></p><p id="995f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们从文档<a class="ae kq" href="https://hyperledger-fabric.readthedocs.io/en/latest/network/network.html#creating-the-network" rel="noopener ugc nofollow" target="_blank"> <em class="kr">超链接结构中描述的最小网络开始:区块链网络——创建网络</em> </a> <em class="kr"> </em> ( <strong class="jw hu">在继续</strong>之前阅读本节)。该网络的元素(绿色)在文档中进行了标识。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ks"><img src="../Images/6d60cf29fa7639d65082b121d04b94c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VsArg5Jo4K95MEq5i2cd2A.png"/></div></div></figure><p id="4a3f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">从我们早期的工作中，我们已经了解了<strong class="jw hu">认证中心(CA) </strong>的角色。</p><p id="b426" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">第一个逻辑元素是一个<strong class="jw hu">组织(R)；</strong>可以认为绿色作为元素是与组织相联系的。</p><blockquote class="kt ku kv"><p id="2872" class="ju jv kr jw b jx jy iu jz ka kb ix kc kw ke kf kg kx ki kj kk ky km kn ko kp hm dt translated">也被称为“成员”的组织是由区块链服务提供商邀请加入区块链网络的。组织通过将其成员资格服务提供商(MSP)添加到网络来加入网络。MSP定义了网络中的其他成员如何验证签名(如交易中的签名)是由该组织发布的有效身份生成的。</p></blockquote><p id="69a6" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">—Hyperledger Fabric—</em><a class="ae kq" href="https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html#organization" rel="noopener ugc nofollow" target="_blank"><em class="kr">词汇表</em> </a></p><p id="3d65" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在本例中，我们创建了第一个组织<em class="kr">order org</em>，它基于我们之前创建的以下数字证书，也称为<strong class="jw hu">成员资格服务提供商(MSP) </strong>:</p><p id="8962" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">。/first-network/crypto-config/order organizations/example . com/MSP/</em></p><pre class="jj jk jl jm fq kz la lb lc aw ld dt"><span id="e576" class="le lf ht la b fv lg lh l li lj">.<br/>├── admincerts<br/>│   └── <a class="ae kq" href="mailto:Admin@example.com" rel="noopener ugc nofollow" target="_blank">Admin@example.com</a>-cert.pem<br/>├── cacerts<br/>│   └── ca.example.com-cert.pem<br/>└── tlscacerts<br/>    └── tlsca.example.com-cert.pem</span></pre><p id="e631" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">以及以下配置文件的相关部分(注释被删除):</p><p id="6718" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">。/first-network/configtx . YAML</em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="112c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">观察结果:</p><ul class=""><li id="992f" class="lm ln ht jw b jx jy ka kb kd lo kh lp kl lq kp lr ls lt lu dt translated">包括这个文件在内的配置文件是自文档化的；尽管模糊不清</li><li id="3096" class="lm ln ht jw b jx lv ka lw kd lx kh ly kl lz kp lr ls lt lu dt translated">该配置的主要优点是，我们将<strong class="jw hu">的<em class="kr">管理员</em>用户</strong>(由数字证书<em class="kr">Admin @ example . com-cert . PEM</em>定义)定义为<em class="kr"> OrderOrg </em>组织的管理员</li></ul><p id="f1e0" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">另一个逻辑元素是<strong class="jw hu">order(O):</strong></p><blockquote class="kt ku kv"><p id="fd38" class="ju jv kr jw b jx jy iu jz ka kb ix kc kw ke kf kg kx ki kj kk ky km kn ko kp hm dt translated">将事务排序到一个块中的定义的节点集合。订购服务独立于对等进程而存在，并根据先来先服务的原则为网络上的所有渠道订购交易。订购服务旨在支持开箱即用的SOLO和Kafka以外的可插拔实现。订购服务是整个网络的公共绑定；它包含绑定到每个成员的加密身份材料。</p></blockquote><p id="c062" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">—Hyperledger Fabric—</em><a class="ae kq" href="https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html#ordering-service" rel="noopener ugc nofollow" target="_blank"><em class="kr">词汇表</em> </a></p><p id="08cb" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">以及同一配置文件的相关部分:</p><p id="37b8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">。/first-network/configtx . YAML</em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="d221" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">观察结果:</p><ul class=""><li id="b857" class="lm ln ht jw b jx jy ka kb kd lo kh lp kl lq kp lr ls lt lu dt translated">这种配置的主要方式，也称为<strong class="jw hu">网络配置(NC) </strong>，是我们定义一个solo类型的订购者，由一个节点组成:<em class="kr">orderer.example.com</em>与<em class="kr"> OrderOrg </em>组织相关联。</li><li id="bfa1" class="lm ln ht jw b jx lv ka lw kd lx kh ly kl lz kp lr ls lt lu dt translated"><a class="ae kq" href="https://gist.github.com/larkintuckerllc/45694a2e4d6b5b992ba1ee1c14bc7d09" rel="noopener ugc nofollow" target="_blank">整个配置文件</a>是为这个最小网络准备的</li></ul><p id="71c5" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">注</strong>:由于一些技术限制，最小网络实际上需要定义一个联合体(我们将在后面介绍)。</p><p id="9ce7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">使用这个配置文件，我们构建了<em class="kr"> genesis.block </em>文件；将用于自举<em class="kr">orderer.example.com</em>节点。</p><pre class="jj jk jl jm fq kz la lb lc aw ld dt"><span id="9647" class="le lf ht la b fv lg lh l li lj">configtxgen -profile TwoOrgsOrdererGenesis -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block</span></pre><p id="01c3" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">注意</strong>:虽然我们将在后面介绍通道，但是订购者中的节点(在这种情况下只有一个)通过一个通道进行通信，例如<em class="kr"> byfn-sys-channel。</em></p><p id="ea64" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们接下来定义<em class="kr"> Docker Compose </em>文件来显示订购者的单个节点；orderer.example.com<em class="kr">:</em></p><p id="614e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">。/first-network/docker-compose-CLI . YAML</em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="6a04" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">哪个引用了这个<em class="kr"> Docker编写</em>文件:</p><p id="c15f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><em class="kr">。/first-network/base/docker-compose-base . YAML</em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="bcb8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">观察结果:</p><ul class=""><li id="a5ff" class="lm ln ht jw b jx jy ka kb kd lo kh lp kl lq kp lr ls lt lu dt translated">找不到关于<em class="kr">超级分类帐/结构订单</em>图像的文档</li></ul><p id="2c65" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们通过以下方式建立网络:</p><pre class="jj jk jl jm fq kz la lb lc aw ld dt"><span id="209b" class="le lf ht la b fv lg lh l li lj">docker-compose -f docker-compose-cli.yaml up</span></pre><p id="4c9a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">通过运行:</p><pre class="jj jk jl jm fq kz la lb lc aw ld dt"><span id="b897" class="le lf ht la b fv lg lh l li lj">docker ps</span></pre><p id="1228" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们可以看到我们有一个单一的<em class="kr">orderer.example.com</em>实例:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ma"><img src="../Images/2912ad53443ef9c296363affad08ed37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEE-mBIayIeMde8i3lRQjg.png"/></div></div></figure><p id="09b4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><strong class="jw hu">下一步</strong></p><p id="a4aa" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在下一篇文章<a class="ae kq" rel="noopener" href="/@johntucker_48673/hyperledger-fabric-by-example-part-4-f6b2e9e35842"><em class="kr">hyper ledger Fabric By Example:Part 4</em></a>中，我们将随着网络的扩展不断引入新概念。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff mb"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a></figure><blockquote class="mc"><p id="d03a" class="md me ht bd mf mg mh mi mj mk ml kp ek translated"><a class="ae kq" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获取最佳软件交易</a></p></blockquote><figure class="mn mo mp mq mr jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mm"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>