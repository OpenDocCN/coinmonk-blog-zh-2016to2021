<html>
<head>
<title>Printing Hello World with EOS Smart Contract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用EOS智能合同打印Hello World</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/printing-hello-world-with-eos-smart-contract-50fbe873d1b4?source=collection_archive---------3-----------------------#2018-06-01">https://medium.com/coinmonks/printing-hello-world-with-eos-smart-contract-50fbe873d1b4?source=collection_archive---------3-----------------------#2018-06-01</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/25e5c04e6cc294475de886facabec5a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ozvhbbOS9HcJUAEbCpY7A.png"/></div></div></figure><p id="83aa" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">简单地说，智能合同的开发使用了<a class="ae jz" href="https://llvm.org/" rel="noopener ugc nofollow" target="_blank"> llvm </a>和abigen，目的是生成一个abi文件。为了实现这个目标，eos提供了一个名为eosiocpp的实用程序。在本帖中，我们将讨论如何使用这个工具来生成hello world智能合约。</p><p id="79ab" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">这个帖子的内容是通过CentOS制作的。</p><h1 id="44cd" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">智能合同撰写</strong></h1><p id="d630" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">首先，编写一个ahello.cpp文件。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="7258" class="lm kb ht li b fv ln lo l lp lq">#mkdir /home/centos/sc/ahello</span><span id="072e" class="lm kb ht li b fv lr lo l lp lq">#cd /home/centos/sc/ahello</span><span id="ff73" class="lm kb ht li b fv lr lo l lp lq">#vim ahello.cpp</span></pre><p id="2874" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">将以下内容插入ahello.cpp文件</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="a749" class="lm kb ht li b fv ln lo l lp lq">----- ahello.cpp file -----------</span><span id="3d58" class="lm kb ht li b fv lr lo l lp lq">#include &lt;eosiolib/eosio.hpp&gt;</span><span id="9ba4" class="lm kb ht li b fv lr lo l lp lq">#include &lt;eosiolib/print.hpp&gt;<br/>using namespace eosio;</span><span id="2e93" class="lm kb ht li b fv lr lo l lp lq">class hello : public eosio::contract {<br/>  public:<br/>      using contract::contract;</span><span id="7d16" class="lm kb ht li b fv lr lo l lp lq">/// <a class="ae jz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action <br/>      void hi( account_name user ) {<br/>         print( "Hello, World", name{user} );<br/>      }<br/>};</span><span id="96d8" class="lm kb ht li b fv lr lo l lp lq">EOSIO_ABI( hello, (hi) )<br/>------ end of ahello.cpp file ---------------</span></pre><p id="5763" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，编译并创建wast (web程序集)文件和abi文件。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="e0f2" class="lm kb ht li b fv ln lo l lp lq">#/root/eos/build/program/tools/eosiocpp -o ahello.wast ahello.cpp</span><span id="9f1e" class="lm kb ht li b fv lr lo l lp lq">#/root/eos/build/program/tools/eosiocpp -g ahello.abi ahello.cpp</span></pre><h1 id="a356" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">智能合同样本上传和建档</strong></h1><h2 id="e2e4" class="lm kb ht bd kc ls lt lu kg lv lw lx kk jm ly lz ko jq ma mb ks ju mc md kw me dt translated"><strong class="ak">创建用于测试智能合约的账户</strong></h2><p id="4086" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">首先，创造一个钱包。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="a135" class="lm kb ht li b fv ln lo l lp lq">#./cleos wallet create -n scuser</span><span id="f6b8" class="lm kb ht li b fv lr lo l lp lq">Creating wallet: scuser<br/>Save password to use in the future to unlock this wallet.<br/>Without password imported keys will not be retrievable.<br/>"PW5JzRwAUN-----------------------------nAuCRWvHx4XnMPmGf9Kz "</span></pre><p id="fcec" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">创建一个私钥和一个公钥。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="018b" class="lm kb ht li b fv ln lo l lp lq">#./cleos create key</span><span id="5ff7" class="lm kb ht li b fv lr lo l lp lq">Private key: 5KZzUHNFNvf------------------------------vuF5z7d29uAUbsdn<br/>Public key: EOS63ndkvF-----------------------9ZVcByP9nfZcwMLzbMpn</span></pre><p id="e2cc" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">把钥匙放在钱包里。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="ca6a" class="lm kb ht li b fv ln lo l lp lq">#./cleos wallet import -n scuser 5KZzUHNFNvf---------------------d29uAUbsdn</span></pre><p id="631f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为测试创建一个额外的钱包。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="10b8" class="lm kb ht li b fv ln lo l lp lq">#./cleos create key</span><span id="8d6f" class="lm kb ht li b fv lr lo l lp lq">Private key: 5JbriTGYsnrpNDvL------------------LgniHVgyTnS5ommxo<br/>Public key: EOS8XZoG2248Gu42-------------ps7JoW8tdHQwCsV</span></pre><p id="d61e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">把备用钥匙也放在钱包里。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="fc8b" class="lm kb ht li b fv ln lo l lp lq">#./cleos wallet import -n scuser 5JbriTGYsnrpND----------HVgyTnS5ommxo</span></pre><p id="cfb7" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，创建一个用户。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="1ee9" class="lm kb ht li b fv ln lo l lp lq">#./cleos create account eosio scuser EOS63ndkvF---------cByP9nfZcwMLzbMpn EOS8XZo-------wJnieps7JoW8tdHQwCsV</span></pre><p id="b01f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在上传智能合同。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="682f" class="lm kb ht li b fv ln lo l lp lq">#./cleos set contract scuser /home/centos/sc/ahello</span><span id="84fd" class="lm kb ht li b fv lr lo l lp lq">Reading WAST/WASM from /home/centos/sc/ahello/ahello.wasm...<br/>Using already assembled WASM...<br/>Publishing contract...<br/>executed transaction: 053a4883d9c191c2754656544dd045da17bd869250af13a00284a613eed3d23b  1792 bytes  601 us<br/>#         eosio &lt;= eosio::setcode               {"account":"scuser","vmtype":0,"vmversion":0,"code":"0061736d01000000013b0c60027f7e006000017e60027e7...<br/>#         eosio &lt;= eosio::setabi                {"account":"scuser","abi":{"types":[],"structs":[{"name":"hi","base":"","fields":[{"name":"user","ty...<br/>warning: transaction executed locally, but may not be confirmed by the network yet</span></pre><p id="f61f" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">提出上传的智能合同，添加hi行为数据(参数)并执行。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="fea8" class="lm kb ht li b fv ln lo l lp lq">./cleos push action scuser hi '["user1"]' -p scuser</span><span id="9e3a" class="lm kb ht li b fv lr lo l lp lq">executed transaction: 9ed2894aef0f476687ad893ed16594588cc7a813c524d4b8497ba9f50793b151  104 bytes  330 us<br/>#        scuser &lt;= scuser::hi                   {"user":"user1"}</span><span id="21ab" class="lm kb ht li b fv lr lo l lp lq">&gt;&gt; Hello, World user1<br/>warning: transaction executed locally, but may not be confirmed by the network yet</span></pre><p id="9f02" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">类似于下面捕捉到的图像的内容将被记录在区块链中。</p><figure class="ld le lf lg fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mf"><img src="../Images/ed2bfb364dc4c105b1cb1d32cef5dc13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qt_esuCKhdJCNwCWgCA6vw.png"/></div></div><figcaption class="mg mh fg fe ff mi mj bd b be z ek">In this case, it was recorded in the 27,995th block.</figcaption></figure><h1 id="6bb4" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">代码分析</strong></h1><p id="9449" class="pw-post-body-paragraph jb jc ht jd b je ky jg jh ji kz jk jl jm la jo jp jq lb js jt ju lc jw jx jy hm dt translated">上面的示例代码是EOS智能合同的基本模板。我们现在将分解和分析上面写的代码。</p><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="b160" class="lm kb ht li b fv ln lo l lp lq">#include &lt;eosiolib/eosio.hpp&gt;</span><span id="9323" class="lm kb ht li b fv lr lo l lp lq">#include &lt;eosiolib/print.hpp&gt;</span></pre><ul class=""><li id="e973" class="mk ml ht jd b je jf ji jj jm mm jq mn ju mo jy mp mq mr ms dt translated">包括eos智能合同的头文件。</li></ul><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="8006" class="lm kb ht li b fv ln lo l lp lq">using namespace eosio;</span></pre><ul class=""><li id="3b07" class="mk ml ht jd b je jf ji jj jm mm jq mn ju mo jy mp mq mr ms dt translated">分配eos命名空间作为基础。</li><li id="2814" class="mk ml ht jd b je mt ji mu jm mv jq mw ju mx jy mp mq mr ms dt translated">因为eos命名空间是基础，所以可以直接使用account_name等数据类型。</li></ul><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="2471" class="lm kb ht li b fv ln lo l lp lq">class hello : public eosio::contract {</span></pre><ul class=""><li id="a463" class="mk ml ht jd b je jf ji jj jm mm jq mn ju mo jy mp mq mr ms dt translated">将契约类包含到eos名称空间中以创建hello类。</li></ul><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="eac8" class="lm kb ht li b fv ln lo l lp lq">public:<br/>using contract::contract;</span><span id="afbc" class="lm kb ht li b fv lr lo l lp lq">/// <a class="ae jz" href="http://twitter.com/abi" rel="noopener ugc nofollow" target="_blank">@abi</a> action</span></pre><ul class=""><li id="7fa6" class="mk ml ht jd b je jf ji jj jm mm jq mn ju mo jy mp mq mr ms dt translated">这显示了当指定一个动作时，在区块链中实际发生的执行函数。</li></ul><pre class="ld le lf lg fq lh li lj lk aw ll dt"><span id="4845" class="lm kb ht li b fv ln lo l lp lq">      void hi( account_name user ) {<br/>         print( "Hello, World", name{user} );<br/>      }<br/>};</span><span id="45cf" class="lm kb ht li b fv lr lo l lp lq">EOSIO_ABI( hello, (hi) )</span></pre><ul class=""><li id="e5e8" class="mk ml ht jd b je jf ji jj jm mm jq mn ju mo jy mp mq mr ms dt translated">EOSIO_ABI是一个宏，包含apply()函数的早期版本。</li></ul><p id="165b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在这篇文章中，我们讨论了如何使用EOS将Hellow World打印到智能合同中。我们计划随着EOS主网的推出分享更多有用的信息，所以请订阅并关注ITAM媒体。</p><p id="23fe" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">如果您在Telegram上关注ITAM网络的公开聊天，您可以与ITAM网络分享和讨论EOS开发及更多内容。点击下面的链接！</p><p id="5b17" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">网址:<a class="ae jz" href="http://itam.games" rel="noopener ugc nofollow" target="_blank"> http://itam.games </a></p><p id="2bd0" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">电报:<a class="ae jz" href="https://t.me/itamnetwork" rel="noopener ugc nofollow" target="_blank">https://t.me/itamnetwork</a></p></div></div>    
</body>
</html>