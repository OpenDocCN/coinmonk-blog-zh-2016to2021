<html>
<head>
<title>Ethereum Clique PoA vs PoW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊派PoA vs PoW</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereum-clique-poa-vs-pow-11be52cddde1?source=collection_archive---------0-----------------------#2018-11-06">https://medium.com/coinmonks/ethereum-clique-poa-vs-pow-11be52cddde1?source=collection_archive---------0-----------------------#2018-11-06</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="fe ff iq"><img src="../Images/2fa55c3892e5ee6502d7915b5af94c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*nHyjlsnho4NKjHkk_T9niQ.png"/></div></figure><h1 id="5ab2" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">为什么需要PoA而不是PoW？</h1><p id="6c8a" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">当网络有价值时，PoW  ( <a class="ae kt" href="https://en.wikipedia.org/wiki/Proof-of-work_system" rel="noopener ugc nofollow" target="_blank">工作证明</a>)是好的，因为它值得昂贵的计算来保护网络免受<a class="ae kt" href="https://www.investopedia.com/terms/1/51-attack.asp" rel="noopener ugc nofollow" target="_blank"> 51%的攻击</a>。而当网络没有价值时，例如以太坊测试网络，PoW就不能很好地工作。</p><h1 id="cb70" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">没有价值网络</h1><p id="8de2" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated"><a class="ae kt" href="https://ropsten.etherscan.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hu"> Ropsten </strong> </a>测试网络使用PoW，并于2017年2月被利用网络低PoW的人关闭，方法是在通过网络发送大量交易的同时，将阻塞气体限制提高近2000%。Ropsten已经不允许超高的气体限制，但低功率的问题仍有待下一次开发。这个PoW漏洞导致了下一个被称为<a class="ae kt" href="https://www.rinkeby.io" rel="noopener ugc nofollow" target="_blank"><strong class="jx hu">rinke by</strong></a><strong class="jx hu"/>的测试网络，它使用一个被称为<strong class="jx hu">小团体</strong>的<strong class="jx hu"> PoA </strong> ( <a class="ae kt" href="https://en.wikipedia.org/wiki/Proof-of-authority" rel="noopener ugc nofollow" target="_blank">权威证明</a>)来授权签名者铸造区块。</p><h1 id="1fc0" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">Clique PoA需要向后兼容</h1><p id="fbd1" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">Clique的架构师必须找到一种方法来实现PoA，同时对核心数据结构做尽可能少的改动，以保持现有以太坊客户端的兼容性。Clique需要的两个<strong class="jx hu">新</strong>东西包括同步期间的块验证和投票协议。</p><p id="7b3b" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">Clique需要一种方法，让用户在同步时对照可信签名者列表来验证块。问题是<a class="ae kt" href="https://github.com/paritytech/parity-ethereum" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hu">奇偶校验</strong> </a>在warp sync期间无法访问状态，当使用快速或轻度同步模式时<a class="ae kt" href="https://github.com/ethereum/go-ethereum" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hu">也无法获取</strong> </a>，因此排除了使用智能合约来存储块的可信签名者。</p><p id="c05a" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">Clique还需要嵌入一个投票协议，用于添加或删除可信签名者，而不需要添加任何额外的字段。</p><h1 id="eb18" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">巧妙重新利用不必要的字段</h1><p id="ac84" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">这就是<strong class="jx hu"> <em class="kz">聪明的</em> </strong>部分的用武之地，他们只是将头中的<code class="eh la lb lc ld b">extraData</code>字段从32字节扩展到65字节，这样他们就可以将<code class="eh la lb lc ld b"><a class="ae kt" href="https://en.bitcoin.it/wiki/Secp256k1" rel="noopener ugc nofollow" target="_blank">secp256k1</a> </code>矿工签名放在那个字段中。在PoW版本中，<code class="eh la lb lc ld b">extraData</code>字段用于<em class="kz"> fun </em>消息，增加额外的33个字节对于现有客户端来说可能不是什么大事。<em class="kz">顺便说一句，我确实必须定制我的版本</em><a class="ae kt" href="https://github.com/ethereum/web3.py" rel="noopener ugc nofollow" target="_blank"><em class="kz">web 3 Python</em></a><em class="kz">来忽略额外的字节，因为它在使用Rinkeby的早期版本中会导致错误。</em></p><p id="58e1" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">在<code class="eh la lb lc ld b">extraData</code>字段中添加miner签名使得块头中的miner部分变得不必要，因此他们使用它来让授权签名者提议一个新的或当前的签名者，由所有当前的授权签名者投票。</p><p id="ecac" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">另外，<code class="eh la lb lc ld b">nonce</code>字段在PoA中也不使用，所以在Clique中它被用作投票字段。带有<strong class="jx hu">0x ffffffffffffff</strong>的授权签名者的nonce表示添加提议的签名者，而带有<strong class="jx hu">0x 000000000000000</strong>的<code class="eh la lb lc ld b">nonce</code>表示踢出提议的签名者。<code class="eh la lb lc ld b">nonce</code>和miner字段在正常程序块中不进行投票时被设置为零。Clique投票协议允许客户端统计每个提议签名者的投票(同时同步)以确定当前有效的授权签名者，从而根据授权签名者的动态列表验证每个块头。<code class="eh la lb lc ld b">EPOCH_LENGTH</code>用作设置检查点和重置未决投票之前允许的块数。检查点还用于在<code class="eh la lb lc ld b">extraData</code>字段中发布授权签名者的列表。这样，客户端可以从一个检查点开始，而不是统计自创世纪区块以来提议签名者的所有投票。</p><h1 id="c4ee" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">Clique PoA有多安全？</h1><p id="d441" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">Clique要求N/2 +1个签名者是诚实的签名者，因此简单多数是运行安全网络所需要的。拜占庭式的(不诚实的)签名者在被踢出之前不会造成太大的伤害，因为每个签名者每N/2 + 1个街区只能签名一次。一旦一个签名者被认为是拜占庭人，其他签名者可以投票将该节点踢出局。一个有趣的转折是，如果拜占庭签名者在被发现是拜占庭之后试图审查投票反对它的区块。通过将节点的签名频率限制为N/2中的1来反击这种类型的审查攻击，这意味着51%的网络将是拜占庭式的。</p><h1 id="72d3" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">结论</h1><p id="60d6" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hm dt translated">Clique PoA被巧妙地整合到以太坊中，对建筑的破坏最小。Clique看起来具有与PBFT相同的安全性(<a class="ae kt" href="http://pmg.csail.mit.edu/papers/osdi99.pdf" rel="noopener ugc nofollow" target="_blank">实用的拜占庭容错能力</a>)，同时提供卓越的可伸缩性，因为Clique PoA在签名者之间只有一轮消息，而PBFT有三轮。我希望看到更多的企业实现PoA和Clique，特别是在用户不完全被信任的情况下。完全受信任的系统最好使用<a class="ae kt" href="https://raft.github.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hu"> Raft </strong> </a>，就像<a class="ae kt" href="https://github.com/jpmorganchase/quorum" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hu"> Quorum </strong> </a>那样每秒钟可以生成20个块。<a class="ae kt" rel="noopener" href="/coinmonks/quorum-blockchain-consensus-algorithms-ab38790091">参见我之前关于Raft和Quorum的文章了解更多信息。</a></p><p id="54d8" class="pw-post-body-paragraph jv jw ht jx b jy ku ka kb kc kv ke kf kg kw ki kj kk kx km kn ko ky kq kr ks hm dt translated">你觉得这篇文章怎么样？如果你喜欢它或者学到了什么，请留下你的掌声！<a class="ae kt" href="https://darkblock.io/" rel="noopener ugc nofollow" target="_blank"> DarkBlock.io </a>是一家区块链企业发展公司，我们一直在接纳新客户。通过<a class="ae kt" href="mailto:sheffield@darkblock.io" rel="noopener ugc nofollow" target="_blank"> sheffield@darkblock.io </a>联系我或访问我们的网站<a class="ae kt" href="https://darkblock.io/" rel="noopener ugc nofollow" target="_blank"> DarkBlock.io </a>！</p><blockquote class="le"><p id="f8fc" class="lf lg ht bd lh li lj lk ll lm ln ks ek translated"><a class="ae kt" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="lp lq lr ls lt iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lo"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>