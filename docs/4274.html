<html>
<head>
<title>A Python Implementation of GoofyCoin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GoofyCoin的Python实现</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/a-python-implementation-of-goofycoin-ee3fa8a257b8?source=collection_archive---------3-----------------------#2021-03-26">https://medium.com/coinmonks/a-python-implementation-of-goofycoin-ee3fa8a257b8?source=collection_archive---------3-----------------------#2021-03-26</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="1880" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">简单而无用的加密货币</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/785ef14f4b405ea00d134de3ea26746c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GdzPBj_nxMAiXoOG"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Photo by <a class="ae jy" href="https://unsplash.com/@lightsonfire?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Liam Read</a> on <a class="ae jy" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2a76" class="jz ka ht bd kb kc kd ke kf kg kh ki kj iz kk ja kl jc km jd kn jf ko jg kp kq dt translated">1 —简介</h1><p id="74b5" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">GoofyCoin大概是我们能想象到的最简单的(因此也是最没用的)加密货币。这在《比特币和加密货币技术》一书的第一章中有所描述，该书由Arvind Narayanan、Joseph Bonneau、Edward Felten、Andrew Miller、Steven Goldfeder撰写，由普林斯顿大学出版社于2016年出版。作为一名区块链初学者，出于学习目的，我尝试用Python实现它。我确信我的代码包含错误，也许我对书中描述的GoofyCoin规则的理解不是100%准确。如果任何人发现这些问题，请在这里随意评论。</p><p id="02ec" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">一个jupyter笔记本，里面有这个介绍，对GoofyCoin的解释(如书中所述)，还有我的代码可以在下面的GitHub中找到:<a class="ae jy" href="https://github.com/thiagoguimaraesdf/goofyCoinPython" rel="noopener ugc nofollow" target="_blank">https://github.com/thiagoguimaraesdf/goofyCoinPython</a></p><h1 id="f831" class="jz ka ht bd kb kc kd ke kf kg kh ki kj iz kk ja kl jc km jd kn jf ko jg kp kq dt translated">2 — GoofyCoin规则和协议</h1><p id="7e43" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">两个主要的GoofyCoin规则是:</p><pre class="jj jk jl jm fq ls lt lu lv aw lw dt"><span id="f28b" class="lx ka ht lt b fv ly lz l ma mb">(i) Goofy, which is a unique entity, can create new coins whenever he wants and these newly created coins belong to him.</span><span id="4c75" class="lx ka ht lt b fv mc lz l ma mb">(ii) Hoever owns a GoofyCoin can transfer it on to someone else. Transferring a coin is not simply a matter of sending the coin data structure to the recipient — it’s done using cryptographic operations.</span></pre><p id="fe8a" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">创建新GoofyCoin的协议如下所述:</p><pre class="jj jk jl jm fq ls lt lu lv aw lw dt"><span id="94c0" class="lx ka ht lt b fv ly lz l ma mb">"To create a coin, Goofy generates a unique coin ID uniqueCoinID that he’s never generated before<br/>and constructs the string “CreateCoin [ uniqueCoinID ]”. He then computes the digital signature of<br/>this string with his secret signing key. The string, together with Goofy’s signature, is a coin. Anyone<br/>can verify that the coin contains Goofy’s valid signature of a CreateCoin statement, and is therefore a<br/>valid coin."</span></pre><p id="b56c" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">转移现有硬币的协议描述如下:</p><pre class="jj jk jl jm fq ls lt lu lv aw lw dt"><span id="30a9" class="lx ka ht lt b fv ly lz l ma mb">"Let’s say Goofy wants to transfer a coin that he created to Alice. To do this he creates a new<br/>statement that says “Pay this to Alice” where “this” is a hash pointer that references the coin in<br/>question. And as we saw earlier, identities are really just public keys, so “Alice” refers to Alice’s public<br/>key. Finally, Goofy signs the string representing the statement. Since Goofy is the one who originally<br/>owned that coin, he has to sign any transaction that spends the coin. Once this data structure<br/>representing Goofy’s transaction signed by him exists, Alice owns the coin. She can prove to anyone<br/>that she owns the coin, because she can present the data structure with Goofy’s valid signature.<br/>Furthermore, it points to a valid coin that was owned by Goofy. So the validity and ownership of coins<br/>are self‐evident in the system.</span><span id="bee1" class="lx ka ht lt b fv mc lz l ma mb">Once Alice owns the coin, she can spend it in turn. To do this she creates a statement that says, “Pay<br/>this coin to Bob’s public key” where “this” is a hash pointer to the coin that was owned by her. And of<br/>course, Alice signs this statement. Anyone, when presented with this coin, can verify that Bob is the<br/>owner. They would follow the chain of hash pointers back to the coin’s creation and verify that at<br/>each step, the rightful owner signed a statement that says “pay this coin to [new owner]”."</span></pre><p id="8dd3" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">书中对GoofyCoin规则进行了更正式的总结:</p><pre class="jj jk jl jm fq ls lt lu lv aw lw dt"><span id="caeb" class="lx ka ht lt b fv ly lz l ma mb">● Goofy can create new coins by simply signing a statement that he’s making a new coin with a<br/>unique coin ID.</span><span id="04b7" class="lx ka ht lt b fv mc lz l ma mb">● Whoever owns a coin can pass it on to someone else by signing a statement that saying, “Pass<br/>on this coin to X” (where X is specified as a public key)</span><span id="36de" class="lx ka ht lt b fv mc lz l ma mb">● Anyone can verify the validity of a coin by following the chain of hash pointers back to its<br/>creation by Goofy, verifying all of the signatures along the way.</span></pre><h1 id="eb30" class="jz ka ht bd kb kc kd ke kf kg kh ki kj iz kk ja kl jc km jd kn jf ko jg kp kq dt translated">3 —实施代码</h1><h2 id="16d6" class="lx ka ht bd kb md me mf kf mg mh mi kj la mj mk kl le ml mm kn li mn mo kp mp dt translated">3.1 —库导入</h2><p id="f8df" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">这里使用的主要库是ecdsa，用于生成数字签名，以及Haslib，用于使用散列函数(SHA-3)</p><p id="f643" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">更多关于ecdsa的信息:【https://pypi.org/project/ecdsa/ T2】</p><p id="fb7a" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">更多关于hashlib的信息:【https://docs.python.org/3/library/hashlib.html T4】</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mq mr l"/></div></figure><h2 id="f96c" class="lx ka ht bd kb md me mf kf mg mh mi kj la mj mk kl le ml mm kn li mn mo kp mp dt translated">3.2 —我们的随机字符串生成器</h2><p id="3d4a" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">定义一个函数生成一个长度为n的随机字符串<br/> <strong class="kt hu"> <em class="ms">注意:</em> </strong> <em class="ms">生成一个长度为n的随机字符串可能有更多的随机化算法。我在这里用了一个非常简单的方法。</em></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mq mr l"/></div></figure><h2 id="e678" class="lx ka ht bd kb md me mf kf mg mh mi kj la mj mk kl le ml mm kn li mn mo kp mp dt translated">3.3 —创建愚蠢的密钥</h2><p id="f7fc" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">我们将在GoofyCoin类之外创建真正的Goofy签名和公钥。我在这里使用ECDSA库(和algo)来生成并进一步验证高飞私人签名。<br/>有关ECDSA algo的更多信息:<a class="ae jy" href="https://www.cs.miami.edu/home/burt/learning/Csc609.142/ecdsa-cert.pdf" rel="noopener ugc nofollow" target="_blank">https://www . cs . Miami . edu/home/Burt/learning/CSC 609.142/ECD sa-cert . pdf</a></p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mq mr l"/></div></figure><h2 id="26fd" class="lx ka ht bd kb md me mf kf mg mh mi kj la mj mk kl le ml mm kn li mn mo kp mp dt translated">3.4 —呆瓜类</h2><p id="5406" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">创建GoofyCoin类的代码——它将使我们能够(I)创建一个硬币——仅用Goofy秘密签名，(ii)转移一个硬币；以及(iii)检查硬币是否有效——在下面进行了描述和很好的评论。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mq mr l"/></div></figure><h1 id="72d8" class="jz ka ht bd kb kc kd ke kf kg kh ki kj iz kk ja kl jc km jd kn jf ko jg kp kq dt translated">4 —测试我们的硬币</h1><p id="c1f9" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">我在这里对以下情况进行测试:</p><blockquote class="mt mu mv"><p id="1b74" class="kr ks ms kt b ku ln iu kw kx lo ix kz mw lp lc ld mx lq lg lh my lr lk ll lm hm dt translated">#测试1:验证一枚全新的硬币</p><p id="fc92" class="kr ks ms kt b ku ln iu kw kx lo ix kz mw lp lc ld mx lq lg lh my lr lk ll lm hm dt translated">#测试2:尝试转移一枚不存在的硬币</p><p id="a5f5" class="kr ks ms kt b ku ln iu kw kx lo ix kz mw lp lc ld mx lq lg lh my lr lk ll lm hm dt translated">#测试3:尝试创造一个没有愚蠢的秘密密钥的新硬币</p><p id="d799" class="kr ks ms kt b ku ln iu kw kx lo ix kz mw lp lc ld mx lq lg lh my lr lk ll lm hm dt translated">#测试4:验证已经被转移一次的硬币</p><p id="a0e2" class="kr ks ms kt b ku ln iu kw kx lo ix kz mw lp lc ld mx lq lg lh my lr lk ll lm hm dt translated">#测试5:验证已经被转移两次的硬币</p><p id="befc" class="kr ks ms kt b ku ln iu kw kx lo ix kz mw lp lc ld mx lq lg lh my lr lk ll lm hm dt translated">#测试6:验证Max转让的假硬币</p></blockquote><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mq mr l"/></div></figure><h1 id="e5a2" class="jz ka ht bd kb kc kd ke kf kg kh ki kj iz kk ja kl jc km jd kn jf ko jg kp kq dt translated">5 —结束语</h1><p id="1ac9" class="pw-post-body-paragraph kr ks ht kt b ku kv iu kw kx ky ix kz la lb lc ld le lf lg lh li lj lk ll lm hm dt translated">尽管是一枚劣质硬币，但GoofyCoin保证了一个中央权力机构(不幸的是在这种情况下是傻瓜)有能力创造硬币，并通过有效的验证方法转移它们。任何收到硬币的人都可以通过跟踪硬币的“路线”并检查转账是否由正确的用户进行，来检查硬币是否有效。</p><p id="a0da" class="pw-post-body-paragraph kr ks ht kt b ku ln iu kw kx lo ix kz la lp lc ld le lq lg lh li lr lk ll lm hm dt translated">高飞硬币的主要问题是任何人都可以花掉自己的硬币。我们没有有效的方法来保证不良用户不会将他的硬币转移给两个或更多不同的人。这就是为什么我们叫它傻瓜硬币</p></div></div>    
</body>
</html>