<html>
<head>
<title>Bitcoin Halving: A Technical Deep Dive</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币减半:技术深度跳水</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/bitcoin-halving-a-technical-deep-dive-hacker-noon-47976e0fd30c?source=collection_archive---------2-----------------------#2020-12-06">https://medium.com/coinmonks/bitcoin-halving-a-technical-deep-dive-hacker-noon-47976e0fd30c?source=collection_archive---------2-----------------------#2020-12-06</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/56562038b1bd8f9e18b3c799a50ce8c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*moLca96m3zcHKeLGEj2AHg.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">📒 <a class="ae jf" href="https://amzn.to/2Ym4gz6" rel="noopener ugc nofollow" target="_blank">Book Bitcoin from theory to practice (Amazon)</a></figcaption></figure><p id="093a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">今天(2020年5月11日)对比特币来说是非常重要的一天。今天我们将减半！</p><p id="15b8" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">减半是一个经常发生的事件，每4年矿工得到的解决工作证明的奖励被减半。</p><p id="3b97" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">更准确地说:每210，000个街区，奖励就会减半。每10分钟开采一个区块。这就是为什么210.000块相当于1458天，那相当于3.99年！</p><p id="4ac9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">此时此刻，区块链有629.992个街区。当一个矿工将找到一个高度为630.000的新块时，12年将从genesis块过去，奖励将是每块6.25个比特币而不是12.5个比特币。</p><p id="f6d5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以在regtest环境中重现相同的行为。</p><p id="95d1" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">请注意:在regtest中，减半发生在不同的高度。我们需要挖掘449个区块，以便拥有与mainnet相同的场景。在高度为449的区块，奖励是12.5个比特币，当我们挖掘另一个区块时，奖励将是6.25个比特币。</p><blockquote class="ke kf kg"><p id="ccb8" class="jg jh kh ji b jj jk jl jm jn jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kd hm dt translated"><em class="ht">在行动中</em></p></blockquote><p id="5e74" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">首先，我们需要使用没有块的regtest环境。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="c3fe" class="ku kv ht kq b fv kw kx l ky kz">$ bitcoin-cli getblockchaininfo<br/>{<br/>  "chain": "regtest",<br/>  "blocks": 0,<br/>  "headers": 0,<br/>  "bestblockhash": "0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206",<br/>  "difficulty": 4.656542373906925e-10,<br/>  "mediantime": 1296688602,<br/>  "verificationprogress": 1,<br/>  "initialblockdownload": true,<br/>  "chainwork": "0000000000000000000000000000000000000000000000000000000000000002",<br/>....</span></pre><p id="8b1e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以使用<em class="kh"> generatetoaddress </em>命令挖掘449个块。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="0bbf" class="ku kv ht kq b fv kw kx l ky kz">bitcoin-cli generatetoaddress 449 $(bitcoin-cli getnewaddress '' 'bech32')</span></pre><p id="5490" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们得到许多块散列，我们可以探索最后一个并得到它的<strong class="ji hu"> coinbase </strong>。<strong class="ji hu"> coinbase </strong>总是块的第一个事务。这是一个特殊的交易，矿工为自己创造，以获得奖励。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="8c75" class="ku kv ht kq b fv kw kx l ky kz">$ LAST_BLOCK_HASH=$(bitcoin-cli getbestblockhash)<br/><br/>$ TX=$(bitcoin-cli getblock $LAST_BLOCK_HASH | jq -r '.tx | last')<br/><br/>$ bitcoin-cli getrawtransaction $TX 2<br/><br/>{<br/>  "txid": "7fb99af2ab497b94a6de2dcd91d3a5a97d31eaf8d0f8dd43ff4100a2f78efd8a",<br/>  "hash": "ee38f615f26776913cf1b2a7a351c4f80e1777cbf3950fc22be42c2eafa7450b",<br/>  "version": 2,<br/>  "size": 170,<br/>  "vsize": 143,<br/>  "weight": 572,<br/>  "locktime": 0,<br/>  "vin": [<br/>    {<br/>      "coinbase": "02c1010101",<br/>      "sequence": 4294967295<br/>    }<br/>  ],<br/>  "vout": [<br/>    {<br/>      "value": 12.50000000,<br/>      "n": 0,<br/>      "scriptPubKey": {<br/>        "asm": "0 5f04362ef3474238aba0b9691c754285ad5dc735",<br/>        "hex": "00145f04362ef3474238aba0b9691c754285ad5dc735",<br/>        "reqSigs": 1,<br/>        "type": "witness_v0_keyhash",<br/>        "addresses": [<br/>          "bcrt1qtuzrvthngapr32aqh953ca2zskk4m3e42nqdtz"<br/>        ]<br/>      }<br/>    },<br/>    {<br/>      "value": 0.00000000,<br/>      "n": 1,<br/>      "scriptPubKey": {<br/>        "asm": "OP_RETURN aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf9",<br/>        "hex": "6a24aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf9",<br/>        "type": "nulldata"<br/>      }<br/>    }<br/>  ],<br/>  "hex": "020000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff0502c1010101ffffffff02807c814a000000001600145f04362ef3474238aba0b9691c754285ad5dc7350000000000000000266a24aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf90120000000000000000000000000000000000000000000000000000000000000000000000000",<br/>  "blockhash": "1eb8af036a9b6613c10d1148ef64ee2c86f166085715f4d01c89907fa5086296",<br/>  "confirmations": 1,<br/>  "time": 1606386368,<br/>  "blocktime": 1606386368<br/>}</span></pre><p id="381c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以读出<strong class="ji hu">“值”:12.50000000 </strong>。这是奖励。现在让我们去挖掘另一个块，以复制相同的mainnet的行为。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="10e3" class="ku kv ht kq b fv kw kx l ky kz">$ bitcoin-cli generatetoaddress 1 $(bitcoin-cli getnewaddress '' 'bech32')<br/><br/>$ LAST_BLOCK_HASH=$(bitcoin-cli getbestblockhash)<br/><br/>$ TX=$(bitcoin-cli getblock $LAST_BLOCK_HASH | jq -r '.tx | last')<br/><br/>$ bitcoin-cli getrawtransaction $TX 2<br/>{<br/>  "txid": "2c8a9cbe986cd3a05aff1cb70183e8e9489916fd2e3dfe73a0772e99edc899c0",<br/>  "hash": "5c94f6bdbd32032f4ae3d5c6c4dde014e7bb60a7cda9151ea253b3856c2f5b0e",<br/>  "version": 2,<br/>  "size": 170,<br/>  "vsize": 143,<br/>  "weight": 572,<br/>  "locktime": 0,<br/>  "vin": [<br/>    {<br/>      "coinbase": "02c2010101",<br/>      "sequence": 4294967295<br/>    }<br/>  ],<br/>  "vout": [<br/>    {<br/>      "value": 6.25000000,<br/>      "n": 0,<br/>      "scriptPubKey": {<br/>        "asm": "0 1f638364fc2154626cfeb2ffdbed23289a037043",<br/>        "hex": "00141f638364fc2154626cfeb2ffdbed23289a037043",<br/>        "reqSigs": 1,<br/>        "type": "witness_v0_keyhash",<br/>        "addresses": [<br/>          "bcrt1qra3cxe8uy92xym87ktlahmfr9zdqxuzryctd4h"<br/>        ]<br/>      }<br/>    },<br/>    {<br/>      "value": 0.00000000,<br/>      "n": 1,<br/>      "scriptPubKey": {<br/>        "asm": "OP_RETURN aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf9",<br/>        "hex": "6a24aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf9",<br/>        "type": "nulldata"<br/>      }<br/>    }<br/>  ],<br/>  "hex": "020000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff0502c2010101ffffffff0240be4025000000001600141f638364fc2154626cfeb2ffdbed23289a0370430000000000000000266a24aa21a9ede2f61c3f71d1defd3fa999dfa36953755c690689799962b48bebd836974e8cf90120000000000000000000000000000000000000000000000000000000000000000000000000",<br/>  "blockhash": "04eec4981e77406bb79284f89dd3afa7f028615c4e1e4fa2bed2abc8cc28f11f",<br/>  "confirmations": 1,<br/>  "time": 1606386591,<br/>  "blocktime": 1606386591<br/>}</span></pre><p id="49c6" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们可以读出<strong class="ji hu">“值”:6.25000000 </strong>，减半完成！</p><p id="2557" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">请记住:首先，您可以找到我们的<a class="ae jf" href="https://github.com/bitcoin-dalla-teoria-alla-pratica/Bitcoin-in-Action/blob/master/Video%201%20-%20Halving/main.sh?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank">复位器</a> y点编号2的代码，不要错过这个意大利语视频！🇮🇹</p><figure class="kl km kn ko fq iu"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="8fda" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">请继续收听本台，为下一篇文章做准备。</p></div><div class="ab cl lc ld hb le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hm hn ho hp hq"><p id="3c68" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="kh">原载于2020年12月6日https://hackernoon.com</em><a class="ae jf" href="https://hackernoon.com/bitcoin-halving-a-technical-deep-dive-8y1a3zfb" rel="noopener ugc nofollow" target="_blank"><em class="kh"/></a><em class="kh">。</em></p></div></div>    
</body>
</html>