<html>
<head>
<title>Bitcoin white paper explained (PART 2/3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币白皮书解读(第2/3部分)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/bitcoin-white-paper-explained-part-2-4-d79fbc5e2adf?source=collection_archive---------1-----------------------#2018-05-05">https://medium.com/coinmonks/bitcoin-white-paper-explained-part-2-4-d79fbc5e2adf?source=collection_archive---------1-----------------------#2018-05-05</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="51c7" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">工作证明解释</h2></div><p id="1f96" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是<a class="ae ke" rel="noopener" href="/@sgerov/bitcoin-white-paper-explained-part-1-4-16cba783146a">第一部分</a>的延续，在那里我分析了<a class="ae ke" href="https://bitcoin.org/bitcoin.pdf" rel="noopener ugc nofollow" target="_blank">最初的比特币论文</a>直到<em class="kf">工作证明(PoW) </em>。让我们从那里开始。</p><p id="caf3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">文章指出，如果我们在对等的基础上实现时间戳服务器，我们需要工作证明。让我们先看看它是什么，然后我们再来讨论手头的问题。</p><blockquote class="kg"><p id="9409" class="kh ki ht bd kj kk kl km kn ko kp kd ek translated">交易新手？尝试<a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a>或<a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a></p></blockquote><h1 id="89b1" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">4.工作证明</h1><p id="e697" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">在<a class="ae ke" rel="noopener" href="/@sgerov/bitcoin-white-paper-explained-part-1-4-16cba783146a">第1部分</a>中，我们看到阿沙-256函数从某个数据输入中产生一个固定长度(256位)的字符串(十六进制)。让我们来看看这样一个散列是如何查找一些输入的(“alice”、“ALICE”和“Alice”)。输出以十六进制和二进制表示(为简洁起见，这只是开头):</p><figure class="lo lp lq lr fq ls fe ff paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="fe ff ln"><img src="../Images/6b3681eb5700cb8d938b8c5cc1272c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-P3JJz82sV8R1aiKpNPYDQ.png"/></div></div></figure><p id="f5fc" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如您所见，输入发生微小变化时，输出会发生剧烈变化，但当输入不变时，输出会保持不变。</p><h2 id="98d0" class="lz kr ht bd ks ma mb mc kw md me mf la jr mg mh lc jv mi mj le jz mk ml lg mm dt translated">哈希什粉末</h2><p id="1b5e" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">Hashcash利用了I/O的这种不对称性来确保某个操作有相关的成本。</p><p id="2d6e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">一个例子是减少垃圾邮件:在发送邮件之前，我给你一个需要解决的问题，这会消耗你一些计算能力(比如电力和金钱)。它将足够小，以至于发送一封电子邮件是便宜的，但足以避免垃圾邮件发送者发送许多。挑战会是什么？</p><p id="57b0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">假设您正在发送的电子邮件的内容是“爱丽丝”。从上表中我们知道应用于内容的阿沙-256的输出从3(二进制的0011)开始。我可以给你的挑战是找到一个数字，当附加到内容(即“Alice24”)时，将产生一个二进制输出，在开始时有一定数量的0。我为什么要这么做？嗯，只是数学而已。你可以把二进制输出想象成一系列的掷硬币(我们不知道从某个输入中得到什么输出，所以0和1的序列是随机的，就像掷硬币的机会一样)。从附加到爱丽丝身上的某个数字中得到一个0的几率有多大？嗯，50%(是抛一个硬币)。有两个连续的0？25%.以此类推…我问你的0越多，挑战就越难。</p><p id="fbc2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">所以我们假设k是我们要的0的个数。给定输入“Alice”和挑战<em class="kf"> k=2 </em>:</p><figure class="lo lp lq lr fq ls fe ff paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="fe ff mn"><img src="../Images/b76461312fc219c9cd8379d995dac11a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqg9_UxYc_BVZWn2bWLxJg.png"/></div></div></figure><p id="fd56" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们通过3次计算散列找到了一个解决方案。每个人都可以只计算一次散列，并验证我们正确地解决了挑战。我们可以通过要求输出中出现更多的0来使挑战变得更加困难(k=20平均需要100万次尝试)。</p><p id="894d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">比特币如何利用这一点？</p><h2 id="4091" class="lz kr ht bd ks ma mb mc kw md me mf la jr mg mh lc jv mi mj le jz mk ml lg mm dt translated">比特币力量</h2><p id="126c" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">我们需要找到一种方法来激励分布式机器就形成区块链的块内的事务的当前状态和顺序达成共识(投票)。如果在生成每个块的过程中没有相关联的成本，那么任何人操纵它都是没有成本的(例如在垃圾邮件阻止示例中)，因此该系统根据定义将是可黑客攻击的。</p><p id="e9cf" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过应用Hashcash PoW的变体，我们可以实现这一点:</p><p id="f0e1" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">与我们在上一个例子中使用的“Alice”不同，比特币所做的是对块的头部应用哈希函数<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/4741ca5dc8fd364352ebae3ba9bfb701f1847d26/src/primitives/block.h#L107" rel="noopener ugc nofollow" target="_blank">(其中包括之前的块哈希、时间戳和随机数等)。随机数是我们必须增加的</a><a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/4741ca5dc8fd364352ebae3ba9bfb701f1847d26/src/primitives/block.h#L29" rel="noopener ugc nofollow" target="_blank">数</a>，直到我们满足我们正在解决的0挑战，就像在我们的例子中一样。一个直接的问题出现了:nonce是一个由32位定义的数字(允许大约40亿次尝试)，对于一个拥有当前技术的矿工来说，这不是一个很容易解决的挑战吗？确实是！这就是为什么在每个块中都有一个extraNonce(在coinbase事务中——检查第6节),每当计算出40亿个散列没有成功时，这个extra nonce就必须被挖掘器修改。对extraNonce的修改改变了Merkle树的根，因此我们可以再次从0开始计算散列。并重复。什么是Merkle树？这在第三部的<a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-white-paper-explained-part-3-3-c06c1791a31b">中有所涉及。现在，只需考虑事务的变化和报头散列的变化，因此我们可以通过nonce生成散列空间。</a></p><p id="19da" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这就是开采一个区块的方法。由于网络中有多个节点，因此它们必须通过协商做出决策。矿工所认为的事实是通过它所执行的PoW来验证的，而不是像IP地址这样的东西，IP地址可能会被一个获得许多IP的单个实体所欺骗(记住PoW取决于CPU周期，这具有与之相关的成本)。</p><p id="a00d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">决策是通过最长的链条实现的:</p><p id="7a35" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">两个节点(一个在阿姆斯特丹，一个在巴塞罗那)同时开采一个区块，因此存在竞争条件(称为分叉)。每个位置周围的节点将首先接收两个链中的一个，并立即在其上开始工作。靠近阿姆斯特丹的节点将继续在链A上工作(它们接收新数据块的速度更快)，而巴塞罗那的节点将在另一个链b上工作。两个链的最新数据块哈希将有所不同(由于不同的报头，事务可能不相同，顺序也不相同，或者时间戳略有不同)。一旦在链(即，A)上挖掘出另一个块，该节点将把它传播到整个网络，并且相信另一个链(B)是正确的链的节点将看到它们不再在迄今为止最长的链上(它们的最新块成为孤儿，因为它们在主链之外),因此将不得不开始在链A上工作。</p><p id="ad46" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果大部分CPU由诚实的节点持有，他们的链将超过攻击者:改变过去的块并赶上<a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-white-paper-explained-part-3-3-c06c1791a31b">的概率按指数规律减少</a>每增加一个块，因为攻击者将不得不重做那个块的工作，在它之后和超过当前节点的所有块都工作。</p><p id="ccf4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">PoW挑战的难度会自动更新(<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/5961b23898ee7c0af2626c46d5d70e80136578d3/src/pow.cpp#L49" rel="noopener ugc nofollow" target="_blank">通过软件</a>——它是任何节点运行和验证的共识规则的一部分)，因此它会考虑到硬件速度的提高和财务利益的变化(交易奖励/费用)，从而保持足够的难度。难度取决于目标，即我们在生成哈希时试图找到的带有前导0的256位数。在比特币中，它由一个浮点数表示，以便在进行调整时更加灵活(因此我们可以调整到“2个0.5”，而在Hashcash中它是整数)。</p><p id="6aae" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">每10分钟有一个块的期望平均挖掘速度(孤儿块/网络速度之间的良好平衡的估计)，其每2016个块自动调整<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/0a8b7b4b33c9d78574627fc606267e2d8955cd1c/src/chainparams.cpp#L89" rel="noopener ugc nofollow" target="_blank">。按照这种速度，本应需要两周时间，如果需要更多时间，2016年下一个区块的难度会降低，并重复这一过程。</a></p><h1 id="9593" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz mo ja lc jc mp jd le jf mq jg lg lh dt translated">5.网络</h1><p id="7116" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">为了正确理解PoW，我们在第4节讨论的原始论文中描述了所有这些。网络表现如下:</p><ul class=""><li id="778a" class="mr ms ht jk b jl jm jo jp jr mt jv mu jz mv kd mw mx my mz dt translated">新事务被广播到所有(不必是100%)节点</li><li id="42a2" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">每个节点将事务收集到一个块中</li><li id="917d" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">一旦找到足够多的事务，就会对它们进行验证</li><li id="6240" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">一旦有效，就对它们执行PoW以形成块</li><li id="c747" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">通过执行新块的幂，节点在该时刻已经接受了链</li></ul><p id="e044" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">最长的链被认为是正确的，但其他分支被保留，以防它们变得更大(正如我们在第4节中看到的)</p><p id="34e5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">有一个名为genesis block的区块，它是区块链中的第一个区块，由中本聪在比特币核心中进行<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/0a8b7b4b33c9d78574627fc606267e2d8955cd1c/src/chainparams.cpp#L38" rel="noopener ugc nofollow" target="_blank">硬编码。</a></p><h1 id="170e" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz mo ja lc jc mp jd le jf mq jg lg lh dt translated">6.动机</h1><p id="5990" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">每个挖掘的块都有一个名为coinbase transaction的第一个事务。它是对矿工尽自己的力量给予奖励的那个。这就是比特币最初投入流通的方式，每21万块<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/0a8b7b4b33c9d78574627fc606267e2d8955cd1c/src/chainparams.cpp#L77" rel="noopener ugc nofollow" target="_blank"/>(~ 4年)的奖励金额<a class="ae ke" href="https://github.com/bitcoin/bitcoin/blob/a07e8caa5d5000286604458e6887f57fec7fdcbb/src/validation.cpp#L1128" rel="noopener ugc nofollow" target="_blank">会减半。另一个激励因素是交易费，我们看到</a>中的<a class="ae ke" rel="noopener" href="/@sgerov/bitcoin-white-paper-explained-part-1-4-16cba783146a">是由未支出的交易投入定义的。当奖励减半时，将会有一个激励仅仅基于此的时刻。</a></p><p id="b50c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">遵守规则可以确保获利，而不遵守规则很容易让攻击者陷入困境。即使有人得到的CPU比诚实节点多，他也会发现遵守规则比破坏漏洞系统更有利可图(他得到的硬币比任何人加起来都多)。</p></div><div class="ab cl nf ng hb nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="hm hn ho hp hq"><p id="f655" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">那么现在我们知道了什么是权力，我们真需要它吗？这是克服拜占庭失败的一种方式，这基本上意味着所有的参与者(节点)必须在同一件事情上达成一致(在特定时间点的区块链内容)。在没有电源的情况下，任何节点都可以操纵该链并假装其版本是正确的，但是由于有CPU限制，这样做的成本太高。</p><p id="366d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们安全吗？嗯，从理论上讲，如果三大矿业供应商决定联手，他们可以随意改变区块链。事实是，博弈论告诉我们，这不会发生，因为遵守规则比质疑球洞系统更有利可图。</p><p id="28cb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在<a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-white-paper-explained-part-3-3-c06c1791a31b">下一部分</a>中，我们将看到比特币实现的一些优化。</p><p id="989d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果有帮助，请鼓掌，并在Twitte上关注我。</p><blockquote class="kg"><p id="3bd6" class="kh ki ht bd kj kk kl km kn ko kp kd ek translated">加入Coinmonks <a class="ae ke" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ke" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae ke" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="lz kr ht bd ks ma nm mc kw md nn mf la jr no mh lc jv np mj le jz nq ml lg mm dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="mr ms ht jk b jl li jo lj jr nr jv ns jz nt kd mw mx my mz dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae ke" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated"><a class="ae ke" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae ke" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated"><a class="ae ke" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae ke" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated"><a class="ae ke" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae ke" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">开发人员的最佳加密API</li><li id="b359" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">最佳<a class="ae ke" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="mr ms ht jk b jl na jo nb jr nc jv nd jz ne kd mw mx my mz dt translated">杠杆代币的终极指南</li></ul></div></div>    
</body>
</html>