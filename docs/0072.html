<html>
<head>
<title>Vehicle Record and Service Maintenance on Blockchain using Ethereum, Solidity &amp; Truffle..(Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用以太坊、Solidity &amp; Truffle在区块链上进行车辆记录和服务维护..(第一部分)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/vehicle-record-and-service-maintenance-on-blockchain-using-ethereum-solidity-truffle-part-1-2aa1d2e86a44?source=collection_archive---------0-----------------------#2018-01-25">https://medium.com/coinmonks/vehicle-record-and-service-maintenance-on-blockchain-using-ethereum-solidity-truffle-part-1-2aa1d2e86a44?source=collection_archive---------0-----------------------#2018-01-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="b955" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2015年，我卖掉汽车后从班加罗尔搬到了迪拜。顺便提一下，每当新主人拜访服务中心时，我都会收到来自服务中心的“感谢”电子邮件。</p><p id="39dc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">问题在于CRM记录没有更新，他们不知道新的所有者，车辆登记记录在政府和道路运输管理局(RTA)处。此外，服务请求是在笔和纸，不更新他们的客户关系管理记录。在上面的例子中，很少有实体独立地为同一辆车工作。</p><p id="4397" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">1)区块链适用于我的场景吗？</p><p id="ddfe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">区块链对场景有吸引力，它增加了效率、透明度和转型。在上述场景<strong class="is hu">中，多方</strong>参与并持有同一资产的<strong class="is hu">记录系统</strong>版本，他们的业务流程不一致或<strong class="is hu">共享信息</strong>。</p><p id="c443" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2)我可以在该场景中使用什么技术？</p><p id="bf15" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">有多个区块链平台可用，我在测试/开发节点上使用以太坊。</p><p id="47ab" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">3)如何将现有流程转化为智能合同？</p><p id="8376" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">智能合约本质上代表了存储在区块链上的“状态”,包含资产转移规则。</p><p id="5e53" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在以下存储并在以太坊上执行的智能合同中，区块链将向车主注册一辆新车，并记录车辆向新车主的任何转让。可以检索车辆维修历史记录，这将在第2部分中探讨。契约是使用Solidity实现的。Solidity是一种面向契约的高级语言，用于实现智能契约。</p><p id="13c2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">a.车辆对象是用车辆信息创建的，并保持一种状态。</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="287f" class="jx jy ht jt b fv jz ka l kb kc">struct <strong class="jt hu">Vehicle</strong> {<br/> bytes32 vin;<br/> string year;<br/> string model;<br/> string make;<br/> string vehicleOwner;<br/> int8 status; // 0 not exist, 1 created, 2 transferred…<br/>}</span></pre><p id="4a9c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">b.使用车辆管理器合同注册车辆时，将VIN与YMM和车主一起作为关键标识符。</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="f90f" class="jx jy ht jt b fv jz ka l kb kc">function <strong class="jt hu">registerVehicle</strong>(bytes32 _vin,string _year,string _model,string _make,string _vonwer) isOnwer(msg.sender) public{<br/> <br/> require(!isVehicle(_vin));<br/> vins.push(_vin);<br/> vehicleMap[_vin] = Vehicle(_vin,_year,_model, _make,_vonwer, 1); <br/> }</span></pre><p id="b709" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">c.将车辆转让给新车主时，使用VIN作为标识符，并将车辆登记在新车主名下。车辆状态代表车辆的不同状态。</p><pre class="jo jp jq jr fq js jt ju jv aw jw dt"><span id="5c13" class="jx jy ht jt b fv jz ka l kb kc">function <strong class="jt hu">transferVehicle</strong>(bytes32 _vin,string _voner) public isOnwer(msg.sender) returns(string) {<br/> require(isVehicle(_vin));<br/> vehicleMap[_vin].vehicleOwner = _voner;<br/> vehicleMap[_vin].status = 2;<br/>}</span></pre><p id="9146" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将使用Remix online Solidity编辑器来编译和测试合同。使用Remix editor的优势在于，您可以在Javascript VM上快速部署契约，它将创建一个简单的测试GUI来运行这些功能。它还包括一个调试器。</p><figure class="jo jp jq jr fq ke fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff kd"><img src="../Images/587010c698e695959da77a597610af66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AcwQtIBnY_aJhseJB2BXIA.png"/></div></div></figure><p id="ef13" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如您所见，契约已经在Javascript VM上编译和部署(点击create按钮)。可以测试一下契约的功能，点击灰色的<strong class="is hu"> <em class="kl">按钮</em> </strong>返回不需要花费“气”的<strong class="is hu"><em class="kl">getter</em></strong>和<strong class="is hu"> <em class="kl">桃按钮</em> </strong>是<strong class="is hu"><em class="kl">setter</em></strong>在网络中的每个节点上为共识 而执行<strong class="is hu"> <em class="kl">因此需要<strong class="is hu"> <em class="kl">花费气</em> </strong></em></strong></p><p id="0adb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="kl">完整的合同代码可以在</em><a class="ae km" href="https://github.com/pritamdewan/vehicle-service" rel="noopener ugc nofollow" target="_blank"><em class="kl">github</em></a><em class="kl">找到。</em></p><blockquote class="kn"><p id="de85" class="ko kp ht bd kq kr ks kt ku kv kw jn ek translated"><a class="ae km" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ky kz la lb lc ke fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff kx"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>