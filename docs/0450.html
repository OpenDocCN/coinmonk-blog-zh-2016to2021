<html>
<head>
<title>Anatomy of an ERC: An exhaustive survey</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解剖ERC:详尽的调查</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/anatomy-of-an-erc-an-exhaustive-survey-8bc1a323b541?source=collection_archive---------4-----------------------#2018-05-07">https://medium.com/coinmonks/anatomy-of-an-erc-an-exhaustive-survey-8bc1a323b541?source=collection_archive---------4-----------------------#2018-05-07</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="acd9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">合著者:哈维尔·卡萨诺瓦(卫生部顾问)</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/ab00500ffd58fb4ab32527a08bc7575a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RHSuJYgA8PM-0i6O."/></div></div></figure><p id="d26f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在Minsait，我们最近一直在从事一些令牌化项目，<strong class="is hu">当你想到令牌化时，首先想到的是以太坊的ERC</strong>，特别是广为人知的ERC20标准。但是，<em class="kb">这个ERC20是以太坊令牌化标准的全部吗？</em>答案是否定的，由于我的同事<a class="ae jo" href="https://www.linkedin.com/in/javicasanova/" rel="noopener ugc nofollow" target="_blank"> Javier </a>的工作，我将分享一份关于ERC标记化标准的详尽调查，这份调查是我个人最近一直缺少的，它将使你成为<em class="kb">“标记王”</em>(或者至少我希望如此)。让我们开始吧。</p><h2 id="4b56" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">什么是ERC？</h2><p id="b880" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated"><strong class="is hu">ERC(以太坊征求意见稿)</strong>是以太坊智能合约开发者使用的技术文档。他们定义了一套为以太坊生态系统实现令牌所需的规则。这些文档通常由开发人员创建，它们包含有关协议规范和合同描述的信息。在成为标准之前，ERC必须通过EIP(以太坊改进提案)进行修订、评论并被社区接受。实际上，ERC只是EIP的一种特殊类型。ERC是应用级的约定和标准，它们可以是不同的类型(令牌、注册名、URI方案、库、包等)。)</p><p id="2107" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">EIP可能以四种不同的状态存在</strong> : <em class="kb">草案</em>(开放审议，如ERC721不可替代令牌标准)<em class="kb">接受</em>(计划立即采用)<em class="kb">最终</em>(实施EIP，作为ERC20令牌标准)<em class="kb">延期</em>(EIP暂时被驳回，将来可能会考虑)。</p><h2 id="73aa" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated"><strong class="ak">以太坊令牌标准</strong></h2><p id="6a13" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">现在让我们快速浏览一下以太坊生态系统中的主要令牌标准。</p><h2 id="8f9c" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">ERC20令牌标准</h2><p id="8239" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">它允许实现一个<strong class="is hu">标准API，以确保令牌之间的互操作性</strong>。它提供了转移令牌、获取帐户余额、获取令牌总量以及允许令牌批准的基本功能。要定义ERC20令牌，您需要:</p><ul class=""><li id="f8ba" class="lc ld ht is b it iu ix iy jb le jf lf jj lg jn lh li lj lk dt translated">合同的地址</li><li id="ece7" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated">可用令牌的数量。</li></ul><p id="6939" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">但是，附加信息还有其他可选值，例如:</p><ul class=""><li id="3edd" class="lc ld ht is b it iu ix iy jb le jf lf jj lg jn lh li lj lk dt translated">名称，例如"<em class="kb"> Minsait Token" </em></li><li id="3b8a" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated">符号，如<em class="kb">【MNST】</em></li><li id="7ebc" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated">小数，或者你能把代币分成多少。您可以选择0到18个十进制值。</li></ul><p id="e856" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ERC20定义了两种类型的事件，<code class="eh lq lr ls lt b">Transfer(),</code>在令牌转移时触发，<code class="eh lq lr ls lt b">Approve(),</code>用于每次成功调用<code class="eh lq lr ls lt b">approve()</code>方法。这个令牌可能还包括诸如<code class="eh lq lr ls lt b">allowance(), approve(), </code>和<code class="eh lq lr ls lt b">transferFrom()</code>之类的功能，以提供高级功能并授权其他以太坊地址代表您使用您的令牌。这个以太坊地址可能是一个智能合约，用于处理令牌或只是另一个帐户。</p><p id="e749" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/20" rel="noopener ugc nofollow" target="_blank"> EIP 20 </a></p><h2 id="77eb" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">ERC223令牌标准</h2><p id="9451" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">创建此令牌是为了解决ERC20的<em class="kb">“丢失令牌”</em>问题，其中<strong class="is hu">如果用户错误地将令牌发送到未设计为处理它们的智能合约，令牌会被卡住或烧毁</strong>。对此，ERC223允许开发者管理(接受或拒绝)到达的令牌。当代币被转移到智能合约时，该合约的特殊功能<code class="eh lq lr ls lt b">tokensFallback(),</code>允许代币的接收者拒绝代币。如果没有实现该功能，则交易失败，发射方支付所有气费。在许多情况下，我们可能会使用这个函数来代替<code class="eh lq lr ls lt b">approve().</code>。这个标准的实现是为了向后兼容。</p><p id="f018" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们看一个ERC223如何工作的例子。如果我们对与ERC20不兼容的合同执行ERC20令牌转移，令牌不会被拒绝，因此会丢失/烧毁，而如果我们使用ERC223，如果交易不兼容，交易将被自动拒绝。</p><p id="da46" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与ERC20相比，ERC223的优势在于:</p><ul class=""><li id="9c88" class="lc ld ht is b it iu ix iy jb le jf lf jj lg jn lh li lj lk dt translated">用一次交易代替两次交易，节省了汽油费用。</li><li id="9605" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated">消除令牌被烧毁/丢失的问题。</li><li id="f542" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated">允许开发人员管理传入的事务。</li></ul><p id="a334" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/223" rel="noopener ugc nofollow" target="_blank"> EIP 223 </a></p><h2 id="0420" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">用于增减电源的ERC621令牌标准扩展</h2><p id="ad7f" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">它是ERC20标准的扩展。<strong class="is hu">增加了增加和减少流通代币总量的两个功能</strong>。简而言之，它提出<code class="eh lq lr ls lt b">totalSupply</code>是可以改变的。ERC20仅允许合同所有者在创建期间定义的单个令牌发射事件。使用ERC621，可通过功能<code class="eh lq lr ls lt b">increaseSupply() </code>和<code class="eh lq lr ls lt b">decreaseSupply().</code>定义新的<code class="eh lq lr ls lt b">totalSupply</code>，建议这些功能仅由合同所有者或受信任的用户访问。为了增强ERC621的功能和安全性，并避免潜在的错误，应实施溢出检查、合同属性修改和受限权限的附加功能。</p><p id="a59f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:<a class="ae jo" href="https://github.com/ethereum/EIPs/pull/621" rel="noopener ugc nofollow" target="_blank"> EIP 621 </a></p><h2 id="d0a0" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">ERC667传输和呼叫令牌标准</h2><p id="5ad2" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">它旨在将ERC20和ERC223合并为一个单一标准。其背后的想法是在ERC20标准<strong class="is hu">中引入一个<code class="eh lq lr ls lt b">transferAndCall()</code>函数，确保与ERC20令牌的向后兼容性。</strong> ERC667通过ERC20的<code class="eh lq lr ls lt b">transfer()</code>函数传递令牌，并触发事件。当交易完成并且事件被注册时，令牌使用发送方、批准的金额和一个附加参数在接收方调用<code class="eh lq lr ls lt b">transferAndCall()</code>。</p><p id="7755" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们通过一个例子来说明ERC667。如果Sam想转移20个令牌给Tom，发射器调用ERC667令牌的<code class="eh lq lr ls lt b">transferAndCall(tom, 20, data)</code>。在内部，契约从ERC20的标准调用<code class="eh lq lr ls lt b">transfer(tom, 20)</code>。当转账完成时，除了触发<code class="eh lq lr ls lt b">Transfer()</code>事件之外，函数<code class="eh lq lr ls lt b">tokenFallback(sam, 20, data)</code>被发送到转账金额的接收方。<code class="eh lq lr ls lt b">data</code>字段用于发送有关转账的附加信息，如交易目的。</p><p id="3fc9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/677" rel="noopener ugc nofollow" target="_blank"> EIP 677 </a></p><h2 id="423b" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">ERC721不可替换令牌标准</h2><p id="7bbb" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">与ERC20一起，它正在成为最知名的标志之一，也是最受关注的标志之一。你没听说过心爱的<em class="kb">crytpokites</em>吗？</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/75ea20edf3ef3dc298bc4967e31f8040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*YHpF_IUROx1kXXzO.jpg"/></div></figure><p id="169e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> ERC721描述了一种不可替代的代币(NFT) </strong>，即一种在你使用时不能被消耗的资产。目前，ERC721还处于草案阶段，但是人们已经在使用它了。每个ERC721令牌都是独一无二的，它们都是不同的，根据其所有者的不同，它们甚至可能具有不同的值。它们可能代表对实物或数字资产的所有权，比如房子、艺术杰作、贷款等等，为什么不呢？小猫。</p><p id="5027" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">每个NFT通过一个<code class="eh lq lr ls lt b">uint256</code> ID来识别。它们可以通过两种不同的功能进行转移:</p><ul class=""><li id="2aea" class="lc ld ht is b it iu ix iy jb le jf lf jj lg jn lh li lj lk dt translated"><strong class="is hu">安全转移</strong>功能<code class="eh lq lr ls lt b">safeTansferFrom()</code>，其验证<code class="eh lq lr ls lt b">msg.sender,</code>即触发该功能的用户是令牌的所有者或被允许转移令牌的授权用户。</li><li id="6fa9" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated">没有初步授权验证的<strong class="is hu">非安全传输</strong>T3。令牌开发人员负责在该函数中实现一段代码，以验证负责调用该函数的已被授权这样做。在这个函数中，调用它的用户还必须验证接收者有权接收令牌。如果不执行这些验证，令牌可能会永远丢失。</li></ul><p id="f92a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ERC721令牌必须实现提议的ERC165接口。该标准允许检测由契约实现的接口。这真的很有用，因为它允许检测令牌实现的接口，并因此调整方法/代码以与之交互。</p><p id="5fa0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:<a class="ae jo" href="https://github.com/ethereum/EIPs/blob/maste r/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank"> EIP 721 </a></p><h2 id="eefb" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">新的高级令牌标准ERC777</h2><p id="aca9" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">它定义了<strong class="is hu">代表另一个地址、合同或常规账户发送令牌所需的所有函数。</strong>为此，它使用了ERC820标准。ER820的使用支持在智能合约中注册元数据，以便向后兼容以前版本的令牌实现。ERC777包括授权、撤销、转移和检查功能。</p><ul class=""><li id="8b60" class="lc ld ht is b it iu ix iy jb le jf lf jj lg jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">authorizeOperator(address operator)</code>授权第三方代表令牌的所有者发送令牌，即<code class="eh lq lr ls lt b">msg.sender.</code>如果该功能成功，则发送<code class="eh lq lr ls lt b">AuthorizedOperator(address operator, address tokenHolder)</code>事件，其中<code class="eh lq lr ls lt b">tokenHolder</code>是维护和管理令牌的用户的地址。</li><li id="7240" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">revokeOperator(address operator)</code>取消第三方的令牌转移授权。因此，运营商将无法再代表其所有者转移令牌。</li><li id="a6b7" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">isOperatorFor(address operator, address tokenHolder)</code>检查运营商的地址是否允许转让<code class="eh lq lr ls lt b">tokenHoler.</code>保留的令牌</li><li id="3a53" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">operatorSend(address from, address to, uint256 amount, bytes userData, bytes operatorData)</code>从一个地址向另一个地址发送一定数量的令牌。如果交易成功，就会触发一个<code class="eh lq lr ls lt b">Sent()</code>事件。</li></ul><p id="ae04" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考资料:<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/777" rel="noopener ugc nofollow" target="_blank"> EIP 777 </a>，<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/820" rel="noopener ugc nofollow" target="_blank"> EIP 820 </a></p><h2 id="2308" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">ERC827令牌标准(ERC20扩展)</h2><p id="2196" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">ERC827是可与ERC223匹敌的标准。它可用于<strong class="is hu">解决ERC223解决的相同问题，但具有更高的灵活性，</strong>允许数据传输和令牌传输。最近，这个标准相对于ERC223越来越受欢迎。它允许第三方消费令牌的转移和批准。它与ERC20完全兼容，增加了三个新功能。</p><ul class=""><li id="735d" class="lc ld ht is b it iu ix iy jb le jf lf jj lg jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">transfer(to, value, data)</code>将一定数量的代币转移到目的地址。完成时触发<code class="eh lq lr ls lt b">Transfer()</code>。我们可以看到它是如何包含一个用于附加信息的<code class="eh lq lr ls lt b">data</code>字段的。</li><li id="f751" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">transferFrom(from, to, value, data)</code>将一定数量的代币从特定地址转移到目的地址。再次，它在调用后触发<code class="eh lq lr ls lt b">Transfer()</code>。</li><li id="76ab" class="lc ld ht is b it ll ix lm jb ln jf lo jj lp jn lh li lj lk dt translated"><code class="eh lq lr ls lt b">approve(spender, value, data)</code>允许<code class="eh lq lr ls lt b">_spender</code>从账户中提取<code class="eh lq lr ls lt b">value</code>中的金额。</li></ul><p id="3ec5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">参考:<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/827" rel="noopener ugc nofollow" target="_blank"> EIP 827 </a></p><h2 id="9800" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">如何实现我自己的基于ERC的令牌？</h2><p id="684b" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">在所有上述参考资料中，您都详细解释了实现基于ERC的令牌的所有要求。然而，这项任务可能很难，你可能会忽略一些安全问题。但是你不需要担心，<a class="ae jo" href="https://openzeppelin.org" rel="noopener ugc nofollow" target="_blank"> OpenZeppelin </a>已经考虑到了这一点，他们<strong class="is hu">提供了一个可重用和安全的智能合约的开放框架，在Solidity中实现。</strong></p><p id="7170" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">使用OpenZeppelin和Truffle将使你成为ERC的智能合同主开发者。要开始开发ERC令牌，您只需要导入一个OpenZeppelin的ERC模板，并开始为您的特定用例或令牌修改它。但是我们现在就到此为止，我不想过多地让你感到厌烦。在以后的帖子中，我们可能会修改这个问题，并分享如何实际实现一个基于ERC的令牌。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lv"><img src="../Images/4f91a13fdae324c6b4e79b2d74b3b060.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GQcb0D9Phvm9l_SU."/></div></div></figure><h2 id="eb41" class="kc kd ht bd ke kf kg kh ki kj kk kl km jb kn ko kp jf kq kr ks jj kt ku kv kw dt translated">最后但同样重要的是，令牌标准不包括以太坊吗？</h2><p id="6857" class="pw-post-body-paragraph iq ir ht is b it kx iv iw ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn hm dt translated">实际上不是，其他区块链平台正在开始开发(或改编)他们自己的令牌标准实现。例如，NEO d <strong class="is hu">开发人员开始发布他们自己的令牌标准，即所谓的nep</strong>(因此，他们的标准等同于以太坊的ERC 20<a class="ae jo" href="https://github.com/neo-project/proposals/blob/master/nep-5.mediawiki" rel="noopener ugc nofollow" target="_blank">nep 5</a>)。</p></div></div>    
</body>
</html>