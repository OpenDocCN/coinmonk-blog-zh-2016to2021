<html>
<head>
<title>Interacting With Ethereum Smart Contracts Through Web3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Web3.js与以太坊智能合约交互</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/interacting-with-ethereum-smart-contracts-through-web3-js-e0efad17977?source=collection_archive---------0-----------------------#2018-03-21">https://medium.com/coinmonks/interacting-with-ethereum-smart-contracts-through-web3-js-e0efad17977?source=collection_archive---------0-----------------------#2018-03-21</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/7cbfab039da306cefba81d9d64882d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5tDrfr8T4I6Wo2dYsemhtw.png"/></div></div></figure><h1 id="042e" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">智能合同</h1><p id="f40f" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">智能合同是自动执行的合同，买卖双方的协议条款直接写入代码行。守则和其中包含的协议存在于一个分散的区块链网络中。智能合同使个人能够以可信、无冲突的方式交换数据，而不依赖于第三方，如银行、律师或公证人。这些智能合同存储在<a class="ae kx" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊区块链</a>上，因此需要像常规交易一样进行验证或挖掘。以太坊智能合约存储为可用于构建应用程序的特殊交易。用智能合同专用编程语言编写的合同被编译成“字节码”，<br/>，一种叫做“以太坊虚拟机”(EVM)的功能可以读取和执行。</p><p id="150d" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated"><strong class="kb hu"> Solidity </strong>是你可以用来编写实际的<a class="ae kx" href="https://blog.coincodecap.com/tag/smart-contact/" rel="noopener ugc nofollow" target="_blank">智能合约</a>的语言。语法非常类似于JavaScript，它是在考虑以太坊虚拟机的情况下设计的。Solidity是静态类型的，支持继承、库并包含复杂的用户定义类型。</p><blockquote class="ld"><p id="a7b6" class="le lf ht bd lg lh li lj lk ll lm kw ek translated"><a class="ae kx" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳以太坊产品</a></p></blockquote><p id="4ebd" class="pw-post-body-paragraph jz ka ht kb b kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks lr ku kv kw hm dt translated"><strong class="kb hu">solidity中的数据类型</strong></p><p id="8e47" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">hash: 256位、32字节的数据块，可编入字节索引，可通过位运算操作。<br/> uint: 256位无符号整数，可进行按位和无符号算术运算。<br/> int: 256位有符号整数，可进行按位和有符号算术运算。<br/> string32:以零结尾的ASCII字符串，最大长度32字节(256位)。<br/>地址:账户标识符，类似于160位哈希类型。<br/> bool:双态值。</p><p id="a8ab" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated"><strong class="kb hu">固体中的可见性</strong></p><p id="9336" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">公共—所有<br/>私有—只有此合同<br/>内部—只有此合同及其派生的合同<br/>外部—不能在内部访问，只能在外部访问。</p><p id="144e" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">solidiy程序可以在本地机器上执行，或者使用一个叫做<strong class="kb hu"> remix </strong>的在线IDE。对于这篇博文，我们将使用在线编辑器。</p><p id="a0a2" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">您可以在以下位置找到remix ide</p><div class="ls lt fm fo lu lv"><a href="https://remix.ethereum.org/" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab ej"><div class="lx ab ly cl cj lz"><h2 class="bd hu fv z el ma eo ep mb er et hs dt translated">混合可靠性集成开发环境</h2><div class="mc l"><h3 class="bd b fv z el ma eo ep mb er et ek translated">编辑描述</h3></div><div class="md l"><p class="bd b gc z el ma eo ep mb er et ek translated">remix.ethereum.org</p></div></div></div></a></div><p id="3b26" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">智能合约有点像API。这篇博客的目的是展示智能合约如何与web UI交互。</p><p id="c51b" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">为了简洁起见，我将使用一个非常小的智能契约。</p><p id="4722" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated"><em class="me"> courses.sol </em></p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="3185" class="mo jc ht mk b fv mp mq l mr ms">pragma solidity ^0.4.0;</span><span id="6c9f" class="mo jc ht mk b fv mt mq l mr ms">contract Courses {<br/> <br/> string fName;<br/> uint age;<br/> <br/> function setInstructor(string _fName, uint _age) public {<br/>   fName = _fName;<br/>   age = _age;<br/> }<br/> <br/> function getInstructor() public constant returns (string, uint) {<br/>   return (fName, age);<br/> }<br/> <br/>}</span></pre><p id="5562" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">该代码包含一个getter方法和一个setter方法。<strong class="kb hu"> setInstructor </strong>方法设置变量fName和age的值。并且<strong class="kb hu"> getInstructor </strong>检索这些值。</p><p id="7baa" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">这个程序可以使用remix的<strong class="kb hu"> Javascript VM </strong>环境编译和执行。但是为了给这个程序附加一个web UI，我们必须使用一个web3提供者。</p><figure class="mf mg mh mi fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/f67030e3e53adeaf1e49359cd89fc612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21e7eg7RmBFOhcKpG93UyQ.png"/></div></div></figure><p id="0cf0" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">现在，我们将安装Ganache CLI和Web3.js来创建一个简单的用户界面，允许我们与以太坊智能合约进行交互。</p><h1 id="64cc" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">安装和运行Ganache CLI</h1><p id="b672" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">以前被称为<strong class="kb hu"> TestRPC </strong>的Ganache CLI 使用ethereumjs来模拟完整的客户端行为，并使开发以太坊应用程序更快、更容易、更安全。它还包括所有流行的RPC函数和特性，如事件，并且可以确定性地运行，使开发变得轻而易举。因为它是基于Node.js的，所以我们需要Node.js和NPM(节点包管理器)一起安装来安装Ganache CLI。</p><p id="1699" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">在安装Ganache CLI之前，使用以下命令确保节点和npm版本是最新的，</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="c77c" class="mo jc ht mk b fv mp mq l mr ms">node -v<br/>npm -v</span></pre><p id="5cb0" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">可以使用以下命令安装Ganache CLI</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="b71a" class="mo jc ht mk b fv mp mq l mr ms">npm install -g ganache-cli</span></pre><p id="a4e1" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">完成后，运行以下命令启动它:</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="5b8b" class="mo jc ht mk b fv mp mq l mr ms">ganache-cli</span></pre><p id="3358" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">运行ganache-cli有很多选项，可以参考他们的Github页面。</p><p id="012a" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">这为您提供了10个不同的帐户和私钥，以及一个位于<strong class="kb hu"> localhost:8545 </strong>的本地服务器。</p><h1 id="ce41" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">安装Web3.js</h1><p id="a26d" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">web3.js库是官方的以太坊Javascript API。它用于与以太坊智能合约进行交互。它是包含以太坊生态系统特定功能的模块集合。</p><p id="b0cc" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">创建一个新目录并切换到该目录。</p><p id="4011" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">接下来，运行npm init命令创建package.json文件，该文件将存储项目依赖项:</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="be03" class="mo jc ht mk b fv mp mq l mr ms">npm init</span></pre><p id="f93a" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">使用以下命令安装web3.js</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="bb09" class="mo jc ht mk b fv mp mq l mr ms">npm install ethereum/web3.js — save</span></pre><p id="1515" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">切换到Remix IDE，单击Run选项卡，然后将环境下拉列表从Javascript VM更改为<strong class="kb hu"> Web3 Provider。</strong></p><p id="e46e" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">点击“OK”，然后指定testrpc/ganache-cli本地主机地址(默认情况下，它是<a class="ae kx" href="http://localhost:8545/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8545 </a>)</p><p id="c2f6" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">现在，我们不再在Javascript VM中部署和测试，而是在您的计算机上使用Ganache CLI客户端。</p><h1 id="4e65" class="jb jc ht bd jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy dt translated">使用Web用户界面与智能合同交互</h1><p id="91bd" class="pw-post-body-paragraph jz ka ht kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hm dt translated">下一部分是使用HTML、javascript和CSS为我们的智能合约创建一个简单的UI页面。UI将使用两个输入字段接受教师的姓名和年龄，并在文本字段中显示这些数据。</p><blockquote class="mv mw mx"><p id="e80f" class="jz ka me kb b kc ky ke kf kg kz ki kj my la km kn mz lb kq kr na lc ku kv kw hm dt translated"><em class="ht">index.html</em></p></blockquote><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="1b37" class="mo jc ht mk b fv mp mq l mr ms">&lt;!DOCTYPE html&gt;<br/>&lt;html lang=”en”&gt;<br/>&lt;head&gt;<br/> &lt;meta charset=”UTF-8"&gt;<br/> &lt;meta name=”viewport” content=”width=device-width, initial-scale=1.0"&gt;<br/> &lt;meta http-equiv=”X-UA-Compatible” content=”ie=edge”&gt;<br/> &lt;title&gt;Document&lt;/title&gt;</span><span id="12b8" class="mo jc ht mk b fv mt mq l mr ms">&lt;link rel=”stylesheet” type=”text/css” href=”index.css”&gt;</span><span id="dcff" class="mo jc ht mk b fv mt mq l mr ms">&lt;script src=”./node_modules/web3/dist/web3.min.js”&gt;&lt;/script&gt;</span><span id="8eea" class="mo jc ht mk b fv mt mq l mr ms">&lt;/head&gt;<br/>&lt;body&gt;<br/> &lt;div class=”container”&gt;</span><span id="4f1f" class="mo jc ht mk b fv mt mq l mr ms">&lt;h1&gt;First Smart Contract&lt;/h1&gt;</span><span id="d682" class="mo jc ht mk b fv mt mq l mr ms">&lt;h2 id=”instructor”&gt;&lt;/h2&gt;</span><span id="bd99" class="mo jc ht mk b fv mt mq l mr ms">&lt;label for=”name” class=”col-lg-2 control-label”&gt;Instructor Name&lt;/label&gt;<br/> &lt;input id=”name” type=”text”&gt;</span><span id="88d8" class="mo jc ht mk b fv mt mq l mr ms">&lt;label for=”name” class=”col-lg-2 control-label”&gt;Instructor Age&lt;/label&gt;<br/> &lt;input id=”age” type=”text”&gt;</span><span id="6f93" class="mo jc ht mk b fv mt mq l mr ms">&lt;button id=”button”&gt;Update Instructor&lt;/button&gt;</span><span id="67b5" class="mo jc ht mk b fv mt mq l mr ms">&lt;/div&gt;</span><span id="0dd5" class="mo jc ht mk b fv mt mq l mr ms">&lt;script src=”<a class="ae kx" href="https://code.jquery.com/jquery-3.2.1.slim.min.js" rel="noopener ugc nofollow" target="_blank">https://code.jquery.com/jquery-3.2.1.slim.min.js</a>"&gt;&lt;/script&gt;</span><span id="ca6b" class="mo jc ht mk b fv mt mq l mr ms">&lt;script&gt;<br/> // future code goes here<br/> &lt;/script&gt;</span><span id="f2e2" class="mo jc ht mk b fv mt mq l mr ms">&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="0ff0" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">和一个简单的CSS文件</p><blockquote class="mv mw mx"><p id="48b3" class="jz ka me kb b kc ky ke kf kg kz ki kj my la km kn mz lb kq kr na lc ku kv kw hm dt translated"><em class="ht"> index.css </em></p></blockquote><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="ce9a" class="mo jc ht mk b fv mp mq l mr ms">body {<br/> background-color:#F0F0F0;<br/> padding: 2em;<br/> font-family: ‘Raleway’,’Source Sans Pro’, ‘Arial’;<br/>}<br/>.container {<br/> width: 50%;<br/> margin: 0 auto;<br/>}<br/>label {<br/> display:block;<br/> margin-bottom:10px;<br/>}<br/>input {<br/> padding:10px;<br/> width: 50%;<br/> margin-bottom: 1em;<br/>}<br/>button {<br/> margin: 2em 0;<br/> padding: 1em 4em;<br/> display:block;<br/>}</span><span id="984f" class="mo jc ht mk b fv mt mq l mr ms">#instructor {<br/> padding:1em;<br/> background-color:#fff;<br/> margin: 1em 0;<br/>}</span></pre><p id="3f03" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">Web3.js库已经存在于head标记中，我们可以将它连接到testrpc/ganache-cli客户端。</p><p id="8f32" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">以下所有代码都应该出现在index.html的脚本标记中</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="40dc" class="mo jc ht mk b fv mp mq l mr ms">if (typeof web3 !== ‘undefined’) <br/>{<br/> web3 = new Web3(web3.currentProvider);<br/> } <br/>else <br/>{<br/> // set the provider you want from Web3.providers<br/>web3 = new Web3(new Web3.providers.HttpProvider(“<a class="ae kx" href="http://localhost:8545/" rel="noopener ugc nofollow" target="_blank">http://localhost:8545</a>”));<br/> }</span></pre><p id="9fb6" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">如果web3没有被定义，我们将使用当前的提供者。这适用于我们使用chrome扩展如meta-mask或者使用以太坊浏览器如Mist的情况。如果没有定义，我们可以自己手动指定提供者(这就是我们的ganache-cli/testrpc)。</p><p id="7f9e" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">现在我们必须指定web3默认帐户。这可以通过<strong class="kb hu"> web3.eth.defaultAccount </strong>方法来实现</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="aa9a" class="mo jc ht mk b fv mp mq l mr ms">web3.eth.defaultAccount = web3.eth.accounts[0];</span></pre><p id="fcba" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">这里我们使用的是ganache-cli提供的10个帐户中的第一个。</p><p id="f714" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">接下来，我们需要使用<strong class="kb hu"> web3.eth.contract() </strong>方法来初始化(或创建)地址契约。它接受一个参数，称为<strong class="kb hu"> ABI(应用程序二进制接口)。</strong></p><p id="534f" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">ABI是两个程序模块之间的接口，其中一个通常位于机器代码级别。该接口实际上是将数据编码/解码为机器代码的方法。在以太坊中，基本上就是如何对EVM的可靠性合约调用进行编码，以及如何从交易中读取数据</p><p id="46b2" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">ABI可以通过点击编译标签和点击详细信息从remix获得。向下滚动并复制界面-ABI的内容。这应该作为web3.eth.contract()的参数传递。</p><figure class="mf mg mh mi fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/0a1b03062427bd667c1f4a92b2b37924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVQGYEOh9KNbb9HspPTozA.png"/></div></div><figcaption class="nb nc fg fe ff nd ne bd b be z ek">ABI in details</figcaption></figure><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="e9ed" class="mo jc ht mk b fv mp mq l mr ms">var CoursesContract = web3.eth.contract(PASTE ABI HERE!);</span></pre><p id="1b3a" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">现在我们已经创建了一个可变的CoursesContract，它是与我们的合同进行交互的接口。</p><p id="e5fc" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">下一步是指定合同的地址。通过点击remix中的<strong class="kb hu"> Run </strong>创建智能合同后，该地址可用。</p><figure class="mf mg mh mi fq iu fe ff paragraph-image"><div class="fe ff nf"><img src="../Images/2228a7b92395d50db75d19aa79b5d03d.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*ngMcIgI9ZzRbDyacBsrCKw.png"/></div><figcaption class="nb nc fg fe ff nd ne bd b be z ek">Address after creation</figcaption></figure><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="3920" class="mo jc ht mk b fv mp mq l mr ms">var Courses = CoursesContract.at('PASTE CONTRACT ADDRESS HERE');</span></pre><figure class="mf mg mh mi fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ng"><img src="../Images/412cbc096edeee3de59aba3af15d6a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEQbDpqCi0UvyCGGhAG0Kg.png"/></div></div><figcaption class="nb nc fg fe ff nd ne bd b be z ek">console</figcaption></figure><p id="1170" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">如果我们在浏览器中检查控制台的页面，我们可以看到<code class="eh nh ni nj mk b">Courses</code>变量可以用来调用契约的函数，就像</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="75ff" class="mo jc ht mk b fv mp mq l mr ms">Courses.setInstructor(‘Stephen Hawking’, 76)</span></pre><p id="ba1d" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">或者</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="31f9" class="mo jc ht mk b fv mp mq l mr ms">Courses.getInstructor()</span></pre><p id="b020" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">通过使用javascript和jquery调用这些函数，可以在我们的web页面中使用它们。</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="6314" class="mo jc ht mk b fv mp mq l mr ms">$(“#button”).click(function() {<br/> Courses.setInstructor($(“#name”).val(), $(“#age”).val());<br/>});</span></pre><p id="6e89" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">这里，我们使用setInstructor函数将字段、姓名和年龄的内容传递给智能合同。</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="45cf" class="mo jc ht mk b fv mp mq l mr ms">Courses.getInstructor(function(error, result){<br/>  if(!error){<br/>    $(“#instructor”).html(result[0]+’ (‘+result[1]+’ years old)’);<br/>    console.log(result);<br/>    }<br/> else<br/>   console.error(error);<br/> });</span></pre><p id="76b0" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">此函数调用将通过使用getInstructor函数从智能联系人获取数据，在UI的文本字段中显示教师的姓名和年龄。</p><figure class="mf mg mh mi fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/c25d7034e81ecedbd74151d0fc1e3944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NGtCfnRnijfVcfQO6_Ghdg.png"/></div></div></figure><p id="046e" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">现在，如果我们检查remix中的值，我们将得到</p><figure class="mf mg mh mi fq iu fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/b2750616c6c9b114d2e55df41f571da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*_MPQ3RIIICSM7COWhtMRTQ.png"/></div></figure><p id="e100" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">完美！！</p><p id="b491" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">这是一个非常简单的例子，说明了我们如何与智能合约进行交互，并且只能在本地环境中进行检查。应该做进一步的研究来研究实际环境中的相互作用。希望这有助于理解一些基本概念。</p><p id="2ae1" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated">请查看以下链接。</p><div class="ls lt fm fo lu lv"><a href="https://solidity.readthedocs.io/en/v0.4.21/" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab ej"><div class="lx ab ly cl cj lz"><h2 class="bd hu fv z el ma eo ep mb er et hs dt translated">坚固性-坚固性0.4.21文件</h2><div class="mc l"><h3 class="bd b fv z el ma eo ep mb er et ek translated">Solidity是一种面向契约的高级语言，用于实现智能契约。它受到了C++，Python…</h3></div><div class="md l"><p class="bd b gc z el ma eo ep mb er et ek translated">solidity.readthedocs.io</p></div></div></div></a></div><div class="ls lt fm fo lu lv"><a href="https://github.com/trufflesuite/ganache-cli" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab ej"><div class="lx ab ly cl cj lz"><h2 class="bd hu fv z el ma eo ep mb er et hs dt translated">trufflesuite/ganache-cli</h2><div class="mc l"><h3 class="bd b fv z el ma eo ep mb er et ek translated">用于测试和开发的快速以太坊RPC客户端</h3></div><div class="md l"><p class="bd b gc z el ma eo ep mb er et ek translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq iz lv"/></div></div></a></div><div class="ls lt fm fo lu lv"><a href="https://web3js.readthedocs.io/en/latest/" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab ej"><div class="lx ab ly cl cj lz"><h2 class="bd hu fv z el ma eo ep mb er et hs dt translated">欢迎阅读Docs - web3.js最新文档</h2><div class="mc l"><h3 class="bd b fv z el ma eo ep mb er et ek translated">编辑描述</h3></div><div class="md l"><p class="bd b gc z el ma eo ep mb er et ek translated">web3js.readthedocs.i</p></div></div></div></a></div><p id="3fdd" class="pw-post-body-paragraph jz ka ht kb b kc ky ke kf kg kz ki kj kk la km kn ko lb kq kr ks lc ku kv kw hm dt translated"><a class="ae kx" href="https://coursetro.com/posts/code/99/Interacting-with-a-Smart-Contract-through-Web3.js-(Tutorial)" rel="noopener ugc nofollow" target="_blank">https://coursetro . com/posts/code/99/interactive-with-a-Smart-Contract-through-web 3 . js-(教程)</a></p><blockquote class="ld"><p id="c70a" class="le lf ht bd lg lh li lj lk ll lm kw ek translated">加入Coinmonks <a class="ae kx" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kx" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae kx" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="mo jc ht bd jd nr ns nt jh nu nv nw jl kk nx ny jp ko nz oa jt ks ob oc jx od dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="oe of ht kb b kc kd kg kh kk og ko oh ks oi kw oj ok ol om dt translated"><a class="ae kx" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae kx" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="14e6" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae kx" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae kx" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="f33b" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">印度的加密交易所</a> | <a class="ae kx" rel="noopener" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94">印度的加密应用</a></li><li id="47a8" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated">开发人员的最佳加密API</li><li id="c9bf" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated">最佳<a class="ae kx" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密借贷平台</a></li><li id="9487" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated">杠杆代币的终极指南</li><li id="4a2a" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" href="https://coincodecap.com/crypto-affiliate-programs" rel="noopener ugc nofollow" target="_blank">8大加密附属计划</a> | <a class="ae kx" href="https://coincodecap.com/etoro-vs-coinbase" rel="noopener ugc nofollow" target="_blank"> eToro vs比特币基地</a></li><li id="e0bf" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" href="https://coincodecap.com/binance-futures-trading" rel="noopener ugc nofollow" target="_blank">币安期货交易</a>|<a class="ae kx" href="https://coincodecap.com/mudrex-3commas-etoro" rel="noopener ugc nofollow" target="_blank">3 commas vs Mudrex vs eToro</a></li><li id="a5fa" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" href="https://coincodecap.com/buy-monero" rel="noopener ugc nofollow" target="_blank">如何购买Monero </a> | <a class="ae kx" href="https://coincodecap.com/idex-review" rel="noopener ugc nofollow" target="_blank"> IDEX评论</a> | <a class="ae kx" href="https://coincodecap.com/bitkan-trading-bot" rel="noopener ugc nofollow" target="_blank"> BitKan交易机器人</a></li><li id="990c" class="oe of ht kb b kc on kg oo kk op ko oq ks or kw oj ok ol om dt translated"><a class="ae kx" rel="noopener" href="/coinmonks/youhodler-vs-coinloan-vs-hodlnaut-b1050acde55a">YouHodler vs CoinLoan vs Hodlnaut </a>|<a class="ae kx" href="https://coincodecap.com/cryptohopper-vs-haasbot" rel="noopener ugc nofollow" target="_blank">Cryptohopper vs HaasBot </a></li></ul></div></div>    
</body>
</html>