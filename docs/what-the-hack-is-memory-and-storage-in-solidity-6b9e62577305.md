# Solidity ä¸­çš„å†…å­˜å’Œå­˜å‚¨æ˜¯ä»€ä¹ˆï¼Ÿ

> åŸæ–‡ï¼š<https://medium.com/coinmonks/what-the-hack-is-memory-and-storage-in-solidity-6b9e62577305?source=collection_archive---------0----------------------->

![](img/070565ec455b21c7a9f0e095ad9f9cdc.png)

åšå›ºæ€§ä¸­æœ€å®¹æ˜“æ··æ·†çš„ä¸€ä¸ªæ¦‚å¿µæ˜¯å¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨å†…å­˜å’Œå­˜å‚¨ã€‚

æœ¬æ–‡æ—¨åœ¨æä¾›å¯¹å†…å­˜å’Œå­˜å‚¨çš„åŸºæœ¬ç†è§£ï¼Œå¹¶é€šè¿‡ä¸€äº›ä¾‹å­å±•ç¤ºå®ƒçš„æœ‰æ•ˆç”¨æ³•ã€‚

> [å‘ç°å¹¶å›é¡¾æœ€ä½³åŒºå—é“¾è½¯ä»¶](https://coincodecap.com)

å¦‚æœä½ æ˜¯ solidity çš„æ–°æ‰‹ï¼Œè¯·å…ˆé˜…è¯»ä¸‹é¢çš„æ–‡ç« :

[**ä»¥å¤ªåŠåŒºå—é“¾å¼€å‘å…¥é—¨:part-1**](http://demystifyblockchain.com/2018/06/29/getting-started-with-ethereum-blockchain-development-part-1/)

[**ä»¥å¤ªåŠåŒºå—é“¾å¼€å‘å…¥é—¨:ç¬¬äºŒéƒ¨åˆ†**](http://demystifyblockchain.com/2018/06/28/getting-started-with-ethereum-blockchain-development/)

åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹ solidity æ‹¥æœ‰çš„ä¸åŒç±»å‹çš„å­˜å‚¨:

**å­˜å‚¨:**æ¯ä¸ªè´¦æˆ·æ‹¥æœ‰çš„æ°¸ä¹…å†…å­˜ç§°ä¸º**å­˜å‚¨**ã€‚å­˜å‚¨æ˜¯ä¸€ä¸ªé”®å€¼å­˜å‚¨ï¼Œå…¶ä¸­é”®å’Œå€¼éƒ½æ˜¯ 32 å­—èŠ‚ã€‚

**å†…å­˜:**å†…å­˜æ˜¯ä¸€ä¸ªå­—èŠ‚- **æ•°ç»„**ï¼Œå®ƒä¿å­˜å…¶ä¸­çš„æ•°æ®ï¼Œç›´åˆ°å‡½æ•°æ‰§è¡Œã€‚å†…å­˜ä»é›¶å¤§å°å¼€å§‹ï¼Œå¯ä»¥é€šè¿‡ç®€å•åœ°è®¿é—®æˆ–å­˜å‚¨ç´¢å¼•å¤§äºå…¶å½“å‰å¤§å°çš„å†…å­˜æ¥æ‰©å±•ä¸º 32 å­—èŠ‚å—ã€‚ä¸ºäº†èŠ‚çœæ±½æ²¹ï¼Œå»ºè®®å°½å¯èƒ½ç¼©å°å®ƒçš„å°ºå¯¸ã€‚

**æ ˆ**:ç”¨æ¥å­˜æ”¾å°çš„å±€éƒ¨å˜é‡ã€‚å®ƒçš„æˆæœ¬ä¸å†…å­˜ç›¸åŒï¼Œä½†åªèƒ½ä¿å­˜æœ‰é™çš„å€¼ã€‚

# **æ¶ˆè€—ç©ºé—´çš„åŒæ—¶æ¶ˆè€—æ°”ä½“**

æ–‡ç« çš„è¿™ä¸€éƒ¨åˆ†å‡è®¾è¯»è€…å¯¹ä»¥å¤ªåŠçš„æ°”ä½“æ¶ˆè€—æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œå¦‚æœæ²¡æœ‰å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚ğŸ‘‡

[***ä»¥å¤ªåŠé‡Œçš„æ°”æ˜¯ä»€ä¹ˆï¼Ÿ***](https://ethereum.stackexchange.com/questions/3/what-is-meant-by-the-term-gas)

ä½ åœ¨ä»¥å¤ªåŠåŒºå—é“¾åšçš„æ¯ä¸€ä»¶äº‹éƒ½ä¼šè€—è´¹ä¸€äº›æ±½æ²¹ã€‚è®©æˆ‘ä»¬è¯•ç€æ¯”è¾ƒä¸€ä¸‹å­˜å‚¨å’Œå†…å­˜çš„æ°”ä½“æ¶ˆè€—ã€‚

**å‚¨æ°”æ¶ˆè€—:**å‚¨æ°”æˆæœ¬å¾ˆå¥½ç†è§£:

*   å½“ä¸€ä¸ªå€¼ä»é›¶è®¾ç½®ä¸ºéé›¶æ—¶ï¼Œå®ƒèŠ±è´¹ 20ï¼Œ000 æ±½æ²¹
*   å†™å…¥ç°æœ‰å­˜å‚¨æˆ–å°†å€¼è®¾ç½®ä¸ºé›¶æ—¶ï¼Œä¼šæ¶ˆè€— 5,000 gasã€‚
*   éé›¶å€¼è®¾ç½®ä¸ºé›¶æ—¶ï¼Œ5000 æ°” [](https://ethereum.stackexchange.com/q/594/42) é€€æ¬¾ã€‚

åŒ…è£…å‚¨å­˜èŠ‚çœæ°”ä½“ä»ç„¶æ˜¯å¯èƒ½çš„ï¼Œä¾‹å¦‚å°† 2 ä¸ª [uint128](http://solidity.readthedocs.io/en/v0.4.21/types.html#integers) å€¼æ”¾åœ¨ä¸€ä¸ªé”®ä¸­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ 2 ä¸ªé”®ã€‚

**å†…å­˜æ°”ä½“æ¶ˆè€—:**å†…å­˜æ‰©å±•çš„æ°”ä½“æ¶ˆè€—åœ¨[é»„çš®ä¹¦](http://yellowpaper.io/)ä¸­å®šä¹‰å¦‚ä¸‹:

![](img/512402767b5eccdf7e54610088e44279.png)

Gas consumption in memory expansion

**G_memory** ä¸º 3ï¼Œ **a** ä¸ºåˆ†é…çš„ 256 ä½å—å­—æ•°é‡ã€‚

å¯¹äº a = **512 ä¸ªç»„å—**ï¼Œæ°”ä½“æ¶ˆè€—é‡å°†ä¸º(3 * 512 + (512 * 512)/512) = **2560 å•ä½**

***æ³¨æ„:ä¸å­˜å‚¨ç›¸æ¯”ï¼Œå†…å­˜ä½¿ç”¨çš„æˆæœ¬å¹¶ä¸æ˜¾è‘—ã€‚æ€»æ˜¯ä½¿ç”¨å†…å­˜æ¥æ‰§è¡Œä¸­é—´è®¡ç®—å¹¶å°†ç»“æœå­˜å‚¨åœ¨å­˜å‚¨å™¨ä¸­æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚***

# **å˜é‡**å­˜å‚¨åœ¨**çš„ä»€ä¹ˆåœ°æ–¹ï¼Ÿ**

å¯¹äºæ¯ç§ç±»å‹çš„å˜é‡ï¼Œéƒ½æœ‰é»˜è®¤çš„å­˜å‚¨ä½ç½®:

*   çŠ¶æ€å˜é‡æ€»æ˜¯å­˜å‚¨åœ¨å­˜å‚¨å™¨ä¸­ã€‚
*   å‡½æ•°å‚æ•°æ€»æ˜¯åœ¨å†…å­˜ä¸­ã€‚
*   é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æ„ã€æ•°ç»„æˆ–æ˜ å°„ç±»å‹å¼•ç”¨çš„å±€éƒ¨å˜é‡å­˜å‚¨åœ¨å­˜å‚¨ä¸­ã€‚
*   å€¼ç±»å‹(uintã€int ç­‰)çš„å±€éƒ¨å˜é‡å­˜å‚¨åœ¨å †æ ˆä¸­ã€‚

è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°äº†è§£è¿™ä¸€ç‚¹ï¼Œå¹¶ç†è§£ä¸å†…å­˜å’Œå­˜å‚¨ç›¸å…³çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼ï¼ï¼

**åˆåŒæè¿°:**

*   **å¥‘çº¦å˜é‡**:æ˜ å°„å°†é”®å€¼å¯¹å­˜å‚¨ä¸ºç”¨æˆ· Id å’Œç”¨æˆ·ç±»å‹ã€‚
    *æ˜ å°„(uint = > User)ç”¨æˆ·ï¼›*
*   **æ–¹æ³•:**ä»¥ä¸‹æ˜¯åˆåŒä¸­çš„æ–¹æ³•:

I. **addUser** :ä»¥ uint idï¼Œuint balance ä¸ºå‚æ•°ï¼Œæ·»åŠ ä¸€ä¸ªç”¨æˆ·åˆ°æ˜ å°„ä¸­ã€‚

äºŒã€‚**update balance**:**ä»¥ uint idï¼Œuint balance ä¸ºå‚æ•°ï¼Œæ›´æ–°ç”¨æˆ·çš„ä½™é¢ã€‚**

**ä¸‰ã€‚ **getBalance** :ä»¥ uint id ä¸ºå‚æ•°ï¼Œè¿”å›ç”¨æˆ·çš„ä½™é¢ã€‚**

*   ****è°ƒç”¨åˆåŒæ–¹æ³•**:æ‚¨å¯ä»¥åœ¨[åœ¨çº¿æ··éŸ³ IDE](http://remix.ethereum.org/#optimize=false&version=soljson-v0.4.24+commit.e67f0147.js) ä¸­è¿è¡Œä¸Šè¿°åˆåŒ**

**I .é€šè¿‡è°ƒç”¨å¸¦æœ‰å‚æ•°çš„ **addUser** æ–¹æ³•åˆ›å»ºä¸€ä¸ªç”¨æˆ·(id = 1ï¼Œbalance = 10)**

**äºŒã€‚é€šè¿‡ä½¿ç”¨å‚æ•°(id = 1 ä¸” balance = 20)è°ƒç”¨ **updateBalance** æ–¹æ³•æ¥æ›´æ–°ç”¨æˆ·çš„ä½™é¢**

*   ****é¢„æœŸè¾“å‡º**:é€šè¿‡å¸¦å‚æ•°(id = 1)è°ƒç”¨ **getBalance** æ–¹æ³•å¾—åˆ°ç”¨æˆ·çš„ä½™é¢ã€‚ä½ è®¤ä¸ºæœŸæœ›å€¼æ˜¯å¤šå°‘ï¼ŸçŒœçŒœçœ‹ï¼Ÿæ˜¯ 2 **0 è¿˜æ˜¯ 10** ä¸ºä»€ä¹ˆï¼ŸğŸ¤”**

# **è¾“å‡ºæ˜¯ 10 è€Œä¸æ˜¯ 20ã€‚ğŸ˜¯**

**![](img/a776f833240105f0d603f4540f7d2572.png)**

****è§£é‡Š:**åœ¨ solidity ä¸­ï¼Œå½“å­˜å‚¨ç±»å‹å˜é‡è¢«èµ‹å€¼ç»™å†…å­˜ç±»å‹æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®å‰¯æœ¬ã€‚å¦‚æœå¯¹æ‹·è´çš„æ•°æ®è¿›è¡Œäº†ä»»ä½•æ›´æ–°ï¼Œå®ƒå°†ä¸ä¼šåæ˜ åœ¨åŸå§‹æ‹·è´ä¸­ã€‚**

**ä½ ç°åœ¨èƒ½çŒœå‡ºï¼Œä½ éœ€è¦å¯¹ **updateBalance** æ–¹æ³•åšä»€ä¹ˆæ”¹å˜æ‰èƒ½ä½¿å®ƒå·¥ä½œå—ï¼ŸğŸ¤”**

**æ›´æ”¹åˆåŒä¸­çš„ç¬¬ 17 è¡Œã€‚å°†å­˜å‚¨ä½ç½®ä»å†…å­˜æ›´æ”¹åˆ°å­˜å‚¨ä¸ä¼šåˆ›å»ºæ–°çš„æ•°æ®å‰¯æœ¬ï¼Œè€Œæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæŒ‡å‘å­˜å‚¨çš„æŒ‡é’ˆã€‚å› æ­¤ï¼Œç”¨æˆ·å¯¹è±¡çš„ä»»ä½•å˜åŒ–éƒ½ä¼šåæ˜ åœ¨å­˜å‚¨æœ¬èº«ä¸­ã€‚**

***ç”¨æˆ·* ***å­˜å‚¨*** *ç”¨æˆ·=ç”¨æˆ·ã€idã€‘ï¼›***

**ç­”å¯¹äº†ã€‚ï¼ï¼ä½ ç°åœ¨å·²ç»å¾ˆå¥½åœ°ç†è§£äº†å›ºæ€ä¸­çš„è®°å¿†å’Œå­˜å‚¨ğŸ™Œ**

**åœ¨æ¥ä¸‹æ¥çš„å‡ ç¯‡æ–‡ç« ä¸­ã€‚æˆ‘å°†è§£é‡Š EVM å†…éƒ¨å’Œé»˜å…‹å°” Pertrica æ ‘ã€‚**

**å¿«ä¹ç¼–ç ğŸ˜‡**

**[linkedin.com/in/jainsarvesh](https://www.linkedin.com/in/jainsarvesh/)T14[medium.com/@sarvesh.sgsits](/@sarvesh.sgsits)**

> **åŠ å…¥ Coinmonks [ç”µæŠ¥é¢‘é“](https://t.me/coincodecap)å’Œ [Youtube é¢‘é“](https://www.youtube.com/c/coinmonks/videos)è·å–æ¯æ—¥[åŠ å¯†æ–°é—»](http://coincodecap.com/)**

## **å¦å¤–ï¼Œé˜…è¯»**

*   **[å¤åˆ¶äº¤æ˜“](/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c) | [åŠ å¯†ç¨åŠ¡è½¯ä»¶](/coinmonks/crypto-tax-software-ed4b4810e338)**
*   **[ç½‘æ ¼äº¤æ˜“](https://coincodecap.com/grid-trading) | [åŠ å¯†ç¡¬ä»¶é’±åŒ…](/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069)**
*   **[å¯†ç ç”µæŠ¥ä¿¡å·](http://Top 4 Telegram Channels for Crypto Traders) | [å¯†ç äº¤æ˜“æœºå™¨äºº](/coinmonks/crypto-trading-bot-c2ffce8acb2a)**
*   **[Bookmap è¯„è®º](https://coincodecap.com/bookmap-review-2021-best-trading-software) | [ç¾å›½ 5 å¤§æœ€ä½³åŠ å¯†äº¤æ˜“æ‰€](https://coincodecap.com/crypto-exchange-usa)**
*   **[å¦‚ä½•åœ¨ FTX äº¤æ˜“æ‰€äº¤æ˜“æœŸè´§](https://coincodecap.com/ftx-futures-trading) | [OKEx vs å¸å®‰](https://coincodecap.com/okex-vs-binance)**
*   **[CoinLoan è¯„è®º](https://coincodecap.com/coinloan-review) | [YouHodler è¯„è®º](/coinmonks/youhodler-4-easy-ways-to-make-money-98969b9689f2) | [BlockFi è¯„è®º](https://coincodecap.com/blockfi-review)**
*   **[XT.COM è¯„è®º](https://coincodecap.com/profittradingapp-for-binance) | [å¸å®‰è¯„è®º](https://coincodecap.com/xt-com-review)**
*   **[SmithBot è¯„è®º](https://coincodecap.com/smithbot-review) | [4 æ¬¾æœ€ä½³å…è´¹å¼€æºäº¤æ˜“æœºå™¨äºº](https://coincodecap.com/free-open-source-trading-bots)**
*   **[æœ€ä½³åŠ å¯†äº¤æ˜“æ‰€](/coinmonks/crypto-exchange-dd2f9d6f3769) | [å°åº¦æœ€ä½³åŠ å¯†äº¤æ˜“æ‰€](/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9)**
*   **[å¼€å‘äººå‘˜çš„æœ€ä½³åŠ å¯† API](/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f)**
*   **æœ€ä½³[å¯†ç å€Ÿè´·å¹³å°](/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa)**
*   **æ æ†ä»£å¸çš„ç»ˆææŒ‡å—**