<html>
<head>
<title>My Lightning Node setup with c-lightning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的闪电节点设置与c-lightning</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/my-lightning-node-setup-with-c-lightning-45bbb9993c0?source=collection_archive---------5-----------------------#2018-07-11">https://medium.com/coinmonks/my-lightning-node-setup-with-c-lightning-45bbb9993c0?source=collection_archive---------5-----------------------#2018-07-11</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="f220" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">随着<a class="ae ji" href="https://blockstream.com/2018/06/25/c-lightning-06.html" rel="noopener ugc nofollow" target="_blank"> Blockstream宣布</a>c-Lightning的发布，这可能是一个推出mainnet Lightning网络节点的好时机！</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/6ab651410b90ae86a8607c8266e7e39e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWG9XVN6nSrXkfwS4xfszA.jpeg"/></div></div></figure><p id="6fa0" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">先决条件:我已经有一个Linux操作系统，一个比特币全节点和Tor启动并运行。</p><h2 id="2e2f" class="kr ks ht bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll dt translated">隐藏服务的设置</h2><p id="9971" class="pw-post-body-paragraph jv jw ht jx b jy lm iu ka kb ln ix kd ke lo kg kh ki lp kk kl km lq ko kp kq hm dt translated">在大多数国家，运营Tor隐藏服务本身并不复杂，也不违法。此外，对于那些生活在压迫政权下的人来说，这可能是一个非常大的帮助。</p><p id="2c83" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">首先我们打开<code class="eh lr ls lt lu b">/etc/tor/torrc</code>文件并插入一些额外的行来创建版本2和版本3的隐藏服务:</p><pre class="jk jl jm jn fq lv lu lw lx aw ly dt"><span id="bffa" class="kr ks ht lu b fv lz ma l mb mc">HiddenServiceDir /var/lib/tor/lightning_service_v2/<br/>HiddenServiceVersion 2<br/>HiddenServicePort 9735 127.0.0.1:9735</span><span id="77f1" class="kr ks ht lu b fv md ma l mb mc">HiddenServiceDir /var/lib/tor/lightning_service_v3/<br/>HiddenServiceVersion 3<br/>HiddenServicePort 9735 127.0.0.1:9735</span></pre><p id="46bb" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">修改torrc后，Tor服务需要重新启动才能生效:<code class="eh lr ls lt lu b">$ systemctl restart tor@default</code></p><p id="d522" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">Tor现在生成两个新的隐藏服务。我们可以查看他们的洋葱地址:</p><pre class="jk jl jm jn fq lv lu lw lx aw ly dt"><span id="85e4" class="kr ks ht lu b fv lz ma l mb mc">$ sudo cat /var/lib/tor/lightning_service_v2/hostname <br/>yqygrtvwihl3exb2.onion<br/>$ sudo cat /var/lib/tor/lightning_service_v3/hostname <br/>ihhsjdncang7ve2rvhuunvy45bxvmh2qwz3vh7mohbouizd36ywnxeid.onion</span></pre><h2 id="1990" class="kr ks ht bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll dt translated">闪电守护程序配置</h2><p id="ccaf" class="pw-post-body-paragraph jv jw ht jx b jy lm iu ka kb ln ix kd ke lo kg kh ki lp kk kl km lq ko kp kq hm dt translated">c-lightning实现可以从GitHub 下载<a class="ae ji" href="https://github.com/ElementsProject/lightning/releases" rel="noopener ugc nofollow" target="_blank">。<code class="eh lr ls lt lu b">lightningd</code>守护进程有很多参数，可以从命令行或配置文件中配置。这是我的<code class="eh lr ls lt lu b">~/.lightning/config</code>文件:</a></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="115c" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">需要一个空地址给<code class="eh lr ls lt lu b">bind-addr</code>来<a class="ae ji" href="https://github.com/ElementsProject/lightning/blob/master/doc/lightningd-config.5.txt" rel="noopener ugc nofollow" target="_blank">监听所有接口</a>。因此该节点可同时用于输入Tor和clearnet连接。</p><p id="a14a" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated"><code class="eh lr ls lt lu b">announce-addr</code> <a class="ae ji" href="https://github.com/ElementsProject/lightning/blob/master/doc/lightningd-config.5.txt" rel="noopener ugc nofollow" target="_blank">可以多次使用</a>来添加更多地址，这样守护程序可以通告IPv4、Torv2和Torv3地址。</p><p id="8e82" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">对于每kwu 4000 Satoshi是一个非常低的值，但目前已经足够了。</p><p id="eb66" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">127.0.0.1:9050用于输出Tor连接。这样我们可以连接到其他隐藏的服务。</p><h2 id="09d6" class="kr ks ht bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll dt translated">运行节点</h2><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="me mf l"/></div></figure><h2 id="4be7" class="kr ks ht bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll dt translated">提示和技巧</h2><p id="1bcc" class="pw-post-body-paragraph jv jw ht jx b jy lm iu ka kb ln ix kd ke lo kg kh ki lp kk kl km lq ko kp kq hm dt translated">耐心点，这个技术和网络还不成熟！如果第一次不成功，再试一次。另一个。另一个。</p><p id="aaec" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">多个lightning节点实例可以在同一台机器上运行。如果没有其他帮助，您可以启动另一个实例来检查您的第一个设置是否可操作。</p><p id="c637" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">由于Tor地址和gossip实现中的一些问题，一些浏览器站点看不到我的节点信息。探险者没有别名，没有肤色，没有URI。为了解决这个问题，我只用我的IPv4地址启动了我的节点，然后等了几分钟，看看它是否会出现在explorers上。之后，我用Tor和IPv4地址重启了它。</p><p id="6138" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">见什么说什么:如果你遇到任何困难，考虑在GitHub上<a class="ae ji" href="https://github.com/ElementsProject/lightning/issues" rel="noopener ugc nofollow" target="_blank">开一个问题</a>。如果你设法解决了某个问题，在公开的地方写下来。下一个面临同样问题的人会发现它，并会为此而感激！</p><p id="84e5" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">备份您的<code class="eh lr ls lt lu b">hsm_secret</code>文件！它是钱包私钥的种子！</p><p id="e727" class="pw-post-body-paragraph jv jw ht jx b jy jz iu ka kb kc ix kd ke kf kg kh ki kj kk kl km kn ko kp kq hm dt translated">这里是我的闪电节点URI，加入我吧！</p><pre class="jk jl jm jn fq lv lu lw lx aw ly dt"><span id="b586" class="kr ks ht lu b fv lz ma l mb mc">03d67f36c4f81789e2fe425028bacc96b199813eae426c517f589a45f1136c1fe5@89.133.16.197:9735</span><span id="b592" class="kr ks ht lu b fv md ma l mb mc">03d67f36c4f81789e2fe425028bacc96b199813eae426c517f589a45f1136c1fe5@yqygrtvwihl3exb2.onion:9735</span><span id="9a2a" class="kr ks ht lu b fv md ma l mb mc">03d67f36c4f81789e2fe425028bacc96b199813eae426c517f589a45f1136c1fe5@ihhsjdncang7ve2rvhuunvy45bxvmh2qwz3vh7mohbouizd36ywnxeid.onion:9735</span></pre><h2 id="436a" class="kr ks ht bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll dt translated">资源</h2><p id="b6ce" class="pw-post-body-paragraph jv jw ht jx b jy lm iu ka kb ln ix kd ke lo kg kh ki lp kk kl km lq ko kp kq hm dt translated">感谢那些走在我前面的人！</p><div class="mg mh fm fo mi mj"><a rel="noopener follow" target="_blank" href="/@dougvk/run-your-own-mainnet-lightning-node-2d2eab628a8b"><div class="mk ab ej"><div class="ml ab mm cl cj mn"><h2 class="bd hu fv z el mo eo ep mp er et hs dt translated">运行您自己的mainnet Lightning节点</h2><div class="mq l"><h3 class="bd b fv z el mo eo ep mp er et ek translated">使用即时闪电网络从无到有</h3></div><div class="mr l"><p class="bd b gc z el mo eo ep mp er et ek translated">medium.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx jt mj"/></div></div></a></div><div class="mg mh fm fo mi mj"><a rel="noopener follow" target="_blank" href="/@meeDamian/c-lightning-node-on-rbp3-b950660fb835"><div class="mk ab ej"><div class="ml ab mm cl cj mn"><h2 class="bd hu fv z el mo eo ep mp er et hs dt translated">RBP3上的闪电网络节点(c-lightning)</h2><div class="mq l"><h3 class="bd b fv z el mo eo ep mp er et ek translated">这是指南的第三部分，帮助你在已经运行的比特币节点之外建立一个c-lightning节点…</h3></div><div class="mr l"><p class="bd b gc z el mo eo ep mp er et ek translated">medium.com</p></div></div><div class="ms l"><div class="my l mu mv mw ms mx jt mj"/></div></div></a></div></div></div>    
</body>
</html>