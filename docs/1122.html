<html>
<head>
<title>Architecting your IoT App using Raspberry Pi and AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Raspberry Pi和AWS构建物联网应用</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/architecting-your-iot-app-using-raspberry-pi-and-aws-b8b89e3ac39a?source=collection_archive---------1-----------------------#2018-07-24">https://medium.com/coinmonks/architecting-your-iot-app-using-raspberry-pi-and-aws-b8b89e3ac39a?source=collection_archive---------1-----------------------#2018-07-24</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><figure class="hs ht fm fo hu hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff hr"><img src="../Images/1e0cbeff8bfafb0c1bd17daf394ad68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzxCfHB9TOC2o8DGXVf3qA.png"/></div></div></figure><div class=""/><p id="a859" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">最近我在物联网传感器和Raspberry Pi方面做了很多工作，考虑到它越来越受欢迎，我想分享一下我是如何设计该应用的基础架构的，它可以应用于您可能正在使用的几乎任何物联网应用。虽然原则将适用于所有主要的云托管提供商，但我将讨论AWS特定的服务。</p><h2 id="894d" class="jz ka ie bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">项目大纲</h2><p id="efa2" class="pw-post-body-paragraph jb jc ie jd b je ku jg jh ji kv jk jl jm kw jo jp jq kx js jt ju ky jw jx jy hm dt translated">农场/植物的智能灌溉系统，由从物联网传感器和预测API获得的数据驱动。</p><h2 id="5e33" class="jz ka ie bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">使用的硬件</h2><ul class=""><li id="c88f" class="kz la ie jd b je ku ji kv jm lb jq lc ju ld jy le lf lg lh dt translated">Raspberry Pi 3型号B和加载了Raspbian的SD卡</li><li id="cc10" class="kz la ie jd b je li ji lj jm lk jq ll ju lm jy le lf lg lh dt translated">母对母杜邦线</li><li id="03b2" class="kz la ie jd b je li ji lj jm lk jq ll ju lm jy le lf lg lh dt translated">DHT11温度/湿度传感器</li></ul><figure class="lo lp lq lr fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff ln"><img src="../Images/bb79fdaafb9ab59e0ff62a4627eadaa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEIzFKM352ssKoN1NkG5_w.jpeg"/></div></div></figure><p id="58bb" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">上述内容显然仍处于原型阶段，这有望解释混乱。最终产品将装在防水外壳中。除了温度传感器，上面的图片还包含一个光敏电阻，它可以捕捉光线水平的信息，但目前没有被使用。</p><h2 id="4ee8" class="jz ka ie bd kb kc kd ke kf kg kh ki kj jm kk kl km jq kn ko kp ju kq kr ks kt dt translated">架构图</h2><figure class="lo lp lq lr fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff ls"><img src="../Images/a3df67f1308d6621e4221ef4d8b79e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFQ0HOSHDiyTTdkjhhu0Xw.png"/></div></div></figure><p id="12ec" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">此图说明了所使用的所有组件以及它们之间的交互方式。让我们进一步分析一下，了解发生了什么。</p><p id="3863" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">首先，Pi物联网传感器发布关于温度、湿度、土壤湿度和日照时间的原始数据。这是通过MQTT消息发送给IoT主题的。这是一个超轻量的发布/订阅消息协议，专门为网络带宽有限的位置的设备设计，非常适合物联网。接下来，创建一个AWS IoT规则和操作，它订阅传感器发布到的主题，并将这些消息发送到Kinesis数据流和DynamoDB表。</p><p id="c5e6" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">使用Kinesis完全是可选的，取决于你在建造什么。Kinesis的好处是，它允许您选择为您的数据创建多个交付流。你可以有一个流传递给Lambda函数进行记录转换，该函数写入DynamoDB，或者有另一个流传递给Kinesis的分析应用程序，甚至有一个传递流传递给ElasticSearch应用程序。它使您能够灵活地将数据传输到多个目的地以供多种用途。另一方面，它可能会使应用程序过于复杂，在某些情况下有点矫枉过正，但这是值得考虑的，并根据应用程序的要求做出最终决定。在本例中，Kinesis交付流写入S3存储桶作为归档。</p><p id="c8bf" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">一旦进入DynamoDB，这个应用程序看起来就像一个典型的无服务器应用程序。后端逻辑由Lambda和API Gateway处理，然后发送到客户端/Raspberry Pi。React前端存储在S3桶中，并通过CloudFront分发到客户端。客户端将显示传感器数据，并能够手动控制水流。</p><p id="0130" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为了实现自动浇水，来自传感器的数据将与来自预测API的数据一起进行评估，根据某些标准，应用程序将决定该地区是否需要水，如果需要，它将根据所有可用数据计算需水量。如果需要浇水，Lambda将向Raspberry Pi发布另一个主题的消息，其中包含“打开阀门”消息以及保持阀门打开的时间。</p><p id="5bdb" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">为了增加交互性，可以包括聊天机器人，它将提示用户当前状态，并给用户提供交互的选项，查询过去的事件。除此之外，数据可视化工具可以用来创建仪表板，历史数据甚至可以加载到机器学习模型中，以预测浇水的可能性和最佳水量。有许多应用程序和方法可以让你将一个小项目扩展成更多的东西，从而获得使用新工具和技术的经验。</p><p id="bccb" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">虽然该模型解释了该项目环境中的基础设施，但它可以轻松应用于您可能想到的任何其他物联网应用。将Raspberry Pi连接到云可以让它做更多的事情，并让你有机会构建新的不同的应用程序和探索不同的技术。</p><p id="a50b" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在另一篇文章中，我们将看看在AWS环境中设置它的细节，并在物联网控制台上连接一个Raspberry Pi。</p><p id="79d9" class="pw-post-body-paragraph jb jc ie jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">一如既往，感谢阅读，点击👏如果你喜欢你所读的，一定要关注并跟上未来的文章。</p><figure class="lo lp lq lr fq hv fe ff paragraph-image"><div role="button" tabindex="0" class="hw hx di hy bf hz"><div class="fe ff fg"><img src="../Images/b2bf99b956f610c689ee76b39772070b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nkCbG-E0EXjdaOtcaPQ6_g.gif"/></div></div></figure></div></div>    
</body>
</html>