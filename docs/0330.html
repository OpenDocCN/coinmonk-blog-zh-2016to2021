<html>
<head>
<title>Formal Smart Contract Verification</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">正式智能合同验证</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/formal-smart-contract-verification-4b19cf848ff9?source=collection_archive---------1-----------------------#2018-04-19">https://medium.com/coinmonks/formal-smart-contract-verification-4b19cf848ff9?source=collection_archive---------1-----------------------#2018-04-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="ae8e" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">由<a class="ae ji" href="http://www.runtimeverification.com" rel="noopener ugc nofollow" target="_blank">运行时验证公司</a></h2></div><p id="8e5d" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">运行时验证公司提供<a class="ae ji" href="https://runtimeverification.com/smartcontract" rel="noopener ugc nofollow" target="_blank">正式智能合同验证</a>服务。</p><p id="6b7e" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">如果您仍在决定是审核还是正式验证您的智能合同，请知道我们提供了最先进的正式保证。本文解释了原因和方法。</p><p id="ffd0" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">综合</strong>。我们指定并验证智能合约的全部功能正确性。这为智能契约所有者提供了最强的功能正确性保证。</p><p id="55e8" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">端到端</strong>。我们从智能合约的高级规范开始，并将其细化到虚拟机级别。最后一步是验证可执行字节码。</p><p id="d315" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">忠实</strong>。我们与智能合约所有者沟通，以确认高级规范正确地捕捉了预期的功能。然后我们证明了规范精化的合理性。我们将很快生成正确性证书作为正式的证明对象，由独立的证明检查器进行检查。</p><p id="e533" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">知未知</strong>。我们检测编译器隐藏的弱点和意想不到的行为，如果放任不管，可能会导致安全漏洞和利用。简而言之，我们不信任编译器，而是验证它们生成的字节码。</p><h1 id="14bc" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">我们的方法</h1><p id="4d6d" class="pw-post-body-paragraph jj jk ht jl b jm kx iu jo jp ky ix jr js kz ju jv jw la jy jz ka lb kc kd ke hm dt translated">为了验证智能契约，我们首先将其形式化为数学规范。这通常需要与智能合同所有者进行几轮讨论和会议。代码改进的机会通常是在这个早期阶段发现的。</p><p id="3c90" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">接下来，我们细化规范以匹配目标低级虚拟机(VM)，例如以太坊虚拟机(EVM)或IELE。然后，我们将智能合约从其高级语言(例如，Solidity、Vyper、普路托斯)编译成VM字节码(例如，EVM、IELE)。只有这样，我们才能证明最终的字节码满足细化的规范。</p><p id="173d" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">我们使用与UIUC合作创建的<a class="ae ji" href="https://runtimeverification.com/k/" rel="noopener ugc nofollow" target="_blank"> K框架</a>，它包括一个自动从目标语言或VM的形式语义中导出的构造正确的程序验证器；例如，参见<a class="ae ji" href="https://runtimeverification.com/blog/lets-make-the-ethereum-virtual-machine-better/" rel="noopener ugc nofollow" target="_blank"> KEVM </a>，我们的形式语义<a class="ae ji" href="https://www.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> EVM </a>，或者<a class="ae ji" href="https://runtimeverification.com/blog/iele-a-new-virtual-machine-for-the-blockchain/" rel="noopener ugc nofollow" target="_blank"> IELE </a>，一个为<a class="ae ji" href="https://www.cardano.org" rel="noopener ugc nofollow" target="_blank"> Cardano </a>开发的新VM。展望未来，我们计划支持<a class="ae ji" href="https://github.com/kframework/wasm-semantics" rel="noopener ugc nofollow" target="_blank"> EVM-WASM </a>。</p><h1 id="44cf" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">为什么要正式验证</h1><p id="a008" class="pw-post-body-paragraph jj jk ht jl b jm kx iu jo jp ky ix jr js kz ju jv jw la jy jz ka lb kc kd ke hm dt translated">传统的审计员可能会建议改进代码质量或可读性的变更，但是不能提供关于代码功能正确性的数学上严格的工件。相对于市场上的非正式解决方案，我们可以提供明显的优势。轻量级静态分析工具可能会发现一些已知的错误模式，但也可能会返回很高的误报率。最终，这样的工具缺乏为您的程序定制的规范所能提供的全面覆盖。</p><h1 id="9b5a" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">流程如何运作</h1><p id="72dc" class="pw-post-body-paragraph jj jk ht jl b jm kx iu jo jp ky ix jr js kz ju jv jw la jy jz ka lb kc kd ke hm dt translated">该过程有五个主要步骤:</p><p id="1001" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">形式化</strong></p><p id="36d3" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">我们基于所有者提供的典型的非正式规范，形式化所有者智能契约的高级业务逻辑。我们为智能合约的预期功能以及它必须满足的重要属性创建精确、定制和全面的规范。</p><p id="1b80" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">确认</strong></p><p id="08d2" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">这个高级规范需要由智能契约的所有者确认，可能需要经过几轮讨论和更改，以确保它正确地捕获了他们的契约的预期行为。在这个早期阶段，甚至在我们开始验证过程之前，我们经常会发现智能合约中的错误。</p><p id="2bd3" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">细化</strong></p><p id="0b4d" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">然后，我们将规范一直细化到虚拟机级别，通常分多个步骤，以捕获特定于虚拟机的详细信息。最终VM级规范的作用是确保在字节码级不会发生任何意外，也就是说，当字节码被执行时，只有在高级规范中指定的事情才会发生。</p><p id="641c" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">编译&amp;测试</strong></p><p id="56b8" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">然后，我们使用将用于部署契约的相同编译器版本，将智能契约从其高级代码编译成最终的VM低级代码。在这个阶段，我们还使用智能合同所有者提供的任何测试，以及我们可能开发的用于增加代码和规范覆盖率的额外测试，针对最终的字节码测试细化的规范。</p><p id="489b" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated"><strong class="jl hu">验证</strong></p><p id="e5c1" class="pw-post-body-paragraph jj jk ht jl b jm jn iu jo jp jq ix jr js jt ju jv jw jx jy jz ka kb kc kd ke hm dt translated">最后，我们根据VM级规范正式验证智能契约的编译后的VM字节码。因此，我们不依赖编译器的正确性。为了严格推理VM字节码而不遗漏任何VM异常，我们使用了<a class="ae ji" href="https://runtimeverification.com/k/" rel="noopener ugc nofollow" target="_blank"> K-framework </a>的构造正确演绎程序验证器，它将VM的形式语义作为输入。</p><h1 id="1a88" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">接触</h1><p id="3e86" class="pw-post-body-paragraph jj jk ht jl b jm kx iu jo jp ky ix jr js kz ju jv jw la jy jz ka lb kc kd ke hm dt translated">从<a class="ae ji" href="https://runtimeverification.com/smartcontract/" rel="noopener ugc nofollow" target="_blank">运行时验证公司</a>了解更多信息，请访问我们的<a class="ae ji" href="https://github.com/runtimeverification/verified-smart-contracts" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>。请将您的问题发送给我们。</p><h1 id="fbb8" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">相关故事</h1><div class="lc ld fm fo le lf"><a href="http://runtimeverification.com/blog/how-formal-verification-of-smart-contracts-works/" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">智能合同的正式验证是如何工作的</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">Brian Marick和DAE jun Park Runtime Verification Inc提供正式的智能合同验证服务。在这个…</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">runtimeverification.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt lu lf"/></div></div></a></div></div></div>    
</body>
</html>