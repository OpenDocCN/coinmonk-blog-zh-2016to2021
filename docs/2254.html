<html>
<head>
<title>Build an insurance application with Hyperledger Composer and React.js Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Hyperledger Composer和React.js构建保险应用程序第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/build-a-insurance-application-with-hyperledger-composer-and-react-js-part-1-3ebe7ad54986?source=collection_archive---------1-----------------------#2019-06-10">https://medium.com/coinmonks/build-a-insurance-application-with-hyperledger-composer-and-react-js-part-1-3ebe7ad54986?source=collection_archive---------1-----------------------#2019-06-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="b047" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本教程讲述了如何使用Hyperledger Composer和React.js作为前端web应用程序构建一个简单的Hyperledger结构网络。</p><p id="b06f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该应用程序将是一个保险应用程序，利用区块链以更有效和安全的方式执行风险分析。</p><ul class=""><li id="e31d" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">第1部分着眼于实现区块链网络</li><li id="e7f6" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">第2部分着眼于将它连接到React.js前端web应用程序可以在这里<a class="ae kc" rel="noopener" href="/@jackjulianhickey/build-an-insurance-application-with-hyperledger-composer-and-react-js-part-2-da27a9dfdee5"/>找到</li></ul></div><div class="ab cl kd ke hb kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hm hn ho hp hq"><h1 id="9525" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">Hyperledger编写器</h1><p id="9225" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hm dt translated">Hyperledger composer是一个在Hyperledger结构上构建区块链商业网络的工具。它抽象了构建区块链网络所涉及的许多复杂性。</p><p id="a74d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要安装Hyperledger Composer，请按照此处的<a class="ae kc" href="https://hyperledger.github.io/composer/latest/installing/installing-prereqs" rel="noopener ugc nofollow" target="_blank">说明</a>进行操作。</p><h1 id="367c" class="kk kl ht bd km kn ln kp kq kr lo kt ku kv lp kx ky kz lq lb lc ld lr lf lg lh dt translated">概观</h1><p id="ab2f" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hm dt translated">该系统是一个保险应用程序，利用区块链进行更有效和安全的风险分析。这是通过投保人在保险公司之间携带他们的数据来实现的，这意味着投保人将他们的数据带给保险公司。</p><p id="cf5a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">系统中有两个参与者:</p><ul class=""><li id="96c0" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">投保人</li><li id="6ba9" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">保险公司</li></ul><p id="d279" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">系统的保单持有人希望执行以下操作:</p><ul class=""><li id="b9ff" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">添加资产</li><li id="63c8" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">接受/拒绝保险报价</li><li id="d1db" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">提出索赔</li></ul><p id="5ba2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保险公司希望能够执行以下操作:</p><ul class=""><li id="a864" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">查看可投保的资产</li><li id="3894" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">提供保险</li><li id="355f" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">批准/拒绝索赔</li></ul><p id="9c82" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">投保人是正在寻找保险或已经为房产或汽车等资产投保的人。</p><p id="c587" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保险公司是向投保人提供这种保险的公司。与投保人寻找保险公司的传统保险不同，投保人向区块链网络广告宣传他们的保险需求，保险公司提供服务。</p><p id="eceb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">风险分析将作为链码实施，当投保人寻找保险时，链码将自动运行。所有与过去索赔和资产相关的数据均由投保人拥有和携带，并不留给保险公司。这些数据将用于对投保人及其资产要求进行简单评估，以提供风险分析分数，供保险公司用于为其保险报价提供信息。</p><p id="793c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因为这个系统会有我们不想让每个人都看到的敏感数据，我们将需要实现控制访问这些个人数据的权限。</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff ls"><img src="../Images/5f1c83418a4eed905b198e3040495503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rFXjCM2cUAKCQjVY2sBxdQ.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">High-Level System Overview</figcaption></figure><h1 id="84eb" class="kk kl ht bd km kn ln kp kq kr lo kt ku kv lp kx ky kz lq lb lc ld lr lf lg lh dt translated">履行</h1><p id="656f" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hm dt translated">如果您还没有安装Hyperledger Composer及其要求，请按照这里的<a class="ae kc" href="https://hyperledger.github.io/composer/latest/installing/installing-prereqs" rel="noopener ugc nofollow" target="_blank">说明进行操作。</a></p><p id="e399" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你可以在GitHub上找到所有的代码。T3】</p><p id="2dfb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们从<strong class="is hu">创建一个文件夹</strong>来存储我们的应用程序开始:</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="447d" class="mn kl ht mj b fv mo mp l mq mr">mkdir insurance-application &amp;&amp; cd insurance-application</span></pre><p id="2866" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们<strong class="is hu">使用yeoman为我们的业务网络</strong>创建一个框架</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="713b" class="mn kl ht mj b fv mo mp l mq mr">yo hyperledger-composer:businessnetwork</span></pre><p id="ac3a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">商业网络名称:risk-analysis-tutorial <br/>描述:风险分析教程<br/>作者姓名:您的姓名<br/>作者邮箱:您的邮箱<br/>许可:Apache-2.0 <br/>命名空间:org.acme.riskanalysis <br/>是否要生成空模板网络？是</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="2c32" class="mn kl ht mj b fv mo mp l mq mr">cd risk-analysis-tutorial</span></pre><p id="b474" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">运行命令ls应该会显示以下文件夹和文件:<br/>-models<br/>-package . JSON<br/>-permissions . ACL<br/>-readme . MD</p><p id="0dd7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，首先我们要<strong class="is hu">定义我们网络中的参与者</strong>，我们知道他们是投保人和保险人。为此，我们打开文件org.acme.riskanalysis.cto，该文件可以在models文件夹中找到。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="ec8a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">投保人还希望能够添加房屋或汽车等资产，因此让我们<strong class="is hu">定义一个名为PrivateAsset的资产和一个名为AssetType </strong>的enum。PrivateAsset依赖于创建资产的投保人。只有3种类型的资产可以添加到由enum AssetType定义的系统中。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="5e6e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将添加另外两种资产类型，一种用于提供保险，另一种用于提出索赔。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="2df1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们需要<strong class="is hu">为网络</strong>定义我们的事务。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="8976" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是您的<strong class="is hu">完整模型文件</strong>的外观:</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="cf00" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们需要<strong class="is hu">实现我们的事务</strong>，这将作为链码来完成。</p><p id="4af7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，您需要<strong class="is hu">在我们的Hyperledger composer项目的主目录中创建一个名为lib </strong>的新目录，您将在其中看到package.json等文件，或者如果您在终端的models目录中，运行以下命令:</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="6e3a" class="mn kl ht mj b fv mo mp l mq mr">mkdir ../lib/ &amp;&amp; cd ../lib/</span></pre><p id="b424" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在lib目录中，现在我们将<strong class="is hu">创建一个名为logic.js </strong>的新文件，这将是我们的链码文件。</p><p id="fb60" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们先<strong class="is hu">实现CreateNewAsset </strong>。您会注意到，我们使用decorators为函数提供元数据。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="40f3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们已经完成了，让我们测试一下，看看它是否有效。</p><p id="3121" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">首先，我们必须<strong class="is hu">启动Hyperledger结构</strong>。找到您下载的目录，如下运行脚本:</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="92cf" class="mn kl ht mj b fv mo mp l mq mr">cd ~/fabric-dev-servers<br/>./startFabric.sh<br/>./createPeerAdminCard.sh</span></pre><p id="27a6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意你只需要跑。/createPeerAdminCard.sh如果您以前没有运行过Hyperledger Fabric或以前运行过。/teardownFabric.sh</p><p id="04eb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您在使用这些命令时遇到问题，请尝试以<strong class="is hu">身份运行，错误的节点版本可能会导致问题</strong>，这些问题在抛出的错误消息中并不明显。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="f38b" class="mn kl ht mj b fv mo mp l mq mr">nvm use 8</span></pre><p id="38c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在回到风险分析教程目录，我们将开始<strong class="is hu">部署我们网络的0.0.1版本。</strong></p><p id="ab5d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">运行该命令将<strong class="is hu">生成一个名为risk-analysis-tutorial @ 0 . 0 . 1 . bna的业务网络</strong>归档文件</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="b91f" class="mn kl ht mj b fv mo mp l mq mr">composer archive create -t dir -n .</span></pre><p id="0845" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，我们将<strong class="is hu">在我们已经建立的Hyperledger Fabric对等体上安装我们的Composer business network </strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="d1c8" class="mn kl ht mj b fv mo mp l mq mr">composer network install --card PeerAdmin@hlfv1 --archiveFile risk-analysis-tutorial@0.0.1.bna</span></pre><p id="9027" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们可以<strong class="is hu">启动我们的业务网络</strong>，这可能需要几分钟时间</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="448b" class="mn kl ht mj b fv mo mp l mq mr">composer network start --networkName risk-analysis-tutorial --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card</span></pre><p id="e7e4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后只需<strong class="is hu">导入网络管理员身份</strong>作为可用的业务网卡</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="fdc8" class="mn kl ht mj b fv mo mp l mq mr">composer card import --file networkadmin.card</span></pre><p id="778f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要测试这一切是否成功，只需<strong class="is hu"> ping网络</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="529e" class="mn kl ht mj b fv mo mp l mq mr">composer network ping --card admin@risk-analysis-tutorial</span></pre><p id="da7a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了<strong class="is hu">检查您部署的网络运行的当前版本</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="828d" class="mn kl ht mj b fv mo mp l mq mr">composer network ping -c admin@risk-analysis-tutorial | grep Business</span></pre><p id="8612" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Hyperledger Composer可以基于业务网络生成定制的REST API。对于我们的网络，我们现在只想保持简单，所以只需运行下面的命令来<strong class="is hu">创建我们的REST API </strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="45b4" class="mn kl ht mj b fv mo mp l mq mr">composer-rest-server -c admin@risk-analysis-tutorial -n never -u true -w true</span></pre><p id="7d54" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在您可以通过导航到来<strong class="is hu">测试REST API</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="ac67" class="mn kl ht mj b fv mo mp l mq mr"><a class="ae kc" href="http://localhost:3000/explorer" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/explorer</a></span></pre><p id="a34a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您应该会看到以下屏幕</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff mu"><img src="../Images/5b17878434a067428a2ac0d873ceea64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*55W7RYwyvDBeaAgKPYsQtg.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Hyperledger Composer REST Server</figcaption></figure><p id="78b5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果我们想测试我们的CreateNewAsset功能，我们需要先<strong class="is hu">创建一些保单持有人</strong>，因此选择保单持有人，然后选择post并输入以下内容，然后单击试用</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="f2b1" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.Policyholder",<br/>  "id": "joe",<br/>  "name": "Joe",<br/>  "balance": "50000",<br/>  "noClaimsYears": "2"<br/>}</span></pre><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff mv"><img src="../Images/8948fb7e0c9e7368278c2baff1a786c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E-AE6rnA6nNKBfOjvU4obQ.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">composer network ping -c admin@risk-analysis-tutorial | grep Business</figcaption></figure><p id="f8cd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在<strong class="is hu">以同样的方式，使用以下信息创建另一个投保人</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="d0bf" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.Policyholder",<br/>  "id": "mary",<br/>  "name": "Mary",<br/>  "balance": "50000",<br/>  "noClaimsYears": "5"<br/>}</span></pre><p id="50df" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对这两个错误响应应该都是200(如果不是的话)。请检查错误消息，并检查您的代码是否有任何潜在的错误。</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff mw"><img src="../Images/4c24d5e80709f7dda9af619590192a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*katehsxr-DGG7aLJTNP8Tw.png"/></div></div></figure><p id="a29e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在我们准备好测试CreateNewAsset函数。为此，请创建一个新的Asset &gt;帖子。让我们为Joe创建一辆价值为2000的汽车，并寻求12个月的保险。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="7fcd" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.CreateNewAsset",<br/>  "policyholder": "resource:org.acme.riskanalysis.Policyholder#joe",<br/>  "assetType": "CAR",<br/>  "value": 2000,<br/>  "durationInMonths": 12<br/>}</span></pre><p id="5b59" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果一切正常，响应代码应该是200。如果没有，请检查一切是否正常，并注意它是否区分大小写。</p><p id="40a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，如果您转到“private assets”&gt;“Get ”,然后单击“试用”,您应该会看到我们刚刚创建的资产。</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff mx"><img src="../Images/f5d565ff8f6d559c2156e6ce5945d5c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDjiyTVsto9QwuM9MjWAiA.png"/></div></div></figure><p id="6a39" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，让我们通过在您的终端中点击ctrl-c来关闭REST服务器，我们将完成其余事务的编写。</p><p id="ea78" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">风险分析交易的<strong class="is hu">逻辑只是检查资产类型、投保人没有索赔的年数以及资产的价值。</strong></p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="ba86" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了测试这一点，请转到package.json文件，并将版本号从0.0.1更改为0.0.2，然后创建一个新的业务网络归档文件</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="4e69" class="mn kl ht mj b fv mo mp l mq mr">composer archive create --sourceType dir --sourceName . -a risk-analysis-tutorial@0.0.2.bna</span></pre><p id="8c71" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">安装新文件</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="4013" class="mn kl ht mj b fv mo mp l mq mr">composer network install --card PeerAdmin@hlfv1 --archiveFile risk-analysis-tutorial@0.0.2.bna</span></pre><p id="1318" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">升级网络</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="99ea" class="mn kl ht mj b fv mo mp l mq mr">composer network upgrade -c PeerAdmin@hlfv1 -n risk-analysis-tutorial -V 0.0.2</span></pre><p id="f89e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">检查网络是否已升级到版本:0.0.2</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="c6bc" class="mn kl ht mj b fv mo mp l mq mr">composer network ping -c admin@risk-analysis-tutorial | grep Business</span></pre><p id="054e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">然后<strong class="is hu">再次运行您的Composer REST服务器</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="a16f" class="mn kl ht mj b fv mo mp l mq mr">composer-rest-server -c admin@risk-analysis-tutorial -n never -u true -w true</span></pre><p id="bcc7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您之前创建的所有投保人和资产仍将存在，因此无需再次设置。让我们获取之前为Joe添加的汽车的id。然后<strong class="is hu">进入风险分析&gt; Post </strong>并进入下面的<strong class="is hu">用你的资产ID </strong>替换ASSETID。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="4c5c" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.RiskAnalysis",<br/>  "privateAsset": "resource:org.acme.riskanalysis.PrivateAsset#ASSETID"<br/>}</span></pre><p id="6db6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在回到PrivateAsset &gt; Get，您应该看到风险分析分数已经从0变为3。</p><p id="a5a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">接下来，让我们<strong class="is hu">实现MakeInsuranceOffer </strong></p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="ad4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们<strong class="is hu">添加接受保险的能力</strong></p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="841f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们<strong class="is hu">实现CreateClaim </strong></p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="e369" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意这个函数是如何使用查询的。这个查询还没有定义，它只是简单地查找这个资产的保险报价。</p><p id="954b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">因此，为了实现这个查询<strong class="is hu">,在risk-analysis-tutorial目录中创建一个名为queries.qry </strong>的新文件，然后<strong class="is hu">向该文件添加以下行</strong>。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="66b1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们只需要多一个功能，那就是<strong class="is hu">处理索赔的能力</strong>。</p><figure class="lt lu lv lw fq lx"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="d3a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们测试所有这些，但首先让我们<strong class="is hu">将package.json文件更新到版本0.0.3 </strong>。然后<strong class="is hu">运行下面的命令集</strong>。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="1851" class="mn kl ht mj b fv mo mp l mq mr">composer archive create --sourceType dir --sourceName . -a risk-analysis-tutorial@0.0.3.bna<br/>composer network install --card PeerAdmin@hlfv1 --archiveFile risk-analysis-tutorial@0.0.3.bna<br/>composer network upgrade -c PeerAdmin@hlfv1 -n risk-analysis-tutorial -V 0.0.3</span></pre><p id="8a76" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在让我们再次运行<strong class="is hu"> composer REST API服务器</strong></p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="2711" class="mn kl ht mj b fv mo mp l mq mr">composer-rest-server -c admin@risk-analysis-tutorial -n never -u true -w true</span></pre><p id="bd1b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">所以让我们从创建一家保险公司开始</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="e911" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.InsuranceCompany",<br/>  "id": "awesomeInsurance",<br/>  "name": "The Awesome Insurance Company",<br/>  "balance": "0.0",<br/>  "insuranceContracts": "0"<br/>}</span></pre><p id="d90a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在你可以做你的第一份保险要约了。确保替换资产ID。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="08e1" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.MakeInsuranceOffer",<br/>  "policyholder": "resource:org.acme.riskanalysis.Policyholder#joe",<br/>  "insuranceCompany": "resource:org.acme.riskanalysis.InsuranceCompany#awesomeInsurance",<br/>  "privateAsset": "resource:org.acme.riskanalysis.PrivateAsset#joe549963",<br/>"monthlyCost": 100<br/>}</span></pre><p id="e7bb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在转到<strong class="is hu"> InsuranceOffer &gt; GET </strong>，您应该会看到您新创建的保险要约，状态为pending。记下下一步的ID。</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff my"><img src="../Images/e60b3b973dfed85a295310add1917f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ewqZJr7cp4B6EBjui1AiYg.png"/></div></div></figure><p id="1fd9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，使用保险产品的ID，让我们测试一下是否接受这个保险产品。转到<strong class="is hu">accept insurance offer&gt;POST</strong>并使用以下内容将要约ID替换为您的ID。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="fe4f" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.AcceptInsuranceOffer",<br/>  "offer": "resource:org.acme.riskanalysis.InsuranceOffer#OFFERID"<br/>}</span></pre><p id="38f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">你现在应该注意到，如果你去<strong class="is hu">保险公司&gt;获取</strong>并点击试用！你应该注意到保险报价的状态现在是接受的，如果一切工作如下。</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff mz"><img src="../Images/97d151072b0c4a66c457e79b2c0e8a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T846Mpj_orwOxKYMpoQq5A.png"/></div></div></figure><p id="14ba" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">既然Joe的资产已经投保，我们就来测试一下如何索赔。<strong class="is hu">创建索赔&gt;帖子</strong>并输入以下内容，用您的ID替换私有资产ID。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="7d03" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.CreateClaim",<br/>  "privateAsset": "resource:org.acme.riskanalysis.PrivateAsset#PRIVATEASSETID",<br/>  "policyholder": "resource:org.acme.riskanalysis.Policyholder#joe",<br/>  "description": "Cracked Window",<br/>  "claimValue": 800<br/>}</span></pre><p id="9cac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果一切都解决了，你现在应该可以得到索赔。</p><p id="736d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最后，我们可以测试处理该索赔的能力。转到<strong class="is hu">处理索赔&gt;发布</strong>并记住更改索赔ID。</p><pre class="lt lu lv lw fq mi mj mk ml aw mm dt"><span id="9ba9" class="mn kl ht mj b fv mo mp l mq mr">{<br/>  "$class": "org.acme.riskanalysis.ProcessClaim",<br/>  "claim": "resource:org.acme.riskanalysis.Claim#CLAIMID",<br/>  "status": "approved"<br/>}</span></pre><p id="dd34" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，当您前往<strong class="is hu">申请&gt;获取</strong>时，您应该会看到您的申请获得批准，如下所示。</p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff na"><img src="../Images/551bae5e3b2b30d029b1f2b0b5bf3e99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CuZFJsxtGsaz3BD5eUb_hg.png"/></div></div></figure><p id="ee3d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在下一部分中，我们将着眼于将我们的Hyperledger Fabric网络与React.js前端web应用程序集成。</p><p id="da19" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae kc" rel="noopener" href="/@jackjulianhickey/build-an-insurance-application-with-hyperledger-composer-and-react-js-part-2-da27a9dfdee5"> <strong class="is hu">第二部分可以在这里找到。</strong>T3】</a></p><figure class="lt lu lv lw fq lx fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/e7b1dbc6a532a697c6844fdf0f0bbd30.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*HrFLDXz92JavTZXjhmvU7g.png"/></div></figure><blockquote class="nc"><p id="0abc" class="nd ne ht bd nf ng nh ni nj nk nl jn ek translated"><a class="ae kc" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="nn no np nq nr lx fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nm"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>