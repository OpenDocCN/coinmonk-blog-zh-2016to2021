<html>
<head>
<title>Get started with blockchain using the AWS Hyperledger Fabric template — an unofficial guide (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Hyperledger结构模板开始使用区块链-非官方指南(第1部分)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/get-started-with-blockchain-using-the-aws-hyperledger-fabric-template-an-unofficial-guide-551bc46af710?source=collection_archive---------1-----------------------#2018-05-23">https://medium.com/coinmonks/get-started-with-blockchain-using-the-aws-hyperledger-fabric-template-an-unofficial-guide-551bc46af710?source=collection_archive---------1-----------------------#2018-05-23</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="fb4b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">2018年4月19日，亚马逊网络服务(Amazon Web Services)宣布为以太坊发布<a class="ae jo" href="https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-aws-blockchain-templates/" rel="noopener ugc nofollow" target="_blank">区块链模板，为其公共云发布【Hyperledger Fabric。在达费罗，我们相信DLT和区块链既强大又复杂。我们相信，模板和最佳实践对于社区和行业采用和实施诸如Fabric等技术以释放其价值至关重要。</a></p><blockquote class="jp"><p id="bdb3" class="jq jr ht bd js jt ju jv jw jx jy jn ek translated"><a class="ae jo" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><p id="e495" class="pw-post-body-paragraph iq ir ht is b it jz iv iw ix ka iz ja jb kb jd je jf kc jh ji jj kd jl jm jn hm dt translated">我们的好奇心让我们看了一下AWS官方的CloudFormation的Hyperledger Fabric模板。虽然AWS官方报道了如何使用<a class="ae jo" href="https://aws.amazon.com/blogs/aws/get-started-with-blockchain-using-the-new-aws-blockchain-templates/" rel="noopener ugc nofollow" target="_blank">以太坊模板</a>，但我们想了解该模板能为Hyperledger Fabric用户做些什么。经过彻底的回顾，我们想在一个多部分的Dapphero博客系列中分享我们的旅程，以展示在AWS中运行的Hyperledger Fabric之上的端到端分散式应用程序。</p><p id="468a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在本博客系列结束时，按照逐步说明，您将能够完成以下任务:</p><ol class=""><li id="608a" class="ke kf ht is b it iu ix iy jb kg jf kh jj ki jn kj kk kl km dt translated">利用AWS的Hyperledger Fabric模板为3个组织提供基础架构，每个组织有1个对等方加入联盟网络。</li><li id="2795" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">了解AWS托管的云主机以及Fabric命令行界面的基础知识。</li><li id="3bac" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">在联盟网络上运行多个IBM Marbles的实例。</li></ol><p id="441f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">本文要求具备AWS服务的基本知识，特别是EC2和CloudFormation。</p><p id="5df1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/IBM-Blockchain/marbles" rel="noopener ugc nofollow" target="_blank"> Marbles </a>是IBM在Apache 2.0许可下发布的一个去中心化应用程序。这个dapp演示了利用Hyperledger Fabric作为DLT/区块链平台，在许多独立组织的所有者之间转移弹珠。它加强了生命周期控制、所有权、各方之间的转移，以及对单个弹珠出处记录的审计跟踪。如果你想了解更多关于<a class="ae jo" href="https://github.com/IBM-Blockchain/marbles" rel="noopener ugc nofollow" target="_blank">弹珠</a>的信息，我们建议你查看该项目的详细自述。</p><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff ks"><img src="../Images/374e9e010fd59dbc9c001e7ada66c709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1OMzo6tmVcc1Av731OKYwQ.gif"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">Illustrates three instances, one per org, of IBM’s Marbles dapp running against AWS-hosted Fabric consortium blockchain</figcaption></figure><h1 id="6455" class="li lj ht bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">第1部分:利用AWS的Hyperledger结构模板</h1><p id="8853" class="pw-post-body-paragraph iq ir ht is b it mg iv iw ix mh iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hm dt translated">让我们直接进入这个多部分博文系列的第一部分。</p><h2 id="cf73" class="ml lj ht bd lk mm mn mo lo mp mq mr ls jb ms mt lw jf mu mv ma jj mw mx me my dt translated">步骤1:使用AWS的CloudFormation模板进行结构基础设施配置</h2><p id="695f" class="pw-post-body-paragraph iq ir ht is b it mg iv iw ix mh iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hm dt translated">导航至<a class="ae jo" href="https://aws.amazon.com/blockchain/templates/getting-started/" rel="noopener ugc nofollow" target="_blank">区块链模板入门</a>页面。从右侧的“Hyperledger Fabric”部分下选择所需区域的链接。在达费罗，我们将使用<em class="mz">美国西部(俄勒冈州)</em>，又名<em class="mz">美国西部-2 </em>。如果您尚未登录，AWS控制台会提示您输入凭据。如下面的截屏所示，填写堆栈创建表单，尽可能使用默认值。我们还将分享脚本片段，假设您的组织被称为<em class="mz"> org1 </em>、<em class="mz"> org2 </em>和<em class="mz"> org3 </em>。命名方案对于我们的脚本非常重要，有助于简化后续博客文章中的配置过程。</p><p id="f7d9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一些需要注意的事项:</p><ol class=""><li id="2279" class="ke kf ht is b it iu ix iy jb kg jf kh jj ki jn kj kk kl km dt translated">CloudFormation模板表单仅应用简单的健全性检查，例如，未关联的安全组和VPC ID将被忽略，并且堆栈创建将在过程后期失败。一定要提前仔细检查。</li><li id="2670" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">为了简单起见，我们选择通过AWS主机的公共网络接口与它进行交互。</li><li id="ec95" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">安全组(例如SG_Fabric_Demo)应该允许到以下端口的入站TCP连接:<em class="mz"> 22、80、8080、7050、7051、7053、8051、8053、9051、</em>和<em class="mz"> 9053 </em>。您可以将来自<em class="mz">任何地方</em>的连接列入白名单(仅限PoC！)，特定的IP范围，或者使用堡垒主机(不在范围内)来访问托管您的组织的对等机的云机器。</li><li id="421b" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">我们已经创建了一个临时IAM角色来运行堆栈创建。确保授予该角色使用两个特定策略来配置EC2基础架构的访问权限，1。)<em class="mz">Amazon EC 2 containerregistry readonly</em>和2。)<em class="mz">亚马逊3ReadOnlyAccess </em>。</li><li id="03ea" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">不用说，确保您拥有EC2中用于运行模板的私钥。</li></ol><p id="ff8b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">提交后，CloudFormation将导航至堆栈详细信息页面，其中将显示<strong class="is hu"> <em class="mz">创建进行中</em> </strong>的状态。需要几分钟才能完成。喝杯茶/咖啡的好机会。</p><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff na"><img src="../Images/23634e349a7daeddbf5621ce1122308f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PpqfiQ3hNpavzD6jJYRbbA.gif"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">CloudFormation template-based stack creation end-to-end</figcaption></figure><p id="7a2c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦完成堆栈细节将显示<strong class="is hu"><em class="mz">CREATE _ COMPLETE</em></strong>。如果出现错误，请注意这个CloudFormation模板利用了嵌套的堆栈(转到堆栈概述页面)，在我们的情况下，这有助于通过更仔细地查看日志来诊断问题。还请注意，出于演示目的，AWS选择提供单个云主机实例来为所有组织托管多个Fabric对等体。不建议在生产中应用类似的设置。</p><h2 id="3482" class="ml lj ht bd lk mm mn mo lo mp mq mr ls jb ms mt lw jf mu mv ma jj mw mx me my dt translated">步骤2:查看Fabric Explorer web应用程序</h2><p id="adcd" class="pw-post-body-paragraph iq ir ht is b it mg iv iw ix mh iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hm dt translated">AWS模板附带了现成的Fabric Explorer(可以说是一个过时的版本)。将web浏览器导航到以下URL将直接进入Fabric Explorer体验。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="9c4d" class="ml lj ht nc b fv ng nh l ni nj">http://&lt;Instance IP address&gt;/<br/>(e.g. <a class="ae jo" href="http://54.202.17.239" rel="noopener ugc nofollow" target="_blank">http://54.202.17.239</a>)<br/>http://&lt;Instance IP address&gt;:8080/<br/>(this will also work; e.g. <a class="ae jo" href="http://54.202.17.239:8080/" rel="noopener ugc nofollow" target="_blank">http://54.202.17.239:8080/</a>)</span></pre><p id="55b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Fabric Explorer应该类似于下面的屏幕截图。有几点需要注意:</p><ol class=""><li id="a8da" class="ke kf ht is b it iu ix iy jb kg jf kh jj ki jn kj kk kl km dt translated">某些浏览器在输入IP地址时不再自动完成http://。它们要么使用https://无法使用，要么是错误。我们还意识到(谢谢你，戴夫！)只要安全组允许入站连接，端口8080也将服务于资源管理器。</li><li id="de11" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">在交易进入之前，新调配的探险者可能不会向其他对等方显示太多数据。</li><li id="3f3e" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">AWS模板利用<em class="mz"> iptables </em>直接在端口80上公开地公开容器的端口。不幸的是，<em class="mz"> iptables </em>指令不会在机器重新启动时持续存在。请改用端口8080。</li><li id="b37d" class="ke kf ht is b it kn ix ko jb kp jf kq jj kr jn kj kk kl km dt translated">如果即使云主机没有重新启动，资源管理器也不会加载，则安全组可能会错过允许端口<em class="mz"> 80 </em>上的入站TCP连接的指令。不如试试8080端口。</li></ol><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff nk"><img src="../Images/60e911263644d55a17f1ec5afa506feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CyTHcCxZlPC4UtpfGLuxvw.gif"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">Fabric Explorer web interface</figcaption></figure><p id="6f1e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">稍后我们将部署弹珠应用程序，Fabric Explorer是一个很好的工具，可以在事务数据进入网络时进行跟踪和监控。</p><h2 id="b786" class="ml lj ht bd lk mm mn mo lo mp mq mr ls jb ms mt lw jf mu mv ma jj mw mx me my dt translated">第3步:通过AWS云主机导航结构</h2><p id="8c74" class="pw-post-body-paragraph iq ir ht is b it mg iv iw ix mh iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hm dt translated">CloudFormation堆栈详细信息页面将在<em class="mz"> DevDesktopInstanceId下的<em class="mz">输出</em>部分显示实例ID。</em>找到EC2控制台的Fabric主机实例，并按照说明将SSH插入该对话框。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="04b2" class="ml lj ht nc b fv ng nh l ni nj"><strong class="nc hu">~/demo $ ssh -i yourkey.pem -r ec2-user@&lt;Instance IP address&gt;</strong><br/>&gt; Amazon Linux AMI</span></pre><p id="2bf2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="mz">ec2-用户</em>的主目录将显示与Hyperledger Fabric相关的两个条目。两者都预先打包了AWS模板。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="1829" class="ml lj ht nc b fv ng nh l ni nj">~ $ <strong class="nc hu">ls -l ~/</strong><br/>total 8<br/>drwxr-xr-x 3 ec2-user ec2-user 4096 Apr 24 23:44 HyperLedger-BasicNetwork<br/>drwxr-xr-x 5 ec2-user ec2-user 4096 May 16 17:35 hyperledger-fabric-samples</span></pre><p id="c6df" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这有助于实现AWS选择使用<a class="ae jo" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank">Docker composite</a>通过Docker容器基础架构交付Fabric。它基于Hyperledger Fabric项目发布的示例项目。只要浏览一下正确的子目录，就会看到相关的Docker配置文件。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="4560" class="ml lj ht nc b fv ng nh l ni nj">$ <strong class="nc hu">ls -l ~/HyperLedger-BasicNetwork/artifacts/docker-compose/</strong><br/>total 40<br/>-rw-r - r - 1 ec2-user ec2-user 4185 May 16 17:36 docker-compose-base.yaml<br/>-rw-r - r - 1 ec2-user ec2-user 4575 Apr 24 23:44 docker-compose-base.yaml.template<br/>-rw-r - r - 1 ec2-user ec2-user 2085 Apr 24 23:44 docker-compose-cli-only.yaml.template<br/>-rw-r - r - 1 ec2-user ec2-user 3662 May 17 00:51 docker-compose-cli.yaml<br/>-rw-r - r - 1 ec2-user ec2-user 3968 Apr 24 23:44 docker-compose-cli.yaml.template<br/>-rw-r - r - 1 ec2-user ec2-user 749 May 16 17:36 docker-compose-explorer.yaml<br/>-rw-r - r - 1 ec2-user ec2-user 790 Apr 24 23:44 docker-compose-explorer.yaml.template<br/>-rw-r - r - 1 ec2-user ec2-user 1006 Apr 24 23:44 peer-base.yaml</span></pre><p id="b8c4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">任何基于码头工人撰写的命令都将工作，将<strong class="is hu"> <em class="mz">码头工人撰写命令</em> </strong>指定为各自的配置文件。要查看哪些容器正在运行，我们可以列出它们，并使用Docker Compose跟踪它们的所有日志。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="db06" class="ml lj ht nc b fv ng nh l ni nj">$ <strong class="nc hu">cd ~/HyperLedger-BasicNetwork/artifacts/docker-compose/</strong><br/>$ <strong class="nc hu">docker-compose -f docker-compose-cli.yaml ps</strong><br/>         Name                       Command               State                       Ports<br/>----------------------------------------------------------------------------------------------------------------<br/>cli                      /bin/bash                        Up<br/>fabric-explorer          /bin/sh -c /opt/blockchain ...   Up      0.0.0.0:8080-&gt;8080/tcp<br/>fabric-explorer-db       docker-entrypoint.sh postgres    Up      0.0.0.0:5432-&gt;5432/tcp<br/>orderer.example.com      orderer                          Up      0.0.0.0:7050-&gt;7050/tcp<br/>peer0.org1.example.com   peer node start                  Up      0.0.0.0:7051-&gt;7051/tcp, 0.0.0.0:7053-&gt;7053/tcp<br/>peer0.org2.example.com   peer node start                  Up      0.0.0.0:8051-&gt;7051/tcp, 0.0.0.0:8053-&gt;7053/tcp<br/>peer0.org3.example.com   peer node start                  Up      0.0.0.0:9051-&gt;7051/tcp, 0.0.0.0:9053-&gt;7053/tcp</span><span id="4975" class="ml lj ht nc b fv nl nh l ni nj">$ <strong class="nc hu">docker-compose -f docker-compose-cli.yaml logs | grep "example.com"</strong><br/>[...]<br/>peer0.org1.example.com | 2018–05–21 22:17:08.307 UTC [gossip/discovery] expireDeadMembers -&gt; WARN 037 Entering [[170 123 98 139 66 14 67 137 217 110 254 192 37 205 91 30 68 48 210 154 215 82 38 145 53 103 71 19 112 148 202 206]]<br/>peer0.org1.example.com | 2018–05–21 22:17:08.307 UTC [gossip/discovery] expireDeadMembers -&gt; WARN 038 Closing connection to Endpoint: peer0.org2.example.com:7051, InternalEndpoint: , PKI-ID: [170 123 98 139 66 14 67 137 217 110 254 192 37 205 91 30 68 48 210 154 215 82 38 145 53 103 71 19 112 148 202 206], Metadata: []<br/>peer0.org1.example.com | 2018–05–21 22:17:08.307 UTC [gossip/discovery] expireDeadMembers -&gt; WARN 039 Exiting</span></pre><p id="4b01" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">通常情况下，能够更接近容器/流程级别可以更有效、更快地排除问题。它还提供了一个了解有关Fabric内部工作方式的详细信息的好方法。</p><p id="9fd8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在继续之前，让我们先看看与结构本身、资源管理器、基本自动化脚本和底层加密材料相关的更多配置数据位于AWS主机上的何处。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="7de9" class="ml lj ht nc b fv ng nh l ni nj">$ <strong class="nc hu">ls -l /etc/fabric/</strong><br/>total 32<br/>drwxr-xr-x 7 root root 4096 May 16 17:36 chaincode<br/>drwxrwxr-x 2 ec2-user ec2-user 4096 May 17 00:51 channel-artifacts<br/>drwxr-xr-x 4 ec2-user ec2-user 4096 May 16 17:36 crypto-config<br/>-rw-r - r - 1 root root 3195 May 16 17:36 explorer-config.json<br/>drwxr-xr-x 2 root root 4096 May 16 17:36 network-management-scripts<br/>drwxr-xr-x 2 root root 4096 May 16 17:36 scripts<br/>drwxr-xr-x 2 root root 4096 May 16 17:36 tools-bin<br/>drwxr-xr-x 2 root root 4096 May 16 17:36 tools-config</span></pre><p id="cfe0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在所有工件中，一个重要的数据存储是<strong class="is hu"> <em class="mz"> crypto-config </em> </strong>目录，它存储所有组织的证书、它们的公钥和私钥对。请注意，对于任何形式的生产级操作，都不建议将所有组织的这种高度敏感的加密材料存储在一个位置(为简单起见)，由一个人或一个实体控制。<strong class="is hu"> <em class="mz">加密配置</em> </strong>的高层浅树应该类似于下面目录层的结构。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="ae13" class="ml lj ht nc b fv ng nh l ni nj">$ <strong class="nc hu">tree -d -L 3 crypto-config</strong><br/>crypto-config<br/>├── ordererOrganizations<br/>│   └── example.com<br/>│       ├── ca<br/>│       ├── msp<br/>│       ├── orderers<br/>│       ├── tlsca<br/>│       └── users<br/>└── peerOrganizations<br/>    ├── org1.example.com<br/>    │   ├── ca<br/>    │   ├── msp<br/>    │   ├── peers<br/>    │   ├── tlsca<br/>    │   └── users<br/>    ├── [...repeats for org2., org3.]</span></pre><p id="715e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在博客系列的后面部分，我们将需要<strong class="is hu"> <em class="mz">加密配置</em> </strong>来运行Marbles应用程序的实例。现在，让我们转到Fabric的命令行界面。</p><h2 id="37e0" class="ml lj ht bd lk mm mn mo lo mp mq mr ls jb ms mt lw jf mu mv ma jj mw mx me my dt translated">步骤4:探索AWS主机上的结构对等CLI</h2><p id="10c1" class="pw-post-body-paragraph iq ir ht is b it mg iv iw ix mh iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hm dt translated">在一个基本的操作级Hyperledger结构上，是一组作为容器中的进程运行的二进制文件，通过网络接口提供API。为了与Fabric进行交互，可以使用官方语言专用的SDK，或者使用内置的命令行接口来针对API发出调用，以执行各种Fabric管理任务和监控。</p><p id="bec3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">不幸的是，AWS模板附带了一个微妙的错别字(Dapphero向AWS提交了一个错误报告),它使预先提供的CLI开箱即用。应用修复需要几个步骤，但总体来说很简单。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="bfeb" class="ml lj ht nc b fv ng nh l ni nj">$ cd HyperLedger-BasicNetwork/artifacts/docker-compose/<br/>$ nano docker-compose-cli.yaml</span></pre><p id="c5bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">删除第68行<strong class="is hu"> <em class="mz"> /opt /gopath </em> </strong>中<strong class="is hu">/<em class="mz">opt</em>/opt后的空白，以<strong class="is hu"><em class="mz">/opt/gopath</em></strong><em class="mz">和<br/> </em>退出+保存，用键盘快捷键<em class="mz"> CTRL+X </em>确认修改<em class="mz">。</em>接下来，需要重新创建cli容器来进行修复，然后在CLI容器内启动bash。</strong></p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="43ea" class="ml lj ht nc b fv ng nh l ni nj"><strong class="nc hu">$ IMAGE_TAG=latest docker-compose -f docker-compose-cli.yaml up -d --no-deps cli</strong><br/>$ docker-compose -f docker-compose-cli.yaml exec cli bash<br/><strong class="nc hu">root@0f45d277b51a:peer# ls</strong><br/>channel-artifacts crypto scripts</span></pre><p id="eda7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">container Fabric的对等二进制内部提供了各种命令来检查Fabric区块链内部的情况并进行更改。对等二进制程序获取环境变量，以确定要连接到哪个对等体。以下说明将揭示什么样的对等体加入了什么样的通道。</p><pre class="kt ku kv kw fq nb nc nd ne aw nf dt"><span id="15ac" class="ml lj ht nc b fv ng nh l ni nj"><strong class="nc hu">root@0f45d277b51a:peer# export | grep PEER | grep -v TLS</strong><br/>declare -x CORE_PEER_ADDRESS="peer0.org1.example.com:7051"<br/>declare -x CORE_PEER_ID="cli"<br/>declare -x CORE_PEER_LOCALMSPID="org1MSP"<br/>declare -x CORE_PEER_MSPCONFIGPATH="/<a class="ae jo" href="mailto:opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com" rel="noopener ugc nofollow" target="_blank">opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com</a>/msp"<br/><strong class="nc hu">root@0f45d277b51a:peer# peer channel list</strong><br/>2018–05–22 15:41:11.235 UTC [channelCmd] InitCmdFactory -&gt; INFO 001 Endorser and orderer connections initialized<br/>Channels peers has joined:<br/>mychannel<br/>2018–05–22 15:41:11.237 UTC [main] main -&gt; INFO 002 Exiting…..</span></pre><p id="422a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要对org2或org3的对等方发出命令，需要设置环境以匹配相应组织的地址、MSP和MSPIDs。在线文档的<strong class="is hu"> <em class="mz">对等通道帮助</em> </strong>和<a class="ae jo" href="https://hyperledger-fabric.readthedocs.io/en/latest/commands/peercommand.html" rel="noopener ugc nofollow" target="_blank">对等命令参考</a>部分提供了对等二进制帮助。</p><h2 id="a3da" class="ml lj ht bd lk mm mn mo lo mp mq mr ls jb ms mt lw jf mu mv ma jj mw mx me my dt translated">下一步是什么？</h2><p id="e6b0" class="pw-post-body-paragraph iq ir ht is b it mg iv iw ix mh iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hm dt translated">恭喜你。现在我们已经了解了通过官方AWS模板提供的AWS主机的设置，在下一篇文章中，我们将重点关注如何在没有结构证书授权(AWS模板中未提供)的情况下导航身份、部署链码(智能合同的结构语言)以及运行Marbles的多个实例，以展示分散式应用程序如何在联盟网络中端到端地工作。</p><p id="ba22" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们期待您在下面的评论中或通过<a class="ae jo" href="https://docs.google.com/forms/d/e/1FAIpQLSc3K55U7g6iOU8G6odqnF-1sJcySe6JcFC6MpE69qVijNUGsA/viewform?usp=pp_url&amp;entry.2005620554&amp;entry.482458136=I+want+to+get+involved&amp;entry.1045781291&amp;entry.1166974658&amp;entry.839337160" rel="noopener ugc nofollow" target="_blank">daphero的联系表</a>提出反馈和问题。</p></div><div class="ab cl nm nn hb no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="hm hn ho hp hq"><figure class="kt ku kv kw fq kx fe ff paragraph-image"><div class="fe ff nt"><img src="../Images/726d3e95fcb9bbb9b046942ce723a689.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/1*_Xq1Lhzgr3uWwJWEbAXQQg.png"/></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">About the author: <a class="ae jo" href="https://www.linkedin.com/in/sourishkrout" rel="noopener ugc nofollow" target="_blank">Sebastian Tiedtke</a> is the cofounder &amp; CEO of Dapphero. Before dedicating his time to unlock Blockchain/DLT for developers and businesses, Sebastian spent five years helping bring test automation to countless agile software shops leading <a class="ae jo" href="https://saucelabs.com/" rel="noopener ugc nofollow" target="_blank">Sauce Labs</a>’ engineering teams.</figcaption></figure></div></div>    
</body>
</html>