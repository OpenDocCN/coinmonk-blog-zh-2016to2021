<html>
<head>
<title>Measuring Ethereum Nodes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测量以太坊节点</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/measuring-ethereum-nodes-530bfff08e9c?source=collection_archive---------1-----------------------#2019-10-08">https://medium.com/coinmonks/measuring-ethereum-nodes-530bfff08e9c?source=collection_archive---------1-----------------------#2019-10-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="bc02" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">最近有一个帖子比较以太坊和比特币的在线节点，我在评论里提到，以太坊相关的数字代表性不够。</p><figure class="jo jp jq jr fq js"><div class="bz el l di"><div class="jt ju l"/></div></figure><p id="62f0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我已经跟踪在线以太坊节点有一段时间了，所以我有这些数据供进一步分析。我在<a class="ae jv" href="https://gastracker.io/stats/nodes" rel="noopener ugc nofollow" target="_blank">胃袋页面</a>上发布了以太坊经典网络的一些结果，尽管我有更详细的数据，对所有基于以太坊的网络有更深入的了解。</p><p id="71f1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jw">那么抓取以太坊网络</em>有什么问题呢？第一个也是最明显的障碍是以太坊和以太坊经典的存在，因为两者共享相同的协议、相同的标识符和相同的初始历史，包括创世块。来自两个网络的节点偶尔会相互连接，交换来自共享历史的新事务和数据。通过连接到一个ETH节点，您不能确定它的所有对等节点都是ETH节点。初始握手不能提供足够的信息，因此一个节点甚至与来自另一个网络的对等节点保持连接，告诉其他以太网节点关于该节点的信息，等等。</p><h2 id="0809" class="jx jy ht bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr dt translated">网络ID 1不是以太坊</h2><p id="7354" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hm dt translated">这是以太节点等服务提供的数据的主要问题。它只显示所有节点，而不考虑实际的链。事实上，它并没有在任何地方显示“<em class="jw"> ETH节点</em>，而是“<em class="jw">网络id为1 </em>的节点”，这些节点由几个不同的区块链共享，而不仅仅是ETH和ETC。</p><p id="a7de" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">区分它们的唯一方法是连接到它们并下载区块链历史的一部分，因为它对不同的分叉有不同的块。根据我的经验，只有不到70%的节点是真正的以太坊节点。</p><p id="fae0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里是每个链的节点分布，其中<em class="jw">网络id = 1 </em>，即所有节点都在以太网节点页面上的同一个存储桶中。</p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff kx"><img src="../Images/f19e2211d73a190b7f537e986ca94427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWsQ4OMaFvIiK-i2aTGhWA.png"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">Unique nodes for the past 7 days<strong class="bd li"><em class="lj">; unknown — </em></strong>nodes here are nodes that respond with network_id 1, but their genesis block doesn’t match any of well-known blockchain<em class="lj">s; </em><strong class="bd li"><em class="lj">eth_or_etc — </em></strong>are nodes just shares commons history of ETC and ETH; usually, those nodes are just doing the initial sync</figcaption></figure><p id="078e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">总共有大约10，000个节点，其中只有大约6000个ETH节点、1000个ETC节点和2000多个其他网络。</p><p id="bde4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与所有基于以太坊的网络的分布相比(即不仅仅是network_id = 1):</p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff lk"><img src="../Images/7925b1abf9e22a93700b9b9c3851247a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MlRKlLZpBuhKt7UW4Q95eA.png"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">Unique nodes for the past 7 days</figcaption></figure><p id="4ec0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里有一点可能会引起误解，那就是并不是所有的6000个这样的节点总是可用的。上面的数据是基于过去7天的，包括至少出现过一次的所有节点。尽管通常一天只有不到一半的人在线:</p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/2633ad647e7d63e3f02b0ec6a9c6cc4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v5XOsYdqtw9Ufl_PU-8sWg.png"/></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">Unique ETH nodes per day</figcaption></figure><h2 id="e1c3" class="jx jy ht bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr dt translated">Geth与奇偶校验</h2><p id="e1c8" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hm dt translated">另一件事是Geth和奇偶行为之间的区别。这两个是领先的节点实现，它们共享大部分市场。然而，很难测量他们股份的准确数字，任何机器人逻辑的错误都会导致结果数字的失真。</p><p id="caac" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><em class="jw">那为什么是</em>？似乎奇偶和Geth有不同的使用场景；第一种在服务器上流行，第二种在桌面上更常见。以太坊官方钱包Mist是和Geth一起来的，经典Geth也是一样，<a class="ae jv" href="https://emeraldwallet.io/" rel="noopener ugc nofollow" target="_blank">翡翠钱包</a>在ETC上的桌面用的。</p><p id="7728" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">环境中的这种差异(桌面与服务器)导致了Geth更难捕捉的情况。一个问题是Geth的在线时间很短。另一个可能造成重大影响的问题是，家庭互联网的端口转发和防火墙配置通常不正确，并且不如数据中心的互联网稳定。因此，您不能连接到这样的Geth实例，但应该期待来自它的传入连接。在这种情况下，机器人需要确保所有可能的Geth实例以某种方式了解机器人，并连接到它来介绍自己。</p><p id="857e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为了说明这一点，看一下允许不同软件进行传入连接的节点的分布。</p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff ll"><img src="../Images/1dd6e0b7a2d7e2207a44c0b994f3e970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00pBQ1fy9N2VCwmT2llDZA.png"/></div></div></figure><p id="b4a7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">根据我的经验，大约70%的Geth节点不允许传入连接，相比之下，52%的节点不允许传入连接。另一方面，奇偶校验节点在发现其他节点时并不那么活跃，这可能是因为这种节点运行在服务器上，仅在启动后的最初几分钟内为对等节点主动发现。</p><h2 id="53da" class="jx jy ht bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr dt translated">国家</h2><p id="2541" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hm dt translated">按国家分布也很有趣:</p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff lm"><img src="../Images/9f8290cf0e22d2e45308a96019b585f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPTuN2Uiepz5zqsv8cplSQ.png"/></div></div></figure><p id="aa72" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请注意中国的电话号码。我敢肯定，中国的实际节点数量至少要大一倍，但由于防火长城，bot无法连接到它们。正确衡量一切的唯一方法是在中国大陆运行一个bot实例，虽然我不知道如何做，但我肯定希望在将来这样做。</p><h2 id="8450" class="jx jy ht bd jz ka kb kc kd ke kf kg kh jb ki kj kk jf kl km kn jj ko kp kq kr dt translated">看着福克斯</h2><p id="115a" class="pw-post-body-paragraph iq ir ht is b it ks iv iw ix kt iz ja jb ku jd je jf kv jh ji jj kw jl jm jn hm dt translated">我创建我的刮刀机器人的一个主要原因是为了观察硬分叉，跟踪网络升级的进度，即软件的哪些版本在线。有时它会展示迷人的艺术品，比如我在君士坦丁堡升级之前发布的一个:</p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff ln"><img src="../Images/58a70cd36e99e7172f697cf5778db37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-8xr4mz_eVrYQFHfqAQIA.png"/></div></div></figure><p id="be0f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">请注意，兼容奇偶校验节点的份额是如何随着时间的推移而有机增长的，但是Geth在一天之内就出现了巨大的峰值。这可能意味着有一种方法可以控制大多数Geth节点的分布，从而控制网络本身。</p><p id="ce65" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">另一个例子是最近的ETC升级，这甚至是在没有大多数节点一致同意的情况下进行的。有风险，但幸运的是，没有损坏网络。分叉后大约一周<em class="jw">达到50%的节点升级，虽然升级还没有最终完成，节点仍在升级过程中。更糟糕的是<em class="jw">，一些旧节点还在积极挖掘旧的非伪造链</em>。</em></p><figure class="jo jp jq jr fq js fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff lo"><img src="../Images/3b01352a9037fe12b50295e76e5edd7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3V0zZVmaJJf1b0D1n2AVjA.png"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek"><strong class="bd li">ETC Atlantis upgrade progress</strong>; vertical line is the date of the fork, horizontal lines are 50% (acceptable for pre-fork) and 80% (acceptable for post-fork); notice the spike of Geth nodes on September 29, most of them were just fresh nodes launched in different regions of Asia, most were shot down in a few days</figcaption></figure><p id="1ae1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊网络很难衡量，尽管无疑有很多有趣的数据和见解。我仍在努力改进机器人，试图更精确地收集更多细节，并希望也能抓取其他区块链。</p><p id="d41c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt">—</p><p id="389f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您使用文章中的数据，请将链接放回本页。谢谢你。如有其他问题，您可以通过igor@artamonov.ru 联系我</p><blockquote class="lp"><p id="931a" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated"><a class="ae jv" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ma mb mc md me js fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lz"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>