<html>
<head>
<title>Running multiple lightning nodes on one device using ACINQ/Eclair and receiving payments on the lightning network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AC inq/艾克蕾尔在一台设备上运行多个lightning节点，并在lightning网络上接收付款</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/running-multiple-lightning-nodes-on-one-device-using-acinq-eclair-and-receiving-payments-on-the-a85157ca0109?source=collection_archive---------2-----------------------#2018-10-02">https://medium.com/coinmonks/running-multiple-lightning-nodes-on-one-device-using-acinq-eclair-and-receiving-payments-on-the-a85157ca0109?source=collection_archive---------2-----------------------#2018-10-02</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="0e4d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">闪电网络的挑战之一是在接收端创造流动性。大多数时候，发送支付似乎是无缝的，因为人们可以连接到他们想要支付的节点，但接收支付需要一个空的通道或有一些空间。这是一个有趣的问题，可以简单地通过与你自己创建空频道并在后者上接收付款来解决。解决方案是简单地在一个设备上托管两个lightning节点，并通过相应的通道为网络创造流动性和更好的连接性。在这篇文章中，我将创建一个分步指南，介绍如何在一个设备上创建多个节点，在这些节点之间创建通道，并通过空通道接收付款，而不是等待先花费并在现有通道中创建空间。这个指南是给linux用户的，如果人们感兴趣的话，我会接着写一个windows指南。</p><p id="6f34" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">要求:</strong></p><ol class=""><li id="630a" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw dt translated">下载、安装、同步比特币核心完整节点(bitcoin.org)—这将需要一段时间(数小时至数天，取决于您的下载速度)</li><li id="2c55" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw dt translated">下载最新版本的ACINQ/艾克蕾尔(<a class="ae kc" href="https://github.com/ACINQ/eclair/releases" rel="noopener ugc nofollow" target="_blank"/>)最好用GUI版本(<a class="ae kc" href="https://github.com/ACINQ/eclair/releases/download/v0.2-beta6/eclair-node-gui-0.2-beta6-3fc5da0.jar" rel="noopener ugc nofollow" target="_blank"><strong class="is hu">eclair-node-GUI-0.2-beta 6–3 fc5 da 0 . jar</strong></a><strong class="is hu">)</strong></li></ol><p id="7cbe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第一步:</strong></p><p id="1c95" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">找到你的比特币核心完整节点文件的位置(文件系统→tmp→比特币)，除非你在最初启动第一个节点时创建了自己的文件夹。</p><p id="f68e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">进入比特币文件夹后，打开<strong class="is hu"> bitcoin.conf </strong>并输入以下内容，这些是mainnet指令:</p><p id="ab85" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu"> rpcuser </strong>和<strong class="is hu"> rpcpassword </strong>可以是你喜欢的任何东西，你以后会需要它们的。</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="aed6" class="km kn ht ki b fv ko kp l kq kr">testnet=0<br/>server=1<br/>rpcuser=foo <br/>rpcpassword=bar <br/>txindex=1<br/>zmqpubrawblock=tcp://127.0.0.1:29000<br/>zmqpubrawtx=tcp://127.0.0.1:29000<br/>addresstype=p2sh-segwit</span></pre><p id="cb59" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这里是你应该看的视觉效果。</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ks"><img src="../Images/64c05e85192d952d5c13646272275ca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XI5wB-ky0npkafUeLWRYtQ.jpeg"/></div></div></figure><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div class="fe ff la"><img src="../Images/f0db911e55ccbaacc23f3e4aff56916f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*DjcN3kD5SrOJFjx-a6j83Q.jpeg"/></div></figure><p id="3c92" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保存文件并退出。我们差不多完成了。</p><p id="84ae" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第二步。</strong></p><p id="31c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">确保你的比特币核心在运行，打开一个终端。打开下载:</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="a884" class="km kn ht ki b fv ko kp l kq kr">cd Downloads</span></pre><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff lb"><img src="../Images/70a0ba44cc8ffe05745e8c9b5ba60419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWcUdKyuPYm_IG6M-YDeew.png"/></div></div></figure><p id="24c7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第一次打开你的闪电节点，它不会马上工作你会得到一个错误，这将在后面解释:</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="55b3" class="km kn ht ki b fv ko kp l kq kr">java -Declair.datadir=/<strong class="ki hu">tmp/node1</strong> -jar eclair-node-gui-0.2-beta6-3fc5da0.jar</span></pre><p id="2c2a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">注意<strong class="is hu"> tmp </strong>和<strong class="is hu">节点1 </strong>。记住这一点很重要。您可能需要等待一段时间，等待节点启动并向您显示错误。</p><p id="f026" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是你应该看到的。你看到这个的原因是因为你的闪电节点没有连接到你的比特币核心全节点:</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/cdb01574feba8542b5e32c82c96fc033.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*uEdcYcBSDqxfAAQAq9HcOg.png"/></div></figure><p id="d7c0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第三步:</strong></p><p id="d288" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">还记得<strong class="is hu"> tmp </strong>和<strong class="is hu"> node1 </strong>当我们运行运行艾克蕾尔的命令时，我们将打开这些文件夹，在大多数linux设备上文件系统→tmp →node1。当您之前运行该命令时，它会为您创建该文件夹。</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ld"><img src="../Images/f4267d14736f5c1b2d7d8c8a4fadf4fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45Z5RdbYm20F33YS_TR4iw.jpeg"/></div></div></figure><p id="911a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦你进入那个文件夹，右击并创建一个空文件，命名为<strong class="is hu"> eclair.conf </strong></p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff le"><img src="../Images/489df1f3b58d2066acca50a123ee002a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTEDST8IuRazjzRkEpv3TA.jpeg"/></div></div></figure><p id="3d3b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">打开<strong class="is hu"> eclair.conf </strong>并输入以下内容:</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="5757" class="km kn ht ki b fv ko kp l kq kr">eclair.chain=mainnet<br/>eclair.server.port=48001<br/>eclair.bitcoind.rpcport=8332<br/>eclair.bitcoind.rpcuser="foo"<br/>eclair.bitcoind.rpcpassword="bar"</span><span id="ca08" class="km kn ht ki b fv lf kp l kq kr">#the rpcuser and rpcpassword must be in "" and have to be the same as in your bitcoin.conf file that you edited earlier</span></pre><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff lg"><img src="../Images/ff54d4eb9ce71bd4f16f7ab3522cb1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*faR58zK84wx8DzuGTcyCuw.jpeg"/></div></div></figure><p id="f400" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">保存文件并退出。</p><p id="12b4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第四步:</strong></p><p id="282c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">现在，您可以使用我们之前使用的相同命令来运行第一个节点了:</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="e5af" class="km kn ht ki b fv ko kp l kq kr">java -Declair.datadir=/tmp/node1 -jar eclair-node-gui-0.2-beta6-3fc5da0.jar</span></pre><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff lh"><img src="../Images/60ed2c2038a8707f74727c0590687ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-gKLUIRa9MgP_S-h077Og.jpeg"/></div></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">This is my first node, I already have channels open, you should just see a blank page. Notice the <strong class="bd lm">tcp 48001</strong></figcaption></figure><p id="759b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第五步:</strong></p><p id="e676" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于要运行的每个新节点，打开一个新的终端，使用我们之前运行第一个节点时使用的相同命令，但要更改一个小细节。</p><p id="63bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">将<strong class="is hu">节点1 </strong>改为<strong class="is hu">节点2 </strong>。这将在您的<strong class="is hu"> tmp </strong>文件中创建一个新文件夹。如果您想要第三个和第四个节点，那么只需打开新的终端，运行带有<strong class="is hu">节点3 </strong>和<strong class="is hu">节点4 </strong>的命令，依此类推。</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="bd44" class="km kn ht ki b fv ko kp l kq kr">java -Declair.datadir=/tmp/<strong class="ki hu">node2</strong> -jar eclair-node-gui-0.2-beta6-3fc5da0.jar</span><span id="7f5b" class="km kn ht ki b fv lf kp l kq kr">java -Declair.datadir=/tmp/<strong class="ki hu">node3</strong> -jar eclair-node-gui-0.2-beta6-3fc5da0.jar</span><span id="6cf1" class="km kn ht ki b fv lf kp l kq kr">#etc</span></pre><p id="d3f4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于您运行的每个命令，您都会得到以下错误:</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/cdb01574feba8542b5e32c82c96fc033.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*uEdcYcBSDqxfAAQAq9HcOg.png"/></div></figure><p id="9158" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在您的<strong class="is hu"> tmp </strong>文件中应该还有两个新文件夹:</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ld"><img src="../Images/ceea804043953035033656ff9b09fed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1TBw8BDEIdOxucki_lAFyw.jpeg"/></div></div></figure><p id="ef81" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们现在必须重复我们在<strong class="is hu">步骤3 </strong>中所做的，在每个新文件夹中创建<strong class="is hu"> eclair.conf </strong>文件。</p><p id="a471" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第六步:</strong></p><p id="337a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在第一个节点的<strong class="is hu"> eclair.conf </strong>文件中，我们输入以下内容:</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="a654" class="km kn ht ki b fv ko kp l kq kr">eclair.chain=mainnet<br/>eclair.server.port=48001 <br/>eclair.bitcoind.rpcport=8332<br/>eclair.bitcoind.rpcuser="foo"<br/>eclair.bitcoind.rpcpassword="bar"</span><span id="11cd" class="km kn ht ki b fv lf kp l kq kr">#the rpcuser and rpcpassword must be in "" and have to be the same as in your bitcoin.conf file that you edited earlier</span></pre><p id="57da" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于之后的每个节点，除了<strong class="is hu">eclair . server . port = 48001</strong>之外，其他都保持不变</p><p id="abeb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于第二个节点，将该部分更改为<strong class="is hu">eclair . server . port = 48002</strong></p><p id="532c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于第三个节点，将其更改为<strong class="is hu">eclair . server . port = 48003</strong></p><p id="6232" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以及48004、48005等之后的每个新节点。</p><p id="00c4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">第七步:</strong></p><p id="d1c2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此时，您的第一个节点应该已经在运行了。现在是启动第二个和第三个节点的时候了。只需为每个打开新的终端，并运行我们之前运行的命令:</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="5edf" class="km kn ht ki b fv ko kp l kq kr">#startnode2</span><span id="83c2" class="km kn ht ki b fv lf kp l kq kr">cd Downloads</span><span id="a998" class="km kn ht ki b fv lf kp l kq kr">java -Declair.datadir=/<strong class="ki hu">tmp/node2</strong> -jar eclair-node-gui-0.2-beta6-3fc5da0.jar</span><span id="b009" class="km kn ht ki b fv lf kp l kq kr">#startnode3</span><span id="904e" class="km kn ht ki b fv lf kp l kq kr">cd Downloads</span><span id="6658" class="km kn ht ki b fv lf kp l kq kr">java -Declair.datadir=/<strong class="ki hu">tmp/node3</strong> -jar eclair-node-gui-0.2-beta6-3fc5da0.jar</span><span id="4811" class="km kn ht ki b fv lf kp l kq kr">#remember to run from the folder your eclair is in, for most people it should be the Downloads folder unless you installed it somewhere else</span></pre><p id="45d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">完成了。</p><p id="40b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">结论</strong></p><p id="cfec" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我的第一个节点打开了六个通道，我从第一个节点到第二个节点打开了一个通道。如您所见，第二个节点的容量为0.001BTC，但余额为0。这是我在使用第一个节点和通道发送付款时可以接收付款的节点和通道。我还使用我的第一个节点创建了与其他更多连接的集线器的通道，以确保我的txs在找到路由时没有问题。</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="fe ff ln"><img src="../Images/ed780c8108cdd2642b1388c7837ce2e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2gWX0ayr9zPecFhiErIWA.png"/></div></div></figure><p id="99e2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">收款:</strong></p><p id="9c76" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这里，我收到了对我的第二个节点中的空通道的付款，这是我通过从我的第一个节点打开一个通道而创建的。</p><figure class="kd ke kf kg fq kt fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/36ac67fbbfb4fa84c6718a58fca5e53d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*0Gls7DXQx-FIkaSPtc6Kug.png"/></div></figure><p id="3a55" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">希望这个指南能帮助每个人，尤其是在收款端，创建应用程序和路由支付。如果我有任何错误，请评论，以便我可以纠正他们。</p><p id="76e0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">https://github.com/ACINQ/eclair/blob/master/README.md的a cinq/艾克蕾尔指南和命令:<a class="ae kc" href="https://github.com/ACINQ/eclair/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"/></p><p id="5f30" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在推特上关注我更多比特币相关的事情:【https://twitter.com/cvpitvlist T2</p><p id="c237" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果您觉得本指南有帮助，请随时提示BTC:3 q 7 umf 6 qswjfmhft 7 imgfuoy 1 ypvqqnqkt</p><blockquote class="lp"><p id="ed63" class="lq lr ht bd ls lt lu lv lw lx ly jn ek translated"><a class="ae kc" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ma mb mc md me kt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lz"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>