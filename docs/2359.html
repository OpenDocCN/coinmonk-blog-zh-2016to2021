<html>
<head>
<title>High-level interface for Michelson contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迈克尔逊合同的高级界面</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/high-level-interface-for-michelson-contracts-and-not-only-7264db76d7ae?source=collection_archive---------0-----------------------#2019-08-19">https://medium.com/coinmonks/high-level-interface-for-michelson-contracts-and-not-only-7264db76d7ae?source=collection_archive---------0-----------------------#2019-08-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="c467" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">通过烘焙Bad对PyTezos库进行重大更新</h2></div><p id="b64b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们已经为这个版本准备了很长时间，并设法添加了几乎所有开发Tezos应用程序所必需的东西。我们希望我们的库对参加<a class="ae ke" href="http://ideo.tqtezos.com/" rel="noopener ugc nofollow" target="_blank"> IDEO黑客马拉松</a>的人以及所有对Tezos和Python感兴趣的人有用。我们要感谢Tezos基金会对这个项目的支持，以及所有PyTezos早期用户的反馈。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/65dd02ae5e3e50f721df6d00121e997e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*dGyhrrR81KqOlALolw6jGQ.png"/></div></figure><p id="e7bc" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">PyTezos 建立在三个基本原则之上，这三个原则是我们在任何软件开发中努力遵循的:</p><ol class=""><li id="bf03" class="kn ko ht jk b jl jm jo jp jr kp jv kq jz kr kd ks kt ku kv dt translated"><em class="kw">一切都应该开箱即用</em> <br/>在PyTezos中，我们已经预定义了RPC端点，甚至演示键(请不要滥用)，以便您可以轻松开始游戏。</li><li id="c7df" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd ks kt ku kv dt translated"><em class="kw">编程界面应该是直观和自描述的</em> <br/>除了文档字符串和自动完成，PyTezos还在交互模式(Python控制台或Jupyter笔记本)中提供内联文档。</li><li id="70c0" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd ks kt ku kv dt translated"><em class="kw">简单而不牺牲灵活性<br/> </em>使用PyTezos，您可以在任何抽象层次上工作，并在它们之间无缝切换。</li></ol><p id="6cc3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在本文中，我们将介绍主要特性，或者，您可以阅读<a class="ae ke" href="https://baking-bad.github.io/pytezos/" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>，或者通过交互式控制台或Jupyter浏览API:</p><pre class="kg kh ki kj fq lc ld le lf aw lg dt"><span id="9a4f" class="lh li ht ld b fv lj lk l ll lm"><em class="kw">&gt;&gt;&gt; !pip install pytezos</em><br/><em class="kw">&gt;&gt;&gt;</em> <strong class="ld hu">from</strong> pytezos <strong class="ld hu">import</strong> pytezos<br/><em class="kw">&gt;&gt;&gt;</em> pytezos</span></pre><h1 id="9ef1" class="ln li ht bd lo lp lq lr ls lt lu lv lw iz lx ja ly jc lz jd ma jf mb jg mc md dt translated">PyTezos客户端</h1><p id="fb01" class="pw-post-body-paragraph ji jj ht jk b jl me iu jn jo mf ix jq jr mg jt ju jv mh jx jy jz mi kb kc kd hm dt translated">高层互动通过PyTezos客户端进行。您可能希望的第一件事是配置RPC节点连接和用于签名操作的私钥。</p><ul class=""><li id="0618" class="kn ko ht jk b jl jm jo jp jr kp jv kq jz kr kd mj kt ku kv dt translated">使用<code class="eh mk ml mm ld b">.using()</code>方法改变当前外壳和/或密钥；</li><li id="b1c2" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">通过<code class="eh mk ml mm ld b">.shell</code>和<code class="eh mk ml mm ld b">.key</code>属性可以访问实际对象；</li><li id="f71d" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">账户余额可以通过<code class="eh mk ml mm ld b">.account()</code>方式找回。</li></ul><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff mn"><img src="../Images/e0e24059b693d655df20911d4c2a5910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TPp-iXB8WJ134KBmrEgyEg.gif"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Initializing key from faucet file and setting default alphanet provider</figcaption></figure><h2 id="4ee8" class="lh li ht bd lo mw mx my ls mz na nb lw jr nc nd ly jv ne nf ma jz ng nh mc ni dt translated">发送操作</h2><p id="a439" class="pw-post-body-paragraph ji jj ht jk b jl me iu jn jo mf ix jq jr mg jt ju jv mh jx jy jz mi kb kc kd hm dt translated">使用PyTezos客户端，你可以用最少的信息初始化操作内容，然后<code class="eh mk ml mm ld b">.autofill()</code>缺口。操作也可以被链接、运行、预应用，当然还有注入。PyTezos现在支持:</p><ul class=""><li id="a7a3" class="kn ko ht jk b jl jm jo jp jr kp jv kq jz kr kd mj kt ku kv dt translated">激活帐户</li><li id="646f" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">揭示</li><li id="84a6" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">交易</li><li id="f39d" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">起源</li><li id="98d4" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">委托</li></ul><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff nj"><img src="../Images/c6a2fdf0231bbcba7f61534e333d3589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nVJ-YVR-0G7hYt_SboP1Zw.gif"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Sending a parameterless transaction to an implicit account</figcaption></figure><h2 id="319e" class="lh li ht bd lo mw mx my ls mz na nb lw jr nc nd ly jv ne nf ma jz ng nh mc ni dt translated">与合同互动</h2><p id="c664" class="pw-post-body-paragraph ji jj ht jk b jl me iu jn jo mf ix jq jr mg jt ju jv mh jx jy jz mi kb kc kd hm dt translated">更新中引入的最令人兴奋的功能是用于与智能合约交互的高级界面。它基于类似于better-call.dev使用的转换算法(我们将很快同步)。实际上，在传递事务参数或读/写存储时，您可以使用JSON结构而不是Michelson/Micheline表达式。</p><ul class=""><li id="f9c0" class="kn ko ht jk b jl jm jo jp jr kp jv kq jz kr kd mj kt ku kv dt translated">使用<code class="eh mk ml mm ld b">.contract()</code>方法通过地址获取合同接口；</li><li id="4170" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">分别用<code class="eh mk ml mm ld b">.storage()</code>和<code class="eh mk ml mm ld b">.big_map_get()</code>方法访问存储和大地图；</li><li id="eaa7" class="kn ko ht jk b jl kx jo ky jr kz jv la jz lb kd mj kt ku kv dt translated">按名称调用entrypoints，并根据docstring传递args/kwargs。</li></ul><p id="aa11" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">下面是演示契约的参数方案:</p><pre class="kg kh ki kj fq lc ld le lf aw lg dt"><span id="dd3b" class="lh li ht ld b fv lj lk l ll lm">$parameter:<br/> { "transfer": [ $address , $nat ] } || <br/> { "approve": [ $address , $nat ] } || <br/> { "transfer_from": [ $address , $address , $nat ] } || <br/> { "balance_of": $balance_of } || <br/> { "allowance": [ $address , $address , $contract (pair nat nat) ] } || <br/> { "create_account": [ $address , $nat ] } || <br/> { "create_accounts": [ [ $address , $nat ] , ... ] }</span><span id="6ef1" class="lh li ht ld b fv nk lk l ll lm">$balance_of:<br/> {<br/>   "address": $address,<br/>   "nat_contract": $contract (nat)<br/> }</span><span id="77eb" class="lh li ht ld b fv nk lk l ll lm">$address:<br/> string  /* Base58 encoded `tz` or `KT` address */</span><span id="a59c" class="lh li ht ld b fv nk lk l ll lm">$contract:<br/> string  /* Base58 encoded `KT` address */</span><span id="f034" class="lh li ht ld b fv nk lk l ll lm">$nat:<br/> int  /* Natural number */</span></pre><p id="1e73" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">它是自动生成的，并试图模仿Tezos RPC文档的风格。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff nj"><img src="../Images/924dd6971265c02f5d401403488480e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*o3WYbtNLIfHWI3-c6nq75g.gif"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Accessing contract storage/big_map and calling an entrypoint</figcaption></figure><h1 id="2990" class="ln li ht bd lo lp lq lr ls lt lu lv lw iz lx ja ly jc lz jd ma jf mb jg mc md dt translated">下一步是什么</h1><p id="df74" class="pw-post-body-paragraph ji jj ht jk b jl me iu jn jo mf ix jq jr mg jt ju jv mh jx jy jz mi kb kc kd hm dt translated">我们的下一步是构建一个单元测试框架，在这个框架中，您将能够用Python编写测试，并使用Python对象作为契约调用和存储初始化的有效负载。我们还将在未来几周内发布巴比伦协议的更新，以及对不可避免的错误的修复。</p><p id="84ba" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们将在即将到来的柏林TQuorum大会上举办一场<a class="ae ke" href="https://twitter.com/TQTezos/status/1162000245129129985" rel="noopener ugc nofollow" target="_blank">研讨会</a>，在那里人们可以学习如何使用<a class="ae ke" href="https://github.com/baking-bad/pytezos" rel="noopener ugc nofollow" target="_blank"> PyTezos </a>和<a class="ae ke" href="https://github.com/baking-bad/conseilpy" rel="noopener ugc nofollow" target="_blank"> ConseilPy </a>构建应用。我们在等大家，会有奖品，当然还有品牌贴纸。带上笔记本电脑和好心情:)</p><p id="6c8c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在推特上关注我们，加入我们舒适的电报聊天。</p><p id="99c2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">干杯！</p><p id="4217" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="kw">最初发表于2019年8月19日</em><a class="ae ke" href="https://baking-bad.org/blog/2019/08/19/high-level-interface-for-michelson-tezos-smart-contracts-and-not-only/" rel="noopener ugc nofollow" target="_blank"><em class="kw">https://baking-bad.org</em></a><em class="kw">，在那里你可以找到文章的完整版本。</em></p><blockquote class="nl"><p id="ad54" class="nm nn ht bd no np nq nr ns nt nu kd ek translated"><a class="ae ke" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="nw nx ny nz oa kk fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nv"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>