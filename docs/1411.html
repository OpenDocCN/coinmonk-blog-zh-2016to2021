<html>
<head>
<title>Cardano 101 — Your First Contract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡尔达诺101——你的第一份合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/cardano-101-your-first-contract-ab22ec32e870?source=collection_archive---------5-----------------------#2018-08-27">https://medium.com/coinmonks/cardano-101-your-first-contract-ab22ec32e870?source=collection_archive---------5-----------------------#2018-08-27</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/218c44cd54544c0589dc96f0de4dafc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScsmeaEYamtwcL5_tbfGvw.jpeg"/></div></div></figure><p id="b815" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">在<a class="ae jz" rel="noopener" href="/coinmonks/cardano-smart-contracts-101-testnets-f9dc7ac24635">上一篇文章</a>中，我们讨论了使用Mallet CLI连接到KEVM和IELE测试网。我们将在此基础上为这两个网络创建、编译和部署一个可靠的契约。虽然我们将为KEVM网络部署一份合同，但我们将花大部分时间检查IELE网络的部署，因为这是Cardano的旗舰选项。</p><h2 id="0f20" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">合同</h2><p id="4366" class="pw-post-body-paragraph jb jc ht jd b je kv jg jh ji kw jk jl jm kx jo jp jq ky js jt ju kz jw jx jy hm dt translated">我们的超级简单的<em class="la"> Doubler.sol </em>契约接受一个数字并返回它的double值，如下所示。</p><figure class="lb lc ld le fq iu"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="e078" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们将用solc node.js包编译它，并用Mallet部署它。</p><h2 id="c463" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">设置和编译</h2><pre class="lb lc ld le fq lh li lj lk aw ll dt"><span id="02c5" class="ka kb ht li b fv lm ln l lo lp"># Create a project dir in the same root as your mallet repo<br/>mkdir doubler &amp;&amp; cd doubler</span><span id="749d" class="ka kb ht li b fv lq ln l lo lp"># You should have<br/># &lt;Project Dir&gt;<br/>#    - mallet<br/>#    - doubler</span><span id="0ed5" class="ka kb ht li b fv lq ln l lo lp"># Save the Doubler.sol file from the gist into the doubler dir</span><span id="bf79" class="ka kb ht li b fv lq ln l lo lp"># You should have<br/># &lt;Project Dir&gt;<br/>#    - mallet<br/>#    - doubler<br/>#      - Doubler.sol</span><span id="21ab" class="ka kb ht li b fv lq ln l lo lp"># Install the solc npm package<br/>npm install -g solc</span><span id="0b20" class="ka kb ht li b fv lq ln l lo lp"># Verify it was installed<br/>solcjs --help</span><span id="f01c" class="ka kb ht li b fv lq ln l lo lp"># Compile Doubler.sol<br/>solcjs --bin --abi Doubler.sol</span><span id="ba6a" class="ka kb ht li b fv lq ln l lo lp"># You should have<br/># &lt;Project Dir&gt;<br/>#    - mallet<br/>#    - doubler<br/>#      - Doubler.sol<br/>#      - Doubler_sol_Doubler.abi<br/>#      - Doubler_sol_Doubler.bin</span></pre><h2 id="ff1d" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">用木槌进行KEVM部署</h2><pre class="lb lc ld le fq lh li lj lk aw ll dt"><span id="e7e0" class="ka kb ht li b fv lm ln l lo lp"># Make sure you are using Node 10.4.x(See previous article)<br/>nvm use 10</span><span id="e344" class="ka kb ht li b fv lq ln l lo lp"># Open Mallet CLI<br/>cd ../mallet &amp;&amp; ./mallet kevm</span><span id="601b" class="ka kb ht li b fv lq ln l lo lp"># Create an Account - note we are assigning a variable to use later<br/>mallet&gt; account1 = newAccount(&lt;secret password&gt;)</span><span id="c139" class="ka kb ht li b fv lq ln l lo lp"># Select account - note we are using our variable we set earlier<br/>mallet&gt; selectAccount(account1)</span><span id="5e29" class="ka kb ht li b fv lq ln l lo lp"># Request Funds from faucet - note we are using the selected acct<br/>mallet&gt; requestFunds()</span><span id="fd59" class="ka kb ht li b fv lq ln l lo lp"># Get balance - make sure you have a balance before proceeding<br/>mallet&gt; getBalance()</span><span id="5c01" class="ka kb ht li b fv lq ln l lo lp"># Import the node.js fs module<br/>mallet&gt; fs = require('fs')</span><span id="f993" class="ka kb ht li b fv lq ln l lo lp"># Get the binary code<br/>mallet&gt; myContract = fs.readFileSync('../doubler/Doubler_sol_Doubler.bin', 'utf8')</span><span id="246c" class="ka kb ht li b fv lq ln l lo lp"># Create the transaction<br/>mallet&gt; tx = {<br/>// gas limit, mandatory<br/>    gas: 470000,<br/>// the variable with our smart contract binary                      <br/>    data: myContract<br/>};</span><span id="a54a" class="ka kb ht li b fv lq ln l lo lp"># Deploy the contract<br/>mallet&gt; deploymentHash = sendTransaction(tx)</span><span id="1bd9" class="ka kb ht li b fv lq ln l lo lp"># Verify the contract deployed<br/>mallet&gt; myContractAddress = getReceipt(deploymentHash).contractAddress</span></pre><p id="a965" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">因此，这基本上是一个以太坊契约部署，您可以通过创建如下所示的自定义事务来与之交互:</p><pre class="lb lc ld le fq lh li lj lk aw ll dt"><span id="42bb" class="ka kb ht li b fv lm ln l lo lp">mallet&gt; sendTransaction({to: myContractAddress, <br/>    gas:, <br/>    arguments: args});</span></pre></div><div class="ab cl lr ls hb lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hm hn ho hp hq"><h2 id="ff90" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">IELE用木槌展开</h2><pre class="lb lc ld le fq lh li lj lk aw ll dt"><span id="25e9" class="ka kb ht li b fv lm ln l lo lp"># Make sure you are using Node 10.4.x(See previous article)<br/>nvm use 10</span><span id="b042" class="ka kb ht li b fv lq ln l lo lp"># Open Mallet CLI<br/>./mallet iele</span><span id="653f" class="ka kb ht li b fv lq ln l lo lp"># Create an Account - note we are assigning a variable to use later<br/>mallet&gt; account1 = newAccount(&lt;secret password&gt;)</span><span id="67f2" class="ka kb ht li b fv lq ln l lo lp"># Select account - note we are using our variable we set earlier<br/>mallet&gt; selectAccount(account1)</span><span id="3572" class="ka kb ht li b fv lq ln l lo lp"># Request Funds from faucet - note we are using the selected acct<br/>mallet&gt; requestFunds()</span><span id="e0eb" class="ka kb ht li b fv lq ln l lo lp"># Get balance - make sure you have a balance before proceeding<br/>mallet&gt; getBalance()</span><span id="7d4d" class="ka kb ht li b fv lq ln l lo lp"># Compile the Solidity contract<br/>mallet&gt; myBytecode = iele.compile('../doubler/Doubler.sol').bytecode</span><span id="1d1b" class="ka kb ht li b fv lq ln l lo lp"># Deploy contract<br/>mallet&gt; contractHash = iele.createContract({gas: 1000000, value: 0, code: myBytecode, args: []})</span><span id="9781" class="ka kb ht li b fv lq ln l lo lp"># Get Deployed contract address<br/>mallet&gt; theContractAddress = getReceipt(contractHash)<!-- -->.contractAddress</span><span id="5ba8" class="ka kb ht li b fv lq ln l lo lp"># Interact with deployed contract<br/>mallet&gt; iele.contractCall({to: <!-- -->theContractAddress<!-- -->, gas: 1000000, func: 'doubleMe()', args: [5]})</span></pre><p id="0600" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">iele过程类似于kevm部署，但是值得注意的是，当你编译一个solidity文件到iele时，它是一个两步过程。实体转化为iele，然后从iele转化为iele装配。iele.compile命令也可以将iele源代码编译成iele程序集，这是Cardano的首选方法。</p><h2 id="4669" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">混合IELE部署</h2><p id="49a5" class="pw-post-body-paragraph jb jc ht jd b je kv jg jh ji kw jk jl jm kx jo jp jq ky js jt ju kz jw jx jy hm dt translated">不久前，我写了一个名为<a class="ae jz" rel="noopener" href="/@cipherz/super-simple-ethereum-part-1-7e363dbc1c65">以太坊绝地指南</a>的系列文章。在第四篇文章中，我们谈了一些关于混音的内容，所以如果你想更深入地了解它，我建议你看看这里的<a class="ae jz" rel="noopener" href="/@cipherz/a-jedis-guide-to-ethereum-part-3b-remix-1b8d98d909d4"/>。Remix是一个IDE(集成开发环境),由以太坊基金会提供，用于帮助Solidity开发和部署到区块链。Cardano分叉Remix是为了让你我这样的人在熟悉的部署和开发环境中编写Solidity代码。分叉混音环境只使用你的Solidity代码部署到IELE网络，它编译成IELE程序集。</p><h2 id="faf9" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">编制</h2><p id="9e64" class="pw-post-body-paragraph jb jc ht jd b je kv jg jh ji kw jk jl jm kx jo jp jq ky js jt ju kz jw jx jy hm dt translated">在Chrome中打开remix应用程序—<a class="ae jz" href="https://iele-testnet.iohkdev.io/remix/#optimize=false" rel="noopener ugc nofollow" target="_blank">https://iele-testnet.iohkdev.io/remix/</a>。看起来不错，不是吗？</p><p id="382a" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">单击屏幕左上角的文件夹图标，浏览到我们在上一节中使用的现有<em class="la"> Doubler.sol </em>合同。展开<em class="la">浏览器</em>文件夹，点击<em class="la"> Doubler.sol </em>契约将其带入编辑器。</p><figure class="lb lc ld le fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ly"><img src="../Images/069c6705862bb256c1cfe67b6ff13327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3h4B7u5HjCfj7lWlRD4Kg.png"/></div></div></figure><p id="4071" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">接下来，转到屏幕的右上方，点击显示<em class="la">开始编译</em>的按钮。这将编译合同，当它成功完成时，您将在下面看到绿色的合同。</p><figure class="lb lc ld le fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lz"><img src="../Images/443c18a8662135e4c5afc22d174acd9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vmfJTxGpupooBLvvFZo8Q.png"/></div></div></figure><h2 id="1638" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">账户</h2><p id="4a87" class="pw-post-body-paragraph jb jc ht jd b je kv jg jh ji kw jk jl jm kx jo jp jq ky js jt ju kz jw jx jy hm dt translated">Cardano版本的Remix内置了账户管理——这是一个很好的功能。我们可以在remix中创建一个新的测试帐户，而不是使用Mallet。</p><figure class="lb lc ld le fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ma"><img src="../Images/7c6ca40ccd4cb74ba3a14135a9769e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oUI7_lu-pI7mrbJFKkgo_A.png"/></div></div></figure><ul class=""><li id="12a3" class="mb mc ht jd b je jf ji jj jm md jq me ju mf jy mg mh mi mj dt translated">切换到<em class="la">运行</em>选项卡，点击<em class="la">创建账户</em></li><li id="1efc" class="mb mc ht jd b je mk ji ml jm mm jq mn ju mo jy mg mh mi mj dt translated">输入密码并确认(记下它，您稍后会用到)</li><li id="f694" class="mb mc ht jd b je mk ji ml jm mm jq mn ju mo jy mg mh mi mj dt translated">从<em class="la">账户</em>下拉列表中选择已创建的账户</li><li id="1fa1" class="mb mc ht jd b je mk ji ml jm mm jq mn ju mo jy mg mh mi mj dt translated">点击<em class="la">获取资金</em>从水龙头为您的新账户申请资金</li></ul><h2 id="3048" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">部署</h2><figure class="lb lc ld le fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mp"><img src="../Images/65d38c986e292f9b82ead56431817c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jr8ocAs-yaCLCoUYjRhizA.png"/></div></div></figure><p id="3a65" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">现在，我们已经编辑好合同，等待部署，并有一个帐户加满乙醚来部署它。您应该会看到类似于左侧图像的内容。请注意，我们设置了一个气体限制，值为0(因为这不是一个可支付的tx)，并且我们的<em class="la">倍增</em>合同已准备好进入合同下拉列表。您可以点击<em class="la">部署(IELEVM) </em>，它会提示您验证它自动设置的一个<em class="la">气价</em>。一旦您确认了这一点，您应该会看到一个挂起的事务，并最终看到一个已部署的契约。</p><h2 id="d24f" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">互动</h2><p id="c165" class="pw-post-body-paragraph jb jc ht jd b je kv jg jh ji kw jk jl jm kx jo jp jq ky js jt ju kz jw jx jy hm dt translated">现在您已经在IELE测试网上部署了一个契约，让我们通过remix与它进行交互。展开<em class="la">Doubler</em>deployed contract，在<em class="la"> doubleMe </em>方法中输入一个数值，点击<em class="la"> Return </em>。您应该会看到10的结果显示在方法的下面。</p><figure class="lb lc ld le fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mq"><img src="../Images/5a4882a9d5c09ed2eb227fcd1577392d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wm5JASa73lXXgnRp8yO-Nw.png"/></div></div></figure></div><div class="ab cl lr ls hb lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hm hn ho hp hq"><h2 id="227c" class="ka kb ht bd kc kd ke kf kg kh ki kj kk jm kl km kn jq ko kp kq ju kr ks kt ku dt translated">摘要</h2><p id="f356" class="pw-post-body-paragraph jb jc ht jd b je kv jg jh ji kw jk jl jm kx jo jp jq ky js jt ju kz jw jx jy hm dt translated">我们在这篇文章中已经做了很多，所以让我们回顾一下</p><ul class=""><li id="cd37" class="mb mc ht jd b je jf ji jj jm md jq me ju mf jy mg mh mi mj dt translated">通过<strong class="jd hu"> Mallet CLI </strong>为<strong class="jd hu"> KEVM </strong>测试网创建、编译和部署一个可靠性合同</li><li id="b383" class="mb mc ht jd b je mk ji ml jm mm jq mn ju mo jy mg mh mi mj dt translated">通过<strong class="jd hu"> Mallet CLI </strong>为<strong class="jd hu"> IELE </strong>测试网创建、编译和部署一个可靠性合同</li><li id="29de" class="mb mc ht jd b je mk ji ml jm mm jq mn ju mo jy mg mh mi mj dt translated">通过<strong class="jd hu"> Cardano Remix IDE </strong>为<strong class="jd hu"> IELE </strong>测试网创建、编译和部署一个可靠性合同</li></ul><p id="a006" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">卡尔达诺是一个令人兴奋的项目，如果你知道去哪里找，它会有很多事情要做。我的感觉是，这是一个简单地做工作，并不把它当回事的团队。我希望你喜欢这篇文章，它向你介绍了我认为是行业中沉睡的巨人之一。</p><blockquote class="mr"><p id="e796" class="ms mt ht bd mu mv mw mx my mz na jy ek translated"><a class="ae jz" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="nc nd ne nf ng iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nb"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>