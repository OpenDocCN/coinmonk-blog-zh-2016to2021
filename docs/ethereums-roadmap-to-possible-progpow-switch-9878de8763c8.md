# 以太坊的(可能的)ProgPoW 开关路线图。

> 原文：<https://medium.com/coinmonks/ethereums-roadmap-to-possible-progpow-switch-9878de8763c8?source=collection_archive---------0----------------------->

你可能(也可能没有)听说过，在最近的[中，所有的核心开发者都呼吁](https://www.youtube.com/watch?v=qBpImOhpWFg)在以太坊的主链上(可能)实现一个名为 ProgPoW 的新 PoW(工作证明)算法的更精确的路线图。我在这里试图澄清我在这件事上被问到的最常见的问题。请注意:这篇文章是为“普通人”而写的，可能包含一些简化的内容，这可能会吓到参与以太坊生态系统实现的高技能开发人员。尽管如此，我还是要试试

# 工作证明的专业化

在详细解释什么是 progPoW 之前，我认为有必要对什么是 PoW(没有前缀“Prog”)做一个简单的总结。缩写 PoW 代表工作证明:这个概念是许多(如果不是大多数)区块链(以及相关代币/硬币)的基础。这是区块链加密不变性的核心原则。让我们更清楚地说明:必须插入链中的每个(数据)块都必须用唯一的加密签名“密封”。这个签名是由一个[算法](https://en.wikipedia.org/wiki/Algorithm)产生的，这个算法是由一个计算机程序运行的，你们大多数人可能在单词“miner”中认识这个程序。对于大多数链(或者硬币，如果你喜欢的话)来说，这种算法基本上是不变的:计算机程序执行的基本操作(数学和内存访问)的数量和质量随着时间的推移基本上保持不变，只有一些数据会随时间而变化。

以太坊的算法就是这种情况，命名为 [**ethash**](https://en.wikipedia.org/wiki/Ethash) 。它的一组操作**在时间上是恒定的**，而这些操作所使用的名为 DAG 的内存区域以恒定的速率增加，每 30，000 个块插入(密封)到以太坊的链中。

GPU(或者通俗地说，显卡)非常擅长以非常高的速度执行这些算法，但尽管如此，它们仍然保留了“通用”设备的主要特征:你可以用它们来“挖掘”、运行视频游戏、渲染设计项目、观看流媒体电影……等等。

另一方面，典型的“挖掘”算法依赖于一组恒定的操作，这一事实有利于“专用硬件”(ASICs)的发展，这些硬件旨在加速算法的执行，同时与在 GPU 上执行的相同工作相比消耗更少的能量。事实上，他们做了他们该做的事情:毫无疑问。简单地说，ASIC 通过硬件而不是软件来实现算法的执行。

乍一看，你可能会说“*如果 ASIC 比 GPU 更高效，这对生态问题有积极影响，并有助于节省大量能源*”。我完全理解这一点，我认为这是可以分享的。

尽管有一些问题。一个过程越依赖“专门化”的资源，你就越不可能对过程本身做出快速有效的改变。制造专门的硬件是一条非常昂贵的道路，导致生产出只做一件非常特殊的事情的机器。在这些机器上投资的人(无论他们是生产者还是最终用户)拥有所有的利益，这个过程在足够长的时间内保持不变，以收集足够的资金来平衡成本，并可能获得利润。除此之外:每当流程发生变化时(出于任何原因)，建立在“流程的前一版本”之上的“专用硬件”的折旧会在几秒钟内达到 100%。

我们把问题放在以太坊的范围内看待:一个“Ethereum 对 ethash 算法的专用挖掘设备”在算法发生变化时，残值为零。这些机器不能被重新分配给其他任务，因为它们是专门设计和建造来执行一个特定的任务，而且只执行那个任务。当这个任务不再需要的时候……这些机器也不再需要了。

现在考虑一下:如上所述，GPU 是通用硬件，你可以在最近的科技商店买到。通过快速下载和安装一个简单的软件，任何人都可以准备好“挖掘”该链，从而有助于其安全性。如果 algo 发生变化，你要么下载新版本的采矿软件，要么(依靠你的数学)可以使用其他软件切换到另一个链/硬币的采矿。相反，有了 ASICs，事情变得更加复杂:你不会在商店的货架上找到那些机器，你需要一个更强大的商业计划来从中获利。具体来说，你必须预见到你要购买(或生产)的机器将有效的合理时间。投资越高，你的商业计划就越有把握。当你是强大的投资者时，你有一个很好的工具来获得这些确定性:游说！

我听过很多反对 PoW 算法改变的观点，基本上都是“*谁在乎。以太坊的目标是 PoS(股份证明)，所以权力将被放弃*。在我看来，这是非常短视的:迁移到 PoS 实际上是导致任何专用于以太采矿的专用硬件立即完全过时的途径。因此，如果不为保护投资而战，游说者是不会接受这种改变的。而斗争，通常会转化为所谓的“有争议的硬分叉”:区块链分裂成两个(或更多)分支，它们将生活在不同的规则中，并将导致最初以太坊项目的可信度(和价值)的损失。

允许哈希功能集中到极少数硬件制造商和大型购买集团手中，会在硬件驱动的挖掘服务和软件驱动的区块链之间造成短路，这很难解决。

相反，如果 ASICs 的制造变得不经济，同时仍然允许 hashrate 的一致部分来自通用硬件，就像 GPU 一样，那么整个以太坊的堆栈就不那么容易面临被接管和分裂的风险。

这就是 ProgPoW 提案的用武之地…

# 什么是 ProgPoW，为什么要提出它。

progPoW 仍然是 PoW(工作证明)，很像 ethash，但它在此基础上增加了一层可编程性(因此前缀为“Prog”)。简而言之，它通过在特定的非常短的时间间隔内创建一个新的算法变体，来“消除”算法中“恒定操作集”的约束。如果你需要关于它如何工作的更详细的技术解释，你可以[看这里](https://github.com/ifdefelse/ProgPOW#progpow---a-programmatic-proof-of-work)。

这使得制造可以实现这种算法的 ASIC 背后的整个工业化过程更加昂贵，并且相对于商用 GPU 的边际收益降低。在一个整个以太坊生态系统都以 PoS 为目标的时代，投资者从事这种高成本、耗时的风险投资的机会微乎其微，从而减少了以太坊在游说势力面前的风险。

注意:我并不是说(其他人也不是)不可能构建这样一个 ASIC。我是说 ProgPoW 让这项事业更加昂贵和耗时。发布时间是一个关键因素。

ProgPoW 取代“simple ethash”的提议明确地指向这个方向:使 PoS 的剩余时间更少地暴露于仅由于游说势力而延长的可能性，这些游说势力出于经济原因而倾向于保持现状。

作为一个副作用，ProgPoW 还为 GPU 矿工社区(无论他们是小爱好者/爱好者还是组织)带来了好处，他们可能会看到他们的利润在不断增长的 ASICs 浪潮中保持安全。

# 如何切换到 ProgPoW？

在核心开发人员的最后一次流调用中，已经解决了三个关键点:

1.  ProgPoW 值得并需要由第三方审计员(至少两个小组)进行广泛的审计，该审计员将把他们的注意力集中在关键方面，如加密强度、不同平台类型(主要是 Nvidia 和 AMD)上的有效性的平等性，以及它的采用是否可能导致网络安全风险；
2.  代表前一点，鼓励在矿工和节点客户中开发和实施 ProgPoW，以继续向审计员提供有用的数据；
3.  最终，矿工们将被召集到一个**散列投票**会议，最终将表明是否希望/需要这种改变。

最后一点，依我看，也是最重要的一点:以太坊网络第一次呼吁矿工们表达投票，以缩短核心开发者和用户群之间的有形距离，这些用户迄今为止对以太坊的历史做出了如此深刻的贡献。

所有的时间点现在都没有明确的设定，但是我会尽我所能保持一个合法的压力，让他们尽快出现。

# 矿工将如何投票？

这对于以太坊的矿工来说是一件新鲜事，而其他社区已经处理过了。出于这个原因，我觉得需要一些澄清。

**请注意:在撰写本文的时候，矿工们还不需要采取积极的行动，但是我强烈鼓励每个人尽可能多地获取信息，并有意识地建立自己的个人说服力。**

投票将在以太坊的区块链上表达。在数据链的每个数据块上都有一个名为**的小空间(姑且称之为“字段”)。该字段可以由“缩放器”通过在其中写入一些数据来填充。在该领域中,“密封者”将表达其自己对采用 ProgPoW 的赞成或反对的投票。**

谁是“封印者”？关于采矿最常见的误解是“矿工”就是“海豹队员”:实际上这是非常不准确的。是的，你需要“挖掘”来找到 ethash 算法的正确解，但是这个解必须被“写”在这个链中。唯一可能发生这种情况的地方是节点级别。节点作为一个整体构成了区块链分布的本质。每个节点都持有整个块链的完整拷贝(目前大约为 140Gb ),每当一个节点想要在链中写入新信息时，它必须在其他节点之间就所写入数据的合法性达成“共识”,以便所有节点保持共享同一版本的“真相”。

因此，只有节点可以写入数据，同样，只有节点可以填充“外部数据”字段。正如你可能已经了解 95%的矿工，特别是 GPU 矿工，没有或运行自己的节点，因此他们不能写任何东西到链。相反，他们通过具有底层节点的“池”进行挖掘:当矿工从池中接收到挖掘作业时，它接收到一组非常有限的指令来完成任务，并且不知道链上正在发生什么。

由于这个原因，“池”矿工不能自己投票。他们必须通过他们连接的池间接投票。

这么说吧:

1.  在“投票”会话开始之前，每个池将“声明”其投票意图(赞成或反对)或者将提供“不同的”连接点来表示投票赞成或反对；这一信息将公开提供；
2.  在投票会议开始时，矿工将被要求将他们的钻机连接到代表他们(矿工)投票意向的池和/或端口，并将在整个投票会议期间保持在该连接上采矿；
3.  接收更多散列能力的池将是密封更多块的池，从而在“extraData”字段上表达更多投票。
4.  在投票环节结束时，将对该环节的各个部分进行统计，并汇总赞成或反对的票数，以选出获胜的提案。

举个小例子:池 A 宣称他支持 ProgPoW，而池 B 宣称他反对。当投票环节开始时，你(采矿者)如果赞成 ProgPoW，就需要开始在 A 池采矿，如果你反对，就需要开始在 b 池采矿。在整个环节期间，你需要继续在这两个池中的任何一个上采矿。

**非常重要:投票环节将在开采“Ethash”而非 ProgPoW 时进行。**

# 会议持续多长时间？

这是需要考虑的一个重要方面。必须将投票时段设置为足够长的持续时间，以使每次操纵结果的尝试都不经济。例子:你是一个演员，强烈反对算法的任何改变，因为这会给你造成损害(ASIC 制造商？).在这种情况下，您可以花一些额外的钱来“租用”额外的 hashpower 来寻址一个表示反对票的池。会期越长，“租金”成本越高。

我相信持续时间不应低于 2 周。

# 这三个步骤对最终决策的依赖性是什么？

审计和开发阶段是严格绑定在一起的，因为它们都可以发现隐藏在算法中的任何缺陷。如果没有找到，那么投票阶段可以开始。

# 但是要等很长时间…

没错。但是，我会尽我所能(在他人和社区的帮助下)保持合法的压力，让整个任务尽快完成。这是我们能得到的最好的了。

Andrea Lanfranchi
Ethminer 开发人员/ ProgPoW 实施人员

[![](img/449450761cd76f44f9ae574333f9e9af.png)](http://bit.ly/2G71Sp7)