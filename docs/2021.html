<html>
<head>
<title>Hyperledger Composer on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS上的Hyperledger Composer</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/hyperledger-composer-on-aws-6753e5e40bb7?source=collection_archive---------2-----------------------#2019-01-29">https://medium.com/coinmonks/hyperledger-composer-on-aws-6753e5e40bb7?source=collection_archive---------2-----------------------#2019-01-29</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/dbbe1b6892e5c0d432a17161b7190578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oQQV0hEIeHNPpDpp.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><a class="ae jf" href="https://www.google.co.in/url?sa=i&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwi5zfaM05ngAhWJMI8KHQGtC5IQjxx6BAgBEAI&amp;url=https%3A%2F%2Fwww.cryptoninjas.net%2F2017%2F07%2F11%2Fhyperledger-announces-production-ready-hyperledger-fabric-1-0%2F&amp;psig=AOvVaw1iNlLaQ4I5RhrdkGVLG2YQ&amp;ust=1549080051895741" rel="noopener ugc nofollow" target="_blank">Image Source</a></figcaption></figure><p id="9384" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用新技术总是令人兴奋的，深入了解它需要许多安装过程。在本地机器上设置开发环境是非常忙碌的，有时会与其他包产生依赖冲突！！！！</p><p id="c2fc" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在这篇博客中，我们将为AWS实例上的单个组织(而不是本地计算机)完成Hyperledger Composer block chain business network到Hyperledger Fabric的安装过程。</p><p id="35ce" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们需要遵循的步骤是在AWS上创建一个免费层帐户，您可以利用它的免费服务。之后，从service选项卡的下拉列表中选择EC2实例，并使用默认配置启动该实例。之后，使用以下命令连接本地终端。记住，在我的例子中，我提到的私钥的名称是<code class="eh ke kf kg kh b">Explorer-blockchain.pem</code>,但是它也可以是您喜欢的其他名称。Explore-blockchain.pem是用于保存连接到AWS实例的ssh密钥的文件。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="2d9a" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">chmod 400 Explorer-blockchain.pem<br/>ssh -i "Explorer-blockchain.pem" ubuntu@ec2-18-219-91-219.us-east-2.compute.amazonaws.com</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kw"><img src="../Images/fcd59448b39c57d5a2f03d9c76107167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uu6wu-CSQW-M8b4wYxCVuA.png"/></div></div></figure><p id="dd01" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">以下是在EC2实例上安装Hyperledger Composer with Fabric所需开发工具的先决条件。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="c8e6" class="kq kr ht kh b fv ks kt l ku kv">Operating Systems: Ubuntu Linux 14.04 / 16.04 LTS (both 64-bit) or Mac OS 10.12</span><span id="a076" class="kq kr ht kh b fv kx kt l ku kv">Docker Engine: Version 17.03 or higher</span><span id="2d02" class="kq kr ht kh b fv kx kt l ku kv">Docker-Compose: Version 1.8 or higher</span><span id="f00e" class="kq kr ht kh b fv kx kt l ku kv">Node: 8.9 or higher (note version 9 and higher is not supported)</span><span id="3d74" class="kq kr ht kh b fv kx kt l ku kv">npm: v5.x</span><span id="2bad" class="kq kr ht kh b fv kx kt l ku kv">git: 2.9.x or higher</span><span id="ff61" class="kq kr ht kh b fv kx kt l ku kv">Python: 2.7.x</span></pre><p id="7373" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果您运行的是Ubuntu，您可以使用下面的命令下载这些必备软件。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="6bd0" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">curl -O https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh<br/>chmod u+x prereqs-ubuntu.sh<br/>./prereqs-ubuntu.sh</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff ky"><img src="../Images/4bca1469e3bca3858d9a5a39fc5f91de.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*_jPLeTCKQZOnoPN8M9Pc7A.png"/></div></figure><h2 id="5f60" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">安装CLI工具</h2><p id="27e0" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">Composer开发工具用于创建业务网络。包含<code class="eh ke kf kg kh b">composer-cli</code>。它包含了所有的基本操作，所以我们将首先安装它。接下来，我们还将挑选<code class="eh ke kf kg kh b">generator-hyperledger-composer</code>、<code class="eh ke kf kg kh b">composer-rest-server</code>和<code class="eh ke kf kg kh b">Yeoman</code>。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="7873" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">npm install -g composer-cli@0.20<br/>npm install -g composer-rest-server@0.20<br/>npm install -g generator-hyperledger-composer@0.20<br/>npm install -g yo<br/>npm install -g composer-playground@0.20</strong></span></pre><p id="6e40" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在AWS实例上安装<code class="eh ke kf kg kh b"><strong class="ji hu">composer-cli@0.20</strong></code>和其他包时。如果它显示一些错误，请按照下面的链接来解决这些问题。</p><div class="lx ly fm fo lz ma"><a href="https://stackoverflow.com/questions/50398689/installing-hyperledger-composer-on-aws-linux" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab ej"><div class="mc ab md cl cj me"><h2 class="bd hu fv z el mf eo ep mg er et hs dt translated">在AWS Linux上安装Hyperledger Composer</h2><div class="mh l"><h3 class="bd b fv z el mf eo ep mg er et ek translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="mi l"><p class="bd b gc z el mf eo ep mg er et ek translated">stackoverflow.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo iz ma"/></div></div></a></div><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/d369a3390e1a57afbc27d9e42c5b8c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*5j6GlbOQIFRbzs2ZLs6tQQ.png"/></div></figure><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff mq"><img src="../Images/33ee3ee2d09ac558dc0863dd09aaa89d.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*wrSIw8qmjcGILYc6rF_uTw.png"/></div></figure><h2 id="4814" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">安装Hyperledger结构</h2><p id="11c5" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">我们将用于下载和提取的脚本将创建一个本地Hyperledger Fabric v1.2运行时。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="938d" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers</strong></span><span id="879c" class="kq kr ht kh b fv kx kt l ku kv"><strong class="kh hu">curl -O https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz<br/>tar -xvf fabric-dev-servers.tar.gz</strong></span><span id="3f6f" class="kq kr ht kh b fv kx kt l ku kv"><strong class="kh hu">cd ~/fabric-dev-servers<br/>export FABRIC_VERSION=hlfv12<br/>./downloadFabric.sh</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mr"><img src="../Images/3f000c773c74aeaa1e69244790dc9d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aksrLt06_AsBNo8qO3YFig.png"/></div></div></figure><p id="bed8" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">运行<code class="eh ke kf kg kh b">./downloadFabric.sh</code>时。它显示权限被拒绝的问题。要解决该问题，请在<code class="eh ke kf kg kh b">.sh </code>文件前使用<code class="eh ke kf kg kh b">sudo</code>。</p><h2 id="0284" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">创建业务网络结构</h2><p id="deee" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">Hyperledger Composer的关键概念是<strong class="ji hu">业务网络定义(BND) </strong>。它为您的区块链解决方案定义了数据模型、事务逻辑和访问控制规则。使用Yeoman创建一个基本的商业网络。该命令将需要企业网络名称、描述、作者姓名、作者电子邮件地址、许可证选择和名称空间。</p><ol class=""><li id="b9bf" class="ms mt ht ji b jj jk jn jo jr mu jv mv jz mw kd mx my mz na dt translated">输入<code class="eh ke kf kg kh b">tutorial-network</code>作为网络名称，并输入所需的信息作为描述、作者姓名和作者电子邮件。</li><li id="e604" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">选择<code class="eh ke kf kg kh b">Apache-2.0</code>作为许可证。</li><li id="d799" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">选择<code class="eh ke kf kg kh b">org.example.mynetwork</code>作为名称空间。</li><li id="a366" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">当询问是否生成空网络时，选择<code class="eh ke kf kg kh b">No</code>。</li></ol><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/01efe95d9183c5b9bfed1dcc12b7902f.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*XYqAQmWm1_VlIKyUir4-xQ.png"/></div></figure><p id="0ce8" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">创建业务网络后。它将创建业务网络框架。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/aa3d1e8352aa579bbc7358bb6a3a162d.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*E0fOg__Q0Cs7ah2UBOzbNw.png"/></div></figure><h2 id="18f6" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">定义业务网络</h2><p id="c160" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">在主干业务网络中，有一个模型<code class="eh ke kf kg kh b">.cto</code>文件，它将包含业务网络中所有资产、参与者和事务的类定义。主干业务网络还包含一个具有基本访问控制规则的访问控制<code class="eh ke kf kg kh b">permissions.acl</code>文档、一个包含事务处理器函数的脚本<code class="eh ke kf kg kh b">logic.js</code>文件和一个包含业务网络元数据的<code class="eh ke kf kg kh b">package.json</code>文件。</p><ol class=""><li id="9b77" class="ms mt ht ji b jj jk jn jo jr mu jv mv jz mw kd mx my mz na dt translated">打开<code class="eh ke kf kg kh b">org.example.mynetwork.cto</code>模型文件。使用<code class="eh ke kf kg kh b">vi org.example.mynetwork.cto</code>并粘贴上述代码。</li><li id="18bf" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">将内容替换为以下内容。</li></ol><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="84ed" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">/**<br/> * My commodity trading network<br/> */<br/>namespace org.example.mynetwork<br/>asset Commodity identified by tradingSymbol {<br/>    o String tradingSymbol<br/>    o String description<br/>    o String mainExchange<br/>    o Double quantity<br/>    --&gt; Trader owner<br/>}<br/>participant Trader identified by tradeId {<br/>    o String tradeId<br/>    o String firstName<br/>    o String lastName<br/>}<br/>transaction Trade {<br/>    --&gt; Commodity commodity<br/>    --&gt; Trader newOwner<br/>}</strong></span></pre><p id="7fc0" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">3.将您的更改保存到<code class="eh ke kf kg kh b">org.example.mynetwork.cto</code>。</p><p id="4908" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">4.打开<code class="eh ke kf kg kh b">logic.js</code>脚本文件。</p><p id="932a" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">5.将内容替换为以下内容。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="bf9a" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">/**<br/> * Track the trade of a commodity from one trader to another<br/> * @param {org.example.mynetwork.Trade} trade - the trade to be processed<br/> * @transaction<br/> */<br/>async function tradeCommodity(trade) {<br/>    trade.commodity.owner = trade.newOwner;<br/>    let assetRegistry = await getAssetRegistry('org.example.mynetwork.Commodity');<br/>    await assetRegistry.update(trade.commodity);<br/>} </strong></span></pre><p id="6eac" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">6.将您的更改保存到<code class="eh ke kf kg kh b">logic.js</code>。</p><p id="d4da" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">7.替换文件<code class="eh ke kf kg kh b">permissions.acl</code>中的以下访问控制规则。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="9699" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">/**<br/> * Access control rules for tutorial-network<br/> */<br/>rule Default {<br/>    description: "Allow all participants access to all resources"<br/>    participant: "ANY"<br/>    operation: ALL<br/>    resource: "org.example.mynetwork.*"<br/>    action: ALLOW<br/>}<br/><br/>rule SystemACL {<br/>  description:  "System ACL to permit all access"<br/>  participant: "ANY"<br/>  operation: ALL<br/>  resource: "org.hyperledger.composer.system.**"<br/>  action: ALLOW<br/>}</strong></span></pre><p id="9452" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">8.将您的更改保存到<code class="eh ke kf kg kh b">permissions.acl</code>。</p><h2 id="d230" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">生成业务网络档案</h2><p id="95aa" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">业务网络已经定义，必须打包成可部署的业务网络档案(<code class="eh ke kf kg kh b">.bna</code>)文件。</p><ol class=""><li id="1973" class="ms mt ht ji b jj jk jn jo jr mu jv mv jz mw kd mx my mz na dt translated">使用命令行，导航到<code class="eh ke kf kg kh b">tutorial-network</code>目录。</li><li id="c03f" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">从<code class="eh ke kf kg kh b">tutorial-network</code>目录中，运行以下命令</li></ol><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="e388" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">composer archive create -t dir -n .</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/0ebed16a11f22c76a916c487172059c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*lHsV1UlJxzo36KOu7Tn20A.png"/></div></figure><p id="87e5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">命令运行后，在<code class="eh ke kf kg kh b">tutorial-network</code>目录中创建了一个名为<code class="eh ke kf kg kh b">tutorial-network@0.0.1.bna</code>的业务网络归档文件。</p><p id="151c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">创建完<code class="eh ke kf kg kh b">.bna</code>文件后，就该使用<code class="eh ke kf kg kh b">touch</code>命令在<code class="eh ke kf kg kh b">fabric-dev-server </code>目录下创建一个名为<code class="eh ke kf kg kh b">package.json </code>的新文件了。在这个文件中，放置下面提到的代码，并用AWS实例的相应公共IP地址替换<code class="eh ke kf kg kh b">18.219.91.219</code>。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ni"><img src="../Images/c399d08aa7b4e2fcb49b03e28ed81fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*6Ivpy2huSWuy-VdZxDAyKg.png"/></div></div></figure><h2 id="1e56" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">找到Hyperledger结构管理员的证书和私钥</h2><p id="fdc0" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">为了将区块链业务网络部署到此Hyperledger结构网络，我们必须将自己标识为具有执行此操作权限的管理员。</p><p id="ca1c" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在这一步中，我们将找到将您标识为管理员所需的文件。我们Hyperledger Fabric网络的管理员是一个名为<code class="eh ke kf kg kh b">Admin@org1.example.com</code>的用户。该用户的证书和私钥文件存储在目录中。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="4fb0" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">~/fabric-dev-servers/fabric-scripts/hlfv12/composer/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp</strong></span></pre><p id="13b5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">将<code class="eh ke kf kg kh b">Admin@org1.example.com/msp<strong class="ji hu"> </strong></code>和<code class="eh ke kf kg kh b">114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457_sk</code>文件复制到<code class="eh ke kf kg kh b">fabric-dev-server</code>文件夹中。这样我们就可以很容易地访问数据。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nj"><img src="../Images/632363d77df12b31df18a8e89dd6387a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gmr-UAvTxbjsAXXVFKqjFg.png"/></div></div></figure><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nk"><img src="../Images/f590e8dc58bc40d0e67325a14237b4c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mzBmrMj_MzpFwL27PBSewQ.png"/></div></div></figure><h2 id="74bf" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">为Hyperledger结构管理员创建业务网卡</h2><p id="bddb" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">业务网卡包含连接到区块链业务网络和基础Hyperledger结构网络所需的所有信息。这些信息包括在前面步骤中创建的连接配置文件，以及管理员的证书和私钥。</p><p id="5e32" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在此步骤中，将为管理员创建一张业务网卡，用于将区块链业务网络部署到Hyperledger结构网络。</p><p id="27b7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">运行<code class="eh ke kf kg kh b">composer card create</code>命令来创建一个业务网卡。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="c8e0" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">composer card create -p connection.json -u PeerAdmin -c Admin@org1.example.com-cert.pem -k 114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457_sk -r PeerAdmin -r ChannelAdmin</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nl"><img src="../Images/2b7ceb09a5530a813487e64effb0ff57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tg7tGC67JIadp1xk8TedqQ.png"/></div></div></figure><h2 id="4afb" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">为Hyperledger Fabric管理员导入业务网卡</h2><p id="ff73" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">Hyperledger Composer只能使用放在钱包中的业务网卡。wallet是文件系统中包含业务网卡的目录。在这一步中，我们将把在上一步中创建的业务网络卡导入到钱包中，以便在后续步骤中使用该业务网络卡。</p><p id="aedb" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">运行<code class="eh ke kf kg kh b">composer card import</code>命令将业务网卡导入钱包:</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="2495" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">composer card import -f PeerAdmin@fabric-network.card</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nj"><img src="../Images/f9f3a4b64df16ee2503f4fc9509747e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCfqXcj7f9d8wXwQ1q71YQ.png"/></div></div></figure><p id="ce57" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">导入业务网卡后，移动fabric-dev-server文件夹中的<code class="eh ke kf kg kh b">.bna</code>文件。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nm"><img src="../Images/c05a64ddc9dd29ace7a802888a06f03a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3nptqgRZnMsw-z6JJkMrow.png"/></div></div></figure><p id="52b5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">正如你所看到的，所有必要的文件现在都在主文件夹中。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nn"><img src="../Images/762e8d4968ffe148da93c0adff62aa05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mCiWdEvZ7p-XRnh3OXNwNg.png"/></div></div></figure><h2 id="e9cc" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">将Hyperledger Composer业务网络安装到Hyperledger结构对等节点上</h2><p id="35f9" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">在此步骤中，我们将在贵组织的所有Hyperledger结构对等节点上安装我们的区块链业务网络。在Hyperledger Fabric术语中，这是一个链码安装操作。</p><p id="d40e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">运行<code class="eh ke kf kg kh b">composer network install</code>命令将Hyperledger Composer运行时安装到我们在上面创建的连接配置文件中指定的Hyperledger Fabric对等节点上。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kw"><img src="../Images/fcd59448b39c57d5a2f03d9c76107167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uu6wu-CSQW-M8b4wYxCVuA.png"/></div></div></figure><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="1540" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">composer network install -c PeerAdmin@fabric-network -a tutorial-network@0.0.1.bna</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff no"><img src="../Images/84cf2d1af3f8261e13b4362115156a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h6pw21ISXTHAKoyPqXJh-w.png"/></div></div></figure><h2 id="16aa" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">启动区块链商业网络</h2><p id="20c7" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">在这一步中，我们将启动区块链业务网络。在Hyperledger结构术语中，这是一个链码实例化操作。</p><p id="b4f9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">运行<code class="eh ke kf kg kh b">composer network start</code>命令启动区块链商业网络。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="eb50" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">composer network start --networkName tutorial-network --networkVersion 0.0.1 -A admin -S adminpw -c PeerAdmin@fabric-network</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff np"><img src="../Images/3145c705a11f79d23ea14520182cd776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAyP12BoUoG7D9AuNgzh3w.png"/></div></div></figure><h2 id="f931" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">为业务网络管理员导入业务网卡</h2><p id="ac24" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">运行<code class="eh ke kf kg kh b">composer card import</code>命令将业务网卡导入钱包。</p><pre class="ki kj kk kl fq km kh kn ko aw kp dt"><span id="fb37" class="kq kr ht kh b fv ks kt l ku kv"><strong class="kh hu">composer card import -f admin@tutorial-network.card</strong></span></pre><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nq"><img src="../Images/5cdefe711e2ad4453841074de9ab0ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VLUFJL4C0KKe6mPt5nAhA.png"/></div></div></figure><p id="d5f2" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">啊哈！！！！最后，我们运行解决所有问题，完成我们的安装。现在是时候启动REST-API了。</p><h2 id="9565" class="kq kr ht bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">生成REST服务器</h2><p id="1be2" class="pw-post-body-paragraph jg jh ht ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hm dt translated">Hyperledger Composer可以基于业务网络生成定制的REST API。对于开发web应用程序，REST API提供了一个有用的语言无关的抽象层。</p><ol class=""><li id="e7c3" class="ms mt ht ji b jj jk jn jo jr mu jv mv jz mw kd mx my mz na dt translated">要创建REST API，导航到<code class="eh ke kf kg kh b">tutorial-network</code>目录并运行<code class="eh ke kf kg kh b">composer-rest-server</code>命令</li><li id="ecec" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">输入<code class="eh ke kf kg kh b">admin@tutorial-network</code>作为卡名。</li><li id="96e1" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">当询问是否在生成的API中使用名称空间时，选择<strong class="ji hu">永不使用名称空间</strong>。</li><li id="bb07" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">当询问是否保护生成的API时，选择<strong class="ji hu">否</strong>。</li><li id="0d9b" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">当询问是否启用事件发布时，选择<strong class="ji hu">是</strong>。</li><li id="ea29" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">当询问是否启用TLS安全时，选择<strong class="ji hu">否</strong>。</li></ol><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div class="fe ff nr"><img src="../Images/63dcc82939a2ef2e7f1050e51aad9bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*hzMlNTB7ExoS4ovxVvjCAA.png"/></div></figure><p id="11f3" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用AWS实例的公共地址启动Hyperledger Composer的REST-API。</p><figure class="ki kj kk kl fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ns"><img src="../Images/198a80d5e1ab8f4f093d30f8324b5216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iux3YSOmqbiasiO4yn1HOQ.png"/></div></div></figure><p id="de2e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">yeppppiiii……我们在AWS上运行Hyperledger Composer设置！！！！</p><p id="12fc" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果想进一步玩Angular REST-API。您可以运行以下命令，与基于GUI的应用程序进行交互，以即插即用部署的链代码。</p><ol class=""><li id="b4ef" class="ms mt ht ji b jj jk jn jo jr mu jv mv jz mw kd mx my mz na dt translated">要创建您的Angular应用程序，导航到<code class="eh ke kf kg kh b">tutorial-network</code>目录并运行以下命令。</li><li id="23fa" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated"><code class="eh ke kf kg kh b">yo hyperledger-composer:angular</code></li><li id="908e" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">当要求连接到正在运行的业务网络时，选择<strong class="ji hu">是</strong>。</li><li id="0ad8" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">输入标准<code class="eh ke kf kg kh b">package.json</code>问题(项目名称、描述、作者姓名、作者电子邮件、许可证)</li><li id="013a" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">输入<code class="eh ke kf kg kh b">admin@tutorial-network</code>为业务网卡。</li><li id="7958" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">选择<strong class="ji hu">连接到现有的REST API </strong></li><li id="8ecb" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">输入<code class="eh ke kf kg kh b">http://18.219.19.219</code>作为REST服务器地址(注意:我提供我的AWS实例公共地址，你必须提供你的地址)。</li><li id="8a3b" class="ms mt ht ji b jj nb jn nc jr nd jv ne jz nf kd mx my mz na dt translated">输入<code class="eh ke kf kg kh b">3000</code>作为服务器端口。</li></ol><p id="c0e2" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然后，角度生成器将为项目创建脚手架并安装所有依赖项。要运行应用程序，导航到您的angular项目目录并运行<code class="eh ke kf kg kh b">npm start</code>。这将在<code class="eh ke kf kg kh b"><a class="ae jf" href="http://localhost:4200" rel="noopener ugc nofollow" target="_blank">http://18.219.19.219:4200</a></code>启动一个针对REST API运行的Angular 4应用程序。</p></div></div>    
</body>
</html>