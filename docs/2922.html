<html>
<head>
<title>Ethereum Network (Part2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太网(下)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereum-network-part2-225dc66fb1b0?source=collection_archive---------1-----------------------#2020-04-14">https://medium.com/coinmonks/ethereum-network-part2-225dc66fb1b0?source=collection_archive---------1-----------------------#2020-04-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="8c41" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">帐户、挖掘和交易</h2></div><p id="1a67" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">你可以在这里阅读第一部分。</p><h1 id="8c62" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">账户</h1><p id="fddb" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">在<a class="ae ke" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊网络</a>上有两种类型的账户，即外部拥有账户(EOA)和智能合约账户。在这一部分，我们将集中讨论EOA。为了能够进行事务处理，我们需要一个连接到节点的EOA。帐户可以在初始化geth之前创建，也可以在geth控制台中创建。在创建链之前，通过在genesis文件中的alloc中输入公共帐户的地址并初始化帐户余额，可以在控制台节点上直接使用开始时创建的帐户。一个节点可以连接到多个帐户。</p><p id="ee56" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过geth命令创建帐户</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="ed58" class="ll kg ht lh b fv lm ln l lo lp">geth --datadir node2 account new</span></pre><p id="7cf4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Datadir是一个目录选项，您将使用它来保存链中的数据。如果您没有定义目录，默认情况下它会保存在您的根目录下。</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/c3b80e695d23bc1a80afc8b21c5af283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*ru3Grtq2pdCd6F6htAIMrg.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Output when creating account</figcaption></figure><p id="4b88" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过geth控制台创建帐户</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="979c" class="ll kg ht lh b fv lm ln l lo lp">personal.newAccount()</span></pre><p id="7763" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">创建帐户时，会要求您输入密码/释义。Paraphrase用于加密服务器上的私钥帐户。解密私钥时也使用释义。帐户的公共地址和加密的私有密钥将存储在元掩码文件中，该文件是在定义的数据库中自动创建的。</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/24d625f629510c57e5fa5b447c37ec74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*ndZkmK0MKyJkKGjfPM3zog.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Metamask of account</figcaption></figure><p id="76a7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">进行交易时，控制台上的用户需要通过使用以下命令解锁帐户来获得帐户访问权限</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="5379" class="ll kg ht lh b fv lm ln l lo lp">personal.unlockAccount(eth.accounts[0],&lt;paraphrase&gt;,&lt;time&gt;)</span></pre><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/8d94df4f7607468390f30ad4f8577e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*ulXoc_hDPthyZq-ICFAeEg.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Unlocking account</figcaption></figure><p id="5b32" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">要进行交易，账户需要有余额。帐户上存储的余额可以在开始时初始化，也可以通过挖掘获得。你每做一次挖矿，一个账号就可以得到一个乙醚，当你想做交易的时候就可以用了。</p><p id="ac6d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">可以使用以下命令检查帐户余额</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/f54887ed484fbf34f94837cc547718ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*863BR-Lpo1azGF_LmTMLyQ.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Balance account check</figcaption></figure><h1 id="8ee6" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">采矿</h1><p id="8627" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">挖掘是记录由充当挖掘者的账户执行的交易的过程。矿工记录的交易将被视为有效。挖掘也可以看作是一个节点运行其资源记录块的过程。矿工将获得“乙醚”形式的奖励，这些奖励将被添加到注册为coinbase的帐户余额中。默认情况下，eth.coinbase = eth.accounts [0]。</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/bed696b923f3af697f0dac2acb64220d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*2_etYKiZzZDmcVOIJ2du-Q.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Coinbase</figcaption></figure><p id="40ce" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">要开始挖掘过程，请运行以下命令</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="8d12" class="ll kg ht lh b fv lm ln l lo lp">miner.start()</span></pre><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/11cbeb61b716b879451fa95394c1bb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*nD9KrPSlwxA6M8hUHSosPg.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Mining process</figcaption></figure><p id="c5f6" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用此命令停止挖掘过程</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="05a6" class="ll kg ht lh b fv lm ln l lo lp">miner.stop()</span></pre><p id="b841" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">您还可以使用此命令检查挖掘状态</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="c5b6" class="ll kg ht lh b fv lm ln l lo lp">eth.mining()</span></pre><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff ma"><img src="../Images/2a095dca9650d39b5f69231367c8eae2.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*_XLuma_JEUlHo04r_aUbAA.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Account balance after mining process</figcaption></figure><p id="dcd6" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">采矿过程完成后，矿工将获得乙醚作为奖励。在12个记录块中，矿工得到24个以太。这意味着每个块值2乙醚。</p><h1 id="db5c" class="kf kg ht bd kh ki kj kk kl km kn ko kp iz kq ja kr jc ks jd kt jf ku jg kv kw dt translated">交易</h1><p id="d210" class="pw-post-body-paragraph ji jj ht jk b jl kx iu jn jo ky ix jq jr kz jt ju jv la jx jy jz lb kb kc kd hm dt translated">我们进入主要部分，交易。交易可以在同一个节点或不同的机器上用两个不同的账户完成。在这一部分，我们将首先尝试同一节点中两个帐户之间的交易。</p><p id="7c0c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">首先，您必须在您的节点中使用命令创建另一个帐户。然后检查您的节点中是否有两个帐户。</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/b048ec0f9712249dc3fd6332d2be545b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*K5mD3cquqyWO1MXDyn7_2A.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Account list checking</figcaption></figure><p id="f63a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在进行交易之前，您必须使用之前输入的释义解锁发送方帐户，此外，必须确保发送方帐户有足够的余额来发送乙醚并支付处理交易所需的汽油费用。</p><p id="f884" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用此命令发送事务</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="a919" class="ll kg ht lh b fv lm ln l lo lp">eth.sendTransaction({ from: eth.accounts[0], to: eth.accounts[1], value: web3.toWei(1,"ether"), gas:0xEEE00 , data: "0x00"})</span></pre><figure class="lc ld le lf fq lr fe ff paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="fe ff mb"><img src="../Images/d56482a9030c86cb05029789b723cf9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*kb3hH5MnuA0ZfO_vVPv0Tw.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Sending transaction</figcaption></figure><p id="cfe7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">正如你在上面看到的，交易已经完成。我们可以使用事务散列来检查事务细节。</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/9eb23155b11168cc91d95c693ee4b3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*uRgfHphzzPmGSppRrk0DWw.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Transaction details</figcaption></figure><p id="8b8a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然而<em class="mh">块哈希</em>和<em class="mh">块号</em>仍然为空。发生这种情况的原因是，该事务还没有被验证(矿工还没有作出记录)，因此它可以作为待定事务被接受。我们还可以使用这个命令看到挂起的事务，就像这样。</p><pre class="lc ld le lf fq lg lh li lj aw lk dt"><span id="c585" class="ll kg ht lh b fv lm ln l lo lp">txpool.content.pending</span></pre><figure class="lc ld le lf fq lr fe ff paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="fe ff mi"><img src="../Images/3dde6aa672bf41896f9f8d350ffae4aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*DIU47w1KZrSOizb8n-qGmw.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Pending transaction</figcaption></figure><p id="6fd8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们需要首先挖掘它，以便记录块中的事务。</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/21b8b1ea9e24ca1381f3a4327601c7a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*GAnzO47hsOX8sAdfS2x-mw.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Transaction detail after mining</figcaption></figure><p id="4f33" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们终于成功创建了自己的以太坊网络，创建账号，在账号之间发送交易，在一条链上做块记录。在下一部分中，我们将进一步学习不同机器上的两个节点之间的交互。继续学习！！</p><figure class="lc ld le lf fq lr fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff mk"><img src="../Images/e9dbce386c4f90837b5db529a4c87766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fZu_SfnNF6m_BGbXlsl-A@2x.png"/></div></a></figure><blockquote class="ml"><p id="bca5" class="mm mn ht bd mo mp mq mr ms mt mu kd ek translated"><a class="ae ke" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mw mx my mz na lr fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mv"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>