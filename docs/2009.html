<html>
<head>
<title>Test hyperledger fabric chaincodes in dev environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在开发环境中测试hyperledger结构链代码</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/test-hyperledger-fabric-chaincode-in-dev-environment-8794096b5df2?source=collection_archive---------1-----------------------#2019-01-25">https://medium.com/coinmonks/test-hyperledger-fabric-chaincode-in-dev-environment-8794096b5df2?source=collection_archive---------1-----------------------#2019-01-25</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="133a" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">链码开发模式</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/9a87858323997007f4603d131f6f78b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kyCpebrJW1kQRTeQeJUGmA.png"/></div></div></figure><h1 id="93de" class="ju jv ht bd jw jx jy jz ka kb kc kd ke iz kf ja kg jc kh jd ki jf kj jg kk kl dt translated">快乐分类器</h1><p id="80a3" class="pw-post-body-paragraph km kn ht ko b kp kq iu kr ks kt ix ku kv kw kx ky kz la lb lc ld le lf lg lh hm dt translated">这是我的hyperledger fabric博客系列的第四部分- <code class="eh li lj lk ll b">Happyledger</code>博客系列:)。在这篇文章中，我将展示如何在我们的本地开发机器上构建、运行和测试(调试)链代码。</p><p id="a8b2" class="pw-post-body-paragraph km kn ht ko b kp lm iu kr ks ln ix ku kv lo kx ky kz lp lb lc ld lq lf lg lh hm dt translated">普通链码安装并运行在对等体上。但是使用<code class="eh li lj lk ll b">chaincode dev mode</code>,我们可以在本地开发机器上运行和测试它们。在将链码部署到真实网络之前，有必要对其进行编译、运行和测试。</p><p id="ecbe" class="pw-post-body-paragraph km kn ht ko b kp lm iu kr ks ln ix ku kv lo kx ky kz lp lb lc ld lq lf lg lh hm dt translated">与本文相关的所有部署文件和配置都在<a class="ae lr" href="https://gitlab.com/rahasak-labs/hlf-chaincode-dev" rel="noopener ugc nofollow" target="_blank">hlf-chain code-dev</a>git lab repo。请签出存储库并遵循以下步骤。</p><h1 id="70d8" class="ju jv ht bd jw jx jy jz ka kb kc kd ke iz kf ja kg jc kh jd ki jf kj jg kk kl dt translated">1.设置结构开发网络</h1><p id="973f" class="pw-post-body-paragraph km kn ht ko b kp kq iu kr ks kt ix ku kv kw kx ky kz la lb lc ld le lf lg lh hm dt translated">首先，我们需要使用预先生成的订购者和渠道构件部署开发模式docker容器。下面是在这个目录中发现的预生成工件。</p><ol class=""><li id="cb09" class="ls lt ht ko b kp lm ks ln kv lu kz lv ld lw lh lx ly lz ma dt translated"><code class="eh li lj lk ll b">myc.block</code> -通道阻塞</li><li id="edb9" class="ls lt ht ko b kp mb ks mc kv md kz me ld mf lh lx ly lz ma dt translated"><code class="eh li lj lk ll b">myc.tx</code> -渠道加入交易</li><li id="5358" class="ls lt ht ko b kp mb ks mc kv md kz me ld mf lh lx ly lz ma dt translated"><code class="eh li lj lk ll b">orderer.block</code>——订货商街区</li></ol><p id="d084" class="pw-post-body-paragraph km kn ht ko b kp lm iu kr ks ln ix ku kv lo kx ky kz lp lb lc ld lq lf lg lh hm dt translated">您可以按如下方式部署服务。它将启动并运行<code class="eh li lj lk ll b">orderer</code>、<code class="eh li lj lk ll b">peer</code>、<code class="eh li lj lk ll b">cli</code>和<code class="eh li lj lk ll b">chaincode</code>容器。订购者以<code class="eh li lj lk ll b">SingleSampleMSPSolo</code>开始，同行以<code class="eh li lj lk ll b">dev-mode</code>开始。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mg mh l"/></div></figure><h1 id="a404" class="ju jv ht bd jw jx jy jz ka kb kc kd ke iz kf ja kg jc kh jd ki jf kj jg kk kl dt translated">2.构建并运行链代码</h1><p id="4ade" class="pw-post-body-paragraph km kn ht ko b kp kq iu kr ks kt ix ku kv kw kx ky kz la lb lc ld le lf lg lh hm dt translated">接下来，我们需要在<code class="eh li lj lk ll b">chaincode container</code>中构建并运行chaincode。我已经把我的<code class="eh li lj lk ll b">rahasak.go</code>链码放在了<code class="eh li lj lk ll b">chaincode/rahasak</code>目录下。该链码具有<code class="eh li lj lk ll b">User</code>对象和<code class="eh li lj lk ll b">Create</code>、<code class="eh li lj lk ll b">Get</code>、<code class="eh li lj lk ll b">Search</code>功能。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mg mh l"/></div></figure><p id="94ef" class="pw-post-body-paragraph km kn ht ko b kp lm iu kr ks ln ix ku kv lo kx ky kz lp lb lc ld lq lf lg lh hm dt translated">下面是在<code class="eh li lj lk ll b">chaincode</code>容器中构建和运行这个链代码的命令。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mg mh l"/></div></figure><p id="f5f1" class="pw-post-body-paragraph km kn ht ko b kp lm iu kr ks ln ix ku kv lo kx ky kz lp lb lc ld lq lf lg lh hm dt translated">运行链码时，我们为链码指定唯一的名称和版本(<code class="eh li lj lk ll b">rahasak.1</code>)。现在chaincode已经在chaincode容器中启动了。</p><h1 id="c044" class="ju jv ht bd jw jx jy jz ka kb kc kd ke iz kf ja kg jc kh jd ki jf kj jg kk kl dt translated">3.安装和实例化链代码</h1><p id="1489" class="pw-post-body-paragraph km kn ht ko b kp kq iu kr ks kt ix ku kv kw kx ky kz la lb lc ld le lf lg lh hm dt translated">接下来的事情是在对等体中安装和实例化chaincode(与我们在真实结构集群中安装和实例化chaincode一样)。下面是做那件事的方法。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mg mh l"/></div></figure><p id="b885" class="pw-post-body-paragraph km kn ht ko b kp lm iu kr ks ln ix ku kv lo kx ky kz lp lb lc ld lq lf lg lh hm dt translated">在安装和实例化时，我们需要指定链码的名称。在这里我给了<code class="eh li lj lk ll b">rahasak</code>作为名字和<code class="eh li lj lk ll b">1</code>作为版本。现在我们的链码设置已经可以测试了。</p><h1 id="519c" class="ju jv ht bd jw jx jy jz ka kb kc kd ke iz kf ja kg jc kh jd ki jf kj jg kk kl dt translated">4.测试链代码</h1><p id="2f39" class="pw-post-body-paragraph km kn ht ko b kp kq iu kr ks kt ix ku kv kw kx ky kz la lb lc ld le lf lg lh hm dt translated">为了测试链码，我们可以执行<code class="eh li lj lk ll b">invoke</code>、<code class="eh li lj lk ll b">query</code>事务。下面是做那件事的方法。</p><figure class="jj jk jl jm fq jn"><div class="bz el l di"><div class="mg mh l"/></div></figure><h1 id="e176" class="ju jv ht bd jw jx jy jz ka kb kc kd ke iz kf ja kg jc kh jd ki jf kj jg kk kl dt translated">参考</h1><ol class=""><li id="c7c3" class="ls lt ht ko b kp kq ks kt kv mi kz mj ld mk lh lx ly lz ma dt translated"><a class="ae lr" href="https://hyperledger-fabric.readthedocs.io/en/v1.0.6/peer-chaincode-devmode.html" rel="noopener ugc nofollow" target="_blank">https://hyperledger-fabric . readthedocs . io/en/v 1 . 0 . 6/peer-chain code-devmode . html</a></li><li id="0915" class="ls lt ht ko b kp mb ks mc kv md kz me ld mf lh lx ly lz ma dt translated"><a class="ae lr" href="https://github.com/hyperledger/fabric-samples/tree/release/chaincode-docker-devmode" rel="noopener ugc nofollow" target="_blank">https://github . com/hyperledger/fabric-samples/tree/release/chain code-docker-devmode</a></li></ol><figure class="jj jk jl jm fq jn fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff ml"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a></figure><blockquote class="mm"><p id="ec79" class="mn mo ht bd mp mq mr ms mt mu mv lh ek translated"><a class="ae lr" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mx my mz na nb jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mw"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>