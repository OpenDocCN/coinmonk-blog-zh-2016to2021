<html>
<head>
<title>Raspberry π + Lightning ⚡+ Docker 🐋 &amp; no external drive (6 Steps).</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">覆盆子π +闪电⚡+ Docker🐋&amp;无外部驱动器(6步)。</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/raspberry-pi-lightning-network-w-no-external-drive-5-steps-d4fba98ac8cb?source=collection_archive---------2-----------------------#2018-12-18">https://medium.com/coinmonks/raspberry-pi-lightning-network-w-no-external-drive-5-steps-d4fba98ac8cb?source=collection_archive---------2-----------------------#2018-12-18</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="4b30" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">这是一个6步教程，让树莓派运行一个功能齐全的闪电节点。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div class="fe ff jo"><img src="../Images/663d7c841e77347dfe161fd36ab8f289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*b5TyCCdkXYzFQ0QivGYGsw.png"/></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">+ Docker</figcaption></figure><p id="e750" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">诀窍是使用Docker +比特币和修剪过的数据，让一切运行在16 GB以下。</p><h1 id="719a" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤0。所需设备</h1><ol class=""><li id="e658" class="ky kz ht is b it la ix lb jb lc jf ld jj le jn lf lg lh li dt translated">有大约300 GB可用空间的辅助计算机。</li><li id="490f" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">带有互联网连接的树莓Pi3 (Pi)。(参见其他教程)</li></ol><h1 id="d173" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第一步。下载完整的比特币区块链。</h1><p id="d6cf" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lo jd je jf lp jh ji jj lq jl jm jn hm dt translated">我们需要纯模式的比特币区块链。我们将在步骤3中将其复制到Pi。</p><ol class=""><li id="b1f4" class="ky kz ht is b it iu ix iy jb lr jf ls jj lt jn lf lg lh li dt translated">安装Bitcoind (Linux)或Mac</li><li id="997a" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">开始同步比特币区块链。</li><li id="2777" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">等待进度= 1.00。</li></ol><pre class="jp jq jr js fq lu lv lw lx aw ly dt"><span id="6f22" class="lz kb ht lv b fv ma mb l mc md">sudo apt-get install bitcoind # (For Linux)<br/>brew install bitcoind # (For Mac)<br/>bitcoind -prune=555<br/>... wait ... you can do steps 2 and 3.</span></pre><p id="0845" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">*注意**区块链数据存储在</p><ul class=""><li id="d673" class="ky kz ht is b it iu ix iy jb lr jf ls jj lt jn me lg lh li dt translated">/库/应用支持/比特币(Mac)</li><li id="a6d9" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn me lg lh li dt translated">~/.比特币/ (Linux)</li></ul><h1 id="5899" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第二步。在你的Pi上安装Docker。</h1><p id="b967" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lo jd je jf lp jh ji jj lq jl jm jn hm dt translated">我们使用Docker来容器化LND和Bitcoind后台服务。</p><ol class=""><li id="0007" class="ky kz ht is b it iu ix iy jb lr jf ls jj lt jn lf lg lh li dt translated">安装Docker..</li><li id="1322" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">将当前用户(pi)添加到docker用户组中。</li><li id="5407" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">确认安装。</li></ol><pre class="jp jq jr js fq lu lv lw lx aw ly dt"><span id="edb0" class="lz kb ht lv b fv ma mb l mc md">curl -ssl <a class="ae mf" href="https://get.docker.com" rel="noopener ugc nofollow" target="_blank">https://get.docker.com</a> | sh<br/>sudo usermod -a -G docker $USER<br/>docker --version</span></pre><h1 id="6855" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第三步。在您的Pi上安装Docker-Compose</h1><p id="c96b" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lo jd je jf lp jh ji jj lq jl jm jn hm dt translated">Docker-compose用于构建和连接我们的后端。</p><ol class=""><li id="8e50" class="ky kz ht is b it iu ix iy jb lr jf ls jj lt jn lf lg lh li dt translated">安装python-pip。</li><li id="f74c" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">Pip安装docker-compose。</li><li id="9fad" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">将当前用户(pi)添加到docker-compose用户组</li><li id="b232" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">确认安装。</li></ol><pre class="jp jq jr js fq lu lv lw lx aw ly dt"><span id="1e77" class="lz kb ht lv b fv ma mb l mc md">sudo apt-get -y install python-pip<br/>sudo pip install docker-compose<br/>sudo usermod -a -G docker-compose $USER<br/>docker-compose --version</span></pre><h1 id="f7f9" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第四步。下载这个存储库并复制修剪过的比特币数据</h1><p id="a82e" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lo jd je jf lp jh ji jj lq jl jm jn hm dt translated">一个16 BG的新PI无法容纳整个未修剪的比特币区块链(约300 GB)，因此我们将从我们的辅助计算机复制修剪后的数据(步骤1)</p><ol class=""><li id="c23c" class="ky kz ht is b it iu ix iy jb lr jf ls jj lt jn lf lg lh li dt translated">从<a class="ae mf" href="https://github.com/unconst/DockerBitcoindLND.git" rel="noopener ugc nofollow" target="_blank"> DockerBitcoindLN </a> D中克隆docker文件</li><li id="30c5" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">将区块链数据从辅助计算机复制到Pi上。</li></ol><pre class="jp jq jr js fq lu lv lw lx aw ly dt"><span id="7c53" class="lz kb ht lv b fv ma mb l mc md">git clone <a class="ae mf" href="https://github.com/unconst/DockerBitcoindLND.git" rel="noopener ugc nofollow" target="_blank">https://github.com/unconst/DockerBitcoindLND.git</a> &amp;&amp; cd DockerBitcoinLND</span><span id="0436" class="lz kb ht lv b fv mg mb l mc md">scp -r &lt;ip_of_secondary&gt;:path/to/bitcoin_dir bitcoind/bitcoin_data</span><span id="6a34" class="lz kb ht lv b fv mg mb l mc md"># e.g scp -r 192.168.0.12:~/.bitcoin bitcoind/bitcoin_data</span></pre><h1 id="96d3" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第五步。编写后端。</h1><ol class=""><li id="1386" class="ky kz ht is b it la ix lb jb lc jf ld jj le jn lf lg lh li dt translated">组合和构建容器。</li><li id="d9e1" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">别名lncli。</li><li id="14b7" class="ky kz ht is b it lj ix lk jb ll jf lm jj ln jn lf lg lh li dt translated">别名bitcoind cli。</li></ol><pre class="jp jq jr js fq lu lv lw lx aw ly dt"><span id="b230" class="lz kb ht lv b fv ma mb l mc md">sudo docker-compose up --build<br/>sudo alias lndcli='docker exec -i -t lnd_container lncli'<br/>sudo alias bitcoin-cli='docker exec -i -t bitcoind_container bitcoin-cli'</span></pre><h1 id="edd7" class="ka kb ht bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第六步。等待节点同步。</h1><p id="a0d2" class="pw-post-body-paragraph iq ir ht is b it la iv iw ix lb iz ja jb lo jd je jf lp jh ji jj lq jl jm jn hm dt translated">在此步骤之后，您需要等待容器完成同步。通过日志检查这个进度。</p><pre class="jp jq jr js fq lu lv lw lx aw ly dt"><span id="04f8" class="lz kb ht lv b fv ma mb l mc md">docker logs bitcoind_container<br/>docker logs lnd_container</span></pre><p id="e8b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以使用CLIs与docker容器进行交互，就像它们在本地运行一样。</p><p id="4a44" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">祝你好运。希望这有用。</p><p id="d8c5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt">😉</p><p id="dd63" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">:wq</p><blockquote class="mh"><p id="b0ca" class="mi mj ht bd mk ml mm mn mo mp mq jn ek translated"><a class="ae mf" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ms mt mu mv mw jt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mr"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure><figure class="jp jq jr js fq jt fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff mx"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a><figcaption class="jw jx fg fe ff jy jz bd b be z ek"><a class="ae mf" href="http://bit.ly/2G71Sp7" rel="noopener ugc nofollow" target="_blank"><strong class="bd my">Click to read today’s top story</strong></a></figcaption></figure></div></div>    
</body>
</html>