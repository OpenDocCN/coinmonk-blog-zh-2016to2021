<html>
<head>
<title>Developer tutorial for creating a Hyperledger Composer solution (Tutorial 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建Hyperledger Composer解决方案的开发人员教程(教程1)</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/developer-tutorial-for-creating-a-hyperledger-composer-solution-348f10e4898a?source=collection_archive---------2-----------------------#2018-07-30">https://medium.com/coinmonks/developer-tutorial-for-creating-a-hyperledger-composer-solution-348f10e4898a?source=collection_archive---------2-----------------------#2018-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="077e" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">基于IBM developerWorks</h2></div><h1 id="ef01" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">开发环境</h1><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="dd0d" class="kj jj ht kf b fv kk kl l km kn">npm version 6.2.0<br/>node version 8.9.1<br/>composer-cli version v0.19.12<br/>composer-rest-server version 0.19.12<br/>generator-hyperledger-composer version 0.19.12<br/>yo version 2.05</span></pre><h1 id="aa90" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤1:安装CLI工具</h1><p id="ad6a" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">对于Composer开发人员来说，有一些有用的CLI工具。最重要的是<code class="eh lk ll lm kf b">composer-cli</code>，它包含了所有的基本操作，所以我们将首先安装它。接下来，我们还将挑选<code class="eh lk ll lm kf b">generator-hyperledger-composer</code>、<code class="eh lk ll lm kf b">composer-rest-server</code>和<code class="eh lk ll lm kf b">Yeoman</code>以及<code class="eh lk ll lm kf b">generator-hyperledger-composer</code>。最后3个不是开发环境的核心部分，但如果您正在学习教程或开发与您的业务网络交互的应用程序，它们会很有用，所以我们现在就安装它们。</p><blockquote class="ln"><p id="531e" class="lo lp ht bd lq lr ls lt lu lv lw lj ek translated"><a class="ae lx" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><p id="d880" class="pw-post-body-paragraph ko kp ht kq b kr ly iu kt ku lz ix kw kx ma kz la lb mb ld le lf mc lh li lj hm dt translated">请注意，您<strong class="kq hu">不应</strong>将<code class="eh lk ll lm kf b">su</code>或<code class="eh lk ll lm kf b">sudo</code>用于以下npm命令。</p><p id="ac1d" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">基本CLI工具:</p><p id="29eb" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">npm install -g composer-cli</code></p><p id="9187" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">在您的机器上运行REST服务器以将您的业务网络公开为RESTful APIs的实用程序:</p><p id="9e50" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">npm install -g composer-rest-server</code></p><p id="23d9" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">生成应用程序资产的有用实用程序:</p><p id="164f" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">npm install -g generator-hyperledger-composer</code></p><p id="d099" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">Yeoman是一个生成应用程序的工具，它利用了<code class="eh lk ll lm kf b">generator-hyperledger-composer</code>:</p><p id="fe97" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">npm install -g yo</code></p><h1 id="7c55" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">第二步:安装游乐场</h1><p id="bab7" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">如果你已经尝试过Composer online，你会看到浏览器应用程序“Playground”。您也可以在您的开发机器上本地运行它，为您提供一个查看和演示您的业务网络的UI。</p><p id="a616" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">用于简单编辑和测试业务网络的浏览器应用程序:</p><p id="f2b4" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">npm install -g composer-playground</code></p><h1 id="2458" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤3:设置您的IDE</h1><p id="76af" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">虽然浏览器应用程序<em class="mi">可以</em>用于处理您的业务网络代码，但大多数用户更喜欢在IDE中工作。我们最喜欢的是<code class="eh lk ll lm kf b">VSCode</code>，因为有一个Composer扩展可用。</p><p id="4e85" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">从这个网址安装vs code:【https://code.visualstudio.com/download T21】</p><p id="430a" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">打开VSCode，转到Extensions，然后从Marketplace搜索并安装<code class="eh lk ll lm kf b">Hyperledger Composer</code>扩展。</p><h1 id="2069" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤4:安装Hyperledger Fabric</h1><p id="16ff" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">此步骤为您提供了一个本地Hyperledger结构运行时来部署您的业务网络。</p><p id="1574" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">在您选择的目录中(我们假设为<code class="eh lk ll lm kf b">~/fabric-dev-servers</code>，获取包含安装Hyperledger Fabric的工具的<code class="eh lk ll lm kf b">.tar.gz</code>文件:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="ea6a" class="kj jj ht kf b fv kk kl l km kn">mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers  <br/>curl -O <a class="ae lx" href="https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz</a><br/>tar -xvf fabric-dev-servers.tar.gz</span></pre><p id="65db" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">如果您愿意，也可以使用<code class="eh lk ll lm kf b">zip</code>:只需用<code class="eh lk ll lm kf b">fabric-dev-servers.zip</code>替换<code class="eh lk ll lm kf b">.tar.gz</code>文件，用<code class="eh lk ll lm kf b">unzip</code>命令替换<code class="eh lk ll lm kf b">tar -xvf</code>命令。</p><p id="51a9" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">使用您刚刚下载和提取的脚本下载本地Hyperledger Fabric运行时:</p><p id="b393" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">cd ~/fabric-dev-servers ./downloadFabric.sh</code></p></div><div class="ab cl mj mk hb ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hm hn ho hp hq"><h1 id="0583" class="ji jj ht bd jk jl mq jn jo jp mr jr js iz ms ja ju jc mt jd jw jf mu jg jy jz dt translated">你的网络</h1><h1 id="0fee" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤1:创建业务网络结构</h1><p id="9d4c" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">使用Yeoman创建一个基本的商业网络。该命令将需要企业网络名称、描述、作者姓名、作者电子邮件地址、许可证选择和名称空间。</p><p id="0578" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">yo hyperledger-composer:businessnetwork</code></p><p id="6f2a" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">输入<code class="eh lk ll lm kf b">tutorial-network</code>作为网络名称，并输入所需的信息作为描述、作者姓名和作者电子邮件。</p><p id="d775" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">选择<code class="eh lk ll lm kf b">Apache-2.0</code>作为许可证。</p><p id="52db" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">选择<code class="eh lk ll lm kf b">org.example.mynetwork</code>作为名称空间。</p><p id="810d" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">当询问是否生成空网络时，选择<code class="eh lk ll lm kf b">No</code>。</p><h1 id="4938" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤2:定义业务网络</h1><p id="7af5" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">业务网络由资产、参与者、事务、访问控制规则以及可选的事件和查询组成。在前面步骤中创建的框架业务网络中，有一个模型(<code class="eh lk ll lm kf b">.cto</code>)文件，它将包含业务网络中所有资产、参与者和交易的类定义。主干业务网络还包含具有基本访问控制规则的访问控制(<code class="eh lk ll lm kf b">permissions.acl</code>)文档、包含交易处理器函数的脚本(<code class="eh lk ll lm kf b">logic.js</code>)文件以及包含业务网络元数据的<code class="eh lk ll lm kf b">package.json</code>文件。</p><h2 id="c001" class="kj jj ht bd jk mv mw mx jo my mz na js kx nb nc ju lb nd ne jw lf nf ng jy nh dt translated">模拟资产、参与者和交易</h2><p id="3fd1" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">要更新的第一个文档是模型(<code class="eh lk ll lm kf b">.cto</code>)文件。该文件使用<a class="ae lx" href="https://hyperledger.github.io/composer/latest/reference/cto_language.html" rel="noopener ugc nofollow" target="_blank"> Hyperledger Composer建模语言</a>编写。模型文件包含每一类资产、交易、参与者和事件的定义。它隐式扩展了建模语言文档中描述的Hyperledger Composer系统模型。</p><p id="128b" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">打开<code class="eh lk ll lm kf b">org.example.mynetwork.cto</code>模型文件。</p><p id="3f8d" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">将内容替换为以下内容:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="8873" class="kj jj ht kf b fv kk kl l km kn">/**<br/> * My commodity trading network<br/> */<br/>namespace org.example.mynetwork<br/>asset Commodity identified by tradingSymbol {<br/>    o String tradingSymbol<br/>    o String description<br/>    o String mainExchange<br/>    o Double quantity<br/>    --&gt; Trader owner<br/>}<br/>participant Trader identified by tradeId {<br/>    o String tradeId<br/>    o String firstName<br/>    o String lastName<br/>}<br/>transaction Trade {<br/>    --&gt; Commodity commodity<br/>    --&gt; Trader newOwner<br/>}</span></pre><p id="520d" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">将您的更改保存到<code class="eh lk ll lm kf b">org.example.mynetwork.cto</code>。</p><h2 id="2e40" class="kj jj ht bd jk mv mw mx jo my mz na js kx nb nc ju lb nd ne jw lf nf ng jy nh dt translated">添加JavaScript事务逻辑</h2><p id="916e" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">在模型文件中，定义了一个<code class="eh lk ll lm kf b">Trade</code>事务，指定了与资产和参与者的关系。事务处理器函数文件包含JavaScript逻辑，用于执行模型文件中定义的事务。</p><p id="6f61" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">Trade</code>事务旨在简单地接受被交易的<code class="eh lk ll lm kf b">Commodity</code>资产的标识符，以及被设置为新所有者的<code class="eh lk ll lm kf b">Trader</code>参与者的标识符。</p><p id="b065" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">打开<code class="eh lk ll lm kf b">logic.js</code>脚本文件。</p><p id="1d8e" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">将内容替换为以下内容:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="5861" class="kj jj ht kf b fv kk kl l km kn">/**<br/> * Track the trade of a commodity from one trader to another<br/> * @param {org.example.mynetwork.Trade} trade - the trade to be processed<br/> * @transaction<br/> */<br/>async function tradeCommodity(trade) {<br/>    trade.commodity.owner = trade.newOwner;<br/>    let assetRegistry = await getAssetRegistry('org.example.mynetwork.Commodity');<br/>    await assetRegistry.update(trade.commodity);<br/>}</span></pre><p id="643f" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">将您的更改保存到<code class="eh lk ll lm kf b">logic.js</code>。</p><h2 id="6ca0" class="kj jj ht bd jk mv mw mx jo my mz na js kx nb nc ju lb nd ne jw lf nf ng jy nh dt translated">添加访问控制</h2><p id="cacb" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">替换文件<code class="eh lk ll lm kf b">permissions.acl</code>中的以下访问控制规则:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="26c9" class="kj jj ht kf b fv kk kl l km kn">/**<br/> * Access control rules for tutorial-network<br/> */<br/>rule Default {<br/>    description: "Allow all participants access to all resources"<br/>    participant: "ANY"<br/>    operation: ALL<br/>    resource: "org.example.mynetwork.*"<br/>    action: ALLOW<br/>}<br/><br/>rule SystemACL {<br/>  description:  "System ACL to permit all access"<br/>  participant: "ANY"<br/>  operation: ALL<br/>  resource: "org.hyperledger.composer.system.**"<br/>  action: ALLOW<br/>}</span></pre><p id="3034" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">将您的更改保存到<code class="eh lk ll lm kf b">permissions.acl</code>。</p><h1 id="4640" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤3:生成业务网络档案</h1><p id="1706" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">既然已经定义了业务网络，那么必须将它打包到一个可部署的业务网络档案(<code class="eh lk ll lm kf b">.bna</code>)文件中。</p><p id="1422" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">使用命令行，导航到<code class="eh lk ll lm kf b">tutorial-network</code>目录。</p><p id="acab" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">从<code class="eh lk ll lm kf b">tutorial-network</code>目录中，运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="9d6d" class="kj jj ht kf b fv kk kl l km kn">composer archive create -t dir -n .</span></pre><p id="a009" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">命令运行后，在<code class="eh lk ll lm kf b">tutorial-network</code>目录中创建了一个名为<code class="eh lk ll lm kf b">tutorial-network@0.0.1.bna</code>的业务网络归档文件。</p><h1 id="ff76" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤4:部署业务网络</h1><p id="ddcb" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">创建<code class="eh lk ll lm kf b">.bna</code>文件后，可以将业务网络部署到Hyperledger Fabric实例中。通常，需要来自结构管理员的信息来创建<code class="eh lk ll lm kf b">PeerAdmin</code>身份，该身份具有将链码安装到对等体以及在<code class="eh lk ll lm kf b">composerchannel</code>通道上启动链码的特权。</p><p id="2b4a" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">将文件startFabric.sh、stopFabric.sh、_loader.sh、creatPeerAdminCard.sh、fabric-scripts文件夹从fabric-dev-servers文件夹复制到tutorial-network文件夹</p><p id="a3de" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">在教程-网络中运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="93a2" class="kj jj ht kf b fv kk kl l km kn">./startFabric.sh<br/>./createPeerAdminCard.sh</span></pre><h2 id="5dd5" class="kj jj ht bd jk mv mw mx jo my mz na js kx nb nc ju lb nd ne jw lf nf ng jy nh dt translated">部署业务网络</h2><p id="2e83" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">将业务网络部署到Hyperledger Fabric需要在对等方上安装Hyperledger Composer业务网络，然后才能启动业务网络，并且必须创建新的参与者、身份和关联卡作为网络管理员。最后，必须导入network administrator商用网卡才能使用，然后可以pinged网络以检查它是否有响应。</p><p id="98ed" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要安装业务网络，从<code class="eh lk ll lm kf b">tutorial-network</code>目录运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="35c7" class="kj jj ht kf b fv kk kl l km kn">composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna</span></pre><p id="5c12" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">composer network install</code>命令需要一个PeerAdmin业务网卡(在本例中已经预先创建并导入了一个),以及定义业务网络的<code class="eh lk ll lm kf b">.bna</code>的文件路径。</p><p id="df86" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要启动业务网络，请运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="607a" class="kj jj ht kf b fv kk kl l km kn">composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card</span></pre><p id="3a99" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">composer network start</code>命令需要一个业务网卡，以及业务网络的管理员身份名称、业务网络的名称和版本，以及准备作为业务网卡导入的文件的名称。</p><p id="f765" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要将网络管理员身份作为可用的业务网卡导入，请运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="7e93" class="kj jj ht kf b fv kk kl l km kn">composer card import --file networkadmin.card</span></pre><p id="efe3" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">composer card import</code>命令需要在<code class="eh lk ll lm kf b">composer network start</code>中指定的文件名来创建卡。</p><p id="1674" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要检查业务网络是否已成功部署，请运行以下命令来ping网络:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="85de" class="kj jj ht kf b fv kk kl l km kn">composer network ping --card admin@tutorial-network</span></pre><p id="ec70" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">我得到了这个成功的结果</p><figure class="ka kb kc kd fq nj fe ff paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="fe ff ni"><img src="../Images/a97596223a0cf50919438fa5d3d72c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3HKL8JOm4TB-coe3th853A.png"/></div></div></figure><p id="76d9" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated"><code class="eh lk ll lm kf b">composer network ping</code>命令需要一个业务网卡来识别要ping的网络。</p><p id="74d4" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要使用playround运行和测试，请执行以下命令</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="d0ce" class="kj jj ht kf b fv kk kl l km kn">composer-playground</span></pre><figure class="ka kb kc kd fq nj fe ff paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="fe ff nq"><img src="../Images/a8aef62176654ec26fc96963fcf60bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1-ewe3QXr9O4Y9y5m_7wg.png"/></div></div></figure><h1 id="6af5" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤5:生成REST服务器</h1><p id="ae19" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">Hyperledger Composer可以基于业务网络生成定制的REST API。对于开发web应用程序，REST API提供了一个有用的语言无关的抽象层。</p><p id="3be9" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要创建REST API，导航到<code class="eh lk ll lm kf b">tutorial-network</code>目录并运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="08b7" class="kj jj ht kf b fv kk kl l km kn">composer-rest-server</span></pre><p id="b920" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">输入<code class="eh lk ll lm kf b">admin@tutorial-network</code>作为卡名。</p><p id="c7e7" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">当询问是否在生成的API中使用名称空间时，选择<strong class="kq hu">永不使用名称空间</strong>。</p><p id="0770" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">当询问是否保护生成的API时，选择<strong class="kq hu">否</strong>。</p><p id="4960" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">当询问是否启用事件发布时，选择<strong class="kq hu">是</strong>。</p><p id="ddc1" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">当询问是否启用TLS安全时，选择<strong class="kq hu">否</strong>。</p><p id="6a22" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">生成的API连接到部署的区块链和业务网络。</p><p id="7230" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">这是结果</p><figure class="ka kb kc kd fq nj fe ff paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="fe ff nr"><img src="../Images/ca838cf302b6cddd64a787f271225d35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zg-2vcmFq95Kdd7Yyt5SDA.png"/></div></div></figure><figure class="ka kb kc kd fq nj fe ff paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="fe ff ns"><img src="../Images/91a35ee9aca9dc6920f863b3b98ad48c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JkxZnZb6MM6iZSVn3OJEsA.png"/></div></div></figure><p id="9844" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">您可以使用GET(显示信息)和POST(创建新信息)</p><h1 id="ae25" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz dt translated">步骤6:生成应用程序</h1><p id="49d7" class="pw-post-body-paragraph ko kp ht kq b kr ks iu kt ku kv ix kw kx ky kz la lb lc ld le lf lg lh li lj hm dt translated">Hyperledger Composer还可以生成针对REST API运行的Angular 4应用程序。</p><p id="8a6a" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">要创建您的Angular 4应用程序，让步骤5运行，打开新终端并导航到<code class="eh lk ll lm kf b">tutorial-network</code>目录并运行以下命令:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="83b4" class="kj jj ht kf b fv kk kl l km kn">yo hyperledger-composer:angular</span></pre><p id="f0f3" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">当要求连接到正在运行的业务网络时，选择<strong class="kq hu">是</strong>。</p><p id="80ec" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">输入标准<code class="eh lk ll lm kf b">package.json</code>问题(项目名称、描述、作者姓名、作者电子邮件、许可证)</p><p id="f9e5" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">输入<code class="eh lk ll lm kf b">admin@tutorial-network</code>为业务网卡。</p><p id="72d3" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">选择<strong class="kq hu">连接到现有的REST API </strong></p><p id="bfab" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">输入<code class="eh lk ll lm kf b">http://localhost</code>作为REST服务器地址。</p><p id="77da" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">输入<code class="eh lk ll lm kf b">3000</code>作为服务器端口。</p><p id="5c65" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">选择<strong class="kq hu">不使用名称空间</strong></p><p id="b4df" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">流程如下</p><figure class="ka kb kc kd fq nj fe ff paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="fe ff nt"><img src="../Images/9ef37a440f08793c867d3491f05fbdda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fhv9g6_1Fq2LDh-c2gOQLw.png"/></div></div></figure><p id="8e07" class="pw-post-body-paragraph ko kp ht kq b kr md iu kt ku me ix kw kx mf kz la lb mg ld le lf mh lh li lj hm dt translated">NPM角度生成器将为项目创建脚手架并安装所有依赖项。要运行应用程序，导航到您的angular项目目录并运行<code class="eh lk ll lm kf b">npm start</code>。这将在<code class="eh lk ll lm kf b">http://localhost:4200</code>启动一个针对REST API运行的Angular 4应用程序。</p><figure class="ka kb kc kd fq nj fe ff paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="fe ff nu"><img src="../Images/cc8d5e0357e190f6368ad4fca81c0a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zF3GqJST3GDygd7pUBHhyQ.png"/></div></div></figure></div></div>    
</body>
</html>