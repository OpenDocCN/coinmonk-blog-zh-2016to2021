<html>
<head>
<title>Train, Planes &amp; Network Upgrades</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火车、飞机和网络升级</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/train-planes-network-upgrades-6edfc9f6b7dd?source=collection_archive---------0-----------------------#2019-10-23">https://medium.com/coinmonks/train-planes-network-upgrades-6edfc9f6b7dd?source=collection_archive---------0-----------------------#2019-10-23</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="67b3" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">以太坊1.x的常规发布节奏</h2></div><p id="85ef" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt ke translated">他的帖子是我和<a class="kn ko gr" href="https://medium.com/u/fc9328854053?source=post_page-----6edfc9f6b7dd--------------------------------" rel="noopener" target="_blank">丹诺·费林</a>在<a class="ae kp" href="https://devcon.org/" rel="noopener ugc nofollow" target="_blank">敌无双五世</a>演讲的粗略记录。它讨论了社区在过去一年中提出的一些EIPs流程改进，并将它们合并到一个框架中，以帮助我们更顺利地进行以太坊网络升级。</p><p id="3cb7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们把它命名为火车站模型。</p><h1 id="5d25" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">TL；博士:</h1><p id="b49f" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">我们提出了一种协调以太坊网络升级的新方法，这是基于过去一年中社区提出的一些建议。具体来说，我们认为:</p><ul class=""><li id="744a" class="ln lo ht jk b jl jm jo jp jr lp jv lq jz lr kd ls lt lu lv dt translated">升级应该每年进行两次，以便为社区提供可预测性；</li><li id="4797" class="ln lo ht jk b jl lw jo lx jr ly jv lz jz ma kd ls lt lu lv dt translated">升级应该只包含准备发货的EIP，任何仍在进行中的都应该转移到下一次升级，而不是推迟当前的升级；</li><li id="6a02" class="ln lo ht jk b jl lw jo lx jr ly jv lz jz ma kd ls lt lu lv dt translated">EIP应由工作组以独立的方式开发，并且只有在完成升级后才应考虑包含在升级中；</li><li id="0d7e" class="ln lo ht jk b jl lw jo lx jr ly jv lz jz ma kd ls lt lu lv dt translated">EIPs和工作组应该有一个拥护者，作为社区关于EIP的主要联系人。</li></ul><p id="bfab" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果你想进一步讨论这个提议，请到🧙的<a class="ae kp" href="https://ethereum-magicians.org/t/a-train-station-model-for-network-upgrades/3721" rel="noopener ugc nofollow" target="_blank">ethmagicians thread</a>来🏻‍♂️</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mb"><img src="../Images/ed8ba8d71224237ff7ed54666614b46d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H9gzJ0cNQVtEwVYzanwBoA.png"/></div></div></figure><p id="d370" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt ke translated"><span class="l kf kg kh bm ki kj kk kl km di"> L </span> et我们先从一点点“以太坊网络升级史”说起。第一批网络升级，Frontier，Homestead，Byzantium和Constantinople，有点像20世纪50年代的家庭度假:妈妈和爸爸会打包汽车，我们会跳上车，也许会带上我们最喜欢的玩具，他们会带我们安全到达目的地。</p><p id="535c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这是一个简化的复述，但是，对于那些升级，核心开发人员编写了大部分EIP，以太坊社区足够小，它们在某种程度上被有机地社会化到正确的人，forks顺利地发生了。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mn"><img src="../Images/c990555d0604abca71e377be6018ade1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v8W7GXlHNpmn-kBhCnVUKQ.png"/></div></div></figure><p id="2789" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">….除非他们没有！有几次，我们不得不救火。在那些场合，所有人都在甲板上。无论是上海的<a class="ae kp" href="https://www.coindesk.com/so-ethereums-blockchain-is-still-under-attack" rel="noopener ugc nofollow" target="_blank">攻击</a>、道的<a class="ae kp" href="https://www.coindesk.com/understanding-dao-hack-journalists" rel="noopener ugc nofollow" target="_blank">攻击</a>，还是君士坦丁堡发现的<a class="ae kp" rel="noopener" href="/chainsecurity/constantinople-enables-new-reentrancy-attack-ace4088297d9">最后一分钟漏洞</a>，社区总是一起提出修改建议，实施修改，并让用户及时升级他们的节点。</p></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mv"><img src="../Images/c31ce3cdfc9bf8b6ede2b7ce2a4e1b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Er-8PAluUrvzwk3uaDqCMw.png"/></div></div><figcaption class="mw mx fg fe ff my mz bd b be z ek">An Ethereum-colored waterfall</figcaption></figure><p id="a4ab" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然后来了<strong class="jk hu">伊斯坦布尔</strong>。到那时，我们已经很好地掌握了我们的过程，并决定更彻底地计划事情。我们为升级过程的每个阶段设定了一些截止日期，从EIPs提交一直到mainnet升级。在我们知道之前，我们正在看一个<a class="ae kp" href="https://eth.wiki/en/roadmap/istanbul#timeline" rel="noopener ugc nofollow" target="_blank">以太坊-瀑布过程</a>！</p><p id="5ab4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">正如我们所知，瀑布对于软件开发并不适用。但是，不管怎样，我们还是去了伊斯坦布尔。</p><p id="0ed2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们计划在一月份开始，花几个月的时间审查EIP，并在五月中旬接受最后期限，然后花两个月的时间为客户实现，这将使我们在七月中旬。完成所有这些后，我们可以在八月中旬进行测试网升级，并在十月中旬在mainnet上上线……比我们预计的devcon发布时间提前了两周。</p><p id="868d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">那么，我们实际上完成了多少个截止日期呢？一个。开球。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff na"><img src="../Images/5583050a0c4111a368ce3b76d09974b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oC3DnvHIb0T5sw0RI7lASw.png"/></div></div></figure></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><p id="0ddb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt ke translated">T4:在这个过程中，很多事情都出了差错。更重要的一点是，由于以太坊社区自上次升级以来已经有了很大的发展，当开始审查伊斯坦布尔的EIP时，核心开发人员不得不考虑30多个提案，而不是只有少数几个提案需要审查！</p><p id="89c2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这大大减慢了进程。不仅有许多EIP，而且它们处于完全不同的发展阶段(一些没有合并，而另一些运行着testnets ),并且有几个相互依赖或竞争的EIP。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mb"><img src="../Images/6679f14450c8d0f35285045c0e8ee013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Zs41srWNEQVVplhagKdfQ.png"/></div></div><figcaption class="mw mx fg fe ff my mz bd b be z ek">We couldn’t fit the full list of proposed Istanbul EIPs our my devcon slides using the font they gave us…</figcaption></figure><p id="e4cb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当我们得到伊斯坦布尔EIP的最终清单时，已经是仲夏了，也就是我们应该准备好客户端实现的时候。</p></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><p id="24c0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当这种情况发生时，许多人意识到这个过程远非最佳。有几个建议是关于我们如何使柏林，伊斯坦布尔之后的升级，运行得更顺畅。</p><p id="5a32" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们现在将检查其中的一些建议，然后将它们组合成我们所说的“火车站模型”。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff nb"><img src="../Images/91f2b58f433cdc03d8d2124e1fc4ae67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sknX3P5oObrFB7vR5xCreQ.png"/></div></div><figcaption class="mw mx fg fe ff my mz bd b be z ek">Berlin could be nice and sunny</figcaption></figure><h2 id="c18f" class="nc kr ht bd ks nd ne nf kw ng nh ni la jr nj nk lc jv nl nm le jz nn no lg np dt translated">Eth 1.x作为改变“过程”的尝试</h2><p id="aae5" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">第一个在伊斯坦布尔尝试解决流程问题的人是Alexey Akhunov。他写了<a class="ae kp" rel="noopener" href="/@akhounov/ethereum-1x-as-an-attempt-to-change-the-process-783efa23cf60">一篇博文</a>描述我们如何组建工作组，并使用<a class="ae kp" href="https://github.com/ethereum/retesteth" rel="noopener ugc nofollow" target="_blank"> ReTestEth </a>作为一种方式来增加可以为以太坊贡献协议改进的人数，同时也减轻现有核心开发人员的负担。</p><p id="3af7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">在“pre-1.x”流程中，提交的EIP将由主要来自Geth、Parity和Aleth的客户端开发人员实现。当这发生时，EIP将由这些团队协作改进。一旦客户就EIP的最终规格达成一致，就会产生参考测试。Aleth是唯一可以这样做的客户端，因此任何EIP都必须在Aleth中实现，以便生成这些测试。然后，EF的测试团队将运行测试，并编写所有客户都将运行的共识测试。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mb"><img src="../Images/5b4086b896df961d2dcd11f9f891550d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5TSmYwNQLOomAj-F_Erifw.png"/></div></div><figcaption class="mw mx fg fe ff my mz bd b be z ek">Images on the slide are taken from Alexey’s <a class="ae kp" rel="noopener" href="/@akhounov/ethereum-1x-as-an-attempt-to-change-the-process-783efa23cf60">original post</a></figcaption></figure><p id="1a6b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这个过程有几个瓶颈:实现的主要客户团队，生成参考测试的Aleth，以及编写一致测试的EF测试团队。</p><p id="b511" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">作为这种方法的替代方案，Alexey提出了建立工作组的想法。这些小组将由有着共同愿望去改善以太坊的一部分的人组成。他们可以在EIP的最早期阶段就开始工作，并帮助完善它，直到它的规格差不多是最终的。通过这种方式，客户端开发人员将使用相当先进的EIP，可能至少有一个初始实现，并且其公开的问题大部分已经得到了回答。</p><p id="b404" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">与此同时，由EF测试团队开发的新测试工具ReTestEth将使工作组能够通过任何支持它的客户端(目前是Geth、Aleth和Hyperledger Besu)为其EIP生成自己的参考测试。</p><p id="e1f7" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">因此，这个工作组框架不仅会使EIPs细化过程更加分散，而且还会减少测试方面的瓶颈。</p><h2 id="06fb" class="nc kr ht bd ks nd ne nf kw ng nh ni la jr nj nk lc jv nl nm le jz nn no lg np dt translated">EIP冠军</h2><p id="9744" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">在伊斯坦布尔之前，AllCoreDevs打电话给没有人在场的人谈论某个具体的EIP，这种情况并不少见。这不仅减慢了EIP的开发，而且在存在依赖关系或竞争的EIP的情况下，它将减慢整个升级的过程。</p><p id="d80b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Alex Beregszaszi在ETH 1.x柏林会议上提出了一个解决这个问题的简单想法，即要求EIP有一个冠军。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mb"><img src="../Images/ac535afa5a51ff83b9a49ff5189aabe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJUIALZfWQIcRlJe_UCDkA.png"/></div></div><figcaption class="mw mx fg fe ff my mz bd b be z ek">Props to <a class="ae kp" href="https://twitter.com/MPtherealMVP" rel="noopener ugc nofollow" target="_blank">MP</a> &amp; <a class="ae kp" href="https://twitter.com/bmann" rel="noopener ugc nofollow" target="_blank">Boris </a>for facilitating the workshop where this was discussed</figcaption></figure><p id="79bf" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">冠军的角色是与EIP相关的所有事情的联系人。他们充当EIP的协调人，负责确保事情向前发展，并确保适当的人参与正确的讨论。他们不负责做所有的工作，也不一定必须是实现者，但是他们应该是EIP的关键人物，并投入时间在社区内将其社会化。</p><h2 id="fe74" class="nc kr ht bd ks nd ne nf kw ng nh ni la jr nj nk lc jv nl nm le jz nn no lg np dt translated">以EIP为中心的分叉</h2><p id="c704" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">EF的<a class="ae kp" href="https://twitter.com/mhswende" rel="noopener ugc nofollow" target="_blank">马丁·霍尔斯特·斯温德</a>最近提出的另一个想法是修改我们的网络升级流程，使其更加以EIP为中心。</p><p id="2e41" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们不应该专注于升级本身，也不应该确保所有的EIP在升级的各个阶段都以相同的速度运行，我们应该专注于使EIP处于可运输的状态，然后，只有到那时，才安排EIP进行升级。</p><p id="1ff9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果有人想从mainnet的草案中获得EIP，这里是他们在这个框架下如何做的(引用自<a class="ae kp" href="https://notes.ethereum.org/@holiman/S1ELAYY7S?type=view" rel="noopener ugc nofollow" target="_blank">原始提案</a>、<em class="nq">并为了可读性做了一些小的编辑</em>):</p><blockquote class="nr ns nt"><p id="28ac" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated"><strong class="jk hu">第一步:获得ACD祝福</strong></p><p id="02fb" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">假设EIP存在(步骤0)，Allcoredevs将正式决定EIP是否“最初被接受”。</p><p id="2eee" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">“最初被接受”(或“被认可”)意味着ACD代表主要客户<em class="ht">和</em>生态系统利益相关者等。对EIP是积极的，会接受(写得很好的)PRs来将EIP包含到代码库中，这样它就可以被切换到测试…但没有实际的块号来激活</p></blockquote><p id="8d66" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这种“最初被接受”的状态对于像EF、ConsenSys甚至MolochDAO这样资助协议升级团队的组织来说也是一种有用的信号机制。资金可以分成几个阶段(即“初步接受”前和“初步接受”后)，以确保大部分资金用于极有可能在mainnet上运行的计划。</p><blockquote class="nr ns nt"><p id="308d" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated"><strong class="jk hu">第二步:实施</strong></p><p id="f62a" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">一旦ACD批准了，开发者和/或EIP作者就执行它，并针对客户制定PRs。</p><p id="358d" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">如果实现被<em class="ht">合并</em>到主要客户端，这个里程碑就完成了。</p><p id="8232" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated"><strong class="jk hu">第三步:测试用例</strong></p><p id="812a" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">由于该特性现在在客户端中是“可激活的”,因此现在可以为该特性生成跨客户端的测试用例。</p><p id="0fb3" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">测试用例应该包含愉快路径测试，和古怪/边缘案例测试。</p><p id="cd4e" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">此步骤应与许多不仅对EIP，而且对整个EVM都有深入了解的人一起执行，以最大限度地覆盖应被视为边缘案例的内容。</p><p id="e29e" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">此时，应完成安全审查，并将审查项目反馈给EIP，放在“安全考虑事项”下。审查还应该集中在寻找测试的边缘案例上。</p><p id="f98c" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">一旦测试团队认为测试完成，这个里程碑就完成了。</p><p id="aedc" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated"><strong class="jk hu">第四步:ACD最终验收。</strong></p><p id="0276" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">在这一点上，ACD可以再次讨论EIP，并评估EIP、实现、副作用、测试用例等。</p><p id="6bf4" class="ji jj nq jk b jl jm iu jn jo jp ix jq nu js jt ju nv jw jx jy nw ka kb kc kd hm dt translated">如果一切正常，ACD可以简单地决定何时激活EIP。</p></blockquote><blockquote class="nx"><p id="b947" class="ny nz ht bd oa ob oc od oe of og kd ek translated"><em class="oh">“是的，让我们一个月后在testnet上激活这个EIP(在块X)，两个月后在Mainnet上激活(在块Y)”。从现在起一周内，所有客户端将在下一个版本中包含升级，并且还包含通过命令行标志推迟EIP的功能。</em></p></blockquote><blockquote class="nr ns nt"><p id="7909" class="ji jj nq jk b jl oi iu jn jo oj ix jq nu ok jt ju nv ol jx jy nw om kb kc kd hm dt translated">如果发生多个EIP同时到达步骤4的情况，ACD可能会决定同时推出两个或三个——除非担心EIP可能具有内部依赖性/耦合，这可能会干扰(或导致测试的额外边缘情况)。</p></blockquote><p id="cf5c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">为了形象地表现这一新过程，<a class="ae kp" href="https://twitter.com/JHancock" rel="noopener ugc nofollow" target="_blank">詹姆斯·汉考克</a>制作了一张图片，展示了EIP将如何通过上述每个阶段进入mainnet。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff on"><img src="../Images/72a42b6530c1094be9c886dc4073d406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHg3gDSPOjgVD_28k0igUQ.png"/></div></div><figcaption class="mw mx fg fe ff my mz bd b be z ek">Thanks for the great graphic, James!</figcaption></figure><p id="8c86" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">使用这个框架将允许每个EIP按照自己的步调前进，将减少争论升级的时间和范围所花费的时间，并且将通过提供更可预测的EIP流来减轻测试团队的压力，而不是在升级截止日期到来时出现单个EIP突发。</p><h2 id="e53f" class="nc kr ht bd ks nd ne nf kw ng nh ni la jr nj nk lc jv nl nm le jz nn no lg np dt translated">EIP-1872年</h2><p id="b321" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">另一个有助于平稳以太网升级过程的想法是<a class="ae kp" href="https://eips.ethereum.org/EIPS/eip-1872" rel="noopener ugc nofollow" target="_blank"> EIP-1872 </a>，作者是<a class="kn ko gr" href="https://medium.com/u/13fa7b42fe5e?source=post_page-----6edfc9f6b7dd--------------------------------" rel="noopener" target="_blank">丹诺·费林</a>。随着越来越多的公司依赖以太坊作为其基础设施的核心部分，我们应该致力于使网络升级更可预测。</p><p id="4800" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">EIP提议对网络升级采用一个默认的时间表，类似于微软对<a class="ae kp" href="https://en.wikipedia.org/wiki/Patch_Tuesday" rel="noopener ugc nofollow" target="_blank">补丁星期二</a>所做的。通过这种方式，运行以太坊节点的人很有可能知道他们何时应该监控潜在的升级。</p><p id="e3af" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">简而言之，EIP提议:</p><ul class=""><li id="fae6" class="ln lo ht jk b jl jm jo jp jr lp jv lq jz lr kd ls lt lu lv dt translated">让mainnet升级默认在每月的第三个星期三进行，最好是在一月、四月、七月或十月，以避开大多数主要的美国和欧洲假期。</li><li id="a177" class="ln lo ht jk b jl lw jo lx jr ly jv lz jz ma kd ls lt lu lv dt translated">在升级延迟的情况下(如君士坦丁堡事件)，将升级推迟到每月的第三个星期三</li><li id="6c2e" class="ln lo ht jk b jl lw jo lx jr ly jv lz jz ma kd ls lt lu lv dt translated">现在的目标是每6个月对mainnet进行一次升级</li><li id="5a37" class="ln lo ht jk b jl lw jo lx jr ly jv lz jz ma kd ls lt lu lv dt translated"><strong class="jk hu">无论何时何地发生火灾，继续灭火</strong></li></ul><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mb"><img src="../Images/630481bdd8607f829ee47192b1bc7f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIfQSPZz-rqgvzVb0Hhe_Q.png"/></div></div></figure><p id="c46c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果发生特殊情况，这个EIP不会将我们锁定在这些日期，但会提供强大的默认设置，有助于减少下一次升级何时到来(从现在起6个月)的不确定性，从而减少核心开发人员尝试协调升级确切时间所花费的时间。</p><p id="15a2" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">它还在我们目前的方法和以EIP为中心的Forking提出的“一个EIP，一次升级”方法之间提供了一个“中间地带”。</p></div><div class="ab cl mo mp hb mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hm hn ho hp hq"><h1 id="2066" class="kq kr ht bd ks kt oo kv kw kx op kz la iz oq ja lc jc or jd le jf os jg lg lh dt translated">火车站模型</h1><p id="be28" class="pw-post-body-paragraph ji jj ht jk b jl li iu jn jo lj ix jq jr lk jt ju jv ll jx jy jz lm kb kc kd hm dt translated">结合上述建议的各个部分，我们得出了一个更接近火车站运作方式的流程，而不是我们当前的“更接近机场运作方式”。</p><p id="9fb9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">今天，我们的升级类似于购买机票:日期和时间是固定的，无论如何，我们都会努力让每个人都上飞机，特别是如果他们已经托运了行李，即使这会导致延误。</p><p id="e413" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我们相信，转向这样一种模式，即人们提着行李出现在火车站，准备出发，乘坐下一趟列车离开，将有助于使网络升级比现在顺利得多。</p><p id="017f" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">具体来说，这个火车站模型有四个主要组件。</p><p id="2126" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">首先是生态工业园应该独立发展。工作组可以努力推进他们的EIP，只有当它处于准备就绪的状态时，才会安排网络升级。</p><p id="bc39" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">第二是<strong class="jk hu"> EIPs &amp;工作组需要冠军</strong>。这些拥护者应该作为EIP的代表和默认联系人。他们负责在AllCoreDevs和其他论坛上代表它，可能是也可能不是实际的实现者。</p><p id="d56b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">第三是<strong class="jk hu">做的是什么船</strong>。当升级到来时，无论哪个EIP都准备好投入使用，它们都是升级的一部分。任何仍在进行中的事情都不会被安排在升级中。同样，如果最后一分钟出现了EIP问题，我们会将其转移到下一次升级，而不是推迟整个升级。</p><p id="3781" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">第四个也是最后一个要素是<strong class="jk hu">升级每年发生两次</strong>。通过设定6个月的升级间隔，我们可以减少从事EIP工作的团队的不确定性和延迟。通过这种方式，如果某个特定的升级中没有包含某些东西，那么几个月后就会有后续的升级。虽然升级日期是提前选定的，但测试网的特定块是在mainnet升级日期前8-10周选定的，mainnet块是在升级前4-6周选定的。</p><figure class="mc md me mf fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mb"><img src="../Images/3fe3b95ea5236548498b3d0866a4d38c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5FU4mclKyEfXvKBnlxGcw.png"/></div></div></figure><p id="d499" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">…这就是你想要的！我们希望这种模式能够为以太坊提供更加高效、可预测和频繁的网络升级。</p><p id="6164" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><em class="nq">特别感谢Alexey Akhunov、Alex Beregszaszi、María Paula Fernández、</em> <strong class="jk hu"> </strong> <em class="nq"> Boris Mann、Martin Holst Swende、James Hancock以及所有为我们如何改进以太坊升级方式提供建议的人。</em></p><figure class="mc md me mf fq mg fe ff paragraph-image"><a href="https://coincodecap.com"><div class="fe ff ot"><img src="../Images/673b3528e0b341cca62769c9baa632cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bcTJUjFtXf1QtlWzlS04XQ.jpeg"/></div></a></figure><blockquote class="nx"><p id="8587" class="ny nz ht bd oa ob oc od oe of og kd ek translated"><a class="ae kp" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="ov ow ox oy oz mg fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff ou"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>