<html>
<head>
<title>Introducing Crypto Composables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍加密组件</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/introducing-crypto-composables-ee5701fde217?source=collection_archive---------1-----------------------#2018-04-14">https://medium.com/coinmonks/introducing-crypto-composables-ee5701fde217?source=collection_archive---------1-----------------------#2018-04-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="0906" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">自从引入比特币以来，我们已经有了一个分布式账本上可替代资产的分散数字稀缺的可证明模型。可替换的:所有的单位都是相等的，当合并时，总和是不可区分的。第一批使用比特币网络模式的不可替代资产或契约是在2010年通过对<a class="ae jo" href="https://en.bitcoin.it/wiki/BitDNS" rel="noopener ugc nofollow" target="_blank"> BitDNS </a> / <a class="ae jo" href="https://en.wikipedia.org/wiki/Namecoin" rel="noopener ugc nofollow" target="_blank"> Namecoin </a>的讨论推出的，这是一种去中心化的DNS服务。现实世界资产的所有权后来由<a class="ae jo" href="https://en.bitcoin.it/wiki/Colored_Coins" rel="noopener ugc nofollow" target="_blank">彩色硬币</a>项目提出。我们现在有了一个虚拟不可替代资产的蓬勃发展的例子。<a class="ae jo" href="https://www.cryptokitties.co/" rel="noopener ugc nofollow" target="_blank"> Cryptokitties </a>建立在<a class="ae jo" href="http://ethereumfoundation.org/" rel="noopener ugc nofollow" target="_blank">以太坊</a>网络上；一种可编程的通用区块链。然而，并不是所有的资产，不管是虚拟的还是其他的，都可以很容易地用一个契约来表示，或者在以太坊征求意见的情况下，ERC- <a class="ae jo" href="https://github.com/ethereum/eips/issues/721" rel="noopener ugc nofollow" target="_blank"> 721 </a>，一个<a class="ae jo" rel="noopener" href="/crypto-currently/the-anatomy-of-erc721-e9db77abfc24">单一标识整数</a>。</p><blockquote class="jp"><p id="d70c" class="jq jr ht bd js jt ju jv jw jx jy jn ek translated"><a class="ae jo" href="https://coincodecap.com" rel="noopener ugc nofollow" target="_blank">发现并回顾最佳区块链软件</a></p></blockquote><figure class="ka kb kc kd ke kf fe ff paragraph-image"><div class="fe ff jz"><img src="../Images/804d791ae42c97af02cbe515c9220683.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*hst8vc0VHkdNR-ZdBh-qIA.gif"/></div><figcaption class="ki kj fg fe ff kk kl bd b be z ek">Cryptokitty lusting over Ether.</figcaption></figure><p id="94fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在买卖房屋时，官方的说法是，所有权是指土地，任何高于或低于土地的东西。但是，房子是你卖的；这是感知价值。土地的真正价值是作为一种升值的资产。可能的话，计划是拆除重建，或者单独出售房子。在所有其他的土地所有权交易中，房子，也许还有房子里的东西，将是销售的主要部分。买房变成了一个复杂的决定；一次所有权转让，代表以后可能被拆散的物品的组合。我们如何在区块链以太坊实现这一目标？</p><h1 id="47f9" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">输入加密组件</h1><p id="9cf4" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">任何不可替代令牌(NFT)拥有另一个不可替代ERC-721令牌或可替代ERC-20令牌的标准扩展。转移令牌组合意味着转移项目的整个层次结构。虚拟资产可以拥有自己的资产。例如，一只隐猫可能拥有一个抓挠柱和一个喂食盘；该盘可以包含一些可替换的“食物”代币。那是一只快乐且喂得很好的虚拟猫。</p><figure class="lq lr ls lt fq kf fe ff paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="fe ff lp"><img src="../Images/dfa166477f1b7f41cef7095a2b475cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fl_gNfmbI_njdKACE7EOTQ.jpeg"/></div></div><figcaption class="ki kj fg fe ff kk kl bd b be z ek">Remember Tamagotchi? Coming soon to a blockchain near your wallet?</figcaption></figure><p id="1567" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">隐猫最有趣的方面之一是繁殖功能。组合资产也可以提供基于“装备”子资产的动作。想象一下给一个虚拟角色添加一个食物资产，就像我们有食物代币的小猫。现在，小猫可以吃食物代币，加快繁殖休眠期，变得更有价值。本文讨论范围之外的一点是“活动资产”的建议标准，它允许可组合资产作用于其他资产、它们的子资产，或者使用基于子资产所有权的特殊动作。我们可以用可组合和可操作的资产来服务哪些其他游戏或业务用例？</p><h1 id="d3b1" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated"><a class="ae jo" href="https://github.com/ethereum/EIPs/issues/998" rel="noopener ugc nofollow" target="_blank"> ERC-998 </a>可组合NFTs</h1><p id="d931" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">如果没有示例实现，标准会是什么样的呢？在接下来的部分中，我将详细讨论这是如何工作的。</p><h2 id="8972" class="lz kn ht bd ko ma mb mc ks md me mf kw jb mg mh la jf mi mj le jj mk ml li mm dt translated">更新</h2><p id="96cf" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">由于区块链的发展速度相当快，我在更新帖子的这一部分，解释ERC-998的功能部分，以反映最新的资源、规范和参考实现:</p><p id="71d6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-998.md" rel="noopener ugc nofollow" target="_blank"> EIP-998主</a>在那里你会找到最新的规格。</p><p id="42b5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">Composables-998 是一个最新的参考实现。</p><h2 id="077c" class="lz kn ht bd ko ma mb mc ks md me mf kw jb mg mh la jf mi mj le jj mk ml li mm dt translated"><a class="ae jo" rel="noopener" href="/coinmonks/crypto-composables-building-blocks-and-applications-65902709298c">用例发布</a></h2><h2 id="ffe1" class="lz kn ht bd ko ma mb mc ks md me mf kw jb mg mh la jf mi mj le jj mk ml li mm dt translated">原始详细解释</h2><p id="93f9" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">接下来是对原始帖子中基本概念的高度概括。固体代码已被删除，以免混淆读者。</p><p id="5672" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">“父”将指可组合的ERC-721(现在是<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/998" rel="noopener ugc nofollow" target="_blank"> ERC-998 </a>)令牌，“子”将指可组合的拥有的任何ERC-721或ERC-20令牌。</p><p id="e37d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">ERC-998所需的映射是从可组合的父tokenId到子协定地址和无符号整数之间的另一个映射。当父级拥有不可替换的子令牌时，子契约地址映射到父级可能拥有的子令牌id。当父令牌拥有可替换令牌时，子契约地址映射到子令牌的余额。对于ERC-721儿童，我们跟踪代币id，对于ERC-20，我们跟踪代币金额。这种内部簿记将有助于确保不拥有父母的人不能转移孩子。</p><p id="bbb1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这两种情况下，子令牌在其契约中的实际拥有地址是可组合的ERC-998契约。该映射允许我们通过父令牌ID实施父子关系和所有权。如果发送方也拥有父令牌ID，则只有<em class="ly">子令牌能够从合同中转移</em>。一个主要的警告是，你必须相信可组合的ERC-998契约没有<em class="ly">也没有</em>任意转移联系人技术上拥有的子令牌的能力。</p><h1 id="a324" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">添加孩子</h1><p id="49ad" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">ERC-998合同需要得到子令牌的批准，这样它才能使用<code class="eh mn mo mp mq b">transferFrom(owner, to, tokenId)</code>函数。此功能允许父代将所有权从当前所有者(将子代添加到父代的用户)转移到父代智能合同。</p><p id="2af3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">或者，您可以直接从ERC-721和ERC-223转移，并使用可选的<code class="eh mn mo mp mq b">bytes</code>字段来指示您希望转移到ERC-998合同中的哪个NFT。这导致只有一个事务来移动一个可组合的。</p><p id="63ee" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦完成并成功返回，父节点就将子节点添加到内部映射中。这将允许我们在以后转移孩子时加强父子关系。</p><h1 id="1d5f" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">转移不可替换的ERC-721儿童</h1><p id="bd24" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">转移可组合资产的子资产可以被认为是<em class="ly">资产分解</em>。为了转移不可替换的子令牌，我们需要知道<em class="ly">我们要将令牌转移给谁</em>以及拥有子令牌的父令牌的ID，以强制实施所有权；最后，我们需要子合同地址和子令牌ID。使用此信息，我们首先检查以下内容:</p><ul class=""><li id="de7e" class="mr ms ht is b it iu ix iy jb mt jf mu jj mv jn mw mx my mz dt translated">函数调用的发送者拥有父令牌，这是ERC-721规范中实现为<code class="eh mn mo mp mq b">_owns(address, tokenId)</code>的标准方法</li><li id="19d1" class="mr ms ht is b it na ix nb jb nc jf nd jj ne jn mw mx my mz dt translated">我们已经实现了<strong class="is hu"> rootOwnerOf </strong>，如果存在可组合令牌的层次结构，它将实际检查谁拥有父令牌ID</li><li id="2fc1" class="mr ms ht is b it na ix nb jb nc jf nd jj ne jn mw mx my mz dt translated">父令牌ID通过子契约地址映射到子令牌ID，从而加强父子关系</li></ul><p id="a392" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一旦这些都准备好了，我们可以调用子契约的转移函数，如果我们的转移成功，我们将子映射设置为0，反映子资产不再属于父资产。这被称为<em class="ly">分解</em>资产。</p><h1 id="a15c" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">转移可替换的ERC-20儿童</h1><p id="3bf1" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">如上例所示，如果满足两个条件，我们可以转移孩子:</p><ul class=""><li id="4e6a" class="mr ms ht is b it iu ix iy jb mt jf mu jj mv jn mw mx my mz dt translated">函数调用的发送方拥有父令牌ID</li><li id="9bfe" class="mr ms ht is b it na ix nb jb nc jf nd jj ne jn mw mx my mz dt translated">父代币拥有足够的可替换子代币余额，以便转移该金额</li></ul><p id="5cfd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">第二个条件是在多个父母拥有相同类型代币的情况下，防止父母过度花费子代币。同样，所有子资产都归父令牌的合同地址所有，而不是直接归父令牌本身所有。如果一切正常，并且转移成功，我们将转移令牌，并减少子映射中的子令牌数量。</p><figure class="lq lr ls lt fq kf"><div class="bz el l di"><div class="nf ng l"/></div><figcaption class="ki kj fg fe ff kk kl bd b be z ek">Making use of “chow” tokens.</figcaption></figure><h1 id="c363" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">摘要</h1><p id="be08" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated">我已经提出了可组合NFT的新标准，<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/998" rel="noopener ugc nofollow" target="_blank"> ERC-998 </a>。该标准允许ERC-998令牌拥有ERC-998、ERC-721和ERC-20令牌。这允许标准以太坊资产被组合成复杂的组合，并使用单次转移进行交易。基于特定子令牌的存在，可以向NFT添加额外的功能，并且这些功能是开放供探索的。我相信，不可替代和可替代资产的标准接口将被组合并提供动作，这是以太坊社区要探索的一个令人兴奋的新领域，我期待看到未来的工作。</p><p id="96b4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">原GitHub发布:<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/998" rel="noopener ugc nofollow" target="_blank"> ERC-998可组合不可替换令牌标准</a></p><p id="1e8a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">谢谢你纵容我。</p><p id="289c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">【medium.com/@mattdlockyer<br/><a class="ae jo" href="https://twitter.com/mattdlockyer" rel="noopener ugc nofollow" target="_blank">twitter.com/mattdlockyer</a><br/><a class="ae jo" href="https://linkedin.com/in/mattlockyer" rel="noopener ugc nofollow" target="_blank">linkedin.com/in/mattlockyer</a></p><p id="9f1e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">更新</strong></p><p id="bf32" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-998.md" rel="noopener ugc nofollow" target="_blank"> EIP-998 Master </a>是您可以找到最新规格的地方。</p><p id="d984" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/mattlockyer/composables-998/" rel="noopener ugc nofollow" target="_blank"> Composables-998 </a>是一个最新的参考实现。</p><p id="f7a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">感谢<a class="nh ni gr" href="https://medium.com/u/ca7b1065d06a?source=post_page-----ee5701fde217--------------------------------" rel="noopener" target="_blank">尼克·穆奇</a>，<a class="nh ni gr" href="https://medium.com/u/c8b1419b5d28?source=post_page-----ee5701fde217--------------------------------" rel="noopener" target="_blank">小猫咪</a>，<a class="nh ni gr" href="https://medium.com/u/4f05d7e799e0?source=post_page-----ee5701fde217--------------------------------" rel="noopener" target="_blank">法比亚诺·PS</a>，<a class="nh ni gr" href="https://medium.com/u/f1cb98e196bc?source=post_page-----ee5701fde217--------------------------------" rel="noopener" target="_blank">特伦特·麦康纳</a></p><figure class="lq lr ls lt fq kf"><div class="bz el l di"><div class="nj ng l"/></div></figure><h1 id="b13e" class="km kn ht bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">参考</h1><p id="9311" class="pw-post-body-paragraph iq ir ht is b it lk iv iw ix ll iz ja jb lm jd je jf ln jh ji jj lo jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/ethereum/EIPs" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs</a></p><p id="2b64" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener ugc nofollow" target="_blank">https://github . com/ether eum/EIPs/blob/master/EIPS/EIP-721 . MD</a></p><div class="nk nl fm fo nm nn"><a href="https://github.com/ethereum/eips/issues/721" rel="noopener  ugc nofollow" target="_blank"><div class="no ab ej"><div class="np ab nq cl cj nr"><h2 class="bd hu fv z el ns eo ep nt er et hs dt translated">ERC:不可替换令牌标准发行#721以太坊/EIPs</h2><div class="nu l"><h3 class="bd b fv z el ns eo ep nt er et ek translated">该提案已被接受并合并为一个标准草案，请查看官方跟踪版本…</h3></div><div class="nv l"><p class="bd b gc z el ns eo ep nt er et ek translated">github.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kg nn"/></div></div></a></div><figure class="lq lr ls lt fq kf"><div class="bz el l di"><div class="oc ng l"/></div></figure></div></div>    
</body>
</html>