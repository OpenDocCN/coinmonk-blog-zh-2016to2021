<html>
<head>
<title>Ethereum: Setting Up A Private Blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊:建立私有区块链</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/ethereum-setting-up-a-private-blockchain-67bbb96cf4f1?source=collection_archive---------0-----------------------#2018-04-22">https://medium.com/coinmonks/ethereum-setting-up-a-private-blockchain-67bbb96cf4f1?source=collection_archive---------0-----------------------#2018-04-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="99b2" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">环境设置</h1><ol class=""><li id="2773" class="jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dt translated">为本练习创建一个工作文件夹/目录。它将用于保存二进制文件和配置文件。</li><li id="5f63" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb kc kd ke kf dt translated">访问<a class="ae kl" href="https://geth.ethereum.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Go Ethereum (geth) </a>网站，下载适用于您的操作系统的二进制文件。(在您阅读本文时，版本可能已经更改)。</li></ol><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff km"><img src="../Images/014dfc178b47853a6791bc8e8a94f9b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*2NAiqyD3HKaWaDflBVTAoA.png"/></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">Geth Website showing supported operating systems</figcaption></figure><p id="7949" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">3.解压并复制geth二进制文件到你的工作文件夹</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff lp"><img src="../Images/72b8a58118508daf7f41b3c8c6d31494.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*W4fAGADfeuqF49NvlaLXmA.png"/></div></figure><p id="d9e2" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">geth二进制文件是<a class="ae kl" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊</a>的运行时，要运行它，你需要通过配置文件给出一些信息。我将在下一步中详细介绍配置文件。</p><p id="99ed" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">要运行专用网络，您需要向geth提供创建初始块所需的一些基本信息</p><figure class="kn ko kp kq fq kr"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="e9ba" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">让我们研究一下配置文件</p><p id="73d1" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu">配置</strong>:这是主区块链配置，它有以下属性</p><p id="abb3" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu"> chainId </strong>:链标识符，必须是整数。它还用于防止<a class="ae kl" href="https://www.youtube.com/watch?v=Ar97HbWLijU" rel="noopener ugc nofollow" target="_blank">重放攻击</a>。在本教程中，我将不再赘述重放附加。</p><p id="05a3" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">还有许多其他属性，如<strong class="jq hu"> homesteadBlock </strong>和<strong class="jq hu"> eip155Block </strong>可以添加到配置中，但是它们只/大部分与主网络相关，所以我们现在忽略它们。<a class="ae kl" href="https://ethereum.stackexchange.com/questions/15682/the-meaning-specification-of-config-in-genesis-json/15687" rel="noopener ugc nofollow" target="_blank">此</a>链接提供了更多详细信息。</p><p id="3426" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu"> alloc </strong>:用于将ETH分配给地址，即预基金账户。</p><p id="d425" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu"> coinbase </strong>:也叫etherbase，是默认的主账户。如果没有设置这个值，您将会得到一个警告，但是现在可以安全地忽略它，您可以在以后设置它。</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/3470184dd51a41ccf33c4bb6c6c63c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*AHd5CWaItI0dOA9hOXwxZw.png"/></div></figure><p id="d094" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">难度:这决定了开采一个区块的难度。对于私有区块链，最好将其设置为较低的数字，以确保快速挖掘块，这最终会转化为更快的事务。</p><p id="9b26" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu"> extraData </strong>:屏蔽多余数据，如果没有提供，默认为客户端版本。</p><p id="f8f9" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu"> gasLimit </strong>:这规定了每个区块可以使用的最大气体量。该值越高，一个块中可以容纳的事务就越多。</p><p id="97b2" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu"> mixHash </strong>:与新的专用网络无关，设置为0</p><p id="71a6" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><strong class="jq hu">括号</strong>:与新的专用网络无关，设置为0</p><h1 id="ae43" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">让我们点燃它</h1><p id="97b4" class="pw-post-body-paragraph ky kz ht jq b jr js lb lc jt ju le lf jv lt lh li jx lu lk ll jz lv ln lo kb hm dt translated">geth需要两个主要参数，一个存储链数据的文件夹(即本地数据库)和一个初始化文件。</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="0f80" class="mb ir ht lx b fv mc md l me mf">geth <strong class="lx hu">--datadir</strong> ./datadir <strong class="lx hu">init</strong> init.json</span></pre><p id="61d7" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">输出应该类似于下面的屏幕截图</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mg"><img src="../Images/4388f23d152683ccd8962c799459b7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2WXEpx8F-VQg5aeXfgM9w.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">Initialisation console output</figcaption></figure><p id="2f88" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">您还应该注意到在您的工作文件夹下创建了一个datadir文件夹，它的内容应该类似于下面的截图</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/8898ccf5e9f9e658febf8f2559bda060.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*y94bFd7nO_8bubMz6o7G5g.png"/></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">Local Blockchain Folder</figcaption></figure><p id="53b3" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">在这一点上，你有一个私人<a class="ae kl" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊区块链</a>运行。现在好戏开始了。你需要做的第一件事就是在区块链上创建一个账户。</p><h1 id="f6c0" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">创建帐户</h1><p id="af94" class="pw-post-body-paragraph ky kz ht jq b jr js lb lc jt ju le lf jv lt lh li jx lu lk ll jz lv ln lo kb hm dt translated">创建帐户有两种方法，通过geth命令或使用geth控制台。我们稍后将使用geth控制台。</p><p id="38eb" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">要使用geth命令创建帐户，请运行</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="9bf7" class="mb ir ht lx b fv mc md l me mf">geth <strong class="lx hu">--datadir</strong> ./datadir <strong class="lx hu">account </strong>new</span></pre><p id="2537" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">系统将提示您输入密码。记下密码，你以后会用到它。创建后，新帐户的地址将打印在控制台中，如下所示。</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mm"><img src="../Images/110fb555fd7df3a2d94cf1c26f8699c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jrtl3pdyUhj6B2Ww00cndg.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">New Account Console Dialogue</figcaption></figure><p id="dbba" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">更重要的是，您会注意到keystore文件夹中的一个文件，其中包含私钥和其他关于所创建帐户的信息。</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff mn"><img src="../Images/a84b2afb4e1173d1379e21bc7ca55256.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*u-9MS5Rk9Yn-mztMfFiz5w.png"/></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">New Account File</figcaption></figure><p id="8105" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">它为每个新创建的帐户创建一个文件。如果再次运行create account命令，您会注意到keystore文件夹中有一个新文件。</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mo"><img src="../Images/b3f19bd464f01e854e2b2ea527f139bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6MV2uLCduFKZ3fFUIWsOg.png"/></div></div></figure><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/093017aeba4758c80b00268a06a2816f.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*E5Rno_1rVuQ7qnEZbKngMg.png"/></div></figure><p id="f919" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">需要注意的一件重要的事情是，帐户是离线生成的，并且网络上没有人知道地址/帐户，直到它们被包括在网络上的交易中。</p><p id="35b2" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">因此，为了让网络知道这些地址，我们需要将它们包含在一个事务中，并将该事务包含到一个块中。让我们通过运行这个命令来启动geth控制台。</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="67ed" class="mb ir ht lx b fv mc md l me mf">geth --<strong class="lx hu">datadir</strong> ./datadir <strong class="lx hu">console</strong></span></pre><p id="346f" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">控制台有许多库，您可以使用它们与区块链进行交互。我们将使用的第一个库是<em class="mq"> eth </em>。</p><p id="4ee1" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">以下是eth库提供的功能的子集。在你的主机上试试吧。</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="917b" class="mb ir ht lx b fv mc md l me mf"><strong class="lx hu">eth.accounts</strong> // returns the list of accounts on this blockchain</span><span id="2974" class="mb ir ht lx b fv mr md l me mf"><strong class="lx hu">eth.getBalance(eth.accounts[0])</strong> // returns the balance of the  first account. </span><span id="c19b" class="mb ir ht lx b fv mr md l me mf"><strong class="lx hu">eth.blockNumber</strong> // returns the current block number. 0 for a new blockchain</span></pre><p id="153f" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">如果你查看你已经创建的账户余额，你会注意到它们的余额都是0，但是要在以太坊区块链上做任何有趣的事情，你需要以太。所以我们去采矿吧。</p><h1 id="9d74" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">采矿</h1><p id="7eee" class="pw-post-body-paragraph ky kz ht jq b jr js lb lc jt ju le lf jv lt lh li jx lu lk ll jz lv ln lo kb hm dt translated">要采矿，您将使用矿工库。开始采矿运行</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="ab66" class="mb ir ht lx b fv mc md l me mf">miner.start(1) // 1 means run one mining thread</span></pre><p id="6b9e" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">您的控制台输出应该类似于</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff ms"><img src="../Images/d020ec4ad04113841681bd19c14f5a2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ps53umWQiMINZlcvHXDzDA.png"/></div></div></figure><p id="a085" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">停止采矿运行</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="c4d1" class="mb ir ht lx b fv mc md l me mf">miner.stop()</span></pre><p id="f970" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">开采成功后，开采出来的乙醚去了哪里？默认情况下，它被分配给在区块链上创建的第一个帐户。此外，作为挖掘过程的一部分，将会创建新的块并将其添加到区块链中(大部分是空的，因为您尚未发送任何事务)。如果您检查第一个地址<strong class="jq hu">eth . get balance(eth . accounts[0])</strong>和当前块号<strong class="jq hu"> eth.blockNumber </strong>的帐户余额，您会注意到它们都不再是0。</p><h1 id="5a10" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">发送以太网</h1><p id="51e8" class="pw-post-body-paragraph ky kz ht jq b jr js lb lc jt ju le lf jv lt lh li jx lu lk ll jz lv ln lo kb hm dt translated">如果您只创建了一个帐户，则创建第二个帐户。运行<strong class="jq hu">eth . get balance(<em class="mq">address</em>’)</strong>确认该账户余额，然后发送一些乙醚使用</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="3089" class="mb ir ht lx b fv mc md l me mf"><em class="mq">eth.sendTransaction({from:”address”, to:”address”, value: web3.toWei(amount, "ether")})</em></span><span id="cfa8" class="mb ir ht lx b fv mr md l me mf"><em class="mq">e.g. eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[1], value: web3.toWei(4, "ether")})</em></span></pre><p id="f04d" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">如果您尝试运行该示例，将会得到一个身份验证错误。在你从账户转账之前，出于明显的原因，你需要先解锁账户。在这种情况下，要解锁发件人帐户，我们将使用个人库。运行下面的命令</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="18f0" class="mb ir ht lx b fv mc md l me mf">personal.unlockAccount(eth.accounts[0], "password")</span></pre><p id="4194" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">如果帐户成功解锁，则应该返回true。尝试再次发送乙醚并检查两个帐户的余额。</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="bf6b" class="mb ir ht lx b fv mc md l me mf"><em class="mq">eth.sendTransaction({from:eth.accounts[0], to:eth.accounts[1], value: web3.toWei(4, "ether")})</em></span></pre><p id="5a22" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">最后一个命令应该返回事务的散列。在我的例子中，它返回了"<strong class="jq hu">0x f 94 ECE 7d 159 bcc 750862 b 92396 e0d 98 c 537593 BFA 2 ECB 3 a 21 EC 49 b 0d 439592 EB</strong>"。</p><p id="0934" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">你会认为<strong class="jq hu">eth . get balance(eth . accounts[1])</strong>是4，对吗？它将返回0，因为交易还没有被添加到区块链中。</p><p id="e3f9" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">此外，如果您检查发送者的余额，您会注意到也没有改变。为了使该交易生效，即账户余额反映新值，需要将该交易添加到一个块中，并将该块添加到区块链中，即开采。所以，让我的。</p><p id="cea5" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">运行<strong class="jq hu"> miner.start() </strong>，然后运行<strong class="jq hu"> miner.stop() </strong></p><p id="6285" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">如果查看控制台输出，您会注意到挖掘的第一个块有一个事务。如果您检查发送方和接收方的余额，它们应该都显示预期值。</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mt"><img src="../Images/8b5f6cd72bf276207959d157fd93293c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MDy1vcpyXqnq1C0vpw7ieA.png"/></div></div></figure><p id="d757" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">您可以做的另一件有趣的事情是，通过运行</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="60ba" class="mb ir ht lx b fv mc md l me mf">eth.getTransaction("<em class="mq">transactionId</em>")<br/>e.g. eth.getTransaction("0xf94ece7d159bcc750862b92396e0d98c537593bfa2ecb3a21ec49b0d439592eb")</span></pre><p id="63c1" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">如果已经挖掘了一个事务，那么getTransaction应该返回类似于</p><figure class="kn ko kp kq fq kr"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="d3e8" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">这提供了关于交易的许多信息。在这里，您可以通过运行</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="c477" class="mb ir ht lx b fv mc md l me mf">eth.getBlock("<em class="mq">blockAddress</em>")<br/>e.g. eth.getBlock("0x1420da4e3dc647c651135b6d2f617e7046fc748c0321c567cec5e92df352ff54")</span></pre><p id="e8a8" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">getBlock输出应该类似于</p><figure class="kn ko kp kq fq kr"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="c977" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">大多数值应该是不言自明的。</p><h1 id="15bb" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated"><em class="mu">添加更多对等点/节点</em></h1><p id="b210" class="pw-post-body-paragraph ky kz ht jq b jr js lb lc jt ju le lf jv lt lh li jx lu lk ll jz lv ln lo kb hm dt translated">如果geth控制台仍在运行，请退出它，然后重新启动，但这一次需要提供一个networkid</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="fc68" class="mb ir ht lx b fv mc md l me mf"><em class="mq">geth --datadir ./datadir --networkid 2018 console</em></span></pre><p id="0c2a" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">最后一步只是用一个networkid重新启动了旧的区块链。</p><p id="4748" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><em class="mq">要添加新节点，请在新终端中运行以下命令</em></p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="af21" class="mb ir ht lx b fv mc md l me mf">geth <strong class="lx hu">--datadir</strong> ./datadir_new <strong class="lx hu">init</strong> init.json</span></pre><p id="b8be" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">这里需要注意两件重要的事情。</p><ol class=""><li id="9708" class="jo jp ht jq b jr la jt ld jv mv jx mw jz mx kb kc kd ke kf dt translated">您必须使用相同的init.json文件</li><li id="9d99" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb kc kd ke kf dt translated">您必须使用不同的datadir文件夹。数据目录实际上是区块链的数据库/本地副本，每个节点都需要有自己的副本。</li></ol><p id="1fcd" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">现在运行新节点，确保使用相同的网络id。您还需要指定端口。默认端口已被第一个节点使用。您需要添加<strong class="jq hu"> nodiscover </strong>来确保节点是可发现的，这不是必需的，但这是一个好的实践。</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="9c09" class="mb ir ht lx b fv mc md l me mf"><em class="mq">geth --</em><strong class="lx hu"><em class="mq">datadir</em></strong><em class="mq"> ./datadir_new --</em><strong class="lx hu"><em class="mq">networkid</em></strong><em class="mq"> 2018 --</em><strong class="lx hu"><em class="mq">port</em></strong><em class="mq"> 30306 --</em><strong class="lx hu"><em class="mq">nodiscover</em></strong><em class="mq"> console</em></span></pre><p id="492e" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">在第二个节点的控制台中(您可以使用任何一个)，运行<code class="eh my mz na lx b">admin.nodeInfo</code>您应该会得到类似如下的内容</p><figure class="kn ko kp kq fq kr"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="e601" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">复制enode属性的值，并在控制台的第一个节点运行</p><pre class="kn ko kp kq fq lw lx ly lz aw ma dt"><span id="5722" class="mb ir ht lx b fv mc md l me mf">admin.addPeer(enode://f7aa5b604056ff77dc561034f12874586b44b4a00e92355e7f750cfb43717ef1d0092f208b08661b209656d09540b11f6d0c6667a611674f7a75b718424d0c9a@[::]:30306?discport=0")</span></pre><p id="e589" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated"><em class="mq">如果成功，该函数返回true，但这并不意味着节点添加成功。要确认运行</em> <code class="eh my mz na lx b"><em class="mq">admin.peers</em></code> <em class="mq">，您应该会看到刚刚添加的节点的详细信息</em></p><figure class="kn ko kp kq fq kr"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="362b" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">如果您通过运行<code class="eh my mz na lx b">miner.start(1)</code>在第一个节点上开始挖掘，您会注意到第二个节点上的块深度/数量增加了。</p><p id="5ef2" class="pw-post-body-paragraph ky kz ht jq b jr la lb lc jt ld le lf jv lg lh li jx lj lk ll jz lm ln lo kb hm dt translated">希望这对你有用。在下一篇教程中，我们将探索智能合同。</p><blockquote class="nb"><p id="fc4c" class="nc nd ht bd ne nf ng nh ni nj nk kb ek translated">加入Coinmonks <a class="ae kl" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae kl" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae kl" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p></blockquote><h2 id="15d6" class="mb ir ht bd is nl nm nn iw no np nq ja jv nr ns je jx nt nu ji jz nv nw jm nx dt translated">另外，阅读</h2><ul class=""><li id="20fb" class="jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb ny kd ke kf dt translated"><a class="ae kl" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae kl" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></li><li id="723e" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae kl" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></li><li id="874f" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae kl" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="f33b" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae kl" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></li><li id="47a8" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">面向开发人员的最佳加密API</a></li><li id="b359" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated">最佳<a class="ae kl" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></li><li id="9487" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币的终极指南</a></li><li id="3310" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/ascendex-staking" rel="noopener ugc nofollow" target="_blank">AscendEx Staking</a>|<a class="ae kl" href="https://coincodecap.com/bot-ocean-review" rel="noopener ugc nofollow" target="_blank">Bot Ocean Review</a>|<a class="ae kl" href="https://coincodecap.com/bitcoin-wallets-india" rel="noopener ugc nofollow" target="_blank">最佳比特币钱包</a></li><li id="15e5" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/bitget-review" rel="noopener ugc nofollow" target="_blank"> Bitget回顾</a> | <a class="ae kl" href="https://coincodecap.com/gemini-vs-blockfi" rel="noopener ugc nofollow" target="_blank">双子vs区块链</a> | <a class="ae kl" href="https://coincodecap.com/okex-futures-trading" rel="noopener ugc nofollow" target="_blank"> OKEx期货交易</a></li><li id="c009" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/crypto-trading-bots-in-the-us" rel="noopener ugc nofollow" target="_blank">美国最佳加密交易机器人</a> | <a class="ae kl" href="https://coincodecap.com/changelly-review" rel="noopener ugc nofollow" target="_blank">经常性回顾</a></li><li id="7716" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/crypto-arbitrage-in-india" rel="noopener ugc nofollow" target="_blank">在印度利用加密套利赚取被动收入</a></li><li id="92d8" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/huobi-review" rel="noopener ugc nofollow" target="_blank">霍比审核</a> | <a class="ae kl" href="https://coincodecap.com/okex-margin-trading" rel="noopener ugc nofollow" target="_blank"> OKEx保证金交易</a> | <a class="ae kl" href="https://coincodecap.com/futures-trading" rel="noopener ugc nofollow" target="_blank">期货交易</a></li><li id="d179" class="jo jp ht jq b jr kg jt kh jv ki jx kj jz kk kb ny kd ke kf dt translated"><a class="ae kl" href="https://coincodecap.com/sparrow-exchange-review" rel="noopener ugc nofollow" target="_blank">麻雀交换评论</a> | <a class="ae kl" href="https://coincodecap.com/nash-exchange-review" rel="noopener ugc nofollow" target="_blank">纳什交换评论</a></li></ul></div></div>    
</body>
</html>