<html>
<head>
<title>Build a smart contract that transfers ERC20 token from your wallet to other ERC20 compliant wallet- Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ„å»ºä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œå°†æ‚¨çš„ç”µå­é’±åŒ…ä¸­çš„ERC20ä»¤ç‰Œè½¬ç§»åˆ°å…¶ä»–ERC20å…¼å®¹ç”µå­é’±åŒ…-ç¬¬1éƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/coinmonks/build-a-smart-contract-that-transfers-erc20-token-from-your-wallet-to-other-addresses-or-erc20-ee8dc35f40f6?source=collection_archive---------0-----------------------#2018-07-31">https://medium.com/coinmonks/build-a-smart-contract-that-transfers-erc20-token-from-your-wallet-to-other-addresses-or-erc20-ee8dc35f40f6?source=collection_archive---------0-----------------------#2018-07-31</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="fe ff iq"><img src="../Images/40e2de927ad67f12fd9caed7ce737670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*uByMsj92sG_u-IOl.gif"/></div></figure><h2 id="295f" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">æ¦‚è§‚</h2><p id="bea2" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†æ„å»ºä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œç”¨äºå°†ERC20ä»¤ç‰Œè½¬ç§»åˆ°ä»»ä½•ERC20å…¼å®¹çš„é’±åŒ…ï¼ŒåŒ…æ‹¬å…ƒæ©ç å’Œäº¤æ¢åœ°å€ã€‚æœ¬æ•™ç¨‹ä¸­æ˜¾ç¤ºçš„æ–¹æ³•æ˜¯forkdeltaç­‰åˆ†æ•£å¼äº¤æ¢æ‰€ä½¿ç”¨çš„æ–¹æ³•çš„ç®€åŒ–ç‰ˆæœ¬ã€‚åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ç¼–å†™å’Œæµ‹è¯•æ™ºèƒ½å¥‘çº¦ï¼Œåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Reactjsæ„å»ºUIã€‚</p><blockquote class="kq"><p id="f0df" class="kr ks ht bd kt ku kv kw kx ky kz kp ek translated"><a class="ae la" href="https://coincodecap.com/category/wallets" rel="noopener ugc nofollow" target="_blank">å‘ç°å¹¶å›é¡¾æœ€ä½³åŠ å¯†é’±åŒ…</a></p></blockquote><h2 id="23e2" class="ix iy ht bd iz ja lb jc jd je lc jg jh ji ld jk jl jm le jo jp jq lf js jt ju dt translated">æˆ‘ä¼šå­¦åˆ°ä»€ä¹ˆï¼Ÿ</h2><p id="a005" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">æ‚¨å°†å­¦ä¹ å¦‚ä½•ç¼–å†™å’Œæµ‹è¯•ä¸€ä¸ªæ™ºèƒ½å¥‘çº¦ï¼Œè¯¥å¥‘çº¦å¯ä»¥å°†ä»¤ç‰Œä»æ‚¨çš„é’±åŒ…è½¬ç§»åˆ°å…¶ä»–ERC20å…¼å®¹åœ°å€ã€‚</p><ul class=""><li id="ffd1" class="lg lh ht jx b jy li kc lj ji lk jm ll jq lm kp ln lo lp lq dt translated">åˆ†æ•£å¼äº¤æ˜“æ‰€å­˜å–ç‰¹å¾æœºåˆ¶å¦‚ä½•å·¥ä½œ</li><li id="3274" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">å¦‚ä½•åœ¨solidityä¸­ç¼–å†™æ™ºèƒ½åˆåŒæ¥è½¬ç§»ERC20ä»¤ç‰Œ</li><li id="e43e" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">æµ‹è¯•æ‚¨çš„æ™ºèƒ½åˆçº¦å¹¶é€šè¿‡truffleæ§åˆ¶å°ä¸ä¹‹äº¤äº’</li></ul><h2 id="1c9a" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">è¦æ±‚</h2><p id="75b8" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">æœ¬æ•™ç¨‹å¯¹Dappsåˆå­¦è€…å¹¶ä¸å‹å¥½ï¼Œæ‰€ä»¥å»ºè®®ä½ å…ˆäº†è§£ä¸€ä¸‹ERC20ä»¤ç‰Œçš„å·¥ä½œåŸç†ï¼Œå¹¶å…·å¤‡ç¼–å†™solidityä»£ç çš„åŸºæœ¬çŸ¥è¯†ã€‚</p><p id="338c" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">å‡ºäºæœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œéœ€è¦åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£…ä»¥ä¸‹è½¯ä»¶ã€‚</p><ul class=""><li id="9586" class="lg lh ht jx b jy li kc lj ji lk jm ll jq lm kp ln lo lp lq dt translated">Trufflesuite <a class="ae la" href="https://github.com/trufflesuite/truffle" rel="noopener ugc nofollow" target="_blank">å®‰è£…æŒ‡å—åœ¨æ­¤</a></li><li id="45c2" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">Ganache <a class="ae la" href="https://github.com/trufflesuite/ganache/releases" rel="noopener ugc nofollow" target="_blank">ç§äººåŒºå—é“¾æœåŠ¡å™¨</a></li><li id="3a1f" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">ä¸ºchromeã€firefoxã€operaå®‰è£…Metamask <a class="ae la" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"/></li></ul><p id="300c" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æœ¬æ•™ç¨‹å‡è®¾æ‚¨ä½¿ç”¨çš„æ˜¯<em class="lz"> UNIXæ“ä½œç³»ç»Ÿ</em></p><h2 id="76ff" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">å†™æˆ‘ä»¬çš„åˆåŒ</h2><figure class="mb mc md me fq iu fe ff paragraph-image"><div class="fe ff ma"><img src="../Images/997cc3a39682d7aa6ed0111fcdf8e9d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/0*CZWVBw7MOdLL99bw.png"/></div></figure><p id="a54f" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æ­¤å›¾è¯´æ˜äº†è¯¥æµç¨‹çš„å·¥ä½œæ­¥éª¤ã€‚</p><ul class=""><li id="c961" class="lg lh ht jx b jy li kc lj ji lk jm ll jq lm kp ln lo lp lq dt translated">é¦–å…ˆï¼Œå‘ä»¥å¤ªç½‘å‘å¸ƒä¸€ä¸ªERC20ä»¤ç‰Œ</li><li id="a6b8" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">ä»¤ç‰Œè¢«åˆ†é…ä¸€ä¸ªçº¦å®šåœ°å€å¹¶å…·æœ‰ä¸€ä¸ªABI</li><li id="d2a3" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">æŒæœ‰ä»¤ç‰Œçš„åœ°å€æ‰¹å‡†ä»£è¡¨å…¶æ¶ˆè´¹çš„åˆåŒ</li><li id="9b28" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">ç„¶åï¼ŒåˆåŒå°†ä»¤ç‰Œå‘é€åˆ°æ¥æ”¶åœ°å€</li></ul><p id="b5c8" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">å¤Ÿæ¸…æ¥šäº†ï¼ï¼</p><h2 id="daa3" class="ix iy ht bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju dt translated">è¯´å¤Ÿäº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹ç¼–ç </h2><p id="5a4b" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å‡è®¾æ‚¨å·²ç»å®‰è£…äº†æ‰€æœ‰çš„éœ€æ±‚ï¼Œæ‰€ä»¥å¯åŠ¨<em class="lz"> Ganache </em>ç„¶åå¯¼èˆªåˆ°æ‚¨çš„å·¥ä½œç›®å½•å¹¶åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†å…¶å‘½åä¸º<em class="lz"> TokenZendR </em>ã€‚ä»æ‚¨çš„ç»ˆç«¯å¯¼èˆªåˆ°<em class="lz"> TokenZendR </em>ç›®å½•ï¼Œå¹¶è¿è¡Œå‘½ä»¤<code class="eh mf mg mh mi b">truffle init</code>ï¼Œæ‚¨ç°åœ¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºã€‚</p><figure class="mb mc md me fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff mj"><img src="../Images/6bb4d539ef60645bca2557375c5ca9a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vct1jkNcaV1pG4uR.png"/></div></div></figure><p id="f34c" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åœ¨ä»»ä½•ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€é¡¹ç›®ç›®å½•ï¼Œæˆ‘æ›´å–œæ¬¢åœ¨æ¿€æ´»solidityæ’ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨PhpStorm(æˆ‘å¾ˆå–œæ¬¢è¿™ä¸ªç¼–è¾‘å™¨)ã€‚åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<em class="lz"> package.json </em>æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°å…¶ä¸­ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="aba3" class="ix iy ht mi b fv ms mt l mu mv">{  <br/>  "dependencies": {  <br/>  "babel-register": "^6.23.0",  <br/>  "babel-polyfill": "^6.26.0",  <br/>  "babel-preset-es2015": "^6.18.0"  <br/>  },  <br/>  "devDependencies": {  <br/>  "openzeppelin-solidity": "^1.10.0",  <br/>  "chai": "^4.1.2",  <br/>  "chai-as-promised": "^7.1.1",  <br/>  "chai-bignumber": "^2.0.2"  <br/>  }  <br/>}</span></pre><p id="457f" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æ¥ä¸‹æ¥æ‰“å¼€truffle.jsé¡¹ç›®ï¼Œç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢å®ƒ</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="2882" class="ix iy ht mi b fv ms mt l mu mv">require('babel-register');  <br/>require('babel-polyfill');  <br/>  <br/>module.exports = {  <br/>  networks: {  <br/>  development: {  <br/>  host: "127.0.0.1",  <br/>  port: 7545,  <br/>  network_id: "*" // Match any network id  <br/>  }  <br/> }};</span></pre><p id="742c" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ä»é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ§åˆ¶å°è¿è¡Œ<code class="eh mf mg mh mi b">npm install</code>æ¥å®‰è£…package.jsonä¸­æŒ‡å®šçš„æ‰€æœ‰åŒ…ã€‚</p><p id="3c8b" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæ‚¨çš„<em class="lz"> package.json </em>ä¸­éœ€è¦ä¾èµ–é¡¹ã€‚åœ¨ç¼–å†™æˆ‘ä»¬çš„æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦<em class="lz"> babel </em>å’Œ<em class="lz"> chai </em>ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†éœ€è¦æ‰©å±•<em class="lz">ERC 20</em>open zeppelin-solidityæ¡†æ¶çš„ä»¤ç‰Œå¥‘çº¦æ¥å£ã€‚</p><p id="9fb6" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ä¸ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæœ¬æ•™ç¨‹åˆ›å»ºä¸¤ä¸ª<em class="lz"> ERC20 </em>ä»¤ç‰Œæ™ºèƒ½åˆçº¦ï¼Œå¹¶å°†å®ƒä»¬éƒ¨ç½²åœ¨æˆ‘ä»¬çš„ç§æœ‰åŒºå—é“¾(<em class="lz"> Ganache </em>)ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æµ‹è¯•æˆ‘ä»¬çš„ä»¤ç‰Œå‘é€è€…åˆçº¦ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•è®¿é—®æˆ‘ä»¬ç½‘ç»œ(<em class="lz"> 5777 </em>)å¤–éƒ¨å·²ç»éƒ¨ç½²çš„ä»¤ç‰Œï¼Œä¾‹å¦‚<em class="lz"> testnet </em>ã€mainnet</p><p id="51ee" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åœ¨è”ç³»äººæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶BearToken.solå’ŒCubToken.solï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°å…¶ä¸­ã€‚</p><p id="43df" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><code class="eh mf mg mh mi b">BearToken.sol</code></p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="9f2a" class="ix iy ht mi b fv ms mt l mu mv">pragma solidity ^0.4.19;  <br/>  <br/>import "openzeppelin-solidity/contracts/token/ERC20/StandardToken.sol";  <br/>import "openzeppelin-solidity/contracts/ownership/Ownable.sol";  <br/>  <br/>/**  <br/>* @title BearToken is a basic ERC20 Token  <br/>*/  <br/>contract BearToken is StandardToken, Ownable{  <br/>  <br/>  uint256 public totalSupply;  <br/>  string public name;  <br/>  string public symbol;  <br/>  uint32 public decimals;  <br/>  <br/>  /**  <br/> * @dev assign totalSupply to account creating this contract */  constructor() public {  <br/>  symbol = "BEAR";  <br/>  name = "BearToken";  <br/>  decimals = 5;  <br/>  totalSupply = 100000000000;  <br/>  <br/>  owner = msg.sender;  <br/>  balances[msg.sender] = totalSupply;  <br/>  <br/>  emit Transfer(0x0, msg.sender, totalSupply);  <br/> }}</span></pre><p id="fbf6" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è¿™åªæ˜¯ä¸€ä¸ªERC20 token BearTokenï¼Œç¬¦å·ä¸º<em class="lz"> BEAR </em>ï¼Œæ€»ä¾›åº”é‡ä¸º1000äº¿ï¼Œæ€»ä¾›åº”é‡åˆ†é…ç»™å¥‘çº¦çš„åˆ›å»ºè€…ã€‚å®ƒæ‰©å±•äº†<em class="lz"> StandardToken </em>å’Œ<em class="lz"> Ownable </em>å¥‘çº¦ã€‚</p><p id="c8f0" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><code class="eh mf mg mh mi b">Cub.sol</code></p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="3517" class="ix iy ht mi b fv ms mt l mu mv">pragma solidity ^0.4.19;  <br/>  <br/>import "openzeppelin-solidity/contracts/token/ERC20/StandardToken.sol";  <br/>import "openzeppelin-solidity/contracts/ownership/Ownable.sol";  <br/>  <br/>/**  <br/>* @title BearToken is a basic ERC20 Token  <br/>*/  <br/>contract CubToken is StandardToken, Ownable{  <br/>  <br/>  uint256 public totalSupply;  <br/>  string public name;  <br/>  string public symbol;  <br/>  uint32 public decimals;  <br/>  <br/> /**  <br/> * @dev assign totalSupply to account creating this contract <br/> */  <br/> constructor() public {  <br/>  symbol = "CUB";  <br/>  name = "CubToken";  <br/>  decimals = 5;  <br/>  totalSupply = 100000000000;  <br/>  <br/>  owner = msg.sender;  <br/>  balances[msg.sender] = totalSupply;  <br/>  <br/>  emit Transfer(0x0, msg.sender, totalSupply);  <br/> }}</span></pre><p id="bbb5" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è¿™åªæ˜¯ä¸€ä¸ªERC20 token CubTokenï¼Œç¬¦å·ä¸º<em class="lz"> CUB </em>ï¼Œæ€»ä¾›åº”é‡ä¸º1000äº¿ï¼Œæ€»ä¾›åº”é‡åˆ†é…ç»™åˆåŒçš„åˆ›å»ºè€…ã€‚å®ƒæ‰©å±•äº†<em class="lz"> StandardToken </em>å’Œ<em class="lz"> Ownable </em>å¥‘çº¦ã€‚</p><p id="e243" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è®©æˆ‘ä»¬ä¸ºè¿™ä¸¤ä¸ªåˆåŒæ·»åŠ è¿ç§»ã€‚æŒ‰ä»¥ä¸‹é¡ºåºè¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="6975" class="ix iy ht mi b fv ms mt l mu mv">truffle console</span><span id="7f70" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; create migration bear_token_migration </span><span id="fef4" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; create migration cub_token_migration</span></pre><p id="c8b7" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ä¸Šé¢çš„å‘½ä»¤å°†ä¸ºæˆ‘ä»¬çš„ä¸¤ä¸ªåˆåŒåˆ›å»ºä¸¤ä¸ªè¿ç§»æ–‡ä»¶ï¼Œæ ¼å¼ä¸º<em class="lz">{ timestamp } _ bear _ token _ migration . js</em>å’Œ<em class="lz">{ timestamp } _ cub _ token _ migration . js</em>ã€‚æ¥ä¸‹æ¥ç”¨è¿™ä¸ªæ›¿æ¢ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚</p><p id="3804" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><code class="eh mf mg mh mi b">*{timestamp}_bear_token_migration.js*</code></p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="c2f1" class="ix iy ht mi b fv ms mt l mu mv">let BearToken = artifacts.require("./BearToken.sol");  <br/>  <br/>module.exports = function(deployer) {  <br/>  deployer.deploy(BearToken);  <br/>};</span></pre><p id="1991" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><code class="eh mf mg mh mi b">*{timestamp}_cub_token_migration.js*</code></p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="edd1" class="ix iy ht mi b fv ms mt l mu mv">let CubToken = artifacts.require("./CubToken.sol");  <br/>  <br/>module.exports = function(deployer) {  <br/>  deployer.deploy(CubToken);  <br/>};</span></pre><p id="eb31" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†é‚£ä¸ªé›†åˆï¼Œç»§ç»­ç¼–è¯‘å’Œè¿ç§»æ‚¨çš„å¥‘çº¦ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="d69f" class="ix iy ht mi b fv ms mt l mu mv">truffle(development)&gt; compile</span><span id="066e" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; migrate</span></pre><figure class="mb mc md me fq iu fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/84911f3a317dc24985cde52f2ce000be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/0*a2tDpMnY__X1gUtG.png"/></div></figure><p id="b8ec" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ä¸Šå›¾æ˜¾ç¤ºä¸¤ä¸ªåˆåŒéƒ½å·²ç»ç¼–è¯‘å¹¶éƒ¨ç½²åœ¨ç½‘ç»œä¸Šï¼Œä½ çš„é¡¹ç›®ç›®å½•ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ªåŒ…å«<em class="lz"> json </em>æ–‡ä»¶çš„<code class="eh mf mg mh mi b">build</code>æ–‡ä»¶å¤¹ï¼Œä»”ç»†æŸ¥çœ‹å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šå‘ç°å®ƒåŒ…å«åˆåŒçš„<em class="lz"> abi </em>å’Œç¼–è¯‘æˆå­—èŠ‚ç çš„itä»£ç ä»¥åŠå…¶ä»–ä¸€äº›ä¿¡æ¯ã€‚</p><p id="4ff2" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¸ºä¸¤ä¸ªå¥‘çº¦ç¼–å†™æµ‹è¯•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä»æ§åˆ¶å°å¼€å§‹ç ”ç©¶å¥‘çº¦ã€‚å½“ä½ åœ¨ç¼–å†™æµ‹è¯•å’Œä¿®å¤bug(å¦‚æœéœ€è¦çš„è¯)ä¹‹å‰ä¸ä½ çš„åˆåŒè¿›è¡Œäº¤äº’æ—¶ï¼Œå®ƒä¼šç»™ä½ æ›´å¤šçš„ä¿¡å¿ƒã€‚åœ¨æ§åˆ¶å°ä¸Šè®°å½•ä¸¤ä¸ªåˆåŒçš„åˆåŒåœ°å€å¾ˆé‡è¦</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="78da" class="ix iy ht mi b fv ms mt l mu mv">BearToken: 0xeec918d74c746167564401103096d45bbd494b74<br/>CubToken: 0xecfcab0a285d3380e488a39b4bb21e777f8a4eac</span></pre><p id="6fc8" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è®©æˆ‘ä»¬ç®€å•åœ°æ£€æŸ¥<em class="lz"> BearToken </em>çš„åç§°ã€ç¬¦å·å’Œæ€»ä¾›åº”é‡ï¼Œå¹¶è®°å½•åˆåŒåˆ›å»ºè€…çš„ä½™é¢ï¼Œè®°ä½åœ¨æˆ‘ä»¬çš„åˆåŒä¸­ï¼Œæˆ‘ä»¬å°†æ€»ä¾›åº”é‡è®°å…¥åˆåŒåˆ›å»ºè€…è´¦æˆ·ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="38f9" class="ix iy ht mi b fv ms mt l mu mv">truffle(development)&gt; Bear = BearToken.at("0xeec918d74c746167564401103096d45bbd494b74")</span><span id="0844" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; Bear.name()</span><span id="8555" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; Bear.totalSupply()</span><span id="62e9" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; Bear.balanceOf(web3.eth.accounts[0])</span></pre><figure class="mb mc md me fq iu fe ff paragraph-image"><div class="fe ff my"><img src="../Images/3a2443181b5549ad6f172216645fe66a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*_gvO-hsgJrPP6oen.png"/></div></figure><p id="359b" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">å¥½è¿ğŸ‘Œ</p><p id="ea40" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ª<em class="lz"> ERC20 </em>ä»¤ç‰Œè¦æµ‹è¯•ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬åˆ›å»ºå¤„ç†ä¼ è¾“çš„<em class="lz"> TokenZendR </em>å¥‘çº¦ã€‚</p><p id="129e" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åˆ›å»ºä¸€ä¸ªæ–°åˆåŒï¼Œ<em class="lz"> TokenZendR.sol </em></p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="b9f9" class="ix iy ht mi b fv ms mt l mu mv">pragma solidity ^0.4.23;  <br/>  <br/>import "openzeppelin-solidity/contracts/token/ERC20/ERC20.sol";  <br/>import "openzeppelin-solidity/contracts/lifecycle/Pausable.sol";  <br/>  <br/>contract TokenZendR is Ownable, Pausable {</span><span id="dea3" class="ix iy ht mi b fv mw mt l mu mv">}</span></pre><p id="4c14" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è¯¥å¥‘çº¦æ‰©å±•äº†openzeppelinåº“ä¸­çš„Ownableå’ŒPausableå¥‘çº¦ï¼Œæ‚¨å°†å¾ˆå¿«çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨çš„è¿™äº›å¥‘çº¦ä¸­çš„æ–¹æ³•ã€‚</p><p id="961e" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><em class="lz"> ERC20.sol </em>æ˜¯æ‰€æœ‰<em class="lz"> ERC20 </em>å…¼å®¹ä»¤ç‰Œå¿…é¡»å®ç°çš„<em class="lz"> ERC20 </em>æ ‡å‡†æ¥å£ï¼Œè¯¦è§<a class="ae la" href="https://github.com/ethereum/EIPs/issues/20" rel="noopener ugc nofollow" target="_blank">https://github.com/ethereum/EIPs/issues/20</a>ã€‚</p><p id="829e" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æ¥ä¸‹æ¥å®šä¹‰ä¿å­˜æ¯æ¬¡ä¼ è¾“çš„æ•°æ®ç»“æ„ï¼Œç”¨å®ƒæ›´æ–°åˆåŒã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="d868" class="ix iy ht mi b fv ms mt l mu mv">/**  <br/>* @dev Details of each transfer  <br/>* @param contract_ contract address of ER20 token to transfer  <br/>* @param to_ receiving account  <br/>* @param amount_ number of tokens to transfer to_ account  <br/>* @param failed_ if transfer was successful or not  <br/>*/  <br/>struct Transfer {  <br/>  address contract_;  <br/>  address to_;  <br/>  uint amount_;  <br/>  bool failed_;  <br/>}</span></pre><p id="4101" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æ·»åŠ ä¸€ä¸ªæ˜ å°„ï¼Œä¿å­˜æ¯ä¸ªç”¨æˆ·åœ¨<em class="lz">äº‹åŠ¡</em>æ•°ç»„ä¸Šçš„æ‰€æœ‰ä¼ è¾“ç´¢å¼•ï¼Œå…¶ä¸­æ¯ä¸ªç”¨æˆ·åœ°å€éƒ½æ˜¯ä¸€ä¸ªæ‰€æœ‰äº‹åŠ¡ç´¢å¼•æ•°ç»„çš„é”®ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="3f0e" class="ix iy ht mi b fv ms mt l mu mv">/**  <br/>* @dev a mapping from transaction ID's to the sender address  <br/>* that initiates them. Owners can create several transactions  <br/>*/  <br/>mapping(address =&gt; uint[]) public transactionIndexesToSender;</span><span id="a361" class="ix iy ht mi b fv mw mt l mu mv">/**  <br/>* @dev a list of all transfers successful or unsuccessful  <br/>*/  <br/>Transfer[] public transactions;</span></pre><p id="7792" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªaddressç±»å‹çš„æ‰€æœ‰è€…å±æ€§ï¼Œå®ƒä¿å­˜å¯åŠ¨è¯¥å¥‘çº¦çš„åœ°å€ï¼Œè€Œä»¤ç‰Œå°†ä¿å­˜å¥‘çº¦æ”¯æŒä¼ è¾“çš„æ‰€æœ‰<em class="lz"> ERC20 </em>ä»¤ç‰Œçš„åœ°å€ã€‚</p><p id="d4e8" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯è¿™äº›æ¼‚äº®çš„ä»£ç </p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="4ee7" class="ix iy ht mi b fv ms mt l mu mv">ERC20 public ERC20Interface;</span></pre><p id="dbfd" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è¿™äº›å®ç°äº†<em class="lz"> ERC20 </em>æ¥å£ï¼Œå…è®¸æˆ‘ä»¬åœ¨ä½¿ç”¨ä»¤ç‰Œå¥‘çº¦åœ°å€æ—¶è°ƒç”¨æ–¹æ³•<code class="eh mf mg mh mi b">approve</code>å’Œ<code class="eh mf mg mh mi b">transferFrom</code>ã€‚è¿™å°†åœ¨æœ¬æ•™ç¨‹åé¢çš„<em class="lz"> transferToken </em>æ–¹æ³•ä¸­å˜å¾—æ›´åŠ æ¸…æ™°ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="d092" class="ix iy ht mi b fv ms mt l mu mv">address public owner;  <br/>  <br/>/**  <br/>* @dev list of all supported tokens for transfer  <br/>* @param string token symbol  <br/>* @param address contract address of token  <br/>*/  <br/>mapping(bytes32 =&gt; address) public tokens;  <br/>  <br/>ERC20 public ERC20Interface;</span></pre><p id="271a" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">ä¼ è¾“æˆåŠŸæˆ–å¤±è´¥æ—¶å‘å‡ºçš„äº‹ä»¶</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="6b4b" class="ix iy ht mi b fv ms mt l mu mv">/**  <br/>* @dev Event to notify if transfer successful or failed  <br/>* after account approval verified  <br/>*/  <br/>event TransferSuccessful(address indexed from_, address indexed to_, uint256 amount_);  <br/>  <br/>event TransferFailed(address indexed from_, address indexed to_, uint256 amount_);</span></pre><p id="ec5f" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åœ¨æœ¬åˆåŒä¸­ï¼Œæˆ‘ä»¬ä¸»è¦æƒ³åšä¸‰ä»¶äº‹ï¼Œå³:</p><ul class=""><li id="6f3a" class="lg lh ht jx b jy li kc lj ji lk jm ll jq lm kp ln lo lp lq dt translated">æ·»åŠ æ­¤åˆåŒæ”¯æŒçš„æ–°ä»¤ç‰Œçš„åœ°å€</li><li id="19ca" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">å¦‚æœæˆ‘ä»¬å¯ä»¥æ·»åŠ ä»¤ç‰Œï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½å¤Ÿåˆ é™¤å®ƒ</li><li id="1a6e" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">æœ€åæ˜¯è½¬è®©æƒï¼Œè¿™æ˜¯æœ¬åˆåŒè¦å±¥è¡Œçš„ä¸»è¦å†…å®¹ã€‚</li></ul><p id="f06a" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æˆ‘ä»¬ä¹Ÿè®¸å¯ä»¥è€ƒè™‘å¢åŠ ä¸€ä¸ªä»åˆåŒä¸­æå–èµ„é‡‘çš„æ”¯ä»˜æ–¹æ³•ï¼Œä»¥é˜²æœ‰äººè§‰å¾—æ…ˆå–„â€¦ğŸ˜‰</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="9d01" class="ix iy ht mi b fv ms mt l mu mv">/**  <br/>* @dev add address of token to list of supported tokens using  <br/>* token symbol as identifier in mapping  <br/>*/  <br/>function addNewToken(bytes32 symbol_, address address_) public onlyOwner returns (bool) {  <br/>  tokens[symbol_] = address_;  <br/>  <br/>  return true;  <br/>}  <br/>  <br/>/**  <br/>* @dev remove address of token we no more support  <br/>*/  <br/>function removeToken(bytes32 symbol_) public onlyOwner returns (bool) {  <br/>  require(tokens[symbol_] != 0x0);  <br/>  <br/>  delete(tokens[symbol_]);  <br/>  <br/>  return true;  <br/>}  <br/>  <br/>/**  <br/>* @dev method that handles transfer of ERC20 tokens to other address  <br/>* it assumes the calling address has approved this contract  <br/>* as spender  <br/>* @param symbol_ identifier mapping to a token contract address  <br/>* @param to_ beneficiary address  <br/>* @param amount_ numbers of token to transfer  <br/>*/  <br/>function transferTokens(bytes32 symbol_, address to_, uint256 amount_) public whenNotPaused{  <br/>  require(tokens[symbol_] != 0x0);  <br/>  require(amount_ &gt; 0);  <br/>  <br/>  address contract_ = tokens[symbol_];  <br/>  address from_ = msg.sender;  <br/>  <br/>  ERC20Interface = ERC20(contract_);  <br/>  <br/>  uint256 transactionId = transactions.push(  <br/>  Transfer({  <br/>  contract_:  contract_,  <br/>        to_: to_,  <br/>        amount_: amount_,  <br/>        failed_: true  <br/>  })  <br/> );  <br/>  transactionIndexesToSender[from_].push(transactionId - 1);  <br/>  <br/>  if(amount_ &gt; ERC20Interface.allowance(from_, address(this))) {  <br/>  emit TransferFailed(from_, to_, amount_);  <br/>  revert();  <br/> }  <br/>  ERC20Interface.transferFrom(from_, to_, amount_);  <br/>  <br/>  transactions[transactionId - 1].failed_ = false;  <br/>  <br/>  emit TransferSuccessful(from_, to_, amount_);  <br/>}  <br/>  <br/>/**  <br/>* @dev allow contract to receive funds  <br/>*/  <br/>function() public payable {}  <br/>  <br/>/**  <br/>* @dev withdraw funds from this contract  <br/>* @param beneficiary address to receive ether  <br/>*/  <br/>function withdraw(address beneficiary) public payable onlyOwner whenNotPaused {  <br/>  beneficiary.transfer(address(this).balance);  <br/>}</span></pre><h1 id="64fe" class="mz iy ht bd iz na nb nc jd nd ne nf jh ng nh ni jl nj nk nl jp nm nn no jt np dt translated">æŠŠæ‰€æœ‰çš„æ”¾åœ¨ä¸€èµ·</h1><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="b730" class="ix iy ht mi b fv ms mt l mu mv">pragma solidity ^0.4.23;  <br/>  <br/>import "openzeppelin-solidity/contracts/token/ERC20/ERC20.sol";  <br/>import "openzeppelin-solidity/contracts/lifecycle/Pausable.sol";  <br/>  <br/>contract TokenZendR is Ownable, Pausable {  <br/>  <br/>  /**  <br/> * @dev Details of each transfer * @param contract_ contract address of ER20 token to transfer * @param to_ receiving account * @param amount_ number of tokens to transfer to_ account * @param failed_ if transfer was successful or not */  struct Transfer {  <br/>  address contract_;  <br/>  address to_;  <br/>  uint amount_;  <br/>  bool failed_;  <br/> }  <br/>  /**  <br/> * @dev a mapping from transaction ID's to the sender address * that initiates them. Owners can create several transactions */  mapping(address =&gt; uint[]) public transactionIndexesToSender;  <br/>  <br/>  <br/>  /**  <br/> * @dev a list of all transfers successful or unsuccessful */  Transfer[] public transactions;  <br/>  <br/>  address public owner;  <br/>  <br/>  /**  <br/> * @dev list of all supported tokens for transfer * @param string token symbol * @param address contract address of token */  mapping(bytes32 =&gt; address) public tokens;  <br/>  <br/>  ERC20 public ERC20Interface;  <br/>  <br/>  /**  <br/> * @dev Event to notify if transfer successful or failed * after account approval verified */  event TransferSuccessful(address indexed from_, address indexed to_, uint256 amount_);  <br/>  <br/>  event TransferFailed(address indexed from_, address indexed to_, uint256 amount_);  <br/>  <br/>  constructor() public {  <br/>  owner = msg.sender;  <br/> }  <br/>  /**  <br/> * @dev add address of token to list of supported tokens using * token symbol as identifier in mapping */  function addNewToken(bytes32 symbol_, address address_) public onlyOwner returns (bool) {  <br/>  tokens[symbol_] = address_;  <br/>  <br/>  return true;  <br/> }  <br/>  /**  <br/> * @dev remove address of token we no more support */  function removeToken(bytes32 symbol_) public onlyOwner returns (bool) {  <br/>  require(tokens[symbol_] != 0x0);  <br/>  <br/>  delete(tokens[symbol_]);  <br/>  <br/>  return true;  <br/> }  <br/>  /**  <br/> * @dev method that handles transfer of ERC20 tokens to other address * it assumes the calling address has approved this contract * as spender * @param symbol_ identifier mapping to a token contract address * @param to_ beneficiary address * @param amount_ numbers of token to transfer */  function transferTokens(bytes32 symbol_, address to_, uint256 amount_) public whenNotPaused{  <br/>  require(tokens[symbol_] != 0x0);  <br/>  require(amount_ &gt; 0);  <br/>  <br/>  address contract_ = tokens[symbol_];  <br/>  address from_ = msg.sender;  <br/>  <br/>  ERC20Interface = ERC20(contract_);  <br/>  <br/>  uint256 transactionId = transactions.push(  <br/>  Transfer({  <br/>  contract_:  contract_,  <br/>            to_: to_,  <br/>            amount_: amount_,  <br/>            failed_: true  <br/>  })  <br/> );  <br/>  transactionIndexesToSender[from_].push(transactionId - 1);  <br/>  <br/>  if(amount_ &gt; ERC20Interface.allowance(from_, address(this))) {  <br/>  emit TransferFailed(from_, to_, amount_);  <br/>  revert();  <br/> }  <br/>  ERC20Interface.transferFrom(from_, to_, amount_);  <br/>  <br/>  transactions[transactionId - 1].failed_ = false;  <br/>  <br/>  emit TransferSuccessful(from_, to_, amount_);  <br/> }  <br/>  /**  <br/> * @dev allow contract to receive funds */  function() public payable {}  <br/>  <br/>  /**  <br/> * @dev withdraw funds from this contract * @param beneficiary address to receive ether */  function withdraw(address beneficiary) public payable onlyOwner whenNotPaused {  <br/>  beneficiary.transfer(address(this).balance);  <br/> }}</span></pre><h1 id="ab98" class="mz iy ht bd iz na nb nc jd nd ne nf jh ng nh ni jl nj nk nl jp nm nn no jt np dt translated">ç¼–å†™æˆ‘ä»¬çš„æµ‹è¯•</h1><p id="a4b1" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">å¦‚æœä½ è¿˜åœ¨æ¾éœ²æ§åˆ¶å°ä¸Šï¼Œè¿è¡Œ<code class="eh mf mg mh mi b">create test</code>å‘½ä»¤æˆ–è¿”å›å‘½ä»¤<code class="eh mf mg mh mi b">truffle console</code>ï¼Œè¿è¡Œå¦‚ä¸‹æ‰€ç¤ºçš„å‘½ä»¤åˆ›å»ºä¸¤ä¸ªæµ‹è¯•æ–‡ä»¶ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="d235" class="ix iy ht mi b fv ms mt l mu mv">truffle(development)&gt; create test token_management</span><span id="98fa" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; create test token_transfer</span></pre><p id="2987" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">å¦‚æœæ‚¨æ£€æŸ¥æ‚¨çš„é¡¹ç›®<code class="eh mf mg mh mi b">test</code>ï¼Œæ‚¨çš„ä¸¤ä¸ªæµ‹è¯•æ–‡ä»¶å°†ä¼šç”¨ä¸€ä¸ªé»˜è®¤æ–­è¨€åˆ›å»ºã€‚æ‰“å¼€<code class="eh mf mg mh mi b">token_management.js</code>æ–‡ä»¶ï¼Œæ¸…é™¤å½“å‰å†…å®¹ï¼Œç„¶åå¯¼å…¥æ–‡ä»¶å¼€å¤´çš„chaiå’ŒåˆåŒã€‚</p><p id="f015" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><strong class="jx hu"> PS: </strong>ä¸ºäº†é¿å…åœ¨è¿è¡Œæ‚¨çš„ç¬¬ä¸€ä¸ªæµ‹è¯•æ—¶é‡åˆ°é”™è¯¯ï¼Œä¹Ÿæ¸…ç©º<em class="lz"> token_transfer.js </em>çš„å†…å®¹ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="ea79" class="ix iy ht mi b fv ms mt l mu mv">const TokenZendR = artifacts.require('./TokenZendR.sol');  <br/>  <br/>const should = require('chai')  <br/> .use(require('chai-as-promised'))  <br/> .should();  <br/>  <br/>let sender;  <br/>  <br/>contract('token_management', async (accounts) =&gt; {<br/>	<br/>}</span></pre><p id="863f" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">è¯¥æµ‹è¯•å°†è¿è¡Œæµ‹è¯•ï¼Œä»¥æ£€æŸ¥ä»åˆåŒä¸­æ·»åŠ ã€æ›´æ–°å’Œåˆ é™¤ä»¤ç‰Œæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚åœ¨è¿è¡Œæ¯ä¸ªæµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³æ·»åŠ ä¸€ä¸ªç¼ºçœä»¤ç‰Œï¼Œå¦‚æœä½ è¿˜ä¸ä¹ æƒ¯ä½¿ç”¨<code class="eh mf mg mh mi b">asyn/await</code>ï¼Œä½ å¯èƒ½æƒ³ä»”ç»†é˜…è¯»ä¸€ä¸‹ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="a337" class="ix iy ht mi b fv ms mt l mu mv">beforeEach(async () =&gt; {  <br/>	  sender = await TokenZendR.new();  <br/>	  await sender.addNewToken('OPEN', '0x69c4bb240cf05d51eeab6985bab35527d04a8c64');  <br/>	});</span></pre><p id="8995" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æ¥ä¸‹æ¥æ˜¯æˆ‘ä»¬æ·»åŠ ä»¤ç‰Œçš„ç¬¬ä¸€ä¸ªæ–­è¨€</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="80ba" class="ix iy ht mi b fv ms mt l mu mv">it("should add new supported token", async() =&gt; {  <br/>  let address = await sender.tokens.call('OPEN');  <br/>  <br/>  address.should.equal('0x69c4bb240cf05d51eeab6985bab35527d04a8c64');  <br/>});</span><span id="3319" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; test</span></pre><figure class="mb mc md me fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff nq"><img src="../Images/6cb2edbc4f57c16c2d8ddab1c88209fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BF8fsWHPsvmnEwqr.png"/></div></div></figure><p id="3747" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æ–­è¨€å®ƒæ˜¯å¦æ­£ç¡®æ›´æ–°äº†ä»¤ç‰Œåœ°å€</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="b73e" class="ix iy ht mi b fv ms mt l mu mv">it("should update supported token address", async() =&gt; {  <br/>  await sender.addNewToken('OPEN', '0x3472059945ee170660a9a97892a3cf77857eba3a');  <br/>  <br/>  let address = await sender.tokens.call('OPEN');  <br/>  <br/>  address.should.equal('0x3472059945ee170660a9a97892a3cf77857eba3a');  <br/>});</span><span id="2b95" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; test</span></pre><figure class="mb mc md me fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff nr"><img src="../Images/5cbece83a5aec7b00ad52e4b01ba4349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OfB8b19QBdi9SQf-.png"/></div></div></figure><p id="99a6" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æœ€åæ–­è¨€ä¸€ä¸ªä»¤ç‰Œè¢«ç§»é™¤</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="fa75" class="ix iy ht mi b fv ms mt l mu mv">it("should remove unused supported token address", async() =&gt; {  <br/>  await sender.removeToken('OPEN');  <br/>  <br/>  let address = await sender.tokens.call('OPEN');  <br/>  <br/>  address.should.equal('0x0000000000000000000000000000000000000000');  <br/>});</span><span id="b20d" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; test</span></pre><figure class="mb mc md me fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff nq"><img src="../Images/3263d5c1a81e736c95fe2bebe94d21ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6JLJw8a6Ccu-4tVA.png"/></div></div></figure><p id="53a7" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æŠŠæ‰€æœ‰çš„æ”¾åœ¨ä¸€èµ·</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="607a" class="ix iy ht mi b fv ms mt l mu mv">const TokenZendR = artifacts.require('./TokenZendR.sol');  <br/>  <br/>const should = require('chai')  <br/> .use(require('chai-as-promised'))  <br/> .should();  <br/>  <br/>let sender;  <br/>  <br/>contract('token_management', async (accounts) =&gt; {  <br/>	  beforeEach(async () =&gt; {  <br/>	  sender = await TokenZendR.new();  <br/>	  await sender.addNewToken('OPEN', '0x69c4bb240cf05d51eeab6985bab35527d04a8c64');  <br/>	 }); <br/>	 <br/>	  it("should add new supported token", async() =&gt; {  <br/>	  let address = await sender.tokens.call('OPEN');  <br/>	  <br/>	  address.should.equal('0x69c4bb240cf05d51eeab6985bab35527d04a8c64');  <br/>	  }); <br/>	 <br/>	  it("should update supported token address", async() =&gt; {  <br/>	  await sender.addNewToken('OPEN', '0x3472059945ee170660a9a97892a3cf77857eba3a');  <br/>	  <br/>	  let address = await sender.tokens.call('OPEN');  <br/>	  <br/>	  address.should.equal('0x3472059945ee170660a9a97892a3cf77857eba3a');  <br/>	  });  <br/>	 <br/>	  it("should remove unused supported token address", async() =&gt; {  <br/>	  await sender.removeToken('OPEN');  <br/>	  <br/>	  let address = await sender.tokens.call('OPEN');  <br/>	  <br/>	  address.should.equal('0x0000000000000000000000000000000000000000');  <br/>	 });<br/> });</span></pre><p id="005d" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æœ€åï¼Œè®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹å¥‘çº¦æ˜¯å¦çœŸçš„å¯ä»¥ä¼ é€’ä»¤ç‰Œï¼Œä»¥ç¡®è®¤ä¸€åˆ‡éƒ½æ­£å¸¸å·¥ä½œã€‚å¯¼å…¥ä¸‰ä»½åˆåŒï¼ŒæŸ´åœ¨æ–‡ä»¶æœ€ä¸Šé¢ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="19cb" class="ix iy ht mi b fv ms mt l mu mv">const TokenZendR = artifacts.require('./TokenZendR.sol');  <br/>const BearToken = artifacts.require('./BearToken.sol');  <br/>const CubToken = artifacts.require('./CubToken.sol');  <br/>  <br/>const BigNumber = web3.BigNumber;  <br/>  <br/>const should = require('chai')  <br/> .use(require('chai-as-promised'))  <br/> .use(require('chai-bignumber')(BigNumber))  <br/> .should();</span></pre><p id="9be3" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">åœ¨è¿è¡Œæ¯ä¸ªæµ‹è¯•ä¹‹å‰ï¼Œåˆ›å»ºæ‰€æœ‰åˆåŒçš„æ–°å®ä¾‹ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="e02e" class="ix iy ht mi b fv ms mt l mu mv">const TokenZendR = artifacts.require('./TokenZendR.sol');  <br/>const BearToken = artifacts.require('./BearToken.sol');  <br/>const CubToken = artifacts.require('./CubToken.sol');  <br/>  <br/>const BigNumber = web3.BigNumber;  <br/>  <br/>const should = require('chai')  <br/> .use(require('chai-as-promised'))  <br/> .use(require('chai-bignumber')(BigNumber))  <br/> .should();  <br/>  <br/>let sender, bear, cub;  <br/>  <br/>contract('token_management', async (accounts) =&gt; {  <br/>  <br/>	 let accountA, accountB, accountC, accountD;  <br/>	  <br/>	 [accountA, accountB, accountC, accountD ] = accounts;  <br/>	  <br/>	 beforeEach(async () =&gt; {  <br/>	  sender = await TokenZendR.new();  <br/>	  bear = await BearToken.new();  <br/>	  cub = await CubToken.new();  <br/>	  <br/>	  await sender.addNewToken('BEAR', bear.address);  <br/>	  await sender.addNewToken('CUB', cub.address);  <br/>	 });<br/> }</span></pre><p id="e507" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æµ‹è¯•åœ°å€äºŒçš„ä½™é¢æ˜¯å¦ç­‰äºåˆåŒæˆåŠŸè½¬è®©çš„<em class="lz">æ‰¿è½½</em>ä»¤ç‰Œçš„é‡‘é¢ã€‚</p><pre class="mb mc md me fq mo mi mp mq aw mr dt"><span id="abf9" class="ix iy ht mi b fv ms mt l mu mv">it("should be able to transfer sender token to another wallet", async() =&gt; { <br/>  // When transfering  token, multiple by<br/>  //figure of decimal to get exact token e.g<br/>  //to send 5 BEAR = 5e5, where 5 is the decimal places <br/>  let amount = new BigNumber(500000e5);  <br/>  <br/>  //Account a approve contract to spend on behalf<br/>  await bear.approve(sender.address, amount,{from: accountA});  <br/>  <br/>  await sender.transferTokens('BEAR',accountB, amount,{from: accountA});  <br/>  <br/>  let balance = ((await bear.balanceOf(accountB)).toString());  <br/>  <br/>  balance.should.equal(amount.toString())  <br/>});</span><span id="53ba" class="ix iy ht mi b fv mw mt l mu mv">truffle(development)&gt; test</span></pre><figure class="mb mc md me fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff ns"><img src="../Images/9b32a35f5231abd45ffea724b772c6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7I_RlQhNFCszoNO8.png"/></div></div></figure><p id="1bf8" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated">æœ¬æ•™ç¨‹å·²ç»æˆåŠŸåœ°å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•å»ºç«‹ä¸€ä¸ªåˆåŒï¼Œå°†<em class="lz"> ERC20 </em>ä»£å¸ä»æ‚¨çš„åœ°å€è½¬ç§»åˆ°ä»»ä½•å…¶ä»–<em class="lz"> ERC20 </em>å…¼å®¹çš„é’±åŒ…ç”šè‡³äº¤æ˜“æ‰€ã€‚ä½ å¯ä»¥åœ¨testnetæˆ–è€…main netä¸Šç”¨ç°æœ‰çš„ä»¤ç‰Œæ¯”å¦‚<em class="lz"> GTO </em>æˆ–è€…<em class="lz"> TRX </em>è¿›è¡Œæµ‹è¯•ã€‚</p><h1 id="1b23" class="mz iy ht bd iz na nb nc jd nd ne nf jh ng nh ni jl nj nk nl jp nm nn no jt np dt translated">ç¬¬äºŒéƒ¨åˆ†</h1><p id="11e8" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">æœ¬æ•™ç¨‹çš„ç»“è®ºéƒ¨åˆ†å¯ä»¥åœ¨<a class="ae la" rel="noopener" href="/coinmonks/building-ethereum-dapps-with-reactjs-truffle-contract-web3-a-ui-for-tokenzendr-a-smart-bf345478b116"> <em class="lz">è¿™é‡Œ</em> </a>ä¸­æ‰¾åˆ°</p><h1 id="c33a" class="mz iy ht bd iz na nb nc jd nd ne nf jh ng nh ni jl nj nk nl jp nm nn no jt np dt translated">ä»£ç åº“</h1><p id="cc7d" class="pw-post-body-paragraph jv jw ht jx b jy jz ka kb kc kd ke kf ji kg kh ki jm kj kk kl jq km kn ko kp hm dt translated">å®Œæ•´çš„æ™ºèƒ½åˆåŒä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°&amp;å…‹éš†<a class="ae la" href="https://github.com/slim12kg/tokenzendr-contract" rel="noopener ugc nofollow" target="_blank">https://github.com/slim12kg/tokenzendr-contract</a></p><p id="8cce" class="pw-post-body-paragraph jv jw ht jx b jy li ka kb kc lj ke kf ji lw kh ki jm lx kk kl jq ly kn ko kp hm dt translated"><strong class="jx hu">æƒ³è¦å­¦ä¹ ä½¿ç”¨èŠ‚ç‚¹APIæ„å»ºDefiå‚¨è“„æ™ºèƒ½åˆçº¦ï¼Œä»¥ä¾¿ä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’ï¼Ÿ</strong>ğŸ‘‡ğŸ‘‡ğŸ‘‡</p><div class="nt nu fm fo nv nw"><a href="https://www.udemy.com/course/the-complete-solidity-mastery-course/" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab ej"><div class="ny ab nz cl cj oa"><h2 class="bd hu fv z el ob eo ep oc er et hs dt translated">å®Œæ•´çš„åšå®æŒæ¡è¯¾ç¨‹</h2><div class="od l"><h3 class="bd b fv z el ob eo ep oc er et ek translated">å¤§å®¶å¥½ï¼Œæˆ‘çš„åå­—æ˜¯å¥¥å¢ç“¦è´¹ç±³ã€‚åœ¨æ¥ä¸‹æ¥çš„8å¹´é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨æ„å»ºå¯ä¼¸ç¼©çš„webåº”ç”¨ç¨‹åºâ€¦</h3></div><div class="oe l"><p class="bd b gc z el ob eo ep oc er et ek translated">www.udemy.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok iv nw"/></div></div></a></div><blockquote class="kq"><p id="ea3a" class="kr ks ht bd kt ku ol om on oo op kp ek translated">åŠ å…¥Coinmonks <a class="ae la" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">ç”µæŠ¥é¢‘é“</a>å’Œ<a class="ae la" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtubeé¢‘é“</a>è·å–æ¯æ—¥<a class="ae la" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">åŠ å¯†æ–°é—»</a></p></blockquote><h2 id="15d6" class="ix iy ht bd iz ja lb jc jd je lc jg jh ji ld jk jl jm le jo jp jq lf js jt ju dt translated">å¦å¤–ï¼Œé˜…è¯»</h2><ul class=""><li id="20fb" class="lg lh ht jx b jy jz kc kd ji oq jm or jq os kp ln lo lp lq dt translated"><a class="ae la" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">å¯†ç ç”µæŠ¥ä¿¡å·</a> | <a class="ae la" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">å¯†ç äº¤æ˜“æœºå™¨äºº</a></li><li id="14e6" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">å¤åˆ¶äº¤æ˜“</a> | <a class="ae la" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">åŠ å¯†ç¨åŠ¡è½¯ä»¶</a></li><li id="723e" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">ç”µç½‘äº¤æ˜“</a> | <a class="ae la" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">åŠ å¯†ç¡¬ä»¶é’±åŒ…</a></li><li id="f33b" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">æœ€ä½³åŠ å¯†äº¤æ˜“æ‰€</a> | <a class="ae la" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">å°åº¦æœ€ä½³åŠ å¯†äº¤æ˜“æ‰€</a></li><li id="47a8" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">é¢å‘å¼€å‘äººå‘˜çš„æœ€ä½³åŠ å¯†API</a></li><li id="b359" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">æœ€ä½³<a class="ae la" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">å¯†ç å€Ÿè´·å¹³å°</a></li><li id="9487" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated">æ æ†ä»£å¸çš„ç»ˆææŒ‡å—</li><li id="95d1" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" href="https://coincodecap.com/best-vpns-for-crypto-trading" rel="noopener ugc nofollow" target="_blank">åŠ å¯†äº¤æ˜“çš„æœ€ä½³VPN</a></li><li id="918f" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" href="https://coincodecap.com/blockchain-analytics" rel="noopener ugc nofollow" target="_blank">æœ€ä½³åŠ å¯†åˆ†ææˆ–é“¾ä¸Šæ•°æ®</a> | <a class="ae la" href="https://coincodecap.com/bexplus-review" rel="noopener ugc nofollow" target="_blank"> Bexplusè¯„è®º</a></li><li id="51af" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" href="https://coincodecap.com/nft-marketplaces" rel="noopener ugc nofollow" target="_blank">NFTåå¤§å¸‚åœºé€ å¸é›†é”¦</a></li><li id="f72f" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" href="https://coincodecap.com/ascendex-staking" rel="noopener ugc nofollow" target="_blank">AscendEx Staking</a>|<a class="ae la" href="https://coincodecap.com/bot-ocean-review" rel="noopener ugc nofollow" target="_blank">Bot Ocean Review</a>|<a class="ae la" href="https://coincodecap.com/bitcoin-wallets-india" rel="noopener ugc nofollow" target="_blank">æœ€ä½³æ¯”ç‰¹å¸é’±åŒ…</a></li><li id="4ec1" class="lg lh ht jx b jy lr kc ls ji lt jm lu jq lv kp ln lo lp lq dt translated"><a class="ae la" href="https://coincodecap.com/bitget-review" rel="noopener ugc nofollow" target="_blank"> Bitgetå›é¡¾</a>|<a class="ae la" href="https://coincodecap.com/gemini-vs-blockfi" rel="noopener ugc nofollow" target="_blank">Gemini vs block fi</a>|<a class="ae la" href="https://coincodecap.com/okex-futures-trading" rel="noopener ugc nofollow" target="_blank">OKExæœŸè´§äº¤æ˜“</a></li></ul></div></div>    
</body>
</html>