<html>
<head>
<title>Modifying the Batch Size in Hyperledger Fabric v2.2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Hyperledger Fabric v2.2中修改批量大小</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/modifying-the-batch-size-in-hyperledger-fabric-v2-2-3ec2dd779e2b?source=collection_archive---------2-----------------------#2020-12-20">https://medium.com/coinmonks/modifying-the-batch-size-in-hyperledger-fabric-v2-2-3ec2dd779e2b?source=collection_archive---------2-----------------------#2020-12-20</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/348fc55650709232279159b65f2c695e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C85KnXCCkdbn38Bp.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><h1 id="f778" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">1.概观</h1><p id="fb0b" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">批量大小和批量时间是超格织物获得高产量的重要因素之一。这些因素决定了区块链网络的每秒交易量(TPS)。还有一个重要的方面是有效地设计网络。已经观察到，使用LevelDB世界状态数据库可以在小批量的情况下实现更高的吞吐量和更低的延迟，尽管在大批量的情况下会失去这种优势。还有其他因素对TPS有影响。但是这篇文章更倾向于<strong class="kf hu">我们如何更新运行中的Hyperleder fabric网络</strong>的批量大小。我使用test-network v2.2来实现。</p><blockquote class="lb lc ld"><p id="d8db" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu"> <em class="ht">查看我的</em> </strong> <a class="ae ln" href="http://bit.ly/hlf-multihost-deployment" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu"> <em class="ht">课程在Hyperledger Fabric上的部署</em> </strong> </a></p></blockquote><p id="264d" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu">注意:</strong>更新批量超时的步骤完全相同。</p><h1 id="c665" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">2.术语</h1><ul class=""><li id="dfba" class="lo lp ht kf b kg kh kk kl ko lq ks lr kw ls la lt lu lv lw dt translated"><strong class="kf hu">批量大小- </strong>定义一个块中交易的<strong class="kf hu">大小</strong>。任何块都不会比<code class="eh lx ly lz ma b">absolute_max_bytes</code>大，也不会有超过<code class="eh lx ly lz ma b">max_message_count</code>个事务出现在块内。如果有可能在<code class="eh lx ly lz ma b">preferred_max_bytes</code>下构造一个块，那么一个块会被过早的切割，大于这个大小的事务会出现在自己的块中。</li><li id="e4a5" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la lt lu lv lw dt translated"><strong class="kf hu">批量超时</strong>。第一个事务到达后，在切割块之前等待其他事务的时间。减小该值将会改善延迟，但是减小太多可能会降低吞吐量，因为它不允许块填满其最大容量。</li><li id="2d3b" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la lt lu lv lw dt translated"><strong class="kf hu">最大消息数</strong>:一批允许的最大消息数</li></ul><h1 id="7704" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">3.了解渠道更新流程</h1><ol class=""><li id="82c0" class="lo lp ht kf b kg kh kk kl ko lq ks lr kw ls la mg lu lv lw dt translated">从mychannel获取配置块</li><li id="ae23" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la mg lu lv lw dt translated">将其转换成JSON并提取配置部分。</li><li id="53d5" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la mg lu lv lw dt translated">找到您需要修改的配置，在我的例子中，批量大小为10 = &gt;比如20。</li><li id="bb0e" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la mg lu lv lw dt translated">将两个文件转换为2 PB文件，并计算增量。</li><li id="03eb" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la mg lu lv lw dt translated">再次解码PB文件，添加信封，再次编码。</li><li id="94fe" class="lo lp ht kf b kg mb kk mc ko md ks me kw mf la mg lu lv lw dt translated">使用ordererOrg Admin对(5)的结果进行签名。</li></ol><blockquote class="lb lc ld"><p id="ef83" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu">这不同于添加org3教程，因为需要ordererAdmin来签署此更新。</strong></p></blockquote><h1 id="2f04" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">4.网络:设置</h1><p id="ea6e" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">对于这个演示，我使用示例中提供的<code class="eh lx ly lz ma b"><a class="ae ln" href="https://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank">test-network</a></code>。我已经添加了几个shell脚本并删除了未使用的代码，可以使用这个<a class="ae ln" href="https://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu">库</strong> </a>。</p><p id="cedd" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">我们将以<code class="eh lx ly lz ma b">mychannel</code>开始网络，我使用标签为2.2的docker图像</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="10be" class="mp jg ht ma b fv mq mr l ms mt">cd fabric-samples-advance-topics/test-network<br/>./network.sh up createChannel -c mychannel -i 2.2</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mu"><img src="../Images/774a969aad1db567aa01098320958211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MbSjRFYmLbiATBg6.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Network: Setup</strong>-Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="a81e" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">一旦网络启动并运行，我们将启动<em class="le"> cli </em>容器与网络进行交互。</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="5e2e" class="mp jg ht ma b fv mq mr l ms mt">docker-compose -f docker/docker-compose-cli.yaml up -d</span></pre><blockquote class="lb lc ld"><p id="f4fe" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu">阅读</strong> <a class="ae ln" rel="noopener" href="/coinmonks/adding-a-new-orderer-in-running-hyperledger-fabric-v2-2-network-4c90c8315ae1"> <strong class="kf hu">在运行Hyperledger Fabric v2.2网络中添加新的订购者</strong> </a></p></blockquote><h1 id="37d7" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">5.频道更新</h1><p id="0b59" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">这是非常重要的一步，我们将更新我的频道，并将<em class="le">批次大小</em>从<strong class="kf hu"> 10改为20。</strong>最初，批量大小为10，但我们会将其更新为20，我们可以在<code class="eh lx ly lz ma b">configtx/configtx.yaml.</code> <br/> <strong class="kf hu">处看到<em class="le">批量大小</em>的步骤就是我们在<em class="le">第3节中讨论的步骤。</em> </strong></p><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mw"><img src="../Images/3516b7ad578423296bfa05e5482250fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFzqv6JKY3iZjomNHgn4XQ.png"/></div></div></figure><ol class=""><li id="7377" class="lo lp ht kf b kg lf kk lg ko mx ks my kw mz la mg lu lv lw dt translated"><strong class="kf hu">获取最新配置<br/> </strong>我们将以protobuf格式获取通道配置，创建一个名为<code class="eh lx ly lz ma b">config_block.pb</code>的文件。</li></ol><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="4380" class="mp jg ht ma b fv mq mr l ms mt">docker exec -e CHANNEL_NAME=mychannel cli sh -c ‘peer channel fetch config config_block.pb -o orderer.example.com:7050 -c $CHANNEL_NAME — tls — cafile $ORDERER_CA’</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff na"><img src="../Images/6153d46f9a0f6b7dfcc9c659052bfb81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*owPQJYr98jZNX0wVojFXqw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Fetch the latest configuration-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="09ce" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 2。将配置转换为JSON <br/> </strong>我们将转换最新的块<strong class="kf hu"> </strong> <code class="eh lx ly lz ma b">config_block.pb</code>，它是我们从上一步进入JSON的，并将所需的部分修剪到<code class="eh lx ly lz ma b">config.json</code>文件中</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="cc73" class="mp jg ht ma b fv mq mr l ms mt">docker exec cli sh -c ‘configtxlator proto_decode — input config_block.pb — type common.Block | jq .data.data[0].payload.data.config &gt; config.json’</span></pre><p id="4f1d" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">我们可以使用<br/>和<code class="eh lx ly lz ma b">docker exec cli sh -c ‘ls -lh’</code>进行检查</p><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nb"><img src="../Images/656be635c4e7a22a4aa947022a790993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgZXS6BEaUj1LNMiIHci9Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Convert the Configuration to JSON-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="5ffc" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 3。检查当前值<br/> </strong>我们将找到blocksize的当前值，并将它与更新后的值进行比较。我们必须导出MAXBATCHSIZEPATH，以便可以读取它并更改值</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="80a6" class="mp jg ht ma b fv mq mr l ms mt">MAXBATCHSIZEPATH=”.channel_group.groups.Orderer.values.BatchSize.value.max_message_count”</span><span id="f1d2" class="mp jg ht ma b fv nc mr l ms mt">docker exec -e MAXBATCHSIZEPATH=$MAXBATCHSIZEPATH cli sh -c ‘jq “$MAXBATCHSIZEPATH” config.json’</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nd"><img src="../Images/8aeb47f11cce6c297d6610d62ad14df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OcJncT4Taq4HY8XD-uBPCw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Check the current value-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="e3cb" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 4。更新值</strong> <br/>现在我们将把值从10更新到20，并将它存储在临时文件<code class="eh lx ly lz ma b">modified_config.json</code>中。</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="502b" class="mp jg ht ma b fv mq mr l ms mt">docker exec -e MAXBATCHSIZEPATH=$MAXBATCHSIZEPATH cli sh -c ‘jq “$MAXBATCHSIZEPATH = 20” config.json &gt; modified_config.json’</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ne"><img src="../Images/f90c08fd8007561f13e456fd190841e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yq2rTImYc0cQUO1aiEgTVA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Updating the value-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="c8af" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">我们可以用更新后的值检查<code class="eh lx ly lz ma b">modified_config.json</code>的内容。<br/>T9】</p><p id="2684" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 5。</strong> <strong class="kf hu">将JSON转换为ProtoBuf </strong></p><p id="8d91" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">在这一步，我们将初始的<code class="eh lx ly lz ma b">config.json</code>和<code class="eh lx ly lz ma b">modifed_config.json</code>(带有更新的值)转换成ProtoBuf (PB)格式。</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="624f" class="mp jg ht ma b fv mq mr l ms mt">docker exec cli sh -c 'configtxlator proto_encode --input config.json --type common.Config --output config.pb'</span><span id="5868" class="mp jg ht ma b fv nc mr l ms mt">docker exec cli sh -c 'configtxlator proto_encode --input modified_config.json --type common.Config --output modified_config.pb'</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nf"><img src="../Images/d0a4ea61697060ababc370b0a42b6ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4V3n5CmsK7vN-4NI3S66tw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Converting JSON to ProtoBuf-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="bde9" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 6。Delta计算<br/> </strong>现在，我们要计算两者之间的delta。我们刚刚生成的pb文件。</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="b685" class="mp jg ht ma b fv mq mr l ms mt">docker exec -e CHANNEL_NAME=mychannel cli sh -c 'configtxlator compute_update --channel_id $CHANNEL_NAME --original config.pb --updated modified_config.pb --output final_update.pb'</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ng"><img src="../Images/1dcdf2960a1bd3306de4cfb934d427bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrmKAOle7fctcmmadc2qAQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Delta Calculation-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="949a" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 7。将更新添加到信封<br/> </strong>现在我们必须计算新旧配置之间的差异，我们可以将更改应用到配置</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="d452" class="mp jg ht ma b fv mq mr l ms mt">docker exec  cli sh -c 'configtxlator proto_decode --input final_update.pb --type common.ConfigUpdate | jq . &gt; final_update.json'</span><span id="b6bd" class="mp jg ht ma b fv nc mr l ms mt">docker exec  cli sh -c 'echo "{\"payload\":{\"header\":{\"channel_header\":{\"channel_id\":\"mychannel\", \"type\":2}},\"data\":{\"config_update\":"$(cat final_update.json)"}}}" | jq . &gt;  header_in_envolope.json'</span><span id="1392" class="mp jg ht ma b fv nc mr l ms mt">docker exec cli sh -c 'configtxlator proto_encode --input header_in_envolope.json --type common.Envelope --output final_update_in_envelope.pb'</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nh"><img src="../Images/151d6e711579563fa4617249d645fc4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bAf1sNw-5xdtEYmQDXhKZw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Adding the update to the envelope-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="db63" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 8。签署更新<br/> </strong>现在我们必须作为订购者签署这个更新协议。记住，我们导出了必要的环境变量来进行操作</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="70e8" class="mp jg ht ma b fv mq mr l ms mt">docker exec cli sh -c 'peer channel signconfigtx -f final_update_in_envelope.pb'</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff ni"><img src="../Images/a14f3624520acb1c85d816562c05d638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oV4w5fbVDbadL-Atxevwjw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Signing the update-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="eb46" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 9。启动更新命令<br/> </strong>现在更新过程已经通过orderer完成，为此，我们必须设置一些指向<code class="eh lx ly lz ma b">OrdererAdmin</code>的环境变量。</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="4a0b" class="mp jg ht ma b fv mq mr l ms mt">CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/tls/ca.crt</span><span id="8ec5" class="mp jg ht ma b fv nc mr l ms mt">CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/users/Admin@example.com/msp</span><span id="da8d" class="mp jg ht ma b fv nc mr l ms mt">CORE_PEER_ADDRESS=orderer.example.com:7050</span></pre><p id="83ee" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">更新通道，我们的配置更新事务表示原始配置和修改后的配置之间的差异，但订购服务会将其转换为完整的通道配置。</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="4c74" class="mp jg ht ma b fv mq mr l ms mt">docker exec -e CORE_PEER_LOCALMSPID=$CORE_PEER_LOCALMSPID -e CORE_PEER_TLS_ROOTCERT_FILE=$CORE_PEER_TLS_ROOTCERT_FILE -e CORE_PEER_MSPCONFIGPATH=$CORE_PEER_MSPCONFIGPATH -e CORE_PEER_ADDRESS=$CORE_PEER_ADDRESS -e CHANNEL_NAME=mychannel cli sh -c ‘peer channel update -f final_update_in_envelope.pb -c $CHANNEL_NAME -o orderer.example.com:7050 — tls — cafile $ORDERER_CA’</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nj"><img src="../Images/0a0ae501be0c0e1e624fe282a6ade47d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-4AAo4vdkTsg2sxZxqJACQ.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Initiate the Update command-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><p id="93de" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated"><strong class="kf hu"> 10。验证<br/> </strong>现在，我们的批量大小已从10更新为20，我们可以通过重新运行这些命令来检查块大小的更新，从而进行验证</p><pre class="mh mi mj mk fq ml ma mm mn aw mo dt"><span id="d614" class="mp jg ht ma b fv mq mr l ms mt">docker exec cli sh -c 'configtxlator proto_decode --input config_block.pb --type common.Block | jq .data.data[0].payload.data.config &gt; config.json'</span><span id="668e" class="mp jg ht ma b fv nc mr l ms mt">docker exec -e MAXBATCHSIZEPATH=$MAXBATCHSIZEPATH cli sh -c 'jq "$MAXBATCHSIZEPATH" config.json'</span></pre><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nk"><img src="../Images/5a013dcabc4d5f0259f68514692b5dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1vvQVBWc9Q5eqacLKb4vw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek"><strong class="bd mv">Verification-</strong>Modifying the Batch Size in Hyperledger Fabric</figcaption></figure><h1 id="9c5e" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">6.摘要</h1><p id="52de" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">在本文中，我们看到了如何更新正在运行的Hyperledger Fabric网络的<em class="le">批处理大小</em>或<em class="le">批处理超时</em>，我知道这是一个有点繁琐的任务，但在一些shell脚本的帮助下，我们可以在几分钟内完成。我添加了一个脚本<code class="eh lx ly lz ma b">updateBatchSize.sh</code>，它可以完成我们在上面学到的所有工作。你可以在这里找到脚本<a class="ae ln" href="https://bit.ly/hlf-advance" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="9adb" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">如果你觉得这篇文章很有帮助，请点击拍手按钮，并跟随我阅读更多这样的信息丰富的文章。</p><p id="c486" class="pw-post-body-paragraph kd ke ht kf b kg lf ki kj kk lg km kn ko li kq kr ks lk ku kv kw lm ky kz la hm dt translated">你可以在<a class="ae ln" href="https://linkedin.com/in/adityajoshi12" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上找到我或者在<a class="ae ln" href="https://github.com/adityajoshi12" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上跟踪我？如果这对你来说太社交化了，如果你想和我讨论技术，就给adityaprakashjoshi1@gmail.com发封邮件。</p><figure class="mh mi mj mk fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nl"><img src="../Images/15299116b6fad9233eabf2e86aa33242.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/0*Le8rlWWX4iUUtEwc.gif"/></div></div></figure><blockquote class="lb lc ld"><p id="3b56" class="kd ke le kf b kg lf ki kj kk lg km kn lh li kq kr lj lk ku kv ll lm ky kz la hm dt translated"><strong class="kf hu"> <em class="ht">另外，查看我的</em> </strong> <a class="ae ln" href="http://bit.ly/hlf-multihost-deployment" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu"> <em class="ht">课程关于Hyperledger Fabric的部署关于多主机</em> </strong> </a></p></blockquote></div></div>    
</body>
</html>