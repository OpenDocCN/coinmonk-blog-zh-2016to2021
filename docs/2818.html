<html>
<head>
<title>Building smart contracts, smartly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">聪明地建立智能合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/building-smart-contracts-smartly-b33dded92b37?source=collection_archive---------2-----------------------#2020-03-10">https://medium.com/coinmonks/building-smart-contracts-smartly-b33dded92b37?source=collection_archive---------2-----------------------#2020-03-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="d2ad" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">使用分散数据的参考合同；借助DeFi应用的可信节点降低风险。</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/82e4268ceea8361da6d8784bae529311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgzwy0ekWl2mQ2i03uOSlw.jpeg"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Photo by <a class="ae jy" href="https://unsplash.com/@cliffordgatewood?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Clifford Photography</a> on <a class="ae jy" href="https://unsplash.com/s/photos/ethereum?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2fec" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">“明智地建立明智的合同”——Patrick</p><p id="fe9f" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">好吧，所以我不是英语课上最好的，但这是一个有趣的标题不是吗？</p><p id="92a2" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">你会注意到我写了一篇关于构建智能合同的类似文章，从这里开始<a class="ae jy" rel="noopener" href="/alpha-vantage/write-your-first-blockchain-application-in-minutes-with-alpha-vantage-c4e8dd662fc0"/>。在那篇文章中，我介绍了如何从单个节点获取数据，如果您正在寻找特定类型的数据，这是非常有用的。从单个点获取数据至少有一个主要问题，因为您现在有一个单点故障。我们已经看到历史上最近的案例，这些单点实际上已经引起了问题。请看这里:<a class="ae jy" href="https://www.theblockcrypto.com/linked/28748/synthetix-suffers-oracle-attack-potentially-looting-37-million-synthetic-ether" rel="noopener ugc nofollow" target="_blank"> 1。</a> <a class="ae jy" href="https://www.theblockcrypto.com/post/56207/bzx-attacked-again-645k-in-eth-estimated-to-be-lost" rel="noopener ugc nofollow" target="_blank"> 2。</a></p><p id="b3dd" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">一种更安全、更便宜、更有效的方法是从分散的oracle feed或<a class="ae jy" href="https://docs.chain.link/docs/using-chainlink-reference-contracts" rel="noopener ugc nofollow" target="_blank">参考数据契约</a>获取数据。Chainlink已经采取措施，在chain上提供具体的广泛使用的定价数据，供您在您的<a class="ae jy" href="https://blog.coincodecap.com/tag/smart-contact/" rel="noopener ugc nofollow" target="_blank">智能合同</a>中使用，而且使用起来再简单不过了。数据是从多个来源收集和汇总的，并且有一个信誉系统，因此每个节点都有动力总是发送最准确的数据。</p><p id="021e" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">测试它最简单的方法是用<a class="ae jy" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> Remix </a>(一个在线solidity IDE):</p><pre class="jj jk jl jm fq kv kw kx ky aw kz dt"><span id="013a" class="la lb ht kw b fv lc ld l le lf">pragma solidity ^0.4.24;</span><span id="aa95" class="la lb ht kw b fv lg ld l le lf">import "github.com/smartcontractkit/chainlink/evm-contracts/src/v0.4/interfaces/AggregatorInterface.sol";</span><span id="990b" class="la lb ht kw b fv lg ld l le lf">contract Demo {<br/>    <br/>    AggregatorInterface internal ref;<br/>    <br/>    constructor(address _aggregator) public {<br/>        ref = AggregatorInterface(_aggregator);<br/>    }<br/>    function getLatestPrice() public view returns (int256) {<br/>        return ref.latestAnswer();<br/>    }<br/>}</span></pre><p id="ea8f" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">测试聚合器契约有几个步骤。</p><ol class=""><li id="30b4" class="lh li ht kb b kc kd kf kg ki lj km lk kq ll ku lm ln lo lp dt translated">确保您已经安装了<a class="ae jy" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>，钱包中有<a class="ae jy" href="https://faucet.rinkeby.io/" rel="noopener ugc nofollow" target="_blank"> Rinkeby test ETH </a>，并且您已经选择了Rinkeby testnet。</li><li id="d68f" class="lh li ht kb b kc lq kf lr ki ls km lt kq lu ku lm ln lo lp dt translated">将上述代码复制并粘贴到Remix IDE中</li><li id="1538" class="lh li ht kb b kc lq kf lr ki ls km lt kq lu ku lm ln lo lp dt translated">编译(此代码的版本为0.4.24)</li><li id="b5fe" class="lh li ht kb b kc lq kf lr ki ls km lt kq lu ku lm ln lo lp dt translated">然后使用一个<a class="ae jy" href="https://docs.chain.link/docs/using-chainlink-reference-contracts#section-test-reference-data-contracts-rinkeby" rel="noopener ugc nofollow" target="_blank"> Rinkeby testnet聚合器地址</a>进行部署。在本演示中，我们使用LINK-USD提要。</li><li id="a27a" class="lh li ht kb b kc lq kf lr ki ls km lt kq lu ku lm ln lo lp dt translated">在区块确认申请后，选择UI中的“getLatestPrice”按钮。</li></ol><p id="11d3" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">现在你可以在<a class="ae jy" href="https://blog.coincodecap.com/tag/ethereum/" rel="noopener ugc nofollow" target="_blank">以太坊</a>区块链上看到链环的价格！</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lv"><img src="../Images/7da24db81847938e10076db67d8ca55d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AbZ0omKrz0lp2I5u.gif"/></div></div></figure><p id="8eac" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">您可以在这里获得<a class="ae jy" href="https://feeds.chain.link/" rel="noopener ugc nofollow" target="_blank"> mainnet地址</a>，以及哪些节点托管数据，目前谁在使用这些数据，以及价格如何波动。其他要测试的<a class="ae jy" href="https://docs.chain.link/docs/using-chainlink-reference-contracts#section-test-reference-data-contracts-rinkeby" rel="noopener ugc nofollow" target="_blank"> rinkeby地址可以在这里找到。</a></p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff lw"><img src="../Images/03b1e28681c6796eed64e5bd04897eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VelQUemEdyENqbc-rdFIdg.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">A visual representation of nodes sending data to a reference contract.</figcaption></figure><h1 id="4489" class="lx lb ht bd ly lz ma mb mc md me mf mg iz mh ja mi jc mj jd mk jf ml jg mm mn dt translated">就这么简单</h1><p id="7d28" class="pw-post-body-paragraph jz ka ht kb b kc mo iu ke kf mp ix kh ki mq kk kl km mr ko kp kq ms ks kt ku hm dt translated">现在，您可以在您的<a class="ae jy" href="https://blog.coincodecap.com/tag/defi/" rel="noopener ugc nofollow" target="_blank"> DeFi </a>应用程序中使用定价数据！</p><p id="31ba" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">要直接从一个节点获取mainnet契约中的数据，您只需支付一点LINK token，这就是Chainlink token如此有价值的原因。对于链上数据生态系统来说，这是一个至关重要的实用令牌，可确保节点始终运行，为<a class="ae jy" href="https://blog.coincodecap.com/tag/blockchain/" rel="noopener ugc nofollow" target="_blank">区块链</a>提供数据。这些来自节点运营商的拉动是这些参考契约的动力。</p><h1 id="ce7f" class="lx lb ht bd ly lz ma mb mc md me mf mg iz mh ja mi jc mj jd mk jf ml jg mm mn dt translated">想再深入一点吗？</h1><p id="9dd0" class="pw-post-body-paragraph jz ka ht kb b kc mo iu ke kf mp ix kh ki mq kk kl km mr ko kp kq ms ks kt ku hm dt translated">在这里可以找到一个关于构建可靠智能契约和用户界面的精彩课程。@ste_grider，它涵盖了端到端的一切。</p></div><div class="ab cl mt mu hb mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="hm hn ho hp hq"><p id="7ab3" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated">这里的所有观点都是我自己的。</p><p id="e48b" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><em class="na">关注我上</em><a class="ae jy" href="https://twitter.com/PatrickAlphaC" rel="noopener ugc nofollow" target="_blank"><em class="na">Twitter</em></a><em class="na">，</em><a class="ae jy" rel="noopener" href="/@patrick.collins_58673"><em class="na">medium</em></a><em class="na">，</em><a class="ae jy" href="https://github.com/PatrickAlphaC" rel="noopener ugc nofollow" target="_blank"><em class="na">github</em></a><em class="na">，</em><a class="ae jy" href="https://www.linkedin.com/in/patrickalphac/" rel="noopener ugc nofollow" target="_blank"><em class="na">LinkedIn</em></a><em class="na">，获取更多内容和见解。</em></p><p id="8c87" class="pw-post-body-paragraph jz ka ht kb b kc kd iu ke kf kg ix kh ki kj kk kl km kn ko kp kq kr ks kt ku hm dt translated"><em class="na"># financer evolution #区块链# ETH # chain link # smart contracts</em></p><blockquote class="nb"><p id="a968" class="nc nd ht bd ne nf ng nh ni nj nk ku ek translated"><a class="ae jy" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="nm nn no np nq jn fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nl"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>