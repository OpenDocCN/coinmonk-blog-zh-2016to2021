<html>
<head>
<title>Crypto Exchange Websocket Examples Using CCXWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CCXWS的加密交换Websocket示例</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/crypto-exchange-websocket-examples-using-ccxws-d49450bc6295?source=collection_archive---------0-----------------------#2019-11-22">https://medium.com/coinmonks/crypto-exchange-websocket-examples-using-ccxws-d49450bc6295?source=collection_archive---------0-----------------------#2019-11-22</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/f431a076a03ee3118c48b6a2e9429ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gppZaKrYawY4Vgf0I_uJVg.jpeg"/></div></div></figure><blockquote class="jb jc jd"><p id="592e" class="je jf jg jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">连接到各大交易所的教程。</p></blockquote><p id="d91f" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">开发依赖于加密货币交易数据的应用程序非常复杂。每一个交换都提供了不同的API，这些API都是独一无二的，令人困惑。</p><p id="a8a5" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">这就是为什么我们制作了一系列教程，帮助像您这样的开发人员轻松开始管理exchanges。</p><div class="kg kh fm fo ki kj"><a href="https://blog.shrimpy.io/blog/ccxt-live-crypto-exchange-price-ticker" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab ej"><div class="kl ab km cl cj kn"><h2 class="bd hu fv z el ko eo ep kp er et hs dt translated">CCXT实时加密交易所报价器[示例教程] | Shrimpy</h2><div class="kq l"><h3 class="bd b fv z el ko eo ep kp er et ek translated">我们将介绍两种不同的方法来生成实时价格行情。第一个策略是访问数据…</h3></div><div class="kr l"><p class="bd b gc z el ko eo ep kp er et ek translated">blog.shrimpy.io</p></div></div><div class="ks l"><div class="kt l ku kv kw ks kx iz kj"/></div></div></a></div><div class="kg kh fm fo ki kj"><a href="https://blog.shrimpy.io/blog/ccxt-crypto-exchange-order-book-snapshot" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab ej"><div class="kl ab km cl cj kn"><h2 class="bd hu fv z el ko eo ep kp er et hs dt translated">CCXT加密交换订单簿数据[示例教程] | Shrimpy</h2><div class="kq l"><h3 class="bd b fv z el ko eo ep kp er et ek translated">订单簿指定了交易所中当前开放的所有可用订单。每个订单代表一个…</h3></div><div class="kr l"><p class="bd b gc z el ko eo ep kp er et ek translated">blog.shrimpy.io</p></div></div><div class="ks l"><div class="ky l ku kv kw ks kx iz kj"/></div></div></a></div><p id="1f25" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">加密货币交易商和开发人员一直在寻找最快的方式来访问加密交易所交易和订单数据，以便他们能够更快地做出决策，并在机会出现时更好地捕捉机会。</p><p id="419b" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">为了提供这种速度，许多开发人员转向websocket APIs。websocket流提供最新的价格信息，因为它在交易所发生变化。在不要求开发者不断轮询新数据的情况下，只要有变化，交易所就会立即发送最新的交易或订单数据。</p><p id="28ed" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">这是从交易所获取市场数据的最快方式。订阅每个交易对通常是一次性事件。在此之后，交易所将自动发送更新的交易或订单数据，以便您可以就如何以及何时执行交易做出实时决策。</p><p id="41a9" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">在本文中，我们将提供多个示例，说明如何通过websockets为每个主要的加密交换访问live exchange数据。</p><p id="7ff6" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">本教程中的示例将涵盖如何使用<a class="ae kz" href="https://www.npmjs.com/package/ccxws" rel="noopener ugc nofollow" target="_blank"> <strong class="jh hu"> CCXWS JavaScript库</strong> </a> <strong class="jh hu"> </strong>和<strong class="jh hu"> </strong> <a class="ae kz" href="https://www.npmjs.com/package/shrimpy-node" rel="noopener ugc nofollow" target="_blank"> <strong class="jh hu"> Shrimpy Node.js库</strong> </a>。</p><h1 id="661a" class="la lb ht bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">CCXWS</h1><p id="ea81" class="pw-post-body-paragraph je jf ht jh b ji ly jk jl jm lz jo jp kd ma js jt ke mb jw jx kf mc ka kb kc hm dt translated"><a class="ae kz" href="https://www.npmjs.com/package/ccxws" rel="noopener ugc nofollow" target="_blank"> CCXWS </a>是一个开源库，由带给你<a class="ae kz" href="https://github.com/ccxt/ccxt" rel="noopener ugc nofollow" target="_blank"> CCXT </a>的同一个开发者提供。</p><h2 id="79fe" class="md lb ht bd lc me mf mg lg mh mi mj lk kd mk ml lo ke mm mn ls kf mo mp lw mq dt translated"><strong class="ak">安装</strong></h2><p id="4d5e" class="pw-post-body-paragraph je jf ht jh b ji ly jk jl jm lz jo jp kd ma js jt ke mb jw jx kf mc ka kb kc hm dt translated">在编写任何代码之前，我们需要使用npm安装CCXWS包。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="f60e" class="md lb ht mw b fv na nb l nc nd">npm install ccxws</span></pre><h2 id="9579" class="md lb ht bd lc me mf mg lg mh mi mj lk kd mk ml lo ke mm mn ls kf mo mp lw mq dt translated"><strong class="ak">示例</strong></h2><p id="b3cf" class="pw-post-body-paragraph je jf ht jh b ji ly jk jl jm lz jo jp kd ma js jt ke mb jw jx kf mc ka kb kc hm dt translated">以下示例将连接到两个不同的websocket流。一个来自币安的交易流和一个来自KuCoin的二级订单流。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="1c3b" class="md lb ht mw b fv na nb l nc nd">const ccxws = require("ccxws");</span><span id="b87b" class="md lb ht mw b fv ne nb l nc nd">const binance = new ccxws.binance();<br/>const kucoin = new ccxws.kucoin();</span><span id="1823" class="md lb ht mw b fv ne nb l nc nd">// select binance markets<br/>const subscribeData1 = {<br/>  id: "ETHUSDT",<br/>  base: "ETH",<br/>  quote: "USDT",<br/>};</span><span id="5bb3" class="md lb ht mw b fv ne nb l nc nd">// select kucoin markets<br/>const subscribeData2 = {<br/>  id: "LTCBTC",<br/>  base: "LTC",<br/>  quote: "BTC",<br/>};</span><span id="2359" class="md lb ht mw b fv ne nb l nc nd">// handle the trade and order book events from websocket<br/>binance.on("trade", trade =&gt; console.log(trade));</span><span id="9745" class="md lb ht mw b fv ne nb l nc nd">kucoin.on("l2snapshot", snapshot =&gt; console.log(snapshot));</span><span id="2782" class="md lb ht mw b fv ne nb l nc nd">// subscribe to the trade and order book events<br/>binance.subscribeTrades(subscribeData1);</span><span id="6c53" class="md lb ht mw b fv ne nb l nc nd">kucoin.subscribeLevel2Snapshots(subscribeData2);</span></pre><p id="24f6" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">在连接到这些websocket流之后，您将立即开始接收更新。每次更新都必须使用定制逻辑来处理、组织和存储数据。</p><h1 id="fb03" class="la lb ht bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">多虾的</h1><p id="f3d2" class="pw-post-body-paragraph je jf ht jh b ji ly jk jl jm lz jo jp kd ma js jt ke mb jw jx kf mc ka kb kc hm dt translated">在开始我们的Node.js示例之前，先注册一个<a class="ae kz" href="https://developers.shrimpy.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jh hu"> Shrimpy通用加密交易API</strong></a>账户。</p><p id="fd83" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">注册后，选择“创建API密钥”按钮来生成您的主Api密钥。在生成您的密钥并将它们存储在一个安全的位置之后，确保您已经在API密钥上启用了“<strong class="jh hu">数据</strong>”权限。</p><blockquote class="jb jc jd"><p id="07cb" class="je jf jg jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">注意:在开始访问websocket数据之前，您需要选择一个订阅计划。对于本教程，我们建议订阅“个人”计划，该计划将为您提供对我们的websockets以及交易、投资组合和交易所账户管理端点的几乎无限制的访问。</p></blockquote><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="0652" class="md lb ht mw b fv na nb l nc nd">npm install shrimpy-node</span></pre><h2 id="77e5" class="md lb ht bd lc me mf mg lg mh mi mj lk kd mk ml lo ke mm mn ls kf mo mp lw mq dt translated"><strong class="ak">例子</strong></h2><p id="6901" class="pw-post-body-paragraph je jf ht jh b ji ly jk jl jm lz jo jp kd ma js jt ke mb jw jx kf mc ka kb kc hm dt translated">类似于我们上一个CCXT的例子，这个例子将订阅两个不同的websocket流。一个websocket流用于比特币基地专业贸易频道，第二个订阅用于北海巨妖订单簿频道。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="ea9c" class="md lb ht mw b fv na nb l nc nd">import { ShrimpyApiClient, ShrimpyWsClient, ISubscriptionRequest, IWebsocketMessage, IErrorMessage } from 'shrimpy-node';</span><span id="1e2e" class="md lb ht mw b fv ne nb l nc nd">// handle errors from the websockets<br/>let errorHandler = (error: IErrorMessage) =&gt; { console.log(error) };</span><span id="9248" class="md lb ht mw b fv ne nb l nc nd">// create the Shrimpy API client using Shrimpy master keys<br/>const publicKey = 'your_public_key';<br/>const privateKey = 'your_private_key';<br/>let shrimpyApiClient = new ShrimpyApiClient(publicKey, privateKey);</span><span id="6f41" class="md lb ht mw b fv ne nb l nc nd">// create the Shrimpy websocket client using a token<br/>let token = shrimpyApiClient.getToken();<br/>let shrimpyWsclient = new ShrimpyWsClient(errorHandler, token);</span><span id="0f72" class="md lb ht mw b fv ne nb l nc nd">// declare the markets for subscribing and unsubscribing<br/>const subscribeData1: ISubscriptionRequest = {<br/>    "type": "subscribe",<br/>    "pair": "btc-usd",<br/>    "exchange": "coinbasepro",<br/>    "channel": "trade"<br/>};</span><span id="84d7" class="md lb ht mw b fv ne nb l nc nd">const subscribeData2: ISubscriptionRequest = {<br/>    "type": "subscribe",<br/>    "pair": "eth-btc",<br/>    "exchange": "kraken",<br/>    "channel": "orderbook"<br/>};</span><span id="e828" class="md lb ht mw b fv ne nb l nc nd">const unsubscribeData1: ISubscriptionRequest = {<br/>    "type": "unsubscribe",<br/>    "pair": "btc-usd",<br/>    "exchange": "coinbasepro",<br/>    "channel": "trade"<br/>};</span><span id="59a3" class="md lb ht mw b fv ne nb l nc nd">const unsubscribeData2: ISubscriptionRequest = {<br/>    "type": "subscribe",<br/>    "pair": "eth-btc",<br/>    "exchange": "kraken",<br/>    "channel": "orderbook"<br/>};</span><span id="038b" class="md lb ht mw b fv ne nb l nc nd">let handler = (msg: IWebsocketMessage) =&gt; { console.log(msg); };</span><span id="5d5c" class="md lb ht mw b fv ne nb l nc nd">// connect and subscribe to the websocket channels<br/>client.connect();</span><span id="af5b" class="md lb ht mw b fv ne nb l nc nd">client.subscribe(subscribeData1, handler);<br/>client.subscribe(subscribeData2, handler);</span><span id="539b" class="md lb ht mw b fv ne nb l nc nd">client.unsubscribe(unsubscribeData1);<br/>client.unsubscribe(unsubscribeData2);</span><span id="3e0a" class="md lb ht mw b fv ne nb l nc nd">client.forceDisconnect();</span></pre><blockquote class="jb jc jd"><p id="6a7d" class="je jf jg jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">注意:这些例子没有解释如何在接收每个更新时作为客户机本地维护订单簿websocket。将需要额外的工作来维护订单簿的状态。这将需要根据您对订单簿的要求进行开发。</p></blockquote><p id="83c2" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">Shrimpy除了Node.js还支持一个Python客户端，你可以在这里 找到那个客户端<a class="ae kz" href="https://github.com/shrimpy-dev/shrimpy-python" rel="noopener ugc nofollow" target="_blank"> <strong class="jh hu">。</strong></a></p><h1 id="6d61" class="la lb ht bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">结论</h1><p id="4812" class="pw-post-body-paragraph je jf ht jh b ji ly jk jl jm lz jo jp kd ma js jt ke mb jw jx kf mc ka kb kc hm dt translated">CCXWS提供了一种便捷的方式来为每个单独的交换订阅websockets。然而，CCXWS并没有跨交换聚合websocket流，以便通过API进行通用访问。</p><p id="5045" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">维护每个websocket可能是一项重要的工作，因此<a class="ae kz" href="https://developers.shrimpy.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jh hu">Shrimpy web socket API</strong></a>旨在简化您管理所有exchange websocket连接的方式。</p><p id="cb52" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">今天试用一下<a class="ae kz" href="https://developers.shrimpy.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jh hu"> Shrimpy Trading &amp;数据API</strong></a>。这是开始在各大交易所收集数据的最简单方法。收集<strong class="jh hu">历史市场数据</strong>，访问<strong class="jh hu">实时websockets </strong>，执行<strong class="jh hu">高级交易策略</strong>，<strong class="jh hu">管理无限数量的用户</strong>。</p><ul class=""><li id="75e5" class="nf ng ht jh b ji jj jm jn kd nh ke ni kf nj kc nk nl nm nn dt translated"><a class="ae kz" href="https://github.com/shrimpy-dev/shrimpy-python" rel="noopener ugc nofollow" target="_blank"> Shrimpy Python库</a></li><li id="4a96" class="nf ng ht jh b ji no jm np kd nq ke nr kf ns kc nk nl nm nn dt translated"><a class="ae kz" href="https://github.com/shrimpy-dev/shrimpy-node" rel="noopener ugc nofollow" target="_blank"> Shrimpy Node.js库</a></li></ul><p id="a779" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated">不要忘记在<a class="ae kz" href="https://twitter.com/ShrimpyApp" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae kz" href="https://www.facebook.com/ShrimpyApp" rel="noopener ugc nofollow" target="_blank">脸书</a>上关注我们的更新，并在<a class="ae kz" href="https://t.me/ShrimpyGroup" rel="noopener ugc nofollow" target="_blank"> Telegram </a>上向我们令人惊叹的活跃社区提出任何问题。</p><p id="9fd9" class="pw-post-body-paragraph je jf ht jh b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hm dt translated"><em class="jg">虾队</em></p><h1 id="bfbc" class="la lb ht bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">附加阅读</h1><div class="kg kh fm fo ki kj"><a href="https://blog.shrimpy.io/blog/ccxt-live-crypto-exchange-price-ticker" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab ej"><div class="kl ab km cl cj kn"><h2 class="bd hu fv z el ko eo ep kp er et hs dt translated">CCXT实时加密交易所报价器[示例教程] | Shrimpy</h2><div class="kq l"><h3 class="bd b fv z el ko eo ep kp er et ek translated">我们将介绍两种不同的方法来生成实时价格行情。第一个策略是访问数据…</h3></div><div class="kr l"><p class="bd b gc z el ko eo ep kp er et ek translated">blog.shrimpy.io</p></div></div><div class="ks l"><div class="kt l ku kv kw ks kx iz kj"/></div></div></a></div><div class="kg kh fm fo ki kj"><a href="https://blog.shrimpy.io/blog/shrimpy-vs-ccxt-centralization-in-a-decentralized-ecosystem" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab ej"><div class="kl ab km cl cj kn"><h2 class="bd hu fv z el ko eo ep kp er et hs dt translated">与CCXT:分散生态系统中的集中化案例</h2><div class="kq l"><h3 class="bd b fv z el ko eo ep kp er et ek translated">加密货币领域有一种让一切开放、去中心化和免费的驱动力。当谈到…</h3></div><div class="kr l"><p class="bd b gc z el ko eo ep kp er et ek translated">blog.shrimpy.io</p></div></div><div class="ks l"><div class="nt l ku kv kw ks kx iz kj"/></div></div></a></div><div class="kg kh fm fo ki kj"><a href="https://hackernoon.com/trading-crypto-through-apis-a84b23cd05b" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab ej"><div class="kl ab km cl cj kn"><h2 class="bd hu fv z el ko eo ep kp er et hs dt translated">通过API交易加密货币</h2><div class="kq l"><h3 class="bd b fv z el ko eo ep kp er et ek translated">在本文中，我们将向您展示如何使用API设置加密货币交易。</h3></div><div class="kr l"><p class="bd b gc z el ko eo ep kp er et ek translated">hackernoon.com</p></div></div><div class="ks l"><div class="nu l ku kv kw ks kx iz kj"/></div></div></a></div><div class="kg kh fm fo ki kj"><a href="https://blog.shrimpy.io/blog/historical-crypto-price-candlestick-ohlcv-data" rel="noopener  ugc nofollow" target="_blank"><div class="kk ab ej"><div class="kl ab km cl cj kn"><h2 class="bd hu fv z el ko eo ep kp er et hs dt translated">历史加密价格烛台(OHLCV)数据| Shrimpy</h2><div class="kq l"><h3 class="bd b fv z el ko eo ep kp er et ek translated">为了扩展我们的历史数据产品，Shrimpy团队在Shrimpy developer中添加了新的端点…</h3></div><div class="kr l"><p class="bd b gc z el ko eo ep kp er et ek translated">blog.shrimpy.io</p></div></div><div class="ks l"><div class="nv l ku kv kw ks kx iz kj"/></div></div></a></div><blockquote class="nw"><p id="b751" class="nx ny ht bd nz oa ob oc od oe of kc ek translated"><a class="ae kz" href="https://coincodecap.com?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="oh oi oj ok ol iu fe ff paragraph-image"><a href="https://coincodecap.com?utm_source=coinmonks"><div class="fe ff og"><img src="../Images/160ce73bd06d46c2250251e7d5969f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*BoDnKUyK8p4hitHAJZ5Pdw.png"/></div></a></figure></div></div>    
</body>
</html>