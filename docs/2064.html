<html>
<head>
<title>Setting up a ‘Lightning Chair’ — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">搭建“闪电椅”——第1部分</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/setting-up-a-lightning-chair-part-1-e4b12d3f918b?source=collection_archive---------7-----------------------#2019-02-10">https://medium.com/coinmonks/setting-up-a-lightning-chair-part-1-e4b12d3f918b?source=collection_archive---------7-----------------------#2019-02-10</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="fe ff iq"><img src="../Images/96bc0e6913ac544939ec7cb5223bdd3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*IAuLEKBq2gFfAQsOZPjiwA.png"/></div></figure><p id="0b68" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">在这个由两部分组成的系列文章中，我将描述如何设置一个可以显示比特币闪电支付请求二维码的设备，并在支付后打开连接设备的电源。我会将控制器连接到按摩椅上，这样就可以在公共场所或Airbnb上使用。</p><p id="b6f7" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><strong class="iz hu">先决条件</strong></p><ul class=""><li id="1c9d" class="jv jw ht iz b ja jb je jf ji jx jm jy jq jz ju ka kb kc kd dt translated">比特币全节点(比特币-qt或bitcoind)</li><li id="3ea5" class="jv jw ht iz b ja ke je kf ji kg jm kh jq ki ju ka kb kc kd dt translated">淋巴结</li></ul><p id="1445" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">一个例子设置见我以前的教程<a class="ae kj" rel="noopener" href="/@martinschrer/installing-a-mainnet-lnd-node-on-windows-and-accessing-it-on-an-iphone-da1e63a613cb">这里</a>。</p><p id="da73" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><strong class="iz hu">所用材料(针对本部分教程)</strong></p><ul class=""><li id="5d60" class="jv jw ht iz b ja jb je jf ji jx jm jy jq jz ju ka kb kc kd dt translated">树莓派3B+(约40美元)</li><li id="2486" class="jv jw ht iz b ja ke je kf ji kg jm kh jq ki ju ka kb kc kd dt translated">3.5英寸液晶显示屏，例如<a class="ae kj" href="https://www.aliexpress.com/item/Best-Price-Original-3-5-LCD-TFT-Touch-Screen-Display-for-Raspberry-Pi-2-Model-B/32508151978.html?spm=a2g0s.9042311.0.0.689b4c4dgh1DLE" rel="noopener ugc nofollow" target="_blank">这款</a>(17美元)</li></ul><h2 id="043d" class="kk kl ht bd km kn ko kp kq kr ks kt ku ji kv kw kx jm ky kz la jq lb lc ld le dt translated"><strong class="ak">设置树莓派</strong></h2><p id="632a" class="pw-post-body-paragraph ix iy ht iz b ja lf jc jd je lg jg jh ji lh jk jl jm li jo jp jq lj js jt ju hm dt translated">根据屏幕的说明手册将LCD屏幕连接到树莓，然后使用屏幕附带的操作系统启动树莓Pi。</p><p id="ea5d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">从菜单栏打开一个shell，然后键入:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="c48c" class="kk kl ht lp b fv lt lu l lv lw">sudo raspi-config</span></pre><p id="938a" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">转到网络选项。将SSID设置为WIFI网络，然后将密码设置为WIFI密码。</p><p id="7e64" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">接下来，转到接口选项。然后选择“VNC”，启用VNC</p><p id="4c4a" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">使用以下命令重新启动覆盆子:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="6c12" class="kk kl ht lp b fv lt lu l lv lw">sudo reboot</span></pre><p id="c230" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">接下来，我们需要在您想要访问Pi的计算机上安装RealVNC Viewer。在此下载RealVNC查看器<a class="ae kj" href="https://www.realvnc.com/download/viewer/" rel="noopener ugc nofollow" target="_blank">并打开。exe文件。这是一个可移植的应用程序，所以你不需要安装它:</a></p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/50f8e308ca7c636104406e04ca3c3c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*QkCUvKmPwzWK3Qm2.png"/></div></figure><p id="354d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">如果您知道您的Pi的IP地址，请将其输入到窗口顶部的地址栏中。如果不知道，可以用<a class="ae kj" href="http://www.advanced-ip-scanner.com/index.php" rel="noopener ugc nofollow" target="_blank">高级IP扫描器</a>找到。</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/7f54f8a344c5739fc66c59feb203326d.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*L1kFhrWktztv3My6.png"/></div></figure><p id="617b" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">现在按Enter键，系统会提示您输入Pi的用户名和密码。输入pi和raspberry(如果您没有更改默认凭据)。</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/a5f76870344444f8c4b3cee5608e94ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*6yYKO9rHGzZ008L7.png"/></div></figure><p id="3fba" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">如果这是第一次使用RealVNC连接到Pi，您将得到一个安全警告。只需按下“继续”即可跳过它:</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/5b200594000d8701a4180b118b2827e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*SW-CzlOTKI_d9wwH.png"/></div></figure><p id="ce9f" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">Raspbian桌面将在VNC浏览器窗口中以非常低的分辨率打开:</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff lx"><img src="../Images/ff3db55df136493bf4a9ed3db2932956.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*jwWtDPcN43JLGeER.png"/></div></div></figure><p id="90ec" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">打开终端窗口，输入以下命令:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="1fda" class="kk kl ht lp b fv lt lu l lv lw">mkdir MyPython</span><span id="52c5" class="kk kl ht lp b fv mc lu l lv lw">cd /home/pi/MyPython</span><span id="7999" class="kk kl ht lp b fv mc lu l lv lw">python3 -m venv lnd</span><span id="9d84" class="kk kl ht lp b fv mc lu l lv lw">source lnd/bin/activate</span></pre><p id="3fe8" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">您的命令行现在应该带有前缀</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="c1ef" class="kk kl ht lp b fv lt lu l lv lw">(lnd) pi@raspberrypi:~/MyPython $</span></pre><p id="45a0" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">接下来输入以下命令来安装缺失的软件包(这可能需要一段时间):</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="2b8c" class="kk kl ht lp b fv lt lu l lv lw">pip install google</span><span id="dc92" class="kk kl ht lp b fv mc lu l lv lw">sudo pip install --upgrade google-cloud-pubsub</span><span id="f476" class="kk kl ht lp b fv mc lu l lv lw">sudo pip install --upgrade oauth2client</span><span id="b960" class="kk kl ht lp b fv mc lu l lv lw">pip install grpcio grpcio-tools googleapis-common-protos</span><span id="6e79" class="kk kl ht lp b fv mc lu l lv lw">git clone <a class="ae kj" href="https://github.com/googleapis/googleapis.git" rel="noopener ugc nofollow" target="_blank">https://github.com/googleapis/googleapis.git</a></span><span id="bba6" class="kk kl ht lp b fv mc lu l lv lw">curl -o rpc.proto -s <a class="ae kj" href="https://raw.githubusercontent.com/lightningnetwork/lnd/master/lnrpc/rpc.proto" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/lightningnetwork/lnd/master/lnrpc/rpc.proto</a></span><span id="1a68" class="kk kl ht lp b fv mc lu l lv lw">python -m grpc_tools.protoc --proto_path=googleapis:. --python_out=. --grpc_python_out=. rpc.proto</span><span id="b562" class="kk kl ht lp b fv mc lu l lv lw">pip install guizero</span><span id="e3f5" class="kk kl ht lp b fv mc lu l lv lw">pip install pyqrcode</span><span id="7913" class="kk kl ht lp b fv mc lu l lv lw">pip install pypng</span><span id="3d26" class="kk kl ht lp b fv mc lu l lv lw">pip install RPi.GPIO</span><span id="d50d" class="kk kl ht lp b fv mc lu l lv lw">nano ~/.config/lxsession/LXDE-pi/autostart</span></pre><p id="6342" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">最后一个命令在nano文本编辑器中打开自动启动文件。在底部添加以下一行:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="4b26" class="kk kl ht lp b fv lt lu l lv lw"><a class="ae kj" href="http://twitter.com/lxterminal" rel="noopener ugc nofollow" target="_blank">@lxterminal</a> -e /home/pi/MyPython/startgui.sh</span></pre><p id="5daf" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">自动启动文件的内容应该如下所示:</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="fe ff md"><img src="../Images/5bdf2c2e63b2e08745e57bb03047fa4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7QtmV77auUVWq4W1Ts-gFA.png"/></div></div></figure><p id="83b5" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">按Control+O，然后按enter。然后按Control+X。</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="fda4" class="kk kl ht lp b fv lt lu l lv lw">nano ~/MyPython/startgui.sh</span></pre><p id="78d2" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">输入以下文本:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="1c7b" class="kk kl ht lp b fv lt lu l lv lw">#!/bin/bash<br/>source /home/pi/MyPython/lnd/bin/activate<br/>cd /home/pi/MyPython<br/>python /home/pi/MyPython/control.py</span></pre><p id="5439" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">按Control+O，然后按enter。然后按Control+X。</p><p id="1edb" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">然后输入:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="71d2" class="kk kl ht lp b fv lt lu l lv lw">chmod +x startgui.sh</span></pre><p id="6cd5" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">接下来，从Github下载Python控制代码<a class="ae kj" href="https://github.com/toxonaut/LightningChair/blob/master/control.py" rel="noopener ugc nofollow" target="_blank"> control.py </a>。将其转移到文件夹/home/pi/MyPython/</p><p id="bfa5" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">将admin.macaroon和tls.cert文件从PC复制到raspberry的~/MyPython/lnd文件夹中</p><p id="e49d" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">复制一张自己喜欢的jpg格式的图片说“付费”或者类似于这个位置~/MyPython/。名字应该是paid.jpg。</p><p id="fcbe" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated">然后你可以重启树莓。如果一切安装正确，过一会儿屏幕上会显示一个二维码。</p><p id="a0cb" class="pw-post-body-paragraph ix iy ht iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hm dt translated"><a class="ae kj" rel="noopener" href="/@martinschrer/setting-up-a-lightning-chair-part-2-318ffe10dc40"> <strong class="iz hu">本教程的第二部分</strong> </a>将展示如何将树莓包装在定制的盒子中，以及如何安装连接的电子设备。</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><a href="http://bit.ly/2G71Sp7"><div class="fe ff me"><img src="../Images/449450761cd76f44f9ae574333f9e9af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKX2mtg7p1lOs7JmosPLsA.png"/></div></a></figure><blockquote class="mf"><p id="9824" class="mg mh ht bd mi mj mk ml mm mn mo ju ek translated"><a class="ae kj" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="mq mr ms mt mu iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mp"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>