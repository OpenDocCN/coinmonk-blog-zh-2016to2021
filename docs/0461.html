<html>
<head>
<title>Ethereum Ropsten Test Net on Azure VM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure虚拟机上的以太坊Ropsten测试网</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/connecting-to-ethereum-ropsten-test-net-on-azure-vm-ubuntu-server-16-04-lts-5cd9c6b5c666?source=collection_archive---------8-----------------------#2018-05-08">https://medium.com/coinmonks/connecting-to-ethereum-ropsten-test-net-on-azure-vm-ubuntu-server-16-04-lts-5cd9c6b5c666?source=collection_archive---------8-----------------------#2018-05-08</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="527e" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">Ubuntu Server 16.04</h2></div><p id="5db4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">当在以太坊上创建一个DAPP时，我们经常需要在可用的以太坊<a class="ae ke" href="https://testnet.etherscan.io/" rel="noopener ugc nofollow" target="_blank">测试网</a>上测试我们的DAPP。</p><p id="7648" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">很少有像<a class="ae ke" href="http://truffleframework.com/" rel="noopener ugc nofollow" target="_blank">松露</a>这样的优秀框架可以用于DAPP开发，这让开发者的生活变得简单了。truffle也支持使用<a class="ae ke" href="https://solidity.readthedocs.io/en/v0.4.23/" rel="noopener ugc nofollow" target="_blank"> Solidity </a>编写、编译和部署智能合约。</p><p id="e2f4" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">然而，如前所述，一旦开发完成，我们需要一些测试环境来验证我们新创建的DAPP的工作，在这篇文章中，我们将看到如何使用Azure VM (Ubuntu Server 16.04 LTS)连接到Ropsten Test Net。</p><h2 id="e5c9" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤1:创建Azure虚拟机(Ubuntu Server 16.04 LTS版)</h2><p id="4e56" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">在你的Azure订阅上创建一个虚拟机，详情你可以参考这个<a class="ae ke" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal" rel="noopener ugc nofollow" target="_blank">链接</a>，这篇文章我们将选择Ubuntu Server 16.04 LTS</p><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff lf"><img src="../Images/e26825bb955c23bf77c460278247f868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzFr9D1eO9pmPrUQNOXDSQ.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Search for Ubuntu Server 16.04 LTS</figcaption></figure><p id="ea70" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">按照“<em class="lv">创建虚拟机</em>刀片”下的步骤，对于此示例，我们选择了大小为“<em class="lv">标准D2s v3 (2个虚拟CPU，8 GB内存)</em>”的刀片，并进行部署。</p><h2 id="3e3b" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤2: SSH进入Azure VM</h2><p id="14fa" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">成功部署虚拟机后，您可以导航到其“<em class="lv">概述</em>”部分，并复制SSH命令以连接到虚拟机</p><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff lw"><img src="../Images/a574db77777b2ebcac0e7ab1705f8c5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ge1FgKJ8tIkkO3CR7a_k6w.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Create VM and get SSH address</figcaption></figure><p id="9f29" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">打开控制台，使用上面复制的SSH命令连接，输入您的密码，您应该能够成功连接到您的机器</p><figure class="lg lh li lj fq lk fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/f14ac4c6a8af137037b3babb01798a5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*CinYst-iG8hfnupZ6l5CSQ.png"/></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">SSH into VM</figcaption></figure><h2 id="96db" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">第三步:在Azure虚拟机上安装<a class="ae ke" href="http://supervisord.org/introduction.html" rel="noopener ugc nofollow" target="_blank">监控器</a></h2><p id="44e6" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">Supervisor是一个客户机/服务器系统，它允许用户在类似UNIX的操作系统上控制许多进程。要安装supervisor，请在ssh控制台上粘贴以下命令，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="4b3d" class="kf kg ht lz b fv md me l mf mg">$ sudo apt-get install supervisor</span></pre><h2 id="2ff0" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">第四步:安装<a class="ae ke" href="https://geth.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> GETH </a></h2><p id="bad9" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">GETH是以太坊协议的官方GO实现。要安装GETH，请在ssh控制台上按给定顺序粘贴以下命令，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="4899" class="kf kg ht lz b fv md me l mf mg">$ sudo apt-get install software-properties-common<br/>$ sudo add-apt-repository -y ppa:ethereum/ethereum<br/>$ sudo apt-get update<br/>$ sudo apt-get install geth</span></pre><h2 id="479b" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤5:配置supervisor来运行GETH</h2><p id="84d8" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">现在我们将为supervisor创建一个配置文件来运行GETH，我们将为此使用nano editor，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="3741" class="kf kg ht lz b fv md me l mf mg">$ sudo nano /etc/supervisor/conf.d/geth.conf</span></pre><p id="4dd3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">上面的命令将在ssh控制台中用geth.config打开编辑器，粘贴下面的代码并保存文件(<strong class="jk hu">注</strong> : —下面是两个破折号'-')，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="8b47" class="kf kg ht lz b fv md me l mf mg">[program:geth]<br/>command=/usr/bin/geth — testnet — fast — rpc — rpcaddr 127.0.0.1 — rpcport 6545 — rpccorsdomain * — rpcapi admin,db,eth,debug,miner,net,shh,txpool,personal,web3<br/>autostart=true <br/>autorestart=true <br/>stderr_logfile=/var/log/supervisor/geth.err.log <br/>stdout_logfile=/var/log/supervisor/geth.out.log</span></pre><h2 id="a1a2" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤6:重新启动supervisor来启动GETH</h2><p id="2726" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">一旦正确添加了配置文件，我们现在将重启supervisor来启动GETH，在ssh控制台上粘贴下面的命令，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="ee79" class="kf kg ht lz b fv md me l mf mg">$ sudo supervisorctl reload</span></pre><p id="0900" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这将启动GETH，节点将开始同步到Ropsten测试网，我们将需要<strong class="jk hu"> <em class="lv">耐心</em> </strong>在这里，因为GETH将同步Ropsten测试网，最新的当前块是<strong class="jk hu"> <em class="lv"> 3191876 </em> </strong>，检查<a class="ae ke" href="https://ropsten.etherscan.io/" rel="noopener ugc nofollow" target="_blank">这里</a> <strong class="jk hu"> <em class="lv">。</em>T13】</strong></p><h2 id="3dbf" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤7:测试，将控制台连接到GETH实例</h2><p id="e8b2" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">一旦同步完成，如何检查这一点？</p><p id="1ad8" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">通过连接一个控制台连接到GETH，在ssh控制台中粘贴下面的命令，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="8f89" class="kf kg ht lz b fv md me l mf mg">$ geth attach <a class="ae ke" href="http://127.0.0.1:6545" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:6545</a></span></pre><p id="f235" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">这将打开GETH控制台，按如下方式检查最新的块号，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="035e" class="kf kg ht lz b fv md me l mf mg">$ &gt; eth.blockNumber</span></pre><figure class="lg lh li lj fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="fe ff mh"><img src="../Images/d364121c4d02696db6b2e46cd3307b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lj8Qlj-ROO-6tz3XIN9OOQ.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Attaching to GETH console</figcaption></figure><p id="643b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">如果blockNumber和步骤6中的block number相同，GETH就完成了同步。</p><h2 id="2174" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤8:通过检查日志和输出进行故障排除</h2><p id="6a0d" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">我们可以在下面两个文件中检查日志和输出，</p><pre class="lg lh li lj fq ly lz ma mb aw mc dt"><span id="3b86" class="kf kg ht lz b fv md me l mf mg">$ sudo nano /var/log/supervisor/geth.err.log<br/>$ sudo nano /var/log/supervisor/geth.out.log</span></pre><h2 id="8869" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">步骤9:在Ropsten测试网上部署智能合约和DAPP</h2><p id="4148" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">现在，我们有了完全同步的节点，它连接到Ropsten TestNet。现在，您可以部署智能合同、创建帐户、部署dapps、使用GETH控制台。</p><h2 id="db80" class="kf kg ht bd kh ki kj kk kl km kn ko kp jr kq kr ks jv kt ku kv jz kw kx ky kz dt translated">结论</h2><p id="440b" class="pw-post-body-paragraph ji jj ht jk b jl la iu jn jo lb ix jq jr lc jt ju jv ld jx jy jz le kb kc kd hm dt translated">我们可以使用Azure VM轻松地为Ropsten TestNet设置一个测试节点，我们可以在Ropsten TestNet上部署和测试我们的dapps，然后再将其部署到以太坊MAINNET。</p></div></div>    
</body>
</html>