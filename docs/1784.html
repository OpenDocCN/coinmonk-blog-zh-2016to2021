<html>
<head>
<title>Adding Field Level Encryption to Hyperledger Private Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Hyperledger专用数据添加字段级加密</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/adding-field-level-encryption-to-hyperledger-private-data-d05b2f20244d?source=collection_archive---------0-----------------------#2018-11-14">https://medium.com/coinmonks/adding-field-level-encryption-to-hyperledger-private-data-d05b2f20244d?source=collection_archive---------0-----------------------#2018-11-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/bc4d50490c5e3ceaa6d2c97dbd2917b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*judTjcbHIjxlT3bU"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Photo by <a class="ae jf" href="https://unsplash.com/@jsalvino?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">John Salvino</a> on <a class="ae jf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="08f5" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">Hyperledger中的私有数据功能非常有助于在与其他不需要私有数据的组织(如组织C-F)的渠道中保持组织A和组织B(T4)之间的数据私有</p><p id="1798" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">企业级公司将需要对其授权组织内的私有数据进行更精细的控制。具体来说，这些公司需要保持个人私有数据字段可供批准的用户访问，同时让未批准的用户和具有root权限的管理员<strong class="ji hu">无法访问这些字段。通常，这种类型的访问控制是通过<strong class="ji hu"> HSM(硬件安全模块)</strong>完成的。</strong></p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/49a281338adecace7055e8f48997b078.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*YQ0ebJkksigNIYbfNyUilA.jpeg"/></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Typical external, network-connected HSM</figcaption></figure><p id="62a1" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">我已经在Hyperledger Fabric<a class="ae jf" href="https://hyperledger-fabric.readthedocs.io/en/release-1.3/private_data_tutorial.html" rel="noopener ugc nofollow" target="_blank">Marbles Private Data Sample</a>中添加了一个信用卡字段，以演示我们如何允许对私有数据进行<strong class="ji hu">字段级加密</strong>。我们的用例将允许计费查看客户的信用卡号，但其他任何人<strong class="ji hu">甚至授权对等用户中的根用户</strong>都不能访问信用卡号。</p><p id="887e" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">第一步是将信用卡字段添加到Golang链码文件<a class="ae jf" href="https://github.com/hyperledger/fabric-samples/blob/release-1.3/chaincode/marbles02_private/go/marbles_chaincode_private.go" rel="noopener ugc nofollow" target="_blank">marbles _ chain code _ private . go</a>的私有结构中。</p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kj"><img src="../Images/6ea46021f7f2f946dd0731a4ae609f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VqszMMt5MjQWWM175nes-g.png"/></div></div></figure><p id="f8fd" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">下一步是通过将args len改为不等于6来编辑initMarble func，这样我们就可以在价格之后传入加密的信用卡。然后加入<strong class="ji hu">信用卡:=字符串。TrimSpace(args[5]) </strong></p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kk"><img src="../Images/f33c64b90e9f6f39701b2e56d04aefb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ckIFQzTsWumdSx1lIphdLQ.png"/></div></div></figure><p id="16f7" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">对文件的最后一个编辑是将<strong class="ji hu">信用卡</strong>值添加到marblePrivateDetails指针中。</p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kl"><img src="../Images/8b28fa338be311a473de52117bb1ce6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mxrqjKoH9MAVLzFA_5gU5g.png"/></div></div></figure><p id="5267" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">可以在Hyperledger docker容器中执行以下步骤。<code class="eh km kn ko kp b">docker exec -it cli bash</code></p><p id="9732" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">步骤1 </strong> —将我们的测试信用卡字符串<strong class="ji hu">411111111111111</strong>传递给<a class="ae jf" href="https://www.openssl.org/" rel="noopener ugc nofollow" target="_blank"> openssl </a>并在CBC模式下使用256位密钥指定<a class="ae jf" href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" rel="noopener ugc nofollow" target="_blank"> AES </a>密码，然后在提示时输入计费密码。<code class="eh km kn ko kp b">echo “4111111111111111” | openssl enc -aes-256-cbc -a</code></p><p id="e127" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">第二步</strong> —复制加密的信用卡。<br/> <code class="eh km kn ko kp b">U2FsdGVkX1/eXpf/PjWAtPSUADmRh4t7ApAKUYoVpH8nCDaOx/cLWiZRGEd8KRHt</code></p><p id="27d2" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">第三步</strong> —用加密的信用卡初始化大理石2的私人数据。<br/> <code class="eh km kn ko kp b">peer chaincode invoke -o orderer.example.com:7050 — tls — cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C mychannel -n marblesp -c ‘{“Args”:[“initMarble”,”marble2",”blue”,”35",”tom”,”99",”U2FsdGVkX1/eXpf/PjWAtPSUADmRh4t7ApAKUYoVpH8nCDaOx/cLWiZRGEd8KRHt”]}’</code></p><p id="8245" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">第四步</strong> —查询marble2的私有数据。<code class="eh km kn ko kp b">peer chaincode query -C mychannel -n marblesp -c ‘{“Args”:[“readMarblePrivateDetails”,”marble2"]}’ <br/></code>节点上的管理员甚至root用户只能看到加密的信用卡字符串。这允许对等节点上的管理员和根用户完成他们的工作，同时保持信用卡数据的安全，并且在第5步中只对帐单部门的用户可见。</p><p id="d4b9" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">步骤5 </strong> —使用计费密码解密加密的信用卡。<code class="eh km kn ko kp b">echo “U2FsdGVkX1/eXpf/PjWAtPSUADmRh4t7ApAKUYoVpH8nCDaOx/cLWiZRGEd8KRHt” | openssl enc -d -aes-256-cbc -a</code></p><p id="5b73" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated"><strong class="ji hu">第6步</strong> —使用解密后的密码进行计费。<br/>T3】</p><figure class="kf kg kh ki fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff kq"><img src="../Images/86b2ea5e9c26ed1ca69725251a3f8658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcrBYSCet7rxbxPsnekbtw.png"/></div></div></figure><p id="9eec" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">前面的步骤旨在展示企业如何在Hyperledger或任何其他分散式区块链上为其组织的私有数据添加字段级加密。显然，这不会在生产中使用，而是使用基于此模型的<strong class="ji hu"> TDE(透明数据加密)</strong>解决方案。我一直在研究黑暗区块TDE，它将提供对称密码(AES，RC2，RC4，RC5，CAST，DES，Triple DES)和非对称密码(RSA(1024–4096)，DSA(1024–3072)，Diffie-Hellman，KCDSA)。</p><p id="cf3f" class="pw-post-body-paragraph jg jh ht ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hm dt translated">你觉得这篇文章怎么样？如果你喜欢它或者学到了什么，请留下你的掌声！<a class="ae jf" href="https://darkblock.io/" rel="noopener ugc nofollow" target="_blank"> DarkBlock.io </a>是一家区块链企业发展公司，我们一直在接纳新客户。通过<a class="ae jf" href="mailto:sheffield@darkblock.io" rel="noopener ugc nofollow" target="_blank"> sheffield@darkblock.io </a>联系我，或者访问我们的网站<a class="ae jf" href="https://darkblock.io/" rel="noopener ugc nofollow" target="_blank"> DarkBlock.io </a>！</p><blockquote class="kr"><p id="4dd9" class="ks kt ht bd ku kv kw kx ky kz la kd ek translated"><a class="ae jf" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="lc ld le lf lg iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lb"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>