# IPFS 和区块链结合时的问题

> 原文：<https://medium.com/coinmonks/what-i-learned-by-building-a-dapp-511f7181787f?source=collection_archive---------3----------------------->

## 使用 IPFS 和区块链的完全去中心化的博客应用。

![](img/0c8b7c37f43f599aec7d21c29971388c.png)

正如我在之前的博客中承诺的那样。在这篇博客中，我分享了一些关于使用 IPFS 和完全去中心化的区块链构建博客应用的想法。最好的部分是，它的认证是使用块链完成的。

## 什么是 IPFS 概述:

[IPFS](https://ipfs.io/) 是一个分布式文件系统，它使用基于内容的寻址系统。这意味着在常规的 HTTP 协议中，我们使用服务器的 IP 地址访问我们的文件，然后这个 IP 地址的服务器将从数据库中获取我们需要的文件。但在 IPFS，我们的整个文件被转换成一个单一的加密哈希，这个哈希用于访问我们的文件在未来。

与其直接解释这个 DAPP，不如让我们通过与常规博客应用的比较来理解它。

## 数据存储:

在常规的博客应用程序中，会有一个服务器为博客服务，如果用户写或编辑博客，它会被存储在数据库中。但是在 DAPP 中，当用户写或编辑一个博客时，整个内容都存储在 IPFS 中，并返回一个 base58 编码的加密哈希，以便将来访问这个博客。

## 认证:

每个人都知道网站服务的认证。基本上，整个身份验证过程用于确保在特定帐户上执行的操作由单个授权用户完成。同样，从 IPFS 接收的散列由用户用私钥签名，并作为分类帐的一部分存储在块链上。

所以基本上写完博客后，我会在上面签名，告诉网络上的每个人，记住这个博客是属于我的。

# 技术问题:

在建立这个 DAPP 的时候，我遇到了一些特殊的技术问题。其中，有一个似乎很重要。让我们知道如何解决它。

## 字符串问题:

*   我们编写一个名为 **blog、**的 *solidity 契约*来存储每个新 blog 的 IPFS 散列。用于存储每个用户内容的结构是…

*   每个用户都有这样一个映射..

> (用户公共地址)->包含用户所有博客散列的结构

*   通常，当数据存储在 IPFS 时，它会返回一个 base58 编码的字符串。

这将记录 base58 编码的字符串:

> qmde 4 B1 fet 12 wrd 67 zptn 82 FCM 1 Zn 3 qamkspxmbseu 5 dwb

*   这种刺痛被发送到 solidity，并添加到每个用户的博客列表中。
*   现在，如果我想检索任何特定用户的博客，我需要返回我存储的字符串数组。
*   但是在 solidity 中，我们只能返回像整数、字节、地址这样的原始数据类型的数组。但是我们将博客的散列数据存储在一个字符串数组中，该数组不能被返回。
*   所以还有一个选择。

## 解决方案:

*   由于字符串格式不适合存储，我们可以将字符串转换为字节，并以字节格式存储

> qmde 4 B1 fet 12 wrd 67 zptn 82 FCM 1 Zn 3 qamkspxmbseu 5 dwb

*   如果将上述 base 58 编码的字符串转换为十六进制，我们将得到一个 34 字节的十六进制字符串。

**注**:下面的字符串是十六进制的，意思是每两个字符等于一个字节

> 1220 D2 EC 4d 8 f 062614722 a9 f 5330 b 591 BBA 9376971 a 10 b 79 fc 514 cf 9 DC D6 caaeb 3c

*   但是 solidity 中允许的最大字节数是 32 字节。但是这个字符串的长度是 34 个字节。
*   在上述十六进制字符串中，第一个字节 ***12*** 表示我们正在使用 sha-256 算法将整个内容还原为这个唯一的字符串。
*   第二字节 ***20*** 表示其长度为 32 字节。看 ***20*** 是否被转换成十进制它给出 32。
*   所以基本上我们可以在存储字符串时省略前两个字节(即: ***1220*** )。意思是储存这个就够了。

> DD 2 EC 4d 8 f 062614722 a9f 5330 b 591 BBA 9376971 a 10 b 79 fc 514 cf 9 DC D6 caaeb 3c

*   这个字符串有 32 个字节，我们可以将它存储在 solidity 的 bytes32 数据类型中。

*   现在，我们可以在任何需要的时候轻松地返回 bytes32 数组。

> 如果你想了解更多关于这种转变的信息，请访问[这个网站](https://incoherency.co.uk/base58/)。如果你有兴趣在你的应用中使用它，你可以在[这个网站](https://incoherency.co.uk/base58/)中找到源代码。您还可以在这里找到一些关于 base58 到十六进制转换的伪代码和更详细的解释

您可以在我的 github 资源库中找到整个博客应用程序的代码，包括如何运行它的解释。

[](https://github.com/abhilashreddyy/blogging-Dapp-IPFS-and-blockchain) [## abhilashreddyy/博客-Dapp-IPFS-区块链

### 使用区块链和 IPFS 的博客应用。为 abhilashreddyy/blogging-Dapp-IPFS-区块链供稿…

github.com](https://github.com/abhilashreddyy/blogging-Dapp-IPFS-and-blockchain) 

顺便说一下，如果你对这个博客有任何疑问，请随意发表评论，或者如果你喜欢我的博客，请给我一个掌声，以示感谢:-)

下周我会带着另一篇关于区块链的博客尽快回来。在那之前拜拜。

> [直接在您的收件箱中获得最佳软件交易](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)