<html>
<head>
<title>What I learned from building Cool Cats NFT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从建立酷猫NFT中学到了什么</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/what-i-learned-from-building-cool-cats-nft-4057f279d400?source=collection_archive---------0-----------------------#2021-07-06">https://medium.com/coinmonks/what-i-learned-from-building-cool-cats-nft-4057f279d400?source=collection_archive---------0-----------------------#2021-07-06</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="7bab" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">坚实——真的</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/7d7b3e3931e68f4f1824840a09bfe570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-8NhoqAbcX5DPejRn4sqA.png"/></div></div></figure><p id="a9b4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">《酷猫》是我在以太坊区块链上发表的第二份实实在在的合同，而我是一个彻头彻尾的实实在在的新手。</p><p id="f46b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们都必须从某个地方开始，我想与你分享我的整个NFT之旅。</p><h1 id="bf8c" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">这一切是如何开始的</h1><p id="9b24" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">有一天，我发现了一个可爱的像素NFT，我立刻爱上了可爱的动画人物。我很早就去看比赛了，但是我的钱包里没有多少钱，所以我只买了一个。</p><p id="3327" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我没有太注意我的新NFT，直到它在reveal事件中孵化出来。然后，我花了一整天时间查看所有已经生成的新角色，四处挖掘以弄清楚一切是如何工作的，并勾勒出我认为是铸造过程的草图，但一切似乎都与solidity合同有关，看起来很可怕。</p><p id="0dd7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">几天过去了，一天早上我醒来，感觉自己很勇敢。打开谷歌，开始尝试理解一些可靠性合同。</p><p id="8d3d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我失败了。</p><p id="f1cb" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">最后，我请Lynq帮助我深入研究一些东西，我们终于开始在理解NFTs方面取得了一些进展。直到我写完<a class="ae ln" rel="noopener" href="/pinata/how-to-build-erc-721-nfts-with-ipfs-e76a21d8f914">这篇文章</a>，一切才真正明白过来。</p><h2 id="b0a0" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">测试测试测试MoonKids</h2><p id="7795" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">对NFTs如何工作有了基本的了解，我开始在Rinkeby testnet上构建自己的项目——<a class="ae ln" href="https://testnets.opensea.io/collection/moonkids-yt4oykg2yh" rel="noopener ugc nofollow" target="_blank">moon kids</a>。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/5673a77a94d1ebf1390ec1b28c15e773.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*fMse5QK8lwtpsvaJeblYZA.png"/></div></figure><p id="2b7f" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我知道我想创建一个生成像素项目，但我没有时间真正像素化大量的图形，所以我前往这个令人敬畏的<a class="ae ln" href="http://www.avatarsinpixels.com/chibi/clothing/Body" rel="noopener ugc nofollow" target="_blank">玩偶制造商</a>并创建了大量的测试图像。</p><p id="4958" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">添加了一些层:宠物、行星、气球和背景，我拥有了所有我需要的图形资产。可怕的时刻到了——稳固。</p><p id="cdf4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">老实说，我已经记不清我写了多少MoonKids测试合同了。我花了很长时间才最终确定Opensea在其网站上显示元数据中的图像背后的逻辑。</p><p id="8198" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我告诉过你我是个可靠的noob:)</p><p id="68f0" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">最后，我让一切都工作了，我甚至设法弄清楚如何屏蔽预先生成的元数据，这样人们就无法通过数据寻找最稀有的令牌。</p><h2 id="74c7" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">该上主网了</h2><p id="eb1d" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">我很有信心，我现在可以建立一个坚实的合同，所以我说服了Lynq(花了5秒钟)来帮助我，雇佣了一些像素艺术家，并开始工作<a class="ae ln" href="https://twitter.com/faticorns" rel="noopener ugc nofollow" target="_blank">fati goens</a>。</p><p id="1b22" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">早期主要是试图找出我们的角色设计，并用PHP建立我们的角色分层系统。这是容易的部分，因为Lynq和我都有超过30年的PHP经验。是的，我们比你想象的要老:)</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff md"><img src="../Images/d63b052acc969649f6734071c042848a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*46xWU4qHNkLORA7kalz_pw.gif"/></div></div></figure><p id="25ef" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">艺术品是一个不断发展的过程，但我们最终决定采用上述卡片格式。该示例缺少随机名称和#id。</p><p id="6f0a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我整理了一份合同，然后我们开始销售，卖给一个人——令人敬畏的Shamdoo。可悲的是，我们还没有完善我们的系统，他觉得气体太高。我们立即停止销售，重新开始。是的，我们全额退款给他，包括汽油费和所有费用。</p><p id="a5a8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">排队是我一生中最头疼的事…</p><h1 id="bee0" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">优化可靠性合同</h1><p id="a6c8" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">实际上，我喜欢优化代码(完全是个怪胎)。我已经花了无数个小时让代码版本互相竞争，试图减少毫秒和CPU的使用，但优化可靠性感觉像是一个完全不同的野兽。</p><h2 id="774d" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">为更便宜的铸币修剪gwei</h2><p id="9f66" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">一开始，我会对我的合同做些小改动，然后通过<a class="ae ln" href="https://remix.ethereum.org/" rel="noopener ugc nofollow" target="_blank"> remix </a>把它们部署到Rinkeby。然后我会运行一个交易并比较气体。</p><p id="0bcd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">史诗noob就在这里:P</p><p id="b5c8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">显然，这种方法既慢又疯狂。我知道一定有更好的方法——回到谷歌和StackOverflow。</p><p id="32c4" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我最终找到了这篇关于<a class="ae ln" href="https://rahulsethuram.medium.com/the-new-solidity-dev-stack-buidler-ethers-waffle-typescript-tutorial-f07917de48ae" rel="noopener">安全帽</a>的文章和这些关于优化可靠性合同的文章:</p><div class="me mf fm fo mg mh"><a rel="noopener follow" target="_blank" href="/layerx/how-to-reduce-gas-cost-in-solidity-f2e5321e0395"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hu fv z el mm eo ep mn er et hs dt translated">如何降低燃气成本</h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated">在大多数情况下，气体效率的优先级往往较低。由于许多项目关注安全性或…</h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv js mh"/></div></div></a></div><div class="me mf fm fo mg mh"><a rel="noopener follow" target="_blank" href="/coinmonks/gas-optimization-in-solidity-part-i-variables-9d5775e43dde"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hu fv z el mm eo ep mn er et hs dt translated">固体中的气体优化第一部分:变量</h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated">Gas优化是开发以太坊智能合约所特有的挑战。</h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated">medium.com</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv js mh"/></div></div></a></div><div class="me mf fm fo mg mh"><a rel="noopener follow" target="_blank" href="/coinmonks/math-in-solidity-part-3-percents-and-proportions-4db014e080b1"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hu fv z el mm eo ep mn er et hs dt translated">坚实的数学(第三部分:百分比和比例)</h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated">这篇文章是关于在Solidity中做数学的系列文章的第三篇。这次的主题是:百分之……</h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated">medium.com</p></div></div><div class="mq l"><div class="mx l ms mt mu mq mv js mh"/></div></div></a></div><p id="87a6" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">最后，我有了一些可靠的信息，我们出发去比赛了。</p><p id="fc40" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我在生活和IRL工作之间偷偷进行了一些合同优化，但是进展太慢了，我不喜欢，所以我拉了另一个朋友，Adam。接下来的周末真的很有趣:Lynq、Adam和我都拿出了我最新的git回购协议，并尝试了我们能想到的任何降低汽油价格的方法。</p><p id="b6f2" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们的目标是获得尽可能低的汽油，因此铸造对用户来说更便宜，我们发现了一些有趣的方法。</p><h2 id="5c83" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">局部变量</h2><p id="12c3" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">许多NFT合同似乎借用了代码，而没有完全理解它是做什么的，甚至懒得纠正错误或优化它。一个非常普遍的问题(如果你可以这么说的话)是不必要的使用<strong class="jw hu"> totalSupply() </strong>函数。</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="5327" class="lo kr ht mz b fv nd ne l nf ng">function adopt(uint256 num) public payable {<br/>  require(totalSupply() &lt; MAX_TOKENS, "Sale has already ended");<br/>  require(num &gt; 0 &amp;&amp; num &lt;= 20, "You can adopt minimum 1, maximum 20");<br/>  require(totalSupply().add(num) &lt;= MAX_TOKENS, "Exceeds MAX_TOKENS");<br/>  require(msg.value &gt;= calculatePrice().mul(num), "Ether value sent is below the price");<br/><br/>  for (uint i = 0; i &lt; num; i++) {<br/>    uint mintIndex = totalSupply();<br/>    _safeMint(msg.sender, mintIndex);<br/>  }<br/>}</span></pre><p id="0e7b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">每次调用totalSupply()都会增加用户的成本，从而导致更高的油价。</p><p id="d440" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这可以这样写:</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="61d6" class="lo kr ht mz b fv nd ne l nf ng">function adopt(uint256 num) public payable {<br/>  uint256 totalSupply = totalSupply();<br/>  require(totalSupply &lt; MAX_TOKENS, "Sale has already ended");<br/>  require(num &gt; 0 &amp;&amp; num &lt;= 20, "You can adopt minimum 1, maximum 20");<br/>  require(totalSupply.add(num) &lt;= MAX_TOKENS, "Exceeds MAX_TOKENS");<br/>  require(msg.value &gt;= calculatePrice().mul(num), "Ether value sent is below the price");<br/><br/>  for (uint i = 0; i &lt; num; i++) {<br/>    _safeMint(msg.sender, totalSupply + i);<br/>  }<br/>}</span></pre><p id="0beb" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这个简单的改变大大减少了汽油，但是等等，还有更多！</p><h2 id="39ea" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">条件式</h2><p id="45bd" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">每个人都知道如何使用条件，但我们什么时候真正考虑过实际发生的事情呢？</p><p id="28dd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">看看这一行:</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="73f8" class="lo kr ht mz b fv nd ne l nf ng">require(num &gt; 0 &amp;&amp; num &lt;= 20, "You can adopt minimum 1, maximum 20");</span></pre><p id="d63e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">它的功能很清楚，但实际上，它做得太多了。</p><p id="24ca" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">假设没有用户会尝试铸造0代币是安全的，因此我们可以立即删除它，节省一些汽油——大约3或4 gwei(全部加起来)</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="79bf" class="lo kr ht mz b fv nd ne l nf ng">require(num &lt;= 20, "You can adopt maximum 20");</span></pre><p id="139c" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这种小于或等于实际上是在做两件事，而且都耗费汽油:</p><ul class=""><li id="92f2" class="nh ni ht jw b jx jy ka kb kd nj kh nk kl nl kp nm nn no np dt translated">安全数学解决方案。</li><li id="1dfc" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt translated">我对安全数学唯一的问题是它的过度使用。你不必使用safeMaths来做(如果我错了，请纠正我):</li></ul><p id="353e" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">为此使用safeMaths只会增加额外的汽油成本。</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="9fb1" class="lo kr ht mz b fv nd ne l nf ng">require(num &lt; 21, "You can adopt maximum 20");</span></pre><p id="c4cd" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">然而，请做你自己的研究，因为我显然不是专家。</p><h2 id="a2a6" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">打造酷猫</h2><p id="7079" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">在制作Faticorns的时候，Lynq和我与<a class="ae ln" href="http://www.twitter.com/cloncast" rel="noopener ugc nofollow" target="_blank">克隆</a>和<a class="ae ln" href="http://www.twitter.com/evanluza" rel="noopener ugc nofollow" target="_blank">埃文</a>合作，开始制作酷猫。我们觉得多积累点经验也无妨。</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="551d" class="lo kr ht mz b fv nd ne l nf ng">function calculatePriceForToken(uint _id) public view returns (uint256) {<br/>  require(_id &lt; MAX_TOKEN, "Sale has already ended");<br/><br/>  if (_id &gt;= 9900) {<br/>    return 1000000000000000000;<br/>  } else if (_id &gt;= 9500) {<br/>    return 640000000000000000;<br/>  } else if (_id &gt;= 7500) {<br/>    return 320000000000000000;<br/>  } else if (_id &gt;= 3500) {<br/>    return 160000000000000000;<br/>  } else if (_id &gt;= 1500) {<br/>    return 80000000000000000;<br/>  } else if (_id &gt;= 500) {<br/>    return 40000000000000000;<br/>  } else {<br/>    return 20000000000000000;<br/>  }<br/>}</span></pre><p id="1ad0" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">酷猫固体合同</p><h2 id="7912" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">这份合同真的没有花哨的功能，它只是允许用户铸造一个NFT令牌，并给我开始和暂停销售、改变价格和改变baseUri的能力——基本上就是这样。</h2><p id="30fe" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">您可以在此查看合同<a class="ae ln" href="https://etherscan.io/address/0x1a92f7381b9f03921564a437210bb9396471050c#code" rel="noopener ugc nofollow" target="_blank"/></p><p id="a73b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">元数据服务器</p><p id="bc59" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">你可能见过很多盲目铸造的NFT。人们铸造他们的代币，在未来的某个时刻，它们会被揭示。</p><p id="c2fa" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">盲目铸造可能是一个很酷的功能，但酷猫通过它们的背景显示出它们的稀有性:</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="9dcd" class="lo kr ht mz b fv nd ne l nf ng">uint256 value = 100 / 2;</span></pre><p id="b8d8" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我们希望用户能够创造新的游戏，并且能够立即看到他们的猫，重现小时候打开口袋妖怪卡片的感觉。这意味着我们需要一种方法来屏蔽造币前的元数据，并立即显示造币后的真实元数据。</p><p id="fa45" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我尝试了几种不同的方法，最终确定了一个非常简单的解决方案(分享测试版本，而不是最终版本)。</p><h1 id="72eb" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">我只是使用web3监听事务，并检查该文件是否存在于sold_tokens目录中。如果它不见了，就把相关文件复制到适当的位置。</h1><p id="1b16" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">这段代码还运行在一个5分钟的计时器上，以捕捉web3可能错过的任何内容。</p><h2 id="1fdd" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">简单，没有复杂的运动部件出错。</h2><p id="7d38" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">字符生成器</p><p id="b3ff" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">这简单地使用良好的旧PHP将资产图像层叠在彼此之上，以创建期望的最终产品:</p><h2 id="f943" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated">下一步是什么？</h2><p id="fa5a" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">我们对酷猫有很大的计划，其中之一是在未来的合同和第二代繁殖。社区仍在讨论如何实现这一点。</p><p id="a47a" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">现在，我们正专注于建立酷猫世界。他们共同生活的城镇或城市。一个简单的方法来扎根社区，将他们结合在一起，创造一种归属感和拥有感。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff nv"><img src="../Images/ae763ab7cc1f682e230b95e646a98a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCXRAvThepzxlLXqPIQ0xQ.png"/></div></div><figcaption class="nw nx fg fe ff ny nz bd b be z ek">Random screenshot of cats from opensea</figcaption></figure><p id="0f86" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">部分所有权甚至可能包括给你的猫重新命名的方法。更多信息请见另一篇文章。</p><p id="7a51" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">尽管如此，我们接受社区的命令。如果社区决定反对任何东西，我们就废除它。</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="4a76" class="lo kr ht mz b fv nd ne l nf ng">async writeIfMissing(id){<br/>    //check if file exists<br/>    try {<br/>      const file = `./sold_tokens/${id}`;<br/>      const final_file = `./final_metadata/${id}`;<br/>      // file missing<br/>      if (!<strong class="mz hu"><em class="oa">fs</em></strong>.existsSync(file) &amp;&amp; <strong class="mz hu"><em class="oa">fs</em></strong>.existsSync(final_file)) {<br/>        try {<br/>          await this.logTransfer(id);<br/>        } catch (err) {<br/>          <strong class="mz hu"><em class="oa">console</em></strong>.log(err);<br/>        }<br/>      }<br/>    } catch(err) {<br/>      <strong class="mz hu"><em class="oa">console</em></strong>.error(err)<br/>    }<br/>  }<br/>}</span><span id="9da0" class="lo kr ht mz b fv ob ne l nf ng">async logTransfer(id) {<br/>  try {<br/>    var oldPath = `./final_metadata/${id}`;<br/>    var newPath = `./sold_tokens/${id}`;<br/><br/>    <strong class="mz hu"><em class="oa">fs</em></strong>.copyFile(oldPath, newPath, function (err) {<br/>      if (err) throw err<br/>    })<br/>  } catch (err) {<br/>    <strong class="mz hu"><em class="oa">console</em></strong>.log(err);<br/>  }<br/>}</span><span id="bf6d" class="lo kr ht mz b fv ob ne l nf ng">...</span></pre><p id="3aba" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">去哪里找我</p><p id="f739" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">我通常可以在酷猫不和频道找到https://discord.gg/WhBAAHnSz4<br/>T3</p><p id="a5c9" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">或者在推特上<br/><a class="ae ln" href="https://twitter.com/xtremetom" rel="noopener ugc nofollow" target="_blank">https://twitter.com/xtremetom</a></p><h2 id="c775" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated"><a class="ae ln" href="https://twitter.com/coolcatsnft" rel="noopener ugc nofollow" target="_blank">https://twitter.com/coolcatsnft</a></h2><p id="c9a3" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">最后一句话</p><pre class="jj jk jl jm fq my mz na nb aw nc dt"><span id="0ae6" class="lo kr ht mz b fv nd ne l nf ng">&lt;?php</span><span id="e13d" class="lo kr ht mz b fv ob ne l nf ng">$x = $y = <em class="oa">1080</em>;<br/>$final_img = imagecreatetruecolor($x, $y);<br/>imagealphablending($final_img, <em class="oa">true</em>);<br/>imagesavealpha($final_img, <em class="oa">true</em>);<br/><br/>// background<br/>$hex = hex2rgb($GLOBALS['config']-&gt;tier_bg_colors-&gt;$tierName);<br/>$bg_color = imagecolorallocate($final_img, $hex[<em class="oa">0</em>], $hex[<em class="oa">1</em>], $hex[<em class="oa">2</em>]);<br/>imagefill($final_img, <em class="oa">0</em>, <em class="oa">0</em>, $bg_color);<br/><br/>// BODY<br/>$body = imagecreatefrompng("./animated_images/Body/basic blue/1.png");<br/>imagecopy($final_img, $body, <em class="oa">0</em>, <em class="oa">0</em>, <em class="oa">0</em>, <em class="oa">0</em>, $x, $y);<br/><br/>// SHIRT<br/>$shirt = imagecreatefrompng("./animated_images/Shirt/$combo-&gt;shirt/1.png");<br/>imagecopy($final_img, $shirt, <em class="oa">0</em>, <em class="oa">0</em>, <em class="oa">0</em>, <em class="oa">0</em>, $x, $y);</span><span id="359d" class="lo kr ht mz b fv ob ne l nf ng">...</span></pre><h1 id="5855" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">我觉得这么说很傻，但我收到了太多的信息，我觉得这可能会为你我节省一些时间。</h1><p id="e3de" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">我有一份全职工作，再加上酷猫，我工作忙得不可开交，所以很遗憾，我不得不拒绝每一份工作邀请。</p><p id="4f20" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">但是我总是愿意尽我所能分享资源和建议。</p><p id="e11b" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">使用Rarible [2021]创建并出售您的第一个NFT</p><p id="474d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">在本文中，我将讨论加密硬币和代币之间的区别。然后，我将讨论可替代的和…</p><h1 id="1ccd" class="kq kr ht bd ks kt ku kv kw kx ky kz la iz lb ja lc jc ld jd le jf lf jg lg lh dt translated">blog.coincodecap.com</h1><p id="3882" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated">加入Coinmonks <a class="ae ln" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae ln" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>获取每日<a class="ae ln" href="http://coincodecap.com/" rel="noopener ugc nofollow" target="_blank">加密新闻</a></p><p id="0e53" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">另外，阅读</p><p id="583d" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><a class="ae ln" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">复制交易</a> | <a class="ae ln" rel="noopener" href="/coinmonks/crypto-tax-software-ed4b4810e338">加密税务软件</a></p><h2 id="577b" class="lo kr ht bd ks lp lq lr kw ls lt lu la kd lv lw lc kh lx ly le kl lz ma lg mb dt translated"><a class="ae ln" href="https://coincodecap.com/grid-trading" rel="noopener ugc nofollow" target="_blank">网格交易</a> | <a class="ae ln" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069">加密硬件钱包</a></h2><p id="44c4" class="pw-post-body-paragraph ju jv ht jw b jx li iu jz ka lj ix kc kd lk kf kg kh ll kj kk kl lm kn ko kp hm dt translated"><a class="ae ln" href="http://Top 4 Telegram Channels for Crypto Traders" rel="noopener ugc nofollow" target="_blank">密码电报信号</a> | <a class="ae ln" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></p><p id="eb04" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated"><a class="ae ln" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">最佳加密交易所</a> | <a class="ae ln" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">印度最佳加密交易所</a></p><p id="93a7" class="pw-post-body-paragraph ju jv ht jw b jx jy iu jz ka kb ix kc kd ke kf kg kh ki kj kk kl km kn ko kp hm dt translated">开发人员的最佳加密API</p><div class="me mf fm fo mg mh"><a href="https://blog.coincodecap.com/create-nft" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hu fv z el mm eo ep mn er et hs dt translated">最佳<a class="ae ln" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">密码借贷平台</a></h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated"><a class="ae ln" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">免费加密信号</a> | <a class="ae ln" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">加密交易机器人</a></h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated"><a class="ae ln" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">杠杆代币</a>终极指南</p></div></div><div class="mq l"><div class="oc l ms mt mu mq mv js mh"/></div></div></a></div><blockquote class="od"><p id="e28e" class="oe of ht bd og oh oi oj ok ol om kp ek translated"><a class="ae ln" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank"> Bookmap评论</a> | <a class="ae ln" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank">美国5大最佳加密交易所</a></p></blockquote><h2 id="15d6" class="lo kr ht bd ks lp on lr kw ls oo lu la kd op lw lc kh oq ly le kl or ma lg mb dt translated">最佳加密<a class="ae ln" rel="noopener" href="/coinmonks/hardware-wallets-dfa1211730c6">硬件钱包</a> | <a class="ae ln" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns评论</a></h2><ul class=""><li id="20fb" class="nh ni ht jw b jx li ka lj kd os kh ot kl ou kp nm nn no np dt translated"><a class="ae ln" href="https://coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">新加坡十大最佳加密交易所</a> | <a class="ae ln" href="https://coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank">购买AXS </a></li><li id="723e" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt translated"><a class="ae ln" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">红狗赌场评论</a> | <a class="ae ln" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx评论</a> | <a class="ae ln" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank">造币厂评论</a></li><li id="874f" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt translated"><a class="ae ln" href="https://coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">投资印度的最佳密码</a>|<a class="ae ln" href="https://coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank">WazirX P2P</a>|<a class="ae ln" href="https://coincodecap.com/hi-dollar-review" rel="noopener ugc nofollow" target="_blank">Hi Dollar Review</a></li><li id="f33b" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" rel="noopener" href="/coinmonks/crypto-exchange-dd2f9d6f3769">Best Crypto Exchange</a> | <a class="ae ln" rel="noopener" href="/coinmonks/bitcoin-exchange-in-india-7f1fe79715c9">Best Crypto Exchange in India</a></li><li id="47a8" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" rel="noopener" href="/coinmonks/best-crypto-apis-for-developers-5efe3a597a9f">Best Crypto APIs</a> for Developers</li><li id="b359" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt">Best <a class="ae ln" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">Crypto Lending Platform</a></li><li id="3c98" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" rel="noopener" href="/coinmonks/free-crypto-signals-48b25e61a8da">Free Crypto Signals</a> | <a class="ae ln" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">Crypto Trading Bots</a></li><li id="9487" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt">An ultimate guide to <a class="ae ln" rel="noopener" href="/coinmonks/leveraged-token-3f5257808b22">Leveraged Token</a></li><li id="7437" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" href="https://coincodecap.com/bookmap-review-2021-best-trading-software" rel="noopener ugc nofollow" target="_blank">Bookmap Review</a> |<a class="ae ln" href="https://coincodecap.com/crypto-exchange-usa" rel="noopener ugc nofollow" target="_blank"> 5 Best Crypto Exchanges in the USA</a></li><li id="5453" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt">The Best Crypto<a class="ae ln" rel="noopener" href="/coinmonks/hardware-wallets-dfa1211730c6"> Hardware wallet</a> |<a class="ae ln" rel="noopener" href="/coinmonks/bitbns-review-38256a07e161"> Bitbns Review</a></li><li id="48d4" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" href="https://coincodecap.com/crypto-exchange-in-singapore" rel="noopener ugc nofollow" target="_blank">10 Best Crypto Exchange in Singapore</a> |<a class="ae ln" href="https://coincodecap.com/buy-axs-token" rel="noopener ugc nofollow" target="_blank"> Buy AXS</a></li><li id="df9a" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" href="https://coincodecap.com/red-dog-casino-review" rel="noopener ugc nofollow" target="_blank">Red Dog Casino Review</a> |<a class="ae ln" href="https://coincodecap.com/swyftx-review" rel="noopener ugc nofollow" target="_blank"> Swyftx Review</a> |<a class="ae ln" href="https://coincodecap.com/coingate-review" rel="noopener ugc nofollow" target="_blank"> CoinGate Review</a></li><li id="4ec2" class="nh ni ht jw b jx nq ka nr kd ns kh nt kl nu kp nm nn no np dt"><a class="ae ln" href="https://coincodecap.com/best-crypto-to-invest-in-india-in-2021" rel="noopener ugc nofollow" target="_blank">Best Crypto to Invest in India</a> |<a class="ae ln" href="https://coincodecap.com/wazirx-p2p" rel="noopener ugc nofollow" target="_blank"> WazirX P2P</a> |<a class="ae ln" href="https://coincodecap.com/hi-dollar-review" rel="noopener ugc nofollow" target="_blank"> Hi Dollar Review</a></li></ul></div></div>    
</body>
</html>