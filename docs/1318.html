<html>
<head>
<title>Useful Functions For Tensorflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">张量流的有用函数</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/https-medium-com-useful-functions-for-tensorflow-fc9f27d6175b?source=collection_archive---------6-----------------------#2018-08-14">https://medium.com/coinmonks/https-medium-com-useful-functions-for-tensorflow-fc9f27d6175b?source=collection_archive---------6-----------------------#2018-08-14</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/bd2ba479b39778a5ac6e9e6434c04417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kWfJpgQpN-Qb58-glqz1Qw.jpeg"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Tensorflow</figcaption></figure><p id="7068" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">Tensorflow是一个非常棒的深度学习库，提供了很多功能。Tensorflow提供了许多特性，这使得开发深度神经网络变得更加容易。</p><p id="332b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">在本帖中，我们将看到一些有用的预定义和用户定义的方法，这些方法可能对你使用tensorflow有所帮助。</p><h1 id="0e93" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">内置方法</h1><h2 id="47d7" class="lb ke ht bd kf lc ld le kj lf lg lh kn jq li lj kr ju lk ll kv jy lm ln kz lo dt translated">1.<a class="ae lp" href="https://www.tensorflow.org/api_docs/python/tf/zeros_like" rel="noopener ugc nofollow" target="_blank"> tf.zeros_like </a></h2><p id="8e3c" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">该函数将一个张量作为输入，并返回一个值为零、形状和类型与输入张量相同的张量。<br/> <code class="eh lv lw lx ly b">tensor = tf.constant([[1, 2, 3], [4, 5, 6]])<br/>tf.zeros_like(tensor) # [[0, 0, 0], [0, 0, 0]]<br/></code>该功能在从给定输入图像创建黑色图像的情况下很有用。<br/> *如果想明确给出形状，可以使用tf.zeros。如果你想初始化1而不是0，你可以使用tf.ones_like。</p><h2 id="eebf" class="lb ke ht bd kf lc ld le kj lf lg lh kn jq li lj kr ju lk ll kv jy lm ln kz lo dt translated"><strong class="ak"> 2。</strong> <a class="ae lp" href="https://www.tensorflow.org/api_docs/python/tf/pad" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> tf.pad </strong> </a></h2><p id="ccb7" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">在具有常数值的张量周围添加指定的填充，从而增加张量的维数。<br/> <code class="eh lv lw lx ly b">t = tf.constant([[1, 2, 3], [4, 5, 6]])<br/>paddings = tf.constant([[1, 1,], [2, 2]])<br/># 'constant_values' is 0.<br/># rank of 't' is 2.<br/>tf.pad(t, paddings, "CONSTANT") # [[0, 0, 0, 0, 0, 0, 0],<br/> # [0, 0, 1, 2, 3, 0, 0],<br/> # [0, 0, 4, 5, 6, 0, 0],<br/> # [0, 0, 0, 0, 0, 0, 0]]<br/></code>它可以用来在图像周围添加边框。</p><h2 id="f387" class="lb ke ht bd kf lc ld le kj lf lg lh kn jq li lj kr ju lk ll kv jy lm ln kz lo dt translated">3.<a class="ae lp" href="https://www.tensorflow.org/api_docs/python/tf/enable_eager_execution" rel="noopener ugc nofollow" target="_blank">TF . enable _ eager _ execution</a></h2><p id="aacc" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">这有助于您在执行张量流代码时运行它们。使用急切执行，您不需要构建图形并在会话中运行它。你可以在这里阅读更多关于如何使用急切执行<a class="ae lp" href="https://towardsdatascience.com/eager-execution-tensorflow-8042128ca7be" rel="noopener" target="_blank">的内容。<br/>*急切执行需要是导入tensorflow后的第一条语句。</a></p><h1 id="8711" class="kd ke ht bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">用户定义的函数</h1><p id="4bf3" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">下面是我在代码中使用的一些函数。这些功能无疑使许多事情变得更容易。</p><h2 id="291b" class="lb ke ht bd kf lc ld le kj lf lg lh kn jq li lj kr ju lk ll kv jy lm ln kz lo dt translated">1.可视化卷积图层的权重</h2><p id="9c80" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">如果你想看到卷积滤波器的样子，你可以使用下面的函数。</p><pre class="lz ma mb mc fq md ly me mf aw mg dt"><span id="b4c6" class="lb ke ht ly b fv mh mi l mj mk">def plot_conv_weights(weights, input_channel = 0):<br/>#Weights are the filter values which you need to pass for visualization<br/>#Input Channel is the channel for which you want all the filters</span><span id="214d" class="lb ke ht ly b fv ml mi l mj mk"> w = sess.run(weights)<br/> <br/> w_min = np.min(w)<br/> w_max = np.max(w)<br/> <br/> num_filters = w.shape[3]<br/> <br/> num_grids = math.ceil(math.sqrt(num_filters))<br/> <br/> fig, axes = plt.subplots(num_grids, num_grids)<br/> fig.subplots_adjust(hspace = 0.3, wspace= 0.3)<br/> for i, ax in enumerate(axes.flat):<br/> if i&lt;num_filters:<br/> img = w[:,:, input_channel, i]<br/> <br/> ax.imshow(img, vmin=w_min, vmax=w_max, interpolation=’nearest’, cmap = ‘seismic’)<br/> x_label = “Filter {0}”.format(i+1)<br/> ax.set_title(x_label)<br/> ax.set_xticks([])<br/> ax.set_yticks([])<br/> <br/> plt.show()</span></pre><h2 id="e94a" class="lb ke ht bd kf lc ld le kj lf lg lh kn jq li lj kr ju lk ll kv jy lm ln kz lo dt translated">2.获取卷积层的权重</h2><p id="6b78" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">要获得权重值，您可以使用below函数，只需传递层的名称。</p><pre class="lz ma mb mc fq md ly me mf aw mg dt"><span id="7629" class="lb ke ht ly b fv mh mi l mj mk">def get_weights_variable(layer_name):<br/>  with tf.variable_scope(layer_name, reuse = True):<br/>    variable = tf.get_variable('kernel')<br/>    <br/>  return variable</span></pre><h2 id="f2b3" class="lb ke ht bd kf lc ld le kj lf lg lh kn jq li lj kr ju lk ll kv jy lm ln kz lo dt translated">3.获取卷积层的输出</h2><p id="df00" class="pw-post-body-paragraph jf jg ht jh b ji lq jk jl jm lr jo jp jq ls js jt ju lt jw jx jy lu ka kb kc hm dt translated">如果您想了解过滤器是如何激活的，或者图层的输出是什么样的。</p><pre class="lz ma mb mc fq md ly me mf aw mg dt"><span id="006d" class="lb ke ht ly b fv mh mi l mj mk">def plot_conv_output(layer, image):<br/>  feed_dict = {x: [image]}<br/>  <br/>  values = sess.run(layer, feed_dict)<br/>  # Number of filters used in the convolution layer.<br/>  num_filters = values.shape[3]</span><span id="a81f" class="lb ke ht ly b fv ml mi l mj mk">  # Number of grids to plot.<br/>  # Rounded-up, square-root of the number of filters.<br/>  num_grids = math.ceil(math.sqrt(num_filters))</span><span id="36e3" class="lb ke ht ly b fv ml mi l mj mk">  # Create figure with a grid of sub-plots.<br/>  fig, axes = plt.subplots(num_grids, num_grids)</span><span id="1e47" class="lb ke ht ly b fv ml mi l mj mk">  # Plot the output images of all the filters.<br/>  for i, ax in enumerate(axes.flat):<br/>      # Only plot the images for valid filters.<br/>      if i&lt;num_filters:<br/>          # Get the output image of using the i'th filter.<br/>          img = values[0, :, :, i]</span><span id="f6fc" class="lb ke ht ly b fv ml mi l mj mk">          ax.imshow(img, interpolation='nearest', cmap='binary')</span><span id="7458" class="lb ke ht ly b fv ml mi l mj mk">      ax.set_xticks([])<br/>      ax.set_yticks([])</span><span id="06d7" class="lb ke ht ly b fv ml mi l mj mk">  plt.show()</span></pre></div><div class="ab cl mm mn hb mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hm hn ho hp hq"><p id="081b" class="pw-post-body-paragraph jf jg ht jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hm dt translated">这是我认为在使用tensorflow时可能有用的几个函数。如果你使用了一些你认为可能有用的功能，请把它们写在评论里或者发邮件给我。</p><figure class="lz ma mb mc fq iu"><div class="bz el l di"><div class="mt mu l"/></div></figure><blockquote class="mv"><p id="19f1" class="mw mx ht bd my mz na nb nc nd ne kc ek translated"><a class="ae lp" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="ng nh ni nj nk iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff nf"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>