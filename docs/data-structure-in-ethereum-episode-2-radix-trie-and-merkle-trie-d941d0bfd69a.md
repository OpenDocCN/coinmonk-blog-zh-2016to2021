# ä»¥å¤ªåŠä¸­çš„æ•°æ®ç»“æž„|ç¬¬ 2 é›†:åŸºæ•° trie å’Œ Merkle trieã€‚

> åŽŸæ–‡ï¼š<https://medium.com/coinmonks/data-structure-in-ethereum-episode-2-radix-trie-and-merkle-trie-d941d0bfd69a?source=collection_archive---------1----------------------->

![](img/ac8a1166286e9ed90939fbe19f773e29.png)

Trie is a main data structure used in Ethereum.

åœ¨[ç¬¬ 1 é›†](/@phansnt/data-structure-in-ethereum-episode-1-recursive-length-prefix-rlp-encoding-decoding-d1016832f919) [å’Œ 1+](/@phansnt/data-structure-in-ethereum-episode-1-compact-hex-prefix-encoding-12558ae02791) ä¸­ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰äº†ä¸€äº›ç”¨äºŽæž„å»ºä»¥å¤ªåŠæ•°æ®çš„ç¼–ç /è§£ç ç®—æ³•ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬å°†ç»§ç»­è®¨è®ºä»¥å¤ªåŠä¸­çš„æ•°æ®ç»„ç»‡ã€‚æˆ‘å°†ä»‹ç»ä¸¤ç§ trieï¼Œå®ƒä»¬æ˜¯ Radix trie å’Œ Merkle trieã€‚å®žé™…ä¸Šï¼Œå®ƒä»¬å¹¶ä¸ç”¨äºŽ rawï¼Œä»¥å¤ªåŠå°†å®ƒä»¬æ··åˆåœ¨ä¸€èµ·ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ›´åŠ ä¼˜åŒ–çš„æ–° trieï¼Œå¹¶å‘½åä¸º Patricia trieã€‚è¿™ä¸€é›†ä¸ºæˆ‘ä»¬ç†è§£å¸•ç‰¹ä¸½å¤Â·ç‰¹é‡Œåšäº†å‡†å¤‡ã€‚

> å¦‚æžœä½ ä»Žæœªå¬è¯´è¿‡ trie æˆ– triesï¼Œä¸è¦æ‹…å¿ƒ*ðŸ‘Œ*ã€‚å®ƒä»¬éžå¸¸å®¹æ˜“ç†è§£ã€‚

***ç‰¹é‡Œ***

Trie æ˜¯åœ¨ç§‘å­¦è®¡ç®—æœºä¸­è¡¨ç¤ºæ•°å­—æ ‘çš„å•è¯æˆ–æœ¯è¯­ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°â€œæ ‘â€è¢«ä½¿ç”¨ï¼Œè¿™æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºåŒæ ·çš„æ„æ€ã€‚

æ¢å¥è¯è¯´ï¼Œtrie æ˜¯ä¸€ä¸ªæœ‰åºçš„æ•°æ®ç»“æž„ï¼Œç”¨äºŽå­˜å‚¨ä¸€ä¸ªåŠ¨æ€é›†åˆæˆ–å…³è”æ•°ç»„ï¼Œå®ƒæ˜¯ç”±é”®å€¼ç»„æˆçš„ï¼Œå…¶ä¸­çš„é”®é€šå¸¸æ˜¯å­—ç¬¦ä¸²ã€‚

![](img/c8eb3686041244e4c893b172f11818b4.png)

Trie.

é€šè¿‡ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç†Ÿæ‚‰ä¸€äº›æœ¯è¯­ã€‚æ­¤å¤–ï¼Œæ ¹ã€å†…éƒ¨èŠ‚ç‚¹ã€å¶çš„é›†åˆå°†è¢«ç§°ä¸ºå…¬å…±èŠ‚ç‚¹ã€‚

***æ•°æ®é›†***

> æˆ‘ä»¬å°†åœ¨æ‰€æœ‰ç¤ºä¾‹ä¸­ä½¿ç”¨è¿™ä¸ªæ•°æ®æ ·æœ¬ã€‚

Dataset.

åœ¨æ•°æ®é›†ä¸­ï¼Œé”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼æ˜¯æ•´æ•°ã€‚

***åŸºæ•° trie***

> åŸºæ•° trie ç”¨äºŽä¼˜åŒ–æœç´¢ðŸ”­ã€‚

åœ¨ radix trie ä¸­ï¼Œæ•°æ®é›†ä¸­çš„é”®å°†æ˜¯åˆ°è¾¾å€¼çš„è·¯å¾„ã€‚

![](img/e37925f30010ac9e35fe8e161d8b9214.png)

Basic radix trie.

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œtrie çš„æ¯ä¸ªè·¯å¾„ä»£è¡¨ä¸€ä¸ª ASCII å­—ç¬¦ï¼Œå®ƒç”¨äºŽæœç´¢å€¼ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ key çš„å€¼ï¼Œå³`dodo`ã€‚å°±ä»Žæ ¹å¼€å§‹ï¼Œå°è¯•å…ˆå¯»æ‰¾`d`è·¯å¾„ï¼Œå¹¶æ²¿ç€æ•´ä¸ªè·¯å¾„ç»§ç»­ä¸‹é™ã€‚æœ€ç»ˆç»“æžœæ˜¯çº¢çº¿å’Œç»¿è‰²èŠ‚ç‚¹ï¼Œå€¼ä¸º`4`ã€‚

![](img/3561a201c7df95590b2bdbc8a70a6e52.png)

Radix trie.

ä½†æ˜¯ï¼Œ`house`å’Œ`houses`é”®çš„åˆ†æ”¯è¢«é™çº§ï¼Œå¸¦æœ‰`null`å€¼çš„å†…éƒ¨èŠ‚ç‚¹å¤ªå¤šã€‚ä¸ºäº†è¾¾åˆ°`houses`çš„å€¼ï¼Œæˆ‘ä»¬å¿…é¡»æ²¿ç€è·¯å¾„ä¸‹é™å¾ˆå¤šæ¬¡ã€‚è¿™ä¼šé€ æˆç©ºé—´æµªè´¹ã€‚

å› æ­¤ï¼Œå¯ä»¥é€šè¿‡ç»„åˆé™çº§è·¯å¾„æ¥æ”¹è¿›å®ƒã€‚çŽ°åœ¨ï¼Œè·¯å¾„ä¸æ˜¯ç”±å•ä¸ªå­—ç¬¦è¡¨ç¤ºçš„ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

æˆ‘ä»¬å¯¹åŸºæ•° trie è¿›è¡Œäº†æ”¹è¿›ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

ä¸ºäº†åˆ°è¾¾`houses`èŠ‚ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸‹é™ä¸¤æ¬¡ï¼Œè¿™ä¼¼ä¹Žå¯¹æœç´¢å¾ˆæœ‰å¥½å¤„ã€‚

***é»˜å…‹å°”ç‰¹é‡Œ***

> Merkle trie ç”¨äºŽéªŒè¯æ•°æ®

åœ¨ merkle trie ä¸­ï¼Œå®ƒçš„æ•°æ®è¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªç¡®å®šæ€§çš„åŠ å¯†æ•£åˆ—æ¥å¸®åŠ©è®¤è¯æ•°æ®ã€‚

ä¸ºäº†èŽ·å¾—ç»†èŠ‚ï¼Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­:

![](img/d8226f2ba96f8569fb0f35bd9506449c.png)

Merkle trie.

å…¨éƒ¨æ•°æ®å°†å­˜å‚¨åœ¨æ ‘å¶ä¸­ã€‚é‚£äº›å¶å­çš„çˆ¶å€¼å°†ç­‰äºŽ`Hash(valueOfChild1, valueOfChild2, â€¦)`ã€‚

![](img/660506cadba3019889a7ff498b4533ae.png)

Deterministic cryptographic hash.

å¦‚æžœæˆ‘ä»¬å°è¯•å°†ç¬¬å››ä¸ªèŠ‚ç‚¹çš„å€¼æ›´æ”¹ä¸º 44ã€‚å› æ­¤ï¼Œä»Žç¬¬ 4 ä¸ªèŠ‚ç‚¹åˆ°æ ¹çš„è·¯å¾„ä¸Šçš„çˆ¶èŠ‚ç‚¹å°†å®Œå…¨æ”¹å˜ï¼Œ`H2 â†’ Hâ€™2 | H5 â†’ Hâ€™5 | Root â†’ NewRoot`ã€‚

å› æ­¤ï¼Œå¦‚æžœæˆ‘ä»¬æŒæœ‰æ ¹çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å»º trie æ¥èŽ·å¾—æ ¹å¹¶å°†å…¶ä¸Žæˆ‘ä»¬çš„æ ¹è¿›è¡Œæ¯”è¾ƒï¼Œä»Žè€ŒéªŒè¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚å®žé™…ä¸Šï¼Œä¸æ”¹å˜æ ¹çš„å€¼æ˜¯ä¸å¯èƒ½ä¼ªé€ æ•°æ®çš„ã€‚

**ç»“è®º&å‚è€ƒæ–‡çŒ® **

é€šè¿‡ç†è§£è¿™ä¸¤ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å°±æŽ¥è¿‘äº†æœ€ç»ˆç›®æ ‡ã€‚

![](img/cc8bb96ba2d5b3a84d241356551fbae6.png)

Why did I write this series so long? Because it is a SERIES ðŸ˜‘

ä¸‹ä¸€é›†ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºä»¥å¤ªåŠå¦‚ä½•ç»“åˆè¿™äº›å’Œä¸€äº›æ”¹è¿›æ¥åˆ›å»º Patricia trieï¼Œå®ƒæœ‰æ›´å¤šä¼˜åŒ–çš„ä¸œè¥¿ï¼Œå¹¶ä¸”è¿˜ä¿ç•™äº†ä¸»è¦çš„å±žæ€§ï¼Œå³ä¼˜åŒ–æœç´¢å’Œç¡®å®šæ€§åŠ å¯†ã€‚

[](https://en.wikipedia.org/wiki/Radix_tree) [## åŸºæ•°æ ‘-ç»´åŸºç™¾ç§‘

### åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒåŸºæ•°æ ‘(ä¹Ÿå«åŸºæ•° trie æˆ–ç´§å‡‘å‰ç¼€æ ‘)æ˜¯ä¸€ç§æ•°æ®ç»“æž„ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªâ€¦

en.wikipedia.org](https://en.wikipedia.org/wiki/Radix_tree) [](https://en.wikipedia.org/wiki/Merkle_tree) [## é»˜å…‹å°”æ ‘-ç»´åŸºç™¾ç§‘

### åœ¨å¯†ç å­¦å’Œè®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ•£åˆ—æ ‘æˆ– Merkle æ ‘æ˜¯è¿™æ ·ä¸€ç§æ ‘ï¼Œå…¶ä¸­æ¯ä¸ªå¶èŠ‚ç‚¹éƒ½æ ‡æœ‰â€¦

en.wikipedia.org](https://en.wikipedia.org/wiki/Merkle_tree) [](https://github.com/ethereum/wiki/wiki/Patricia-Tree) [## ä»¥å¤ªåŠ/ç»´åŸº

### ç»´åŸº-ä»¥å¤ªåŠç»´åŸº-

github.com](https://github.com/ethereum/wiki/wiki/Patricia-Tree) 

> [ç›´æŽ¥åœ¨æ‚¨çš„æ”¶ä»¶ç®±ä¸­èŽ·å¾—æœ€ä½³è½¯ä»¶äº¤æ˜“](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)