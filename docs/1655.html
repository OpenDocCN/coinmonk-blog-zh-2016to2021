<html>
<head>
<title>Analysis on the recharge “false notification” vulnerability of EOS DApp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EOS DApp充值“假通知”漏洞分析</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/analysis-on-the-recharge-false-notification-vulnerability-of-eos-dapp-15383a19c7af?source=collection_archive---------1-----------------------#2018-10-15">https://medium.com/coinmonks/analysis-on-the-recharge-false-notification-vulnerability-of-eos-dapp-15383a19c7af?source=collection_archive---------1-----------------------#2018-10-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/f881766b688706a6cc32516742cd6128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJAAK-d2kIz64dltDdJ6gQ.png"/></div></div></figure><p id="282e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">作者:SlowMist安全团队</p><p id="b383" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt">translated by: Kai Jing(荆凯)@EOS42</p></div><div class="ab cl jz ka hb kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hm hn ho hp hq"><h1 id="8897" class="kg kh ht bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated"><strong class="ak"> 1。漏洞的机制</strong></h1><p id="6ca4" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">EOS智能合同中可以通过require_recipient函数调用另一个合同的设计，给合同开发者带来了极大的方便，但同时也带来了新的问题。</p><p id="44e9" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">让我们以EOSBet DApp被攻击为例:</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff lj"><img src="../Images/1d4635935b28bba5705b4f744dfb2936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLJqqTWyZmuoa1Ndiygr-Q.png"/></div></div></figure><h1 id="2a9d" class="kg kh ht bd ki kj lo kl km kn lp kp kq kr lq kt ku kv lr kx ky kz ls lb lc ld dt translated">2.回复漏洞</h1><ol class=""><li id="04c6" class="lt lu ht jd b je le ji lf jm lv jq lw ju lx jy ly lz ma mb dt translated">创建攻击者的普通帐户:aaaaaa</li></ol><p id="7266" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">2.创建攻击者的合约帐户:cccccc，并部署用于攻击的智能合约</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mc"><img src="../Images/5664656c49e14f4b5a0e305db48e86bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6UXTqLAmWt1mesJmJUnQg.jpeg"/></div></div></figure><p id="c525" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">3.攻击的目标帐户:eosbetdice11</p><p id="984e" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">我们通过添加打印代码来修改官方开源代码，以观看调用过程:</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mc"><img src="../Images/7e925484e0fab5eb430a992234997faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJQkhgQ2WMOk4Or_lGIG2A.jpeg"/></div></div></figure><p id="4bc4" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">4.发起攻击</p><p id="4d3b" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">从攻击者正常帐户:aaaaaa转到恶意合同帐户:cccccc</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mc"><img src="../Images/d422c87f9052067ee3f2a1d053eeb099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CTfi7FwAZrG43uS0Strvrw.jpeg"/></div></div></figure><p id="4f2d" class="pw-post-body-paragraph jb jc ht jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hm dt translated">从控制台的消息中，我们可以看到eosbetdice11的传递函数被成功调用:</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mc"><img src="../Images/fa4843d717b103bee6e1f077853a71f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oAxsn_-3S8kHkqRLl_bg1A.jpeg"/></div></div></figure><h1 id="061e" class="kg kh ht bd ki kj lo kl km kn lp kp kq kr lq kt ku kv lr kx ky kz ls lb lc ld dt translated">3.修理计划</h1><p id="7653" class="pw-post-body-paragraph jb jc ht jd b je le jg jh ji lf jk jl jm lg jo jp jq lh js jt ju li jw jx jy hm dt translated">增加了验证，以确保传递函数中的to等于_self，以避免特定的问题。如果您有任何问题，请联系我们寻求帮助。</p><figure class="lk ll lm ln fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff md"><img src="../Images/e512862ecbaaf6c9a1e058203ea665a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZ2gWg9b0WX_oyngCjkrDQ.png"/></div></div></figure><blockquote class="me"><p id="b712" class="mf mg ht bd mh mi mj mk ml mm mn jy ek translated"><a class="ae mo" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mq mr ms mt mu iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mp"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>