<html>
<head>
<title>Finally, Solidity v0.5.0 is here !</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">终于，Solidity v0.5.0来了！</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/finally-solidity-v0-5-0-is-here-801f85176517?source=collection_archive---------0-----------------------#2018-11-15">https://medium.com/coinmonks/finally-solidity-v0-5-0-is-here-801f85176517?source=collection_archive---------0-----------------------#2018-11-15</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="b52d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">11月13日，期待已久的版本Solidity i.e. 0.5.0发布了。在此版本中决定进行许多更改。这个版本有一个很棒的变更日志，使得语言更加强大、成熟，有助于安全开发。</p><figure class="jp jq jr js fq jt fe ff paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="fe ff jo"><img src="../Images/8758da2f1ba92cb0838eb3019f0fca56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2FszpzanNt3vwpiMhZJCAA.jpeg"/></div></div><figcaption class="ka kb fg fe ff kc kd bd b be z ek">Solidity v0.5.0</figcaption></figure><p id="0c25" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">以太坊基金会一直在尝试更新solidity语言，以使开发更少出错，更健壮。此版本不允许一些不推荐的功能，并强调代码和变量的预期功能的清晰指示。我在这里列出了一些更新和一些代码片段。</p><h1 id="11fa" class="ke kf ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">明确声明</h1><ul class=""><li id="be4f" class="lc ld ht is b it le ix lf jb lg jf lh jj li jn lj lk ll lm dt translated">将<code class="eh ln lo lp lq b">public</code>添加到每个函数中，将<code class="eh ln lo lp lq b">external</code>添加到每个尚未指定其可见性的回退函数或接口函数中。</li></ul><pre class="jp jq jr js fq lr lq ls lt aw lu dt"><span id="4f80" class="lv kf ht lq b fv lw lx l ly lz"><strong class="lq hu">function</strong>() <strong class="lq hu">external</strong> { x = 1; } // Fallback</span></pre><ul class=""><li id="3316" class="lc ld ht is b it iu ix iy jb ma jf mb jj mc jn lj lk ll lm dt translated">明确说明结构、数组或映射类型的所有变量的数据位置(包括函数参数)</li></ul><pre class="jp jq jr js fq lr lq ls lt aw lu dt"><span id="0ef1" class="lv kf ht lq b fv lw lx l ly lz">// Function parameters along with data locations<strong class="lq hu"><br/>function</strong> reveal(<br/>        uint[] <strong class="lq hu">memory</strong> _values,<br/>        bool[] <strong class="lq hu">memory</strong> _fake,<br/>        bytes32[] <strong class="lq hu">memory</strong> _secret<br/>    )</span></pre><ul class=""><li id="8337" class="lc ld ht is b it iu ix iy jb ma jf mb jj mc jn lj lk ll lm dt translated">非常有趣的一点是，声明变量，尤其是函数参数为<code class="eh ln lo lp lq b">address payable</code>，如果你想对它们调用<code class="eh ln lo lp lq b">transfer</code>。</li></ul><pre class="jp jq jr js fq lr lq ls lt aw lu dt"><span id="c514" class="lv kf ht lq b fv lw lx l ly lz">address <strong class="lq hu">payable</strong> <strong class="lq hu">public</strong> beneficiary; // If you want to transfer funds <br/>uint <strong class="lq hu">public</strong> auctionEndTime;</span></pre><h1 id="1cb4" class="ke kf ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">驳回</h1><ul class=""><li id="a7db" class="lc ld ht is b it le ix lf jb lg jf lh jj li jn lj lk ll lm dt translated">不允许声明空结构。</li><li id="eb13" class="lc ld ht is b it md ix me jb mf jf mg jj mh jn lj lk ll lm dt translated">不允许生<code class="eh ln lo lp lq b">callcode</code>、<code class="eh ln lo lp lq b">var</code>关键字、<code class="eh ln lo lp lq b">sha3</code>、<code class="eh ln lo lp lq b">suicide</code>别名、<code class="eh ln lo lp lq b">throw</code>语句、<code class="eh ln lo lp lq b">years</code>单位命名(由于闰年的复杂和混乱)和一元<code class="eh ln lo lp lq b">+</code>。</li><li id="c2c6" class="lc ld ht is b it md ix me jb mf jf mg jj mh jn lj lk ll lm dt translated">对于具有一个或多个返回值的函数，不允许使用空的return语句。</li><li id="069c" class="lc ld ht is b it md ix me jb mf jf mg jj mh jn lj lk ll lm dt translated">不允许<code class="eh ln lo lp lq b">msg.value</code>出现在(或通过修饰符引入)一个不可支付的函数中</li><li id="9a9d" class="lc ld ht is b it md ix me jb mf jf mg jj mh jn lj lk ll lm dt translated">不允许固定大小数组的长度为零。</li></ul><h1 id="2d30" class="ke kf ht bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">允许</h1><ul class=""><li id="505d" class="lc ld ht is b it le ix lf jb lg jf lh jj li jn lj lk ll lm dt translated">支持<code class="eh ln lo lp lq b">pop()</code>存储数组和<code class="eh ln lo lp lq b">bytes</code>(不是<code class="eh ln lo lp lq b">string</code>)从数组末尾删除一个元素。</li></ul><pre class="jp jq jr js fq lr lq ls lt aw lu dt"><span id="be0a" class="lv kf ht lq b fv lw lx l ly lz">pragma solidity ^0.5.0;</span><span id="2e1b" class="lv kf ht lq b fv mi lx l ly lz">contract Array{<br/>    uint256[] public arr;<br/>    <br/>    function insert(uint256 element) public {<br/>        arr.push(element);<br/>    }<br/>    <br/>    function removeOne() public {<br/>        arr.pop();<br/>    }<br/>}</span></pre><ul class=""><li id="aa44" class="lc ld ht is b it iu ix iy jb ma jf mb jj mc jn lj lk ll lm dt translated">在接口中允许<code class="eh ln lo lp lq b">enum</code>s&amp;s<code class="eh ln lo lp lq b">struct</code>s。</li></ul><pre class="jp jq jr js fq lr lq ls lt aw lu dt"><span id="c3b6" class="lv kf ht lq b fv lw lx l ly lz"><strong class="lq hu">interface</strong> Token {<br/>    <strong class="lq hu">enum</strong> TokenType { Fungible, NonFungible }<br/>    <strong class="lq hu">struct</strong> Coin { string obverse; string reverse; }<br/>    <strong class="lq hu">function</strong> transfer(address recipient, uint amount) <strong class="lq hu">external</strong>;<br/>}</span></pre><ul class=""><li id="9162" class="lc ld ht is b it iu ix iy jb ma jf mb jj mc jn lj lk ll lm dt translated">允许<code class="eh ln lo lp lq b">mapping</code>存储指针作为所有内部函数的参数和返回值。</li></ul><p id="c0c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">此版本中还修复了一些错误。这个版本有一个很棒的变更集。你可以访问完整的变更日志<a class="ae mj" href="https://github.com/ethereum/solidity/blob/v0.5.0/Changelog.md" rel="noopener ugc nofollow" target="_blank">这里</a>。(对开发人员是强制性的)</p><p id="0c14" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在这个版本之后，随着语言变得更加丰富，可靠性编码和解析将得到增强😬</p><p id="1e84" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">祝所有开发者智能编码快乐！</p><p id="e3f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">感谢阅读。</p><p id="e0cf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">版本1:  Solidity <strong class="is hu"> v0.5.1 </strong>已经发布，修正了一些错误，并增加了以下语言特性:</p><ul class=""><li id="e234" class="lc ld ht is b it iu ix iy jb ma jf mb jj mc jn lj lk ll lm dt translated">允许公共和外部库函数的参数和返回变量的映射类型。</li><li id="1839" class="lc ld ht is b it md ix me jb mf jf mg jj mh jn lj lk ll lm dt translated">允许公共函数覆盖外部函数。</li></ul><p id="ac9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">点击查看完整的变更日志<a class="ae mj" href="https://github.com/ethereum/solidity/releases/tag/v0.5.1" rel="noopener ugc nofollow" target="_blank">。</a></p><blockquote class="mk"><p id="0157" class="ml mm ht bd mn mo mp mq mr ms mt jn ek translated"><a class="ae mj" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="mv mw mx my mz jt fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff mu"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>