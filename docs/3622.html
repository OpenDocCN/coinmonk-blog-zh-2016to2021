<html>
<head>
<title>Using RedwoodJS to create an Ethereum app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用RedwoodJS创建以太坊应用程序</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/using-redwoodjs-to-create-an-ethereum-app-8c385815b717?source=collection_archive---------0-----------------------#2020-11-19">https://medium.com/coinmonks/using-redwoodjs-to-create-an-ethereum-app-8c385815b717?source=collection_archive---------0-----------------------#2020-11-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="6241" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">RedwoodJS非常适合dapp开发。在这个简短的教程中，你会知道为什么。</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/2583144c5611b973736d75d509071e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3qigTK40CWfG91lt.png"/></div></div></figure><blockquote class="ju jv jw"><p id="2e81" class="jx jy jz ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">我的个人博客<a class="ae ku" href="https://patrickgallagher.dev" rel="noopener ugc nofollow" target="_blank">https://patrickgallagher . dev</a>Pssst .上也有这些精彩的内容。我有合适的代码块！</p></blockquote></div><div class="ab cl kv kw hb kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hm hn ho hp hq"><p id="af5c" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">在这段代码中，我将带你了解我如何使用<code class="eh lf lg lh li b">RedwoodJS</code>创建一个以太坊应用程序。Redwood与以太坊相关的关键优势是它是为graphql构建的。我指的不仅仅是盖茨比是如何建成的。Redwood非常非常擅长graphql。如果你熟悉使用图形来构建dapps，那么就<em class="jz">打开创造性思维空间</em>而言，这将是独角兽和彩虹。</p><p id="6b13" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">在某种程度上，你可以用Redwood创建你自己的“穷人的子图”(詹姆斯·杨称之为“穷人的子图”)，不费吹灰之力。这要特别感谢Prisma的了不起的人们，他们正埋头于他们的第二个版本，这就是Redwood使用的。使用最初的Prisma v1和Gatsby，创建这个应用程序可能需要几周的时间，但我在这里只花了几天时间。红杉团队创造了一些神奇的东西。</p><p id="d1f7" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">我有没有提到devops流程非常简单？起初，这一切似乎令人望而生畏，但是相信我——你很快就会爱上Redwood。</p><p id="aeee" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">我知道，我知道，你有戒断症状，只是想离开他们。幸运的是，您仍然可以将这些可爱的子图直接插入Redwood。在使用原生Redwood工具完成第一个应用程序后，您将能够充满信心地添加图形。</p><p id="07ef" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">你还在等什么？试一试！</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="75b5" class="ln lo ht li b fv lp lq l lr ls">yarn create redwood-app ./redwoodblog</span></pre><h1 id="9dc6" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">但是帕特里克，我们在建造什么？</h1><p id="25dc" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">以下是我创建<strong class="ka hu"> Emanator </strong>的粗略步骤，这是为最近Gitcoin上举办的超流体黑客马拉松提交的黑客马拉松。</p><p id="0733" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">基本想法是这样的:</p><ol class=""><li id="eacf" class="mp mq ht ka b kb kc ke kf lc mr ld ms le mt kt mu mv mw mx dt translated">允许用户创建一系列的NFT并拍卖它们。</li><li id="cea9" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt mu mv mw mx dt translated">每份NFT合约都有自己的拍卖页面。</li><li id="e207" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt mu mv mw mx dt translated">我们希望跟踪每一个新的拍卖部署，并显示一些更多的信息，除了链上的数据(还记得我们使用数据库之前，我们有区块链？)</li></ol><ul class=""><li id="5c14" class="mp mq ht ka b kb kc ke kf lc mr ld ms le mt kt nd mv mw mx dt translated">演示redwood web3应用:<a class="ae ku" href="https://emanator.patrickgallagher.dev" rel="noopener ugc nofollow" target="_blank">https://emanator . Patrick Gallagher . dev</a></li><li id="94e4" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">黑客马拉松投稿+撰写:<a class="ae ku" href="https://github.com/superfluid-finance/superfluid-protocol-preview/pull/8" rel="noopener ugc nofollow" target="_blank">https://github . com/superfluid-finance/superfluid-protocol-preview/pull/8</a></li><li id="3371" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">资料来源:https://github.com/emaNaFTe/monorepo。</li></ul><h1 id="25c7" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">👩‍💻设置应用程序</h1><p id="02f5" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">下面的redwood命令执行一系列任务来节省时间，而不像您可能熟悉的一些代码生成器和模板那样碍事。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="2c17" class="ln lo ht li b fv lp lq l lr ls">yarn rw generate layout default<br/>yarn rw generate page home /<br/>yarn rw generate page auction {auctionAddress}</span></pre><p id="8f12" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">最后一个命令设置了我们需要的所有路由，因此我们可以使用标识符导航到特定的拍卖。在这种情况下，我们称之为“auctionAddress”。</p><h1 id="7d53" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">🤖数据库设置</h1><p id="9eaa" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">更新<code class="eh lf lg lh li b">schema.prisma</code>添加拍卖对象。我只是编造了一些我认为有用的东西——因为合同还没有写。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="8f19" class="ln lo ht li b fv lp lq l lr ls">model Auction {<br/>  id Int @id @default(autoincrement())<br/>  address String @unique<br/>  name String<br/>  winLength Int<br/>  owner String<br/>  description String?<br/>  createdAt  DateTime  @default(now())<br/>  status String @default("started")<br/>  highBid Int @default(0)<br/>  generation Int @default(0)<br/>  revenue Int @default(0)<br/>}</span></pre><p id="e0b3" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">现在我们可以创建我们的本地开发数据库了</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="a4d5" class="ln lo ht li b fv lp lq l lr ls">yarn rw db save<br/>yarn rw db up</span></pre><p id="8c45" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">最后，我们将使用<code class="eh lf lg lh li b">schema.prisma</code>为我们生成一些组件。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="f85b" class="ln lo ht li b fv lp lq l lr ls">yarn rw generate scaffold Auction</span></pre><p id="6fd2" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">这个命令还提供了编辑/删除功能(区块链是不可变的？)所以我把这些组件和路线从<code class="eh lf lg lh li b">routes.js</code>去掉了</p><p id="ef03" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">嘣！一个工作的前端和后端。我们现在应该能够通过输入虚拟数据来创建新的拍卖。</p><h1 id="59b9" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">✍编辑表格</h1><p id="d5c9" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">现在，我们需要添加功能，以便在提交拍卖表单时部署合同。一旦我们可以部署一个新的拍卖，我们可以使用合同地址和所有者地址来填充我们的数据库。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ne"><img src="../Images/63ecda518da82f81c3f058ed45d71d46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*De-n6b3pRBj7YpS6.png"/></div></div></figure><p id="94b2" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">我为<code class="eh lf lg lh li b">web/src/web3/deploy.js</code>添加了web3部署功能，它获取表单数据并从用户的钱包中部署一个合同。然后将来自<code class="eh lf lg lh li b">deployAuction()</code>的返回值添加到现有的拍卖变异中，如下所示:</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="e77a" class="ln lo ht li b fv lp lq l lr ls">// web/src/components/NewAuction/NewAuction.js<br/>const onSave = async (input) =&gt; {<br/>  const { address, owner, error } = await deployAuction(input)<br/>  if (error) return console.log(error.message)<br/>  createAuction({ variables: { input: { ...input, address, owner } } })<br/>}</span></pre><h1 id="de5c" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">🐕获取web3数据</h1><p id="68f1" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">既然我们可以部署合同，我们需要将web3数据放入我们的应用程序。我借鉴了Redwood cookbook <a class="ae ku" href="https://redwoodjs.com/cookbook/using-a-third-party-api#server-side-api-integration" rel="noopener ugc nofollow" target="_blank">中的一页，使用第三方API </a>来做这件事。我选择使用服务器，而不是前端，来进行Web3调用。这样做会使事情简单得多。</p><p id="9dfc" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">为什么？因为Redwood非常擅长使用graphql数据。因此，如果我的服务器能够以graphql格式输出所有内容，那么应用程序甚至不会知道它在请求缓慢、异步的web3数据。这也意味着更好的安全性。还记得技术上你不应该把你的Infura/provider密匙放在FE里…但是每个人都这么做了？</p><p id="9183" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">首先，我制作了一个名为“Web3”的新SDL。在<code class="eh lf lg lh li b">web3.sdl.js</code>中定义模式。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="8652" class="ln lo ht li b fv lp lq l lr ls">type Web3User {<br/>     superTokenBalance: String!<br/>     isSubscribed: Boolean!<br/>   }</span><span id="689b" class="ln lo ht li b fv nf lq l lr ls">   type Query {<br/>     web3User(address: String!, auctionAddress: String!): Web3User!<br/>     // ...<br/>   }</span></pre><p id="d623" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">在这里，我没有遵循Redwood建立的通过graphql类型命名SDL和服务的模式(例如“Web3Auction”和“Web3User”)</p><blockquote class="ju jv jw"><p id="2140" class="jx jy jz ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated"><em class="ht">注意:由于web3数据在我们的数据库之外，我们不需要更新我们的graphql </em> <code class="eh lf lg lh li b"><em class="ht">schema.prisma</em></code> <em class="ht">。另外，我们不能使用</em> <code class="eh lf lg lh li b"><em class="ht">yarn rw scaffold</em></code> <em class="ht">命令，因为它依赖于</em> <code class="eh lf lg lh li b"><em class="ht">schema.prisma</em></code> <em class="ht">。</em></p></blockquote><p id="28cf" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">创建服务文件<code class="eh lf lg lh li b">services/web3/web3.js</code>。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="f20c" class="ln lo ht li b fv lp lq l lr ls">yarn rw g service web3</span></pre><p id="15cb" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">使用web3/ethers添加Web3调用。然后我们可以在<code class="eh lf lg lh li b"><a class="ae ku" href="http://localhost:8911/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:8911/graphql</a></code>开始在graphql操场上编写一些查询</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="fc68" class="ln lo ht li b fv lp lq l lr ls">query GET_WEB3_USER($address: String!, $auctionAddress: String!) {<br/>      web3User(address:$address, auctionAddress: $auctionAddress) {<br/>      superTokenBalance<br/>      isSubscribed<br/>   }</span></pre><h1 id="3093" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">💅显示web3数据</h1><p id="01b4" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">现在我们有了一些新的web3查询，根据我们的数据源，有两种方法可以使用它们:web3或web3+web2</p><p id="be1b" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated"><em class="jz">仅web 3</em>—制作一个新组件</p><p id="607c" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">对于用户，我只关心web3数据，所以我选择创建一个新的单元格和组件。请记住，由于没有为这些定义<code class="eh lf lg lh li b">prisma.schema</code>，您需要手动将您之前编写的漂亮的graphql查询添加到每个新的“单元格”中。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="48c7" class="ln lo ht li b fv lp lq l lr ls">yarn rw g cell web3User<br/>yarn rw g component web3User</span></pre><p id="6831" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated"><em class="jz"> web3+web2 </em> —与现有组件结合</p><p id="93a8" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">对于拍卖，我想使用来自Prisma数据库和web3的数据，所以我选择将新的查询添加到<code class="eh lf lg lh li b">AuctionCell.js</code>中的现有查询中。我没有为此制作任何新组件。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="1afe" class="ln lo ht li b fv lp lq l lr ls">query FIND_AUCTION_BY_ADDRESS($address: String!) {<br/>  auction(address: $address) {<br/>    id<br/>    name<br/>    address<br/>    description<br/>    createdAt<br/>    revenue<br/>    winLength<br/>    owner<br/>  }<br/>  // NEW STUFF<br/>  web3Auction(address: $address) {<br/>    endTime<br/>    lastBidTime<br/>    auctionBalance<br/>    highBid<br/>    highBidder<br/>    status<br/>  }<br/>}</span></pre><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ng"><img src="../Images/8cdfbf11891be53e39970d6145e5ebe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vbdjAfxamFwI9-Ql.png"/></div></div></figure><h1 id="d174" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">⏳保持更新</h1><p id="6962" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">作为保持应用程序更新Web3数据的一种快速而肮脏的方法，我给<code class="eh lf lg lh li b">AuctionCell.js</code>和<code class="eh lf lg lh li b">Web3UserCell.js</code>添加了以下函数(参见<a class="ae ku" href="https://redwoodjs.com/docs/cells#beforequery" rel="noopener ugc nofollow" target="_blank">生成单元格</a>)。这导致ApolloClient每5秒轮询一次，并且不依赖于缓存的数据，因此服务器必须再次进行web3调用。这可以用更好的方式来完成，但目前来看还行。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="f7f5" class="ln lo ht li b fv lp lq l lr ls">export const beforeQuery = (props) =&gt; {<br/>  return { variables: props, fetchPolicy: 'network-only', pollInterval: 5000 }<br/>}</span></pre><h1 id="9140" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">🏅挑战—保持数据库与Web3同步</h1><p id="e5d6" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">现在，当部署一个新的拍卖时，数据库会立即更新，而不用等待查看部署是否成功。更好的解决方案是在创建数据库条目之前等待部署成功。如果我们在前端编写这个逻辑，用户可能会在页面完成之前关闭它，数据库将不会包括新部署的拍卖。</p><p id="b124" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">相反，我们应该将部署细节发送给服务器，服务器将在处理变异之前等待挂起的事务。我将把这留给你去想一个实现它的好方法。</p><h1 id="8373" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">🚢运输它</h1><p id="87a1" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">我用Heroku做数据库，因为它又快又简单，而且这是一个黑客马拉松。我只是跟着红杉教程<a class="ae ku" href="https://redwoodjs.com/tutorial/deployment" rel="noopener ugc nofollow" target="_blank">这里</a>。对于无服务器组件，事情变得有点棘手。</p><p id="c186" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">由于Redwood还没有投入生产，而且这是我第一次使用它，我在这里遇到了一些挑战。没有一个是不寻常的，在社区的帮助下，我克服了所有的困难。</p><p id="6302" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">我遇到的第一个问题是<code class="eh lf lg lh li b">yarn rw build</code>没有建立我的合同。我通过添加build命令解决了这个问题:</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="4eed" class="ln lo ht li b fv lp lq l lr ls">// Default<br/>yarn rw build &amp;&amp; yarn rw db up --no-db-client --auto-approve &amp;&amp; yarn rw dataMigrate up</span><span id="0334" class="ln lo ht li b fv nf lq l lr ls">// Now contracts are built first<br/>cd contracts &amp;&amp; yarn build &amp;&amp; cd .. &amp;&amp; yarn rw build //...</span></pre><p id="255f" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">我放弃了这项工作(出于多种原因)，并将构建的契约签入版本控制，并相应地更新了<code class="eh lf lg lh li b">package.json</code>。它很粗糙，但是很简单。</p><p id="ab93" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">接下来，Vercel抱怨我的无服务器功能大了5mb左右。感谢Redwood Discord的一些有用的建议，以及一些Github问题搜索，我学会了一个工具来帮助<a class="ae ku" href="https://github.com/redwoodjs/redwood/issues/1196#issuecomment-723562940" rel="noopener ugc nofollow" target="_blank">找到罪魁祸首</a>。我发现<code class="eh lf lg lh li b">truffle</code>正在吞噬一吨的空间。我移动了一些东西，又试了一次。</p><pre class="jj jk jl jm fq lj li lk ll aw lm dt"><span id="cca2" class="ln lo ht li b fv lp lq l lr ls">yarn rw build api<br/>yarn zip-it-and-ship-it api/dist/functions/ zipped</span></pre><p id="4907" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">我现在从大约72mb降到了62mb，仍然超过了50mb的限制…所以没戏了。我给你的建议是:</p><ul class=""><li id="8aa8" class="mp mq ht ka b kb kc ke kf lc mr ld ms le mt kt nd mv mw mx dt translated">避免在无服务器函数中使用web3.js，支持ethers。</li><li id="a780" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">避免导入包含大量已编译合同文件和web3依赖项的合同包</li></ul><p id="5371" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">最后只好用pm2 + nginx自托管app。谢天谢地，Redwood文档中提供了一个很酷的例子。我真的很期待我的下一个redwood应用程序，这样我就可以应用我在这里学到的东西了！</p><p id="b555" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">如果你想要些牛奶，请打电话给我，这样你就可以竞拍NFT了！</p><p id="a642" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated"><strong class="ka hu">快乐大厦！</strong></p><p id="5485" class="pw-post-body-paragraph jx jy ht ka b kb kc iu kd ke kf ix kg lc ki kj kk ld km kn ko le kq kr ks kt hm dt translated">红杉有表情符号吗？会是吗🌲？</p><h1 id="ae30" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">📔笔记+资源</h1><ul class=""><li id="12c2" class="mp mq ht ka b kb mk ke ml lc nh ld ni le nj kt nd mv mw mx dt translated"><code class="eh lf lg lh li b">yarn rw generate scaffold</code>并不适用于所有prisma关系。参见<a class="ae ku" href="https://redwoodjs.com/docs/schema-relations" rel="noopener ugc nofollow" target="_blank">https://redwoodjs.com/docs/schema-relations</a></li><li id="5b15" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">雷德伍德js CLI<a class="ae ku" href="https://redwoodjs.com/docs/cli-commands" rel="noopener ugc nofollow" target="_blank">https://redwoodjs.com/docs/cli-commands</a></li><li id="d57e" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">加入红杉不和！<a class="ae ku" href="https://discord.gg/jjSYEQd" rel="noopener ugc nofollow" target="_blank">https://discord.gg/jjSYEQd</a></li></ul><h1 id="8fa6" class="lt lo ht bd lu lv lw lx ly lz ma mb mc iz md ja me jc mf jd mg jf mh jg mi mj dt translated">感谢阅读</h1><p id="9df0" class="pw-post-body-paragraph jx jy ht ka b kb mk iu kd ke ml ix kg lc mm kj kk ld mn kn ko le mo kr ks kt hm dt translated">❤️如果你喜欢这篇文章，请让我知道。</p><ul class=""><li id="c5f7" class="mp mq ht ka b kb kc ke kf lc mr ld ms le mt kt nd mv mw mx dt translated"><a class="ae ku" href="https://twitter.com/pi0neerpat" rel="noopener ugc nofollow" target="_blank">https://twitter.com/pi0neerpat</a></li><li id="7ace" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" href="https://github.com/pi0neerpat" rel="noopener ugc nofollow" target="_blank">https://github.com/pi0neerpat</a></li></ul><blockquote class="ju jv jw"><p id="8639" class="jx jy jz ka b kb kc iu kd ke kf ix kg kh ki kj kk kl km kn ko kp kq kr ks kt hm dt translated">声明:这篇文章不是赞助的。</p></blockquote><h2 id="d125" class="ln lo ht bd lu nk nl nm ly nn no np mc lc nq nr me ld ns nt mg le nu nv mi nw dt translated">另外，阅读</h2><ul class=""><li id="0bc7" class="mp mq ht ka b kb mk ke ml lc nh ld ni le nj kt nd mv mw mx dt translated">最好的<a class="ae ku" rel="noopener" href="/coinmonks/crypto-trading-bot-c2ffce8acb2a">密码交易机器人</a></li><li id="ab2a" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/deribit-review-options-fees-apis-and-testnet-2ca16c4bbdb2">德里比特评论</a> |选项、费用、API和Testnet</li><li id="6778" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/ftx-crypto-exchange-review-53664ac1198f"> FTX密码交易所评论</a></li><li id="51e2" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">最好的比特币<a class="ae ku" rel="noopener" href="/coinmonks/the-best-cryptocurrency-hardware-wallets-of-2020-e28b1c124069?source=friends_link&amp;sk=324dd9ff8556ab578d71e7ad7658ad7c">硬件钱包</a></li><li id="4268" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/top-10-crypto-copy-trading-platforms-for-beginners-d0c37c7d698c">密码本交易平台</a></li><li id="69bb" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">最好的<a class="ae ku" rel="noopener" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b">加密税务软件</a></li><li id="7c4f" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/the-best-crypto-trading-platforms-in-2020-the-definitive-guide-updated-c72f8b874555">最佳加密交易平台</a></li><li id="97a4" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">最佳<a class="ae ku" rel="noopener" href="/coinmonks/top-5-crypto-lending-platforms-in-2020-that-you-need-to-know-a1b675cec3fa">加密贷款平台</a></li><li id="ab33" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/ledger-vs-trezor-best-hardware-wallet-to-secure-cryptocurrency-22c7a3fd391e">莱杰vs特雷佐</a></li><li id="9efe" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/blockfi-vs-celsius-vs-hodlnaut-8a1cc8c26630">block fi vs Celsius</a>vs Hodlnaut</li><li id="1dc3" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/bitsgap-review-a-crypto-trading-bot-that-makes-easy-money-a5d88a336df2">bits gap review</a>——一个轻松赚钱的加密交易机器人</li><li id="2401" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">为专业人士设计的加密交易机器人</li><li id="2791" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/primexbt-review-88e0815be858"> PrimeXBT审查</a> |杠杆交易、费用和交易</li><li id="4fc4" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">哈森在线评论享受九折优惠</li><li id="eb27" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">Bitmex的<a class="ae ku" rel="noopener" href="/coinmonks/the-idiots-guide-to-margin-trading-on-bitmex-dbbd7742c6fc?source=friends_link&amp;sk=7bfa99d2a181142510c8442c8ddb0786">保证金交易指南</a></li><li id="5279" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/etoro-review-78807ddeb33c"> eToro评论</a> |交易股票、密码、交易所交易基金、差价合约和商品</li><li id="aaab" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/bitmex-advanced-margin-trading-guide-2270c195ce25?source=friends_link&amp;sk=1d986cca731f5084b9a2db4a4bc4a7ad"> Bitmex高级保证金交易指南</a></li><li id="6e2e" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">开发人员的最佳加密API</li><li id="b037" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated"><a class="ae ku" rel="noopener" href="/coinmonks/crypto-arbitrage-guide-how-to-make-money-as-a-beginner-62bfe5c868f6">加密套利</a>指南:新手如何赚钱</li><li id="b46f" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">顶级<a class="ae ku" href="https://blog.coincodecap.com/bitcoin-node-solutions" rel="noopener ugc nofollow" target="_blank">比特币节点</a>提供商</li><li id="0966" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">最佳<a class="ae ku" rel="noopener" href="/coinmonks/what-are-the-best-charting-platforms-for-cryptocurrency-trading-85aade584d80">加密制图工具</a></li><li id="ef45" class="mp mq ht ka b kb my ke mz lc na ld nb le nc kt nd mv mw mx dt translated">了解比特币的<a class="ae ku" rel="noopener" href="/coinmonks/what-are-the-best-books-to-learn-bitcoin-409aeb9aff4b">最佳书籍有哪些？</a></li></ul><blockquote class="nx"><p id="b751" class="ny nz ht bd oa ob oc od oe of og kt ek translated"><a class="ae ku" href="https://coincodecap.com?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="oi oj ok ol om jn fe ff paragraph-image"><a href="https://coincodecap.com?utm_source=coinmonks"><div class="fe ff oh"><img src="../Images/160ce73bd06d46c2250251e7d5969f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*BoDnKUyK8p4hitHAJZ5Pdw.png"/></div></a></figure></div></div>    
</body>
</html>