<html>
<head>
<title>Deploying Multiple Organizations in Hyperledger Fabric Version 2.0 , and Monitoring containers via Cadvisor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Hyperledger Fabric版中部署多个组织，并通过Cadvisor监控容器</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/deploying-multiple-organizations-in-hyperledger-fabric-version-2-0-d5ea3ed17399?source=collection_archive---------0-----------------------#2020-05-11">https://medium.com/coinmonks/deploying-multiple-organizations-in-hyperledger-fabric-version-2-0-d5ea3ed17399?source=collection_archive---------0-----------------------#2020-05-11</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="102d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">到目前为止，我们已经看到了<strong class="is hu"> Hyperledger架构</strong>，我们将在后续的博客中深入研究。这篇博客帮助你开始使用<strong class="is hu">Hyperledger Fabric 2.0版本以及通过Google CAD visor</strong>进行的容器监控，我还将讨论与1.0版本相比在流程方面的差异。我们开始吧！！</p><p id="a905" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我参考了标准的Hyperledger Fabric文档，并遵循了相关的优化步骤。</p><p id="f044" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">执行这个的先决条件将是安装:<strong class="is hu"> docker，curl，wget，npm，Go和Python </strong>，我会给你命令<strong class="is hu"> Ubuntu系统安装先决条件。</strong></p><p id="7866" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">安装Docker和Docker-Compose的命令</strong></p><p id="22a4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">~$ <strong class="is hu"> sudo apt更新</strong></p><p id="67d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">~$ <strong class="is hu"> sudo安装docker-compose </strong></p><p id="9116" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">安装curl、python和wget的命令</strong></p><p id="40de" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">~$ <strong class="is hu"> sudo安装curl python wget </strong></p><p id="2308" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">安装go和npm的命令</strong></p><p id="2afe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">要安装GO语言:</p><p id="eb18" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">~ $ wget<a class="ae jo" href="https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz</a></p><p id="cc4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">设置环境变量。主目录下的bashrc文件</strong></p><pre class="jp jq jr js fq jt ju jv jw aw jx dt"><span id="018e" class="jy jz ht ju b fv ka kb l kc kd">export GOPATH=$HOME/go<br/>export PATH=$PATH:$GOPATH/bin</span></pre><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/1416ef37346436639523831b5bce5c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*j1qskOkcOW6sFfvrGlpvIg.png"/></div></figure><p id="1e4f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一个完成:你只需要源文件:<strong class="is hu"> source。bashrc </strong></p><p id="7d02" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">六美元。bashrc # # #进行必要的更改和编辑<br/> $ source。bashrc</p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff ki"><img src="../Images/3087765a396f34631e09733b924853e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*eQLfsDen6ST6ZgCFDhzHPQ.png"/></div></figure><p id="4d0e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">通过以下命令安装npm和nvm</strong></p><pre class="jp jq jr js fq jt ju jv jw aw jx dt"><span id="5299" class="jy jz ht ju b fv ka kb l kc kd">1)curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -<br/>2)sudo apt-get install nodejs<br/>3)wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.35.2/install.sh | bash<br/>4)npm install npm@5<strong class="ju hu">.</strong>6.0 <strong class="ju hu">-</strong>g</span></pre><p id="9cf3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">安装Hyperledger Fabric版本2.0 </strong></p><p id="9719" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">我们将在Hyperledger中发布一个稳定的版本，包含(证书颁发机构)版本中提到的组件</p><p id="0cb3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">curl-sSL<a class="ae jo" href="https://bit.ly/2ysbOFE" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2ysbOFE</a>| bash-s—&lt;fabric _ version&gt;&lt;fabric-ca _ version&gt;&lt;third party _ version&gt;</p><pre class="jp jq jr js fq jt ju jv jw aw jx dt"><span id="18e0" class="jy jz ht ju b fv ka kb l kc kd">curl <strong class="ju hu">-</strong>sSL https:<strong class="ju hu">//</strong>bit<strong class="ju hu">.</strong>ly<strong class="ju hu">/</strong>2ysbOFE <strong class="ju hu">|</strong> bash <strong class="ju hu">-</strong>s <strong class="ju hu">--</strong> 2.0<strong class="ju hu">.</strong>1 1.4<strong class="ju hu">.</strong>6 0.4<strong class="ju hu">.</strong>18<br/></span></pre><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/5bbb3a12753036b65ed66068591ffa1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*l5mD22Nrz0LUHy58ArQN5Q.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Installing Hyperledger Fabric</figcaption></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/ae6f4198800298a2fd0a91cb42ca7196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*2iOfr2eM6qY3eGTGn9ioGg.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Downloading the docker images</figcaption></figure><p id="4658" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">下载结束后，您可以进行“docker ps”</strong></p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/2ad1291f0193a0c1875bcfd9864b1455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*8zzq8lfTIhbHwjSCinrHHA.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">To see the containers running</figcaption></figure><p id="3c91" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://in.linkedin.com/in/anubhav-chaturvedi-a7465a72" rel="noopener ugc nofollow" target="_blank">您可以导航到网络目录并创建网络</a></p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff ko"><img src="../Images/83e9a5b48377df13b04b1ab5199558ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bPsHXd6geghQ7crZXiFK9g.png"/></div></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Once inside the test network directory</figcaption></figure><p id="b02f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">通过以下方式关闭网络(如果正在运行):"。/network.sh down" </strong></p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/dc9287024df6640539c955239c03f65b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*lsN9A8uak0uDvAaKJWt5iw.png"/></div></figure><p id="1b7a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">如果运行，您将看到所有对等体、订购者和节点都停止运行。</strong></p><p id="0309" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">与Fabric 1.0最新版本相比，他们只为证书生成和部署创建了一个文件，即“network.sh”，而不是之前版本中的多个文件，如“cryptogen和byfn”，从而降低了复杂性。</p><p id="aa50" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">再补一遍:“。/network.sh up" </strong></p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/d175c4f564a2edb9aac53b9a58444c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*YNErc6gds0HuKCiJg-9XGA.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">YAML files bringing up container</figcaption></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/4c2ba4044523a3d286378ff148412aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*nqy_SClH4R20vMCrh6LZXw.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Containers and Network Coming up</figcaption></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/2c269eb165cada96d0557acfc0fce28c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Nk7V_nW-kYGmFA0spjoYAQ.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">docker ps results</figcaption></figure><p id="5ee0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">现在让我们创建一个通道并运行链码</strong></p><pre class="jp jq jr js fq jt ju jv jw aw jx dt"><span id="e519" class="jy jz ht ju b fv ka kb l kc kd"><strong class="ju hu">./</strong>network<strong class="ju hu">.</strong>sh createChannel -c mychannel</span></pre><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/cd8bec9576d211f7cf4393ac04cb0eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Eigt6XRsddLkpvvAegGJqA.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Mychannel deployed</figcaption></figure><p id="1222" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><strong class="is hu">让我们运行Fabcar智能合约。/network.sh deployCC" </strong></p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/499d23d14ddbe75307a2d670a9cfef99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*N4O0uenKlHLRxHDZal9F5g.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Lets run the Fabcar Chain code</figcaption></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/499d23d14ddbe75307a2d670a9cfef99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*N4O0uenKlHLRxHDZal9F5g.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Chaincode deployed in Peers</figcaption></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/3ac3c14a98b883dd15830764b85e80f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*-XkR4j_K0LKhMH2Szf9C-w.png"/></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">Finally running the “QueryAllCars”</figcaption></figure><p id="5591" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让<strong class="is hu">通过<strong class="is hu"> Goolgle的容器监控工具</strong> l <strong class="is hu"> Cadvisor </strong>来监控</strong>被部署的<strong class="is hu">节点</strong> e。使用以下方式安装:</p><p id="df50" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">anubhav @ anubhav-VirtualBox:~/fabric-samples/test-network $ VERSION = v 0 . 35 . 0 #使用最新发布版本，可从</p><p id="2739" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">anubhav @ anubhav-VirtualBox:~/fabric-samples/test-network $ sudo docker run—volume =/:/rootfs:ro—volume =/var/run:/var/run:ro—volume =/sys:/sys:ro—volume =/var/lib/docker/:/var/lib/docker:ro—volume =/dev/disk/:/dev/disk:ro—publish = 8080:8080—detach = true—name = CAD visor gcr.io/google-containers/cadvisor:$VERSION</p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kt"><img src="../Images/71554deede190fabca60165734736faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*XNvls3au46_kHrz5kwLRkA.png"/></div></figure><p id="b8fe" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">一段时间后，您会看到Cadvisor出现在端口8080 (ss -tln)上</p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="fe ff ko"><img src="../Images/18039c319ae874572d9dc7039d5134ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C4x98mK1ek5g7Ni8FRRsDQ.png"/></div></div><figcaption class="kk kl fg fe ff km kn bd b be z ek">ss -tln port</figcaption></figure><p id="8a64" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">您可以打开<strong class="is hu"> localhost:8080 </strong>，查看所有列出的容器并监控其指标和使用情况:</p><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/cc9e309fe00ffc46c5ff2322189b9a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*bJp4OQaTtBGOVPdBaZxKuQ.png"/></div></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/00ed06796567178ba070184b6ea38dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*q6SYx-8rC642xw4QPWxT5w.png"/></div></figure><figure class="jp jq jr js fq kf fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/00ed06796567178ba070184b6ea38dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*q6SYx-8rC642xw4QPWxT5w.png"/></div></figure><p id="4c55" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在下一篇文章中，我们将看到如何增加网络流量并测试<strong class="is hu"> Hyperledger Fabric </strong>的限制，同时监控网络流量</p><p id="b468" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">对于任何进一步的疑问或任何与区块链或Devops相关的问题，您可以在Linkedin上给我发DM。</p><div class="ku kv fm fo kw kx"><a href="https://in.linkedin.com/in/anubhav-chaturvedi-a7465a72" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab ej"><div class="kz ab la cl cj lb"><h2 class="bd hu fv z el lc eo ep ld er et hs dt translated">Anubhav Chaturvedi - Devops项目导师- CodeAsylums | LinkedIn</h2><div class="le l"><h3 class="bd b fv z el lc eo ep ld er et ek translated">作为区块链开发(Hyperledger)和Devops工程师等角色的独立承包商工作，包括…</h3></div><div class="lf l"><p class="bd b gc z el lc eo ep ld er et ek translated">in.linkedin.com</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll kg kx"/></div></div></a></div><blockquote class="lm"><p id="b751" class="ln lo ht bd lp lq lr ls lt lu lv jn ek translated"><a class="ae jo" href="https://coincodecap.com?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="lx ly lz ma mb kf fe ff paragraph-image"><a href="https://coincodecap.com?utm_source=coinmonks"><div class="fe ff lw"><img src="../Images/160ce73bd06d46c2250251e7d5969f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*BoDnKUyK8p4hitHAJZ5Pdw.png"/></div></a></figure></div></div>    
</body>
</html>