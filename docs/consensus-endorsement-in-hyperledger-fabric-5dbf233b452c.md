# Hyperledger 结构中的共识和认可

> 原文：<https://medium.com/coinmonks/consensus-endorsement-in-hyperledger-fabric-5dbf233b452c?source=collection_archive---------0----------------------->

![](img/64c58707dd315aab40de82cc397a35c5.png)

> 本文是与 Hyperledger 结构相关的系列文章中的第二篇。如果你没有读过我之前的文章，那么这里有链接。我建议你应该试着建立“第一网络”,这样你就能理解本文中的概念。我的另一个推荐是[这个 Youtube 视频](https://www.youtube.com/watch?v=Lx9zgZCMqXE&t=0s&index=2&list=LL7ADdKMsUCKqTlnNsqHBakw)是 20 分钟内对比特币最好的解释。

在关于比特币的讨论中，你应该会遇到这个术语——“采矿”，也就是工作证明(PoW)。什么是采矿，为什么要采矿，这是你必须思考的两个问题。最重要的是为什么这样做；因为那是区块链的核心。总之，挖掘使比特币网络中的所有节点保持同步。它强制所有节点以相同的顺序提交事务，从而防止有人重复花费。*观看 Youtube 视频了解详细解释*。

> [发现并回顾最佳区块链软件](https://coincodecap.com)

虽然挖掘是比特币(和其他一些区块链框架)特有的，但一个更通用的术语是共识。如果你有一些分布式系统的背景知识，你可能知道让所有节点同意一个特定的值或动作是一个基本问题。在这里，我们处理的是事务。共识帮助我们确定是否提交，而建立这种共识是订购方服务节点的责任。

在更进一步之前，对于那些不太熟悉 Hyperledger Fabric 架构的人；节点是运行平台的特定服务的系统(或者更具体地说是 docker 容器)。我们有三种类型的节点，订货方(负责建立共识)、对等方(主机分类帐和链码)和客户(用于提交交易)。

让我们回忆一下，Hyperledger 结构网络中的参与者不是个人用户，而是整个组织。一个组织托管一个或多个对等节点和客户端节点。尽管事务是由客户机节点提交的，但它们是代表整个组织提交的。因此，验证过程必须确保组织没有搞任何恶作剧。既然是区块链网络，我们没有中央权威机构进行验证，而是有一个政策叫做“背书政策”。

顾名思义，签署政策定义了哪些参与者(组织)必须签署交易。为了理解背书意味着什么，考虑一个类比。假设你要给一个叫鲍勃的人 10 美元，还有一个叫约翰的第三个人负责背书这个交易。在这里，约翰确保你有足够的钱给鲍勃，你实际上已经给了鲍勃。

Hyperledger 结构中的背书者执行类似的任务。它们确保在更新资产之前，您拥有资产的正确状态，并且链代码中定义的任何验证都不会阻止您修改该资产。Hyperledger Fabric 允许我们在选择背书者时进行一些复杂的组合，如两个参与者中的任何一个，或两个参与者中的两个，或五个参与者中的两个等。

一旦交易得到相关参与者的认可，订购者服务节点就开始发挥作用。此时，客户在频道中向订购者广播背书(签名)的交易。订购者做两件事。首先，它验证客户机是否具有适当的角色，这是修改分类帐所必需的。确认后，订购方将交易收集到一个块中，如果达到规定的大小或经过了规定的时间，就将该块广播给渠道。

您可能会认为订购者可能是 Hyperledger Fabric 系统中的单点故障。这可能是不正确的，因为我们可以在网络中有多个订购者。在 1.2 版本之前，有两种共识机制可用，即 SOLO 和 Kafka。SOLO 是最简单的机制，它只广播交易，而不建立任何真正的共识。显然，不建议在生产中使用。另一方面，Kafka 使用了一个容错的分布式流媒体平台，名为 Apache Kafka。它还支持分布式订购服务，因此我们可以有多个订购者节点来避免单点故障。

我认为描述卡夫卡式的共识需要一整篇文章。所以现在就这样了。敬请关注更多关于 Hyperledger Fabric 区块链框架的文章。

> [在您的收件箱中直接获得最佳软件交易](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)