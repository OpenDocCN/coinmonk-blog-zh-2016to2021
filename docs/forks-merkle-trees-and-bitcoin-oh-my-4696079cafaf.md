# 叉子、Merkle 树和比特币(天啊)

> 原文：<https://medium.com/coinmonks/forks-merkle-trees-and-bitcoin-oh-my-4696079cafaf?source=collection_archive---------10----------------------->

![](img/37638d19f961e5c07ea4f14164ed4460.png)

## 链文件点。2

> 这是链文件的延续，一系列关于区块链相关技术的文章。首先，这些文章将专注于比特币的技术细节，然后转向其他加密货币和资产。这里可以看原帖[。](http://cponeill.posthaven.com/the-chain-files-pt-2)

# 块和头链

当交易数据被记录时，它被永久地记录在所谓的块中。正如所料，区块链是由石块组成的。每个块都可以被认为是一个更大的分类帐中自己的输入。例如，当 Alice 向 Bob 发送 15 个比特币时，该交易由矿工处理，如果这些交易得到确认，则它们会被记录到一个块中。随后，每个区块按照时间的线性顺序组织起来，这个区块链构成了区块链。随着时间的推移，这个链条越来越长，由于工作证明的原因，撤销任何早期的交易变得更加困难。

在区块链中识别块的主要方法是使用块头。块头长 80 字节，通过运行两次 sha256 算法来计算。块头散列不通过网络发送，而是由每个节点计算，作为每个块的验证过程的一部分。在每个块头中是先前块散列的内容。由于改变任何输入都会改变散列的输出，这意味着由于块 2 的头部包含块 1 的头部的散列，所以在不中断到块 2 的链接的情况下，块 1 的头部不能被改变。

![](img/b5d1f29088a9122450795789ab008909.png)

比特币要求每个块头都链接到前一个头块，前一个头块链接到前一个头块，以此类推，直到我们到达第一个块。这个区块被称为创世区块。如果一个块头和前一个块头之间的链接不能被验证，则该块被认为是无效的，成为所谓的孤儿块。正因为如此，比特币的工作证明是累积的，因为它建立了与前一个区块相连的区块链。例如，第二个块标题创建的工作证明会添加到第一个块标题创建的工作证明中。链接到第二块报头的第三块报头然后累积该工作证明。块之间的这些链接被称为头链，是链的进一步延伸。每个比特币客户端寻找最佳头链，即累积工作量最大的有效块头链。

# 收割台链条叉

挖掘器之间可能会出现复杂情况，即当两个挖掘器同时创建一个新的有效标头，并且都引用同一个标头父项时。这种冲突被称为链叉，因为每个报头只能引用一个先前的报头，所以每个比特币矿工现在需要选择在下一个报头中使用哪个竞争的先前报头。当移动到下一个块时，证明最有效的链成为主链。正是在这一点上，创建了失败标题的矿工浪费了他们的工作证明，并错过了比特币采矿奖励。

短链分叉在比特币中发生得相当多，通常没什么好担心的。我们可以注意到，为了保持最大数量的工作证明添加到头链中，我们做了大量的工作来防止它们发生。

# 交易块

最终，比特币是一个交易系统，尽管块头中没有交易。相反，挖掘器收集称为事务块的事务组，然后使用特定的公式对它们进行散列。事务的散列被称为 merkle 根。merkle 根作为 80 个字节中的 32 个被包括在块报头中，并且事务块和它们相应的报头一起构成了块。在之前的帖子中，有人指出散列一些输入会产生特定的输出。因此，当挖掘器散列相同的事务块时，它将总是产生与输出相同的散列，并证明挖掘器选择了那些特定的事务。由于块头受到工作证明的保护，因此不可能更改该块中出现的事务。

![](img/d1ad0d200853dffd02eabce7825c0b0e.png)

如前所述，事务的散列称为 merkle root，它是 merkle tree 的根散列，merkle tree 是基于散列的树数据结构，是散列列表的推广。在树形结构中，每个叶节点是数据块的散列，每个非叶节点是其子节点的散列。它们主要用于分布式和点对点数据系统中进行验证，这对于比特币区块链来说非常适用。

比特币区块链是一项有趣的技术，需要进一步的学习和研究。从技术角度来看，通过结合哈希函数、工作证明和 merkle 根等数据结构和算法的力量，我们现在有了一种更好的方法来定义数字空间的归属。每笔交易都是位于分类账中某个区块的数字空间。从更哲学的角度来看，我们可以把发生的每一笔交易看作是它自己独特的数字时刻；进一步证明事件***在特定时间发生，并且有证据证明它发生了。比特币本身更专注于金融交易，这是其整体安全性的主要贡献者。这是研究和理解其技术优点的首要原因之一。还有一些项目更关注数字时代，而不是金融领域。看看这个领域的新项目将如何建立在比特币的技术考虑之上，并创建他们自己的更专注于哲学意义的项目，这将是一件有趣的事情。

*** *在这种情况下，我们可以抽象地想到一个事件，它可以指几乎任何事情。一种不太抽象但更明确的方式是将一个事件视为有形的东西，如数码照片、录制的音乐或一件艺术品，它们被分配给一项交易，并可以在分类账中找到，很容易通过所有者的钱包地址将其归因于所有者。*

> *想要证明我写了这篇文章吗？把这个* [*密钥*](https://gist.github.com/cponeill/8ab23ec3f58519c6fd60ff17a3e9917b) *和* [*用 Keybase 解密*](https://keybase.io/decrypt) *吧。*

> [直接在您的收件箱中获得最佳软件交易](https://coincodecap.com/?utm_source=coinmonks)

[![](img/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png)](https://coincodecap.com/?utm_source=coinmonks)