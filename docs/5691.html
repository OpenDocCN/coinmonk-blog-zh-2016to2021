<html>
<head>
<title>NFT fractions repository contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NFT馏分库合同</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/nft-fractions-repository-contracts-3ecab96f3d1?source=collection_archive---------2-----------------------#2021-10-12">https://medium.com/coinmonks/nft-fractions-repository-contracts-3ecab96f3d1?source=collection_archive---------2-----------------------#2021-10-12</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><p id="ee9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">NFT分数库基于ERC1155标准，这是除ERC721之外的第二个非功能性测试标准。ERC1155合约是可替换和不可替换令牌的组合。在ERC721中，每个令牌都是唯一的，有自己的参数、元数据、历史记录等。除此之外，在ERC1155中，每个令牌还与一个金额相关联。这个数量可以被视为原始令牌、股份、相同项目的副本，或者您可以想到的任何其他有意义的抽象。ERC1155由金恩开发，用于表示游戏项目。这些物品可以是剑(许多是同一类型的)、戒指(在某些情况下是7个)，或者任何其他可以是唯一的(数量是1，也就是不可替代的)或者与任何大于1的数量相关联的东西(可替代的)。这些不同的项目可以放入一份ERC1155合同中。对于ERC721，可以通过为每个项目部署单独的合同来实现相同的效果:一个合同用于剑，一个合同用于戒指，等等。这样做的坏处是显而易见的。更多内容可阅读原<a class="ae jo" href="https://github.com/ethereum/EIPs/issues/1155" rel="noopener ugc nofollow" target="_blank">提案</a>。</p><p id="b9d5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在我们的例子中，ERC1155是铸造原始独特NFT碎片的直接选择。NFT分数库中的每个代币代表最初在另一个合同中铸造的唯一的NFT。与每个ERC1155令牌相关联的金额是该NFT的铸造分数。</p><p id="bb1e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">为简单起见，NFT存款功能仅在Polygon上可用，在BSC上不可用。因此，该应用程序在某种程度上是不对称的，因为NFT分数源自多边形，并且在转移后也可以在BSC上进行交易。从用户体验的角度来看，当用户将其NFT存入NFT分数Dex时，会发生以下情况:<br/>-------------------------------------------- NFT被转移到原始合同中铸造NFT的Dex的地址。这是一个锁定机制，防止用户卖掉他的NFT，除非他从Dex中取出它。为了简单起见，Dex不使用任何保险库系统，它只是简单地转移原始合同中的NFT。<br/> -新的ERC1155代币以给定金额铸造，代表股份/分数。<br/>-ERC 1155标准实现了一个批准系统，以支持令牌传输，就像ERC721一样。因此，在存款之前，用户被要求批准Dex合同以转移他的NFT。<br/> -只有那些所有份额属于同一用户的NFT才可以从Dex中撤销。换句话说，用户必须先获得NFT的全部所有权(所有股份)，然后才能将其收回。</p><p id="763b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">让我们仔细看看NFT分数库合同:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff jp"><img src="../Images/d4e587352776ee556f653df4cb794c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*tZkF3PFW8MEirz1QQLagrw.jpeg"/></div></figure><p id="6a39" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">该接口定义了从其他智能合约调用的顶级函数，例如:从桥合约:<br/> - Burn和mint与桥合约直接相关。当某人将他的代币从一个链转移到另一个链时，桥契约调用原始链上的burn函数和另一个链上的mint函数。关于这座桥的更多细节将在后面的文章中介绍。<br/> - TransferFrom与ERC1155中的safeTransferFrom相同，但有一点限制，契约不暂停，还引入了一个钩子函数(_afterTransferFrom)。<br/>-gettotalfractionamount和getErc721ContractAddress只是阅读器函数</p><p id="c500" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">基础契约(NftFractionsRepositoryBase)实现了接口的功能，并且引入了可以由子契约实现的钩子函数。这些钩子函数提供了钩住一些逻辑(事件发射或更新内部数据结构)的可能性，如前一篇文章结尾所详述。</p><p id="2da7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">特定于链的合约反映了使用图表读取数据和直接从智能合约读取数据之间的差异。在多边形契约的情况下，这些钩子包含事件发射，在BSC契约的情况下，这些钩子函数更新内部数据结构。</p><p id="f5bf" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">先说多边形契约(MaticFractionsRepositoryBase)。它实现了depositNft和withrawNft函数，因为这些函数只在多边形上可用。此外，它还发出相应的depositNft和withdrawNft事件，这些事件由图形进行索引。</p><p id="5c8d" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">相比之下，BSC契约(BscNftFractionsRepository)处理三种不同的内部数据结构:<br/> -共享者的令牌ID<br/>-令牌ID的所有者<br/> -所有令牌ID<br/>它们都有相应的getter函数:<br/>-getTokenIdsByShareOwner<br/>-getOwnersBYtokenId<br/>-getTokenIds<br/>它们为UI的数据显示用例服务:<br/> -给定用户的NFT列表<br/> -所有者列表</p><p id="ec97" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">在下一节中，我们将详细介绍DEX合同。</p><p id="9ec4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">如果你想阅读本系列的其他文章，你可以在<a class="ae jo" rel="noopener" href="/@szmizorsz/nft-fractions-decentralised-exchange-introduction-3e696f27c065">主文章</a>中找到链接。</p><p id="7589" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated">或者如果你想看我的其他项目和贡献:</p><p id="fa95" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hm dt translated"><a class="ae jo" href="https://www.szabolcsszentes.com/" rel="noopener ugc nofollow" target="_blank">https://www.szabolcsszentes.com/</a></p><blockquote class="jx"><p id="358c" class="jy jz ht bd ka kb kc kd ke kf kg jn ek translated">加入Coinmonks <a class="ae jo" href="https://t.me/coincodecap" rel="noopener ugc nofollow" target="_blank">电报频道</a>和<a class="ae jo" href="https://www.youtube.com/c/coinmonks/videos" rel="noopener ugc nofollow" target="_blank"> Youtube频道</a>了解加密交易和投资</p></blockquote><h2 id="6048" class="kh ki ht bd kj kk kl km kn ko kp kq kr jb ks kt ku jf kv kw kx jj ky kz la lb dt translated">也阅读</h2><div class="lc ld fm fo le lf"><a href="https://blog.coincodecap.com/bitsgap-review" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">获取信号、交易机器人和套利</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">在本文中，我们将回顾Bitsgap，这是一个满足您所有交易需求的一站式加密交易平台。它…</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">blog.coincodecap.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt jv lf"/></div></div></a></div><div class="lc ld fm fo le lf"><a href="https://blog.coincodecap.com/best-social-trading-platforms" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">5个最佳社交交易平台[2021] | CoinCodeCap</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">困惑于社交交易和副本交易哪个平台最好？本文将带您了解各种…</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">blog.coincodecap.com</p></div></div><div class="lo l"><div class="lu l lq lr ls lo lt jv lf"/></div></div></a></div><div class="lc ld fm fo le lf"><a href="https://blog.coincodecap.com/blockfi-review" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">BlockFi评论2021:利弊和利率| CoinCodeCap</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">今天，我们提出了一个全面的BlockFi评论，这是一个成立于2017年的加密贷款平台，拥有其…</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">blog.coincodecap.com</p></div></div><div class="lo l"><div class="lv l lq lr ls lo lt jv lf"/></div></div></a></div><div class="lc ld fm fo le lf"><a rel="noopener follow" target="_blank" href="/coinmonks/buy-bitcoin-in-india-feb50ddfef94"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">如何在印度购买比特币？2021年购买比特币的7款最佳应用[手机版]</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">如何使用移动应用程序购买比特币印度</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">medium.com</p></div></div><div class="lo l"><div class="lw l lq lr ls lo lt jv lf"/></div></div></a></div><div class="lc ld fm fo le lf"><a rel="noopener follow" target="_blank" href="/coinmonks/best-crypto-tax-tool-for-my-money-72d4b430816b"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">加密税务软件——五大最佳比特币税务计算器[2021]</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">不管你是刚接触加密还是已经在这个领域呆了一段时间，你都需要交税。</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">medium.com</p></div></div><div class="lo l"><div class="lx l lq lr ls lo lt jv lf"/></div></div></a></div><div class="lc ld fm fo le lf"><a href="https://blog.coincodecap.com/best-hardware-wallet-bitcoin" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">存储比特币的最佳加密硬件钱包[2021] | CoinCodeCap</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">保管您的数字资产很容易，但找到正确的存储方式却是一项繁琐的任务。在线钱包有一个风险…</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">blog.coincodecap.com</p></div></div><div class="lo l"><div class="ly l lq lr ls lo lt jv lf"/></div></div></a></div><div class="lc ld fm fo le lf"><a rel="noopener follow" target="_blank" href="/coinmonks/pionex-review-exchange-with-crypto-trading-bot-1e459d0191ea"><div class="lg ab ej"><div class="lh ab li cl cj lj"><h2 class="bd hu fv z el lk eo ep ll er et hs dt translated">Pionex评论2021 |免费加密交易机器人和交换</h2><div class="lm l"><h3 class="bd b fv z el lk eo ep ll er et ek translated">Pionex是为交易自动化提供工具的后起之秀。Pionex上提供了9个加密交易机器人…</h3></div><div class="ln l"><p class="bd b gc z el lk eo ep ll er et ek translated">medium.com</p></div></div><div class="lo l"><div class="lz l lq lr ls lo lt jv lf"/></div></div></a></div></div></div>    
</body>
</html>