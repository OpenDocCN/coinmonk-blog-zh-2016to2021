<html>
<head>
<title>Reinforcement Learning for Home Robotics pt. 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">家用机器人的强化学习。2</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/reinforcement-learning-for-home-robotics-pt-2-7ba18cc500b9?source=collection_archive---------6-----------------------#2018-10-19">https://medium.com/coinmonks/reinforcement-learning-for-home-robotics-pt-2-7ba18cc500b9?source=collection_archive---------6-----------------------#2018-10-19</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><div class=""><h2 id="b353" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ek translated">营造环境</h2></div><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff ji"><img src="../Images/cc67220c314551f8be9e9c2790b83827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9iY0Miiwuaf4SQWMwv5RFw.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Purposed RL Architecture</figcaption></figure><h2 id="1ccd" class="jy jz ht bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">介绍</h2><p id="cdbf" class="pw-post-body-paragraph kw kx ht ky b kz la iu lb lc ld ix le kj lf lg lh kn li lj lk kr ll lm ln lo hm dt translated">在这篇文章中，我们将迈出第一步，构建上图中概述的RL系统。在这里，我们将建立我们设计的家用机器人将存在的环境。为了不贪多嚼不烂，这个世界将受到以下限制:</p><ul class=""><li id="72cb" class="lp lq ht ky b kz lr lc ls kj lt kn lu kr lv lo lw lx ly lz dt translated">世界上所有的物体都是静止的。</li><li id="2acb" class="lp lq ht ky b kz ma lc mb kj mc kn md kr me lo lw lx ly lz dt translated">我们每集都使用相同的布局。</li><li id="2870" class="lp lq ht ky b kz ma lc mb kj mc kn md kr me lo lw lx ly lz dt translated">每集给机器人的命令可以是随机的。</li></ul><p id="c149" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">我们的世界将以上一篇文章介绍的家居布局为基础，如下图:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mi"><img src="../Images/88596e69298169b16bdda01a4f2e14b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMAXeEAAHGIzUgdaoHav9w.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Marvin’s World</figcaption></figure><p id="6018" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">本文的目标是使用Gazebo在ROS Kinetic中构建这个静态环境。</p><blockquote class="mj mk ml"><p id="ed2d" class="kw kx mm ky b kz lr iu lb lc ls ix le mn mf lg lh mo mg lj lk mp mh lm ln lo hm dt translated">注意:我知道ROS 2.0正在路上，但是在我写这篇文章的时候，它还没有正式发布。此外，我对它还没有足够的了解，所以无法放心地将我目前的工作转移到platform上。当它正式发布的时候，我已经花时间复习了，我会在博客上写一些关于如何将东西转换到新的ROS 2.0系统的文章。在此之前，我将假设当前的ROS 1.0系统，我通常在笔记本电脑上使用Kinetic。</p></blockquote><h2 id="936b" class="jy jz ht bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">凉亭建筑编辑</h2><p id="c7f3" class="pw-post-body-paragraph kw kx ht ky b kz la iu lb lc ld ix le kj lf lg lh kn li lj lk kr ll lm ln lo hm dt translated">我们将首先使用Gazebo Building编辑器为代理环境构建布局。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mq"><img src="../Images/3bcec39d32f0e577ddf2077c34194866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lq611gHgZERdom3J7Q6luA.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Gazebo Building Editor UX</figcaption></figure><p id="1cdd" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">上面我们可以看到露台建筑编辑器。由于这不是一个关于Gazebo特性的全面教程，我们将只讨论为Marvin构建训练环境所需的特性。如果你想了解更多关于露台建筑编辑器的信息，你可以在这里找到。</p><p id="26e3" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">设计环境的第一步是导入布局。我们可以点击窗口左下方的“导入”按钮。从这里，我们可以选择表示我们布局的png文件(在本例中，我使用了与本文前面的“Marvin的世界”相同的png文件)。</p><p id="c736" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">导入布局后，系统会提示我们设置比例。我们在图像上选择一个间隔来代表一米。在这种情况下，我大致用门口的长度来表示这个值。</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mq"><img src="../Images/716073900b9764866929f5172418e812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6UIqPA9iuvUmDYFqzMIgew.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Placing the Walls</figcaption></figure><p id="2799" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">下一步是放置建筑物的墙壁。通过选择界面左侧的“墙”图标，然后在上一步中导入的图像模板中描摹墙，可以将墙放置在模型中。</p><p id="f419" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">使用建筑编辑器的最后一步，我们将为建筑添加纹理。要做到这一点，我们选择“木材”纹理(再次从界面的左侧)，并通过在界面底部的3D预览中单击每一面墙来将其应用到墙上。</p><h2 id="305d" class="jy jz ht bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">凉亭世界</h2><p id="b25a" class="pw-post-body-paragraph kw kx ht ky b kz la iu lb lc ld ix le kj lf lg lh kn li lj lk kr ll lm ln lo hm dt translated">一旦我们完成了我们的建筑，我们会想把它放在一个露台世界里。这是相当容易的，因为在我们离开建筑编辑器后，它将为我们预先放置到世界中。我们要做的第一件事是改变建筑物的位置，使(0，0)位置(由图像中的蓝色z轴标记)位于我们希望Marvin开始的位置。</p><p id="d650" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">接下来，我们的凉亭世界需要一些人(至少如果我们要遵循提供的设计)。Gazebo有一些内置模型可以帮助解决这个问题。我们将从名为“站立的人”的“插入”选项卡中抓取其中一个模型，并将其插入到原始楼层地图上有“站立的人”的任何地方。</p><p id="d474" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">最后，我们需要添加我们的汽水罐，我们会发现这在Gazebo中相当容易做到，因为它为我们提供了一个“汽水罐”模型，与我们正在寻找的完全匹配！我们将把它放在世界上类似的位置，然后保存文件。</p><p id="e7c7" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">一旦所有这些都完成了，我们的世界将会如下图所示:</p><figure class="jj jk jl jm fq jn fe ff paragraph-image"><div role="button" tabindex="0" class="jo jp di jq bf jr"><div class="fe ff mr"><img src="../Images/db59cdef44c464141494ddb4aebab06d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZlPrsASSELTWP3TT6xY6Q.png"/></div></div><figcaption class="ju jv fg fe ff jw jx bd b be z ek">Overhead view of the World</figcaption></figure><h2 id="1dd5" class="jy jz ht bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">启动世界</h2><p id="7ca8" class="pw-post-body-paragraph kw kx ht ky b kz la iu lb lc ld ix le kj lf lg lh kn li lj lk kr ll lm ln lo hm dt translated">我们为代理设置环境的最后一步是在ROS中为它创建一个启动文件。这将使我们在添加更多组件时更容易配置仿真。</p><p id="82ea" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">下面是加载RL环境的启动文件。这个启动文件加载Marvin的机器人描述文件，加载gazebo中的世界，并将机器人放置在世界中的0，0位置。</p><pre class="jj jk jl jm fq ms mt mu mv aw mw dt"><span id="8ce4" class="jy jz ht mt b fv mx my l mz na">&lt;?xml version="1.0" encoding="UTF-8"?&gt; <br/>&lt;launch&gt;  <br/>   &lt;include file="$(find rover_slam)/launch/marvin_bot_description.launch"/&gt;  <br/> <br/>   &lt;arg name="world" default="empty"/&gt;  <br/>   &lt;arg name="paused" default="false"/&gt;  <br/>   &lt;arg name="use_sim_time" default="true"/&gt;  <br/>   &lt;arg name="gui" default="true"/&gt;  <br/>   &lt;arg name="headless" default="false"/&gt;  <br/>   &lt;arg name="debug" default="false"/&gt;   </span><span id="3f7b" class="jy jz ht mt b fv nb my l mz na">   &lt;include file="$(find gazebo_ros)/launch/empty_world.launch"&gt;<br/>      &lt;arg name="world_name" value="$(find rover_slam)/worlds/RL_World.world"/&gt;    <br/>      &lt;arg name="paused" value="$(arg paused)"/&gt;    <br/>      &lt;arg name="use_sim_time" value="$(arg use_sim_time)"/&gt;    <br/>      &lt;arg name="gui" value="$(arg gui)"/&gt;    <br/>      &lt;arg name="headless" value="$(arg headless)"/&gt;    <br/>      &lt;arg name="debug" value="$(arg debug)"/&gt;  <br/>   &lt;/include&gt;<br/>   <br/>&lt;!--spawn a robot in gazebo world--&gt;   <br/>&lt;node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" respawn="false"    output="screen" args="-urdf -param robot_description -model rover_slam" /&gt;<br/> <br/>&lt;/launch&gt;</span></pre><blockquote class="mj mk ml"><p id="78f0" class="kw kx mm ky b kz lr iu lb lc ls ix le mn mf lg lh mo mg lj lk mp mh lm ln lo hm dt translated">上面的代码片段假设世界文件已经被命名为“RL_World.world”，这是一个由名为“marvin_bot_description.launch”的启动文件加载的urdf文件。它应该放在它所使用的ROS包的习惯“World”文件夹中。</p></blockquote><h2 id="9698" class="jy jz ht bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">后续步骤</h2><p id="af80" class="pw-post-body-paragraph kw kx ht ky b kz la iu lb lc ld ix le kj lf lg lh kn li lj lk kr ll lm ln lo hm dt translated">这就结束了本文需要讨论的内容。因为在Gazebo中创建一个环境相当简单，所以这个条目比迄今为止的其他条目要短一些(也可能比它之后的任何条目都要短)。</p><p id="9e26" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">在下一篇文章中，我将介绍到目前为止在这个博客中描述的马文机器人的当前模拟的修改。这些修改旨在促进机器人在RL环境中的使用，而不是依赖于模仿<a class="ae nc" rel="noopener" href="/@genefoxwell/decentralized-subsumption-8237316fb335">包容</a>架构的硬编码规则集。</p><p id="bfab" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">在那之前，</p><p id="ede0" class="pw-post-body-paragraph kw kx ht ky b kz lr iu lb lc ls ix le kj mf lg lh kn mg lj lk kr mh lm ln lo hm dt translated">分享享受！</p></div></div>    
</body>
</html>