<html>
<head>
<title>Playing with Lightning Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">玩闪电网</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/playing-with-lightning-network-90ecc678fe70?source=collection_archive---------10-----------------------#2018-07-30">https://medium.com/coinmonks/playing-with-lightning-network-90ecc678fe70?source=collection_archive---------10-----------------------#2018-07-30</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><h1 id="d25a" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">蛰伏的能力，隐藏的平衡</h1><p id="3cb3" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">玩闪电听起来很危险，但是很好玩，而且我还活着。我的大部分节点和通道也是。到目前为止，我已经在LN上建立了许多实验性的东西。“边做边学”是我更喜欢的道路。</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div class="fe ff km"><img src="../Images/10aa7cf10274338c02aa16461a22c81f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/0*GgfA5znf0yzL2uZu.jpg"/></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">Me playing with Lightning. Actually, no it is <a class="ae ky" href="https://www.indiatoday.in/movies/celebrities/story/david-blaine-goes-high-voltage-with-latest-stunt-117662-2012-10-03" rel="noopener ugc nofollow" target="_blank">David Blaine</a></figcaption></figure><p id="02e5" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">我想了很久的一个实验是关于每个通道的平衡。根据设计，您只能看到通道的总容量，实际的余额不会广播，但除了共享通道的两个节点之外，其他所有时间都是隐藏的。因此，发送者实现必须尝试多条路径，寻找至少具有足够总容量的潜在路径。</p><p id="e403" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">实际上，总容量目前也没有在网络上公布，你必须问区块链，这使得轻钱包更加困难。他们中的一些人甚至看都不看就尝试，这在大多数情况下都很有效。即使已知一个信道有10Msat的容量，你也无法知道每一端是5Msat，还是一端是0。</p><p id="5aa2" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">所以，我决定一探究竟。我将最终开始探测网络，看看它真正的样子和感觉。这将是令人兴奋的。我认为，到目前为止，像这样的分析只是在理论上根据已知的图表进行的，而从未在现实中进行过。</p><p id="a08d" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">我在我的频道平衡器上做了这个实验。基本上，我只需要改变探路者算法，从平衡我自己的通道，到探测网络上的任意通道。稍后我可能会写一个关于我的渠道平衡项目的故事。简而言之:成功了。</p><p id="ca33" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">因此，探测器实际执行的操作如下:</p><p id="b2b8" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">随机选择一个节点。计算到它的路径，包括使用什么通道等。像这样，A是源节点，D是目的节点:</p><p id="86bf" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">A-&gt;B-&gt;C-&gt;D</p><p id="faa7" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">我们要考察C和d之间的平衡。</p><p id="95c2" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">因此，让我们首先尝试看看您可以通过多少路到达d。通过计算该路线的最小通道容量，您已经知道了可能的上限。然而，这是一个极其乐观的值，与你在现实中能推动的事情无关。理论上也没有。考虑在你的方向上，每个通道是否有0和最大容量之间的随机平衡，将它们排列起来，取最小值。它甚至不会是<strong class="jq hu">最小通道的一半</strong>。事实上，今天有许多频道在一边或另一边有0。还有被禁用的频道和<a class="ae ky" rel="noopener" href="/@robban_69827/lightning-network-routing-fud-and-zombies-776b8238e66b">僵尸节点</a>，我们不知道，但认为它们在线。所以，诸如此类的事情使得计算变得毫无价值。我们不妨从底层开始蛮干。</p><h1 id="d79c" class="iq ir ht bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dt translated">鲁莽地探测网络</h1><p id="bdb4" class="pw-post-body-paragraph jo jp ht jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hm dt translated">第一阶段:从1000 sat开始，如果有效，翻倍到2000，然后到4000，以此类推。假设你成功通过了8000 sat，但没有通过16000 sat。</p><p id="59e1" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">第二阶段:试试中间的，12000 sat，两者相差4000 sat。如果那样的话，你会增加2000 sat，否则你会减少2000 sat。然后重复1000次sat增加/减少。假设你在经历了这一切后，最终得到了13000英镑。这个数字大约是你发送A-&gt;B-&gt;C-&gt;D的总量。</p><p id="92c7" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">第3阶段:接下来，您希望验证限制实际上是C-&gt;D，而不是B-&gt;C，因此您将13000的数字增加到15000，以确保万无一失，并尝试将A-&gt;B-&gt;C。如果这行得通，您可以假设13000的限制是C-&gt;D之间的平衡。我们发现并揭示了平衡。</p><p id="2305" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">一旦有了更好的错误报告，并且开发人员对错误应该是什么样子有了共识，就可以改进这种方法。但是现在癫痫小丑发作产生了一些有用的结果。</p><p id="eb33" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">冲洗并对网络的其余部分重复上述操作。</p><p id="7e43" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">成功的探测需要很多时间，因为大多数路径根本不起作用。这可能是由于不恰当的平衡，以及并非所有的实现都在通道关闭时发出信号，这使得它们难以避免。鉴于3000个mainnet节点中有超过2/3的节点出现故障，有很多通道也出现故障。我们必须有耐心。</p><p id="892b" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">除了探索平衡，理论上，这将最终得到一个更准确的可视化工具，只显示实际上<strong class="jq hu">进行</strong>远期支付的渠道。</p><p id="3948" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">因此，连接和平衡被发现并被验证有效:</p><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff le"><img src="../Images/54c454e4aef1d19a6a33a03b71b82576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f9ZIO4hjXPRad6X-JmEr7Q.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">Probing in action</figcaption></figure><figure class="kn ko kp kq fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff lj"><img src="../Images/16bc7f8bb711d2dcb208d0f9ba637fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nFm64qyBOVYTkDHspwUTFg.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">Close-up on Bitrefill</figcaption></figure><p id="1651" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">请注意，这些数字可能会有一点或多点的偏差。一些渠道比其他渠道更能改变平衡，事情可能会出错。导致问题的一个原因是，即使我指定了一个特定的通道，节点也可能决定通过两个节点之间的并行通道进行路由(因为指定的通道具有太低的平衡)。这是有创意的，但对于探测和平衡，甚至可能对于AMP支付来说，这是非常令人不安的，我认为节点将停止这样做。</p><p id="8559" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">现在似乎出现了一种共识，即广播容量是一件好事，尤其是对钱包较轻的人来说，广播平衡不会伤害任何人。毕竟，我们显然无论如何都能探测到，而且到目前为止还没有人受伤。</p><p id="e046" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">将这一点与通过纳入余额使故障标准化和更加详细结合起来，将为原子多路径支付快速找到可行路径铺平道路。闪电网络的未来看起来非常光明。只需要清理一些东西，装上一些被忽略的螺丝。</p><p id="63c9" class="pw-post-body-paragraph jo jp ht jq b jr kz jt ju jv la jx jy jz lb kb kc kd lc kf kg kh ld kj kk kl hm dt translated">不断增长的探测闪电网络可以在这里找到【https://www.moneni.com/lightningprobe T2】</p><blockquote class="lk"><p id="6ee0" class="ll lm ht bd ln lo lp lq lr ls lt kl ek translated"><a class="ae ky" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">在您的收件箱中直接获得最佳软件交易</a></p></blockquote><figure class="lv lw lx ly lz kr fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff lu"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>