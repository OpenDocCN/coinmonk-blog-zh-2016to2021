<html>
<head>
<title>;One-click Chainlink deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">；一键链接部署</h1>
<blockquote>原文：<a href="https://medium.com/coinmonks/one-click-chainlink-deployment-9cd39833d72d?source=collection_archive---------0-----------------------#2020-06-09">https://medium.com/coinmonks/one-click-chainlink-deployment-9cd39833d72d?source=collection_archive---------0-----------------------#2020-06-09</a></blockquote><div><div class="ef hh hi hj hk hl"/><div class="hm hn ho hp hq"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff iq"><img src="../Images/955f6337c48c22e88d672f8c33daf8f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ev0pcGVEMrdim5SX2Bsq-Q.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Quickly deploy a Chainlink node using the KubeApps user interface.</figcaption></figure><h1 id="c397" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">链环</h1><p id="6fff" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">通过使用Chainlink节点，Chainlink将区块链智能合同与外部数据(如价格、身份或API请求)连接起来。节点监视以太坊区块链的oracle请求，并在更新链上数据的链接中获得补偿。一个核心用途是开发分散的价格提要，您可以在<a class="ae lb" href="https://feeds.link" rel="noopener ugc nofollow" target="_blank"> https://feeds.link </a>上浏览</p><h1 id="0856" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">在你读这个之前</h1><p id="325a" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">在本指南中，我们将通过单击按钮将Chainlink节点部署到Kubernetes集群。如果你只想使用Docker运行一个独立的Chainlink节点，我们推荐官方的<a class="ae lb" href="https://docs.chain.link/docs/running-a-chainlink-node" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="2049" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">虽然许多现有的官方运营商使用Kubernetes进行容器编排，但我们的部署将有所不同，在我们的集群上使用KubeApps来实现Chainlink节点的一键式部署。从长远来看，运行KubeApps可以轻松升级到较新的Chainlink版本，还可以帮助我们部署附加组件，如外部Chainlink Gas Updater或Chainlink GraphQL API。</p><h1 id="d0b8" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">要求/工具</h1><p id="e7a5" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">好吧，所以我们可能撒了一个小小的谎:这个指南将帮助你通过点击一个按钮来部署一个Chainlink节点，但是<strong class="kf hu">只是在你运行KubeApps之后。然而，一旦你这样做了，你也将能够升级到未来的版本和安装插件与简单的点击按钮<strong class="kf hu">。</strong></strong></p><p id="ec0f" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">这里是我们将用来部署我们的Chainlink节点的一些组件。如果你错过了任何一个，请继续阅读，因为我们会为你提供每一个设置的建议。如果您已经设置了这些组件，那么您可以跳到“KubeApps Chainlink部署”一节，了解如何使用GUI部署Chainlink节点。</p><ul class=""><li id="27c2" class="lh li ht kf b kg lc kk ld ko lj ks lk kw ll la lm ln lo lp dt translated">以太坊节点</li><li id="06db" class="lh li ht kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp dt translated">PostgreSQL数据库</li><li id="5649" class="lh li ht kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp dt translated">Kubernetes (K8s)星团</li><li id="99a5" class="lh li ht kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp dt translated"><a class="ae lb" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank">舵</a>配置K8s集群</li><li id="18cd" class="lh li ht kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp dt translated"><a class="ae lb" href="https://kubeapps.com/" rel="noopener ugc nofollow" target="_blank">K8s集群上的KubeApps </a>部署</li></ul><h2 id="a74b" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">以太坊节点</h2><p id="c358" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">您的Chainlink节点将需要一个以太坊节点来监视和完成区块链上的oracle请求。如果希望创建一个简单的部署，我们推荐一个服务，如<a class="ae lb" href="http://infura.io" rel="noopener ugc nofollow" target="_blank"> infura.io </a>或<a class="ae lb" href="http://fiews.io/" rel="noopener ugc nofollow" target="_blank"> fiews.io </a>，这两个服务都提供免费层，让您可以访问JSON-RPC请求。如果希望最大限度地提高安全性，运行自己的节点总是更好的解决方案。多亏了https://github.com/OracleFinder/ChainlinkEthFailover的<a class="ae lb" href="https://github.com/OracleFinder/ChainlinkEthFailover" rel="noopener ugc nofollow" target="_blank">，你甚至可以将内部以太坊节点与节点即服务(NaaS)结合起来</a></p><h2 id="bc64" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">PostgreSQL服务器</h2><p id="56a4" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">Chainlink节点使用外部PostgreSQL数据库来跟踪oracle请求执行所需的事务、请求和其他重要数据。如果您已经有一个PostgreSQL服务器，只需创建一个名为“chainlink”的新数据库。如果没有PostgreSQL服务器，可以使用AWS RDS之类的服务来设置数据库，或者使用KubeApps来部署PostgreSQL图表(参见后面关于KubeApps的部分)。</p><h2 id="6183" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">Kubernetes (K8s)星团</h2><p id="9591" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">K8s支持容器编排。容器编排是对容器集群的动态管理。一旦集群启动并运行，您将能够部署多个独立的docker容器。虽然您可以使用K8s API直接部署PostgreSQL和Chainlink docker容器，但Helm和KubeApps将通过存储我们的配置和添加UI层来大大简化这一过程。</p><p id="c071" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">如果你没有K8s集群，你可以使用云服务，比如AWS EKS，或者如果你正在为你自己的服务器寻找一个轻量级的解决方案，你可以使用MicroK8s https://microk8s.io/</p><h2 id="e807" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">舵</h2><p id="3010" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">一旦你有你的K8s集群运行，我们将安装头盔。Helm使用“图表”来存储软件K8s部署架构的配置。然后可以通过存储库共享图表。</p><p id="1f89" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">使用Helm <a class="ae lb" href="https://helm.sh/docs/intro/quickstart/" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>在K8s集群上安装Helm v3。</p><p id="ce2a" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">你可以在https://github.com/vulcanlink/charts的<a class="ae lb" href="https://github.com/vulcanlink/charts" rel="noopener ugc nofollow" target="_blank">找到火神链接图(正在开发中)。虽然您可以使用Helm CLI来部署这些图表，但是KubeApps </a>将允许您使用更直观的前端来部署这些图表。</p><h2 id="5dee" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">KubeApps</h2><p id="933d" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">KubeApps是Bitnami开发的开源UI前端，旨在帮助您管理K8s部署。一旦KubeApps部署到您的K8s集群上，您将能够通过点击一个按钮来部署舵图表。按照<a class="ae lb" href="https://github.com/kubeapps/kubeapps/blob/master/docs/user/getting-started.md" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>使用Helm v3在K8s集群上安装KubeApps。</p><h1 id="a669" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">KubeApps Chainlink部署</h1><h2 id="c944" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">使用KubeApps</h2><p id="a645" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">现在KubeApps正在运行，这就是奇迹发生的地方。如果你遵循KubeApps入门指南，你应该可以在<a class="ae lb" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>访问KubeApps。</p><p id="175a" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">如果不能，请确保您正在端口转发kubeapps服务。</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="8a1a" class="lv jg ht mo b fv ms mt l mu mv">kubectl port-forward -n kubeapps svc/kubeapps 8080:80</span></pre><p id="2662" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">“应用程序”页面将向您显示当前在您的集群上部署的舵图表。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mw"><img src="../Images/f8d3dbdaddd36b6b633b298836ed0280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qK_VmQPsPxndhq0k4_4QGw.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">KubeApps deployed charts</figcaption></figure><p id="0d6d" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">“Catalog”页面列出了您可以选择在集群上部署的图表，这是一种用于K8s部署的应用程序商店。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mx"><img src="../Images/b9f11f8fcd452a3e83e5ff370cc226ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZaZXVgO-bfpkJcY4Tu0ZKA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">KubeApps chart catalog</figcaption></figure><p id="4002" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">如果希望在K8s集群上部署PostgreSQL服务器，可以通过搜索PostgreSQL并部署相应的图表来实现。请继续阅读，因为其步骤与我们部署Chainlink节点的步骤相似。</p><p id="e670" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">在右上角，您可以在集群上的不同名称空间之间切换。一般来说，只需为您的部署使用“默认”名称空间。</p><h2 id="f15e" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">添加Vulcan连接图报告</h2><p id="ff85" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">链接节点不是目录的一部分，因为“@stable”储存库不包含链接图表。然而，Vulcan Link已经为Chainlink创建了一个头盔图，并将其部署到我们自己的独立头盔库中，托管在GitHub上。</p><p id="fb01" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">要添加Vulcan Link repo，首先将名称空间更改为“All Namespaces ”,以便将repo添加到所有名称空间。转到“配置&gt;应用程序存储库”。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff my"><img src="../Images/4785290e58386709a161566e759634ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMq5V8QgQaSjH4chDlFOxA.png"/></div></div><figcaption class="jb jc fg fe ff jd je bd b be z ek">Add an Helm Chart Repository to KubeApps</figcaption></figure><p id="bdec" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">单击“添加应用程序存储库”并使用这些值:</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="021e" class="lv jg ht mo b fv ms mt l mu mv">name: vulcanlink<br/>url: <a class="ae lb" href="https://vulcanlink.github.io/charts/" rel="noopener ugc nofollow" target="_blank">https://vulcanlink.github.io/charts/</a></span></pre><p id="fbba" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">现在，您应该能够在目录页面上查看Vulcan链路图表。要测试这一点，只需在目录搜索栏中键入“vulcanlink”。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff mz"><img src="../Images/144926741a7acb6d533fb3af90a60891.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8o59XM2FWy_TyT5gSnOpQ.png"/></div></div></figure><h2 id="5e74" class="lv jg ht bd jh lw lx ly jl lz ma mb jp ko mc md jt ks me mf jx kw mg mh kb mi dt translated">部署链节节点</h2><p id="d94a" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">将名称空间切换回“默认”，选择“chainlink”图表，然后单击“部署”。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff na"><img src="../Images/7ce990d8d1e449ba0a585c1c69da950d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9woUgTZzYY-BcrT-UTDQw.png"/></div></div></figure><p id="1488" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">现在可以使用该表单输入环境变量，比如以太坊节点和PostgreSQL数据库的URL。您还可以通过编辑Values部分下的config键来添加其他环境变量。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nb"><img src="../Images/fcde97dd638abab1ee633d8f6ccdf1f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QH2dytOravu3Hp0GkDB4ug.png"/></div></div></figure><p id="4c31" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">单击submit后，您的Chainlink部署应该会在“Applications”部分弹出。</p><figure class="mj mk ml mm fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="iv iw di ix bf iy"><div class="fe ff nc"><img src="../Images/c003cc39faa2521dfc6e88db2eccc9ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d01uBcpq3F-Hc5avderVgA.png"/></div></div></figure><p id="0497" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">当然，CLI命令还应该显示Chainlink节点已经正确部署。</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="c444" class="lv jg ht mo b fv ms mt l mu mv">kubectl get deployments    #Using K8s API<br/>helm ls                    #Using Helm</span></pre><p id="06e9" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">要访问Chainlink UI，请遵循“Notes”中的命令:</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="1037" class="lv jg ht mo b fv ms mt l mu mv">1. Get the application URL by running these commands:<br/>  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=chainlink,app.kubernetes.io/instance=panoramic-shape" -o jsonpath="{.items[0].metadata.name}")<br/>  echo "Visit http://127.0.0.1:8080 to use your application"<br/>  kubectl --namespace default port-forward $POD_NAME 8080:6688</span></pre><p id="4209" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated"><em class="nd">如果你已经在8080 </em>上使用KubeApps，你可能需要将8080端口改为8081</p><p id="d713" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">您现在应该能够访问位于<a class="ae lb" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>的Chainlink节点仪表板</p><h1 id="ff24" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">剧终</h1><p id="5187" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">就是这样！您的链接节点已部署！现在剩下要做的就是建立一个链上Oracle契约，并为您的节点提供资金，以开始<a class="ae lb" href="https://docs.chain.link/docs/fulfilling-requests" rel="noopener ugc nofollow" target="_blank">满足请求</a>。</p><h1 id="fa5b" class="jf jg ht bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dt translated">关于瓦肯链接</h1><p id="b779" class="pw-post-body-paragraph kd ke ht kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hm dt translated">我们是一家总部位于巴黎的Chainlink node运营商，致力于积极维护30多种可靠的数据馈送，并开发分散式应用程序，利用智能合约处理外部数据。我们相信通过为开源项目做贡献来建立信任。如果您希望我们向<a class="ae lb" href="http://feeds.link/" rel="noopener ugc nofollow" target="_blank"> feeds.link </a>添加其他数据，请随时通过下面的链接联系我们！</p><p id="b02b" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">在<a class="ae lb" href="http://vulcan.link/" rel="noopener ugc nofollow" target="_blank"> vulcan.link </a>找到我们</p><p id="05c0" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">在Twitter<a class="ae lb" href="https://twitter.com/vulcanlink" rel="noopener ugc nofollow" target="_blank"><strong class="kf hu">@ Vulcan link</strong></a>上关注我们，了解像这样的新项目的更新。</p><p id="352c" class="pw-post-body-paragraph kd ke ht kf b kg lc ki kj kk ld km kn ko le kq kr ks lf ku kv kw lg ky kz la hm dt translated">如果你愿意投稿，请加入我们的<a class="ae lb" href="https://t.me/vulcanlink" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu">电报</strong> </a>和<a class="ae lb" href="https://discord.gg/uGwqJJH" rel="noopener ugc nofollow" target="_blank"> <strong class="kf hu">不和</strong> </a></p><blockquote class="ne"><p id="1c95" class="nf ng ht bd nh ni nj nk nl nm nn la ek translated"><a class="ae lb" href="https://coincodecap.com/?utm_source=coinmonks" rel="noopener ugc nofollow" target="_blank">直接在您的收件箱中获得最佳软件交易</a></p></blockquote><figure class="np nq nr ns nt iu fe ff paragraph-image"><a href="https://coincodecap.com/?utm_source=coinmonks"><div class="fe ff no"><img src="../Images/7c0b3dfdcbfea594cc0ae7d4f9bf6fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*OJ-qb5G6i863msBB.png"/></div></a></figure></div></div>    
</body>
</html>